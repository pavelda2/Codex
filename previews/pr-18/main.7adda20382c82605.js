"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{531(){let Fa;function sl(){return Fa}function hi(t){const e=Fa;return Fa=t,e}const x3=Symbol("NotFound");function Yy(t){return t===x3||"\u0275NotFound"===t?.name}Error;let cn=null,al=!1,Jy=1;const zt=Symbol("SIGNAL");function ae(t){const e=cn;return cn=t,e}const Ua={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cl(t){if(al)throw new Error("");if(null===cn)return;cn.consumerOnSignalRead(t);const e=cn.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=cn.recomputing;if(r&&(n=void 0!==e?e.nextProducer:cn.producers,void 0!==n&&n.producer===t))return cn.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===cn&&(!r||function F3(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,cn)))return;const o=Ba(cn),s={producer:t,consumer:cn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};cn.producersTail=s,void 0!==e?e.nextProducer=s:cn.producers=s,o&&yP(t,s)}function ul(t){if((!Ba(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Jy)){if(!t.producerMustRecompute(t)&&!xf(t))return void Nf(t);t.producerRecomputeValue(t),Nf(t)}}function mP(t){if(void 0===t.consumers)return;const e=al;al=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||O3(r)}}finally{al=e}}function _P(){return!1!==cn?.consumerAllowSignalWrites}function O3(t){t.dirty=!0,mP(t),t.consumerMarkedDirty?.(t)}function Nf(t){t.dirty=!1,t.lastCleanEpoch=Jy}function ja(t){return t&&function V3(t){t.producersTail=void 0,t.recomputing=!0}(t),ae(t)}function ll(t,e){ae(e),t&&function L3(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Ba(t))do{n=ev(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function xf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ul(n),r!==n.version))return!0}return!1}function dl(t){if(Ba(t)){let e=t.producers;for(;void 0!==e;)e=ev(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function yP(t,e){const n=t.consumersTail,r=Ba(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)yP(i.producer,i)}function ev(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Ba(e)){let o=e.producers;for(;void 0!==o;)o=ev(o)}return n}function Ba(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function nv(t,e){return Object.is(t,e)}const is=Symbol("UNSET"),$a=Symbol("COMPUTING"),Zi=Symbol("ERRORED"),j3={...Ua,value:is,dirty:!0,error:null,equal:nv,kind:"computed",producerMustRecompute:t=>t.value===is||t.value===$a,producerRecomputeValue(t){if(t.value===$a)throw new Error("");const e=t.value;t.value=$a;const n=ja(t);let r,i=!1;try{r=t.computation(),ae(null),i=e!==is&&e!==Zi&&r!==Zi&&t.equal(e,r)}catch(o){r=Zi,t.error=o}finally{ll(t,n)}i?t.value=e:(t.value=r,t.version++)}};let vP=function B3(){throw new Error};function IP(t){vP(t)}function H3(t,e){const n=Object.create(rv);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function q3(t){return cl(t),t.value}(n);return r[zt]=n,[r,s=>Of(n,s),s=>function EP(t,e){_P()||IP(t),Of(t,e(t.value))}(n,s)]}function Of(t,e){_P()||IP(t),t.equal(t.value,e)||(t.value=e,function z3(t){t.version++,function k3(){Jy++}(),mP(t)}(t))}const rv={...Ua,equal:nv,value:void 0,kind:"signal"};function rt(t){return"function"==typeof t}function iv(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ov=iv(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function sv(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Sn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(rt(r))try{r()}catch(o){e=o instanceof ov?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{bP(o)}catch(s){e=e??[],s instanceof ov?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ov(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bP(e);else{if(e instanceof Sn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&sv(n,e)}remove(e){const{_finalizers:n}=this;n&&sv(n,e),e instanceof Sn&&e._removeParent(this)}}Sn.EMPTY=(()=>{const t=new Sn;return t.closed=!0,t})();const wP=Sn.EMPTY;function TP(t){return t instanceof Sn||t&&"closed"in t&&rt(t.remove)&&rt(t.add)&&rt(t.unsubscribe)}function bP(t){rt(t)?t():t.unsubscribe()}const os={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vf={setTimeout(t,e,...n){const{delegate:r}=Vf;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Vf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function CP(t){Vf.setTimeout(()=>{const{onUnhandledError:e}=os;if(!e)throw t;e(t)})}function av(){}const G3=cv("C",void 0,void 0);function cv(t,e,n){return{kind:t,value:e,error:n}}let ss=null;function Lf(t){if(os.useDeprecatedSynchronousErrorHandling){const e=!ss;if(e&&(ss={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ss;if(ss=null,n)throw r}}else t()}class uv extends Sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,TP(e)&&e.add(this)):this.destination=X3}static create(e,n,r){return new dv(e,n,r)}next(e){this.isStopped?hv(function K3(t){return cv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?hv(function W3(t){return cv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hv(G3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Y3=Function.prototype.bind;function lv(t,e){return Y3.call(t,e)}class J3{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ff(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ff(r)}else Ff(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ff(n)}}}class dv extends uv{constructor(e,n,r){let i;if(super(),rt(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&os.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lv(e.next,o),error:e.error&&lv(e.error,o),complete:e.complete&&lv(e.complete,o)}):i=e}this.destination=new J3(i)}}function Ff(t){os.useDeprecatedSynchronousErrorHandling?function Q3(t){os.useDeprecatedSynchronousErrorHandling&&ss&&(ss.errorThrown=!0,ss.error=t)}(t):CP(t)}function hv(t,e){const{onStoppedNotification:n}=os;n&&Vf.setTimeout(()=>n(t,e))}const X3={closed:!0,next:av,error:function Z3(t){throw t},complete:av},fv="function"==typeof Symbol&&Symbol.observable||"@@observable";function as(t){return t}function SP(t){return 0===t.length?as:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Nt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function nG(t){return t&&t instanceof uv||function tG(t){return t&&rt(t.next)&&rt(t.error)&&rt(t.complete)}(t)&&TP(t)}(n)?n:new dv(n,r,i);return Lf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=AP(r))((i,o)=>{const s=new dv({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[fv](){return this}pipe(...n){return SP(n)(this)}toPromise(n){return new(n=AP(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function AP(t){var e;return null!==(e=t??os.Promise)&&void 0!==e?e:Promise}const rG=iv(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Fn=(()=>{class t extends Nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new DP(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rG}next(n){Lf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Lf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Lf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?wP:(this.currentObservers=null,o.push(n),new Sn(()=>{this.currentObservers=null,sv(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Nt;return n.source=this,n}}return t.create=(e,n)=>new DP(e,n),t})();class DP extends Fn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:wP}}class dr extends Fn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const PP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class U extends Error{code;constructor(e,n){super(Lr(e,n)),this.code=e}}function Lr(t,e){return`${function iG(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const _t=globalThis;function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("")}function oG(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Un(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Un).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function pv(t,e){return t?e?`${t} ${e}`:t:e||""}const sG=Oe({__forward_ref__:Oe});function et(t){return t.__forward_ref__=et,t.toString=function(){return Un(this())},t}function pe(t){return jf(t)?t():t}function jf(t){return"function"==typeof t&&t.hasOwnProperty(sG)&&t.__forward_ref__===et}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hl(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bf(t){return function fG(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Hf)}function $f(t){return t&&t.hasOwnProperty(gv)?t[gv]:null}const Hf=Oe({\u0275prov:Oe}),gv=Oe({\u0275inj:Oe});class H{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _v(t){return t&&!!t.\u0275providers}const yv=Oe({\u0275cmp:Oe}),vG=Oe({\u0275dir:Oe}),IG=Oe({\u0275pipe:Oe}),MP=Oe({\u0275mod:Oe}),us=Oe({\u0275fac:Oe}),gl=Oe({__NG_ELEMENT_ID__:Oe}),NP=Oe({__NG_ENV_ID__:Oe});function le(t){return"string"==typeof t?t:null==t?"":String(t)}const vv=Oe({ngErrorCode:Oe}),xP=Oe({ngErrorMessage:Oe}),ml=Oe({ngTokenPath:Oe});function Iv(t,e){return kP("",-200,e)}function Ev(t,e){throw new U(-201,!1)}function kP(t,e,n){const r=new U(e,t);return r[vv]=e,r[xP]=t,n&&(r[ml]=n),r}let wv;function OP(){return wv}function jn(t){const e=wv;return wv=t,e}function VP(t,e,n){const r=Bf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void Ev()}const ls={};class SG{injector;constructor(e){this.injector=e}retrieve(e,n){const r=_l(n)||0;try{return this.injector.get(e,8&r?null:ls,r)}catch(i){if(Yy(i))return i;throw i}}}function AG(t,e=0){const n=sl();if(void 0===n)throw new U(-203,!1);if(null===n)return VP(t,void 0,e);{const r=function DG(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(Yy(i)){if(r.optional)return null;throw i}return i}}function Ee(t,e=0){return(OP()||AG)(pe(t),e)}function O(t,e){return Ee(t,_l(e))}function _l(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function bv(t){const e=[];for(let n=0;n<t.length;n++){const r=pe(t[n]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=RG(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(Ee(i,o))}else e.push(Ee(r))}return e}function RG(t){return t.__NG_DI_FLAG__}function ds(t,e){return t.hasOwnProperty(us)?t[us]:null}function Ha(t,e){t.forEach(n=>Array.isArray(n)?Ha(n,e):e(n))}function FP(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function zf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Wf(t,e,n){let r=vl(t,e);return r>=0?t[1|r]=n:(r=~r,function jP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Cv(t,e){const n=vl(t,e);if(n>=0)return t[1|n]}function vl(t,e){return function MG(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Fr={},tt=[],eo=new H(""),BP=new H("",-1),Sv=new H("");class Kf{get(e,n=ls){if(n===ls){const i=kP("",-201);throw i.name="\u0275NotFound",i}return n}}function Ur(t){return t[MP]||null}function Le(t){return t[yv]||null}function An(t){return t[vG]||null}function wr(t){return t[IG]||null}function xG(...t){return{\u0275providers:Rv(0,t),\u0275fromNgModule:!0}}function Rv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ha(e,s=>{const a=s;Qf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&$P(i,o),n}function $P(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Pv(i,o=>{e(o,r)})}}function Qf(t,e,n,r){if(!(t=pe(t)))return!1;let i=null,o=$f(t);const s=!o&&Le(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=$f(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Qf(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Ha(o.imports,d=>{Qf(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&$P(u,e)}if(!a){const u=ds(i)||(()=>new i);e({provide:i,useFactory:u,deps:tt},i),e({provide:Sv,useValue:i,multi:!0},i),e({provide:eo,useValue:()=>Ee(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;Pv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function Pv(t,e){for(let n of t)_v(n)&&(n=n.\u0275providers),Array.isArray(n)?Pv(n,e):e(n)}const kG=Oe({provide:String,useValue:Oe});function Mv(t){return null!==t&&"object"==typeof t&&kG in t}function fi(t){return"function"==typeof t}const Nv=new H(""),Yf={},GP={};let xv;function kv(){return void 0===xv&&(xv=new Kf),xv}class Dn{}class hs extends Dn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Vv(e,s=>this.processProvider(s)),this.records.set(BP,za(void 0,this)),i.has("environment")&&this.records.set(Dn,za(void 0,this));const o=this.records.get(Nv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Sv,tt,{self:!0}))}retrieve(e,n){const r=_l(n)||0;try{return this.get(e,ls,r)}catch(i){if(Yy(i))return i;throw i}}destroy(){Il(this),this._destroyed=!0;const e=ae(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(e)}}onDestroy(e){return Il(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Il(this);const n=hi(this),r=jn(void 0);try{return e()}finally{hi(n),jn(r)}}get(e,n=ls,r){if(Il(this),e.hasOwnProperty(NP))return e[NP](this);const i=_l(r),s=hi(this),a=jn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function UG(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&Bf(e);u=d&&this.injectableDefInScope(d)?za(Ov(e),Yf):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?kv():this.parent).get(e,n=8&i&&n===ls?null:n)}catch(c){const u=function bG(t){return t[vv]}(c);throw-200===u||-201===u?new U(u,null):c}finally{jn(a),hi(s)}}resolveInjectorInitializers(){const e=ae(null),n=hi(this),r=jn(void 0);try{const o=this.get(eo,tt,{self:!0});for(const s of o)s()}finally{hi(n),jn(r),ae(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Un(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=fi(e=pe(e))?e:pe(e&&e.provide);const r=function VG(t){return Mv(t)?za(void 0,t.useValue):za(WP(t),Yf)}(e);if(!fi(e)&&!0===e.multi){let i=this.records.get(n);i||(i=za(void 0,Yf,!0),i.factory=()=>bv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=ae(null);try{if(n.value===GP)throw Iv(Un(e));return n.value===Yf&&(n.value=GP,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function FG(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ae(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=pe(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Ov(t){const e=Bf(t),n=null!==e?e.factory:ds(t);if(null!==n)return n;if(t instanceof H)throw new U(204,!1);if(t instanceof Function)return function OG(t){if(t.length>0)throw new U(204,!1);const n=function pG(t){return(t?.[Hf]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new U(204,!1)}function WP(t,e,n){let r;if(fi(t)){const i=pe(t);return ds(i)||Ov(i)}if(Mv(t))r=()=>pe(t.useValue);else if(function qP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...bv(t.deps||[]));else if(function HP(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>Ee(pe(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=pe(t&&(t.useClass||t.provide));if(!function LG(t){return!!t.deps}(t))return ds(i)||Ov(i);r=()=>new i(...bv(t.deps))}return r}function Il(t){if(t.destroyed)throw new U(205,!1)}function za(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Vv(t,e){for(const n of t)Array.isArray(n)?Vv(n,e):n&&_v(n)?Vv(n.\u0275providers,e):e(n)}function fr(t,e){let n;t instanceof hs?(Il(t),n=t):n=new SG(t);const i=hi(n),o=jn(void 0);try{return e()}finally{hi(i),jn(o)}}function pt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Rn(t){return Array.isArray(t)&&!0===t[1]}function QP(t){return!!(4&t.flags)}function mi(t){return t.componentOffset>-1}function Ya(t){return!(1&~t.flags)}function Xn(t){return!!t.template}function oo(t){return!!(512&t[2])}function _i(t){return!(256&~t[2])}function Wt(t){for(;Array.isArray(t);)t=t[0];return t}function Ja(t,e){return Wt(e[t])}function kt(t,e){return Wt(e[t.index])}function Za(t,e){return t.data[e]}function Pn(t,e){const n=e[t];return pt(n)?n:n[0]}function Bv(t){return!(128&~t[2])}function dn(t,e){return null==e?null:t[e]}function tM(t){t[17]=0}function nM(t){1024&t[2]||(t[2]|=1024,Bv(t)&&Xa(t))}function ep(t){return!!(9216&t[2]||t[24]?.dirty)}function $v(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),ep(t)&&Xa(t)}function Xa(t){t[10].changeDetectionScheduler?.notify(0);let e=yi(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Bv(e));)e=yi(e)}function tp(t,e){if(_i(t))throw new U(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function yi(t){const e=t[3];return Rn(e)?e[3]:e}function iM(t){return t[7]??=[]}function oM(t){return t.cleanup??=[]}const ce={lFrame:IM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let zv=!1;function sM(){ce.lFrame.elementDepthCount--}function cM(t){return ce.skipHydrationRootTNode===t}function uM(){ce.skipHydrationRootTNode=null}function V(){return ce.lFrame.lView}function ge(){return ce.lFrame.tView}function er(t){return ce.lFrame.contextLView=t,t[8]}function tr(t){return ce.lFrame.contextLView=null,t}function ue(){let t=lM();for(;null!==t&&64===t.type;)t=t.parent;return t}function lM(){return ce.lFrame.currentTNode}function vi(t,e){const n=ce.lFrame;n.currentTNode=t,n.isParent=e}function dM(){return ce.lFrame.isParent}function gM(){return zv}function np(t){const e=zv;return zv=t,e}function Bn(){return ce.lFrame.bindingIndex++}function Ei(t){const e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ZG(t,e){const n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wv(e)}function Wv(t){ce.lFrame.currentDirectiveIndex=t}function Qv(){return ce.lFrame.currentQueryIndex}function rp(t){ce.lFrame.currentQueryIndex=t}function e6(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function yM(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=e6(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ce.lFrame=vM();return r.currentTNode=e,r.lView=t,!0}function Yv(t){const e=vM(),n=t[1];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vM(){const t=ce.lFrame,e=null===t?null:t.child;return null===e?IM(t):e}function IM(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function EM(){const t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const wM=EM;function Jv(){const t=EM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function en(){return ce.lFrame.selectedIndex}function _s(t){ce.lFrame.selectedIndex=t}function jr(){const t=ce.lFrame;return Za(t.tView,t.selectedIndex)}let TM=!0;function ip(){return TM}function bl(t){TM=t}function bM(t,e=null,n=null,r){const i=CM(t,e,n,r);return i.resolveInjectorInitializers(),i}function CM(t,e=null,n=null,r,i=new Set){const o=[n||tt,xG(t)];return r=r||("object"==typeof t?void 0:Un(t)),new hs(o,e||kv(),r||null,i)}class nr{static THROW_IF_NOT_FOUND=ls;static NULL=new Kf;static create(e,n){if(Array.isArray(e))return bM({name:""},n,e,"");{const r=e.name??"";return bM({name:r},e.parent,e.providers,r)}}static \u0275prov=ne({token:nr,providedIn:"any",factory:()=>Ee(BP)});static __NG_ELEMENT_ID__=-1}const Tr=new H("");let Br=(()=>class t{static __NG_ELEMENT_ID__=a6;static __NG_ENV_ID__=n=>n})();class SM extends Br{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _i(this._lView)}onDestroy(e){const n=this._lView;return tp(n,e),()=>function Hv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function a6(){return new SM(V())}class tc{_console=console;handleError(e){this._console.error("ERROR",e)}}const $r=new H("",{providedIn:"root",factory:()=>{const t=O(Dn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(tc),e.handleError(n))}}}),AM={provide:eo,useValue:()=>{O(tc)},multi:!0};function gt(t,e){const[n,r,i]=H3(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=Zv.bind(o),o}function Zv(){const t=this[zt];if(void 0===t.readonlyFn){const e=()=>this();e[zt]=t,t.readonlyFn=e}return t.readonlyFn}let Xv=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=u6})();function u6(){return new Xv(V(),ue())}class ys{}const PM=new H("",{providedIn:"root",factory:()=>!1}),MM=new H(""),NM=new H("");let so=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new dr(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Nt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cl(...t){}let kM=(()=>{class t{static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new l6})}return t})();class l6{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let OM=null;function ao(){return OM}class h6{}let VM=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(f6),providedIn:"platform"})}return t})(),f6=(()=>{class t extends VM{_location;_history;_doc=O(Tr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ao().getBaseHref(this._doc)}onPopState(n){const r=ao().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ao().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function LM(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function FM(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function vs(t){return t&&"?"!==t[0]?`?${t}`:t}let op=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(g6),providedIn:"root"})}return t})();const p6=new H("");let g6=(()=>{class t extends op{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Tr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return LM(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ee(VM),Ee(p6,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sl=(()=>{class t{_subject=new Fn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function y6(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(FM(UM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vs(r))}normalize(n){return t.stripTrailingSlash(function _6(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,UM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=vs;static joinWithSlash=LM;static stripTrailingSlash=FM;static \u0275fac=function(r){return new(r||t)(Ee(op))};static \u0275prov=ne({token:t,factory:()=>function m6(){return new Sl(Ee(op))}(),providedIn:"root"})}return t})();function UM(t){return t.replace(/\/index.html$/,"")}function JM(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){JM(o,r,i,s,a,"next",c)}function a(c){JM(o,r,i,s,a,"throw",c)}s(void 0)})}}function ZM(t){return rt(t?.lift)}function tn(t){return e=>{if(ZM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $t(t,e,n,r,i){return new t5(t,e,n,r,i)}class t5 extends uv{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Fe(t,e){return tn((n,r)=>{let i=0;n.subscribe($t(r,o=>{r.next(t.call(e,o,i++))}))})}function wi(t){return{toString:t}.toString()}class L5{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function dN(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const Ti=(()=>{const t=()=>hN;return t.ngInherit=!0,t})();function hN(t){return t.type.prototype.ngOnChanges&&(t.setInput=U5),F5}function F5(){const t=pN(this),e=t?.current;if(e){const n=t.previous;if(n===Fr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function U5(t,e,n,r,i){const o=this.declaredInputs[r],s=pN(t)||function j5(t,e){return t[fN]=e}(t,{previous:Fr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new L5(u&&u.currentValue,n,c===Fr),dN(t,e,i,n)}const fN="__ngSimpleChanges__";function pN(t){return t[fN]||null}const Es=[],Ue=function(t,e=null,n){for(let r=0;r<Es.length;r++)(0,Es[r])(t,e,n)};function gp(t,e,n){mN(t,e,3,n)}function mp(t,e,n,r){(3&t[2])===n&&mN(t,e,n,r)}function lI(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function mN(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(z5(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function _N(t,e){Ue(4,t,e);const n=ae(null);try{e.call(t)}finally{ae(n),Ue(5,t,e)}}function z5(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,_N(a,o)):_N(a,o)}class xl{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function vN(t){return 3===t||4===t||6===t}function IN(t){return 64===t.charCodeAt(0)}function uc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||EN(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function EN(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function hI(t){return-1!==t}function kl(t){return 32767&t}function Ol(t,e){let n=function Q5(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let fI=!0;function _p(t){const e=fI;return fI=t,e}let Y5=0;const qr={};function yp(t,e){const n=bN(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,pI(r.data,t),pI(e,null),pI(r.blueprint,null));const i=vp(t,e),o=t.injectorIndex;if(hI(i)){const s=kl(i),a=Ol(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function pI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function bN(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function vp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=MN(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function gI(t,e,n){!function J5(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(gl)&&(r=n[gl]),null==r&&(r=n[gl]=Y5++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function CN(t,e,n){if(8&n||void 0!==t)return t;Ev()}function SN(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=jn(void 0);try{return i?i.get(e,r,8&n):VP(e,r,8&n)}finally{jn(o)}}return CN(r,0,n)}function AN(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function n9(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!oo(s);){const a=DN(o,s,n,2|r,qr);if(a!==qr)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,qr,r);if(d!==qr)return d}c=MN(s),s=s[14]}o=c}return i}(t,e,n,r,qr);if(s!==qr)return s}const o=DN(t,e,n,r,qr);if(o!==qr)return o}return SN(e,n,r,i)}function DN(t,e,n,r,i){const o=function e9(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(gl)?t[gl]:void 0;return"number"==typeof e?e>=0?255&e:t9:e}(n);if("function"==typeof o){if(!yM(e,t,r))return 1&r?CN(i,0,r):SN(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;Ev()}finally{wM()}}else if("number"==typeof o){let s=null,a=bN(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?vp(t,e):e[a+8],-1!==c&&PN(r,!1)?(s=e[1],a=kl(c),e=Ol(c,e)):a=-1);-1!==a;){const d=e[1];if(RN(o,a,d.data)){const h=X5(a,e,n,s,r,u);if(h!==qr)return h}c=e[a+8],-1!==c&&PN(r,e[1].data[a+8]===u)&&RN(o,a,e)?(s=d,a=kl(c),e=Ol(c,e)):a=-1}}return i}function X5(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=Ip(a,s,n,null==r?mi(a)&&fI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?Vl(e,s,d,a,i):qr}function Ip(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&Xn(g)&&g.type===n)return c}return null}function Vl(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof xl){const a=o;if(a.resolving)throw function Ae(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():le(t)}(s[n]),Iv();const c=_p(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?jn(a.injectImpl):null;yM(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function q5(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=hN(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&jn(h),_p(c),a.resolving=!1,wM()}}return o}function RN(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function PN(t,e){return!(2&t||1&t&&e)}class It{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return AN(this._tNode,this._lView,e,_l(r),n)}}function t9(){return new It(ue(),V())}function Kt(t){return wi(()=>{const e=t.prototype.constructor,n=e[us]||mI(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[us]||mI(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function mI(t){return jf(t)?()=>{const e=mI(pe(t));return e&&e()}:ds(t)}function MN(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function Ep(t){return function Z5(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(vN(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(ue(),t)}function l9(){return lc(ue(),V())}function lc(t,e){return new br(kt(t,e))}let br=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=l9})();function VN(t){return t instanceof br?t.nativeElement:t}function d9(){return this._results[Symbol.iterator]()}class h9{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function hr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function PG(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=d9}function Ll(t){return!(128&~t.flags)}var Tp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Tp||{});const bp=new Map;let g9=0;function vI(t){bp.delete(t[19])}const EI="__ngContext__";function Hn(t,e){pt(e)?(t[EI]=e[19],function _9(t){bp.set(t[19],t)}(e)):t[EI]=e}function WN(t){return QN(t[12])}function KN(t){return QN(t[4])}function QN(t){for(;null!==t&&!Rn(t);)t=t[4];return t}let wI;const Ul=new H("",{providedIn:"root",factory:()=>U9}),U9="ng",n0=new H(""),r0=new H("",{providedIn:"platform",factory:()=>"unknown"}),i0=new H("",{providedIn:"root",factory:()=>function lo(){if(void 0!==wI)return wI;if(typeof document<"u")return document;throw new U(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),W9=new H("",{providedIn:"root",factory:()=>!1});function Rp(t){return!(32&~t.flags)}function R0(t,e){const n=t.contentQueries;if(null!==n){const r=ae(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];rp(n[i]),a.contentQueries(2,e[s],s)}}}finally{ae(r)}}}function jI(t,e,n){rp(0);const r=ae(null);try{e(t,n)}finally{ae(r)}}function BI(t,e,n){if(QP(e)){const r=ae(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ae(r)}}}var bi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(bi||{});let Lp;function V0(t){return function qI(){if(void 0===Lp&&(Lp=null,_t.trustedTypes))try{Lp=_t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Lp}()?.createScriptURL(t)||t}class L0{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PP})`}}function fo(t){return t instanceof L0?t.changingThisBreaksApplicationSecurity:t}function $l(t,e){const n=function PW(t){return t instanceof L0&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PP})`)}return n===e}const kW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Up(t,e,n){return t.createElement(e,n)}function Ts(t,e,n,r,i){t.insertBefore(e,n,r,i)}function K0(t,e,n){t.appendChild(e,n)}function Q0(t,e,n,r,i){null!==r?Ts(t,e,n,r,i):K0(t,e,n)}function ql(t,e,n,r){t.removeChild(null,e,n,r)}function J0(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function K5(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];IN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function KW(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function WW(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var mc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(mc||{});function Z0(t){const e=zl();return e?e.sanitize(mc.URL,t)||"":$l(t,"URL")?fo(t):function zI(t){return(t=String(t)).match(kW)?t:"unsafe:"+t}(le(t))}function X0(t){const e=zl();if(e)return V0(e.sanitize(mc.RESOURCE_URL,t)||"");if($l(t,"ResourceURL"))return V0(fo(t));throw new U(904,!1)}const t8=new Set(["embed","frame","iframe","media","script"]),n8=new Set(["base","link","script"]);function ex(t,e,n){return function r8(t,e){return"src"===e&&t8.has(t)||"href"===e&&n8.has(t)||"xlink:href"===e&&"script"===t?X0:Z0}(e,n)(t)}function zl(){const t=V();return t&&t[10].sanitizer}function zr(t){return t instanceof Function?t():t}function p8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const ox="ng-template";function g8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==p8(e[i+1].toLowerCase(),n,0))return!0}else if(JI(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function JI(t){return 4===t.type&&t.value!==ox}function m8(t,e,n){return e===(4!==t.type||n?t.value:ox)}function _8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function I8(t){for(let e=0;e<t.length;e++)if(vN(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!m8(t,c,n)||""===c&&1===e.length){if(Cr(r))return!1;s=!0}}else if(8&r){if(null===i||!g8(t,i,c,n)){if(Cr(r))return!1;s=!0}}else{const u=e[++a],d=y8(c,i,JI(t),n);if(-1===d){if(Cr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Cr(r))return!1;s=!0}}}}else{if(!s&&!Cr(r)&&!Cr(c))return!1;if(s&&Cr(c))continue;s=!1,r=c|1&r}}return Cr(r)||s}function Cr(t){return!(1&t)}function y8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function E8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function sx(t,e,n=!1){for(let r=0;r<e.length;r++)if(_8(t,e[r],n))return!0;return!1}function ax(t,e){return t?":not("+e.trim()+")":e}function T8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Cr(s)&&(e+=ax(o,i),i=""),r=s,o=o||!Cr(r);n++}return""!==i&&(e+=ax(o,i)),e}const je={};function ZI(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function S8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:je);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function Bp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),tM(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function m9(){return g9++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function XI(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Gl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eE(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function X(t=1){ux(ge(),V(),en()+t,!1)}function ux(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&mp(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&gp(e,o,n)}_s(n)}var $p=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($p||{});function Wl(t,e,n,r){const i=ae(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&$p.SignalBased)&&(c=e[o][zt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):dN(e,c,o,r)}finally{ae(i)}}var bs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bs||{});function nE(t,e){return undefined(t,e)}const Cs=new Set;var rE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(rE||{});const Kl=new H(""),fx=new Set;function fn(t){fx.has(t)||(fx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const px=!1,Ot=class x8 extends Fn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Lv(){return void 0!==OP()||null!=sl()}()&&(this.destroyRef=O(Br,{optional:!0})??void 0,this.pendingTasks=O(so,{optional:!0})??void 0)}emit(e){const n=ae(null);try{super.next(e)}finally{ae(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Sn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function gx(t){let e,n;function r(){t=Cl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function mx(t){return queueMicrotask(()=>t()),()=>{t=Cl}}const iE="isAngularZone",qp=iE+"_ID";let k8=0;class Ve{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ot(!1);onMicrotaskEmpty=new Ot(!1);onStable=new Ot(!1);onError=new Ot(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=px}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function L8(t){const e=()=>{!function V8(t){function e(){gx(()=>{t.callbackScheduled=!1,sE(t),t.isCheckStableRunning=!0,oE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),sE(t))}(t)},n=k8++;t._inner=t._inner.fork({name:"angular",properties:{[iE]:!0,[qp]:n,[qp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function F8(t){return vx(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return _x(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),yx(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return _x(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function U8(t){return vx(t,"__scheduler_tick__")}(c)&&e(),yx(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,sE(t),oE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(iE)}static assertInAngularZone(){if(!Ve.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(Ve.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,O8,Cl,Cl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const O8={};function oE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function _x(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yx(t){t._nesting--,oE(t)}class aE{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ot;onMicrotaskEmpty=new Ot;onStable=new Ot;onError=new Ot;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function vx(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let Ix=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new t})}return t})();const zp=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function bx(t,e,n){const r=t.get(zp);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Cx(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function uE(t,e){for(const[n,r]of e)bx(t,r.animateFns)}(r,i)}function vc(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;Rn(i)?c=i:pt(i)&&(u=!0,i=i[0]);const d=Wt(i);0===t&&null!==r?(Cx(a,r,o,n),null==s?K0(e,r,d):Ts(e,r,d,s||null,!0)):1===t&&null!==r?(Cx(a,r,o,n),Ts(e,r,d,s||null,!0)):2===t?Dx(a,o,n,h=>{ql(e,d,u,h)}):3===t&&Dx(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function Z8(t,e,n,r,i,o,s){const a=r[7];a!==Wt(r)&&vc(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];Kp(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function Ax(t,e){e[10].changeDetectionScheduler?.notify(9),Kp(t,e,e[11],2,null,null)}function lE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Ql(t,e){if(_i(e))return;const n=e[11];n.destroyNode&&Kp(t,e,n,3,null,null),function W8(t){let e=t[12];if(!e)return dE(t[1],t);for(;e;){let n=null;if(pt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)pt(e)&&dE(e[1],e),e=e[3];null===e&&(e=t),pt(e)&&dE(e[1],e),n=e&&e[4]}e=n}}(e)}function dE(t,e){if(_i(e))return;const n=ae(null);try{e[2]&=-129,e[2]|=256,e[24]&&dl(e[24]),function Y8(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof xl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Ue(4,a,c);try{c.call(a)}finally{Ue(5,a,c)}}else{Ue(4,i,o);try{o.call(i)}finally{Ue(5,i,o)}}}}}(t,e),function Q8(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Rn(e[3])){r!==e[3]&&lE(r,e);const i=e[18];null!==i&&i.detachView(t)}vI(e)}finally{ae(n)}}function Dx(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Cs.add(t),bx(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function K8(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Cs.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Cs.delete(t),r(!1)},i)}function hE(t,e,n){return function Rx(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(mi(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===bi.None||i===bi.Emulated)return null}return kt(r,n)}(t,e.parent,n)}let Nx=function Mx(t,e,n){return 40&t.type?kt(t,n):null};function pE(t,e,n,r){const i=hE(t,r,e),o=e[11],a=function Px(t,e,n){return Nx(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)Q0(o,i,n[c],a,!1);else Q0(o,i,n,a,!1)}function Ss(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return Wp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ss(t,r);{const i=t[e.index];return Rn(i)?Wp(-1,i):Wt(i)}}if(128&n)return Ss(t,e.next);if(32&n)return nE(e,t)()||Wt(t[e.index]);{const r=kx(t,e);return null!==r?Array.isArray(r)?r[0]:Ss(yi(t[15]),r):Ss(t,e.next)}}return null}function kx(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Wp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ss(r,i)}return e[7]}function gE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&Hn(Wt(c),r),n.flags|=2),!Rp(n))if(8&u)gE(t,e,n.child,r,i,o,!1),vc(e,t,a,i,c,n,o,r);else if(32&u){const d=nE(n,r);let h;for(;h=d();)vc(e,t,a,i,h,n,o,r);vc(e,t,a,i,c,n,o,r)}else 16&u?Ox(t,e,r,n,i,o):vc(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Kp(t,e,n,r,i,o){gE(n,r,t.firstChild,e,i,o,!1)}function Ox(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)vc(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];Ll(r)&&(u.flags|=128),gE(t,e,u,d,i,o,!0)}}function Vx(t,e,n,r,i){const o=en(),s=2&r;try{_s(-1),s&&e.length>27&&ux(t,e,27,!1),Ue(s?2:0,i,n),n(r,i)}finally{_s(o),Ue(s?3:1,i,n)}}function Qp(t,e,n){(function i7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;mi(n)&&function A8(t,e,n){const r=kt(e,t),i=function cx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ZI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=eE(t,Bp(t,i,null,XI(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||yp(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=Vl(e,t,s,n);Hn(c,e),null!==o&&c7(0,s-r,c,a,0,o),Xn(a)&&(Pn(n.index,e)[8]=Vl(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function o7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function XG(){return ce.lFrame.currentDirectiveIndex}();try{_s(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];Wv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&s7(c,u)}}finally{_s(-1),Wv(s)}}(t,e,n)}function Ic(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let Lx=()=>null;function mE(t,e,n,r,i,o){Xp(t,e[1],e,n,r)?mi(t)&&function Fx(t,e){const n=Pn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function r7(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),_E(t,e,n,r,i,o))}function _E(t,e,n,r,i,o){if(3&t.type){const s=kt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function s7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function yE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];sx(e,o.selectors,!1)&&(r??=[],Xn(o)?r.unshift(o):r.push(o))}return r}function c7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)Wl(r,n,s[a],s[a+1])}function Jp(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,vi(t,!0);const c=2===t.type;return c?(J0(e[11],a,t),(0===function WG(){return ce.lFrame.elementDepthCount}()||Ya(t))&&Hn(a,e),function KG(){ce.lFrame.elementDepthCount++}()):Hn(a,e),ip()&&(!c||!Rp(t))&&pE(s,e,a,t),t}function Zp(t){let e=t;return dM()?function hM(){ce.lFrame.isParent=!1}():(e=e.parent,vi(e,!1)),e}function Xp(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];Wl(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)Wl(e.data[c],n[c],r,i),a=!0;return a}function l7(t,e){const n=Pn(e,t),r=n[1];!function d7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),Ue(18),eg(r,n,n[8]),Ue(19,n[8])}function eg(t,e,n){Yv(e);try{const r=t.viewQuery;null!==r&&jI(1,r,n);const i=t.template;null!==i&&Vx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&R0(t,e),t.staticViewQueries&&jI(2,t.viewQuery,n);const o=t.components;null!==o&&function h7(t,e){for(let n=0;n<e.length;n++)l7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Jv()}}function Ec(t,e,n,r){const i=ae(null);try{const o=e.tView,c=Bp(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),eg(o,c,n),c}finally{ae(i)}}function As(t,e){return!e||null===e.firstChild||Ll(t)}function Yl(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Wt(o)),Rn(o)&&f7(o,r);const s=n.type;if(8&s)Yl(t,e,n.child,r);else if(32&s){const a=nE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=kx(e,n);if(Array.isArray(a))r.push(...a);else{const c=yi(e[15]);Yl(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function f7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&Yl(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function Bx(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let $x=[];const _7={...Ua,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Xa(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},v7={...Ua,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=yi(t.lView);for(;e&&!Hx(e[1]);)e=yi(e);e&&nM(e)},consumerOnSignalRead(){this.lView[24]=this}};function Hx(t){return 2!==t.type}function qx(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function tg(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function E7(t,e){const n=gM();try{np(!0),IE(t,e);let r=0;for(;ep(t);){if(100===r)throw new U(103,!1);r++,IE(t,1)}}finally{np(n)}}(t,e)}finally{r.end?.()}}function zx(t,e,n,r){if(_i(e))return;const i=e[2];Yv(e);let a=!0,c=null,u=null;Hx(t)?(u=function p7(t){return t[24]??function g7(t){const e=$x.pop()??Object.create(_7);return e.lView=t,e}(t)}(e),c=ja(u)):null===function Xy(){return cn}()?(a=!1,u=function y7(t){const e=t[24]??Object.create(v7);return e.lView=t,e}(e),c=ja(u)):e[24]&&(dl(e[24]),e[24]=null);try{tM(e),function mM(t){return ce.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Vx(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&gp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&mp(e,g,0,null),lI(e,0)}if(function w7(t){for(let e=WN(t);null!==e;e=KN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)nM(n[r])}}(e),qx(e),Gx(e,0),null!==t.contentQueries&&R0(t,e),d){const g=t.contentCheckHooks;null!==g&&gp(e,g)}else{const g=t.contentHooks;null!==g&&mp(e,g,1),lI(e,1)}!function b7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)_s(~i);else{const o=i,s=n[++r],a=n[++r];ZG(s,o);const c=e[o];Ue(24,c),a(2,c),Ue(25,c)}}}finally{_s(-1)}}(t,e);const h=t.components;null!==h&&Kx(e,h,0);const f=t.viewQuery;if(null!==f&&jI(2,f,r),d){const g=t.viewCheckHooks;null!==g&&gp(e,g)}else{const g=t.viewHooks;null!==g&&mp(e,g,2),lI(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}Bx(e),e[2]&=-73}catch(d){throw Xa(e),d}finally{null!==u&&(ll(u,c),a&&function m7(t){t.lView[24]!==t&&(t.lView=null,$x.push(t))}(u)),Jv()}}function Gx(t,e){for(let n=WN(t);null!==n;n=KN(n))for(let r=10;r<n.length;r++)Wx(n[r],e)}function T7(t,e,n){Ue(18);const r=Pn(e,t);Wx(r,n),Ue(19,r[8])}function Wx(t,e){Bv(t)&&IE(t,e)}function IE(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!xf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)zx(r,t,r.template,t[8]);else if(8192&i){const a=ae(null);try{qx(t),Gx(t,1);const c=r.components;null!==c&&Kx(t,c,1),Bx(t)}finally{ae(a)}}}function Kx(t,e,n){for(let r=0;r<e.length;r++)T7(t,e[r],n)}function wc(t,e){const n=gM()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=yi(t);if(oo(t)&&!r)return t;t=r}return null}function Qx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Yx(t,e){const n=10+e;if(n<t.length)return t[n]}function Tc(t,e,n,r=!0){const i=e[1];if(function C7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],FP(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&Jx(s,e);const a=e[18];null!==a&&a.insertView(t),$v(e),e[2]|=128}(i,e,t,n),r){const s=Wp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function G8(t,e,n,r,i,o){r[0]=i,r[5]=e,Kp(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function EE(t,e){const n=Jl(t,e);return void 0!==n&&Ql(n[1],n),n}function Jl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&lE(i,r),e>0&&(t[n-1][4]=r[4]);const o=zf(t,10+e);!function Sx(t,e){Ax(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Jx(t,e){const n=t[9],r=e[3];(pt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Zl{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return Yl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return _i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Rn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Jl(e,r),zf(n,r))}this._attachedToViewContainer=!1}Ql(this._lView[1],this._lView)}onDestroy(e){tp(this._lView,e)}markForCheck(){wc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){$v(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,tg(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=oo(this._lView),n=this._lView[16];null!==n&&!e&&lE(n,this._lView),Ax(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;const n=oo(this._lView),r=this._lView[16];null!==r&&!n&&Jx(r,this._lView),$v(this._lView)}}let ng=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=S7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=Ec(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Zl(o)}})();function S7(){return rg(ue(),V())}function rg(t,e){return 4&t.type?new ng(e,t,lc(t,e)):null}function Ds(t,e,n,r,i){let o=t.data[e];if(null===o)o=function CE(t,e,n,r,i){const o=lM(),s=dM(),c=t.data[e]=function O7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function aM(){return null!==ce.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function k7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function JG(){return ce.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Tl(){const t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return vi(o,!0),o}function mk(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;ql(e,r,!1),r=o,n++}}}let _K=class{},wk=class{};class yK{resolveComponentFactory(e){throw new U(917,!1)}}let dg=class{static NULL=new yK};class NE{}let Ps=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function vK(){const t=V(),n=Pn(ue().index,t);return(pt(n)?n:t)[11]}()})(),IK=(()=>{class t{static \u0275prov=ne({token:t,providedIn:"root",factory:()=>null})}return t})();const kE={};class Cc{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,kE,r);return i!==kE||n===kE?i:this.parentInjector.get(e,n,r)}}function fg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=pv(i,a):2==o&&(r=pv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Z(t,e=0){const n=V();return null===n?Ee(t,e):AN(ue(),n,pe(t),e)}function SK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ck(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),Ak(e,o)}}function Sk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ak(e,s)}}function Ak(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function Dk(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||JI(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function RK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ds(i.type)),s=new xl(o,Xn(i),Z,null);t.blueprint[r]=s,n[r]=s,function PK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function MK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Gl(t,n,i.hostVars,je),i)}function NK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xn(e)&&(n[""]=t)}}function OE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=Ds(c,t,n,r,dn(u,s));return o&&function bk(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function AK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&Xn(g)&&(c=!0,SK(t,n,f)),gI(yp(n,e),t,g.type)}!function xK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Gl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=uc(n.mergedAttrs,g.hostAttrs),RK(t,n,e,h,g),NK(h,g,i),null!==s&&s.has(g)){const[v,w]=s.get(g);n.directiveToIndex.set(g.type,[h,v+n.directiveStart,w+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function DK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);Sk(0,e,o,r),Sk(1,e,o,r),Dk(e,r,!0)}else Ck(0,e,i,r),Ck(1,e,i,r),Dk(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function CK(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new U(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,dn(u,a),i),h.mergedAttrs=uc(h.mergedAttrs,h.attrs),null!==h.attrs&&fg(h,h.attrs,!1),null!==h.mergedAttrs&&fg(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function VE(t,e){(function gN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),QP(e)&&t.queries.elementEnd(e)}function it(t,e,n){return n!==je&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function ud(t,e,n){return function r(i){wc(mi(t)?Pn(t.index,e):e,5);const s=e[8];let a=Pk(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Pk(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Pk(t,e,n,r){const i=ae(null);try{return Ue(6,e,n),!1!==n(r)}catch(o){return function vE(t,e){const n=t[9];if(!n)return;let r;try{r=n.get($r,null)}catch{r=null}r?.(e)}(t,o),!1}finally{Ue(7,e,n),ae(i)}}function Mk(t,e,n,r,i,o,s,a){const c=Ya(t);let u=!1,d=null;if(!r&&c&&(d=function FK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=kt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function LK(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||Nk(r?v=>r(Wt(v[t.index])):t.index,e,n,o,a,g,!1)}return u}function Nk(t,e,n,r,i,o,s){const a=e.firstCreatePass?oM(e):null,c=iM(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function mg(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);Nk(t.index,a,e,i,o,h,!0)}const go=Symbol("BINDING");class xk extends dg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Le(e);return new FE(n,this.ngModule)}}class FE extends wk{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function GK(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&$p.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function WK(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function b8(t){return t.map(T8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ue(22);const a=ae(null);try{const c=this.componentDef,u=function ZK(t,e,n,r){const i=t?["ng-version","20.3.16"]:function C8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Cr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[go].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[go].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=An("function"==typeof d?d:d.type);c.push(f)}return ZI(0,null,function XK(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function KK(t,e,n){let r=e instanceof Dn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new Cc(n,r):n}(c,i||this.ngModule,e),h=function QK(t){const e=t.get(NE,null);if(null===e)throw new U(407,!1);return{rendererFactory:e,sanitizer:t.get(IK,null),changeDetectionScheduler:t.get(ys,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function e7(t,e,n,r){const o=r.get(W9,!1)||n===bi.ShadowDom,s=t.selectRootElement(e,o);return function t7(t){Lx(t)}(s),s}(f,r,c.encapsulation,d):function YK(t,e){const n=function JK(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return Up(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(kk)||o?.some(A=>"function"!=typeof A&&A.bindings.some(kk)),v=Bp(null,u,null,512|XI(c),null,null,h,f,d,null,null);v[27]=g,Yv(v);let w=null;try{const A=OE(27,v,2,"#host",()=>u.directiveRegistry,!0,0);J0(f,g,A),Hn(g,v),Qp(u,v,A),BI(u,A,v),VE(u,A),void 0!==n&&function tQ(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),w=Pn(A.index,v),v[8]=w[8],eg(u,v,null)}catch(A){throw null!==w&&vI(w),vI(v),A}finally{Ue(23),Jv()}return new eQ(this.componentType,v,!!_)}finally{ae(a)}}}function kk(t){const e=t[go].kind;return"input"===e||"twoWay"===e}class eQ extends _K{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Za(n[1],27),this.location=lc(this._tNode,n),this.instance=Pn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Zl(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;Xp(r,i[1],i,e,n),this.previousInputValues.set(e,n),wc(Pn(r.index,i),1)}get injector(){return new It(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let _g=(()=>class t{static __NG_ELEMENT_ID__=nQ})();function nQ(){return Lk(ue(),V())}const rQ=_g,Ok=class extends rQ{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return lc(this._hostTNode,this._hostLView)}get injector(){return new It(this._hostTNode,this._hostLView)}get parentInjector(){const e=vp(this._hostTNode,this._hostLView);if(hI(e)){const n=Ol(e,this._hostLView),r=kl(e);return new It(n[1].data[r+8],n)}return new It(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Vk(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,As(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function Nl(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const w=n||{};u=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}const d=c?e:new FE(Le(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(Dn,null);A&&(o=A)}Le(d.componentType??{});const v=d.create(h,i,null,o,s,a);return this.insertImpl(v.hostView,u,As(this._hostTNode,null)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function zG(t){return Rn(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new Ok(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Tc(s,i,o,r),e.attachToViewContainerRef(),FP(UE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Vk(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Jl(this._lContainer,n);r&&(zf(UE(this._lContainer),n),Ql(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Jl(this._lContainer,n);return r&&null!=zf(UE(this._lContainer),n)?new Zl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Vk(t){return t[8]}function UE(t){return t[8]||(t[8]=[])}function Lk(t,e){let n;const r=e[t.index];return Rn(r)?n=r:(n=Qx(r,e,null,t),e[t.index]=n,eE(e,n)),Fk(n,e,t,r),new Ok(n,t,e)}let Fk=function jk(t,e,n,r){if(t[7])return;let i;i=8&n.type?Wt(r):function iQ(t,e){const n=t[11],r=n.createComment(""),i=kt(e,t),o=n.parentNode(i);return Ts(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class BE{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new BE(this.queryList)}setDirty(){this.queryList.setDirty()}}class $E{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new $E(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==WE(e,n).matches&&this.queries[n].setDirty()}}class Bk{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function dQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class HE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new HE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qE{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new qE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,aQ(n,o)),this.matchTNodeWithReadOption(e,n,Ip(n,e,o,!1,!1))}else r===ng?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ip(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===br||i===_g||i===ng&&4&n.type)this.addMatch(n.index,-2);else{const o=Ip(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function aQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function uQ(t,e,n,r){return-1===n?function cQ(t,e){return 11&t.type?lc(t,e):4&t.type?rg(t,e):null}(e,t):-2===n?function lQ(t,e,n){return n===br?lc(e,t):n===ng?rg(e,t):n===_g?Lk(e,t):void 0}(t,e,r):Vl(t,t[1],n,e)}function $k(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:uQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function zE(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=$k(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&zE(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];zE(g[1],g,u,r)}}}}}return r}function zk(t,e,n,r){const i=ge();if(i.firstCreatePass){const o=ue();(function Gk(t,e,n){null===t.queries&&(t.queries=new HE),t.queries.track(new qE(e,n))})(i,new Bk(e,n,r),o.index),function hQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function Hk(t,e,n){const r=new h9(!(4&~n));return function GG(t,e,n,r){const i=iM(e);i.push(n),t.firstCreatePass&&oM(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new $E).queries.push(new BE(r))-1}(i,V(),n)}function WE(t,e){return t.queries.getByIndex(e)}function Wk(t,e){const n=t[1],r=WE(n,e);return r.crossesNgTemplate?zE(n,t,e,[]):$k(n,t,r,e)}let Ac=class{},Zk=class{};class YE extends Ac{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xk(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=Ur(e);this._bootstrapComponents=zr(o.bootstrap),this._r3Injector=CM(e,n,[{provide:Ac,useValue:this},{provide:dg,useValue:this.componentFactoryResolver},...r],Un(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xk extends Zk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new YE(this.moduleType,e,[])}}class eO extends Ac{injector;componentFactoryResolver=new xk(this);instance=null;constructor(e){super();const n=new hs([...e.providers,{provide:Ac,useValue:this},{provide:dg,useValue:this.componentFactoryResolver}],e.parent||kv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function JE(t,e,n=null){return new eO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let wQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Rv(0,n.type),i=r.length>0?JE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:t,providedIn:"environment",factory:()=>new t(Ee(Dn))})}return t})();function Wr(t){return wi(()=>{const e=nO(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Tp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(wQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||bi.Emulated,styles:t.styles||tt,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&fn("NgStandalone"),rO(n);const r=t.dependencies;return n.directiveDefs=vg(r,tO),n.pipeDefs=vg(r,wr),n.id=function AQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function tO(t){return Le(t)||An(t)}function yg(t){return wi(()=>({type:t.type,bootstrap:t.bootstrap||tt,declarations:t.declarations||tt,imports:t.imports||tt,exports:t.exports||tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TQ(t,e){if(null==t)return Fr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=$p.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function bQ(t){if(null==t)return Fr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function be(t){return wi(()=>{const e=nO(t);return rO(e),e})}function nO(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Fr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:TQ(t.inputs,e),outputs:bQ(t.outputs),debugInfo:null}}function rO(t){t.features?.forEach(e=>e(t))}function vg(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Be(t){let e=function iO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Xn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=ZE(t.inputs),s.declaredInputs=ZE(t.declaredInputs),s.outputs=ZE(t.outputs);const a=i.hostBindings;a&&NQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&PQ(t,c),u&&MQ(t,u),DQ(t,i),oG(t.outputs,i.outputs),Xn(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Be&&(n=!1)}}e=Object.getPrototypeOf(e)}!function RQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uc(i.hostAttrs,n=uc(n,i.hostAttrs))}}(r)}function DQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function ZE(t){return t===Fr?{}:t===tt?[]:t}function PQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function MQ(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function NQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function xs(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=Ds(e,h,4,s||null,a||null),null!=u){const g=dn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function uO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=uc(t.mergedAttrs,t.attrs);const d=t.tView=ZI(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),vi(t,!1);const c=hO(n,e,t,r);ip()&&pE(n,e,c,t),Hn(c,e);const u=Qx(c,e,c,t);e[r+27]=u,eE(e,u)}(f,t,e,n,r,i,o,c),null!=u&&Ic(t,f,d),f}let hO=function fO(t,e,n,r){return bl(!0),e[11].createComment("")};let SO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const BO=new H("");function Dg(t){return!!t&&"function"==typeof t.then}function KY(t){return!!t&&"function"==typeof t.subscribe}const $O=new H("");let HO=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O($O,{optional:!0})??[];injector=O(nr);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=fr(this.injector,i);if(Dg(o))n.push(o);else if(KY(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const qO=new H("");let Si=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O($r);afterRenderManager=O(Ix);zonelessEnabled=O(PM);rootEffectScheduler=O(kM);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Fn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(so);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Fe(n=>!n))}constructor(){O(Kl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(Dn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=nr.NULL){return this._injector.get(Ve).run(()=>{Ue(10);const s=n instanceof wk;if(!this._injector.get(HO).done)throw new U(405,"");let c;c=s?n:this._injector.get(dg).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function YY(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Ac),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(BO,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Rg(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),Ue(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ue(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(rE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);const n=ae(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ae(n),this.afterTick.next(),Ue(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(NE,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)Ue(14),this.synchronizeOnce(),Ue(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||ep(i))&&(tg(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>ep(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Rg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(qO,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Rg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Kr(t,e,n,r){const i=V();return it(i,Bn(),e)&&(ge(),function a7(t,e,n,r,i,o){const s=kt(t,e);!function Yp(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?le(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}(jr(),i,t,e,n,r)),Kr}typeof document<"u"&&document;class WJ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function vw(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Iw(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function i1(t,e,n,r,i){if(Iw(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function o1(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class s1{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function Vt(t,e,n,r,i,o,s,a){fn("NgControlFlow");const c=V(),u=ge();return xs(c,u,t,e,n,r,i,dn(u.consts,o),256,s,a),Ew}function Ew(t,e,n,r,i,o,s,a){fn("NgControlFlow");const c=V(),u=ge();return xs(c,u,t,e,n,r,i,dn(u.consts,o),512,s,a),Ew}function Lt(t,e){fn("NgControlFlow");const n=V(),r=Bn(),i=n[r]!==je?n[r]:-1,o=-1!==i?Fg(n,27+i):void 0;if(it(n,r,t)){const a=ae(null);try{if(void 0!==o&&EE(o,0),-1!==t){const c=27+t,u=Fg(n,c),d=Tw(n[1],c),h=null;Tc(u,Ec(n,d,e,{dehydratedView:h}),0,As(d,h))}}finally{ae(a)}}else if(void 0!==o){const a=Yx(o,0);void 0!==a&&(a[8]=e)}}class QJ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function ww(t,e){return e}class JJ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function Qr(t,e,n,r,i,o,s,a,c,u,d,h,f){fn("NgControlFlow");const g=V(),_=ge(),v=void 0!==c,w=V(),A=a?s.bind(w[15][8]):s,D=new JJ(v,A);w[27+t]=D,xs(g,_,t+1,e,n,r,i,dn(_.consts,o),256),v&&xs(g,_,t+2,c,u,d,h,dn(_.consts,f),512)}class ZJ extends WJ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Tc(this.lContainer,n,e,As(this.templateTNode,r)),function XJ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function q8(t,e){const n=t.get(zp);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Cs.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function eZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function tZ(t,e){return Jl(t,e)}(this.lContainer,e)}create(e,n){const i=Ec(this.hostLView,this.templateTNode,new QJ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){Ql(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function nZ(t,e){return Yx(t,e)}(this.lContainer,e)}}function Yr(t){const e=ae(null),n=en();try{const r=V(),i=r[1],o=r[n],s=n+1,a=Fg(r,s);if(void 0===o.liveCollection){const u=Tw(i,s);o.liveCollection=new ZJ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function KJ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=vw(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=vw(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const v=n(o,u),w=n(s,f),A=n(o,d);if(Object.is(A,w)){const D=n(c,g);Object.is(D,v)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new s1,i??=o1(t,o,s,n),Iw(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(v,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)i1(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=vw(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new s1,i??=o1(t,o,s,n);const g=n(o,h);if(Iw(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)i1(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Bn(),d=0===c.length;if(it(r,u,d)){const h=n+2,f=Fg(r,h);if(d){const g=Tw(i,h),_=null;Tc(f,Ec(r,g,void 0,{dehydratedView:_}),0,As(g,_))}else i.firstUpdatePass&&function cg(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):mk(o,r);t[6]=i}(f),EE(f,0)}}}finally{ae(e)}}function Fg(t,e){return t[e]}function Tw(t,e){return Za(t,e)}function _r(t,e,n){const r=V();return it(r,Bn(),e)&&(ge(),mE(jr(),r,t,e,r[11],n)),_r}function bw(t,e,n,r,i){Xp(e,t,n,i?"class":"style",r)}function Je(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?OE(s,i,2,e,yE,function Gv(){return ce.bindingsEnabled}(),n,r):o.data[s];if(Jp(a,i,t,e,Cw),Ya(a)){const c=i[1];Qp(c,i,a),BI(c,a,i)}return null!=r&&Ic(i,a),Je}function We(){const t=ge(),n=Zp(ue());return t.firstCreatePass&&VE(t,n),cM(n)&&uM(),sM(),null!=n.classesWithoutHost&&function G5(t){return!!(8&t.flags)}(n)&&bw(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function W5(t){return!!(16&t.flags)}(n)&&bw(t,n,V(),n.stylesWithoutHost,!1),We}function Vc(t,e,n,r){return Je(t,e,n,r),We(),Vc}function Ie(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function Rk(t,e,n,r,i,o){const s=e.consts,c=Ds(e,t,n,r,dn(s,i));if(c.mergedAttrs=uc(c.mergedAttrs,c.attrs),null!=o){const u=dn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&fg(c,c.attrs,!1),null!==c.mergedAttrs&&fg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return Jp(a,i,t,e,Cw),null!=r&&Ic(i,a),Ie}function me(){return cM(Zp(ue()))&&uM(),sM(),me}let Cw=(t,e,n,r,i)=>(bl(!0),Up(e[11],r,function s6(){return ce.lFrame.currentNamespace}()));function yo(){return V()}function md(t,e,n){const r=V();return it(r,Bn(),e)&&(ge(),_E(jr(),r,t,e,r[11],n)),md}const Bg="en-US";let p1=Bg;function wt(t,e,n){const r=V(),i=ge(),o=ue();return function Mw(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=ud(r,e,o),Mk(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=ud(r,e,o),mg(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=ud(r,e,o),mg(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),wt}function vo(t,e,n){const r=V(),i=ge(),o=ue();return(3&o.type||n)&&Mk(o,i,r,n,r[11],t,e,ud(o,r,e)),vo}function Re(t=1){return function t6(t){return(ce.lFrame.contextLView=function rM(t,e){for(;t>0;)e=e[14],t--;return e}(t,ce.lFrame.contextLView))[8]}(t)}function zg(t,e){return t<<17|e<<2}function Bs(t){return t>>17&32767}function Nw(t){return 2|t}function Fc(t){return(131068&t)>>2}function xw(t,e){return-131069&t|e<<2}function kw(t){return 1|t}function V1(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Bs(i):Fc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];uX(t[s],e)&&(a=!0,t[s+1]=r?kw(u):Nw(u)),s=r?Bs(u):Fc(u)}a&&(t[n+1]=r?Nw(i):kw(i))}function uX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vl(t,e)>=0}function Io(t,e){return function q1(t,e,n,r){const i=V(),o=ge(),s=Ei(2);o.firstUpdatePass&&function W1(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[en()],s=function G1(t,e){return e>=t.expandoStartIndex}(t,n);(function J1(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function IX(t,e,n,r){const i=function Kv(t){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Td(n=Ow(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ow(i,t,e,n,r),null===o){let c=function EX(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Fc(r))return t[Bs(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=Ow(null,t,e,c[1],r),c=Td(c,e.attrs,r),function wX(t,e,n,r){t[Bs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function TX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Td(r,t[o].hostAttrs,n);return Td(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function aX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Bs(s),c=Fc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||vl(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Bs(t[a+1]);t[r+1]=zg(f,a),0!==f&&(t[f+1]=xw(t[f+1],r)),t[a+1]=function oX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=zg(a,0),0!==a&&(t[a+1]=xw(t[a+1],r)),a=r;else t[r+1]=zg(c,0),0===a?a=r:t[c+1]=xw(t[c+1],r),c=r;u&&(t[r+1]=Nw(t[r+1])),V1(t,d,r,!0),V1(t,d,r,!1),function cX(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vl(o,e)>=0&&(n[r+1]=kw(n[r+1]))}(e,d,t,r,o),s=zg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==je&&it(i,s,e)&&function Q1(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function sX(t){return!(1&~t)}(u)?Y1(c,e,n,i,Fc(u),s):void 0;Gg(d)||(Gg(o)||function iX(t){return!(2&~t)}(u)&&(o=Y1(c,null,n,i,a,s)),function X8(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:bs.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bs.Important),t.setStyle(n,r,i,o))}}(r,s,Ja(en(),n),i,o))}(o,o.data[en()],i,i[11],t,i[s+1]=function AX(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Un(fo(t)))),t}(e,n),r,s)}(t,e,null,!0),Io}function Ow(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Td(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Td(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Wf(t,s,!!n||e[++o]))}return void 0===t?null:t}function Y1(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===je&&(f=h?tt:void 0);let g=h?Cv(f,r):d===r?f:void 0;if(u&&!Gg(g)&&(g=Cv(c,r)),Gg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Bs(_):Fc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Cv(c,r))}return a}function Gg(t){return void 0!==t}function de(t,e=""){const n=V(),r=ge(),i=t+27,o=r.firstCreatePass?Ds(r,i,1,e,null):r.data[i],s=Z1(r,n,o,e,t);n[i]=s,ip()&&pE(r,n,s,o),vi(o,!1)}let Z1=(t,e,n,r,i)=>(bl(!0),function QI(t,e){return t.createText(e)}(e[11],r));function tV(t,e,n,r,i,o=""){const a=function Ns(t,e,n,r){const i=it(t,e,n);return it(t,e+1,r)||i}(t,function Ii(){return ce.lFrame.bindingIndex}(),n,i);return Ei(2),a?e+le(n)+r+le(i)+o:je}function Sr(t){return Ar("",t),Sr}function Ar(t,e,n){const r=V(),i=function eV(t,e,n,r=""){return it(t,Bn(),n)?e+le(n)+r:je}(r,t,e,n);return i!==je&&Ai(r,en(),i),Ar}function jc(t,e,n,r,i){const o=V(),s=tV(o,t,e,n,r,i);return s!==je&&Ai(o,en(),s),jc}function Ai(t,e,n){const r=Ja(e,t);!function W0(t,e,n){t.setValue(e,n)}(t[11],r,n)}function Vw(t,e,n,r,i){if(t=pe(t),Array.isArray(t))for(let o=0;o<t.length;o++)Vw(t[o],e,n,r,i);else{const o=ge(),s=V(),a=ue();let c=fi(t)?t:pe(t.provide);const u=WP(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(fi(t)||!t.multi){const g=new xl(u,i,Z,null),_=Fw(c,e,i?d:d+f,h);-1===_?(gI(yp(a,s),o,c),Lw(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=Fw(c,e,d+f,h),_=Fw(c,e,d,d+f),w=_>=0&&n[_];if(i&&!w||!i&&!(g>=0&&n[g])){gI(yp(a,s),o,c);const A=function GX(t,e,n,r,i){const s=new xl(t,n,Z,null);return s.multi=[],s.index=e,s.componentProviders=0,vV(s,i,r&&!n),s}(i?zX:qX,n.length,i,r,u);!i&&w&&(n[_].providerFactory=A),Lw(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else Lw(o,t,g>-1?g:_,vV(n[i?_:g],u,!i&&r));!i&&r&&w&&n[_].componentProviders++}}}function Lw(t,e,n,r){const i=fi(e),o=function zP(t){return!!t.useClass}(e);if(i||o){const c=(o?pe(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function vV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qX(t,e,n,r,i){return Uw(this.multi,[])}function zX(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Vl(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),Uw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Uw(o,s);return s}function Uw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ut(t,e=[]){return n=>{n.providersResolver=(r,i)=>function HX(t,e,n){const r=ge();if(r.firstCreatePass){const i=Xn(t);Vw(n,r.data,r.blueprint,i,!0),Vw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function jw(t,e,n){const r=function Mn(){const t=ce.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===je?function Gr(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function cd(t,e){return t[e]}(i,r)}class jee{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Bee=(()=>{class t{compileModuleSync(n){return new Xk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=zr(Ur(n).declarations).reduce((s,a)=>{const c=Le(a);return c&&s.push(new FE(c)),s},[]);return new jee(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hee=(()=>{class t{zone=O(Ve);changeDetectionScheduler=O(ys);applicationRef=O(Si);applicationErrorHandler=O($r);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ve({...Gw(),scheduleInRootZone:n}),[{provide:Ve,useFactory:t},{provide:eo,multi:!0,useFactory:()=>{const r=O(Hee,{optional:!0});return()=>r.initialize()}},{provide:eo,multi:!0,useFactory:()=>{const r=O(zee);return()=>{r.initialize()}}},!0===e?{provide:MM,useValue:!0}:[],{provide:NM,useValue:n??px},{provide:$r,useFactory:()=>{const r=O(Ve),i=O(Dn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(tc),o.handleError(s))})}}}]}function Gw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let zee=(()=>{class t{subscription=new Sn;initialized=!1;zone=O(Ve);pendingTasks=O(so);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Kw=(()=>{class t{applicationErrorHandler=O($r);appRef=O(Si);taskService=O(so);ngZone=O(Ve);zonelessEnabled=O(PM);tracing=O(Kl,{optional:!0});disableScheduling=O(MM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Sn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(qp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(NM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof aE||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?mx:gx;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(qp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,mx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const zV=new H("",{providedIn:"root",factory:()=>O(zV,{optional:!0,skipSelf:!0})||function Gee(){return typeof $localize<"u"&&$localize.locale||Bg}()}),rm=Symbol("InputSignalNode#UNSET"),AL={...rv,transformFn:void 0,applyValueToInputSignal(t,e){Of(t,e)}};function DL(t,e){const n=Object.create(AL);function r(){if(cl(n),n.value===rm)throw new U(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[zt]=n,r}class Vne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ep(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function RL(t,e){return DL(t,e)}new H("").__NG_ELEMENT_ID__=t=>{const e=ue();if(null===e)throw new U(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new U(204,!1)};const cT=(RL.required=function Fne(t){return DL(rm,t)},RL),im=new H(""),Hne=new H("");function Rd(t){return!t.moduleRef}let zc=null;let sm=(()=>class t{static __NG_ELEMENT_ID__=Qne})();function Qne(t){return function Yne(t,e,n){if(mi(t)&&!n){const r=Pn(t.index,e);return new Zl(r,r)}return 175&t.type?new Zl(e[15],e):null}(ue(),V(),!(16&~t))}function ore(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ue(8);try{const o=i?.injector??function Kne(t=[]){if(zc)return zc;const e=function FL(t=[],e){return nr.create({name:e,providers:[{provide:Nv,useValue:"platform"},{provide:im,useValue:new Set([()=>zc=null])},...t]})}(t);return zc=e,function QY(){!function $3(t){vP=t}(()=>{throw new U(600,"")})}(),function UL(t){const e=t.get(n0,null);fr(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[zw({}),{provide:ys,useExisting:Kw},AM,...n||[]];return function kL(t){const e=Rd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ve);return n.run(()=>{Rd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get($r);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Rd(t)){const o=()=>e.destroy(),s=t.platformInjector.get(im);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(im);s.add(o),t.moduleRef.onDestroy(()=>{Rg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function zne(t,e,n){try{const r=n();return Dg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(so),s=o.add(),a=e.get(HO);return a.runInitializers(),a.donePromise.then(()=>{if(function hZ(t){"string"==typeof t&&(p1=t.toLowerCase().replace(/_/g,"-"))}(e.get(zV,Bg)||Bg),!e.get(Hne,!0))return Rd(t)?e.get(Si):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Rd(t)){const d=e.get(Si);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new eO({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ue(9)}}function Gc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class uF{_doc;constructor(e){this._doc=e}manager}let dT=(()=>{class t extends uF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Ee(Tr))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const hT=new H("");let lF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof dT));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof dT);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Ee(hT),Ee(Ve))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const fT="ng-app-id";function dF(t){for(const e of t)e.remove()}function hF(t,e){const n=e.createElement("style");return n.textContent=t,n}function pT(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let fF=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Nre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${fT}="${e}"],link[${fT}="${e}"]`);if(i)for(const o of i)o.removeAttribute(fT),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,hF);r?.forEach(i=>this.addUsage(i,this.external,pT))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(dF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])dF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,hF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,pT(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Ee(Tr),Ee(Ul),Ee(i0,8),Ee(r0))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const gT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mT=/%COMP%/g,Fre=new H("",{providedIn:"root",factory:()=>!0});function gF(t,e){return e.map(n=>n.replace(mT,t))}let mF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new _T(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof yF?i.applyToHost(n):i instanceof yT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case bi.Emulated:o=new yF(c,u,r,this.appId,d,s,a,h,f);break;case bi.ShadowDom:return new $re(c,u,n,r,s,a,this.nonce,h,f);default:o=new yT(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Ee(lF),Ee(fF),Ee(Ul),Ee(Fre),Ee(Tr),Ee(Ve),Ee(i0),Ee(Kl,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();class _T{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(gT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_F(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_F(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=gT[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=gT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(bs.DashCase|bs.Important)?e.style.setProperty(n,r,i&bs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&bs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=ao().getGlobalEventTarget(this.doc,e)))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function _F(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class $re extends _T{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=gF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=pT(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yT extends _T{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?gF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Cs.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class yF extends yT{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function Ure(t){return"_ngcontent-%COMP%".replace(mT,t)}(d),this.hostAttr=function jre(t){return"_nghost-%COMP%".replace(mT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class vT extends h6{supportsDOMEvents=!0;static makeCurrent(){!function d6(t){OM??=t}(new vT)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function qre(){return Md=Md||document.head.querySelector("base"),Md?Md.getAttribute("href"):null}();return null==n?null:function zre(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Md=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function v6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Md=null,Wre=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const vF=["alt","control","meta","shift"],Kre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qre={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function IF(t){return{appProviders:[...rie,...t?.providers??[]],platformProviders:tie}}const tie=[{provide:r0,useValue:"browser"},{provide:n0,useValue:function Zre(){vT.makeCurrent()},multi:!0},{provide:Tr,useFactory:function eie(){return function F9(t){wI=t}(document),document}}],rie=[{provide:Nv,useValue:"root"},{provide:tc,useFactory:function Xre(){return new tc}},{provide:hT,useClass:dT,multi:!0,deps:[Tr]},{provide:hT,useClass:(()=>{class t extends uF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ao().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Kre[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),vF.forEach(s=>{s!==i&&(0,Qre[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(Ee(Tr))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Tr]},mF,fF,lF,{provide:NE,useExisting:mF},{provide:class I6{},useClass:Wre},[]],cie={...Ua,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function lt(t){return function aie(t){const e=ae(null);try{return t()}finally{ae(e)}}(t)}function Tt(t,e){return function U3(t,e){const n=Object.create(j3);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(ul(n),cl(n),n.value===Zi)throw n.error;return n.value};return r[zt]=n,r}(t,e?.equal)}class mie{[zt];constructor(e){this[zt]=e}destroy(){this[zt].destroy()}}const CF={...cie,cleanupFns:void 0,zone:null,onDestroyFn:Cl,run(){const t=np(!1);try{!function uie(t){if(t.dirty=!1,t.version>0&&!xf(t))return;t.version++;const e=ja(t);try{t.cleanup(),t.fn()}finally{ll(t,e)}}(this)}finally{np(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=ae(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ae(t)}}},_ie={...CF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){dl(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},yie={...CF,consumerMarkedDirty(){this.view[2]|=8192,Xa(this.view),this.notifier.notify(13)},destroy(){dl(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function SF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function dm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function To(t){return this instanceof To?(this.v=t,this):new To(t)}function kF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function CT(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const OF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function VF(t){return rt(t?.then)}function LF(t){return rt(t[fv])}function FF(t){return Symbol.asyncIterator&&rt(t?.[Symbol.asyncIterator])}function UF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const jF=function toe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function BF(t){return rt(t?.[jF])}function $F(t){return function xF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(v){return new Promise(function(w,A){o.push([g,v,w,A])>1||c(g,v)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof To?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(v){f(o[0][3],v)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield To(n.read());if(i)return yield To(void 0);yield yield To(r)}}finally{n.releaseLock()}})}function HF(t){return rt(t?.getReader)}function Jr(t){if(t instanceof Nt)return t;if(null!=t){if(LF(t))return function noe(t){return new Nt(e=>{const n=t[fv]();if(rt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(OF(t))return function roe(t){return new Nt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(VF(t))return function ioe(t){return new Nt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,CP)})}(t);if(FF(t))return qF(t);if(BF(t))return function ooe(t){return new Nt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(HF(t))return function soe(t){return qF($F(t))}(t)}throw UF(t)}function qF(t){return new Nt(e=>{(function aoe(t,e){var n,r,i,o;return function MF(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=kF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Di(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zF(t,e=0){return tn((n,r)=>{n.subscribe($t(r,i=>Di(r,t,()=>r.next(i),e),()=>Di(r,t,()=>r.complete(),e),i=>Di(r,t,()=>r.error(i),e)))})}function GF(t,e=0){return tn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function WF(t,e){if(!t)throw new Error("Iterable cannot be null");return new Nt(n=>{Di(n,e,()=>{const r=t[Symbol.asyncIterator]();Di(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pn(t,e){return e?function foe(t,e){if(null!=t){if(LF(t))return function coe(t,e){return Jr(t).pipe(GF(e),zF(e))}(t,e);if(OF(t))return function loe(t,e){return new Nt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(VF(t))return function uoe(t,e){return Jr(t).pipe(GF(e),zF(e))}(t,e);if(FF(t))return WF(t,e);if(BF(t))return function doe(t,e){return new Nt(n=>{let r;return Di(n,e,()=>{r=t[jF](),Di(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>rt(r?.return)&&r.return()})}(t,e);if(HF(t))return function hoe(t,e){return WF($F(t),e)}(t,e)}throw UF(t)}(t,e):Jr(t)}function AT(t){return t[t.length-1]}function KF(t){return rt(AT(t))?t.pop():void 0}function hm(t){return function poe(t){return t&&rt(t.schedule)}(AT(t))?t.pop():void 0}function fe(...t){return pn(t,hm(t))}const fm=iv(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:goe}=Array,{getPrototypeOf:moe,prototype:_oe,keys:yoe}=Object;function QF(t){if(1===t.length){const e=t[0];if(goe(e))return{args:e,keys:null};if(function voe(t){return t&&"object"==typeof t&&moe(t)===_oe}(e)){const n=yoe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Ioe}=Array;function YF(t){return Fe(e=>function Eoe(t,e){return Ioe(e)?t(...e):t(e)}(t,e))}function JF(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ZF(...t){const e=hm(t),n=KF(t),{args:r,keys:i}=QF(t);if(0===r.length)return pn([],e);const o=new Nt(function woe(t,e,n=as){return r=>{XF(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)XF(e,()=>{const u=pn(t[c],e);let d=!1;u.subscribe($t(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>JF(i,s):as));return n?o.pipe(YF(n)):o}function XF(t,e,n){t?Di(n,t,e):e()}function Nn(t,e,n=1/0){return rt(e)?Nn((r,i)=>Fe((o,s)=>e(r,o,i,s))(Jr(t(r,i))),n):("number"==typeof e&&(n=e),tn((r,i)=>function Toe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=v=>u<r?_(v):c.push(v),_=v=>{o&&e.next(v),u++;let w=!1;Jr(n(v,d++)).subscribe($t(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){const A=c.shift();s?Di(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe($t(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function DT(t=1/0){return Nn(as,t)}function RT(...t){return function boe(){return DT(1)}()(pn(t,hm(t)))}function PT(t){return new Nt(e=>{Jr(t()).subscribe(e)})}function pm(t,e){const n=rt(t)?t:()=>t,r=i=>i.error(n());return new Nt(e?i=>e.schedule(r,0,i):r)}const Dr=new Nt(t=>t.complete());function MT(){return tn((t,e)=>{let n=null;t._refCount++;const r=$t(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class e2 extends Nt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ZM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Sn;const n=this.getSubject();e.add(this.source.subscribe($t(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Sn.EMPTY)}return e}refCount(){return MT()(this)}}function yr(t,e){return tn((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe($t(r,c=>{i?.unsubscribe();let u=0;const d=o++;Jr(t(c,d)).subscribe(i=$t(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wc(t){return t<=0?()=>Dr:tn((e,n)=>{let r=0;e.subscribe($t(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bo(t,e){return tn((n,r)=>{let i=0;n.subscribe($t(r,o=>t.call(e,o,i++)&&r.next(o)))})}function gm(t){return tn((e,n)=>{let r=!1;e.subscribe($t(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function t2(t=Doe){return tn((e,n)=>{let r=!1;e.subscribe($t(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Doe(){return new fm}function Ws(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bo((i,o)=>t(i,o,r)):as,Wc(1),n?gm(e):t2(()=>new fm))}function mm(t,e){return rt(e)?Nn(t,e,1):Nn(t,1)}function gn(t,e,n){const r=rt(t)||e||n?{next:t,error:e,complete:n}:t;return r?tn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe($t(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):as}function Kc(t){return tn((e,n)=>{let o,r=null,i=!1;r=e.subscribe($t(n,void 0,void 0,s=>{o=Jr(t(s,Kc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function NT(t){return t<=0?()=>Dr:tn((e,n)=>{let r=[];e.subscribe($t(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xT(t){return tn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function n2(t){return tn((e,n)=>{Jr(t).subscribe($t(n,()=>n.complete(),av)),!n.closed&&e.subscribe(n)})}let Boe=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Ee(Tr))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const _e="primary",kd=Symbol("RouteTitle");class Koe{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Qc(t){return new Koe(t)}function Qoe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Zr(t,e){const n=t?kT(t):void 0,r=e?kT(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!d2(t[i],e[i]))return!1;return!0}function kT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function d2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function h2(t){return t.length>0?t[t.length-1]:null}function Ri(t){return function Rie(t){return!!t&&(t instanceof Nt||rt(t.lift)&&rt(t.subscribe))}(t)?t:Dg(t)?pn(Promise.resolve(t)):fe(t)}const Joe={exact:function g2(t,e,n){if(!Qs(t.segments,e.segments)||!_m(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!g2(t.children[r],e.children[r],n))return!1;return!0},subset:m2},f2={exact:function Zoe(t,e){return Zr(t,e)},subset:function Xoe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>d2(t[n],e[n]))},ignored:()=>!0};function p2(t,e,n){return Joe[n.paths](t.root,e.root,n.matrixParams)&&f2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function m2(t,e,n){return _2(t,e,e.segments,n)}function _2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Qs(i,n)||e.hasChildren()||!_m(i,n,r))}if(t.segments.length===n.length){if(!Qs(t.segments,n)||!_m(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!m2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Qs(t.segments,i)&&_m(t.segments,i,r)&&t.children[_e])&&_2(t.children[_e],e,o,r)}}function _m(t,e,n){return e.every((r,i)=>f2[n](t[i].parameters,r.parameters))}class Ks{root;queryParams;fragment;_queryParamMap;constructor(e=new Ke([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qc(this.queryParams),this._queryParamMap}toString(){return nse.serialize(this)}}class Ke{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Im(this)}}class Od{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qc(this.parameters),this._parameterMap}toString(){return I2(this)}}function Qs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ym=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>new vm,providedIn:"root"})}return t})();class vm{parse(e){const n=new fse(e);return new Ks(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Vd(e.root,!0)}`,r=function ose(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Em(n)}=${Em(i)}`).join("&"):`${Em(n)}=${Em(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function rse(t){return encodeURI(t)}(e.fragment)}`:""}`}}const nse=new vm;function Im(t){return t.segments.map(e=>I2(e)).join("/")}function Vd(t,e){if(!t.hasChildren())return Im(t);if(e){const n=t.children[_e]?Vd(t.children[_e],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${Vd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function tse(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===_e&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==_e&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===_e?[Vd(t.children[_e],!1)]:[`${i}:${Vd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[_e]?`${Im(t)}/${n[0]}`:`${Im(t)}/(${n.join("//")})`}}function y2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Em(t){return y2(t).replace(/%3B/gi,";")}function OT(t){return y2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wm(t){return decodeURIComponent(t)}function v2(t){return wm(t.replace(/\+/g,"%20"))}function I2(t){return`${OT(t.path)}${function ise(t){return Object.entries(t).map(([e,n])=>`;${OT(e)}=${OT(n)}`).join("")}(t.parameters)}`}const sse=/^[^\/()?;#]+/;function VT(t){const e=t.match(sse);return e?e[0]:""}const ase=/^[^\/()?;=#]+/,use=/^[^=?&#]+/,dse=/^[^&#]+/;class fse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[_e]=new Ke(e,n)),r}parseSegment(){const e=VT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Od(wm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function cse(t){const e=t.match(ase);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=VT(this.remaining);i&&(r=i,this.capture(r))}e[wm(n)]=wm(r)}parseQueryParam(e){const n=function lse(t){const e=t.match(use);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function hse(t){const e=t.match(dse);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=v2(n),o=v2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=VT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);const s=this.parseChildren();n[o??_e]=1===Object.keys(s).length&&s[_e]?s[_e]:new Ke([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function E2(t){return t.segments.length>0?new Ke([],{[_e]:t}):t}function w2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=w2(i);if(r===_e&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function pse(t){if(1===t.numberOfChildren&&t.children[_e]){const e=t.children[_e];return new Ke(t.segments.concat(e.segments),e.children)}return t}(new Ke(t.segments,e))}function Ys(t){return t instanceof Ks}function T2(t){let e;const i=E2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new Ke(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function b2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return LT(i,i,i,n,r);const o=function mse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new S2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new S2(n,e,r)}(e);if(o.toRoot())return LT(i,i,new Ke([],{}),n,r);const s=function _se(t,e,n){if(t.isAbsolute)return new bm(e,!0,0);if(!n)return new bm(e,!1,NaN);if(null===n.parent)return new bm(n,!0,0);const r=Tm(t.commands[0])?0:1;return function yse(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new bm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Fd(s.segmentGroup,s.index,o.commands):A2(s.segmentGroup,s.index,o.commands);return LT(i,s.segmentGroup,a,n,r)}function Tm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ld(t){return"object"==typeof t&&null!=t&&t.outlets}function LT(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:C2(t,e,n);const a=E2(w2(s));return new Ks(a,o,i)}function C2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:C2(o,e,n)}),new Ke(t.segments,r)}class S2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Tm(r[0]))throw new U(4003,!1);const i=r.find(Ld);if(i&&i!==h2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function A2(t,e,n){if(t??=new Ke([],{}),0===t.segments.length&&t.hasChildren())return Fd(t,e,n);const r=function Ise(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Ld(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!R2(c,u,s))return o;r+=2}else{if(!R2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Ke(t.segments.slice(0,r.pathIndex),{});return o.children[_e]=new Ke(t.segments.slice(r.pathIndex),t.children),Fd(o,0,i)}return r.match&&0===i.length?new Ke(t.segments,{}):r.match&&!t.hasChildren()?FT(t,e,n):r.match?Fd(t,0,i):FT(t,e,n)}function Fd(t,e,n){if(0===n.length)return new Ke(t.segments,{});{const r=function vse(t){return Ld(t[0])?t[0].outlets:{[_e]:t}}(n),i={};if(Object.keys(r).some(o=>o!==_e)&&t.children[_e]&&1===t.numberOfChildren&&0===t.children[_e].segments.length){const o=Fd(t.children[_e],e,n);return new Ke(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=A2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Ke(t.segments,i)}}function FT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ld(o)){const c=Ese(o.outlets);return new Ke(r,c)}if(0===i&&Tm(n[0])){r.push(new Od(t.segments[e].path,D2(n[0]))),i++;continue}const s=Ld(o)?o.outlets[_e]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Tm(a)?(r.push(new Od(s,D2(a))),i+=2):(r.push(new Od(s,{})),i++)}return new Ke(r,{})}function Ese(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=FT(new Ke([],{}),0,r))}),e}function D2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function R2(t,e,n){return t==n.path&&Zr(e,n.parameters)}const Cm="imperative";var Pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Pe||{});class Xr{id;url;constructor(e,n){this.id=e,this.url=n}}class UT extends Xr{type=Pe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class So extends Xr{urlAfterRedirects;type=Pe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Wn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Wn||{}),jT=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jT||{});class Js extends Xr{reason;code;type=Pe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ud extends Xr{reason;code;type=Pe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class BT extends Xr{error;target;type=Pe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class P2 extends Xr{urlAfterRedirects;state;type=Pe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wse extends Xr{urlAfterRedirects;state;type=Pe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tse extends Xr{urlAfterRedirects;state;shouldActivate;type=Pe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bse extends Xr{urlAfterRedirects;state;type=Pe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cse extends Xr{urlAfterRedirects;state;type=Pe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sse{route;type=Pe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ase{route;type=Pe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dse{snapshot;type=Pe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rse{snapshot;type=Pe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pse{snapshot;type=Pe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mse{snapshot;type=Pe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $T{}class Sm{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Rr(t){return t.outlet||_e}function Yc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Fse{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new jd(this.rootInjector)}}let jd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Fse(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Ee(Dn))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class M2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=HT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=HT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=qT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qT(e,this._root).map(n=>n.value)}}function HT(t,e){if(t===e.value)return e;for(const n of e.children){const r=HT(t,n);if(r)return r}return null}function qT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=qT(t,n);if(r.length)return r.unshift(e),r}return[]}class Pr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Jc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class N2 extends M2{snapshot;constructor(e,n){super(e),this.snapshot=n,zT(this,e)}toString(){return this.snapshot.toString()}}function x2(t){const e=function Use(t){const o=new Dm([],{},{},"",{},_e,t,null,{});return new k2("",new Pr(o,[]))}(t),n=new dr([new Od("",{})]),r=new dr({}),i=new dr({}),o=new dr({}),s=new dr(""),a=new Pi(n,r,o,s,i,_e,t,e.root);return a.snapshot=e.root,new N2(new Pr(a,[]),e)}class Pi{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Fe(u=>u[kd]))??fe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Fe(e=>Qc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Fe(e=>Qc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Am(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&V2(i)&&(r.resolve[kd]=i.title),r}class Dm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[kd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class k2 extends M2{url;constructor(e,n){super(n),this.url=e,zT(this,n)}toString(){return O2(this._root)}}function zT(t,e){e.value._routerState=t,e.children.forEach(n=>zT(t,n))}function O2(t){const e=t.children.length>0?` { ${t.children.map(O2).join(", ")} } `:"";return`${t.value}${e}`}function GT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Zr(e.params,n.params)||t.paramsSubject.next(n.params),function Yoe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Zr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function WT(t,e){const n=Zr(t.params,e.params)&&function ese(t,e){return Qs(t,e)&&t.every((n,r)=>Zr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||WT(t.parent,e.parent))}function V2(t){return"string"==typeof t.title||null===t.title}const jse=new H("");let KT=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new Ot;deactivateEvents=new Ot;attachEvents=new Ot;detachEvents=new Ot;routerOutletData=cT();parentContexts=O(jd);location=O(_g);changeDetector=O(sm);inputBinder=O(QT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Bse(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=be({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ti]})}return t})();class Bse{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Pi?this.route:e===jd?this.childContexts:e===jse?this.outletData:this.parent.get(e,n)}}const QT=new H("");let L2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Wr({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&Vc(0,"router-outlet")},dependencies:[KT],encapsulation:2})}return t})();function YT(t){const e=t.children&&t.children.map(YT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==_e&&(n.component=L2),n}function Bd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Hse(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Bd(t,r,i);return Bd(t,r)})}(t,e,n);return new Pr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Bd(t,a)),s}}const r=function qse(t){return new Pi(new dr(t.url),new dr(t.params),new dr(t.queryParams),new dr(t.fragment),new dr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Bd(t,o));return new Pr(r,i)}}class JT{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const F2="ngNavigationCancelingError";function Rm(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ys(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=U2(!1,Wn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function U2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[F2]=!0,n.cancellationCode=e,n}function j2(t){return!!t&&t[F2]}class Wse{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),GT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Jc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Jc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Rse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(GT(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class B2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pm{component;route;constructor(e,n){this.component=e,this.route=n}}function Kse(t,e,n){const r=t._root;return $d(r,e?e._root:null,n,[r.value])}function Zc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function hG(t){return null!==Bf(t)}(t)?e.get(t):t:r}function $d(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Jc(e);return t.children.forEach(s=>{(function Yse(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Jse(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Qs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qs(t.url,e.url)||!Zr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WT(t,e)||!Zr(t.queryParams,e.queryParams);default:return!WT(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new B2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),$d(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pm(a.outlet.component,s))}else s&&Hd(e,a,i),i.canActivateChecks.push(new B2(r)),$d(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hd(a,n.getContext(s),i)),i}function Hd(t,e,n){const r=Jc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Hd(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Pm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qd(t){return"function"==typeof t}function $2(t){return t instanceof fm||"EmptyError"===t?.name}const Mm=Symbol("INITIAL_VALUE");function Xc(){return yr(t=>ZF(t.map(e=>e.pipe(Wc(1),function Aoe(...t){const e=hm(t);return tn((n,r)=>{(e?RT(t,n,e):RT(t,n)).subscribe(r)})}(Mm)))).pipe(Fe(e=>{for(const n of e)if(!0!==n){if(n===Mm)return Mm;if(!1===n||iae(n))return n}return!0}),bo(e=>e!==Mm),Wc(1)))}function iae(t){return Ys(t)||t instanceof JT}function H2(t){return function eG(...t){return SP(t)}(gn(e=>{if("boolean"!=typeof e)throw Rm(0,e)}),Fe(e=>!0===e))}class ZT{segmentGroup;constructor(e){this.segmentGroup=e||null}}class XT extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function eu(t){return pm(new ZT(t))}function gae(t){return pm(new U(4e3,!1))}class _ae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return fe(r);if(i.numberOfChildren>1||!i.children[_e])return gae();i=i.children[_e]}}applyRedirectCommands(e,n,r,i,o){return function yae(t,e,n){if("string"==typeof t)return fe(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return Ri(fr(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(Fe(s=>{if(s instanceof Ks)throw new XT(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new XT(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Ks(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ke(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const eb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vae(t,e,n,r,i){const o=q2(t,e,n);return o.matched?(r=function xse(t,e){return t.providers&&!t._injector&&(t._injector=JE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function pae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?fe(i.map(s=>{const a=Zc(s,t);return Ri(function rae(t){return t&&qd(t.canMatch)}(a)?a.canMatch(e,n):fr(t,()=>a(e,n)))})).pipe(Xc(),H2()):fe(!0)}(r,e,n).pipe(Fe(s=>!0===s?o:{...eb}))):fe(o)}function q2(t,e,n){if("**"===e.path)return function Iae(t){return{matched:!0,parameters:t.length>0?h2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...eb}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Qoe)(n,t,e);if(!i)return{...eb};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function z2(t,e,n,r){return n.length>0&&function Tae(t,e,n){return n.some(r=>Nm(t,e,r)&&Rr(r)!==_e)}(t,n,r)?{segmentGroup:new Ke(e,wae(r,new Ke(n,t.children))),slicedSegments:[]}:0===n.length&&function bae(t,e,n){return n.some(r=>Nm(t,e,r))}(t,n,r)?{segmentGroup:new Ke(t.segments,Eae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ke(t.segments,t.children),slicedSegments:n}}function Eae(t,e,n,r){const i={};for(const o of n)if(Nm(t,e,o)&&!r[Rr(o)]){const s=new Ke([],{});i[Rr(o)]=s}return{...r,...i}}function wae(t,e){const n={};n[_e]=e;for(const r of t)if(""===r.path&&Rr(r)!==_e){const i=new Ke([],{});n[Rr(r)]=i}return n}function Nm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Sae{}class Rae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _ae(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){const e=z2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Fe(({children:n,rootSnapshot:r})=>{const i=new Pr(r,n),o=new k2("",i),s=function gse(t,e,n=null,r=null){return b2(T2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new Dm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,n).pipe(Fe(r=>({children:r,rootSnapshot:n})),Kc(r=>{if(r instanceof XT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ZT?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Fe(s=>s instanceof Pr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return pn(o).pipe(mm(s=>{const a=r.children[s],c=function Lse(t,e){const n=t.filter(r=>Rr(r)===e);return n.push(...t.filter(r=>Rr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function Poe(t,e){return tn(function Roe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe($t(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),gm(null),function Moe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bo((i,o)=>t(i,o,r)):as,NT(1),n?gm(e):t2(()=>new fm))}(),Nn(s=>{if(null===s)return eu(r);const a=G2(s);return function Pae(t){t.sort((e,n)=>e.value.outlet===_e?-1:n.value.outlet===_e?1:e.value.outlet.localeCompare(n.value.outlet))}(a),fe(a)}))}processSegment(e,n,r,i,o,s,a){return pn(n).pipe(mm(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Kc(u=>{if(u instanceof ZT)return fe(null);throw u}))),Ws(c=>!!c),Kc(c=>{if($2(c))return function Cae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?fe(new Sae):eu(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Rr(r)===s||s!==_e&&Nm(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):eu(i):eu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=q2(n,i,o);if(!c)return eu(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new Dm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W2(i),Rr(i),i.component??i._loadedComponent??null,i,K2(i)),_=Am(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(yr(w=>this.applyRedirects.lineralizeSegments(i,w)),Nn(w=>this.processSegment(e,r,n,w.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=vae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(yr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(yr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new Dm(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W2(r),Rr(r),r.component??r._loadedComponent??null,r,K2(r)),v=Am(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);const{segmentGroup:w,slicedSegments:A}=z2(n,f,g,u);if(0===A.length&&w.hasChildren())return this.processChildren(d,u,w,_).pipe(Fe(F=>new Pr(_,F)));if(0===u.length&&0===A.length)return fe(new Pr(_,[]));const D=Rr(r)===o;return this.processSegment(d,u,w,A,D?_e:o,!0,_).pipe(Fe(F=>new Pr(_,F instanceof Pr?[F]:[])))})):eu(n)))}getChildConfig(e,n,r){return n.children?fe({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?fe({routes:n._loadedRoutes,injector:n._loadedInjector}):function fae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?fe(!0):fe(i.map(s=>{const a=Zc(s,t);return Ri(function Xse(t){return t&&qd(t.canLoad)}(a)?a.canLoad(e,n):fr(t,()=>a(e,n)))})).pipe(Xc(),H2())}(e,n,r).pipe(Nn(i=>i?this.configLoader.loadChildren(e,n).pipe(gn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function mae(){return pm(U2(!1,Wn.GuardRejected))}())):fe({routes:[],injector:e})}}function Mae(t){const e=t.value.routeConfig;return e&&""===e.path}function G2(t){const e=[],n=new Set;for(const r of t){if(!Mae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=G2(r.children);e.push(new Pr(r.value,i))}return e.filter(r=>!n.has(r))}function W2(t){return t.data||{}}function K2(t){return t.resolve||{}}function Q2(t){const e=t.children.map(n=>Q2(n)).flat();return[t,...e]}function tb(t){return yr(e=>{const n=t(e);return n?pn(n).pipe(Fe(()=>e)):fe(e)})}let Y2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===_e);return r}getResolvedTitleForRoute(n){return n.data[kd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(Lae),providedIn:"root"})}return t})(),Lae=(()=>{class t extends Y2{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Ee(Boe))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xm=new H("",{providedIn:"root",factory:()=>({})}),nb=new H("");let J2=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Bee);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return fe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Ri(fr(n,()=>r.loadComponent())).pipe(Fe(Z2),yr(X2),gn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xT(()=>{this.componentLoaders.delete(r)})),o=new e2(i,()=>new Fn).pipe(MT());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Fae(t,e,n,r){return Ri(fr(n,()=>t.loadChildren())).pipe(Fe(Z2),yr(X2),Nn(i=>i instanceof Zk||Array.isArray(i)?fe(i):pn(e.compileModuleAsync(i))),Fe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(nb,[],{optional:!0,self:!0}).flat()),{routes:s.map(YT),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(xT(()=>{this.childrenLoaders.delete(r)})),s=new e2(o,()=>new Fn).pipe(MT());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Z2(t){return function Uae(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function X2(t){return fe(t)}let rb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(jae),providedIn:"root"})}return t})(),jae=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Bae=new H(""),qae=new H("");let zae=(()=>{class t{currentNavigation=gt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Fn;transitionAbortWithErrorSubject=new Fn;configLoader=O(J2);environmentInjector=O(Dn);destroyRef=O(Br);urlSerializer=O(ym);rootContexts=O(jd);location=O(Sl);inputBindingEnabled=null!==O(QT,{optional:!0});titleStrategy=O(Y2);options=O(xm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(rb);createViewTransition=O(Bae,{optional:!0});navigationErrorHandler=O(qae,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new Ase(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Sse(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;lt(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new dr(null),this.transitions.pipe(bo(r=>null!==r),yr(r=>{let i=!1;return fe(r).pipe(yr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Wn.SupersededByNewNavigation),Dr;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new Ud(o.id,this.urlSerializer.serialize(o.rawUrl),"",jT.IgnoredSameUrlNavigation)),o.resolve(!1),Dr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fe(o).pipe(yr(c=>(this.events.next(new UT(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Dr:Promise.resolve(c))),function Nae(t,e,n,r,i,o){return Nn(s=>function Aae(t,e,n,r,i,o,s="emptyOnly"){return new Rae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Fe(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),gn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new P2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new UT(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=x2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(v=>(v.finalUrl=u,v)),fe(r)}return this.events.next(new Ud(o.id,this.urlSerializer.serialize(o.extractedUrl),"",jT.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Dr}),gn(o=>{const s=new wse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Fe(o=>(this.currentTransition=r={...o,guards:Kse(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function oae(t,e){return Nn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?fe({...n,guardsResult:!0}):function sae(t,e,n,r){return pn(t).pipe(Nn(i=>function hae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?fe(o.map(a=>{const c=Yc(e)??i,u=Zc(a,c);return Ri(function nae(t){return t&&qd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):fr(c,()=>u(t,e,n,r))).pipe(Ws())})).pipe(Xc()):fe(!0)}(i.component,i.route,n,e,r)),Ws(i=>!0!==i,!0))}(s,r,i,t).pipe(Nn(a=>a&&function Zse(t){return"boolean"==typeof t}(a)?function aae(t,e,n,r){return pn(e).pipe(mm(i=>RT(function uae(t,e){return null!==t&&e&&e(new Dse(t)),fe(!0)}(i.route.parent,r),function cae(t,e){return null!==t&&e&&e(new Pse(t)),fe(!0)}(i.route,r),function dae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Qse(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>PT(()=>fe(s.guards.map(c=>{const u=Yc(s.node)??n,d=Zc(c,u);return Ri(function tae(t){return t&&qd(t.canActivateChild)}(d)?d.canActivateChild(r,t):fr(u,()=>d(r,t))).pipe(Ws())})).pipe(Xc())));return fe(o).pipe(Xc())}(t,i.path,n),function lae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return fe(!0);const i=r.map(o=>PT(()=>{const s=Yc(e)??n,a=Zc(o,s);return Ri(function eae(t){return t&&qd(t.canActivate)}(a)?a.canActivate(e,t):fr(s,()=>a(e,t))).pipe(Ws())}));return fe(i).pipe(Xc())}(t,i.route,n))),Ws(i=>!0!==i,!0))}(r,o,t,e):fe(a)),Fe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),gn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Rm(0,o.guardsResult);const s=new Tse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),bo(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",Wn.GuardRejected),!1)),tb(o=>{if(0!==o.guards.canActivateChecks.length)return fe(o).pipe(gn(s=>{const a=new bse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),yr(s=>{let a=!1;return fe(s).pipe(function xae(t,e){return Nn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return fe(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of Q2(c))s.add(u);let a=0;return pn(s).pipe(mm(c=>o.has(c)?function kae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!V2(i)&&(o[kd]=i.title),PT(()=>(t.data=Am(t,t.parent,n).resolve,function Oae(t,e,n,r){const i=kT(t);if(0===i.length)return fe({});const o={};return pn(i).pipe(Nn(s=>function Vae(t,e,n,r){const i=Yc(e)??r,o=Zc(t,i);return Ri(o.resolve?o.resolve(e,n):fr(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Ws(),gn(a=>{if(a instanceof JT)throw Rm(new vm,a);o[s]=a}))),NT(1),Fe(()=>o),Kc(s=>$2(s)?Dr:pm(s)))}(o,t,e,r).pipe(Fe(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=Am(c,c.parent,t).resolve,fe(void 0))),gn(()=>a++),NT(1),Nn(c=>a===s.size?fe(n):Dr))})}(this.paramsInheritanceStrategy,this.environmentInjector),gn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Wn.NoDataFromResolver)}}))}),gn(s=>{const a=new Cse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),tb(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=Yc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(gn(d=>{a.component=d}),Fe(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return ZF(s(o.targetSnapshot.root)).pipe(gm(null),Wc(1))}),tb(()=>this.afterPreactivation()),yr(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?pn(a).pipe(Fe(()=>r)):fe(r)}),Fe(o=>{const s=function $se(t,e,n){const r=Bd(t,e._root,n?n._root:void 0);return new N2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),gn(()=>{this.events.next(new $T)}),((t,e,n,r)=>Fe(i=>(new Wse(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Wc(1),n2(new Nt(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(bo(()=>!i&&!r.targetRouterState),gn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Wn.Aborted)}))),gn({next:o=>{i=!0,this.lastSuccessfulNavigation=lt(this.currentNavigation),this.events.next(new So(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),n2(this.transitionAbortWithErrorSubject.pipe(gn(o=>{throw o}))),xT(()=>{i||this.cancelNavigationTransition(r,"",Wn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Kc(o=>{if(this.destroyed)return r.resolve(!1),Dr;if(i=!0,j2(o))this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function zse(t){return j2(t)&&Ys(t.url)}(o)?this.events.next(new Sm(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new BT(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=fr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof JT))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Rm(0,a);this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Sm(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Dr}))}))}cancelNavigationTransition(n,r,i){const o=new Js(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=lt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gae(t){return t!==Cm}let Wae=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(Qae),providedIn:"root"})}return t})();class Kae{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Qae=(()=>{class t extends Kae{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eU=(()=>{class t{urlSerializer=O(ym);options=O(xm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Sl);urlHandlingStrategy=O(rb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ks;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Ks?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=x2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(Yae),providedIn:"root"})}return t})(),Yae=(()=>{class t extends eU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof UT?this.updateStateMemento():n instanceof Ud?this.commitTransition(r):n instanceof P2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof $T?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Js&&n.code!==Wn.SupersededByNewNavigation&&n.code!==Wn.Redirect?this.restoreHistory(r):n instanceof BT?this.restoreHistory(r,!0):n instanceof So&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Zae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(SO);stateManager=O(eU);options=O(xm,{optional:!0})||{};pendingTasks=O(so);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(zae);urlSerializer=O(ym);location=O(Sl);urlHandlingStrategy=O(rb);injector=O(Dn);_events=new Fn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(Wae);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(nb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(QT,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Sn;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=lt(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Js&&r.code!==Wn.Redirect&&r.code!==Wn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof So)this.navigated=!0;else if(r instanceof Sm){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Gae(i.source),...s};this.scheduleNavigation(a,Cm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Nse(t){return!(t instanceof $T||t instanceof Sm)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get($r)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return lt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(YT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=T2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return b2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ys(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cm,null,r)}navigate(n,r={skipLocationChange:!1}){return function ece(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new U(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Lr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Zae}:!1===r?{...Xae}:r,Ys(n))return p2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return p2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function Jae(t,e){t.events.pipe(bo(n=>n instanceof So||n instanceof Js||n instanceof BT||n instanceof Ud),Fe(n=>n instanceof So||n instanceof Ud?0:n instanceof Js&&(n.code===Wn.Redirect||n.code===Wn.SupersededByNewNavigation)?2:1),bo(n=>2!==n),Wc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),km=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=gt(null);get href(){return lt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fn;applicationErrorHandler=O($r);options=O(xm,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Vne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof So&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ys(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:Ys(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Z(mn),Z(Pi),Ep("tabindex"),Z(Ps),Z(br),Z(op))};static \u0275dir=be({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&wt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Kr("href",i.reactiveHref(),ex)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Gc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Gc],replaceUrl:[2,"replaceUrl","replaceUrl",Gc],routerLink:"routerLink"},features:[Ti]})}return t})(),uU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ot;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof So&&this.update()})}ngAfterContentInit(){fe(this.links.changes,fe(null)).pipe(DT()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pn(n).pipe(DT()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function mce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Z(mn),Z(br),Z(Ps),Z(sm),Z(km,8))};static \u0275dir=be({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function x1(t,e,n,r){zk(t,e,n,r)}(o,km,5),2&r){let s;(function k1(t){const e=V(),n=ge(),r=Qv();rp(r+1);const i=WE(n,r);if(t.dirty&&function qG(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=Wk(e,r);t.reset(o,VN),t.notifyOnChanges()}return!0}return!1})(s=function O1(){return function GE(t,e){return t[18].queries[e].queryList}(V(),Qv())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ti]})}return t})();const sb=new H("");function dU(t){return t.routerState.root}function hU(){const t=O(nr);return e=>{const n=t.get(Si);if(e!==n.components[0])return;const r=t.get(mn),i=t.get(fU);1===t.get(ab)&&r.initialNavigation(),t.get(pU,null,{optional:!0})?.setUpPreloading(),t.get(sb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const fU=new H("",{factory:()=>new Fn}),ab=new H("",{providedIn:"root",factory:()=>1}),pU=new H(""),mU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},_U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new Ace;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ace extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Om=function(t){return function(t){const e=mU(t);return _U.encodeByteArray(e,!0)}(t).replace(/\./g,"")},zd=function(t){try{return _U.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const Vm=()=>{try{return function vU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},IU=t=>{var e,n;return null===(n=null===(e=Vm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},EU=()=>{var t;return null===(t=Vm())||void 0===t?void 0:t.config},wU=t=>{var e;return null===(e=Vm())||void 0===e?void 0:e[`_${t}`]};class TU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function tu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function bU(t){return ub.apply(this,arguments)}function ub(){return(ub=I(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const Gd={};let CU=!1;function SU(t,e){if(typeof window>"u"||typeof document>"u"||!tu(window.location.host)||Gd[t]===e||Gd[t]||CU)return;function n(f){return`__firebase__banner__${f}`}Gd[t]=e;const r="__firebase__banner",o=function Oce(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gd))Gd[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function Vce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),w=document.getElementById(v)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const F=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(F),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(w,v);const W=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{CU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),F.append(D,_,w,W),document.body.appendChild(F)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function Dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function DU(){return!function AU(){var t;const e=null===(t=Vm())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wd.prototype.create)}}class Wd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function zce(t,e){return t.replace(Gce,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Mi(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Gce=/\{\$([^}]+)}/g;function Ni(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(NU(o)&&NU(s)){if(!Ni(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function NU(t){return null!==t&&"object"==typeof t}function Kd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Qce{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Yce(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=lb),void 0===i.error&&(i.error=lb),void 0===i.complete&&(i.complete=lb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lb(){}function Ft(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xs="[DEFAULT]";class nue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function iue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Xs?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const hb=[];var Ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Ce||{});const xU={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},sue=Ce.INFO,aue={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},cue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=aue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class fb{constructor(e){this.name=e,this._logLevel=sue,this._logHandler=cue,this._userLogHandler=null,hb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}let kU,OU;const VU=new WeakMap,pb=new WeakMap,LU=new WeakMap,gb=new WeakMap,mb=new WeakMap;let _b={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return pb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||LU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function mue(t){return"function"==typeof t?function gue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function due(){return OU||(OU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(yb(this),e),Ao(VU.get(this))}:function(...e){return Ao(t.apply(yb(this),e))}:function(e,...n){const r=t.call(yb(this),e,...n);return LU.set(r,e.sort?e.sort():[e]),Ao(r)}}(t):(t instanceof IDBTransaction&&function fue(t){if(pb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});pb.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function lue(){return kU||(kU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,_b):t)}function Ao(t){if(t instanceof IDBRequest)return function hue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ao(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&VU.set(n,t)}).catch(()=>{}),mb.set(e,t),e}(t);if(gb.has(t))return gb.get(t);const e=mue(t);return e!==t&&(gb.set(t,e),mb.set(e,t)),e}const yb=t=>mb.get(t),vue=["get","getKey","getAll","getAllKeys","count"],Iue=["put","add","delete","clear"],vb=new Map;function FU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(vb.get(e))return vb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Iue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vue.includes(n))return;const o=function(){var s=I(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return vb.set(e,o),o}!function pue(t){_b=t(_b)}(t=>({...t,get:(e,n,r)=>FU(e,n)||t.get(e,n,r),has:(e,n)=>!!FU(e,n)||t.has(e,n)}));class Sue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Aue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Fm="@firebase/app",xi=new fb("@firebase/app"),Due="@firebase/app-compat",Rue="@firebase/analytics-compat",Pue="@firebase/analytics",Mue="@firebase/app-check-compat",Nue="@firebase/app-check",xue="@firebase/auth",kue="@firebase/auth-compat",Oue="@firebase/database",Vue="@firebase/data-connect",Lue="@firebase/database-compat",Fue="@firebase/functions",Uue="@firebase/functions-compat",jue="@firebase/installations",Bue="@firebase/installations-compat",$ue="@firebase/messaging",Hue="@firebase/messaging-compat",que="@firebase/performance",zue="@firebase/performance-compat",Gue="@firebase/remote-config",Wue="@firebase/remote-config-compat",Kue="@firebase/storage",Que="@firebase/storage-compat",Yue="@firebase/firestore",Jue="@firebase/ai",Zue="@firebase/firestore-compat",Xue="firebase",Um="[DEFAULT]",tle={[Fm]:"fire-core",[Due]:"fire-core-compat",[Pue]:"fire-analytics",[Rue]:"fire-analytics-compat",[Nue]:"fire-app-check",[Mue]:"fire-app-check-compat",[xue]:"fire-auth",[kue]:"fire-auth-compat",[Oue]:"fire-rtdb",[Vue]:"fire-data-connect",[Lue]:"fire-rtdb-compat",[Fue]:"fire-fn",[Uue]:"fire-fn-compat",[jue]:"fire-iid",[Bue]:"fire-iid-compat",[$ue]:"fire-fcm",[Hue]:"fire-fcm-compat",[que]:"fire-perf",[zue]:"fire-perf-compat",[Gue]:"fire-rc",[Wue]:"fire-rc-compat",[Kue]:"fire-gcs",[Que]:"fire-gcs-compat",[Yue]:"fire-fst",[Zue]:"fire-fst-compat",[Jue]:"fire-vertex","fire-js":"fire-js",[Xue]:"fire-js-all"},ea=new Map,Qd=new Map,Yd=new Map;function UU(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nu(t){const e=t.name;if(Yd.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,t);for(const n of ea.values())UU(n,t);for(const n of Qd.values())UU(n,t);return!0}function jm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nr(t){return null!=t&&void 0!==t.settings}const vr=new Wd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const ru="11.10.0";function $U(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Um,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw vr.create("bad-app-name",{appName:String(i)});if(n||(n=EU()),!n)throw vr.create("no-options");const o=ea.get(i);if(o){if(Ni(n,o.options)&&Ni(r,o.config))return o;throw vr.create("duplicate-app",{appName:i})}const s=new oue(i);for(const c of Yd.values())s.addComponent(c);const a=new jU(n,r,s);return ea.set(i,a),a}function HU(t=Um){const e=ea.get(t);if(!e&&t===Um&&EU())return $U();if(!e)throw vr.create("no-app",{appName:t});return e}function ki(t,e,n){var r;let i=null!==(r=tle[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void xi.warn(a.join(" "))}nu(new Zs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Jd="firebase-heartbeat-store";let wb=null;function qU(){return wb||(wb=function yue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Ao(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ao(s.result),c.oldVersion,c.newVersion,Ao(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Jd)}catch(n){console.warn(n)}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),wb}function Tb(){return(Tb=I(function*(t){try{const n=(yield qU()).transaction(Jd),r=yield n.objectStore(Jd).get(GU(t));return yield n.done,r}catch(e){if(e instanceof Mi)xi.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e?.message});xi.warn(n.message)}}})).apply(this,arguments)}function zU(t,e){return bb.apply(this,arguments)}function bb(){return(bb=I(function*(t,e){try{const r=(yield qU()).transaction(Jd,"readwrite");yield r.objectStore(Jd).put(e,GU(t)),yield r.done}catch(n){if(n instanceof Mi)xi.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n?.message});xi.warn(r.message)}}})).apply(this,arguments)}function GU(t){return`${t.name}!${t.options.appId}`}class dle{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WU();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function ple(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){xi.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=WU(),{heartbeatsToSend:i,unsentEntries:o}=function hle(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KU(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KU(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Om(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return xi.warn(r),""}})()}}function WU(){return(new Date).toISOString().substring(0,10)}class fle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function PU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Hce(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function cle(t){return Tb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return zU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return zU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function KU(t){return Om(JSON.stringify({version:2,heartbeats:t})).length}!function gle(t){nu(new Zs("platform-logger",e=>new Sue(e),"PRIVATE")),nu(new Zs("heartbeat",e=>new dle(e),"PRIVATE")),ki(Fm,"0.13.2",t),ki(Fm,"0.13.2","esm2017"),ki("fire-js","")}(""),ki("firebase","11.10.0","app");var Do,JU,QU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YU={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,T){T||(T=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(T=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=T+(b<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(R^x&(T^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(T^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(R^(T|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=T+((b=E+(R^(T|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(E^(x|~T))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var T=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(T[R]=x,S=!1)}this.g=T}(function e(C,E){function T(){}T.prototype=E.prototype,C.D=E.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),Qi=2;Qi<arguments.length;Qi++)b[Qi-2]=arguments[Qi];return E.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var T=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=T;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var T=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&T,T/=256;for(this.u(C),C=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)C[T++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(u(-C));for(var E=[],T=1,S=0;C>=T;S++)E[S]=C/T|0,T*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function v(C){return-1==C.h}function w(C){for(var E=C.g.length,T=[],S=0;S<E;S++)T[S]=~C.g[S];return new s(T,~C.h).add(f)}function A(C,E){return C.add(w(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function F(C,E){this.g=C,this.h=E}function W(C,E){if(_(E))throw Error("division by zero");if(_(C))return new F(h,h);if(v(C))return E=W(w(C),E),new F(w(E.g),w(E.h));if(v(E))return E=W(C,w(E)),new F(w(E.g),E.h);if(30<C.g.length){if(v(C)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var T=f,S=E;0>=S.l(C);)T=Q(T),S=Q(S);var R=te(T,1),x=te(S,1);for(S=te(S,2),T=te(T,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(T),x=b),S=te(S,1),T=te(T,1)}return E=A(C,R.j(E)),new F(R,E)}for(R=h;0<=C.l(E);){for(T=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(T)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(T)).j(E);v(b)||0<b.l(C);)b=(x=u(T-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,b)}return new F(R,C)}function Q(C){for(var E=C.g.length+1,T=[],S=0;S<E;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(T,C.h)}function te(C,E){var T=E>>5;E%=32;for(var S=C.g.length-T,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+T)>>>E|C.i(x+T+1)<<32-E:C.i(x+T);return new s(R,C.h)}(t=s.prototype).m=function(){if(v(this))return-w(this).m();for(var C=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(v(this))return"-"+w(this).toString(C);for(var E=u(Math.pow(C,6)),T=this,S="";;){var R=W(T,E).g,x=((0<(T=A(T,R.j(E))).g.length?T.g[0]:T.h)>>>0).toString(C);if(_(T=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return v(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return v(this)?w(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,T[R]=(b&=65535)<<16|(x&=65535)}return new s(T,-2147483648&T[T.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(v(this))return v(C)?w(this).j(w(C)):w(w(this).j(C));if(v(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),Qi=C.i(R)>>>16,ff=65535&C.i(R);T[2*S+2*R]+=b*ff,D(T,2*S+2*R),T[2*S+2*R+1]+=x*ff,D(T,2*S+2*R+1),T[2*S+2*R+1]+=b*Qi,D(T,2*S+2*R+1),T[2*S+2*R+2]+=x*Qi,D(T,2*S+2*R+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)},t.A=function(C){return W(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&C.i(S);return new s(T,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|C.i(S);return new s(T,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^C.i(S);return new s(T,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JU=YU.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return w(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(b))):S=(S=S.j(T)).add(u(b))}return S},Do=YU.Integer=s}).apply(typeof QU<"u"?QU:typeof self<"u"?self:typeof window<"u"?window:{});var ZU,Zd,XU,$m,Cb,ej,tj,nj,Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Bm&&Bm];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in m))break e;m=m[P]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,P={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),l.apply(p,P)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,P,k){for(var G=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)G[Xe-2]=arguments[Xe];return p.prototype[P].apply(y,G)}}function v(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function w(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const P=l.length||0,k=y.length||0;l.length=P+k;for(let G=0;G<k;G++)l[P+G]=y[G]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Q=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function te(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let P=1;P<arguments.length;P++){for(m in y=arguments[P],y)l[m]=y[m];for(let k=0;k<T.length;k++)m=T[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=qR;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var ff=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new bve,l=>l.reset());class bve{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let pf,gf=!1,qR=new class Qi{constructor(){this.h=this.g=null}add(p,m){const y=ff.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Nz=()=>{const l=a.Promise.resolve(void 0);pf=()=>{l.then(Cve)}};var Cve=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=ff;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}gf=!1};function es(){this.s=this.s,this.C=this.C}function wn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}es.prototype.s=!1,es.prototype.ma=function(){this.s||(this.s=!0,this.N())},es.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},wn.prototype.h=function(){this.defaultPrevented=!0};var Sve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function mf(l,p){if(wn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Q){e:{try{W(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:Ave[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&mf.aa.h.call(this)}}_(mf,wn);var Ave={2:"touch",3:"pen",4:"mouse"};mf.prototype.h=function(){mf.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _f="closure_listenable_"+(1e6*Math.random()|0),Dve=0;function Rve(l,p,m,y,P){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=P,this.key=++Dve,this.da=this.fa=!1}function xy(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ky(l){this.src=l,this.g={},this.h=0}function zR(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],P=Array.prototype.indexOf.call(y,p,void 0);(k=0<=P)&&Array.prototype.splice.call(y,P,1),k&&(xy(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function GR(l,p,m,y){for(var P=0;P<l.length;++P){var k=l[P];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return P}return-1}ky.prototype.add=function(l,p,m,y,P){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var G=GR(l,p,y,P);return-1<G?(p=l[G],m||(p.fa=!1)):((p=new Rve(p,this.src,k,!!y,P)).fa=m,l.push(p)),p};var WR="closure_lm_"+(1e6*Math.random()|0),KR={};function xz(l,p,m,y,P){if(y&&y.once)return Oz(l,p,m,y,P);if(Array.isArray(p)){for(var k=0;k<p.length;k++)xz(l,p[k],m,y,P);return null}return m=ZR(m),l&&l[_f]?l.K(p,m,u(y)?!!y.capture:!!y,P):kz(l,p,m,!1,y,P)}function kz(l,p,m,y,P,k){if(!p)throw Error("Invalid event type");var G=u(P)?!!P.capture:!!P,Xe=YR(l);if(Xe||(l[WR]=Xe=new ky(l)),(m=Xe.add(p,m,y,G,k)).proxy)return m;if(y=function Pve(){const p=Mve;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)Sve||(P=G),void 0===P&&(P=!1),l.addEventListener(p.toString(),y,P);else if(l.attachEvent)l.attachEvent(Lz(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function Oz(l,p,m,y,P){if(Array.isArray(p)){for(var k=0;k<p.length;k++)Oz(l,p[k],m,y,P);return null}return m=ZR(m),l&&l[_f]?l.L(p,m,u(y)?!!y.capture:!!y,P):kz(l,p,m,!0,y,P)}function Vz(l,p,m,y,P){if(Array.isArray(p))for(var k=0;k<p.length;k++)Vz(l,p[k],m,y,P);else y=u(y)?!!y.capture:!!y,m=ZR(m),l&&l[_f]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=GR(k=l.g[p],m,y,P))&&(xy(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=YR(l))&&(p=l.g[p.toString()],l=-1,p&&(l=GR(p,m,y,P)),(m=-1<l?p[l]:null)&&QR(m))}function QR(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[_f])zR(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(Lz(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=YR(p))?(zR(m,l),0==m.h&&(m.src=null,p[WR]=null)):xy(l)}}}function Lz(l){return l in KR?KR[l]:KR[l]="on"+l}function Mve(l,p){if(l.da)l=!0;else{p=new mf(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&QR(l),l=m.call(y,p)}return l}function YR(l){return(l=l[WR])instanceof ky?l:null}var JR="__closure_events_fn_"+(1e9*Math.random()>>>0);function ZR(l){return"function"==typeof l?l:(l[JR]||(l[JR]=function(p){return l.handleEvent(p)}),l[JR])}function Tn(){es.call(this),this.i=new ky(this),this.M=this,this.F=null}function Vn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new wn(p,l);else if(p instanceof wn)p.target=p.target||l;else{var P=p;S(p=new wn(y,l),P)}if(P=!0,m)for(var k=m.length-1;0<=k;k--){var G=p.g=m[k];P=Oy(G,y,!0,p)&&P}if(P=Oy(G=p.g=l,y,!0,p)&&P,P=Oy(G,y,!1,p)&&P,m)for(k=0;k<m.length;k++)P=Oy(G=p.g=m[k],y,!1,p)&&P}function Oy(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var P=!0,k=0;k<p.length;++k){var G=p[k];if(G&&!G.da&&G.capture==m){var Xe=G.listener,an=G.ha||G.src;G.fa&&zR(l.i,G),P=!1!==Xe.call(an,y)&&P}}return P&&!y.defaultPrevented}function Fz(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Uz(l){l.g=Fz(()=>{l.g=null,l.i&&(l.i=!1,Uz(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(Tn,es),Tn.prototype[_f]=!0,Tn.prototype.removeEventListener=function(l,p,m,y){Vz(this,l,p,m,y)},Tn.prototype.N=function(){if(Tn.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)xy(m[y]);delete l.g[p],l.h--}}this.F=null},Tn.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},Tn.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class Nve extends es{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Uz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yf(l){es.call(this),this.h=l,this.g={}}_(yf,es);var jz=[];function Bz(l){te(l.g,function(p,m){this.g.hasOwnProperty(m)&&QR(p)},l),l.g={}}yf.prototype.N=function(){yf.aa.N.call(this),Bz(this)},yf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var XR=a.JSON.stringify,xve=a.JSON.parse,kve=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function eP(){}function Hz(){}eP.prototype.h=null;var vf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tP(){wn.call(this,"d")}function nP(){wn.call(this,"c")}_(tP,wn),_(nP,wn);var ka={},qz=null;function Vy(){return qz=qz||new Tn}function zz(l){wn.call(this,ka.La,l)}function If(l){const p=Vy();Vn(p,new zz(p))}function Gz(l,p){wn.call(this,ka.STAT_EVENT,l),this.stat=p}function Ln(l){const p=Vy();Vn(p,new Gz(p,l))}function Wz(l,p){wn.call(this,ka.Ma,l),this.size=p}function Ef(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function wf(){this.g=!0}function nl(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function Fve(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var G=1;G<P.length;G++)P[G]=""}}}return XR(m)}catch{return p}}(l,m)+(y?" "+y:"")})}ka.La="serverreachability",_(zz,wn),ka.STAT_EVENT="statevent",_(Gz,wn),ka.Ma="timingevent",_(Wz,wn),wf.prototype.xa=function(){this.g=!1},wf.prototype.info=function(){};var rP,Ly={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Fy(){}function ts(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new yf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qz}function Qz(){this.i=null,this.g="",this.h=!1}_(Fy,eP),Fy.prototype.g=function(){return new XMLHttpRequest},Fy.prototype.i=function(){return{}},rP=new Fy;var Yz={},iP={};function oP(l,p,m){l.L=1,l.v=$y(Yi(p)),l.m=m,l.P=!0,Jz(l,null)}function Jz(l,p){l.F=Date.now(),Uy(l),l.A=Yi(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),d3(m.i,"t",y),l.C=0,m=l.j.J,l.h=new Qz,l.g=R3(l.j,m?p:null,!l.m),0<l.O&&(l.M=new Nve(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(jz[0]=P.toString()),P=jz);for(var k=0;k<P.length;k++){var G=xz(m,P[k],y||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),If(),function Ove(l,p,m,y,P,k){l.info(function(){if(l.g)if(k)for(var G="",Xe=k.split("&"),an=0;an<Xe.length;an++){var ke=Xe[an].split("=");if(1<ke.length){var bn=ke[0];ke=ke[1];var Cn=bn.split("_");G=2<=Cn.length&&"type"==Cn[1]?G+(bn+"=")+ke+"&":G+(bn+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+p+"\n"+m+"\n"+G})}(l.i,l.u,l.A,l.l,l.R,l.m)}function Zz(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function Uve(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?iP:(m=Number(p.substring(m,y)),isNaN(m)?Yz:(y+=1)+m>p.length?iP:(p=p.slice(y,y+m),l.C=y+m,p))}function Uy(l){l.S=Date.now()+l.I,Xz(l,l.I)}function Xz(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Ef(f(l.ba,l),p)}function sP(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Tf(l){0==l.j.G||l.J||C3(l.j,l)}function Oa(l){sP(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,Bz(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function aP(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||cP(m.h,l)))if(!l.K&&cP(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var P=y;if(0==P[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;Wy(m),zy(m)}hP(m),Ln(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&0==m.v&&!m.C&&(m.C=Ef(f(m.Za,m),6e3));if(1>=n3(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else La(m,11)}else if((l.K||m.g==l)&&Wy(m),!D(p))for(P=m.Da.g.parse(p),p=0;p<P.length;p++){let ke=P[p];if(m.T=ke[0],ke=ke[1],2==m.G)if("c"==ke[0]){m.K=ke[1],m.ia=ke[2];const bn=ke[3];null!=bn&&(m.la=bn,m.j.info("VER="+m.la));const Cn=ke[4];null!=Cn&&(m.Aa=Cn,m.j.info("SVER="+m.Aa));const ol=ke[5];null!=ol&&"number"==typeof ol&&0<ol&&(m.L=y=1.5*ol,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Vr=l.g;if(Vr){const Qy=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qy){var k=y.h;k.g||-1==Qy.indexOf("spdy")&&-1==Qy.indexOf("quic")&&-1==Qy.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(uP(k,k.h),k.h=null))}if(y.D){const pP=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;pP&&(y.ya=pP,ct(y.I,y.D,pP))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var G=l;if((y=m).qa=D3(y,y.J?y.ia:null,y.W),G.K){r3(y.h,G);var Xe=G,an=y.L;an&&(Xe.I=an),Xe.B&&(sP(Xe),Uy(Xe)),y.g=G}else T3(y);0<m.i.length&&Gy(m)}else"stop"!=ke[0]&&"close"!=ke[0]||La(m,7);else 3==m.G&&("stop"==ke[0]||"close"==ke[0]?"stop"==ke[0]?La(m,7):dP(m):"noop"!=ke[0]&&m.l&&m.l.ta(ke),m.v=0)}If()}catch{}}ts.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==Ji(l)?p.j():this.Y(l)},ts.prototype.Y=function(l){try{if(l==this.g)e:{const Cn=Ji(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>Cn)&&(3!=Cn||this.g&&(this.h.h||this.g.oa()||y3(this.g)))){this.J||4!=Cn||7==p||If(),sP(this);var m=this.g.Z();this.X=m;t:if(Zz(this)){var y=y3(this.g);l="";var P=y.length,k=4==Ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oa(this),Tf(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==P-1)});y.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=200==m,function Vve(l,p,m,y,P,k,G){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+p+"\n"+m+"\n"+k+" "+G})}(this.i,this.u,this.A,this.l,this.R,Cn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,an=this.g;if((Xe=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Xe)){var ke=Xe;break t}}ke=null}if(!(m=ke)){this.o=!1,this.s=3,Ln(12),Oa(this),Tf(this);break e}nl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aP(this,m)}if(this.P){let Vr;for(m=!0;!this.J&&this.C<G.length;){if(Vr=Uve(this,G),Vr==iP){4==Cn&&(this.s=4,Ln(14),m=!1),nl(this.i,this.l,null,"[Incomplete Response]");break}if(Vr==Yz){this.s=4,Ln(15),nl(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}nl(this.i,this.l,Vr,null),aP(this,Vr)}if(Zz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Cn||0!=G.length||this.h.h||(this.s=1,Ln(16),m=!1),this.o=this.o&&m,m){if(0<G.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),fP(bn),bn.M=!0,Ln(11))}}else nl(this.i,this.l,G,"[Invalid Chunked Response]"),Oa(this),Tf(this)}else nl(this.i,this.l,G,null),aP(this,G);4==Cn&&Oa(this),this.o&&!this.J&&(4==Cn?C3(this.j,this):(this.o=!1,Uy(this)))}else(function nIe(l){const p={};l=(l.g&&2<=Ji(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const P=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[P]||[];p[P]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<G.indexOf("Unknown SID")?(this.s=3,Ln(12)):(this.s=0,Ln(13)),Oa(this),Tf(this)}}}catch{}},ts.prototype.cancel=function(){this.J=!0,Oa(this)},ts.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function Lve(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(If(),Ln(17)),Oa(this),this.s=2,Tf(this)):Xz(this,this.S-l)};var jve=class{constructor(l,p){this.g=l,this.map=p}};function e3(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function t3(l){return!!l.h||!!l.g&&l.g.size>=l.j}function n3(l){return l.h?1:l.g?l.g.size:0}function cP(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function uP(l,p){l.g?l.g.add(p):l.h=p}function r3(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function i3(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return v(l.i)}function o3(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function $ve(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function Bve(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),P=y.length,k=0;k<P;k++)p.call(void 0,y[k],m&&m[k],l)}e3.prototype.cancel=function(){if(this.i=i3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var s3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Va){this.h=l.h,jy(this,l.j),this.o=l.o,this.g=l.g,By(this,l.s),this.l=l.l;var p=l.i,m=new Sf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),a3(this,m),this.m=l.m}else l&&(p=String(l).match(s3))?(this.h=!1,jy(this,p[1]||"",!0),this.o=bf(p[2]||""),this.g=bf(p[3]||"",!0),By(this,p[4]),this.l=bf(p[5]||"",!0),a3(this,p[6]||"",!0),this.m=bf(p[7]||"")):(this.h=!1,this.i=new Sf(null,this.h))}function Yi(l){return new Va(l)}function jy(l,p,m){l.j=m?bf(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function By(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function a3(l,p,m){p instanceof Sf?(l.i=p,function Qve(l,p){p&&!l.j&&(ns(l),l.i=null,l.g.forEach(function(m,y){var P=y.toLowerCase();y!=P&&(u3(this,y),d3(this,P,m))},l)),l.j=p}(l.i,l.h)):(m||(p=Cf(p,Wve)),l.i=new Sf(p,l.h))}function ct(l,p,m){l.i.set(p,m)}function $y(l){return ct(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function bf(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,qve),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qve(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Va.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Cf(p,c3,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(Cf(p,c3,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(Cf(m,"/"==m.charAt(0)?Gve:zve,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Cf(m,Kve)),l.join("")};var c3=/[#\/\?@]/g,zve=/[#\?:]/g,Gve=/[#\?]/g,Wve=/[#\?@]/g,Kve=/#/g;function Sf(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function ns(l){l.g||(l.g=new Map,l.h=0,l.i&&function Hve(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),P=null;if(0<=y){var k=l[m].substring(0,y);P=l[m].substring(y+1)}else k=l[m];p(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function u3(l,p){ns(l),p=rl(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function l3(l,p){return ns(l),p=rl(l,p),l.g.has(p)}function d3(l,p,m){u3(l,p),0<m.length&&(l.i=null,l.g.set(rl(l,p),v(m)),l.h+=m.length)}function rl(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function rs(l,p,m,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(m)}catch{}}function Zve(){this.g=new kve}function Xve(l,p,m){const y=m||"";try{o3(l,function(P,k){let G=P;u(P)&&(G=XR(P)),p.push(y+k+"="+encodeURIComponent(G))})}catch(P){throw p.push(y+"type="+encodeURIComponent("_badmap")),P}}function Af(l){this.l=l.Ub||null,this.j=l.eb||!1}function Hy(l,p){Tn.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function h3(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Df(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rf(l)}function Rf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function f3(l){let p="";return te(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function lP(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=f3(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):ct(l,p,m))}function Ct(l){Tn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Sf.prototype).add=function(l,p){ns(this),this.i=null,l=rl(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){ns(this),this.g.forEach(function(m,y){m.forEach(function(P){l.call(p,P,y,this)},this)},this)},t.na=function(){ns(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const P=l[y];for(let k=0;k<P.length;k++)m.push(p[y])}return m},t.V=function(l){ns(this);let p=[];if("string"==typeof l)l3(this,l)&&(p=p.concat(this.g.get(rl(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return ns(this),this.i=null,l3(this,l=rl(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var P=k;""!==G[y]&&(P+="="+encodeURIComponent(String(G[y]))),l.push(P)}}return this.i=l.join("&")},_(Af,eP),Af.prototype.g=function(){return new Hy(this.l,this.j)},Af.prototype.i=function(l){return function(){return l}}({}),_(Hy,Tn),(t=Hy.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Rf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Df(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rf(this)),this.g&&(this.readyState=3,Rf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h3(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Df(this):Rf(this),3==this.readyState&&h3(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Df(this))},t.Qa=function(l){this.g&&(this.response=l,Df(this))},t.ga=function(){this.g&&Df(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(Hy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Ct,Tn);var eIe=/^https?$/i,tIe=["POST","PUT"];function p3(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,g3(l),qy(l)}function g3(l){l.A||(l.A=!0,Vn(l,"complete"),Vn(l,"error"))}function m3(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=Ji(l)||2!=l.Z()))if(l.u&&4==Ji(l))Fz(l.Ea,0,l);else if(Vn(l,"readystatechange"),4==Ji(l)){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===G){var P=String(l.D).match(s3)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!eIe.test(P?P.toLowerCase():"")}m=y}if(m)Vn(l,"complete"),Vn(l,"success");else{l.m=6;try{var k=2<Ji(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",g3(l)}}finally{qy(l)}}}function qy(l,p){if(l.g){_3(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Vn(l,"ready");try{m.onreadystatechange=y}catch{}}}function _3(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function Ji(l){return l.g?l.g.readyState:0}function y3(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Pf(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function v3(l){this.Aa=0,this.i=[],this.j=new wf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pf("baseRetryDelayMs",5e3,l),this.cb=Pf("retryDelaySeedMs",1e4,l),this.Wa=Pf("forwardChannelMaxRetries",2,l),this.wa=Pf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new e3(l&&l.concurrentRequestLimit),this.Da=new Zve,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function dP(l){if(I3(l),3==l.G){var p=l.U++,m=Yi(l.I);if(ct(m,"SID",l.K),ct(m,"RID",p),ct(m,"TYPE","terminate"),Mf(l,m),(p=new ts(l,l.j,p)).L=2,p.v=$y(Yi(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=R3(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Uy(p)}A3(l)}function zy(l){l.g&&(fP(l),l.g.cancel(),l.g=null)}function I3(l){zy(l),l.u&&(a.clearTimeout(l.u),l.u=null),Wy(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function Gy(l){if(!t3(l.h)&&!l.s){l.s=!0;var p=l.Ga;pf||Nz(),gf||(pf(),gf=!0),qR.add(p,l),l.B=0}}function E3(l,p){var m;m=p?p.l:l.U++;const y=Yi(l.I);ct(y,"SID",l.K),ct(y,"RID",m),ct(y,"AID",l.T),Mf(l,y),l.m&&l.o&&lP(y,l.m,l.o),m=new ts(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=w3(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),uP(l.h,m),oP(m,y,p)}function Mf(l,p){l.H&&te(l.H,function(m,y){ct(p,y,m)}),l.l&&o3({},function(m,y){ct(p,y,m)})}function w3(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var P=l.i;let k=-1;for(;;){const G=["count="+m];-1==k?0<m?(k=P[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Xe=!0;for(let an=0;an<m;an++){let ke=P[an].g;const bn=P[an].map;if(ke-=k,0>ke)k=Math.max(0,P[an].g-100),Xe=!1;else try{Xve(bn,G,"req"+ke+"_")}catch{y&&y(bn)}}if(Xe){y=G.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function T3(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;pf||Nz(),gf||(pf(),gf=!0),qR.add(p,l),l.v=0}}function hP(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Ef(f(l.Fa,l),S3(l,l.v)),l.v++,0))}function fP(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function b3(l){l.g=new ts(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=Yi(l.qa);ct(p,"RID","rpc"),ct(p,"SID",l.K),ct(p,"AID",l.T),ct(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&ct(p,"TO",l.ja),ct(p,"TYPE","xmlhttp"),Mf(l,p),l.m&&l.o&&lP(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=$y(Yi(p)),m.m=null,m.P=!0,Jz(m,l)}function Wy(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function C3(l,p){var m=null;if(l.g==p){Wy(l),fP(l),l.g=null;var y=2}else{if(!cP(l.h,p))return;m=p.D,r3(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var P=l.B;Vn(y=Vy(),new Wz(y,m)),Gy(l)}else T3(l);else if(3==(P=p.s)||0==P&&0<p.X||!(1==y&&function rIe(l,p){return!(n3(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Ef(f(l.Ga,l,p),S3(l,l.B)),l.B++,0)))}(l,p)||2==y&&hP(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),P){case 1:La(l,5);break;case 4:La(l,10);break;case 3:La(l,6);break;default:La(l,2)}}function S3(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function La(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const P=!y;y=new Va(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||jy(y,"https"),$y(y),P?function Yve(l,p){const m=new wf;if(a.Image){const y=new Image;y.onload=g(rs,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(rs,m,"TestLoadImage: error",!1,p,y),y.onabort=g(rs,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(rs,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function Jve(l,p){new wf;const y=new AbortController,P=setTimeout(()=>{y.abort(),rs(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(P),rs(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(P),rs(0,0,!1,p)})}(y.toString(),m)}else Ln(2);l.G=0,l.l&&l.l.sa(p),A3(l),I3(l)}function A3(l){if(l.G=0,l.ka=[],l.l){const p=i3(l.h);(0!=p.length||0!=l.i.length)&&(w(l.ka,p),w(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function D3(l,p,m){var y=m instanceof Va?Yi(m):new Va(m);if(""!=y.g)p&&(y.g=p+"."+y.g),By(y,y.s);else{var P=a.location;y=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var k=new Va(null);y&&jy(k,y),p&&(k.g=p),P&&By(k,P),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&ct(y,m,p),ct(y,"VER",l.la),Mf(l,y),y}function R3(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Ct(l.Ca&&!l.pa?new Af({eb:m}):l.pa)).Ha(l.J),p}function P3(){}function Ky(){}function lr(l,p){Tn.call(this),this.g=new v3(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new il(this)}function M3(l){tP.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function N3(){nP.call(this),this.status=1}function il(l){this.g=l}(t=Ct.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rP.g(),this.v=function $z(l){return l.h||(l.h=l.i())}(this.o?this.o:rP),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void p3(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)m.set(P,y[P]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tIe,p,void 0))||y||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of m)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_3(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){p3(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Vn(this,"complete"),Vn(this,"abort"),qy(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qy(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?m3(this):this.bb())},t.bb=function(){m3(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),xve(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=v3.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){Ln(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=D3(this,null,this.W),Gy(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const P=new ts(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(P.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=w3(this,P,p),ct(m=Yi(this.I),"RID",l),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),Mf(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(f3(k)))+"&"+p:this.m&&lP(m,this.m,k)),uP(this.h,P),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",p),ct(m,"SID","null"),P.T=!0,oP(P,m,null)):oP(P,m,p),this.G=2}}else 3==this.G&&(l?E3(this,l):0==this.i.length||t3(this.h)||E3(this))},t.Fa=function(){if(this.u=null,b3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ef(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ln(10),zy(this),b3(this))},t.Za=function(){null!=this.C&&(this.C=null,zy(this),hP(this),Ln(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ln(2)):(this.j.info("Failed to ping google.com"),Ln(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=P3.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Ky.prototype.g=function(l,p){return new lr(l,p)},_(lr,Tn),lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lr.prototype.close=function(){dP(this.g)},lr.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=XR(l),l=m);p.i.push(new jve(p.Ya++,l)),3==p.G&&Gy(p)},lr.prototype.N=function(){this.g.l=null,delete this.j,dP(this.g),delete this.g,lr.aa.N.call(this)},_(M3,tP),_(N3,nP),_(il,P3),il.prototype.ua=function(){Vn(this.g,"a")},il.prototype.ta=function(l){Vn(this.g,new M3(l))},il.prototype.sa=function(l){Vn(this.g,new N3)},il.prototype.ra=function(){Vn(this.g,"b")},Ky.prototype.createWebChannel=Ky.prototype.g,lr.prototype.send=lr.prototype.o,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,nj=Oi.createWebChannelTransport=function(){return new Ky},tj=Oi.getStatEventTarget=function(){return Vy()},ej=Oi.Event=ka,Cb=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ly.NO_ERROR=0,Ly.TIMEOUT=8,Ly.HTTP_ERROR=6,$m=Oi.ErrorCode=Ly,Kz.COMPLETE="complete",XU=Oi.EventType=Kz,Hz.EventType=vf,vf.OPEN="a",vf.CLOSE="b",vf.ERROR="c",vf.MESSAGE="d",Tn.prototype.listen=Tn.prototype.K,Zd=Oi.WebChannel=Hz,Oi.FetchXmlHttpFactory=Af,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,ZU=Oi.XhrIo=Ct}).apply(typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{});const ij="@firebase/firestore";class Qt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");let iu="11.10.0";const Ro=new fb("@firebase/firestore");function ou(){return Ro.logLevel}function j(t,...e){if(Ro.logLevel<=Ce.DEBUG){const n=e.map(Sb);Ro.debug(`Firestore (${iu}): ${t}`,...n)}}function Rt(t,...e){if(Ro.logLevel<=Ce.ERROR){const n=e.map(Sb);Ro.error(`Firestore (${iu}): ${t}`,...n)}}function xn(t,...e){if(Ro.logLevel<=Ce.WARN){const n=e.map(Sb);Ro.warn(`Firestore (${iu}): ${t}`,...n)}}function Sb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function K(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,sj(t,r,n)}function sj(t,e,n){let r=`FIRESTORE (${iu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rt(r),new Error(r)}function J(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||sj(e,i,r)}function z(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class aj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class ble{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Cle{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;J(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yt,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(I(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J("string"==typeof r.accessToken,31837,{l:r}),new aj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return J(null===e||"string"==typeof e,2055,{h:e}),new Qt(e)}}class Sle{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ale{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Sle(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){J(void 0===this.o,3512);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new Ab(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Rle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Db(){return new TextEncoder}class Rb{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Rle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Pb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{const o=Db(),s=Ple(o.encode(cj(t,n)),o.encode(cj(e,n)));return 0!==s?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function cj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Ple(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function su(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const Mb="__name__";class ti{constructor(e,n,r){void 0===n?n=0:n>e.length&&K(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ti.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ti.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return oe(e.length,n.length)}static compareSegments(e,n){const r=ti.isNumericId(e),i=ti.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ti.extractNumericId(e).compare(ti.extractNumericId(n)):Pb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class we extends ti{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Mle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends ti{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return Mle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Mb}static keyField(){return new dt([Mb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class q{constructor(e){this.path=e}static fromPath(e){return new q(we.fromString(e))}static fromName(e){return new q(we.fromString(e).popFirst(5))}static empty(){return new q(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===we.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new we(e.slice()))}}function Nb(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lj(t){if(!q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dj(t){if(q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Hm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":K(12329,{type:typeof t})}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function na(t,e){if(!hj(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}const pj=-62135596800;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pj)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(na(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-pj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Ut("string",$e._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new $e(0,0))}static max(){return new ee(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _j(t){return new ir(t.readTime,t.key,-1)}class ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ir(ee.min(),q.empty(),-1)}static max(){return new ir(ee.max(),q.empty(),-1)}}function kb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=q.comparator(t.documentKey,e.documentKey),0!==n?n:oe(t.largestBatchId,e.largestBatchId))}class vj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Po(t){return Ob.apply(this,arguments)}function Ob(){return(Ob=I(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Mo(t){return"IndexedDbTransactionError"===t.name}let sr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function th(t){return null==t}function nh(t){return 0===t&&1/t==-1/0}function Ule(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Tj(t){return t+"\x01\x01"}const ih="mutationQueues",xr="mutations",du="documentMutations",oh="remoteDocumentGlobal",hu="targets",fu="targetDocuments",ca="targetGlobal",sh="collectionParents",pu="clientMetadata",Ym="bundles",Jm="namedQueries";function Vj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class nt{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xm(this.root,e,this.comparator,!0)}}class Xm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??on.RED,this.left=i??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new on(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return on.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1,on.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class He{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uj(this.data.getIterator())}getIteratorFrom(e){return new Uj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Uj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new He(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return su(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class jj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jj("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const dde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(J(!!t,39018),"string"==typeof t){let e=0;const n=dde.exec(t);if(J(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Li(t){return"string"==typeof t?bt.fromBase64String(t):bt.fromUint8Array(t)}const Bj="server_timestamp",$j="__type__",Hj="__previous_value__",qj="__local_write_time__";function e_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[$j])||void 0===n?void 0:n.stringValue)===Bj}function t_(t){const e=t.mapValue.fields[Hj];return e_(e)?t_(e):e}function uh(t){const e=Vi(t.mapValue.fields[qj].timestampValue);return new $e(e.seconds,e.nanos)}class hde{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const lh="(default)";class ua{constructor(e,n){this.projectId=e,this.database=n||lh}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}const zb="__type__",zj="__max__",ko_mapValue={fields:{__type__:{stringValue:zj}}},Gb="__vector__",mu="value";function Oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e_(t)?4:Yj(t)?9007199254740991:o_(t)?10:11:K(28295,{value:t})}function ii(t,e){if(t===e)return!0;const n=Oo(t);if(n!==Oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uh(t).isEqual(uh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Vi(i.timestampValue),a=Vi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Li(t.bytesValue).isEqual(Li(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?nh(s)===nh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return su(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Vj(s)!==Vj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!ii(s[c],a[c])))return!1;return!0}(t,e);default:return K(52216,{left:t})}var o}function dh(t,e){return void 0!==(t.values||[]).find(n=>ii(n,e))}function Vo(t,e){if(t===e)return 0;const n=Oo(t),r=Oo(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Gj(t.timestampValue,e.timestampValue);case 4:return Gj(uh(t),uh(e));case 5:return Pb(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Li(o),c=Li(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=oe(a[u],c[u]);if(0!==d)return d}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=oe(ht(o.latitude),ht(s.latitude));return 0!==a?a:oe(ht(o.longitude),ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wj(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[mu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[mu])||void 0===c?void 0:c.arrayValue,v=oe((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:Wj(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ko_mapValue&&s===ko_mapValue)return 0;if(o===ko_mapValue)return 1;if(s===ko_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Pb(c[h],d[h]);if(0!==f)return f;const g=Vo(a[c[h]],u[d[h]]);if(0!==g)return g}return oe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function Gj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oe(t,e);const n=Vi(t),r=Vi(e),i=oe(n.seconds,r.seconds);return 0!==i?i:oe(n.nanos,r.nanos)}function Wj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Vo(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function _u(t){return Wb(t)}function Wb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Li(t.bytesValue).toBase64():"referenceValue"in t?q.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Wb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Wb(n.fields[s])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function r_(t){switch(Oo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=t_(t);return e?16+r_(e):16;case 5:return 2*t.stringValue.length;case 6:return Li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+r_(o),0);case 10:case 11:return function(r){let i=0;return xo(r.fields,(o,s)=>{i+=o.length+r_(s)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function la(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kb(t){return!!t&&"integerValue"in t}function hh(t){return!!t&&"arrayValue"in t}function Kj(t){return!!t&&"nullValue"in t}function Qj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function i_(t){return!!t&&"mapValue"in t}function o_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[zb])||void 0===n?void 0:n.stringValue)===Gb}function fh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Yj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===zj}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!i_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=fh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());i_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];i_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new sn(fh(this.value))}}function eB(t){const e=[];return xo(t.fields,(n,r)=>{const i=new dt([n]);if(i_(r)){const o=eB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Kn(e)}class ot{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,ee.min(),ee.min(),ee.min(),sn.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,ee.min(),ee.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,ee.min(),ee.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lo{constructor(e,n){this.position=e,this.inclusive=n}}function tB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?q.comparator(q.fromName(s.referenceValue),n.key):Vo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function nB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}class ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function gde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class rB{}class Se extends rB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new mde(e,n,r):"array-contains"===n?new vde(e,r):"in"===n?new uB(e,r):"not-in"===n?new Ide(e,r):"array-contains-any"===n?new Ede(e,r):new Se(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new _de(e,r):new yde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Vo(n,this.value)):null!==n&&Oo(this.value)===Oo(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends rB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new qe(e,n)}matches(e){return yu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yu(t){return"and"===t.op}function Yb(t){return function iB(t){for(const e of t.filters)if(e instanceof qe)return!1;return!0}(t)&&yu(t)}function Jb(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+_u(t.value);if(Yb(t))return t.filters.map(e=>Jb(e)).join(",");{const e=t.filters.map(n=>Jb(n)).join(",");return`${t.op}(${e})`}}function oB(t,e){return t instanceof Se?(r=t,(i=e)instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)):t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&oB(s,i.filters[a]),!0)}(t,e):void K(19439);var r,i}function aB(t){return t instanceof Se?`${(n=t).field.canonicalString()} ${n.op} ${_u(n.value)}`:t instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(aB).join(" ,")+"}"}(t):"Filter";var n}class mde extends Se{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class _de extends Se{constructor(e,n){super(e,"in",n),this.keys=cB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yde extends Se{constructor(e,n){super(e,"not-in",n),this.keys=cB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class vde extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hh(n)&&dh(n.arrayValue,this.value)}}class uB extends Se{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&dh(this.value.arrayValue,n)}}class Ide extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!dh(this.value.arrayValue,n)}}class Ede extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dh(this.value.arrayValue,r))}}class wde{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function Zb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new wde(t,e,n,r,i,o,s)}function da(t){const e=z(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_u(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_u(r)).join(",")),e.Pe=n}return e.Pe}function gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nB(t.startAt,e.startAt)&&nB(t.endAt,e.endAt)}function s_(t){return q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Fi{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function vu(t){return new Fi(t)}function fB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Xb(t){return null!==t.collectionGroup}function Iu(t){const e=z(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new He(dt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ph(o,r))}),n.has(dt.keyField().canonicalString())||e.Te.push(new ph(dt.keyField(),r))}return e.Te}function yn(t){const e=z(t);return e.Ie||(e.Ie=function gB(t,e){if("F"===t.limitType)return Zb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new ph(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Lo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lo(t.startAt.position,t.startAt.inclusive):null;return Zb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Iu(t))),e.Ie}function eC(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function c_(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mh(t,e){return gh(yn(t),yn(e))&&t.limitType===e.limitType}function mB(t){return`${da(yn(t))}|lt:${t.limitType}`}function Eu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aB(i)).join(", ")}]`),th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_u(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_u(i)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Iu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=tB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Iu(r),i)||r.endAt&&!function(s,a,c){const u=tB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Iu(r),i)));var r,i}function yB(t){return(e,n)=>{let r=!1;for(const i of Iu(t)){const o=Tde(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Tde(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Vo(c,u):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Fj(this.inner)}size(){return this.innerSize}}const bde=new nt(q.comparator);function Qn(){return bde}const vB=new nt(q.comparator);function yh(...t){let e=vB;for(const n of t)e=e.insert(n.key,n);return e}function IB(t){let e=vB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return vh()}function EB(){return vh()}function vh(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const Cde=new nt(q.comparator),Sde=new He(q.comparator);function ve(...t){let e=Sde;for(const n of t)e=e.add(n);return e}const Ade=new He(oe);function nC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function wB(t){return{integerValue:""+t}}function TB(t,e){return function wj(t){return"number"==typeof t&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?wB(e):nC(t,e)}class u_{constructor(){this._=void 0}}function Dde(t,e,n){return t instanceof wu?function(i,o){const s={fields:{[$j]:{stringValue:Bj},[qj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&e_(o)&&(o=t_(o)),o&&(s.fields[Hj]=o),{mapValue:s}}(n,e):t instanceof ha?CB(t,e):t instanceof fa?SB(t,e):function(i,o){const s=bB(i,o),a=AB(s)+AB(i.Ee);return Kb(s)&&Kb(i.Ee)?wB(a):nC(i.serializer,a)}(t,e)}function Rde(t,e,n){return t instanceof ha?CB(t,e):t instanceof fa?SB(t,e):n}function bB(t,e){return t instanceof Tu?Kb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class wu extends u_{}class ha extends u_{constructor(e){super(),this.elements=e}}function CB(t,e){const n=DB(e);for(const r of t.elements)n.some(i=>ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends u_{constructor(e){super(),this.elements=e}}function SB(t,e){let n=DB(e);for(const r of t.elements)n=n.filter(i=>!ii(i,r));return{arrayValue:{values:n}}}class Tu extends u_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function AB(t){return ht(t.integerValue||t.doubleValue)}function DB(t){return hh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ih{constructor(e,n){this.field=e,this.transform=n}}class Mde{constructor(e,n){this.version=e,this.transformResults=n}}class ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function l_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class d_{}function RB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Cu(t.key,ft.none()):new bu(t.key,t.data,ft.none());{const n=t.data,r=sn.empty();let i=new He(dt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ji(t.key,r,new Kn(i.toArray()),ft.none())}}function Nde(t,e,n){t instanceof bu?function(i,o,s){const a=i.value.clone(),c=NB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(i,o,s){if(!l_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=NB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(MB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Eh(t,e,n,r){return t instanceof bu?function(o,s,a,c){if(!l_(o.precondition,s))return a;const u=o.value.clone(),d=xB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(o,s,a,c){if(!l_(o.precondition,s))return a;const u=xB(o.fieldTransforms,c,s),d=s.data;return d.setAll(MB(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,l_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function xde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=bB(r.transform,i||null);null!=o&&(null===n&&(n=sn.empty()),n.set(r.field,o))}return n||null}function PB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&su(r,i,(o,s)=>function Pde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ha&&i instanceof ha||r instanceof fa&&i instanceof fa?su(r.elements,i.elements,ii):r instanceof Tu&&i instanceof Tu?ii(r.Ee,i.Ee):r instanceof wu&&i instanceof wu);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class bu extends d_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends d_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function MB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function NB(t,e,n){const r=new Map;J(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Rde(s,a,n[i]))}return r}function xB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Dde(o,s,e))}return r}class Cu extends d_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends d_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Nde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=RB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,(n,r)=>PB(n,r))&&su(this.baseMutations,e.baseMutations,(n,r)=>PB(n,r))}}class oC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Cde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new oC(e,n,r,i)}}class sC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kde{constructor(e,n){this.count=e,this.unchangedNames=n}}var jt,Me;function VB(t){if(void 0===t)return Rt("GRPC error has no .code"),N.UNKNOWN;switch(t){case jt.OK:return N.OK;case jt.CANCELLED:return N.CANCELLED;case jt.UNKNOWN:return N.UNKNOWN;case jt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case jt.INTERNAL:return N.INTERNAL;case jt.UNAVAILABLE:return N.UNAVAILABLE;case jt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case jt.NOT_FOUND:return N.NOT_FOUND;case jt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case jt.ABORTED:return N.ABORTED;case jt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case jt.DATA_LOSS:return N.DATA_LOSS;default:return K(39323,{code:t})}}(Me=jt||(jt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";const Ode=new Do([4294967295,4294967295],0);function LB(t){const e=Db().encode(t),n=new JU;return n.update(e),new Uint8Array(n.digest())}function FB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([n,r],0),new Do([i,o],0)]}class aC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wh(`Invalid padding: ${n}`);if(r<0)throw new wh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new wh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Do.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Do.fromNumber(r)));return 1===i.compare(Ode)&&(i=new Do([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=LB(e),[r,i]=FB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new aC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=LB(e),[r,i]=FB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Th{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Th(ee.min(),i,new nt(oe),Qn(),ve())}}class bh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bh(r,n,ve(),ve(),ve())}}class f_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class UB{constructor(e,n){this.targetId=e,this.De=n}}class jB{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class BB{constructor(){this.ve=0,this.Ce=$B(),this.Fe=bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),n=ve(),r=ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new bh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=$B()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Vde{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qn(),this.je=p_(),this.Je=p_(),this.He=new nt(oe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(s_(o))if(0===r){const s=new q(o.path);this.Xe(n,s,ot.newNoDocument(s,ee.min()))}else J(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Li(r).toUint8Array()}catch(c){if(c instanceof jj)return xn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new aC(s,i,o)}catch(c){return xn(c instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&s_(a.target)){const c=new q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ot.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new Th(e,n,this.He,this.ze,r);return this.ze=Qn(),this.je=p_(),this.Je=p_(),this.He=new nt(oe),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new BB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new He(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new He(oe),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new BB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function p_(){return new nt(q.comparator)}function $B(){return new nt(q.comparator)}const Lde={asc:"ASCENDING",desc:"DESCENDING"},Fde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ude={and:"AND",or:"OR"};class jde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cC(t,e){return t.useProto3Json||th(e)?e:{value:e}}function Su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bde(t,e){return Su(t,e.toTimestamp())}function Pt(t){return J(!!t,49232),ee.fromTimestamp(function(n){const r=Vi(n);return new $e(r.seconds,r.nanos)}(t))}function uC(t,e){return lC(t,e).canonicalString()}function lC(t,e){const n=(i=t,new we(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function qB(t){const e=we.fromString(t);return J(e$(e),10190,{key:e.toString()}),e}function Ch(t,e){return uC(t.databaseId,e.path)}function si(t,e){const n=qB(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(WB(n))}function zB(t,e){return uC(t.databaseId,e)}function dC(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WB(t){return J(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function KB(t,e,n){return{name:Ch(t,e),fields:n.value.mapValue.fields}}function QB(t,e){return{documents:[zB(t,e.path)]}}function m_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zB(t,i);const o=function(u){if(0!==u.length)return XB(qe.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Fo((f=d).field),direction:Gde(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=cC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function JB(t){let e=function GB(t){const e=qB(t);return 4===e.length?we.emptyPath():WB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){J(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=ZB(h);return f instanceof qe&&Yb(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new ph(Au((_=f).field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,th(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new Lo((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new Lo(h.values||[],!h.before)}(n.endAt)),function hB(t,e,n,r,i,o,s,a){return new Fi(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function ZB(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Au(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Au(n.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Au(n.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Au(n.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):void 0!==t.fieldFilter?Se.create(Au((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return qe.create(n.compositeFilter.filters.map(r=>ZB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t});var n}function Gde(t){return Lde[t]}function Wde(t){return Fde[t]}function Kde(t){return Ude[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Au(t){return dt.fromServerFormat(t.fieldPath)}function XB(t){return t instanceof Se?function(n){if("=="===n.op){if(Qj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(Kj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Qj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(Kj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:Wde(n.op),value:n.value}}}(t):t instanceof qe?function(n){const r=n.getFilters().map(i=>XB(i));return 1===r.length?r[0]:{compositeFilter:{op:Kde(n.op),filters:r}}}(t):K(54877,{filter:t})}function Qde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function e$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Bi{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t${constructor(e){this.gt=e}}function y_(t){const e=JB({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?c_(e,e.limit,"L"):e}class _a{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ht(e.integerValue));else if("doubleValue"in e){const r=ht(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),nh(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=Vi(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Li(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?Yj(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):o_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=mu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(ht(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}_a.Ut=new _a;class ihe{constructor(){this.Dn=new yC}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ir.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class yC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(we.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(we.comparator)).toArray()}}new Uint8Array(0);const y$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(41943040,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);class va{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new va(0)}static ur(){return new va(-1)}}const b$="LruGarbageCollector";function S$([t,e],[n,r]){const i=oe(t,n);return 0===i?oe(e,r):i}class ahe{constructor(e){this.Tr=e,this.buffer=new He(S$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();S$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;j(b$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,I(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Mo(r)?j(b$,"Ignoring IndexedDB error during garbage collection: ",r):yield Po(r)}yield n.Rr(3e5)}))}}class che{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return M.resolve(sr.ue);const r=new ahe(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(y$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ou()<=Ce.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class R${constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hhe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class k${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Eh(r.mutation,i,Kn.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=yh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Qn();const s=vh(),a=vh();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof ji)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),Eh(d.mutation,u,d.mutation.getFieldMask(),$e.now())):s.set(u.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new hhe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vh();let i=new nt((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Kn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=EB();d.forEach(f=>{if(!o.has(f)){const g=RB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return q.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Xb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(oi());let a=-1,c=o;return s.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ve())).next(d=>({batchId:a,changes:IB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=yh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=yh();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{const u=(h=n,f=c.child(o),new Fi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,ot.newInvalidDocument(d)))});let a=yh();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&Eh(d.mutation,u,Kn.empty(),$e.now()),_h(n,u)&&(a=a.insert(c,u))}),a})}}class fhe{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Pt(i.createTime)}),M.resolve();var i}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:y_(i.bundledQuery),readTime:Pt(i.readTime)}),M.resolve();var i}}class phe{constructor(){this.overlays=new nt(q.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oi();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=oi(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new nt((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=oi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=oi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sC(n,r));let o=this.kr.get(n);void 0===o&&(o=ve(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class ghe{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class vC{constructor(){this.qr=new He(Jt.Qr),this.$r=new He(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Jt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new we([])),r=new Jt(n,e),i=new Jt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new we([])),r=new Jt(n,e),i=new Jt(n,e+1);let o=ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Jt(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}class mhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new He(Jt.Qr)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new iC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new Jt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(oe);return n.forEach(i=>{const o=new Jt(i,0),s=new Jt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const s=new Jt(new q(o),0);let a=new He(oe);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),M.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){J(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{const o=new Jt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Jt(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class _he{constructor(e){this.ni=e,this.docs=new nt(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ot.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Qn();const s=n.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||kb(_j(d),r)<=0||(i.has(d.key)||_h(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yhe(this)}getSize(e){return M.resolve(this.size)}}class yhe extends R${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class vhe{constructor(e){this.persistence=e,this.ii=new Ui(n=>da(n),gh),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new vC,this.targetCount=0,this._i=va.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new va(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}class IC{constructor(e,n){this.ai={},this.overlays={},this.ui=new sr(0),this.ci=!1,this.ci=!0,this.li=new ghe,this.referenceDelegate=e(this),this.hi=new vhe(this),this.indexManager=new ihe,this.remoteDocumentCache=new _he(r=>this.referenceDelegate.Pi(r)),this.serializer=new t$(n),this.Ti=new fhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new phe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new mhe(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new Ihe(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Ihe extends vj{constructor(e){super(),this.currentSequenceNumber=e}}class S_{constructor(e){this.persistence=e,this.Ai=new vC,this.Ri=null}static Vi(e){return new S_(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class A_{constructor(e,n){this.persistence=e,this.gi=new Ui(r=>function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tj(e)),e=Ule(t.get(n),e);return Tj(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function D$(t,e){return new che(t,e)}(this,n)}static Vi(e,n){return new A_(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=r_(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return M.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class SC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ve(),i=ve();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new SC(e,n.fromCache,r,i)}}class whe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class L${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=DU()?8:function Ij(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Dt())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new whe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ou()<=Ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Eu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(ou()<=Ce.DEBUG&&j("QueryEngine","Query:",Eu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ou()<=Ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Eu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):M.resolve())}ps(e,n){if(fB(n))return M.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=c_(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,c_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return fB(n)||i.isEqual(ee.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(ou()<=Ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eu(n)),this.vs(e,s,n,function mj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(1e9===r?new $e(n+1,0):new $e(n,r));return new ir(i,q.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new He(yB(e));return n.forEach((i,o)=>{_h(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return ou()<=Ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Eu(n)),this.gs.getDocumentsMatchingQuery(e,n,ir.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const AC="LocalStore";class bhe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new nt(oe),this.Ms=new Ui(o=>da(o),gh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function U$(t,e){return DC.apply(this,arguments)}function DC(){return(DC=I(function*(t,e){const n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=ve();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function j$(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Ahe(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ku(t,e,n){return RC.apply(this,arguments)}function RC(){return(RC=I(function*(t,e,n){const r=z(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Mo(s))throw s;j(AC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function R_(t,e,n){const r=z(t);let i=ee.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=z(c),f=h.Ms.get(d);return void 0!==f?M.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:ve())).next(a=>(function q$(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function _B(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class kC{constructor(){this.activeTargetIds=function tC(){return Ade}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y${constructor(){this.Fo=new kC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Phe{xo(e){}shutdown(){}}const J$="ConnectivityMonitor";class Z${constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(J$,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){j(J$,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let N_=null;function VC(){return null===N_?N_=268435456+Math.round(2147483648*Math.random()):N_++,"0x"+N_.toString(16)}const LC="RestConnection",Mhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nhe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=VC(),a=this.Go(e,n.toUriEncodedString());j(LC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=tu(u);return this.jo(e,a,c,r,d).then(h=>(j(LC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw xn(LC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${Mhe[e]}`}terminate(){}}class xhe{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const In="WebChannelConnection";class khe extends Nhe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=VC();return new Promise((a,c)=>{const u=new ZU;u.setWithCredentials(!0),u.listenOnce(XU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $m.NO_ERROR:const h=u.getResponseJson();j(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case $m.TIMEOUT:j(In,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case $m.HTTP_ERROR:const f=u.getStatus();if(j(In,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new L(v,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(In,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);j(In,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=VC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nj(),a=tj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(In,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new xhe({Ho:w=>{g?j(In,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(j(In,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(In,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Yo:()=>h.close()}),v=(w,A,D)=>{w.listen(A,F=>{try{D(F)}catch(W){setTimeout(()=>{throw W},0)}})};return v(h,Zd.EventType.OPEN,()=>{g||(j(In,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),v(h,Zd.EventType.CLOSE,()=>{g||(g=!0,j(In,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),v(h,Zd.EventType.ERROR,w=>{g||(g=!0,xn(In,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),v(h,Zd.EventType.MESSAGE,w=>{var A;if(!g){const D=w.data[0];J(!!D,16349);const F=D,W=F?.error||(null===(A=F[0])||void 0===A?void 0:A.error);if(W){j(In,`RPC '${e}' stream ${i} received error:`,W);const Q=W.status;let te=function(T){const S=jt[T];if(void 0!==S)return VB(S)}(Q),C=W.message;void 0===te&&(te=N.INTERNAL,C="Unknown error status: "+Q+" with message "+W.message),g=!0,_.__(new L(te,C)),h.close()}else j(In,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),v(a,ej.STAT_EVENT,w=>{w.stat===Cb.PROXY?j(In,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Cb.NOPROXY&&j(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function x_(){return typeof document<"u"?document:null}function Ea(t){return new jde(t,!0)}class FC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const eH="PersistentStream";class tH{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new FC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return I(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return I(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return I(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Rt(n.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(I(function*(){e.state=0,e.start()}))}G_(e){return j(eH,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(eH,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ohe extends tH{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function Hde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:K(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(J(void 0===d||"string"==typeof d,58123),bt.fromBase64String(d||"")):(J(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:VB(u.code);return new L(d,u.message||"")}(s);n=new jB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=si(t,r.document.name),o=Pt(r.document.updateTime),s=r.document.createTime?Pt(r.document.createTime):ee.min(),a=new sn({mapValue:{fields:r.document.fields}}),c=ot.newFoundDocument(i,o,s,a);n=new f_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=si(t,r.document),o=r.readTime?Pt(r.readTime):ee.min(),s=ot.newNoDocument(i,o);n=new f_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=si(t,r.document);n=new f_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return K(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new kde(i,o);n=new UB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Pt(s.readTime):ee.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=dC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=s_(c)?{documents:QB(o,c)}:{query:m_(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=HB(o,s.resumeToken);const u=cC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Su(o,s.snapshotVersion.toTimestamp());const u=cC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function zde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=dC(this.serializer),n.removeTarget=e,this.k_(n)}}class Vhe extends tH{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function qde(t,e){return t&&t.length>0?(J(void 0!==e,14353),t.map(n=>function(i,o){let s=Pt(i.updateTime?i.updateTime:o);return s.isEqual(ee.min())&&(s=Pt(o)),new Mde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Pt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=dC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Sh(t,e){let n;if(e instanceof bu)n={update:KB(t,e.key,e.value)};else if(e instanceof Cu)n={delete:Ch(t,e.key)};else if(e instanceof ji)n={update:KB(t,e.key,e.data),updateMask:Qde(e.fieldMask)};else{if(!(e instanceof rC))return K(16599,{Rt:e.type});n={verify:Ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof wu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ha)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tu)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Bde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:K(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class Lhe{}class Fhe extends Lhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,lC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,lC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Uhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Rt(n),this._a=!1):j("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const wa="RemoteStore";class jhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(I(function*(){var c;Ho(s)&&(j(wa,"Restarting streams for network reachability change."),yield(c=I(function*(d){const h=z(d);h.Ia.add(4),yield Ou(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield kh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new Uhe(r,i)}}function kh(t){return UC.apply(this,arguments)}function UC(){return(UC=I(function*(t){if(Ho(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Ou(t){return jC.apply(this,arguments)}function jC(){return(jC=I(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function k_(t,e){const n=z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),HC(n)?$C(n):Fu(n).x_()&&BC(n,e))}function Vu(t,e){const n=z(t),r=Fu(n);n.Ta.delete(e),r.x_()&&nH(n,e),0===n.Ta.size&&(r.x_()?r.B_():Ho(n)&&n.Aa.set("Unknown"))}function BC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fu(t).H_(e)}function nH(t,e){t.Ra.$e(e),Fu(t).Y_(e)}function $C(t){t.Ra=new Vde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Fu(t).start(),t.Aa.aa()}function HC(t){return Ho(t)&&!Fu(t).M_()&&t.Ta.size>0}function Ho(t){return 0===z(t).Ia.size}function rH(t){t.Ra=void 0}function Bhe(t){return qC.apply(this,arguments)}function qC(){return(qC=I(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function $he(t){return zC.apply(this,arguments)}function zC(){return(zC=I(function*(t){t.Ta.forEach((e,n)=>{BC(t,e)})})).apply(this,arguments)}function Hhe(t,e){return GC.apply(this,arguments)}function GC(){return(GC=I(function*(t,e){rH(t),HC(t)?(t.Aa.la(e),$C(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function qhe(t,e,n){return WC.apply(this,arguments)}function WC(){return WC=I(function*(t,e,n){if(t.Aa.set("Online"),e instanceof jB&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield O_(t,r)}else if(e instanceof f_?t.Ra.Ye(e):e instanceof UB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{const r=yield j$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),nH(o,c);const h=new Bi(d.target,c,u,d.sequenceNumber);BC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(wa,"Failed to raise snapshot:",r),yield O_(t,r)}var r}),WC.apply(this,arguments)}function O_(t,e,n){return KC.apply(this,arguments)}function KC(){return(KC=I(function*(t,e,n){if(!Mo(e))throw e;t.Ia.add(1),yield Ou(t),t.Aa.set("Offline"),n||(n=()=>j$(t.localStore)),t.asyncQueue.enqueueRetryable(I(function*(){j(wa,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield kh(t)}))})).apply(this,arguments)}function iH(t,e){return e().catch(n=>O_(t,n,e))}function Lu(t){return QC.apply(this,arguments)}function QC(){return(QC=I(function*(t){const e=z(t),n=qo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;zhe(e);)try{const i=yield Ahe(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,Ghe(e,i)}catch(i){yield O_(e,i)}oH(e)&&sH(e)})).apply(this,arguments)}function zhe(t){return Ho(t)&&t.Pa.length<10}function Ghe(t,e){t.Pa.push(e);const n=qo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function oH(t){return Ho(t)&&!qo(t).M_()&&t.Pa.length>0}function sH(t){qo(t).start()}function Whe(t){return YC.apply(this,arguments)}function YC(){return(YC=I(function*(t){qo(t).na()})).apply(this,arguments)}function Khe(t){return JC.apply(this,arguments)}function JC(){return(JC=I(function*(t){const e=qo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function Qhe(t,e,n){return ZC.apply(this,arguments)}function ZC(){return(ZC=I(function*(t,e,n){const r=t.Pa.shift(),i=oC.from(r,e,n);yield iH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lu(t)})).apply(this,arguments)}function Yhe(t,e){return XC.apply(this,arguments)}function XC(){return XC=I(function*(t,e){var n;e&&qo(t).Z_&&(yield(n=I(function*(i,o){if(function OB(t){switch(t){case N.OK:return K(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return K(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();qo(i).N_(),yield iH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Lu(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),oH(t)&&sH(t)}),XC.apply(this,arguments)}function aH(t,e){return eS.apply(this,arguments)}function eS(){return(eS=I(function*(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),j(wa,"RemoteStore received new credentials");const r=Ho(n);n.Ia.add(3),yield Ou(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield kh(n)})).apply(this,arguments)}function tS(t,e){return nS.apply(this,arguments)}function nS(){return(nS=I(function*(t,e){const n=z(t);e?(n.Ia.delete(2),yield kh(n)):e||(n.Ia.add(2),yield Ou(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function Fu(t){return t.Va||(t.Va=function(n,r,i){const o=z(n);return o.ia(),new Ohe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Bhe.bind(null,t),e_:$he.bind(null,t),n_:Hhe.bind(null,t),J_:qhe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.Va.N_(),HC(t)?$C(t):t.Aa.set("Unknown")):(yield t.Va.stop(),rH(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function qo(t){return t.ma||(t.ma=function(n,r,i){const o=z(n);return o.ia(),new Vhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Whe.bind(null,t),n_:Yhe.bind(null,t),ea:Khe.bind(null,t),ta:Qhe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.ma.N_(),yield Lu(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(wa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class rS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new rS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uu(t,e){if(Rt("AsyncQueue",`${e}: ${t}`),Mo(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=yh(),this.sortedSet=new nt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class cH{constructor(){this.fa=new nt(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ba{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ba(e,n,Ta.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Jhe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Zhe{constructor(){this.queries=uH(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=z(n),o=i.queries;i.queries=uH(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new L(N.ABORTED,"Firestore shutting down"))}}function uH(){return new Ui(t=>mB(t),mh)}function iS(t,e){return oS.apply(this,arguments)}function oS(){return(oS=I(function*(t,e){const n=z(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Jhe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Uu(s,`Initialization of query '${Eu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&cS(n)})).apply(this,arguments)}function sS(t,e){return aS.apply(this,arguments)}function aS(){return(aS=I(function*(t,e){const n=z(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Xhe(t,e){const n=z(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&cS(n)}function efe(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function cS(t){t.Da.forEach(e=>{e.next()})}var uS,lH;(lH=uS||(uS={})).Fa="default",lH.Cache="cache";class lS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uS.Cache}}class pH{constructor(e){this.key=e}}class gH{constructor(e){this.key=e}}class mH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=yB(e),this.eu=new Ta(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new cH,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=_h(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),w=!0):this.iu(f,g)||(r.track({type:2,doc:g}),w=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:w})}};return v(g)-v(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new ba(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cH,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new gH(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new pH(r))}),n}uu(e){this.Ha=e.qs,this.Za=ve();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const zo="SyncEngine";class tfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nfe{constructor(e){this.key=e,this.lu=!1}}class rfe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ui(a=>mB(a),mh),this.Tu=new Map,this.Iu=new Set,this.du=new nt(q.comparator),this.Eu=new Map,this.Au=new vC,this.Ru={},this.Vu=new Map,this.mu=va.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function ife(t,e){return hS.apply(this,arguments)}function hS(){return(hS=I(function*(t,e,n=!0){const r=V_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield _H(r,e,n,!0),i})).apply(this,arguments)}function ofe(t,e){return fS.apply(this,arguments)}function fS(){return(fS=I(function*(t,e){const n=V_(t);yield _H(n,e,!0,!1)})).apply(this,arguments)}function _H(t,e,n,r){return pS.apply(this,arguments)}function pS(){return(pS=I(function*(t,e,n,r){const i=yield function xu(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Bi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,yn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function gS(t,e,n,r,i){return mS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&k_(t.remoteStore,i),a})).apply(this,arguments)}function mS(){return mS=I(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=I(function*(w,A,D,F){let W=A.view.nu(D);W.Ds&&(W=yield R_(w.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,W)));const Q=F&&F.targetChanges.get(A.targetId),te=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges(W,w.isPrimaryClient,Q,te);return AS(w,A.targetId,C._u),C.snapshot}),function v(w,A,D,F){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield R_(t.localStore,e,!0),s=new mH(e,o.qs),a=s.nu(o.documents),c=bh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);AS(t,n,u._u);const d=new tfe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),mS.apply(this,arguments)}function sfe(t,e,n){return _S.apply(this,arguments)}function _S(){return(_S=I(function*(t,e,n){const r=z(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!mh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ku(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Vu(r.remoteStore,i.targetId),ju(r,i.targetId)}).catch(Po))):(ju(r,i.targetId),yield ku(r.localStore,i.targetId,!0))})).apply(this,arguments)}function afe(t,e){return yS.apply(this,arguments)}function yS(){return(yS=I(function*(t,e){const n=z(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vu(n.remoteStore,r.targetId))})).apply(this,arguments)}function vS(){return(vS=I(function*(t,e,n){const r=function FS(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dfe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=z(s),u=$e.now(),d=a.reduce((g,_)=>g.add(_.key),ve());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Qn(),v=ve();return c.Os.getEntries(g,d).next(w=>{_=w,_.forEach((A,D)=>{D.isValidDocument()||(v=v.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(w=>{h=w;const A=[];for(const D of a){const F=xde(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new ji(D.key,F,eB(F.value.mapValue),ft.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(w=>{f=w;const A=w.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,w.batchId,A)})}).then(()=>({batchId:f.batchId,changes:IB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new nt(oe)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield $i(r,i.changes),yield Lu(r.remoteStore)}catch(i){const o=Uu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function yH(t,e){return IS.apply(this,arguments)}function IS(){return(IS=I(function*(t,e){const n=z(t);try{const r=yield function She(t,e){const n=z(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var v,w,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(bt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),w=g,A=d,(0===(v=f).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=Qn(),u=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function B$(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Qn();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(AC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ee.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?J(s.lu,14607):i.removedDocuments.size>0&&(J(s.lu,42227),s.lu=!1))}),yield $i(n,r,e)}catch(r){yield Po(r)}})).apply(this,arguments)}function vH(t,e,n){const r=z(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=z(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&cS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ufe(t,e,n){return ES.apply(this,arguments)}function ES(){return(ES=I(function*(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new nt(q.comparator);s=s.insert(o,ot.newNoDocument(o,ee.min()));const a=ve().add(o),c=new Th(ee.min(),new Map,new nt(oe),s,a);yield yH(r,c),r.du=r.du.remove(o),r.Eu.delete(e),DS(r)}else yield ku(r.localStore,e,!1).then(()=>ju(r,e,n)).catch(Po)})).apply(this,arguments)}function lfe(t,e){return wS.apply(this,arguments)}function wS(){return(wS=I(function*(t,e){const n=z(t),r=e.batch.batchId;try{const i=yield function Che(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=M.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const w=u.docVersions.get(_);J(null!==w,48541),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);SS(n,r,null),CS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $i(n,i)}catch(i){yield Po(i)}})).apply(this,arguments)}function dfe(t,e,n){return TS.apply(this,arguments)}function TS(){return(TS=I(function*(t,e,n){const r=z(t);try{const i=yield function(s,a){const c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(J(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);SS(r,e,n),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $i(r,i)}catch(i){yield Po(i)}})).apply(this,arguments)}function CS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function SS(t,e,n){const r=z(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ju(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||IH(t,r)})}function IH(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(Vu(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),DS(t))}function AS(t,e,n){for(const r of n)r instanceof pH?(t.Au.addReference(r.key,e),ffe(t,r)):r instanceof gH?(j(zo,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||IH(t,r.key)):K(19791,{yu:r})}function ffe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(zo,"New document in limbo: "+n),t.Iu.add(r),DS(t))}function DS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(we.fromString(e)),r=t.mu.next();t.Eu.set(r,new nfe(n)),t.du=t.du.insert(n,r),k_(t.remoteStore,new Bi(yn(vu(n.path)),r,"TargetPurposeLimboResolution",sr.ue))}}function $i(t,e,n){return RS.apply(this,arguments)}function RS(){return RS=I(function*(t,e,n){const r=z(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=SC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=I(function*(u,d){const h=z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(d,g=>M.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>M.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Mo(f))throw f;j(AC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),w=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,w)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),RS.apply(this,arguments)}function pfe(t,e){return PS.apply(this,arguments)}function PS(){return(PS=I(function*(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){j(zo,"User change. New user:",e.toKey());const r=yield U$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $i(n,r.Bs)}var o})).apply(this,arguments)}function gfe(t,e){const n=z(t),r=n.Eu.get(e);if(r&&r.lu)return ve().add(r.key);{let i=ve();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function V_(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ufe.bind(null,e),e.hu.J_=Xhe.bind(null,e.eventManager),e.hu.pu=efe.bind(null,e.eventManager),e}let L_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return I(function*(){r.serializer=Ea(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function F$(t,e,n,r){return new bhe(t,e,n,r)}(this.persistence,new L$,n.initialUser,this.serializer)}Du(n){return new IC(S_.Vi,this.serializer)}bu(n){return new Y$}terminate(){var n=this;return I(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class US extends L_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return J(this.persistence.referenceDelegate instanceof A_,46915),new A$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new IC(r=>A_.Vi(r,n),this.serializer)}}let Bu=(()=>{class t{initialize(n,r){var i=this;return I(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>vH(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=pfe.bind(null,i.syncEngine),yield tS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Zhe}createDatastore(n){const r=Ea(n.databaseInfo.databaseId),i=new khe(n.databaseInfo);return new Fhe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>vH(this.syncEngine,r,0),c=Z$.C()?new Z$:new Phe,new jhe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new rfe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const c=z(a);j(wa,"RemoteStore shutting down."),c.Ia.add(5),yield Ou(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class F_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Go="FirestoreClient";class Dfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=Rb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(c){j(Go,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j(Go,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Uu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function BS(t,e){return $S.apply(this,arguments)}function $S(){return $S=I(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j(Go,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield U$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{xn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),$S.apply(this,arguments)}function CH(t,e){return HS.apply(this,arguments)}function HS(){return(HS=I(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function qS(t){return zS.apply(this,arguments)}(t);j(Go,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>aH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function zS(){return(zS=I(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Go,"Using user provided OfflineComponentProvider");try{yield BS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;xn("Error using user provided cache. Falling back to memory cache: "+e),yield BS(t,new L_)}}else j(Go,"Using default OfflineComponentProvider"),yield BS(t,new US(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function U_(t){return GS.apply(this,arguments)}function GS(){return(GS=I(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Go,"Using user provided OnlineComponentProvider"),yield CH(t,t._uninitializedComponentsProvider._online)):(j(Go,"Using default OnlineComponentProvider"),yield CH(t,new Bu))),t._onlineComponents})).apply(this,arguments)}function Hu(t){return KS.apply(this,arguments)}function KS(){return(KS=I(function*(t){const e=yield U_(t),n=e.eventManager;return n.onListen=ife.bind(null,e.syncEngine),n.onUnlisten=sfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ofe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=afe.bind(null,e.syncEngine),n})).apply(this,arguments)}function NH(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const xH=new Map,kH="firestore.googleapis.com";class VH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kH,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Nle(t,e,n,r){if(!0===e&&!0===r)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=NH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VH(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Tle;switch(r.type){case"firstParty":return new Ale(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xH.get(n);r&&(j("ComponentProvider","Removing Datastore"),xH.delete(n),r.terminate())}(this),Promise.resolve()}}class Zt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zt(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(na(n,Qe._jsonSchema))return new Qe(e,r||null,new q(we.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:Ut("string",Qe._jsonSchemaVersion),referencePath:Ut("string")};class ci extends Zt{constructor(e,n,r){super(e,n,vu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new q(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function LH(t,e,...n){if(t=Ft(t),Nb("collection","path",e),t instanceof Oh){const r=we.fromString(e,...n);return dj(r),new ci(t,null,r)}{if(!(t instanceof Qe||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return dj(r),new ci(t.firestore,null,r)}}function QS(t,e,...n){if(t=Ft(t),1===arguments.length&&(e=Rb.newId()),Nb("doc","path",e),t instanceof Oh){const r=we.fromString(e,...n);return lj(r),new Qe(t,null,new q(r))}{if(!(t instanceof Qe||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return lj(r),new Qe(t.firestore,t instanceof ci?t.converter:null,new q(r))}}const UH="AsyncQueue";class jH{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new FC(this,"async_queue_retry"),this.oc=()=>{const r=x_();r&&j(UH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=x_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=x_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Yt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return I(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!Mo(n))throw n;j(UH,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Rt("INTERNAL UNHANDLED ERROR: ",BH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=rS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:BH(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return I(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function BH(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Ze extends Oh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new jH(n),e._firestoreClient=void 0,yield n}})()}}function $fe(t,e){const n="object"==typeof t?t:HU(),r="string"==typeof t?t:e||lh,i=jm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=IU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function jfe(t,e,n,r={}){var i;t=Te(t,Oh);const o=tu(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(bU(`https://${c}`),SU("Firestore",!0)),s.host!==kH&&s.host!==c&&xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Ni(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Qt.MOCK_USER;else{d=function kce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Om(JSON.stringify({alg:"none",type:"JWT"})),Om(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(f)}t._authCredentials=new ble(new aj(d,h))}}(i,...o)}return i}function mt(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function $H(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new hde(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NH(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Dfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(bt.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(na(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:Ut("string",ar._jsonSchemaVersion),bytes:Ut("string")};class Ca{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sa{constructor(e){this._methodName=e}}class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(na(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:Ut("string",ui._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(na(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new kr(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:Ut("string",kr._jsonSchemaVersion),vectorValues:Ut("object")};const zfe=/^__.*__$/;class Gfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}class zH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}class j_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new j_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return H_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(GH(this.Ec)&&zfe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Wfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ea(e)}Dc(e,n,r,i=!1){return new j_({Ec:e,methodName:n,bc:r,path:dt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aa(t){const e=t._freezeSettings(),n=Ea(t._databaseId);return new Wfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function B_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);rA("Data must be an object, but it was:",s,r);const a=QH(r,s);let c,u;if(o.merge)c=new Kn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=Fh(e,h,n);if(!s.contains(f))throw new L(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);JH(d,f)||d.push(f)}c=new Kn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new Gfe(new sn(a),c,u)}class Lh extends Sa{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}class JS extends Sa{_toFieldTransform(e){return new Ih(e.path,new wu)}isEqual(e){return e instanceof JS}}function Da(t,e){if(YH(t=Ft(t)))return rA("Unsupported field value:",e,t),QH(t,e);if(t instanceof Sa)return function(r,i){if(!GH(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Da(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Ft(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return TB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=$e.fromDate(r);return{timestampValue:Su(i.serializer,o)}}if(r instanceof $e){const o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Su(i.serializer,o)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:HB(i.serializer,r._byteString)};if(r instanceof Qe){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kr)return s=r,a=i,{mapValue:{fields:{[zb]:{stringValue:Gb},[mu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return nC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${Hm(r)}`)}(t,e)}function QH(t,e){const n={};return Fj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(r,i)=>{const o=Da(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function YH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof ui||t instanceof ar||t instanceof Qe||t instanceof Sa||t instanceof kr)}function rA(t,e,n){if(!YH(n)||!hj(n)){const r=Hm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function Fh(t,e,n){if((e=Ft(e))instanceof Ca)return e._internalPath;if("string"==typeof e)return $_(t,e);throw H_("Field path arguments must be of type string or ",t,!1,void 0,n)}const Kfe=new RegExp("[~\\*/\\[\\]]");function $_(t,e,n){if(e.search(Kfe)>=0)throw H_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ca(...e.split("."))._internalPath}catch{throw H_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function H_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+t+c)}function JH(t,e){return t.some(n=>n.isEqual(e))}class Uh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Qfe extends Uh{data(){return super.data()}}function q_(t,e){return"string"==typeof e?$_(t,e):e instanceof Ca?e._internalPath:e._delegate._internalPath}class iA{}class jh extends iA{}class Bh extends jh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bh(e,n,r)}_apply(e){const n=this._parse(e);return n4(e._query,n),new Zt(e.firestore,e.converter,eC(e._query,n))}_parse(e){const n=Aa(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){t4(h,d);const _=[];for(const v of h)_.push(e4(c,o,v));f={arrayValue:{values:_}}}else f=e4(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||t4(h,d),f=function KH(t,e,n,r=!1){return Da(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Se.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class zu extends iA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:qe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)n4(s,c),s=eC(s,c)}(e._query,n),new Zt(e.firestore,e.converter,eC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oA extends jh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new oA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(o,s)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Fi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function e4(t,e,n){if("string"==typeof(n=Ft(n))){if(""===n)throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xb(e)&&-1!==n.indexOf("/"))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return la(t,new q(r))}if(n instanceof Qe)return la(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(n)}.`)}function t4(t,e){if(!Array.isArray(t)||0===t.length)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new L(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i4{convertValue(e,n="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[mu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>ht(s.doubleValue));return new kr(o)}convertGeoPoint(e){return new ui(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=t_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const n=Vi(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);J(e$(r),9688,{name:e});const i=new ua(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Rt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cr extends Uh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Q_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=cr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",cr._jsonSchema={type:Ut("string",cr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Q_ extends cr{data(e={}){return super.data(e)}}class ur{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Q_(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Q_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new Q_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Xfe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ur._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rb.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function Xfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}ur._jsonSchemaVersion="firestore/querySnapshot/1.0",ur._jsonSchema={type:Ut("string",ur._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ko extends i4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function rpe(t,e){const n=Te(t.firestore,Ze),r=QS(t),i=function K_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return $h(n,[B_(Aa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function $h(t,e){return function(r,i){const o=new Yt;return r.asyncQueue.enqueueAndForget(I(function*(){return function cfe(t,e,n){return vS.apply(this,arguments)}(yield function WS(t){return U_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(mt(t),e)}function a4(){return new JS("serverTimestamp")}!function(e,n=!0){iu=ru,nu(new Zs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ze(new Cle(r.getProvider("auth-internal")),new Dle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ki(ij,"4.8.0",e),ki(ij,"4.8.0","esm2017")}();const vpe=function d4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},h4=new Wd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),J_=new fb("@firebase/auth");function Z_(t,...e){J_.logLevel<=Ce.ERROR&&J_.error(`Auth (${ru}): ${t}`,...e)}function Yn(t,...e){throw lA(t,...e)}function kn(t,...e){return lA(t,...e)}function uA(t,e,n){const r=Object.assign(Object.assign({},vpe()),{[e]:n});return new Wd("auth","Firebase",r).create(e,{appName:t.name})}function Xt(t){return uA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return h4.create(t,...e)}function $(t,e,...n){if(!t)throw lA(e,...n)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Z_(e),new Error(e)}function Hi(t,e){t||li(e)}function zh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function f4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Epe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function dA(){return"http:"===f4()||"https:"===f4()}()||function jce(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=function Lce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}()||function Bce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Epe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hA(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class p4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},bpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cpe=new Gh(3e4,6e4);function st(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function at(t,e,n,r){return fA.apply(this,arguments)}function fA(){return(fA=I(function*(t,e,n,r,i={}){return g4(t,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Kd(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function Uce(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&tu(t.emulatorConfig.host)&&(u.credentials="include"),p4.fetch()(yield m4(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function g4(t,e,n){return pA.apply(this,arguments)}function pA(){return(pA=I(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tpe),e);try{const i=new Ape(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Wh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Wh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Wh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Wh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uA(t,d,u);Yn(t,d)}}catch(i){if(i instanceof Mi)throw i;Yn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function qi(t,e,n,r){return gA.apply(this,arguments)}function gA(){return(gA=I(function*(t,e,n,r,i={}){const o=yield at(t,e,n,r,i);return"mfaPendingCredential"in o&&Yn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function m4(t,e,n,r){return mA.apply(this,arguments)}function mA(){return(mA=I(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?hA(t.config,i):`${t.config.apiScheme}://${i}`;return bpe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class Ape{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),Cpe.get())})}}function Wh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kn(t,e,r);return i.customData._tokenResponse=n,i}function vA(){return(vA=I(function*(t,e){return at(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function X_(t,e){return EA.apply(this,arguments)}function EA(){return(EA=I(function*(t,e){return at(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Kh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wA(){return(wA=I(function*(t,e=!1){const n=Ft(t),r=yield n.getIdToken(e),i=ey(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Kh(TA(i.auth_time)),issuedAtTime:Kh(TA(i.iat)),expirationTime:Kh(TA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function TA(t){return 1e3*Number(t)}function ey(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Z_("JWT malformed, contained fewer than 3 sections"),null;try{const i=zd(n);return i?JSON.parse(i):(Z_("Failed to decode base64 JWT payload"),null)}catch(i){return Z_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function E4(t){const e=ey(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zi(t,e){return bA.apply(this,arguments)}function bA(){return(bA=I(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Mi&&function Npe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class xpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield n.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class CA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kh(this.lastLoginAt),this.creationTime=Kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qh(t){return SA.apply(this,arguments)}function SA(){return(SA=I(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield zi(t,X_(n,{idToken:r}));$(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?w4(o.providerUserInfo):[],a=function Ope(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new CA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function AA(){return(AA=I(function*(t){const e=Ft(t);yield Qh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function w4(t){return t.map(e=>{var{providerId:n}=e,r=dm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function DA(){return(DA=I(function*(t,e){const n=yield g4(t,{},I(function*(){const r=Kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield m4(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&tu(t.emulatorConfig.host)&&(c.credentials="include"),p4.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function RA(){return(RA=I(function*(t,e){return at(t,"POST","/v2/accounts:revokeToken",st(t,e))})).apply(this,arguments)}class Wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(0!==e.length,"internal-error");const n=E4(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return I(function*(r,i=!1){return i||!n.accessToken||n.isExpired?($(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Vpe(t,e){return DA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Wu;return r&&($("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&($("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&($("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wu,this.toJSON())}_performRefresh(){return li("not implemented")}}function Yo(t,e){$("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=dm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new CA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return I(function*(){const r=yield zi(n,n.stsTokenManager.getToken(n.auth,e));return $(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Mpe(t){return wA.apply(this,arguments)}(this,e)}reload(){return function kpe(t){return AA.apply(this,arguments)}(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Qh(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(Nr(e.auth.app))return Promise.reject(Xt(e.auth));const n=yield e.getIdToken();return yield zi(e,function Rpe(t,e){return vA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,w=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:W,isAnonymous:Q,providerData:te,stsTokenManager:C}=n;$(F&&C,e,"internal-error");const E=Wu.fromJSON(this.name,C);$("string"==typeof F,e,"internal-error"),Yo(h,e.name),Yo(f,e.name),$("boolean"==typeof W,e,"internal-error"),$("boolean"==typeof Q,e,"internal-error"),Yo(g,e.name),Yo(_,e.name),Yo(v,e.name),Yo(w,e.name),Yo(A,e.name),Yo(D,e.name);const T=new Or({uid:F,auth:e,email:f,emailVerified:W,displayName:h,isAnonymous:Q,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:A,lastLoginAt:D});return te&&Array.isArray(te)&&(T.providerData=te.map(S=>Object.assign({},S))),w&&(T._redirectEventId=w),T}static _fromIdTokenResponse(e,n){return I(function*(r,i,o=!1){const s=new Wu;s.updateFromServerResponse(i);const a=new Or({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Qh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return I(function*(){const i=n.users[0];$(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?w4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Wu;a.updateFromIdToken(r);const c=new Or({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new CA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const T4=new Map;function Gi(t){Hi(t instanceof Function,"Expected a class definition");let e=T4.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T4.set(t,e),e)}const b4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(n,r){var i=this;return I(function*(){i.storage[n]=r})()}_get(n){var r=this;return I(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return I(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ty(t,e,n){return`firebase:${t}:${e}:${n}`}class Ku{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ty(this.userKey,i.apiKey,o),this.fullPersistenceKey=ty("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield X_(e.auth,{idToken:n}).catch(()=>{});return r?Or._fromGetAccountInfoResponse(e.auth,r,n):null}return Or._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return I(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return I(function*(r,i,o="authUser"){if(!i.length)return new Ku(Gi(b4),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Gi(b4);const c=ty(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield X_(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield Or._fromGetAccountInfoResponse(r,_,f)}else g=Or._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new Ku(a,r,o)):new Ku(a,r,o)}).apply(this,arguments)}}function C4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(S4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M4(e))return"Blackberry";if(N4(e))return"Webos";if(A4(e))return"Safari";if((e.includes("chrome/")||D4(e))&&!e.includes("edge/"))return"Chrome";if(P4(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function S4(t=Dt()){return/firefox\//i.test(t)}function A4(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D4(t=Dt()){return/crios\//i.test(t)}function R4(t=Dt()){return/iemobile/i.test(t)}function P4(t=Dt()){return/android/i.test(t)}function M4(t=Dt()){return/blackberry/i.test(t)}function N4(t=Dt()){return/webos/i.test(t)}function PA(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function x4(t=Dt()){return PA(t)||P4(t)||N4(t)||M4(t)||/windows phone/i.test(t)||R4(t)}function k4(t,e=[]){let n;switch(t){case"Browser":n=C4(Dt());break;case"Worker":n=`${C4(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ru}/${r}`}class jpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return I(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function MA(){return(MA=I(function*(t,e={}){return at(t,"GET","/v2/passwordPolicy",st(t,e))})).apply(this,arguments)}class Hpe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class qpe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O4(this),this.idTokenSubscription=new O4(this),this.beforeStateQueue=new jpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(I(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield Ku.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return I(function*(){try{const r=yield X_(n,{idToken:e}),i=yield Or._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return I(function*(){var r;if(Nr(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return $(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return I(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return I(function*(){try{yield Qh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function wpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return I(function*(){if(Nr(n.app))return Promise.reject(Xt(n));const r=e?Ft(e):null;return r&&$(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return I(function*(r,i=!1){if(!n._deleted)return r&&$(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(I(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return Nr(e.app)?Promise.reject(Xt(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Nr(this.app)?Promise.reject(Xt(this)):this.queue(I(function*(){yield n.assertedPersistence.setPersistence(Gi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return I(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const n=yield function Bpe(t){return MA.apply(this,arguments)}(e),r=new Hpe(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return I(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Lpe(t,e){return RA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return I(function*(){if(!n.redirectPersistenceManager){const r=e&&Gi(e)||n._popupRedirectResolver;$(r,n,"argument-error"),n.redirectPersistenceManager=yield Ku.create(n,[Gi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return I(function*(){var r,i;return n._isInitialized&&(yield n.queue(I(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return I(function*(){if(e===n.currentUser)return n.queue(I(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return I(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var n;if(Nr(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Ipe(t,...e){J_.logLevel<=Ce.WARN&&J_.warn(`Auth (${ru}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Mt(t){return Ft(t)}class O4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Kce(t,e){const n=new Qce(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yh={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V4(t){return`__${t}${Math.floor(1e6*Math.random())}`}function U4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Xh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,n){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}function Wi(t,e){return QA.apply(this,arguments)}function QA(){return(QA=I(function*(t,e){return qi(t,"POST","/v1/accounts:signInWithIdp",st(t,e))})).apply(this,arguments)}class Qu extends Xh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=dm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Qu(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Wi(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wi(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kd(n)}return e}}class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class q4 extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Cge=(()=>{class t extends q4{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Qu._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return I(function*(i,o,s,a=!1){const c=yield Or._fromIdTokenResponse(i,s,a),u=G4(s);return new Er({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=G4(r);return new Er({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function G4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class sy extends Mi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sy.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sy(e,n,r,i)}}function W4(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?sy._fromErrorAndOperation(t,o,e,r):o})}function iD(t,e){return oD.apply(this,arguments)}function oD(){return(oD=I(function*(t,e,n=!1){const r=yield zi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Er._forOperation(t,"link",r)})).apply(this,arguments)}function Q4(t,e){return aD.apply(this,arguments)}function aD(){return(aD=I(function*(t,e,n=!1){const{auth:r}=t;if(Nr(r.app))return Promise.reject(Xt(r));const i="reauthenticate";try{const o=yield zi(t,W4(r,i,e,t),n);$(o.idToken,r,"internal-error");const s=ey(o.idToken);$(s,r,"internal-error");const{sub:a}=s;return $(t.uid===a,r,"user-mismatch"),Er._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Yn(r,"user-mismatch"),o}})).apply(this,arguments)}function Y4(t,e){return cD.apply(this,arguments)}function cD(){return(cD=I(function*(t,e,n=!1){if(Nr(t.app))return Promise.reject(Xt(t));const r="signIn",i=yield W4(t,r,e),o=yield Er._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const uy="__sak";class eq{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uy,"1"),this.storage.removeItem(uy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kge=(()=>{class t extends eq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Upe(){return function $ce(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),tq=(()=>{class t extends eq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Yge=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return I(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=I(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function Qge(t){return Promise.all(t.map(function(){var e=I(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function ly(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Jge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=ly("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(v.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Bt(){return window}function UD(){return typeof Bt().WorkerGlobalScope<"u"&&"function"==typeof Bt().importScripts}function jD(){return(jD=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const nq="firebaseLocalStorageDb",dy="firebaseLocalStorage",rq="fbase_key";class rf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hy(t,e){return t.transaction([dy],e?"readwrite":"readonly").objectStore(dy)}function BD(){const t=indexedDB.open(nq,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dy,{keyPath:rq})}catch(i){n(i)}}),t.addEventListener("success",I(function*(){const r=t.result;r.objectStoreNames.contains(dy)?e(r):(r.close(),yield function rme(){const t=indexedDB.deleteDatabase(nq);return new rf(t).toPromise()}(),e(yield BD()))}))})}function iq(t,e,n){return $D.apply(this,arguments)}function $D(){return($D=I(function*(t,e,n){const r=hy(t,!0).put({[rq]:e,value:n});return new rf(r).toPromise()})).apply(this,arguments)}function HD(){return(HD=I(function*(t,e){const n=hy(t,!1).get(e),r=yield new rf(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function oq(t,e){const n=hy(t,!0).delete(e);return new rf(n).toPromise()}const ame=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return I(function*(){return n.db||(n.db=yield BD()),n.db})()}_withRetries(n){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return I(function*(){return UD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return I(function*(){n.receiver=Yge._getInstance(function tme(){return UD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return I(function*(){var r,i;if(n.activeServiceWorker=yield function Xge(){return jD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Jge(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function eme(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const n=yield BD();return yield iq(n,uy,"1"),yield oq(n,uy),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return I(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>iq(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return I(function*(){const i=yield r._withRetries(o=>function ime(t,e){return HD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>oq(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return I(function*(){const r=yield n._withRetries(s=>{const a=hy(s,!1).getAll();return new rf(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Pa(t,e){return e?Gi(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}V4("rcb"),new Gh(3e4,6e4);class eR extends Xh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mme(t){return Y4(t.auth,new eR(t),t.bypassAuthState)}function _me(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),Q4(n,new eR(t),t.bypassAuthState)}function yme(t){return tR.apply(this,arguments)}function tR(){return(tR=I(function*(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),iD(n,new eR(t),t.bypassAuthState)})).apply(this,arguments)}class aq{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mme;case"linkViaPopup":case"linkViaRedirect":return yme;case"reauthViaPopup":case"reauthViaRedirect":return _me;default:Yn(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vme=new Gh(2e3,1e4);function nR(){return(nR=I(function*(t,e,n){if(Nr(t.app))return Promise.reject(kn(t,"operation-not-supported-in-this-environment"));const r=Mt(t);!function Gu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Yn(t,"argument-error"),uA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Ki);const i=Pa(r,n);return new oR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let oR=(()=>{class t extends aq{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return I(function*(){const r=yield n.execute();return $(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return I(function*(){Hi(1===n.filter.length,"Popup operations only handle one event");const r=ly();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(kn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,vme.get())};n()}}return t.currentPopupAction=null,t})();const sf=new Map;class wme extends aq{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return I(function*(){let r=sf.get(n.auth._key());if(!r){try{const o=(yield function Tme(t,e){return sR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}sf.set(n.auth._key(),r)}return n.bypassAuthState||sf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function sR(){return(sR=I(function*(t,e){const n=function uq(t){return ty("pendingRedirect",t.config.apiKey,t.name)}(e),r=function cq(t){return Gi(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function bme(t,e){sf.set(t._key(),e)}function lq(t,e){return fR.apply(this,arguments)}function fR(){return(fR=I(function*(t,e,n=!1){if(Nr(t.app))return Promise.reject(Xt(t));const r=Mt(t),i=Pa(r,e),s=yield new wme(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Rme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Pme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fq(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fq(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hq(e))}saveEventToCache(e){this.cachedEventUids.add(hq(e)),this.lastProcessedEventTime=Date.now()}}function hq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fq({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function gR(){return(gR=I(function*(t,e={}){return at(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Nme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xme=/^https?/;function mR(){return mR=I(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function Mme(t){return gR.apply(this,arguments)}(t);for(const n of e)try{if(Ome(n))return}catch{}Yn(t,"unauthorized-domain")}),mR.apply(this,arguments)}function Ome(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!xme.test(n))return!1;if(Nme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Vme=new Gh(3e4,6e4);function pq(){const t=Bt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Lme(t){return new Promise((e,n)=>{var r,i,o;function s(){pq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pq(),n(kn(t,"network-request-failed"))},timeout:Vme.get()})}if(null!==(i=null===(r=Bt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Bt().gapi)||void 0===o||!o.load){const a=V4("iframefcb");return Bt()[a]=()=>{gapi.load?s():n(kn(t,"network-request-failed"))},function NA(t){return Yh.loadJS(t)}(`${function Kpe(){return Yh.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw fy=null,e})}let fy=null;const Ume=new Gh(5e3,15e3),$me={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qme(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:ru},i=Hme.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Kd(r).slice(1)}`}function _R(){return _R=I(function*(t){const e=yield function Fme(t){return fy=fy||Lme(t),fy}(t),n=Bt().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:qme(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$me,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=kn(t,"network-request-failed"),c=Bt().setTimeout(()=>{s(a)},Ume.get());function u(){Bt().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),_R.apply(this,arguments)}const Gme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const t_e=encodeURIComponent("fac");function mq(t,e,n,r,i,o){return yR.apply(this,arguments)}function yR(){return(yR=I(function*(t,e,n,r,i,o){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ru,eventId:i};if(e instanceof Ki){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function Wce(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof q4){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${t_e}=${encodeURIComponent(c)}`:"";return`${function n_e({config:t}){return t.emulator?hA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Kd(a).slice(1)}${u}`})).apply(this,arguments)}const vR="webStorageSupport",i_e=class r_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tq,this._completeRedirectFn=lq,this._overrideRedirectResult=bme}_openPopup(e,n,r,i){var o=this;return I(function*(){var s;Hi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield mq(e,n,r,zh(),i);return function Jme(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Gme),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Dt().toLowerCase();n&&(a=D4(u)?"_blank":n),S4(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Fpe(t=Dt()){var e;return PA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function Zme(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new gq(null);const h=window.open(e||"",a,d);$(h,t,"popup-blocked");try{h.focus()}catch{}return new gq(h)}(e,a,ly())})()}_openRedirect(e,n,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function Zge(t){Bt().location.href=t}(yield mq(e,n,r,zh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Hi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return I(function*(){const r=yield function zme(t){return _R.apply(this,arguments)}(e),i=new Rme(e);return r.register("authEvent",o=>($(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vR,{type:vR},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[vR];void 0!==s&&n(!!s),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function kme(t){return mR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x4()||A4()||PA()}};var Iq="@firebase/auth";class o_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return I(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const c_e=wU("authIdTokenMaxAge")||300;let wq=null;const u_e=t=>function(){var e=I(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>c_e)return;const o=r?.token;wq!==o&&(wq=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function l_e(t=HU()){const e=jm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function rge(t,e){const n=jm(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Ni(n.getOptions(),e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:i_e,persistence:[ame,Kge,tq]}),r=wU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=u_e(o.toString());(function jge(t,e,n){Ft(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Uge(t,e,n,r){Ft(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=IU("auth");return i&&function oge(t,e,n){const r=Mt(t);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=U4(e),{host:s,port:a}=function sge(t){const e=U4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:j4(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:j4(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $(Ni(u,r.config.emulator)&&Ni(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,tu(s)?(bU(`${o}//${s}${c}`),SU("Auth",!0)):i||function age(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function zpe(t){Yh=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=kn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function d_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function a_e(t){nu(new Zs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k4(t)},u=new qpe(r,i,o,c);return function ige(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nu(new Zs("auth-internal",e=>{const n=Mt(e.getProvider("auth").getImmediate());return new o_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(Iq,"1.10.8",function s_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),ki(Iq,"1.10.8","esm2017")}("Browser");const Tq_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Ju=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new Cge,this.user=gt(null),this.canWrite=gt(!1),this.authLoading=gt(!0),this.ensureFirebaseConfig();const i=$U(Tq_firebase);this.db=$fe(i),this.auth=l_e(i),function Bge(t,e,n,r){Ft(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=I(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return I(function*(){yield function Ime(t,e,n){return nR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return I(function*(){yield function $ge(t){return Ft(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return I(function*(){r.ensureSignedIn();const o=function Yfe(t,e,...n){let r=[];e instanceof iA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof zu).length,a=o.filter(c=>c instanceof Bh).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(LH(r.db,"recipes"),function Jfe(t,e="asc"){const n=e,r=q_("orderBy",t);return oA._create(r,n)}("updated_at","desc"));return(yield function epe(t){t=Te(t,Zt);const e=Te(t.firestore,Ze),n=mt(e),r=new Ko(e);return function ZH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function PH(t,e,n={}){const r=new Yt;return t.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,c,u){const d=new F_({next:f=>{d.Ou(),s.enqueueAndForget(()=>sS(o,h)),f.fromCache&&"server"===c.source?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new lS(a,d,{includeMetadataChanges:!0,ka:!0});return iS(o,h)}(yield Hu(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new ur(e,r,t,i))}(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at;return"string"!=typeof u?null:{id:a.id,raw_text:u,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield rpe(LH(i.db,"recipes"),{raw_text:o,updated_at:a4(),updated_by:i.user()?.email??""})).id,raw_text:o,updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return I(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield function tpe(t,e,n,...r){t=Te(t,Qe);const i=Te(t.firestore,Ze),o=Aa(i);let s;return s="string"==typeof(e=Ft(e))||e instanceof Ca?function nA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[Fh(e,r,n)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(Fh(e,o[f])),c.push(o[f+1]);const u=[],d=sn.empty();for(let f=a.length-1;f>=0;--f)if(!JH(u,a[f])){const g=a[f];let _=c[f];_=Ft(_);const v=s.gc(g);if(_ instanceof Lh)u.push(g);else{const w=Da(_,v);null!=w&&(u.push(g),d.set(g,w))}}const h=new Kn(u);return new zH(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function tA(t,e,n,r){const i=t.Dc(1,e,n);rA("Data must be an object, but it was:",i,r);const o=[],s=sn.empty();xo(r,(c,u)=>{const d=$_(e,c,n);u=Ft(u);const h=i.gc(d);if(u instanceof Lh)o.push(d);else{const f=Da(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new Kn(o);return new zH(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),$h(i,[s.toMutation(t._key,ft.exists(!0))])}(QS(o.db,"recipes",r),{raw_text:s,updated_at:a4(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}deleteRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();try{yield function npe(t){return $h(Te(t.firestore,Ze),[new Cu(t._key,ft.none())])}(QS(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(Tq_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const h_e=["postup","kroky","p\u0159\xedprava"],bq=/^[\-\u2013\u2022*]\s*/,f_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,p_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,g_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function gy(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function m_e(t){const e=Cq(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=Cq(e),o=function __e(t){return t.findIndex(e=>h_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:y_e(s,n),steps:C_e(a),warnings:n}}function Cq(t){return t.findIndex(e=>e.length>0)}function y_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(Sq(o))i&&r.push(i),i={title:I_e(o),items:[]};else if(v_e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=E_e(o);void 0===s.amount&&b_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function v_e(t){return!Sq(t)}function Sq(t){return/:$/.test(t.trim())}function I_e(t){return t.replace(/:$/,"").trim()}function E_e(t){const e=t.replace(bq,"").trim(),n=[],r=e.match(/\(([^)]+)\)\s*$/);r&&void 0!==r.index&&n.push({start:r.index,value:r[1].trim()});const i=e.match(/\s-\s*(.+)$/);if(void 0!==i?.index){const f=i[1].trim();f&&n.push({start:i.index,value:f})}const o=function w_e(t){for(let e=0;e<t.length;e+=1){if(","!==t[e])continue;const r=e+1<t.length?t[e+1]:"";if(!/\d/.test(e>0?t[e-1]:"")||!/\d/.test(r))return e}return-1}(e);if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function T_e(t){let e=t.trim();const r=e.match(f_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(p_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function b_e(t){const e=t.toLowerCase();return g_e.some(n=>e.startsWith(n))}function C_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(bq,"").trim()).filter(Boolean)}let Ma=(()=>{var t;class e{constructor(){this.api=O(Ju),this.recipes=gt([]),this.selectedRecipeId=gt(null),this.rawText=gt(""),this.searchQuery=gt(""),this.loading=gt(!1),this.saving=gt(!1),this.deleting=gt(!1),this.error=gt(""),this.parsed=Tt(()=>gy(this.rawText())),this.selectedRecipe=Tt(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=Tt(()=>{const r=this.selectedRecipe();return r?gy(r.raw_text):null}),this.searchResults=Tt(()=>{const r=this.searchQuery().trim().toLowerCase();return r?this.recipes().filter(i=>gy(i.raw_text).title.toLowerCase().includes(r)||i.raw_text.toLowerCase().includes(r)):[]})}refresh(){var r=this;return I(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return I(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();return i?yield r.api.updateRecipe(i,r.rawText()):yield r.api.createRecipe(r.rawText()),yield r.refresh(),!0}catch(i){return r.error.set(i.message),!1}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return I(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return gy(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const Aq=()=>({exact:!0});function S_e(t,e){1&t&&(Je(0,"section",1)(1,"p"),de(2,"Loading"),We()())}function A_e(t,e){if(1&t){const n=yo();Je(0,"header",3)(1,"h1"),de(2,"Recipes"),We(),Je(3,"button",5),wt("click",function(){return er(n),tr(Re(2).signOut())}),de(4,"Sign out"),We()()}if(2&t){const n=Re(2);X(3),_r("disabled",n.authBusy())}}function D_e(t,e){if(1&t){const n=yo();Je(0,"nav",4)(1,"a",6),de(2,"Home"),We(),Je(3,"a",7),de(4,"Recipes"),We(),Je(5,"a",8),wt("click",function(){return er(n),tr(Re(2).startAdd())}),de(6,"Add"),We()()}if(2&t){const n=Re(2);X(),_r("routerLinkActiveOptions",jw(4,Aq)),X(2),_r("routerLinkActiveOptions",jw(5,Aq)),X(2),Io("disabled",!n.canWrite())}}function R_e(t,e){if(1&t&&(Vt(0,A_e,5,1,"header",3),Vc(1,"router-outlet"),Vt(2,D_e,7,6,"nav",4)),2&t){const n=Re();Lt(n.user()&&!n.isCookingLayout()?0:-1),X(2),Lt(n.user()&&!n.isCookingLayout()?2:-1)}}function P_e(t,e){if(1&t&&(Je(0,"p",2),de(1),We()),2&t){const n=Re();X(),Sr(n.state.error())}}let M_e=(()=>{var t;class e{constructor(){this.router=O(mn),this.api=O(Ju),this.state=O(Ma),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=gt(!1),this.isCookingLayout=gt(!1),this.updateLayoutByRoute(this.router.url),this.router.events.subscribe(r=>{r instanceof So&&this.updateLayoutByRoute(r.urlAfterRedirects)}),function bF(t,e){const n=e?.injector??O(nr);let i,r=!0!==e?.manualCleanup?n.get(Br):null;const o=n.get(Xv,null,{optional:!0}),s=n.get(ys);return null!==o?(i=function vie(t,e,n){const r=Object.create(yie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=SF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof SM&&r._lView===o.view&&(r=null)):i=function Iie(t,e,n){const r=Object.create(_ie);return r.fn=SF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(kM),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new mie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return I(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}updateLayoutByRoute(r){this.isCookingLayout.set(r.includes("/cook"))}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-root"]],decls:4,vars:4,consts:[[1,"app-shell"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],[1,"bottom-nav","no-print"],["type","button",1,"ghost",3,"click","disabled"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes/new","routerLinkActive","active",3,"click"]],template:function(i,o){1&i&&(Je(0,"main",0),Vt(1,S_e,3,0,"section",1)(2,R_e,3,2),Vt(3,P_e,2,1,"p",2),We()),2&i&&(Io("cooking-layout",o.isCookingLayout()),X(),Lt(o.authLoading()?1:2),X(2),Lt(o.state.error()&&!o.isCookingLayout()?3:-1))},dependencies:[KT,km,uU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#f8fafc}*[_ngcontent-%COMP%]{box-sizing:border-box}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:1.25rem 1rem 5.5rem;max-width:920px;margin:0 auto}.app-shell.cooking-layout[_ngcontent-%COMP%]{max-width:none;padding:0}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.65rem .75rem calc(.65rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:12px;padding:.75rem 1rem;background:#f1f5f9;color:#0f172a}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.75rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding-bottom:2rem}.app-shell.cooking-layout[_ngcontent-%COMP%]{padding:0}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:1rem 0 0;max-width:420px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})(),Dq=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Z(Ps),Z(br))};static \u0275dir=be({type:t})}return t})(),Na=(()=>{class t extends Dq{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275dir=be({type:t,features:[Be]})}return t})();const di=new H(""),k_e={provide:di,useExisting:et(()=>af),multi:!0},V_e=new H("");let af=(()=>{class t extends Dq{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function O_e(){const t=ao()?ao().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Z(Ps),Z(br),Z(V_e,8))};static \u0275dir=be({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&wt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ut([k_e]),Be]})}return t})();const En=new H(""),Zo=new H("");function Fq(t){return null!=t}function Uq(t){return Dg(t)?pn(t):t}function jq(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Bq(t,e){return e.map(n=>n(t))}function $q(t){return t.map(e=>function F_e(t){return!t.validate}(e)?e:n=>e.validate(n))}function TR(t){return null!=t?function Hq(t){if(!t)return null;const e=t.filter(Fq);return 0==e.length?null:function(n){return jq(Bq(n,e))}}($q(t)):null}function bR(t){return null!=t?function qq(t){if(!t)return null;const e=t.filter(Fq);return 0==e.length?null:function(n){return function N_e(...t){const e=KF(t),{args:n,keys:r}=QF(t),i=new Nt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;Jr(n[d]).subscribe($t(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?JF(r,a):a),o.complete())}))}});return e?i.pipe(YF(e)):i}(Bq(n,e).map(Uq)).pipe(Fe(jq))}}($q(t)):null}function zq(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CR(t){return t?Array.isArray(t)?t:[t]:[]}function _y(t,e){return Array.isArray(t)?t.includes(e):t===e}function Kq(t,e){const n=CR(e);return CR(t).forEach(i=>{_y(n,i)||n.push(i)}),n}function Qq(t,e){return CR(e).filter(n=>!_y(t,n))}class Yq{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class On extends Yq{name;get formDirective(){return null}get path(){return null}}class Xo extends Yq{_parent=null;name=null;valueAccessor=null}class Jq{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let SR=(()=>{class t extends Jq{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Z(Xo,2))};static \u0275dir=be({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Io("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Be]})}return t})();const cf="VALID",vy="INVALID",Zu="PENDING",uf="DISABLED";class Xu{}class Xq extends Xu{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class RR extends Xu{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class PR extends Xu{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Iy extends Xu{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class MR extends Xu{source;constructor(e){super(),this.source=e}}function Ey(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class kR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return lt(this.statusReactive)}set status(e){lt(()=>this.statusReactive.set(e))}_status=Tt(()=>this.statusReactive());statusReactive=gt(void 0);get valid(){return this.status===cf}get invalid(){return this.status===vy}get pending(){return this.status==Zu}get disabled(){return this.status===uf}get enabled(){return this.status!==uf}errors;get pristine(){return lt(this.pristineReactive)}set pristine(e){lt(()=>this.pristineReactive.set(e))}_pristine=Tt(()=>this.pristineReactive());pristineReactive=gt(!0);get dirty(){return!this.pristine}get touched(){return lt(this.touchedReactive)}set touched(e){lt(()=>this.touchedReactive.set(e))}_touched=Tt(()=>this.touchedReactive());touchedReactive=gt(!1);get untouched(){return!this.touched}_events=new Fn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qq(e,this._rawAsyncValidators))}hasValidator(e){return _y(this._rawValidators,e)}hasAsyncValidator(e){return _y(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new PR(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new PR(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new RR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new RR(!0,r))}markAsPending(e={}){this.status=Zu;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Iy(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=uf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Xq(this.value,r)),this._events.next(new Iy(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=cf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cf||this.status===Zu)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Xq(this.value,n)),this._events.next(new Iy(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uf:cf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Zu,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=Uq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Iy(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ot,this.statusChanges=new Ot}_calculateStatus(){return this._allControlsDisabled()?uf:this.errors?vy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zu)?Zu:this._anyControlsHaveStatus(vy)?vy:cf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new RR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new PR(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ey(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function G_e(t){return Array.isArray(t)?TR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function W_e(t){return Array.isArray(t)?bR(t):t||null}(this._rawAsyncValidators)}}const el=new H("",{providedIn:"root",factory:()=>wy}),wy="always";function lf(t,e,n=wy){(function VR(t,e){const n=function Gq(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(zq(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function Wq(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(zq(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Cy(e._rawValidators,i),Cy(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Y_e(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&rz(t,e)})}(t,e),function Z_e(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function J_e(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&rz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Q_e(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Cy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function rz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function sz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function az(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const cz=class extends kR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function NR(t){return(Ey(t)?t.validators:t)||null}(n),function xR(t,e){return(Ey(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ey(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=az(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new MR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){az(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cye={provide:Xo,useExisting:et(()=>Py)},uz=Promise.resolve();let Py=(()=>{class t extends Xo{_changeDetectorRef;callSetDisabledState;control=new cz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ot;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function UR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===af?n=o:function tye(t){return Object.getPrototypeOf(t.constructor)===Na}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function FR(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){uz.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Gc(r);uz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Ty(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Z(On,9),Z(En,10),Z(Zo,10),Z(di,10),Z(sm,8),Z(el,8))};static \u0275dir=be({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ut([cye]),Be,Ti]})}return t})(),xye=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=yg({type:t});static \u0275inj=hl({})}return t})(),Dz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:el,useValue:n.callSetDisabledState??wy}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=yg({type:t});static \u0275inj=hl({imports:[xye]})}return t})();const Oye=(t,e)=>e.id;function Vye(t,e){1&t&&(Je(0,"p"),de(1,"Loading"),We())}function Lye(t,e){1&t&&(Je(0,"p"),de(1,"No recipes"),We())}function Fye(t,e){if(1&t){const n=yo();Je(0,"li")(1,"button",7),wt("click",function(){const i=er(n).$implicit;return tr(Re(3).open(i.id))}),de(2),We()()}if(2&t){const n=e.$implicit,r=Re(3);X(2),Ar(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function Uye(t,e){if(1&t&&(Je(0,"ul",6),Qr(1,Fye,3,1,"li",null,Oye),We()),2&t){const n=Re(2);X(),Yr(n.state.searchResults())}}function jye(t,e){if(1&t&&(Je(0,"section",5),Vt(1,Vye,2,0,"p")(2,Lye,2,0,"p")(3,Uye,3,0,"ul",6),We()),2&t){const n=Re();Io("loading",n.state.loading()),X(),Lt(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let Bye=(()=>{var t;class e{constructor(){this.state=O(Ma),this.router=O(mn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["type","search","placeholder","Search recipes",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(Je(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),wt("ngModelChange",function(a){return o.state.searchQuery.set(a)}),We()(),Vt(4,jye,4,3,"section",4),We()()),2&i&&(Io("has-query",o.state.searchQuery().trim().length>0),X(3),_r("ngModel",o.state.searchQuery()),X(),Lt(o.state.searchQuery().trim().length>0?4:-1))},dependencies:[Dz,af,SR,Py],styles:[".home-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:1rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{min-height:55vh;display:grid;place-items:center;transition:min-height .24s ease,place-items .24s ease}.home-screen.has-query[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]{min-height:0;place-items:start}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start;opacity:1;transform:translateY(0);transition:opacity .22s ease,transform .22s ease}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(260px,340px) minmax(0,1fr);column-gap:1rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})(),$ye=(()=>{var t;class e{constructor(){this.api=O(Ju),this.state=O(Ma),this.router=O(mn),this.authBusy=!1}signIn(){var r=this;return I(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(Ie(0,"section",0)(1,"h1"),de(2,"Recipes"),me(),Ie(3,"button",1),vo("click",function(){return o.signIn()}),de(4,"Continue with Google"),me()()),2&i&&(X(3),md("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const Hye=(t,e)=>e.id;function qye(t,e){1&t&&(Ie(0,"p"),de(1,"Loading"),me())}function zye(t,e){1&t&&(Ie(0,"p"),de(1,"No recipes"),me())}function Gye(t,e){if(1&t){const n=yo();Ie(0,"li")(1,"button",2),vo("click",function(){const i=er(n).$implicit;return tr(Re(2).open(i.id))}),de(2),me()()}if(2&t){const n=e.$implicit,r=Re(2);X(2),Ar(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function Wye(t,e){if(1&t&&(Ie(0,"ul",1),Qr(1,Gye,3,1,"li",null,Hye),me()),2&t){const n=Re();X(),Yr(n.state.recipes())}}let Kye=(()=>{var t;class e{constructor(){this.state=O(Ma),this.router=O(mn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(Ie(0,"section",0),Vt(1,qye,2,0,"p")(2,zye,2,0,"p")(3,Wye,3,0,"ul",1),me()),2&i&&(X(),Lt(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const Qye=(t,e)=>e.title,Yye=(t,e)=>e.message;function Jye(t,e){if(1&t&&(Ie(0,"span",3),de(1),me()),2&t){const n=Re().$implicit;X(),Ar("(",n.note,")")}}function Zye(t,e){if(1&t&&(Ie(0,"li"),de(1),Vt(2,Jye,2,1,"span",3),me()),2&t){const n=e.$implicit;X(),jc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),X(),Lt(n.note?2:-1)}}function Xye(t,e){if(1&t&&(Ie(0,"div",1)(1,"h3"),de(2),me(),Ie(3,"ul"),Qr(4,Zye,3,3,"li",null,ww),me()()),2&t){const n=e.$implicit;X(2),Sr(n.title),X(2),Yr(n.items)}}function eve(t,e){if(1&t&&(Ie(0,"li"),de(1),me()),2&t){const n=e.$implicit;X(),Sr(n.message)}}function tve(t,e){if(1&t&&(Ie(0,"div",2)(1,"h3"),de(2,"Warnings"),me(),Ie(3,"ul"),Qr(4,eve,2,1,"li",null,Yye),me()()),2&t){const n=Re();X(4),Yr(n.warnings)}}function nve(t,e){if(1&t&&(Ie(0,"li"),de(1),me()),2&t){const n=e.$implicit;X(),Sr(n)}}function rve(t,e){if(1&t&&(Ie(0,"div",1)(1,"h3"),de(2,"Steps"),me(),Ie(3,"ol"),Qr(4,nve,2,1,"li",null,ww),me()()),2&t){const n=Re();X(4),Yr(n.steps)}}function ive(t,e){if(1&t&&(Ie(0,"article",0)(1,"h2"),de(2),me(),Qr(3,Xye,6,1,"div",1,Qye),Vt(5,tve,6,0,"div",2),Vt(6,rve,6,0,"div",1),me()),2&t){const n=e,r=Re();X(2),Sr(n.title),X(),Yr(n.ingredientSections),X(2),Lt(r.showWarnings()&&n.warnings.length?5:-1),X(),Lt(n.steps.length?6:-1)}}let Rz=(()=>{var t;class e{constructor(){this.parsed=cT(null),this.showWarnings=cT(!1)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-recipe-preview"]],inputs:{parsed:[1,"parsed"],showWarnings:[1,"showWarnings"]},decls:1,vars:1,consts:[[1,"recipe-card"],[1,"block"],[1,"block","parser-warnings"],[1,"ingredient-note"]],template:function(i,o){if(1&i&&Vt(0,ive,7,3,"article",0),2&i){let s;Lt((s=o.parsed())?0:-1,s)}},styles:[".recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}.ingredient-note[_ngcontent-%COMP%]{color:#6b7280}"]}))}return t(),e})();function ove(t,e){if(1&t){const n=yo();Je(0,"button",1),wt("click",function(){return er(n),tr(Re().startCooking())}),de(1," \u{1f373} "),We(),Je(2,"div",2),Vc(3,"app-recipe-preview",3),We(),Je(4,"div",4)(5,"button",5),wt("click",function(){return er(n),tr(Re().edit())}),de(6,"Edit"),We(),Je(7,"button",6),wt("click",function(){return er(n),tr(Re().remove())}),de(8),We(),Je(9,"button",7),wt("click",function(){return er(n),tr(Re().state.print())}),de(10,"Print"),We()()}if(2&t){const n=Re();X(3),_r("parsed",n.state.selectedParsed()),X(2),_r("disabled",!n.api.canWrite()),X(2),_r("disabled",!n.api.canWrite()||n.state.deleting()),X(),Ar(" ",n.state.deleting()?"Deleting":"Delete"," ")}}function sve(t,e){1&t&&(Je(0,"p"),de(1,"Recipe not found"),We())}let ave=(()=>{var t;class e{constructor(){this.state=O(Ma),this.api=O(Ju),this.route=O(Pi),this.router=O(mn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return I(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}startCooking(){var r=this;return I(function*(){const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"cook"]))})()}remove(){var r=this;return I(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-recipe-detail"]],decls:3,vars:1,consts:[[1,"detail-screen"],["type","button","aria-label","Spustit cooking mode","title","Cooking mode",1,"cook-quick-action","no-print",3,"click"],[1,"printable-recipe"],[3,"parsed"],[1,"detail-actions","no-print"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"],["type","button",1,"ghost",3,"click"]],template:function(i,o){1&i&&(Je(0,"section",0),Vt(1,ove,11,4)(2,sve,2,0,"p"),We()),2&i&&(X(),Lt(o.state.selectedParsed()?1:2))},dependencies:[Rz],styles:[".detail-screen[_ngcontent-%COMP%]{position:relative;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.cook-quick-action[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:2.75rem;height:2.75rem;border-radius:999px;font-size:1.2rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 8px 24px #0f172a2e;z-index:2}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.detail-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.detail-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}.cook-quick-action[_ngcontent-%COMP%]{top:1.5rem;right:1.5rem}}@media print{.detail-actions[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;border:0;min-height:auto}}"]}))}return t(),e})(),Pz=(()=>{var t;class e{constructor(){this.state=O(Ma),this.api=O(Ju),this.route=O(Pi),this.router=O(mn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected()):r.state.startAdd()})()}save(){var r=this;return I(function*(){(yield r.state.saveSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-recipe-editor"]],decls:7,vars:6,consts:[[1,"editor-screen"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"editor-actions"],["type","button",3,"click","disabled"],[1,"preview-card"],[3,"parsed","showWarnings"]],template:function(i,o){1&i&&(Je(0,"section",0)(1,"textarea",1),wt("ngModelChange",function(a){return o.state.rawText.set(a)}),We(),Je(2,"div",2)(3,"button",3),wt("click",function(){return o.save()}),de(4),We()(),Je(5,"div",4),Vc(6,"app-recipe-preview",5),We()()),2&i&&(X(),_r("ngModel",o.state.rawText())("disabled",!o.api.canWrite()),X(2),_r("disabled",o.state.saving()||!o.api.canWrite()),X(),Ar(" ",o.state.saving()?"Saving":"Save"," "),X(2),_r("parsed",o.state.parsed())("showWarnings",!0))},dependencies:[Dz,af,SR,Py,Rz],styles:[".editor-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}textarea[_ngcontent-%COMP%]{width:100%;min-height:55vh;resize:vertical;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.editor-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.preview-card[_ngcontent-%COMP%]{margin-top:1rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const cve=(t,e)=>e.title,Mz=(t,e)=>e.raw;function uve(t,e){1&t&&(Ie(0,"p"),de(1,"Suroviny p\u0159ed startem"),me())}function lve(t,e){if(1&t&&(Ie(0,"p"),de(1),me()),2&t){const n=Re(2);X(),jc("Krok ",n.stepIndex()+1," / ",n.stepCount())}}function dve(t,e){if(1&t&&(Ie(0,"span",8),de(1),me()),2&t){const n=Re().$implicit;X(),Ar("(",n.note,")")}}function hve(t,e){if(1&t&&(Ie(0,"li"),de(1),Vt(2,dve,2,1,"span",8),me()),2&t){const n=e.$implicit;X(),jc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),X(),Lt(n.note?2:-1)}}function fve(t,e){if(1&t&&(Ie(0,"div",7)(1,"h3"),de(2),me(),Ie(3,"ul"),Qr(4,hve,3,3,"li",null,Mz),me()()),2&t){const n=e.$implicit;X(2),Sr(n.title),X(2),Yr(n.items)}}function pve(t,e){if(1&t&&(Ie(0,"article",3),Qr(1,fve,6,1,"div",7,cve),me()),2&t){const n=Re();X(),Yr(n.ingredientSections)}}function gve(t,e){if(1&t&&(Ie(0,"span"),de(1),me()),2&t){const n=Re().$implicit;X(),jc(" \u2013 ",n.amount,"",n.unit?" "+n.unit:"")}}function mve(t,e){if(1&t&&(Ie(0,"span"),de(1),me()),2&t){const n=Re().$implicit;X(),Ar(" (",n.note,")")}}function _ve(t,e){if(1&t&&(Ie(0,"li")(1,"strong"),de(2),me(),Vt(3,gve,2,2,"span"),Vt(4,mve,2,1,"span"),me()),2&t){const n=e.$implicit;X(2),Sr(n.name),X(),Lt(n.amount||n.unit?3:-1),X(),Lt(n.note?4:-1)}}function yve(t,e){if(1&t&&(Ie(0,"aside",10)(1,"h3"),de(2,"P\u0159ipomenut\xed surovin"),me(),Ie(3,"ul"),Qr(4,_ve,5,3,"li",null,Mz),me()()),2&t){const n=Re(3);X(4),Yr(n.highlightedIngredients())}}function vve(t,e){if(1&t){const n=yo();Ie(0,"article",9),vo("click",function(){return er(n),tr(Re(2).nextStep())}),Ie(1,"p"),de(2),me()(),Vt(3,yve,6,0,"aside",10)}if(2&t){const n=Re(2);X(2),Sr(n.currentStep()),X(),Lt(n.highlightedIngredients().length>0?3:-1)}}function Ive(t,e){if(1&t){const n=yo();Ie(0,"header",1)(1,"button",2),vo("click",function(){return er(n),tr(Re().backToDetail())}),de(2,"Zp\u011bt"),me(),Ie(3,"div")(4,"h2"),de(5),me(),Vt(6,uve,2,0,"p")(7,lve,2,2,"p"),me()(),Vt(8,pve,3,0,"article",3)(9,vve,4,2),Ie(10,"footer",4)(11,"button",5),vo("click",function(){return er(n),tr(Re().previousStep())}),de(12,"P\u0159edchoz\xed"),me(),Ie(13,"button",6),vo("click",function(){return er(n),tr(Re().nextStep())}),de(14),me()()}if(2&t){const n=Re();X(5),Sr(e.title),X(),Lt(n.showIngredients()?6:7),X(2),Lt(n.showIngredients()?8:9),X(3),md("disabled",n.stepIndex()<=-1),X(2),md("disabled",!n.showIngredients()&&n.stepIndex()>=n.stepCount()-1),X(),Ar(" ",n.showIngredients()?"Za\u010d\xedt va\u0159it":"Dal\u0161\xed krok"," ")}}function Eve(t,e){1&t&&(Ie(0,"p"),de(1,"Recept nebyl nalezen."),me())}function HR(t){return`cooking-progress:${t}`}function Tve(t){return t.toLowerCase().split(" ").filter(Boolean).filter(e=>e.length>2).join(" ")}const tl=()=>{const t=O(Ju),e=O(mn);return!!t.user()||e.parseUrl("/login")};(function Jre(t,e,n){return ore({rootComponent:t,platformRef:n?.platformRef,...IF(e)})})(M_e,{providers:[function vce(t,...e){return function Dv(t){return{\u0275providers:t}}([{provide:nb,multi:!0,useValue:t},[],{provide:Pi,useFactory:dU,deps:[mn]},{provide:qO,multi:!0,useFactory:hU},e.map(n=>n.\u0275providers)])}([{path:"login",component:$ye},{path:"",canActivate:[tl],component:Bye},{path:"recipes",canActivate:[tl],component:Kye},{path:"recipes/new",canActivate:[tl],component:Pz},{path:"recipes/:id",canActivate:[tl],component:ave},{path:"recipes/:id/edit",canActivate:[tl],component:Pz},{path:"recipes/:id/cook",canActivate:[tl],component:(()=>{var t;class e{constructor(){this.state=O(Ma),this.route=O(Pi),this.router=O(mn),this.stepIndex=gt(-1),this.showIngredients=Tt(()=>this.stepIndex()<0),this.parsed=Tt(()=>this.state.selectedParsed()),this.steps=Tt(()=>this.parsed()?.steps??[]),this.stepCount=Tt(()=>this.steps().length),this.currentStep=Tt(()=>{const r=this.stepIndex();return r<0?"":this.steps()[r]??""}),this.ingredientLookup=Tt(()=>{const r=this.parsed();return r?r.ingredientSections.flatMap(i=>i.items.map(o=>({label:Tve(o.name),ingredient:o}))):[]}),this.highlightedIngredients=Tt(()=>{const r=this.currentStep().toLowerCase();return r?this.ingredientLookup().filter(({label:i})=>i.length>=3&&r.includes(i)).map(({ingredient:i})=>i).filter((i,o,s)=>s.findIndex(a=>a.raw===i.raw)===o):[]})}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");if(!i)return void(yield r.router.navigateByUrl("/recipes"));0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i);const o=r.state.selectedParsed();if(!o)return void(yield r.router.navigate(["/recipes",i]));r.stepIndex.set(-1);const s=r.readProgress(i,o);null!==s&&(window.confirm(`Pokra\u010dovat od kroku ${s.stepIndex+1}?`)?r.stepIndex.set(s.stepIndex):r.clearProgress(i))})()}previousStep(){const r=this.stepIndex()-1;r<-1||(this.stepIndex.set(r),this.persistProgress())}nextStep(){if(this.showIngredients())return this.stepIndex.set(0),void this.persistProgress();const r=this.stepIndex()+1;if(r>=this.stepCount())return this.stepIndex.set(this.stepCount()-1),void this.persistProgress();this.stepIndex.set(r),this.persistProgress()}backToDetail(){var r=this;return I(function*(){const i=r.state.selectedRecipeId();i?yield r.router.navigate(["/recipes",i]):yield r.router.navigateByUrl("/recipes")})()}persistProgress(){const r=this.state.selectedRecipeId();if(!r)return;const i=this.stepIndex();if(i<0)return void this.clearProgress(r);const o={stepIndex:i,startedAt:(new Date).toISOString()};localStorage.setItem(HR(r),JSON.stringify(o))}readProgress(r,i){const o=localStorage.getItem(HR(r));if(!o)return null;try{const s=JSON.parse(o);return s.stepIndex<0||s.stepIndex>=i.steps.length?(this.clearProgress(r),null):s}catch{return this.clearProgress(r),null}}clearProgress(r){localStorage.removeItem(HR(r))}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Wr({type:e,selectors:[["app-cooking-mode"]],decls:3,vars:1,consts:[[1,"cooking-screen"],[1,"cooking-header"],["type","button",1,"ghost",3,"click"],[1,"ingredient-overview"],[1,"step-controls"],["type","button",1,"ghost",3,"click","disabled"],["type","button",3,"click","disabled"],[1,"section-block"],[1,"ingredient-note"],[1,"step-card",3,"click"],[1,"inline-help"]],template:function(i,o){if(1&i&&(Ie(0,"section",0),Vt(1,Ive,15,6)(2,Eve,2,0,"p"),me()),2&i){let s;X(),Lt((s=o.parsed())?1:2,s)}},styles:[".cooking-screen[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;width:100vw;min-height:100dvh;padding:max(1rem,env(safe-area-inset-top)) 1rem max(1rem,env(safe-area-inset-bottom));display:grid;gap:1rem}.cooking-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.ingredient-overview[_ngcontent-%COMP%], .step-card[_ngcontent-%COMP%], .inline-help[_ngcontent-%COMP%]{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:1rem}.step-card[_ngcontent-%COMP%]{min-height:32vh;display:flex;align-items:center;justify-content:center;text-align:center;cursor:pointer}.step-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1.4rem,5vw,2.2rem);line-height:1.4}.section-block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.section-block[_ngcontent-%COMP%] + .section-block[_ngcontent-%COMP%]{margin-top:.75rem}ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.4rem}.ingredient-note[_ngcontent-%COMP%]{color:#cbd5e1}.step-controls[_ngcontent-%COMP%]{margin-top:auto;display:grid;grid-template-columns:1fr 1fr;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.9rem 1rem;background:#22c55e;color:#052e16;font:inherit;font-weight:600}button.ghost[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.cooking-screen[_ngcontent-%COMP%]{padding:1.5rem}}"]}))}return t(),e})()},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},Fa=>{Fa(Fa.s=531)}]);