"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{183(){let $s;function nu(){return $s}function Rr(t){const e=$s;return $s=t,e}const U$=Symbol("NotFound");function a_(t){return t===U$||"\u0275NotFound"===t?.name}Error;let zt=null,ru=!1,c_=1;const Ut=Symbol("SIGNAL");function oe(t){const e=zt;return zt=t,e}const qs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gh(t){if(ru)throw new Error("");if(null===zt)return;zt.consumerOnSignalRead(t);const e=zt.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=zt.recomputing;if(r&&(n=void 0!==e?e.nextProducer:zt.producers,void 0!==n&&n.producer===t))return zt.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===zt&&(!r||function q$(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,zt)))return;const o=zs(zt),s={producer:t,consumer:zt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};zt.producersTail=s,void 0!==e?e.nextProducer=s:zt.producers=s,o&&ZS(t,s)}function iu(t){if((!zs(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==c_)){if(!t.producerMustRecompute(t)&&!_h(t))return void mh(t);t.producerRecomputeValue(t),mh(t)}}function YS(t){if(void 0===t.consumers)return;const e=ru;ru=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||B$(r)}}finally{ru=e}}function JS(){return!1!==zt?.consumerAllowSignalWrites}function B$(t){t.dirty=!0,YS(t),t.consumerMarkedDirty?.(t)}function mh(t){t.dirty=!1,t.lastCleanEpoch=c_}function Gs(t){return t&&function H$(t){t.producersTail=void 0,t.recomputing=!0}(t),oe(t)}function ou(t,e){oe(e),t&&function $$(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(zs(t))do{n=d_(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function _h(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(iu(n),r!==n.version))return!0}return!1}function su(t){if(zs(t)){let e=t.producers;for(;void 0!==e;)e=d_(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function ZS(t,e){const n=t.consumersTail,r=zs(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)ZS(i.producer,i)}function d_(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!zs(e)){let o=e.producers;for(;void 0!==o;)o=d_(o)}return n}function zs(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function f_(t,e){return Object.is(t,e)}const po=Symbol("UNSET"),Ws=Symbol("COMPUTING"),pi=Symbol("ERRORED"),z$={...qs,value:po,dirty:!0,error:null,equal:f_,kind:"computed",producerMustRecompute:t=>t.value===po||t.value===Ws,producerRecomputeValue(t){if(t.value===Ws)throw new Error("");const e=t.value;t.value=Ws;const n=Gs(t);let r,i=!1;try{r=t.computation(),oe(null),i=e!==po&&e!==pi&&r!==pi&&t.equal(e,r)}catch(o){r=pi,t.error=o}finally{ou(t,n)}i?t.value=e:(t.value=r,t.version++)}};let XS=function W$(){throw new Error};function eD(t){XS(t)}function Q$(t,e){const n=Object.create(nD);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function Y$(t){return gh(t),t.value}(n);return r[Ut]=n,[r,s=>p_(n,s),s=>function tD(t,e){JS()||eD(t),p_(t,e(t.value))}(n,s)]}function p_(t,e){JS()||eD(t),t.equal(t.value,e)||(t.value=e,function J$(t){t.version++,function j$(){c_++}(),YS(t)}(t))}const nD={...qs,equal:f_,value:void 0,kind:"signal"};function Pt(t){return"function"==typeof t}function rD(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const g_=rD(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function m_(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Gn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Pt(r))try{r()}catch(o){e=o instanceof g_?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{sD(o)}catch(s){e=e??[],s instanceof g_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new g_(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sD(e);else{if(e instanceof Gn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&m_(n,e)}remove(e){const{_finalizers:n}=this;n&&m_(n,e),e instanceof Gn&&e._removeParent(this)}}Gn.EMPTY=(()=>{const t=new Gn;return t.closed=!0,t})();const iD=Gn.EMPTY;function oD(t){return t instanceof Gn||t&&"closed"in t&&Pt(t.remove)&&Pt(t.add)&&Pt(t.unsubscribe)}function sD(t){Pt(t)?t():t.unsubscribe()}const go={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vh={setTimeout(t,e,...n){const{delegate:r}=vh;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=vh;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function aD(t){vh.setTimeout(()=>{const{onUnhandledError:e}=go;if(!e)throw t;e(t)})}function cD(){}const Z$=__("C",void 0,void 0);function __(t,e,n){return{kind:t,value:e,error:n}}let mo=null;function Ih(t){if(go.useDeprecatedSynchronousErrorHandling){const e=!mo;if(e&&(mo={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=mo;if(mo=null,n)throw r}}else t()}class y_ extends Gn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,oD(e)&&e.add(this)):this.destination=o4}static create(e,n,r){return new I_(e,n,r)}next(e){this.isStopped?E_(function e4(t){return __("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?E_(function X$(t){return __("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?E_(Z$,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const n4=Function.prototype.bind;function v_(t,e){return n4.call(t,e)}class r4{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Eh(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Eh(r)}else Eh(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Eh(n)}}}class I_ extends y_{constructor(e,n,r){let i;if(super(),Pt(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&go.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&v_(e.next,o),error:e.error&&v_(e.error,o),complete:e.complete&&v_(e.complete,o)}):i=e}this.destination=new r4(i)}}function Eh(t){go.useDeprecatedSynchronousErrorHandling?function t4(t){go.useDeprecatedSynchronousErrorHandling&&mo&&(mo.errorThrown=!0,mo.error=t)}(t):aD(t)}function E_(t,e){const{onStoppedNotification:n}=go;n&&vh.setTimeout(()=>n(t,e))}const o4={closed:!0,next:cD,error:function i4(t){throw t},complete:cD},T_="function"==typeof Symbol&&Symbol.observable||"@@observable";function s4(t){return t}let Nn=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function c4(t){return t&&t instanceof y_||function a4(t){return t&&Pt(t.next)&&Pt(t.error)&&Pt(t.complete)}(t)&&oD(t)}(n)?n:new I_(n,r,i);return Ih(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=lD(r))((i,o)=>{const s=new I_({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[T_](){return this}pipe(...n){return function uD(t){return 0===t.length?s4:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=lD(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function lD(t){var e;return null!==(e=t??go.Promise)&&void 0!==e?e:Promise}const u4=rD(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ks=(()=>{class t extends Nn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new dD(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new u4}next(n){Ih(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ih(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ih(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?iD:(this.currentObservers=null,o.push(n),new Gn(()=>{this.currentObservers=null,m_(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Nn;return n.source=this,n}}return t.create=(e,n)=>new dD(e,n),t})();class dD extends Ks{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:iD}}class l4 extends Ks{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}class B extends Error{code;constructor(e,n){super(function Pr(t,e){return`${function d4(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Re(t){for(let e in t)if(t[e]===Re)return e;throw Error("")}function h4(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function In(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(In).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function b_(t,e){return t?e?`${t} ${e}`:t:e||""}globalThis;const f4=Re({__forward_ref__:Re});function Ge(t){return t.__forward_ref__=Ge,t.toString=function(){return In(this())},t}function le(t){return Th(t)?t():t}function Th(t){return"function"==typeof t&&t.hasOwnProperty(f4)&&t.__forward_ref__===Ge}function me(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function au(t){return{providers:t.providers||[],imports:t.imports||[]}}function wh(t){return function v4(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Ch)}function bh(t){return t&&t.hasOwnProperty(C_)?t[C_]:null}const Ch=Re({\u0275prov:Re}),C_=Re({\u0275inj:Re});class W{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=me({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function S_(t){return t&&!!t.\u0275providers}const D_=Re({\u0275cmp:Re}),C4=Re({\u0275dir:Re}),A4=Re({\u0275pipe:Re}),yo=Re({\u0275fac:Re}),lu=Re({__NG_ELEMENT_ID__:Re}),gD=Re({__NG_ENV_ID__:Re});function ce(t){return"string"==typeof t?t:null==t?"":String(t)}const R_=Re({ngErrorCode:Re}),mD=Re({ngErrorMessage:Re}),du=Re({ngTokenPath:Re});function P_(t,e){return _D("",-200,e)}function N_(t,e){throw new B(-201,!1)}function _D(t,e,n){const r=new B(e,t);return r[R_]=e,r[mD]=t,n&&(r[du]=n),r}let M_;function yD(){return M_}function En(t){const e=M_;return M_=t,e}function vD(t,e,n){const r=wh(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void N_()}const vo={};class M4{injector;constructor(e){this.injector=e}retrieve(e,n){const r=hu(n)||0;try{return this.injector.get(e,8&r?null:vo,r)}catch(i){if(a_(i))return i;throw i}}}function x4(t,e=0){const n=nu();if(void 0===n)throw new B(-203,!1);if(null===n)return vD(t,void 0,e);{const r=function k4(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(a_(i)){if(r.optional)return null;throw i}return i}}function Pe(t,e=0){return(yD()||x4)(le(t),e)}function X(t,e){return Pe(t,hu(e))}function hu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function k_(t){const e=[];for(let n=0;n<t.length;n++){const r=le(t[n]);if(Array.isArray(r)){if(0===r.length)throw new B(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=O4(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(Pe(i,o))}else e.push(Pe(r))}return e}function O4(t){return t.__NG_DI_FLAG__}function Io(t,e){return t.hasOwnProperty(yo)?t[yo]:null}function Qs(t,e){t.forEach(n=>Array.isArray(n)?Qs(n,e):e(n))}function Sh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Rh(t,e,n){let r=pu(t,e);return r>=0?t[1|r]=n:(r=~r,function wD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function O_(t,e){const n=pu(t,e);if(n>=0)return t[1|n]}function pu(t,e){return function L4(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const cr={},ze=[],Eo=new W(""),bD=new W("",-1),V_=new W("");class Ph{get(e,n=vo){if(n===vo){const i=_D("",-201);throw i.name="\u0275NotFound",i}return n}}function Me(t){return t[D_]||null}function ln(t){return t[C4]||null}function tr(t){return t[A4]||null}function U4(...t){return{\u0275providers:F_(0,t),\u0275fromNgModule:!0}}function F_(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Qs(e,s=>{const a=s;Nh(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&AD(i,o),n}function AD(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];U_(i,o=>{e(o,r)})}}function Nh(t,e,n,r){if(!(t=le(t)))return!1;let i=null,o=bh(t);const s=!o&&Me(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=bh(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Nh(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Qs(o.imports,d=>{Nh(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&AD(u,e)}if(!a){const u=Io(i)||(()=>new i);e({provide:i,useFactory:u,deps:ze},i),e({provide:V_,useValue:i,multi:!0},i),e({provide:Eo,useValue:()=>Pe(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;U_(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function U_(t,e){for(let n of t)S_(n)&&(n=n.\u0275providers),Array.isArray(n)?U_(n,e):e(n)}const j4=Re({provide:String,useValue:Re});function j_(t){return null!==t&&"object"==typeof t&&j4 in t}function Nr(t){return"function"==typeof t}const B_=new W(""),Mh={},PD={};let H_;function $_(){return void 0===H_&&(H_=new Ph),H_}class Wn{}class To extends Wn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,G_(e,s=>this.processProvider(s)),this.records.set(bD,Ys(void 0,this)),i.has("environment")&&this.records.set(Wn,Ys(void 0,this));const o=this.records.get(B_);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(V_,ze,{self:!0}))}retrieve(e,n){const r=hu(n)||0;try{return this.get(e,vo,r)}catch(i){if(a_(i))return i;throw i}}destroy(){mu(this),this._destroyed=!0;const e=oe(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return mu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){mu(this);const n=Rr(this),r=En(void 0);try{return e()}finally{Rr(n),En(r)}}get(e,n=vo,r){if(mu(this),e.hasOwnProperty(gD))return e[gD](this);const i=hu(r),s=Rr(this),a=En(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function G4(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&wh(e);u=d&&this.injectableDefInScope(d)?Ys(q_(e),Mh):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?$_():this.parent).get(e,n=8&i&&n===vo?null:n)}catch(c){const u=function P4(t){return t[R_]}(c);throw-200===u||-201===u?new B(u,null):c}finally{En(a),Rr(s)}}resolveInjectorInitializers(){const e=oe(null),n=Rr(this),r=En(void 0);try{const o=this.get(Eo,ze,{self:!0});for(const s of o)s()}finally{Rr(n),En(r),oe(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(In(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=Nr(e=le(e))?e:le(e&&e.provide);const r=function H4(t){return j_(t)?Ys(void 0,t.useValue):Ys(ND(t),Mh)}(e);if(!Nr(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ys(void 0,Mh,!0),i.factory=()=>k_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=oe(null);try{if(n.value===PD)throw P_(In(e));return n.value===Mh&&(n.value=PD,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function q4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=le(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function q_(t){const e=wh(t),n=null!==e?e.factory:Io(t);if(null!==n)return n;if(t instanceof W)throw new B(204,!1);if(t instanceof Function)return function B4(t){if(t.length>0)throw new B(204,!1);const n=function I4(t){return(t?.[Ch]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new B(204,!1)}function ND(t,e,n){let r;if(Nr(t)){const i=le(t);return Io(i)||q_(i)}if(j_(t))r=()=>le(t.useValue);else if(function DD(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...k_(t.deps||[]));else if(function SD(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>Pe(le(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=le(t&&(t.useClass||t.provide));if(!function $4(t){return!!t.deps}(t))return Io(i)||q_(i);r=()=>new i(...k_(t.deps))}return r}function mu(t){if(t.destroyed)throw new B(205,!1)}function Ys(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function G_(t,e){for(const n of t)Array.isArray(n)?G_(n,e):n&&S_(n)?G_(n.\u0275providers,e):e(n)}function MD(t,e){let n;t instanceof To?(mu(t),n=t):n=new M4(t);const i=Rr(n),o=En(void 0);try{return e()}finally{Rr(i),En(o)}}function it(t){return Array.isArray(t)&&"object"==typeof t[1]}function dn(t){return Array.isArray(t)&&!0===t[1]}function kD(t){return!!(4&t.flags)}function kr(t){return t.componentOffset>-1}function ta(t){return!(1&~t.flags)}function kn(t){return!!t.template}function Ii(t){return!!(512&t[2])}function Or(t){return!(256&~t[2])}function Mt(t){for(;Array.isArray(t);)t=t[0];return t}function na(t,e){return Mt(e[t])}function Tt(t,e){return Mt(e[t.index])}function ra(t,e){return t.data[e]}function hn(t,e){const n=e[t];return it(n)?n:n[0]}function Y_(t){return!(128&~t[2])}function Qt(t,e){return null==e?null:t[e]}function jD(t){t[17]=0}function BD(t){1024&t[2]||(t[2]|=1024,Y_(t)&&ia(t))}function Vh(t){return!!(9216&t[2]||t[24]?.dirty)}function J_(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),Vh(t)&&ia(t)}function ia(t){t[10].changeDetectionScheduler?.notify(0);let e=Vr(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Y_(e));)e=Vr(e)}function Lh(t,e){if(Or(t))throw new B(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function Vr(t){const e=t[3];return dn(e)?e[3]:e}const se={lFrame:oR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let ey=!1;function O(){return se.lFrame.lView}function de(){return se.lFrame.tView}function On(t){return se.lFrame.contextLView=t,t[8]}function Vn(t){return se.lFrame.contextLView=null,t}function ae(){let t=QD();for(;null!==t&&64===t.type;)t=t.parent;return t}function QD(){return se.lFrame.currentTNode}function Lr(t,e){const n=se.lFrame;n.currentTNode=t,n.isParent=e}function YD(){return se.lFrame.isParent}function eR(){return ey}function Fh(t){const e=ey;return ey=t,e}function Tn(){return se.lFrame.bindingIndex++}function Ur(t){const e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function iq(t,e){const n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,ny(e)}function ny(t){se.lFrame.currentDirectiveIndex=t}function Uh(t){se.lFrame.currentQueryIndex=t}function sq(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function rR(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=sq(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=se.lFrame=iR();return r.currentTNode=e,r.lView=t,!0}function oy(t){const e=iR(),n=t[1];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function iR(){const t=se.lFrame,e=null===t?null:t.child;return null===e?oR(t):e}function oR(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function sR(){const t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const aR=sR;function sy(){const t=sR();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jt(){return se.lFrame.selectedIndex}function So(t){se.lFrame.selectedIndex=t}let cR=!0;function jh(){return cR}function Iu(t){cR=t}function uR(t,e=null,n=null,r){const i=function lR(t,e=null,n=null,r,i=new Set){const o=[n||ze,U4(t)];return r=r||("object"==typeof t?void 0:In(t)),new To(o,e||$_(),r||null,i)}(t,e,n,r);return i.resolveInjectorInitializers(),i}class Qn{static THROW_IF_NOT_FOUND=vo;static NULL=new Ph;static create(e,n){if(Array.isArray(e))return uR({name:""},n,e,"");{const r=e.name??"";return uR({name:r},e.parent,e.providers,r)}}static \u0275prov=me({token:Qn,providedIn:"any",factory:()=>Pe(bD)});static __NG_ELEMENT_ID__=-1}const Ei=new W("");let jr=(()=>class t{static __NG_ELEMENT_ID__=fq;static __NG_ENV_ID__=n=>n})();class dR extends jr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Or(this._lView)}onDestroy(e){const n=this._lView;return Lh(n,e),()=>function Z_(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function fq(){return new dR(O())}class sa{_console=console;handleError(e){this._console.error("ERROR",e)}}const Ti=new W("",{providedIn:"root",factory:()=>{const t=X(Wn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(sa),e.handleError(n))}}}),hR={provide:Eo,useValue:()=>{X(sa)},multi:!0};function wt(t,e){const[n,r,i]=Q$(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=ay.bind(o),o}function ay(){const t=this[Ut];if(void 0===t.readonlyFn){const e=()=>this();e[Ut]=t,t.readonlyFn=e}return t.readonlyFn}class Do{}const gR=new W("",{providedIn:"root",factory:()=>!1}),mR=new W(""),_R=new W("");let Ro=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new l4(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Nn(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=me({token:t,providedIn:"root",factory:()=>new t})}return t})();function Eu(...t){}let vR=(()=>{class t{static \u0275prov=me({token:t,providedIn:"root",factory:()=>new mq})}return t})();class mq{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let IR=null;function Tu(){return IR}class vq{}function MR(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){MR(o,r,i,s,a,"next",c)}function a(c){MR(o,r,i,s,a,"throw",c)}s(void 0)})}}function hy(t){return e=>{if(function i3(t){return Pt(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fy(t,e,n,r,i){return new o3(t,e,n,r,i)}class o3 extends y_{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function py(t,e){return hy((n,r)=>{let i=0;n.subscribe(fy(r,o=>{r.next(t.call(e,o,i++))}))})}function Br(t){return{toString:t}.toString()}class B3{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function GR(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const fa=(()=>{const t=()=>zR;return t.ngInherit=!0,t})();function zR(t){return t.type.prototype.ngOnChanges&&(t.setInput=$3),H3}function H3(){const t=KR(this),e=t?.current;if(e){const n=t.previous;if(n===cr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $3(t,e,n,r,i){const o=this.declaredInputs[r],s=KR(t)||function q3(t,e){return t[WR]=e}(t,{previous:cr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new B3(u&&u.currentValue,n,c===cr),GR(t,e,i,n)}const WR="__ngSimpleChanges__";function KR(t){return t[WR]||null}const No=[],xe=function(t,e=null,n){for(let r=0;r<No.length;r++)(0,No[r])(t,e,n)};function Yh(t,e,n){YR(t,e,3,n)}function Jh(t,e,n,r){(3&t[2])===n&&YR(t,e,n,r)}function Ty(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function YR(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(Q3(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function JR(t,e){xe(4,t,e);const n=oe(null);try{e.call(t)}finally{oe(n),xe(5,t,e)}}function Q3(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,JR(a,o)):JR(a,o)}class Ru{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function XR(t){return 3===t||4===t||6===t}function eP(t){return 64===t.charCodeAt(0)}function ga(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||tP(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function tP(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function Pu(t){return 32767&t}function Nu(t,e){let n=function X3(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let Cy=!0;function Zh(t){const e=Cy;return Cy=t,e}let e6=0;const hr={};function Xh(t,e){const n=iP(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ay(r.data,t),Ay(e,null),Ay(r.blueprint,null));const i=ef(t,e),o=t.injectorIndex;if(function by(t){return-1!==t}(i)){const s=Pu(i),a=Nu(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Ay(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ef(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=dP(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Sy(t,e,n){!function t6(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(lu)&&(r=n[lu]),null==r&&(r=n[lu]=e6++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function oP(t,e,n){if(8&n||void 0!==t)return t;N_()}function sP(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=En(void 0);try{return i?i.get(e,r,8&n):vD(e,r,8&n)}finally{En(o)}}return oP(r,0,n)}function aP(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function s6(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!Ii(s);){const a=cP(o,s,n,2|r,hr);if(a!==hr)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,hr,r);if(d!==hr)return d}c=dP(s),s=s[14]}o=c}return i}(t,e,n,r,hr);if(s!==hr)return s}const o=cP(t,e,n,r,hr);if(o!==hr)return o}return sP(e,n,r,i)}function cP(t,e,n,r,i){const o=function i6(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(lu)?t[lu]:void 0;return"number"==typeof e?e>=0?255&e:o6:e}(n);if("function"==typeof o){if(!rR(e,t,r))return 1&r?oP(i,0,r):sP(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;N_()}finally{aR()}}else if("number"==typeof o){let s=null,a=iP(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?ef(t,e):e[a+8],-1!==c&&lP(r,!1)?(s=e[1],a=Pu(c),e=Nu(c,e)):a=-1);-1!==a;){const d=e[1];if(uP(o,a,d.data)){const h=r6(a,e,n,s,r,u);if(h!==hr)return h}c=e[a+8],-1!==c&&lP(r,e[1].data[a+8]===u)&&uP(o,a,e)?(s=d,a=Pu(c),e=Nu(c,e)):a=-1}}return i}function r6(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=function tf(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&kn(g)&&g.type===n)return c}return null}(a,s,n,null==r?kr(a)&&Cy:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?Mu(e,s,d,a,i):hr}function Mu(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof Ru){const a=o;if(a.resolving)throw function ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ce(t)}(s[n]),P_();const c=Zh(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?En(a.injectImpl):null;rR(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function K3(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=zR(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&En(h),Zh(c),a.resolving=!1,aR()}}return o}function uP(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function lP(t,e){return!(2&t||1&t&&e)}class dt{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aP(this._tNode,this._lView,e,hu(r),n)}}function o6(){return new dt(ae(),O())}function Dy(t){return Th(t)?()=>{const e=Dy(le(t));return e&&e()}:Io(t)}function dP(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function p6(){return ma(ae(),O())}function ma(t,e){return new Hr(Tt(t,e))}let Hr=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=p6})();function xu(t){return!(128&~t.flags)}Symbol;var rf=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(rf||{});const of=new Map;let v6=0;function Ny(t){of.delete(t[19])}const xy="__ngContext__";function bn(t,e){it(e)?(t[xy]=e[19],function E6(t){of.set(t[19],t)}(e)):t[xy]=e}function DP(t){return PP(t[12])}function RP(t){return PP(t[4])}function PP(t){for(;null!==t&&!dn(t);)t=t[4];return t}let ky;const Ou=new W("",{providedIn:"root",factory:()=>$6}),$6="ng",LP=new W(""),FP=new W("",{providedIn:"platform",factory:()=>"unknown"}),UP=new W("",{providedIn:"root",factory:()=>function Ci(){if(void 0!==ky)return ky;if(typeof document<"u")return document;throw new B(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),J6=new W("",{providedIn:"root",factory:()=>!1});function lf(t){return!(32&~t.flags)}function lN(t,e){const n=t.contentQueries;if(null!==n){const r=oe(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Uh(n[i]),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function Zy(t,e,n){Uh(0);const r=oe(null);try{e(t,n)}finally{oe(r)}}function Xy(t,e,n){if(kD(e)){const r=oe(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{oe(r)}}}var $r=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}($r||{});class yN{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss)`}}function If(t,e,n){return t.createElement(e,n)}function xo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function RN(t,e,n){t.appendChild(e,n)}function PN(t,e,n,r,i){null!==r?xo(t,e,n,r,i):RN(t,e,n)}function ju(t,e,n,r){t.removeChild(null,e,n,r)}function MN(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function Z3(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];eP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function ZG(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function JG(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function v9(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const UN="ng-template";function I9(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==v9(e[i+1].toLowerCase(),n,0))return!0}else if(uv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function uv(t){return 4===t.type&&t.value!==UN}function E9(t,e,n){return e===(4!==t.type||n?t.value:UN)}function T9(t,e,n){let r=4;const i=t.attrs,o=null!==i?function C9(t){for(let e=0;e<t.length;e++)if(XR(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!E9(t,c,n)||""===c&&1===e.length){if(nr(r))return!1;s=!0}}else if(8&r){if(null===i||!I9(t,i,c,n)){if(nr(r))return!1;s=!0}}else{const u=e[++a],d=w9(c,i,uv(t),n);if(-1===d){if(nr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(nr(r))return!1;s=!0}}}}else{if(!s&&!nr(r)&&!nr(c))return!1;if(s&&nr(c))continue;s=!1,r=c|1&r}}return nr(r)||s}function nr(t){return!(1&t)}function w9(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function A9(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function jN(t,e,n=!1){for(let r=0;r<e.length;r++)if(T9(t,e[r],n))return!0;return!1}function BN(t,e){return t?":not("+e.trim()+")":e}function D9(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!nr(s)&&(e+=BN(o,i),i=""),r=s,o=o||!nr(r);n++}return""!==i&&(e+=BN(o,i)),e}const ke={};function lv(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function N9(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ke);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function Tf(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),jD(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function I6(){return v6++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function dv(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Hu(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hv(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function Ae(t=1){$N(de(),O(),jt()+t,!1)}function $N(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&Jh(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&Yh(e,o,n)}So(n)}var wf=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(wf||{});function $u(t,e,n,r){const i=oe(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&wf.SignalBased)&&(c=e[o][Ut]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):GR(e,c,o,r)}finally{oe(i)}}var ko=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ko||{});function pv(t,e){return undefined(t,e)}const Oo=new Set;var gv=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(gv||{});const qu=new W(""),WN=new Set;function Zt(t){WN.has(t)||(WN.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const KN=!1,pn=class F9 extends Ks{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function z_(){return void 0!==yD()||null!=nu()}()&&(this.destroyRef=X(jr,{optional:!0})??void 0,this.pendingTasks=X(Ro,{optional:!0})??void 0)}emit(e){const n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Gn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function QN(t){let e,n;function r(){t=Eu;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function YN(t){return queueMicrotask(()=>t()),()=>{t=Eu}}const mv="isAngularZone",Cf=mv+"_ID";let U9=0;class Ne{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pn(!1);onMicrotaskEmpty=new pn(!1);onStable=new pn(!1);onError=new pn(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=KN}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function H9(t){const e=()=>{!function B9(t){function e(){QN(()=>{t.callbackScheduled=!1,yv(t),t.isCheckStableRunning=!0,_v(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),yv(t))}(t)},n=U9++;t._inner=t._inner.fork({name:"angular",properties:{[mv]:!0,[Cf]:n,[Cf+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function $9(t){return XN(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return JN(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),ZN(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return JN(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function q9(t){return XN(t,"__scheduler_tick__")}(c)&&e(),ZN(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,yv(t),_v(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(mv)}static assertInAngularZone(){if(!Ne.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(Ne.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,j9,Eu,Eu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const j9={};function _v(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function JN(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZN(t){t._nesting--,_v(t)}class vv{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pn;onMicrotaskEmpty=new pn;onStable=new pn;onError=new pn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function XN(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let eM=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=me({token:t,providedIn:"root",factory:()=>new t})}return t})();const Af=new W("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function iM(t,e,n){const r=t.get(Af);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function oM(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function Ev(t,e){for(const[n,r]of e)iM(t,r.animateFns)}(r,i)}function Ca(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;dn(i)?c=i:it(i)&&(u=!0,i=i[0]);const d=Mt(i);0===t&&null!==r?(oM(a,r,o,n),null==s?RN(e,r,d):xo(e,r,d,s||null,!0)):1===t&&null!==r?(oM(a,r,o,n),xo(e,r,d,s||null,!0)):2===t?cM(a,o,n,h=>{ju(e,d,u,h)}):3===t&&cM(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function rz(t,e,n,r,i,o,s){const a=r[7];a!==Mt(r)&&Ca(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];Rf(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function aM(t,e){e[10].changeDetectionScheduler?.notify(9),Rf(t,e,e[11],2,null,null)}function Tv(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Gu(t,e){if(Or(e))return;const n=e[11];n.destroyNode&&Rf(t,e,n,3,null,null),function Z9(t){let e=t[12];if(!e)return wv(t[1],t);for(;e;){let n=null;if(it(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)it(e)&&wv(e[1],e),e=e[3];null===e&&(e=t),it(e)&&wv(e[1],e),n=e&&e[4]}e=n}}(e)}function wv(t,e){if(Or(e))return;const n=oe(null);try{e[2]&=-129,e[2]|=256,e[24]&&su(e[24]),function tz(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ru)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];xe(4,a,c);try{c.call(a)}finally{xe(5,a,c)}}else{xe(4,i,o);try{o.call(i)}finally{xe(5,i,o)}}}}}(t,e),function ez(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&dn(e[3])){r!==e[3]&&Tv(r,e);const i=e[18];null!==i&&i.detachView(t)}Ny(e)}finally{oe(n)}}function cM(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Oo.add(t),iM(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function X9(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Oo.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Oo.delete(t),r(!1)},i)}function bv(t,e,n){return function uM(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(kr(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===$r.None||i===$r.Emulated)return null}return Tt(r,n)}(t,e.parent,n)}let hM=function dM(t,e,n){return 40&t.type?Tt(t,n):null};function Av(t,e,n,r){const i=bv(t,r,e),o=e[11],a=function lM(t,e,n){return hM(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)PN(o,i,n[c],a,!1);else PN(o,i,n,a,!1)}function Vo(t,e){if(null!==e){const n=e.type;if(3&n)return Tt(e,t);if(4&n)return Df(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Vo(t,r);{const i=t[e.index];return dn(i)?Df(-1,i):Mt(i)}}if(128&n)return Vo(t,e.next);if(32&n)return pv(e,t)()||Mt(t[e.index]);{const r=pM(t,e);return null!==r?Array.isArray(r)?r[0]:Vo(Vr(t[15]),r):Vo(t,e.next)}}return null}function pM(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Df(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Vo(r,i)}return e[7]}function Sv(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&bn(Mt(c),r),n.flags|=2),!lf(n))if(8&u)Sv(t,e,n.child,r,i,o,!1),Ca(e,t,a,i,c,n,o,r);else if(32&u){const d=pv(n,r);let h;for(;h=d();)Ca(e,t,a,i,h,n,o,r);Ca(e,t,a,i,c,n,o,r)}else 16&u?gM(t,e,r,n,i,o):Ca(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Rf(t,e,n,r,i,o){Sv(n,r,t.firstChild,e,i,o,!1)}function gM(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Ca(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];xu(r)&&(u.flags|=128),Sv(t,e,u,d,i,o,!0)}}function mM(t,e,n,r,i){const o=jt(),s=2&r;try{So(-1),s&&e.length>27&&$N(t,e,27,!1),xe(s?2:0,i,n),n(r,i)}finally{So(o),xe(s?3:1,i,n)}}function Pf(t,e,n){(function uz(t,e,n){const r=n.directiveStart,i=n.directiveEnd;kr(n)&&function M9(t,e,n){const r=Tt(e,t),i=function HN(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=lv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=hv(t,Tf(t,i,null,dv(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Xh(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=Mu(e,t,s,n);bn(c,e),null!==o&&fz(0,s-r,c,a,0,o),kn(a)&&(hn(n.index,e)[8]=Mu(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function lz(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function oq(){return se.lFrame.currentDirectiveIndex}();try{So(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];ny(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&dz(c,u)}}finally{So(-1),ny(s)}}(t,e,n)}function Aa(t,e,n=Tt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let _M=()=>null;function Dv(t,e,n,r,i,o){kf(t,e[1],e,n,r)?kr(t)&&function yM(t,e){const n=hn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function cz(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),function Rv(t,e,n,r,i,o){if(3&t.type){const s=Tt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}(t,e,n,r,i,o))}function dz(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Pv(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];jN(e,o.selectors,!1)&&(r??=[],kn(o)?r.unshift(o):r.push(o))}return r}function fz(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)$u(r,n,s[a],s[a+1])}function xf(t){let e=t;return YD()?function JD(){se.lFrame.isParent=!1}():(e=e.parent,Lr(e,!1)),e}function kf(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];$u(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)$u(e.data[c],n[c],r,i),a=!0;return a}function gz(t,e){const n=hn(e,t),r=n[1];!function mz(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),xe(18),Of(r,n,n[8]),xe(19,n[8])}function Of(t,e,n){oy(e);try{const r=t.viewQuery;null!==r&&Zy(1,r,n);const i=t.template;null!==i&&mM(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&lN(t,e),t.staticViewQueries&&Zy(2,t.viewQuery,n);const o=t.components;null!==o&&function _z(t,e){for(let n=0;n<e.length;n++)gz(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,sy()}}function Sa(t,e,n,r){const i=oe(null);try{const o=e.tView,c=Tf(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),Of(o,c,n),c}finally{oe(i)}}function Lo(t,e){return!e||null===e.firstChild||xu(t)}function zu(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Mt(o)),dn(o)&&yz(o,r);const s=n.type;if(8&s)zu(t,e,n.child,r);else if(32&s){const a=pv(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=pM(e,n);if(Array.isArray(a))r.push(...a);else{const c=Vr(e[15]);zu(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function yz(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&zu(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function EM(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let TM=[];const Tz={...qs,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ia(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},bz={...qs,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Vr(t.lView);for(;e&&!wM(e[1]);)e=Vr(e);e&&BD(e)},consumerOnSignalRead(){this.lView[24]=this}};function wM(t){return 2!==t.type}function bM(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function Vf(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function Az(t,e){const n=eR();try{Fh(!0),Mv(t,e);let r=0;for(;Vh(t);){if(100===r)throw new B(103,!1);r++,Mv(t,1)}}finally{Fh(n)}}(t,e)}finally{r.end?.()}}function CM(t,e,n,r){if(Or(e))return;const i=e[2];oy(e);let a=!0,c=null,u=null;wM(t)?(u=function vz(t){return t[24]??function Iz(t){const e=TM.pop()??Object.create(Tz);return e.lView=t,e}(t)}(e),c=Gs(u)):null===function l_(){return zt}()?(a=!1,u=function wz(t){const e=t[24]??Object.create(bz);return e.lView=t,e}(e),c=Gs(u)):e[24]&&(su(e[24]),e[24]=null);try{jD(e),function tR(t){return se.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&mM(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&Yh(e,g,null)}else{const g=t.preOrderHooks;null!==g&&Jh(e,g,0,null),Ty(e,0)}if(function Sz(t){for(let e=DP(t);null!==e;e=RP(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)BD(n[r])}}(e),bM(e),AM(e,0),null!==t.contentQueries&&lN(t,e),d){const g=t.contentCheckHooks;null!==g&&Yh(e,g)}else{const g=t.contentHooks;null!==g&&Jh(e,g,1),Ty(e,1)}!function Rz(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)So(~i);else{const o=i,s=n[++r],a=n[++r];iq(s,o);const c=e[o];xe(24,c),a(2,c),xe(25,c)}}}finally{So(-1)}}(t,e);const h=t.components;null!==h&&DM(e,h,0);const f=t.viewQuery;if(null!==f&&Zy(2,f,r),d){const g=t.viewCheckHooks;null!==g&&Yh(e,g)}else{const g=t.viewHooks;null!==g&&Jh(e,g,2),Ty(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}EM(e),e[2]&=-73}catch(d){throw ia(e),d}finally{null!==u&&(ou(u,c),a&&function Ez(t){t.lView[24]!==t&&(t.lView=null,TM.push(t))}(u)),sy()}}function AM(t,e){for(let n=DP(t);null!==n;n=RP(n))for(let r=10;r<n.length;r++)SM(n[r],e)}function Dz(t,e,n){xe(18);const r=hn(e,t);SM(r,n),xe(19,r[8])}function SM(t,e){Y_(t)&&Mv(t,e)}function Mv(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!_h(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)CM(r,t,r.template,t[8]);else if(8192&i){const a=oe(null);try{bM(t),AM(t,1);const c=r.components;null!==c&&DM(t,c,1),EM(t)}finally{oe(a)}}}function DM(t,e,n){for(let r=0;r<e.length;r++)Dz(t,e[r],n)}function Da(t,e){const n=eR()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=Vr(t);if(Ii(t)&&!r)return t;t=r}return null}function PM(t,e){const n=10+e;if(n<t.length)return t[n]}function Ra(t,e,n,r=!0){const i=e[1];if(function Pz(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],function ED(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&NM(s,e);const a=e[18];null!==a&&a.insertView(t),J_(e),e[2]|=128}(i,e,t,n),r){const s=Df(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function J9(t,e,n,r,i,o){r[0]=i,r[5]=e,Rf(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function xv(t,e){const n=Wu(t,e);return void 0!==n&&Gu(n[1],n),n}function Wu(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&Tv(i,r),e>0&&(t[n-1][4]=r[4]);const o=Sh(t,10+e);!function sM(t,e){aM(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function NM(t,e){const n=t[9],r=e[3];(it(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Ku{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return zu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Or(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(dn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Wu(e,r),Sh(n,r))}this._attachedToViewContainer=!1}Gu(this._lView[1],this._lView)}onDestroy(e){Lh(this._lView,e)}markForCheck(){Da(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){J_(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Vf(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Ii(this._lView),n=this._lView[16];null!==n&&!e&&Tv(n,this._lView),aM(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;const n=Ii(this._lView),r=this._lView[16];null!==r&&!n&&NM(r,this._lView),J_(this._lView)}}function Fo(t,e,n,r,i){let o=t.data[e];if(null===o)o=function Lv(t,e,n,r,i){const o=QD(),s=YD(),c=t.data[e]=function jz(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function zD(){return null!==se.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function Uz(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function rq(){return se.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function vu(){const t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Lr(o,!0),o}function YM(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;ju(e,r,!1),r=o,n++}}}let T5=class{},n0=class{};class w5{resolveComponentFactory(e){throw new B(917,!1)}}let zf=class{static NULL=new w5};class qv{}let nl=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function b5(){const t=O(),n=hn(ae().index,t);return(it(n)?n:t)[11]}()})(),C5=(()=>{class t{static \u0275prov=me({token:t,providedIn:"root",factory:()=>null})}return t})();const zv={};class Ma{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,zv,r);return i!==zv||n===zv?i:this.parentInjector.get(e,n,r)}}function Kf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=b_(i,a):2==o&&(r=b_(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function te(t,e=0){const n=O();return null===n?Pe(t,e):aP(ae(),n,le(t),e)}function N5(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function o0(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),a0(e,o)}}function s0(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),a0(e,s)}}function a0(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function c0(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||uv(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function k5(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Io(i.type)),s=new Ru(o,kn(i),te,null);t.blueprint[r]=s,n[r]=s,function O5(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function V5(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Hu(t,n,i.hostVars,ke),i)}function L5(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kn(e)&&(n[""]=t)}}function Wv(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=Fo(c,t,n,r,Qt(u,s));return o&&function i0(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function M5(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&kn(g)&&(c=!0,N5(t,n,f)),Sy(Xh(n,e),t,g.type)}!function F5(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Hu(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=ga(n.mergedAttrs,g.hostAttrs),k5(t,n,e,h,g),L5(h,g,i),null!==s&&s.has(g)){const[v,T]=s.get(g);n.directiveToIndex.set(g.type,[h,v+n.directiveStart,T+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function x5(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);s0(0,e,o,r),s0(1,e,o,r),c0(e,r,!0)}else o0(0,e,i,r),o0(1,e,i,r),c0(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function P5(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new B(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,Qt(u,a),i),h.mergedAttrs=ga(h.mergedAttrs,h.attrs),null!==h.attrs&&Kf(h,h.attrs,!1),null!==h.mergedAttrs&&Kf(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function Kv(t,e){(function QR(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),kD(e)&&t.queries.elementEnd(e)}function Ke(t,e,n){return n!==ke&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function sl(t,e,n){return function r(i){Da(kr(t)?hn(t.index,e):e,5);const s=e[8];let a=l0(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=l0(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function l0(t,e,n,r){const i=oe(null);try{return xe(6,e,n),!1!==n(r)}catch(o){return function Nv(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(Ti,null)}catch{r=null}r?.(e)}(t,o),!1}finally{xe(7,e,n),oe(i)}}function h0(t,e,n,r,i,o,s){const a=e.firstCreatePass?function qD(t){return t.cleanup??=[]}(e):null,c=function $D(t){return t[7]??=[]}(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function Jf(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);h0(t.index,a,e,i,o,h,!0)}const Ri=Symbol("BINDING");class f0 extends zf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Me(e);return new Yv(n,this.ngModule)}}class Yv extends n0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function J5(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&wf.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Z5(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function R9(t){return t.map(D9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){xe(22);const a=oe(null);try{const c=this.componentDef,u=function rW(t,e,n,r){const i=t?["ng-version","20.3.16"]:function P9(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!nr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[Ri].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[Ri].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=ln("function"==typeof d?d:d.type);c.push(f)}return lv(0,null,function iW(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function X5(t,e,n){let r=e instanceof Wn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new Ma(n,r):n}(c,i||this.ngModule,e),h=function eW(t){const e=t.get(qv,null);if(null===e)throw new B(407,!1);return{rendererFactory:e,sanitizer:t.get(C5,null),changeDetectionScheduler:t.get(Do,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function oz(t,e,n,r){const o=r.get(J6,!1)||n===$r.ShadowDom,s=t.selectRootElement(e,o);return function sz(t){_M(t)}(s),s}(f,r,c.encapsulation,d):function tW(t,e){const n=function nW(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return If(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(p0)||o?.some(N=>"function"!=typeof N&&N.bindings.some(p0)),v=Tf(null,u,null,512|dv(c),null,null,h,f,d,null,null);v[27]=g,oy(v);let T=null;try{const N=Wv(27,v,2,"#host",()=>u.directiveRegistry,!0,0);MN(f,g,N),bn(g,v),Pf(u,v,N),Xy(u,N,v),Kv(u,N),void 0!==n&&function sW(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(N,this.ngContentSelectors,n),T=hn(N.index,v),v[8]=T[8],Of(u,v,null)}catch(N){throw null!==T&&Ny(T),Ny(v),N}finally{xe(23),sy()}return new oW(this.componentType,v,!!_)}finally{oe(a)}}}function p0(t){const e=t[Ri].kind;return"input"===e||"twoWay"===e}class oW extends T5{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ra(n[1],27),this.location=ma(this._tNode,n),this.instance=hn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Ku(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;kf(r,i[1],i,e,n),this.previousInputValues.set(e,n),Da(hn(r.index,i),1)}get injector(){return new dt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let ka=class{};class x0 extends ka{injector;componentFactoryResolver=new f0(this);instance=null;constructor(e){super();const n=new To([...e.providers,{provide:ka,useValue:this},{provide:zf,useValue:this.componentFactoryResolver}],e.parent||$_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let DW=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=F_(0,n.type),i=r.length>0?function k0(t,e,n=null){return new x0({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=me({token:t,providedIn:"environment",factory:()=>new t(Pe(Wn))})}return t})();function O0(t){return Br(()=>{const e=L0(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(DW).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||$r.Emulated,styles:t.styles||ze,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&Zt("NgStandalone"),F0(n);const r=t.dependencies;return n.directiveDefs=Xf(r,V0),n.pipeDefs=Xf(r,tr),n.id=function xW(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function V0(t){return Me(t)||ln(t)}function Zf(t){return Br(()=>({type:t.type,bootstrap:t.bootstrap||ze,declarations:t.declarations||ze,imports:t.imports||ze,exports:t.exports||ze,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function RW(t,e){if(null==t)return cr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=wf.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function PW(t){if(null==t)return cr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function we(t){return Br(()=>{const e=L0(t);return F0(e),e})}function L0(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||cr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||ze,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:RW(t.inputs,e),outputs:PW(t.outputs),debugInfo:null}}function F0(t){t.features?.forEach(e=>e(t))}function Xf(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Oe(t){let e=function U0(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(kn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=lI(t.inputs),s.declaredInputs=lI(t.declaredInputs),s.outputs=lI(t.outputs);const a=i.hostBindings;a&&FW(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&VW(t,c),u&&LW(t,u),kW(t,i),h4(t.outputs,i.outputs),kn(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Oe&&(n=!1)}}e=Object.getPrototypeOf(e)}!function OW(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ga(i.hostAttrs,n=ga(n,i.hostAttrs))}}(r)}function kW(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function lI(t){return t===cr?{}:t===ze?[]:t}function VW(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function LW(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function FW(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Bo(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=Fo(e,h,4,s||null,a||null),null!=u){const g=Qt(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function q0(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ga(t.mergedAttrs,t.attrs);const d=t.tView=lv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Lr(t,!1);const c=W0(n,e,t,r);jh()&&Av(n,e,c,t),bn(c,e);const u=function RM(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}(c,e,c,t);e[r+27]=u,hv(e,u)}(f,t,e,n,r,i,o,c),null!=u&&Aa(t,f,d),f}let W0=function K0(t,e,n,r){return Iu(!0),e[11].createComment("")};const Ex=new W("");function EI(t){return!!t&&"function"==typeof t.then}function t7(t){return!!t&&"function"==typeof t.subscribe}const Tx=new W("");let wx=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=X(Tx,{optional:!0})??[];injector=X(Qn);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=MD(this.injector,i);if(EI(o))n.push(o);else if(t7(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const n7=new W("");let Ni=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=X(Ti);afterRenderManager=X(eM);zonelessEnabled=X(gR);rootEffectScheduler=X(vR);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ks;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=X(Ro);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(py(n=>!n))}constructor(){X(qu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=X(Wn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Qn.NULL){return this._injector.get(Ne).run(()=>{xe(10);const s=n instanceof n0;if(!this._injector.get(wx).done)throw new B(405,"");let c;c=s?n:this._injector.get(zf).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function i7(t){return t.isBoundToModule}(c)?void 0:this._injector.get(ka),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(Ex,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),cp(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),xe(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xe(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(gv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);const n=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(n),this.afterTick.next(),xe(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qv,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)xe(14),this.synchronizeOnce(),xe(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||Vh(i))&&(Vf(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>Vh(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;cp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(n7,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>cp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}typeof document<"u"&&document;class tK{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function MI(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function xI(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function Lx(t,e,n,r,i){if(xI(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function Fx(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class Ux{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function gr(t,e,n,r,i,o,s,a){Zt("NgControlFlow");const c=O(),u=de();return Bo(c,u,t,e,n,r,i,Qt(u.consts,o),256,s,a),kI}function kI(t,e,n,r,i,o,s,a){Zt("NgControlFlow");const c=O(),u=de();return Bo(c,u,t,e,n,r,i,Qt(u.consts,o),512,s,a),kI}function mr(t,e){Zt("NgControlFlow");const n=O(),r=Tn(),i=n[r]!==ke?n[r]:-1,o=-1!==i?_p(n,27+i):void 0;if(Ke(n,r,t)){const a=oe(null);try{if(void 0!==o&&xv(o,0),-1!==t){const c=27+t,u=_p(n,c),d=VI(n[1],c),h=null;Ra(u,Sa(n,d,e,{dehydratedView:h}),0,Lo(d,h))}}finally{oe(a)}}else if(void 0!==o){const a=PM(o,0);void 0!==a&&(a[8]=e)}}class rK{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function OI(t,e){return e}class oK{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function fl(t,e,n,r,i,o,s,a,c,u,d,h,f){Zt("NgControlFlow");const g=O(),_=de(),v=void 0!==c,T=O(),N=a?s.bind(T[15][8]):s,S=new oK(v,N);T[27+t]=S,Bo(g,_,t+1,e,n,r,i,Qt(_.consts,o),256),v&&Bo(g,_,t+2,c,u,d,h,Qt(_.consts,f),512)}class sK extends tK{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Ra(this.lContainer,n,e,Lo(this.templateTNode,r)),function aK(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function Q9(t,e){const n=t.get(Af);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Oo.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function cK(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function uK(t,e){return Wu(t,e)}(this.lContainer,e)}create(e,n){const i=Sa(this.hostLView,this.templateTNode,new rK(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){Gu(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function lK(t,e){return PM(t,e)}(this.lContainer,e)}}function pl(t){const e=oe(null),n=jt();try{const r=O(),i=r[1],o=r[n],s=n+1,a=_p(r,s);if(void 0===o.liveCollection){const u=VI(i,s);o.liveCollection=new sK(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function nK(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=MI(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=MI(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const v=n(o,u),T=n(s,f),N=n(o,d);if(Object.is(N,T)){const S=n(c,g);Object.is(S,v)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new Ux,i??=Fx(t,o,s,n),xI(t,r,o,N))t.updateValue(o,d),o++,s++;else if(i.has(N))r.set(v,t.detach(o)),s--;else{const S=t.create(o,e[o]);t.attach(o,S),o++,s++}}for(;o<=c;)Lx(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=MI(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new Ux,i??=Fx(t,o,s,n);const g=n(o,h);if(xI(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)Lx(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Tn(),d=0===c.length;if(Ke(r,u,d)){const h=n+2,f=_p(r,h);if(d){const g=VI(i,h),_=null;Ra(f,Sa(r,g,void 0,{dehydratedView:_}),0,Lo(g,_))}else i.firstUpdatePass&&function $f(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):YM(o,r);t[6]=i}(f),xv(f,0)}}}finally{oe(e)}}function _p(t,e){return t[e]}function VI(t,e){return ra(t,e)}function _r(t,e,n){const r=O();return Ke(r,Tn(),e)&&(de(),Dv(function lr(){const t=se.lFrame;return ra(t.tView,t.selectedIndex)}(),r,t,e,r[11],n)),_r}function LI(t,e,n,r,i){kf(e,t,n,i?"class":"style",r)}function be(t,e,n,r){const i=O(),o=i[1],s=t+27,a=o.firstCreatePass?Wv(s,i,2,e,Pv,function ty(){return se.bindingsEnabled}(),n,r):o.data[s];if(function Mf(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,Lr(t,!0);const c=2===t.type;return c?(MN(e[11],a,t),(0===function X4(){return se.lFrame.elementDepthCount}()||ta(t))&&bn(a,e),function eq(){se.lFrame.elementDepthCount++}()):bn(a,e),jh()&&(!c||!lf(t))&&Av(s,e,a,t),t}(a,i,t,e,jI),ta(a)){const c=i[1];Pf(c,i,a),Xy(c,a,i)}return null!=r&&Aa(i,a),be}function Ee(){const t=de(),n=xf(ae());return t.firstCreatePass&&Kv(t,n),function WD(t){return se.skipHydrationRootTNode===t}(n)&&function KD(){se.skipHydrationRootTNode=null}(),function GD(){se.lFrame.elementDepthCount--}(),null!=n.classesWithoutHost&&function Y3(t){return!!(8&t.flags)}(n)&&LI(t,n,O(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function J3(t){return!!(16&t.flags)}(n)&&LI(t,n,O(),n.stylesWithoutHost,!1),Ee}let jI=(t,e,n,r,i)=>(Iu(!0),If(e[11],r,function hq(){return se.lFrame.currentNamespace}()));function Qo(){return O()}const Ip="en-US";let Qx=Ip;function ot(t,e,n){const r=O(),i=de(),o=ae();return function zI(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=sl(r,e,o),function d0(t,e,n,r,i,o,s,a){const c=ta(t);let u=!1,d=null;if(!r&&c&&(d=function $5(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=Tt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function H5(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||h0(r?v=>r(Mt(v[t.index])):t.index,e,n,o,a,g,!1)}return u}(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=sl(r,e,o),Jf(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=sl(r,e,o),Jf(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),ot}function Xe(t=1){return function aq(t){return(se.lFrame.contextLView=function HD(t,e){for(;t>0;)e=e[14],t--;return e}(t,se.lFrame.contextLView))[8]}(t)}function bp(t,e){return t<<17|e<<2}function Yo(t){return t>>17&32767}function WI(t){return 2|t}function qa(t){return(131068&t)>>2}function KI(t,e){return-131069&t|e<<2}function QI(t){return 1|t}function gk(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Yo(i):qa(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];IQ(t[s],e)&&(a=!0,t[s+1]=r?QI(u):WI(u)),s=r?Yo(u):qa(u)}a&&(t[n+1]=r?WI(i):QI(i))}function IQ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pu(t,e)>=0}function Jo(t,e){return function wk(t,e,n,r){const i=O(),o=de(),s=Ur(2);o.firstUpdatePass&&function Ak(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[jt()],s=function Ck(t,e){return e>=t.expandoStartIndex}(t,n);(function Pk(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function NQ(t,e,n,r){const i=function ry(t){const e=se.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=El(n=YI(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=YI(i,t,e,n,r),null===o){let c=function MQ(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==qa(r))return t[Yo(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=YI(null,t,e,c[1],r),c=El(c,e.attrs,r),function xQ(t,e,n,r){t[Yo(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function kQ(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=El(r,t[o].hostAttrs,n);return El(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function yQ(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yo(s),c=qa(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||pu(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Yo(t[a+1]);t[r+1]=bp(f,a),0!==f&&(t[f+1]=KI(t[f+1],r)),t[a+1]=function mQ(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=bp(a,0),0!==a&&(t[a+1]=KI(t[a+1],r)),a=r;else t[r+1]=bp(c,0),0===a?a=r:t[c+1]=KI(t[c+1],r),c=r;u&&(t[r+1]=WI(t[r+1])),gk(t,d,r,!0),gk(t,d,r,!1),function vQ(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pu(o,e)>=0&&(n[r+1]=QI(n[r+1]))}(e,d,t,r,o),s=bp(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ke&&Ke(i,s,e)&&function Dk(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function _Q(t){return!(1&~t)}(u)?Rk(c,e,n,i,qa(u),s):void 0;Cp(d)||(Cp(o)||function gQ(t){return!(2&~t)}(u)&&(o=Rk(c,null,n,i,a,s)),function iz(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:ko.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ko.Important),t.setStyle(n,r,i,o))}}(r,s,na(jt(),n),i,o))}(o,o.data[jt()],i,i[11],t,i[s+1]=function FQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=In(function Si(t){return t instanceof yN?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,s)}(t,e,null,!0),Jo}function YI(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=El(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function El(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Rh(t,s,!!n||e[++o]))}return void 0===t?null:t}function Rk(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===ke&&(f=h?ze:void 0);let g=h?O_(f,r):d===r?f:void 0;if(u&&!Cp(g)&&(g=O_(c,r)),Cp(g)&&(a=g,s))return a;const _=t[i+1];i=s?Yo(_):qa(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=O_(c,r))}return a}function Cp(t){return void 0!==t}function st(t,e=""){const n=O(),r=de(),i=t+27,o=r.firstCreatePass?Fo(r,i,1,e,null):r.data[i],s=Nk(r,n,o,e,t);n[i]=s,jh()&&Av(r,n,s,o),Lr(o,!1)}let Nk=(t,e,n,r,i)=>(Iu(!0),function av(t,e){return t.createText(e)}(e[11],r));function kk(t,e,n,r,i,o=""){const a=function jo(t,e,n,r){const i=Ke(t,e,n);return Ke(t,e+1,r)||i}(t,function Fr(){return se.lFrame.bindingIndex}(),n,i);return Ur(2),a?e+ce(n)+r+ce(i)+o:ke}function za(t){return Wa("",t),za}function Wa(t,e,n){const r=O(),i=function xk(t,e,n,r=""){return Ke(t,Tn(),n)?e+ce(n)+r:ke}(r,t,e,n);return i!==ke&&zr(r,jt(),i),Wa}function JI(t,e,n,r,i){const o=O(),s=kk(o,t,e,n,r,i);return s!==ke&&zr(o,jt(),s),JI}function zr(t,e,n){const r=na(e,t);!function DN(t,e,n){t.setValue(e,n)}(t[11],r,n)}function ZI(t,e,n,r,i){if(t=le(t),Array.isArray(t))for(let o=0;o<t.length;o++)ZI(t[o],e,n,r,i);else{const o=de(),s=O(),a=ae();let c=Nr(t)?t:le(t.provide);const u=ND(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Nr(t)||!t.multi){const g=new Ru(u,i,te,null),_=eE(c,e,i?d:d+f,h);-1===_?(Sy(Xh(a,s),o,c),XI(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=eE(c,e,d+f,h),_=eE(c,e,d,d+f),T=_>=0&&n[_];if(i&&!T||!i&&!(g>=0&&n[g])){Sy(Xh(a,s),o,c);const N=function rY(t,e,n,r,i){const s=new Ru(t,n,te,null);return s.multi=[],s.index=e,s.componentProviders=0,Zk(s,i,r&&!n),s}(i?nY:tY,n.length,i,r,u);!i&&T&&(n[_].providerFactory=N),XI(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(N),s.push(N)}else XI(o,t,g>-1?g:_,Zk(n[i?_:g],u,!i&&r));!i&&r&&T&&n[_].componentProviders++}}}function XI(t,e,n,r){const i=Nr(e),o=function RD(t){return!!t.useClass}(e);if(i||o){const c=(o?le(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function Zk(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function eE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tY(t,e,n,r,i){return tE(this.multi,[])}function nY(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Mu(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),tE(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],tE(o,s);return s}function tE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function et(t,e=[]){return n=>{n.providersResolver=(r,i)=>function eY(t,e,n){const r=de();if(r.firstCreatePass){const i=kn(t);ZI(n,r.data,r.blueprint,i,!0),ZI(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let eJ=(()=>{class t{zone=X(Ne);changeDetectionScheduler=X(Do);applicationRef=X(Ni);applicationErrorHandler=X(Ti);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sE({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ne({...aE(),scheduleInRootZone:n}),[{provide:Ne,useFactory:t},{provide:Eo,multi:!0,useFactory:()=>{const r=X(eJ,{optional:!0});return()=>r.initialize()}},{provide:Eo,multi:!0,useFactory:()=>{const r=X(nJ);return()=>{r.initialize()}}},!0===e?{provide:mR,useValue:!0}:[],{provide:_R,useValue:n??KN},{provide:Ti,useFactory:()=>{const r=X(Ne),i=X(Wn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(sa),o.handleError(s))})}}}]}function aE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let nJ=(()=>{class t{subscription=new Gn;initialized=!1;zone=X(Ne);pendingTasks=X(Ro);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uE=(()=>{class t{applicationErrorHandler=X(Ti);appRef=X(Ni);taskService=X(Ro);ngZone=X(Ne);zonelessEnabled=X(gR);tracing=X(qu,{optional:!0});disableScheduling=X(mR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Gn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(X(_R,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof vv||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?YN:QN;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bO=new W("",{providedIn:"root",factory:()=>X(bO,{optional:!0,skipSelf:!0})||function rJ(){return typeof $localize<"u"&&$localize.locale||Ip}()});new W("").__NG_ELEMENT_ID__=t=>{const e=ae();if(null===e)throw new B(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new B(204,!1)};const Fp=new W(""),JZ=new W("");function Sl(t){return!t.moduleRef}let Za=null;let E1=(()=>class t{static __NG_ELEMENT_ID__=rX})();function rX(t){return function iX(t,e,n){if(kr(t)&&!n){const r=hn(t.index,e);return new Ku(r,r)}return 175&t.type?new Ku(e[15],e):null}(ae(),O(),!(16&~t))}function fX(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;xe(8);try{const o=i?.injector??function nX(t=[]){if(Za)return Za;const e=function y1(t=[],e){return Qn.create({name:e,providers:[{provide:B_,useValue:"platform"},{provide:Fp,useValue:new Set([()=>Za=null])},...t]})}(t);return Za=e,function r7(){!function K$(t){XS=t}(()=>{throw new B(600,"")})}(),function v1(t){const e=t.get(LP,null);MD(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[sE({}),{provide:Do,useExisting:uE},hR,...n||[]];return function p1(t){const e=Sl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ne);return n.run(()=>{Sl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Ti);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Sl(t)){const o=()=>e.destroy(),s=t.platformInjector.get(Fp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Fp);s.add(o),t.moduleRef.onDestroy(()=>{cp(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function XZ(t,e,n){try{const r=n();return EI(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(Ro),s=o.add(),a=e.get(wx);return a.runInitializers(),a.donePromise.then(()=>{if(function IK(t){"string"==typeof t&&(Qx=t.toLowerCase().replace(/_/g,"-"))}(e.get(bO,Ip)||Ip),!e.get(JZ,!0))return Sl(t)?e.get(Ni):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Sl(t)){const d=e.get(Ni);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new x0({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{xe(9)}}class q1{_doc;constructor(e){this._doc=e}manager}let CE=(()=>{class t extends q1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Pe(Ei))};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();const AE=new W("");let G1=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof CE));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof CE);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Pe(AE),Pe(Ne))};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();const SE="ng-app-id";function z1(t){for(const e of t)e.remove()}function W1(t,e){const n=e.createElement("style");return n.textContent=t,n}function DE(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let K1=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function jX(t,e,n,r){const i=t.head?.querySelectorAll(`style[${SE}="${e}"],link[${SE}="${e}"]`);if(i)for(const o of i)o.removeAttribute(SE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,W1);r?.forEach(i=>this.addUsage(i,this.external,DE))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(z1(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])z1(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,W1(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,DE(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Pe(Ei),Pe(Ou),Pe(UP,8),Pe(FP))};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();const RE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},PE=/%COMP%/g,zX=new W("",{providedIn:"root",factory:()=>!0});function Y1(t,e){return e.map(n=>n.replace(PE,t))}let J1=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new NE(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof X1?i.applyToHost(n):i instanceof ME&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case $r.Emulated:o=new X1(c,u,r,this.appId,d,s,a,h,f);break;case $r.ShadowDom:return new YX(c,u,n,r,s,a,this.nonce,h,f);default:o=new ME(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Pe(G1),Pe(K1),Pe(Ou),Pe(zX),Pe(Ei),Pe(Ne),Pe(UP),Pe(qu,8))};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();class NE{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(RE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Z1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Z1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=RE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=RE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ko.DashCase|ko.Important)?e.style.setProperty(n,r,i&ko.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ko.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=Tu().getGlobalEventTarget(this.doc,e)))throw new B(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function Z1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class YX extends NE{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=Y1(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=DE(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ME extends NE{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Y1(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Oo.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class X1 extends ME{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function WX(t){return"_ngcontent-%COMP%".replace(PE,t)}(d),this.hostAttr=function KX(t){return"_nghost-%COMP%".replace(PE,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class xE extends vq{supportsDOMEvents=!0;static makeCurrent(){!function yq(t){IR??=t}(new xE)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function ZX(){return Rl=Rl||document.head.querySelector("base"),Rl?Rl.getAttribute("href"):null}();return null==n?null:function XX(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Rl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Tq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Rl=null,tee=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();const eV=["alt","control","meta","shift"],nee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ree={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function tV(t){return{appProviders:[...dee,...t?.providers??[]],platformProviders:uee}}const uee=[{provide:FP,useValue:"browser"},{provide:LP,useValue:function see(){xE.makeCurrent()},multi:!0},{provide:Ei,useFactory:function cee(){return function H6(t){ky=t}(document),document}}],dee=[{provide:B_,useValue:"root"},{provide:sa,useFactory:function aee(){return new sa}},{provide:AE,useClass:CE,multi:!0,deps:[Ei]},{provide:AE,useClass:(()=>{class t extends q1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tu().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),eV.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=nee[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),eV.forEach(s=>{s!==i&&(0,ree[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(Pe(Ei))};static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Ei]},J1,K1,G1,{provide:qv,useExisting:J1},{provide:class wq{},useClass:tee},[]];function xt(t){return function gee(t){const e=oe(null);try{return t()}finally{oe(e)}}(t)}function Xt(t,e){return function G$(t,e){const n=Object.create(z$);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(iu(n),gh(n),n.value===pi)throw n.error;return n.value};return r[Ut]=n,r}(t,e?.equal)}function qp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Oi(t){return this instanceof Oi?(this.v=t,this):new Oi(t)}function pV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function UE(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const gV=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function mV(t){return Pt(t?.then)}function _V(t){return Pt(t[T_])}function yV(t){return Symbol.asyncIterator&&Pt(t?.[Symbol.asyncIterator])}function vV(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const IV=function ute(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function EV(t){return Pt(t?.[IV])}function TV(t){return function fV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(v){return new Promise(function(T,N){o.push([g,v,T,N])>1||c(g,v)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof Oi?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(v){f(o[0][3],v)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Oi(n.read());if(i)return yield Oi(void 0);yield yield Oi(r)}}finally{n.releaseLock()}})}function wV(t){return Pt(t?.getReader)}function Gp(t){if(t instanceof Nn)return t;if(null!=t){if(_V(t))return function lte(t){return new Nn(e=>{const n=t[T_]();if(Pt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(gV(t))return function dte(t){return new Nn(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(mV(t))return function hte(t){return new Nn(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,aD)})}(t);if(yV(t))return bV(t);if(EV(t))return function fte(t){return new Nn(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(wV(t))return function pte(t){return bV(TV(t))}(t)}throw vV(t)}function bV(t){return new Nn(e=>{(function gte(t,e){var n,r,i,o;return function dV(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=pV(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function rs(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function CV(t,e=0){return hy((n,r)=>{n.subscribe(fy(r,i=>rs(r,t,()=>r.next(i),e),()=>rs(r,t,()=>r.complete(),e),i=>rs(r,t,()=>r.error(i),e)))})}function AV(t,e=0){return hy((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function SV(t,e){if(!t)throw new Error("Iterable cannot be null");return new Nn(n=>{rs(n,e,()=>{const r=t[Symbol.asyncIterator]();rs(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}const{isArray:wte}=Array,{getPrototypeOf:bte,prototype:Cte,keys:Ate}=Object;const{isArray:Nte}=Array;function kte(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ote(...t){const e=function Pte(t){return Pt(function BE(t){return t[t.length-1]}(t))?t.pop():void 0}(t),{args:n,keys:r}=function Ste(t){if(1===t.length){const e=t[0];if(wte(e))return{args:e,keys:null};if(function Dte(t){return t&&"object"==typeof t&&bte(t)===Cte}(e)){const n=Ate(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t),i=new Nn(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;Gp(n[d]).subscribe(fy(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?kte(r,a):a),o.complete())}))}});return e?i.pipe(function xte(t){return py(e=>function Mte(t,e){return Nte(e)?t(...e):t(e)}(t,e))}(e)):i}let DV=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(te(nl),te(Hr))};static \u0275dir=we({type:t})}return t})(),is=(()=>{class t extends DV{static \u0275fac=(()=>{let n;return function(i){return(n||(n=function Jt(t){return Br(()=>{const e=t.prototype.constructor,n=e[yo]||Dy(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[yo]||Dy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(t)))(i||t)}})();static \u0275dir=we({type:t,features:[Oe]})}return t})();const yr=new W(""),Lte={provide:yr,useExisting:Ge(()=>zp),multi:!0},Ute=new W("");let zp=(()=>{class t extends DV{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Fte(){const t=Tu()?Tu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(te(nl),te(Hr),te(Ute,8))};static \u0275dir=we({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ot("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[et([Lte]),Oe]})}return t})();const en=new W(""),Vi=new W("");function FV(t){return null!=t}function UV(t){return EI(t)?function Tte(t,e){return e?function Ete(t,e){if(null!=t){if(_V(t))return function mte(t,e){return Gp(t).pipe(AV(e),CV(e))}(t,e);if(gV(t))return function yte(t,e){return new Nn(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(mV(t))return function _te(t,e){return Gp(t).pipe(AV(e),CV(e))}(t,e);if(yV(t))return SV(t,e);if(EV(t))return function vte(t,e){return new Nn(n=>{let r;return rs(n,e,()=>{r=t[IV](),rs(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>Pt(r?.return)&&r.return()})}(t,e);if(wV(t))return function Ite(t,e){return SV(TV(t),e)}(t,e)}throw vV(t)}(t,e):Gp(t)}(t):t}function jV(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function BV(t,e){return e.map(n=>n(t))}function HV(t){return t.map(e=>function Bte(t){return!t.validate}(e)?e:n=>e.validate(n))}function qE(t){return null!=t?function $V(t){if(!t)return null;const e=t.filter(FV);return 0==e.length?null:function(n){return jV(BV(n,e))}}(HV(t)):null}function GE(t){return null!=t?function qV(t){if(!t)return null;const e=t.filter(FV);return 0==e.length?null:function(n){return Ote(BV(n,e).map(UV)).pipe(py(jV))}}(HV(t)):null}function GV(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zE(t){return t?Array.isArray(t)?t:[t]:[]}function Kp(t,e){return Array.isArray(t)?t.includes(e):t===e}function KV(t,e){const n=zE(e);return zE(t).forEach(i=>{Kp(n,i)||n.push(i)}),n}function QV(t,e){return zE(e).filter(n=>!Kp(t,n))}class YV{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class gn extends YV{name;get formDirective(){return null}get path(){return null}}class Li extends YV{_parent=null;name=null;valueAccessor=null}class JV{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let ZV=(()=>{class t extends JV{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(te(Li,2))};static \u0275dir=we({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Jo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Oe]})}return t})();const Pl="VALID",Yp="INVALID",Xa="PENDING",Nl="DISABLED";class ec{}class eL extends ec{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class QE extends ec{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class YE extends ec{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Jp extends ec{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class JE extends ec{source;constructor(e){super(),this.source=e}}function Zp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class eT{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xt(this.statusReactive)}set status(e){xt(()=>this.statusReactive.set(e))}_status=Xt(()=>this.statusReactive());statusReactive=wt(void 0);get valid(){return this.status===Pl}get invalid(){return this.status===Yp}get pending(){return this.status==Xa}get disabled(){return this.status===Nl}get enabled(){return this.status!==Nl}errors;get pristine(){return xt(this.pristineReactive)}set pristine(e){xt(()=>this.pristineReactive.set(e))}_pristine=Xt(()=>this.pristineReactive());pristineReactive=wt(!0);get dirty(){return!this.pristine}get touched(){return xt(this.touchedReactive)}set touched(e){xt(()=>this.touchedReactive.set(e))}_touched=Xt(()=>this.touchedReactive());touchedReactive=wt(!1);get untouched(){return!this.touched}_events=new Ks;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QV(e,this._rawAsyncValidators))}hasValidator(e){return Kp(this._rawValidators,e)}hasAsyncValidator(e){return Kp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new YE(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new YE(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new QE(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new QE(!0,r))}markAsPending(e={}){this.status=Xa;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Jp(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Nl,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new eL(this.value,r)),this._events.next(new Jp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Pl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pl||this.status===Xa)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new eL(this.value,n)),this._events.next(new Jp(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nl:Pl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Xa,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=UV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Jp(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?Nl:this.errors?Yp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xa)?Xa:this._anyControlsHaveStatus(Yp)?Yp:Pl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new QE(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new YE(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Qte(t){return Array.isArray(t)?qE(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Yte(t){return Array.isArray(t)?GE(t):t||null}(this._rawAsyncValidators)}}const tc=new W("",{providedIn:"root",factory:()=>Xp}),Xp="always";function Ml(t,e,n=Xp){(function nT(t,e){const n=function zV(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(GV(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function WV(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(GV(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();ng(e._rawValidators,i),ng(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Xte(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&iL(t,e)})}(t,e),function tne(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function ene(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&iL(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Zte(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ng(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function iL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function aL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function cL(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const uL=class extends eT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function ZE(t){return(Zp(t)?t.validators:t)||null}(n),function XE(t,e){return(Zp(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=cL(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new JE(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){cL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},dne={provide:Li,useExisting:Ge(()=>sT)},lL=Promise.resolve();let sT=(()=>{class t extends Li{_changeDetectorRef;callSetDisabledState;control=new uL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new pn;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function oT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===zp?n=o:function ine(t){return Object.getPrototypeOf(t.constructor)===is}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function iT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ml(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){lL.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function wE(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);lL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function eg(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(te(gn,9),te(en,10),te(Vi,10),te(yr,10),te(E1,8),te(tc,8))};static \u0275dir=we({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[et([dne]),Oe,fa]})}return t})(),Vne=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zf({type:t});static \u0275inj=au({})}return t})(),Fne=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:tc,useValue:n.callSetDisabledState??Xp}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zf({type:t});static \u0275inj=au({imports:[Vne]})}return t})();const Une=["postup","kroky","p\u0159\xedprava"],lT=/^[\-\u2013\u2022*]\s*/,jne=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,Bne=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,Hne=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function ug(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function $ne(t){const e=RL(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=RL(e),o=function qne(t){return t.findIndex(e=>Une.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:Gne(s,n),steps:Jne(a),warnings:n}}function RL(t){return t.findIndex(e=>e.length>0)}function Gne(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n){if(zne(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=Kne(o);void 0===s.amount&&Yne(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}i&&r.push(i),i={title:Wne(o),items:[]}}return i&&r.push(i),r.filter(o=>o.items.length>0)}function zne(t){return lT.test(t)}function Wne(t){return t.replace(/:$/,"").trim()}function Kne(t){const e=t.replace(lT,"").trim(),[n,r]=e.split(/\s+-\s+/,2),i=n.match(/\(([^)]+)\)\s*$/),o=i?n.slice(0,n.length-i[0].length).trim():n.trim(),{amount:s,unit:a,name:c}=function Qne(t){let e=t.trim();const r=e.match(jne)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(Bne)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(o),u=[];return i&&u.push(i[1].trim()),r&&u.push(r.trim()),{raw:e,amount:s,unit:a,name:c,note:u.length>0?u.join("; "):void 0}}function Yne(t){const e=t.toLowerCase();return Hne.some(n=>e.startsWith(n))}function Jne(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(lT,"").trim()).filter(Boolean)}const PL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},NL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new nre;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lg=function(t){return function(t){const e=PL(t);return NL.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Ol=function(t){try{return NL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const dg=()=>{try{return function xL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ol(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},kL=t=>{var e,n;return null===(n=null===(e=dg())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},OL=()=>{var t;return null===(t=dg())||void 0===t?void 0:t.config},VL=t=>{var e;return null===(e=dg())||void 0===e?void 0:e[`_${t}`]};class LL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function nc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function FL(t){return hT.apply(this,arguments)}function hT(){return(hT=I(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const Vl={};let UL=!1;function jL(t,e){if(typeof window>"u"||typeof document>"u"||!nc(window.location.host)||Vl[t]===e||Vl[t]||UL)return;function n(f){return`__firebase__banner__${f}`}Vl[t]=e;const r="__firebase__banner",o=function lre(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function dre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),T=document.getElementById(v)||document.createElement("a"),N=n("preprendIcon"),S=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const L=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(L),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(T,v);const G=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{UL=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(S,N),L.append(S,_,T,G),document.body.appendChild(L)}o?(_.innerText="Preview backend disconnected.",S.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(S.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function _t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function HL(){return!function BL(){var t;const e=null===(t=dg())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function Ire(t,e){return t.replace(Ere,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Wr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Ere=/\{\$([^}]+)}/g;function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(zL(o)&&zL(s)){if(!Kr(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zL(t){return null!==t&&"object"==typeof t}function Fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class bre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Cre(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=fT),void 0===i.error&&(i.error=fT),void 0===i.complete&&(i.complete=fT);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fT(){}function bt(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const as="[DEFAULT]";class Nre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function xre(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===as?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class kre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const gT=[];var _e=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(_e||{});const WL={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Ore=_e.INFO,Vre={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Lre=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Vre[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class mT{constructor(e){this.name=e,this._logLevel=Ore,this._logHandler=Lre,this._userLogHandler=null,gT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?WL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}let KL,QL;const YL=new WeakMap,_T=new WeakMap,JL=new WeakMap,yT=new WeakMap,vT=new WeakMap;let IT={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return _T.get(t);if("objectStoreNames"===e)return t.objectStoreNames||JL.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Gre(t){return"function"==typeof t?function qre(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jre(){return QL||(QL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(ET(this),e),Fi(YL.get(this))}:function(...e){return Fi(t.apply(ET(this),e))}:function(e,...n){const r=t.call(ET(this),e,...n);return JL.set(r,e.sort?e.sort():[e]),Fi(r)}}(t):(t instanceof IDBTransaction&&function Hre(t){if(_T.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});_T.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Ure(){return KL||(KL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,IT):t)}function Fi(t){if(t instanceof IDBRequest)return function Bre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Fi(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&YL.set(n,t)}).catch(()=>{}),vT.set(e,t),e}(t);if(yT.has(t))return yT.get(t);const e=Gre(t);return e!==t&&(yT.set(t,e),vT.set(e,t)),e}const ET=t=>vT.get(t),Kre=["get","getKey","getAll","getAllKeys","count"],Qre=["put","add","delete","clear"],TT=new Map;function ZL(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(TT.get(e))return TT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Qre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Kre.includes(n))return;const o=function(){var s=I(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return TT.set(e,o),o}!function $re(t){IT=t(IT)}(t=>({...t,get:(e,n,r)=>ZL(e,n)||t.get(e,n,r),has:(e,n)=>!!ZL(e,n)||t.has(e,n)}));class tie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function nie(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const fg="@firebase/app",Qr=new mT("@firebase/app"),rie="@firebase/app-compat",iie="@firebase/analytics-compat",oie="@firebase/analytics",sie="@firebase/app-check-compat",aie="@firebase/app-check",cie="@firebase/auth",uie="@firebase/auth-compat",lie="@firebase/database",die="@firebase/data-connect",hie="@firebase/database-compat",fie="@firebase/functions",pie="@firebase/functions-compat",gie="@firebase/installations",mie="@firebase/installations-compat",_ie="@firebase/messaging",yie="@firebase/messaging-compat",vie="@firebase/performance",Iie="@firebase/performance-compat",Eie="@firebase/remote-config",Tie="@firebase/remote-config-compat",wie="@firebase/storage",bie="@firebase/storage-compat",Cie="@firebase/firestore",Aie="@firebase/ai",Sie="@firebase/firestore-compat",Die="firebase",pg="[DEFAULT]",Pie={[fg]:"fire-core",[rie]:"fire-core-compat",[oie]:"fire-analytics",[iie]:"fire-analytics-compat",[aie]:"fire-app-check",[sie]:"fire-app-check-compat",[cie]:"fire-auth",[uie]:"fire-auth-compat",[lie]:"fire-rtdb",[die]:"fire-data-connect",[hie]:"fire-rtdb-compat",[fie]:"fire-fn",[pie]:"fire-fn-compat",[gie]:"fire-iid",[mie]:"fire-iid-compat",[_ie]:"fire-fcm",[yie]:"fire-fcm-compat",[vie]:"fire-perf",[Iie]:"fire-perf-compat",[Eie]:"fire-rc",[Tie]:"fire-rc-compat",[wie]:"fire-gcs",[bie]:"fire-gcs-compat",[Cie]:"fire-fst",[Sie]:"fire-fst-compat",[Aie]:"fire-vertex","fire-js":"fire-js",[Die]:"fire-js-all"},cs=new Map,Ul=new Map,jl=new Map;function XL(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rc(t){const e=t.name;if(jl.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;jl.set(e,t);for(const n of cs.values())XL(n,t);for(const n of Ul.values())XL(n,t);return!0}function gg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rr(t){return null!=t&&void 0!==t.settings}const Zn=new Ll("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const ic="11.10.0";function nF(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:pg,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw Zn.create("bad-app-name",{appName:String(i)});if(n||(n=OL()),!n)throw Zn.create("no-options");const o=cs.get(i);if(o){if(Kr(n,o.options)&&Kr(r,o.config))return o;throw Zn.create("duplicate-app",{appName:i})}const s=new kre(i);for(const c of jl.values())s.addComponent(c);const a=new eF(n,r,s);return cs.set(i,a),a}function rF(t=pg){const e=cs.get(t);if(!e&&t===pg&&OL())return nF();if(!e)throw Zn.create("no-app",{appName:t});return e}function Yr(t,e,n){var r;let i=null!==(r=Pie[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Qr.warn(a.join(" "))}rc(new ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Bl="firebase-heartbeat-store";let CT=null;function iF(){return CT||(CT=function Wre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Fi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Fi(s.result),c.oldVersion,c.newVersion,Fi(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Bl)}catch(n){console.warn(n)}}}).catch(t=>{throw Zn.create("idb-open",{originalErrorMessage:t.message})})),CT}function AT(){return(AT=I(function*(t){try{const n=(yield iF()).transaction(Bl),r=yield n.objectStore(Bl).get(sF(t));return yield n.done,r}catch(e){if(e instanceof Wr)Qr.warn(e.message);else{const n=Zn.create("idb-get",{originalErrorMessage:e?.message});Qr.warn(n.message)}}})).apply(this,arguments)}function oF(t,e){return ST.apply(this,arguments)}function ST(){return(ST=I(function*(t,e){try{const r=(yield iF()).transaction(Bl,"readwrite");yield r.objectStore(Bl).put(e,sF(t)),yield r.done}catch(n){if(n instanceof Wr)Qr.warn(n.message);else{const r=Zn.create("idb-set",{originalErrorMessage:n?.message});Qr.warn(r.message)}}})).apply(this,arguments)}function sF(t){return`${t.name}!${t.options.appId}`}class jie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aF();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function $ie(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){Qr.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=aF(),{heartbeatsToSend:i,unsentEntries:o}=function Bie(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),cF(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=lg(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Qr.warn(r),""}})()}}function aF(){return(new Date).toISOString().substring(0,10)}class Hie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function qL(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function yre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Lie(t){return AT.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return oF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return oF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function cF(t){return lg(JSON.stringify({version:2,heartbeats:t})).length}!function qie(t){rc(new ss("platform-logger",e=>new tie(e),"PRIVATE")),rc(new ss("heartbeat",e=>new jie(e),"PRIVATE")),Yr(fg,"0.13.2",t),Yr(fg,"0.13.2","esm2017"),Yr("fire-js","")}(""),Yr("firebase","11.10.0","app");var Ui,dF,uF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lF={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,w){w||(w=0);var A=Array(16);if("string"==typeof E)for(var D=0;16>D;++D)A[D]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(D=0;16>D;++D)A[D]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(w=C.g[1])&((D=C.g[2])^x))+A[0]+3614090360&4294967295;b=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=(w=(D=(x=(E=w+(b<<7&4294967295|b>>>25))+((b=x+(D^E&(w^D))+A[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=D+(w^x&(E^w))+A[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^D&(x^E))+A[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(D^x))+A[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(D^E&(w^D))+A[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=D+(w^x&(E^w))+A[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^D&(x^E))+A[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(D^x))+A[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(D^E&(w^D))+A[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=D+(w^x&(E^w))+A[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^D&(x^E))+A[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(D^x))+A[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(D^E&(w^D))+A[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=D+(w^x&(E^w))+A[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^D&(x^E))+A[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(D^x&(w^D))+A[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^D&(E^w))+A[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=D+(E^w&(x^E))+A[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(D^x))+A[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(D^x&(w^D))+A[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^D&(E^w))+A[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=D+(E^w&(x^E))+A[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(D^x))+A[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(D^x&(w^D))+A[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^D&(E^w))+A[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=D+(E^w&(x^E))+A[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(D^x))+A[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(D^x&(w^D))+A[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^D&(E^w))+A[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=D+(E^w&(x^E))+A[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(D^x))+A[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(w^D^x)+A[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^D)+A[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=D+(x^E^w)+A[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=w+(D^x^E)+A[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^D^x)+A[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^D)+A[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=D+(x^E^w)+A[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=w+(D^x^E)+A[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^D^x)+A[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^D)+A[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=D+(x^E^w)+A[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=w+(D^x^E)+A[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^D^x)+A[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^D)+A[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=D+(x^E^w)+A[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=w+(D^x^E)+A[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(D^(w|~x))+A[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~D))+A[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=D+(E^(x|~w))+A[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(D|~E))+A[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(D^(w|~x))+A[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~D))+A[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=D+(E^(x|~w))+A[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(D|~E))+A[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(D^(w|~x))+A[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~D))+A[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=D+(E^(x|~w))+A[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(D|~E))+A[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=w+((b=E+(D^(w|~x))+A[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~D))+A[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((D=x+((b=D+(E^(x|~w))+A[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(D+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var w=[],A=!0,D=C.length-1;0<=D;D--){var x=0|C[D];A&&x==E||(w[D]=x,A=!1)}this.g=w}(function e(C,E){function w(){}w.prototype=E.prototype,C.D=E.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(A,D,x){for(var b=Array(arguments.length-2),di=2;di<arguments.length;di++)b[di-2]=arguments[di];return E.prototype[D].apply(A,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var w=E-this.blockSize,A=this.B,D=this.h,x=0;x<E;){if(0==D)for(;x<=w;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(A[D++]=C.charCodeAt(x++),D==this.blockSize){i(this,A),D=0;break}}else for(;x<E;)if(A[D++]=C[x++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var w=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&w,w/=256;for(this.u(C),C=Array(16),E=w=0;4>E;++E)for(var A=0;32>A;A+=8)C[w++]=this.g[E]>>>A&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return T(u(-C));for(var E=[],w=1,A=0;C>=w;A++)E[A]=C/w|0,w*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function v(C){return-1==C.h}function T(C){for(var E=C.g.length,w=[],A=0;A<E;A++)w[A]=~C.g[A];return new s(w,~C.h).add(f)}function N(C,E){return C.add(T(E))}function S(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function L(C,E){this.g=C,this.h=E}function G(C,E){if(_(E))throw Error("division by zero");if(_(C))return new L(h,h);if(v(C))return E=G(T(C),E),new L(T(E.g),T(E.h));if(v(E))return E=G(C,T(E)),new L(T(E.g),E.h);if(30<C.g.length){if(v(C)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var w=f,A=E;0>=A.l(C);)w=K(w),A=K(A);var D=Z(w,1),x=Z(A,1);for(A=Z(A,2),w=Z(w,2);!_(A);){var b=x.add(A);0>=b.l(C)&&(D=D.add(w),x=b),A=Z(A,1),w=Z(w,1)}return E=N(C,D.j(E)),new L(D,E)}for(D=h;0<=C.l(E);){for(w=Math.max(1,Math.floor(C.m()/E.m())),A=48>=(A=Math.ceil(Math.log(w)/Math.LN2))?1:Math.pow(2,A-48),b=(x=u(w)).j(E);v(b)||0<b.l(C);)b=(x=u(w-=A)).j(E);_(x)&&(x=f),D=D.add(x),C=N(C,b)}return new L(D,C)}function K(C){for(var E=C.g.length+1,w=[],A=0;A<E;A++)w[A]=C.i(A)<<1|C.i(A-1)>>>31;return new s(w,C.h)}function Z(C,E){var w=E>>5;E%=32;for(var A=C.g.length-w,D=[],x=0;x<A;x++)D[x]=0<E?C.i(x+w)>>>E|C.i(x+w+1)<<32-E:C.i(x+w);return new s(D,C.h)}(t=s.prototype).m=function(){if(v(this))return-T(this).m();for(var C=0,E=1,w=0;w<this.g.length;w++){var A=this.i(w);C+=(0<=A?A:4294967296+A)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(v(this))return"-"+T(this).toString(C);for(var E=u(Math.pow(C,6)),w=this,A="";;){var D=G(w,E).g,x=((0<(w=N(w,D.j(E))).g.length?w.g[0]:w.h)>>>0).toString(C);if(_(w=D))return x+A;for(;6>x.length;)x="0"+x;A=x+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return v(C=N(this,C))?-1:_(C)?0:1},t.abs=function(){return v(this)?T(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],A=0,D=0;D<=E;D++){var x=A+(65535&this.i(D))+(65535&C.i(D)),b=(x>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);A=b>>>16,w[D]=(b&=65535)<<16|(x&=65535)}return new s(w,-2147483648&w[w.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(v(this))return v(C)?T(this).j(T(C)):T(T(this).j(C));if(v(C))return T(this.j(T(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,w=[],A=0;A<2*E;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<C.g.length;D++){var x=this.i(A)>>>16,b=65535&this.i(A),di=C.i(D)>>>16,Yd=65535&C.i(D);w[2*A+2*D]+=b*Yd,S(w,2*A+2*D),w[2*A+2*D+1]+=x*Yd,S(w,2*A+2*D+1),w[2*A+2*D+1]+=b*di,S(w,2*A+2*D+1),w[2*A+2*D+2]+=x*di,S(w,2*A+2*D+2)}for(A=0;A<E;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=E;A<2*E;A++)w[A]=0;return new s(w,0)},t.A=function(C){return G(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)&C.i(A);return new s(w,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)|C.i(A);return new s(w,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],A=0;A<E;A++)w[A]=this.i(A)^C.i(A);return new s(w,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dF=lF.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return T(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(E,8)),A=h,D=0;D<C.length;D+=8){var x=Math.min(8,C.length-D),b=parseInt(C.substring(D,D+x),E);8>x?(x=u(Math.pow(E,x)),A=A.j(x).add(u(b))):A=(A=A.j(w)).add(u(b))}return A},Ui=lF.Integer=s}).apply(typeof uF<"u"?uF:typeof self<"u"?self:typeof window<"u"?window:{});var hF,Hl,fF,_g,DT,pF,gF,mF,mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jr={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof mg&&mg];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var R=l[y];if(!(R in m))break e;m=m[R]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,R={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,y),l.apply(p,R)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,R,k){for(var q=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)q[qe-2]=arguments[qe];return p.prototype[R].apply(y,q)}}function v(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function T(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const R=l.length||0,k=y.length||0;l.length=R+k;for(let q=0;q<k;q++)l[R+q]=y[q]}else l.push(y)}}function S(l){return/^[\s\xa0]*$/.test(l)}function L(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function G(l){return G[" "](l),l}G[" "]=function(){};var K=!(-1==L().indexOf("Gecko")||-1!=L().toLowerCase().indexOf("webkit")&&-1==L().indexOf("Edge")||-1!=L().indexOf("Trident")||-1!=L().indexOf("MSIE")||-1!=L().indexOf("Edge"));function Z(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,p){let m,y;for(let R=1;R<arguments.length;R++){for(m in y=arguments[R],y)l[m]=y[m];for(let k=0;k<w.length;k++)m=w[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function D(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=bS;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var Yd=new class N{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new che,l=>l.reset());class che{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Jd,Zd=!1,bS=new class di{constructor(){this.h=this.g=null}add(p,m){const y=Yd.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},FH=()=>{const l=a.Promise.resolve(void 0);Jd=()=>{l.then(uhe)}};var uhe=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=Yd;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}Zd=!1};function uo(){this.s=this.s,this.C=this.C}function sn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}uo.prototype.s=!1,uo.prototype.ma=function(){this.s||(this.s=!0,this.N())},uo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},sn.prototype.h=function(){this.defaultPrevented=!0};var lhe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function Xd(l,p){if(sn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(K){e:{try{G(p.nodeName);var R=!0;break e}catch{}R=!1}R||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:dhe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Xd.aa.h.call(this)}}_(Xd,sn);var dhe={2:"touch",3:"pen",4:"mouse"};Xd.prototype.h=function(){Xd.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var eh="closure_listenable_"+(1e6*Math.random()|0),hhe=0;function fhe(l,p,m,y,R){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=R,this.key=++hhe,this.da=this.fa=!1}function qm(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Gm(l){this.src=l,this.g={},this.h=0}function CS(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],R=Array.prototype.indexOf.call(y,p,void 0);(k=0<=R)&&Array.prototype.splice.call(y,R,1),k&&(qm(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function AS(l,p,m,y){for(var R=0;R<l.length;++R){var k=l[R];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return R}return-1}Gm.prototype.add=function(l,p,m,y,R){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var q=AS(l,p,y,R);return-1<q?(p=l[q],m||(p.fa=!1)):((p=new fhe(p,this.src,k,!!y,R)).fa=m,l.push(p)),p};var SS="closure_lm_"+(1e6*Math.random()|0),DS={};function UH(l,p,m,y,R){if(y&&y.once)return BH(l,p,m,y,R);if(Array.isArray(p)){for(var k=0;k<p.length;k++)UH(l,p[k],m,y,R);return null}return m=MS(m),l&&l[eh]?l.K(p,m,u(y)?!!y.capture:!!y,R):jH(l,p,m,!1,y,R)}function jH(l,p,m,y,R,k){if(!p)throw Error("Invalid event type");var q=u(R)?!!R.capture:!!R,qe=PS(l);if(qe||(l[SS]=qe=new Gm(l)),(m=qe.add(p,m,y,q,k)).proxy)return m;if(y=function phe(){const p=ghe;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)lhe||(R=q),void 0===R&&(R=!1),l.addEventListener(p.toString(),y,R);else if(l.attachEvent)l.attachEvent($H(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function BH(l,p,m,y,R){if(Array.isArray(p)){for(var k=0;k<p.length;k++)BH(l,p[k],m,y,R);return null}return m=MS(m),l&&l[eh]?l.L(p,m,u(y)?!!y.capture:!!y,R):jH(l,p,m,!0,y,R)}function HH(l,p,m,y,R){if(Array.isArray(p))for(var k=0;k<p.length;k++)HH(l,p[k],m,y,R);else y=u(y)?!!y.capture:!!y,m=MS(m),l&&l[eh]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=AS(k=l.g[p],m,y,R))&&(qm(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=PS(l))&&(p=l.g[p.toString()],l=-1,p&&(l=AS(p,m,y,R)),(m=-1<l?p[l]:null)&&RS(m))}function RS(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[eh])CS(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent($H(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=PS(p))?(CS(m,l),0==m.h&&(m.src=null,p[SS]=null)):qm(l)}}}function $H(l){return l in DS?DS[l]:DS[l]="on"+l}function ghe(l,p){if(l.da)l=!0;else{p=new Xd(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&RS(l),l=m.call(y,p)}return l}function PS(l){return(l=l[SS])instanceof Gm?l:null}var NS="__closure_events_fn_"+(1e9*Math.random()>>>0);function MS(l){return"function"==typeof l?l:(l[NS]||(l[NS]=function(p){return l.handleEvent(p)}),l[NS])}function an(){uo.call(this),this.i=new Gm(this),this.M=this,this.F=null}function yn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new sn(p,l);else if(p instanceof sn)p.target=p.target||l;else{var R=p;A(p=new sn(y,l),R)}if(R=!0,m)for(var k=m.length-1;0<=k;k--){var q=p.g=m[k];R=zm(q,y,!0,p)&&R}if(R=zm(q=p.g=l,y,!0,p)&&R,R=zm(q,y,!1,p)&&R,m)for(k=0;k<m.length;k++)R=zm(q=p.g=m[k],y,!1,p)&&R}function zm(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var R=!0,k=0;k<p.length;++k){var q=p[k];if(q&&!q.da&&q.capture==m){var qe=q.listener,Gt=q.ha||q.src;q.fa&&CS(l.i,q),R=!1!==qe.call(Gt,y)&&R}}return R&&!y.defaultPrevented}function qH(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function GH(l){l.g=qH(()=>{l.g=null,l.i&&(l.i=!1,GH(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(an,uo),an.prototype[eh]=!0,an.prototype.removeEventListener=function(l,p,m,y){HH(this,l,p,m,y)},an.prototype.N=function(){if(an.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)qm(m[y]);delete l.g[p],l.h--}}this.F=null},an.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},an.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class mhe extends uo{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:GH(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function th(l){uo.call(this),this.h=l,this.g={}}_(th,uo);var zH=[];function WH(l){Z(l.g,function(p,m){this.g.hasOwnProperty(m)&&RS(p)},l),l.g={}}th.prototype.N=function(){th.aa.N.call(this),WH(this)},th.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xS=a.JSON.stringify,_he=a.JSON.parse,yhe=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function kS(){}function QH(){}kS.prototype.h=null;var nh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function OS(){sn.call(this,"d")}function VS(){sn.call(this,"c")}_(OS,sn),_(VS,sn);var Us={},YH=null;function Wm(){return YH=YH||new an}function JH(l){sn.call(this,Us.La,l)}function rh(l){const p=Wm();yn(p,new JH(p))}function ZH(l,p){sn.call(this,Us.STAT_EVENT,l),this.stat=p}function vn(l){const p=Wm();yn(p,new ZH(p,l))}function XH(l,p){sn.call(this,Us.Ma,l),this.size=p}function ih(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function oh(){this.g=!0}function Zc(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function The(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var R=y[1];if(Array.isArray(R)&&!(1>R.length)){var k=R[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var q=1;q<R.length;q++)R[q]=""}}}return xS(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Us.La="serverreachability",_(JH,sn),Us.STAT_EVENT="statevent",_(ZH,sn),Us.Ma="timingevent",_(XH,sn),oh.prototype.xa=function(){this.g=!1},oh.prototype.info=function(){};var LS,Km={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},e$={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Qm(){}function lo(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new th(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new t$}function t$(){this.i=null,this.g="",this.h=!1}_(Qm,kS),Qm.prototype.g=function(){return new XMLHttpRequest},Qm.prototype.i=function(){return{}},LS=new Qm;var n$={},FS={};function US(l,p,m){l.L=1,l.v=Xm(hi(p)),l.m=m,l.P=!0,r$(l,null)}function r$(l,p){l.F=Date.now(),Ym(l),l.A=hi(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),_$(m.i,"t",y),l.C=0,m=l.j.J,l.h=new t$,l.g=O$(l.j,m?p:null,!l.m),0<l.O&&(l.M=new mhe(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(zH[0]=R.toString()),R=zH);for(var k=0;k<R.length;k++){var q=UH(m,R[k],y||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),rh(),function vhe(l,p,m,y,R,k){l.info(function(){if(l.g)if(k)for(var q="",qe=k.split("&"),Gt=0;Gt<qe.length;Gt++){var De=qe[Gt].split("=");if(1<De.length){var cn=De[0];De=De[1];var un=cn.split("_");q=2<=un.length&&"type"==un[1]?q+(cn+"=")+De+"&":q+(cn+"=redacted&")}}else q=null;else q=k;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+p+"\n"+m+"\n"+q})}(l.i,l.u,l.A,l.l,l.R,l.m)}function i$(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function whe(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?FS:(m=Number(p.substring(m,y)),isNaN(m)?n$:(y+=1)+m>p.length?FS:(p=p.slice(y,y+m),l.C=y+m,p))}function Ym(l){l.S=Date.now()+l.I,o$(l,l.I)}function o$(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=ih(f(l.ba,l),p)}function jS(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function sh(l){0==l.j.G||l.J||N$(l.j,l)}function js(l){jS(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,WH(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function BS(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||HS(m.h,l)))if(!l.K&&HS(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var R=y;if(0==R[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;i_(m),n_(m)}zS(m),vn(18)}}else m.za=R[1],0<m.za-m.T&&37500>R[2]&&m.F&&0==m.v&&!m.C&&(m.C=ih(f(m.Za,m),6e3));if(1>=c$(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Hs(m,11)}else if((l.K||m.g==l)&&i_(m),!S(p))for(R=m.Da.g.parse(p),p=0;p<R.length;p++){let De=R[p];if(m.T=De[0],De=De[1],2==m.G)if("c"==De[0]){m.K=De[1],m.ia=De[2];const cn=De[3];null!=cn&&(m.la=cn,m.j.info("VER="+m.la));const un=De[4];null!=un&&(m.Aa=un,m.j.info("SVER="+m.Aa));const tu=De[5];null!=tu&&"number"==typeof tu&&0<tu&&(m.L=y=1.5*tu,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const ar=l.g;if(ar){const s_=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(s_){var k=y.h;k.g||-1==s_.indexOf("spdy")&&-1==s_.indexOf("quic")&&-1==s_.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&($S(k,k.h),k.h=null))}if(y.D){const KS=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;KS&&(y.ya=KS,Ze(y.I,y.D,KS))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var q=l;if((y=m).qa=k$(y,y.J?y.ia:null,y.W),q.K){u$(y.h,q);var qe=q,Gt=y.L;Gt&&(qe.I=Gt),qe.B&&(jS(qe),Ym(qe)),y.g=q}else R$(y);0<m.i.length&&r_(m)}else"stop"!=De[0]&&"close"!=De[0]||Hs(m,7);else 3==m.G&&("stop"==De[0]||"close"==De[0]?"stop"==De[0]?Hs(m,7):GS(m):"noop"!=De[0]&&m.l&&m.l.ta(De),m.v=0)}rh()}catch{}}lo.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==fi(l)?p.j():this.Y(l)},lo.prototype.Y=function(l){try{if(l==this.g)e:{const un=fi(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>un)&&(3!=un||this.g&&(this.h.h||this.g.oa()||b$(this.g)))){this.J||4!=un||7==p||rh(),jS(this);var m=this.g.Z();this.X=m;t:if(i$(this)){var y=b$(this.g);l="";var R=y.length,k=4==fi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){js(this),sh(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<R;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==R-1)});y.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=200==m,function Ihe(l,p,m,y,R,k,q){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+p+"\n"+m+"\n"+k+" "+q})}(this.i,this.u,this.A,this.l,this.R,un,m),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Gt=this.g;if((qe=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(qe)){var De=qe;break t}}De=null}if(!(m=De)){this.o=!1,this.s=3,vn(12),js(this),sh(this);break e}Zc(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,BS(this,m)}if(this.P){let ar;for(m=!0;!this.J&&this.C<q.length;){if(ar=whe(this,q),ar==FS){4==un&&(this.s=4,vn(14),m=!1),Zc(this.i,this.l,null,"[Incomplete Response]");break}if(ar==n$){this.s=4,vn(15),Zc(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}Zc(this.i,this.l,ar,null),BS(this,ar)}if(i$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=un||0!=q.length||this.h.h||(this.s=1,vn(16),m=!1),this.o=this.o&&m,m){if(0<q.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),WS(cn),cn.M=!0,vn(11))}}else Zc(this.i,this.l,q,"[Invalid Chunked Response]"),js(this),sh(this)}else Zc(this.i,this.l,q,null),BS(this,q);4==un&&js(this),this.o&&!this.J&&(4==un?N$(this.j,this):(this.o=!1,Ym(this)))}else(function jhe(l){const p={};l=(l.g&&2<=fi(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(S(l[y]))continue;var m=D(l[y]);const R=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[R]||[];p[R]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<q.indexOf("Unknown SID")?(this.s=3,vn(12)):(this.s=0,vn(13)),js(this),sh(this)}}}catch{}},lo.prototype.cancel=function(){this.J=!0,js(this)},lo.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function Ehe(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(rh(),vn(17)),js(this),this.s=2,sh(this)):o$(this,this.S-l)};var bhe=class{constructor(l,p){this.g=l,this.map=p}};function s$(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function a$(l){return!!l.h||!!l.g&&l.g.size>=l.j}function c$(l){return l.h?1:l.g?l.g.size:0}function HS(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function $S(l,p){l.g?l.g.add(p):l.h=p}function u$(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function l$(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return v(l.i)}function d$(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function Ahe(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function Che(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),R=y.length,k=0;k<R;k++)p.call(void 0,y[k],m&&m[k],l)}s$.prototype.cancel=function(){if(this.i=l$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var h$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Bs){this.h=l.h,Jm(this,l.j),this.o=l.o,this.g=l.g,Zm(this,l.s),this.l=l.l;var p=l.i,m=new uh;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),f$(this,m),this.m=l.m}else l&&(p=String(l).match(h$))?(this.h=!1,Jm(this,p[1]||"",!0),this.o=ah(p[2]||""),this.g=ah(p[3]||"",!0),Zm(this,p[4]),this.l=ah(p[5]||"",!0),f$(this,p[6]||"",!0),this.m=ah(p[7]||"")):(this.h=!1,this.i=new uh(null,this.h))}function hi(l){return new Bs(l)}function Jm(l,p,m){l.j=m?ah(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Zm(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function f$(l,p,m){p instanceof uh?(l.i=p,function xhe(l,p){p&&!l.j&&(ho(l),l.i=null,l.g.forEach(function(m,y){var R=y.toLowerCase();y!=R&&(g$(this,y),_$(this,R,m))},l)),l.j=p}(l.i,l.h)):(m||(p=ch(p,Nhe)),l.i=new uh(p,l.h))}function Ze(l,p,m){l.i.set(p,m)}function Xm(l){return Ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ah(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ch(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,Dhe),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Dhe(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Bs.prototype.toString=function(){var l=[],p=this.j;p&&l.push(ch(p,p$,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(ch(p,p$,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(ch(m,"/"==m.charAt(0)?Phe:Rhe,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",ch(m,Mhe)),l.join("")};var p$=/[#\/\?@]/g,Rhe=/[#\?:]/g,Phe=/[#\?]/g,Nhe=/[#\?@]/g,Mhe=/#/g;function uh(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function ho(l){l.g||(l.g=new Map,l.h=0,l.i&&function She(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),R=null;if(0<=y){var k=l[m].substring(0,y);R=l[m].substring(y+1)}else k=l[m];p(k,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function g$(l,p){ho(l),p=Xc(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function m$(l,p){return ho(l),p=Xc(l,p),l.g.has(p)}function _$(l,p,m){g$(l,p),0<m.length&&(l.i=null,l.g.set(Xc(l,p),v(m)),l.h+=m.length)}function Xc(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function fo(l,p,m,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(m)}catch{}}function Vhe(){this.g=new yhe}function Lhe(l,p,m){const y=m||"";try{d$(l,function(R,k){let q=R;u(R)&&(q=xS(R)),p.push(y+k+"="+encodeURIComponent(q))})}catch(R){throw p.push(y+"type="+encodeURIComponent("_badmap")),R}}function lh(l){this.l=l.Ub||null,this.j=l.eb||!1}function e_(l,p){an.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function y$(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function dh(l){l.readyState=4,l.l=null,l.j=null,l.v=null,hh(l)}function hh(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function v$(l){let p="";return Z(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function qS(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=v$(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):Ze(l,p,m))}function pt(l){an.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=uh.prototype).add=function(l,p){ho(this),this.i=null,l=Xc(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){ho(this),this.g.forEach(function(m,y){m.forEach(function(R){l.call(p,R,y,this)},this)},this)},t.na=function(){ho(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const R=l[y];for(let k=0;k<R.length;k++)m.push(p[y])}return m},t.V=function(l){ho(this);let p=[];if("string"==typeof l)m$(this,l)&&(p=p.concat(this.g.get(Xc(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return ho(this),this.i=null,m$(this,l=Xc(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var R=k;""!==q[y]&&(R+="="+encodeURIComponent(String(q[y]))),l.push(R)}}return this.i=l.join("&")},_(lh,kS),lh.prototype.g=function(){return new e_(this.l,this.j)},lh.prototype.i=function(l){return function(){return l}}({}),_(e_,an),(t=e_.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,hh(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dh(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,hh(this)),this.g&&(this.readyState=3,hh(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;y$(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?dh(this):hh(this),3==this.readyState&&y$(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,dh(this))},t.Qa=function(l){this.g&&(this.response=l,dh(this))},t.ga=function(){this.g&&dh(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(e_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(pt,an);var Fhe=/^https?$/i,Uhe=["POST","PUT"];function I$(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,E$(l),t_(l)}function E$(l){l.A||(l.A=!0,yn(l,"complete"),yn(l,"error"))}function T$(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=fi(l)||2!=l.Z()))if(l.u&&4==fi(l))qH(l.Ea,0,l);else if(yn(l,"readystatechange"),4==fi(l)){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===q){var R=String(l.D).match(h$)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),y=!Fhe.test(R?R.toLowerCase():"")}m=y}if(m)yn(l,"complete"),yn(l,"success");else{l.m=6;try{var k=2<fi(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",E$(l)}}finally{t_(l)}}}function t_(l,p){if(l.g){w$(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||yn(l,"ready");try{m.onreadystatechange=y}catch{}}}function w$(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function fi(l){return l.g?l.g.readyState:0}function b$(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fh(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function C$(l){this.Aa=0,this.i=[],this.j=new oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fh("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fh("baseRetryDelayMs",5e3,l),this.cb=fh("retryDelaySeedMs",1e4,l),this.Wa=fh("forwardChannelMaxRetries",2,l),this.wa=fh("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new s$(l&&l.concurrentRequestLimit),this.Da=new Vhe,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function GS(l){if(A$(l),3==l.G){var p=l.U++,m=hi(l.I);if(Ze(m,"SID",l.K),Ze(m,"RID",p),Ze(m,"TYPE","terminate"),ph(l,m),(p=new lo(l,l.j,p)).L=2,p.v=Xm(hi(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=O$(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ym(p)}x$(l)}function n_(l){l.g&&(WS(l),l.g.cancel(),l.g=null)}function A$(l){n_(l),l.u&&(a.clearTimeout(l.u),l.u=null),i_(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function r_(l){if(!a$(l.h)&&!l.s){l.s=!0;var p=l.Ga;Jd||FH(),Zd||(Jd(),Zd=!0),bS.add(p,l),l.B=0}}function S$(l,p){var m;m=p?p.l:l.U++;const y=hi(l.I);Ze(y,"SID",l.K),Ze(y,"RID",m),Ze(y,"AID",l.T),ph(l,y),l.m&&l.o&&qS(y,l.m,l.o),m=new lo(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=D$(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),$S(l.h,m),US(m,y,p)}function ph(l,p){l.H&&Z(l.H,function(m,y){Ze(p,y,m)}),l.l&&d$({},function(m,y){Ze(p,y,m)})}function D$(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var R=l.i;let k=-1;for(;;){const q=["count="+m];-1==k?0<m?(k=R[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let qe=!0;for(let Gt=0;Gt<m;Gt++){let De=R[Gt].g;const cn=R[Gt].map;if(De-=k,0>De)k=Math.max(0,R[Gt].g-100),qe=!1;else try{Lhe(cn,q,"req"+De+"_")}catch{y&&y(cn)}}if(qe){y=q.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function R$(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;Jd||FH(),Zd||(Jd(),Zd=!0),bS.add(p,l),l.v=0}}function zS(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=ih(f(l.Fa,l),M$(l,l.v)),l.v++,0))}function WS(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function P$(l){l.g=new lo(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=hi(l.qa);Ze(p,"RID","rpc"),Ze(p,"SID",l.K),Ze(p,"AID",l.T),Ze(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ze(p,"TO",l.ja),Ze(p,"TYPE","xmlhttp"),ph(l,p),l.m&&l.o&&qS(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Xm(hi(p)),m.m=null,m.P=!0,r$(m,l)}function i_(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function N$(l,p){var m=null;if(l.g==p){i_(l),WS(l),l.g=null;var y=2}else{if(!HS(l.h,p))return;m=p.D,u$(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var R=l.B;yn(y=Wm(),new XH(y,m)),r_(l)}else R$(l);else if(3==(R=p.s)||0==R&&0<p.X||!(1==y&&function Bhe(l,p){return!(c$(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=ih(f(l.Ga,l,p),M$(l,l.B)),l.B++,0)))}(l,p)||2==y&&zS(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),R){case 1:Hs(l,5);break;case 4:Hs(l,10);break;case 3:Hs(l,6);break;default:Hs(l,2)}}function M$(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function Hs(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const R=!y;y=new Bs(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Jm(y,"https"),Xm(y),R?function khe(l,p){const m=new oh;if(a.Image){const y=new Image;y.onload=g(fo,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(fo,m,"TestLoadImage: error",!1,p,y),y.onabort=g(fo,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(fo,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function Ohe(l,p){new oh;const y=new AbortController,R=setTimeout(()=>{y.abort(),fo(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(R),fo(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(R),fo(0,0,!1,p)})}(y.toString(),m)}else vn(2);l.G=0,l.l&&l.l.sa(p),x$(l),A$(l)}function x$(l){if(l.G=0,l.ka=[],l.l){const p=l$(l.h);(0!=p.length||0!=l.i.length)&&(T(l.ka,p),T(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function k$(l,p,m){var y=m instanceof Bs?hi(m):new Bs(m);if(""!=y.g)p&&(y.g=p+"."+y.g),Zm(y,y.s);else{var R=a.location;y=R.protocol,p=p?p+"."+R.hostname:R.hostname,R=+R.port;var k=new Bs(null);y&&Jm(k,y),p&&(k.g=p),R&&Zm(k,R),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&Ze(y,m,p),Ze(y,"VER",l.la),ph(l,y),y}function O$(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new pt(l.Ca&&!l.pa?new lh({eb:m}):l.pa)).Ha(l.J),p}function V$(){}function o_(){}function qn(l,p){an.call(this),this.g=new C$(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!S(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new eu(this)}function L$(l){OS.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function F$(){VS.call(this),this.status=1}function eu(l){this.g=l}(t=pt.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():LS.g(),this.v=function KH(l){return l.h||(l.h=l.i())}(this.o?this.o:LS),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void I$(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)m.set(R,y[R]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),R=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Uhe,p,void 0))||y||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,q]of m)this.g.setRequestHeader(k,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{w$(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){I$(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,yn(this,"complete"),yn(this,"abort"),t_(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),t_(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?T$(this):this.bb())},t.bb=function(){T$(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),_he(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=C$.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){vn(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=k$(this,null,this.W),r_(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const R=new lo(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),A(k,this.S)):k=this.S),null!==this.m||this.O||(R.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=D$(this,R,p),Ze(m=hi(this.I),"RID",l),Ze(m,"CVER",22),this.D&&Ze(m,"X-HTTP-Session-Id",this.D),ph(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(v$(k)))+"&"+p:this.m&&qS(m,this.m,k)),$S(this.h,R),this.Ua&&Ze(m,"TYPE","init"),this.P?(Ze(m,"$req",p),Ze(m,"SID","null"),R.T=!0,US(R,m,null)):US(R,m,p),this.G=2}}else 3==this.G&&(l?S$(this,l):0==this.i.length||a$(this.h)||S$(this))},t.Fa=function(){if(this.u=null,P$(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ih(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vn(10),n_(this),P$(this))},t.Za=function(){null!=this.C&&(this.C=null,n_(this),zS(this),vn(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=V$.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},o_.prototype.g=function(l,p){return new qn(l,p)},_(qn,an),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){GS(this.g)},qn.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=xS(l),l=m);p.i.push(new bhe(p.Ya++,l)),3==p.G&&r_(p)},qn.prototype.N=function(){this.g.l=null,delete this.j,GS(this.g),delete this.g,qn.aa.N.call(this)},_(L$,OS),_(F$,VS),_(eu,V$),eu.prototype.ua=function(){yn(this.g,"a")},eu.prototype.ta=function(l){yn(this.g,new L$(l))},eu.prototype.sa=function(l){yn(this.g,new F$)},eu.prototype.ra=function(){yn(this.g,"b")},o_.prototype.createWebChannel=o_.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,mF=Jr.createWebChannelTransport=function(){return new o_},gF=Jr.getStatEventTarget=function(){return Wm()},pF=Jr.Event=Us,DT=Jr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Km.NO_ERROR=0,Km.TIMEOUT=8,Km.HTTP_ERROR=6,_g=Jr.ErrorCode=Km,e$.COMPLETE="complete",fF=Jr.EventType=e$,QH.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",an.prototype.listen=an.prototype.K,Hl=Jr.WebChannel=QH,Jr.FetchXmlHttpFactory=lh,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,hF=Jr.XhrIo=pt}).apply(typeof mg<"u"?mg:typeof self<"u"?self:typeof window<"u"?window:{});const yF="@firebase/firestore";class kt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");let oc="11.10.0";const ji=new mT("@firebase/firestore");function sc(){return ji.logLevel}function F(t,...e){if(ji.logLevel<=_e.DEBUG){const n=e.map(RT);ji.debug(`Firestore (${oc}): ${t}`,...n)}}function yt(t,...e){if(ji.logLevel<=_e.ERROR){const n=e.map(RT);ji.error(`Firestore (${oc}): ${t}`,...n)}}function mn(t,...e){if(ji.logLevel<=_e.WARN){const n=e.map(RT);ji.warn(`Firestore (${oc}): ${t}`,...n)}}function RT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,IF(t,r,n)}function IF(t,e,n){let r=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yt(r),new Error(r)}function Y(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||IF(e,i,r)}function $(t,e){return t}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends Wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ot{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class EF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zie{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class Xie{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eoe{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;Y(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Ot;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ot,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(I(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ot)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y("string"==typeof r.accessToken,31837,{l:r}),new EF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Y(null===e||"string"==typeof e,2055,{h:e}),new kt(e)}}class toe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class noe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new toe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class roe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Y(void 0===this.o,3512);const r=o=>{null!=o.error&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new PT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ioe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function NT(){return new TextEncoder}class MT{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ioe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function xT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{const o=NT(),s=ooe(o.encode(TF(t,n)),o.encode(TF(e,n)));return 0!==s?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function TF(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function ooe(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function ac(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const kT="__name__";class vr{constructor(e,n,r){void 0===n?n=0:n>e.length&&z(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===vr.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=vr.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return re(e.length,n.length)}static compareSegments(e,n){const r=vr.isNumericId(e),i=vr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?vr.extractNumericId(e).compare(vr.extractNumericId(n)):xT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}}class pe extends vr{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const soe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends vr{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return soe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===kT}static keyField(){return new tt([kT])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}class H{constructor(e){this.path=e}static fromPath(e){return new H(pe.fromString(e))}static fromName(e){return new H(pe.fromString(e).popFirst(5))}static empty(){return new H(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new pe(e.slice()))}}function OT(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bF(t){if(!H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CF(t){if(H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AF(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function yg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":z(12329,{type:typeof t})}function ge(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yg(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function ls(t,e){if(!AF(t))throw new V(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(M.INVALID_ARGUMENT,n);return!0}const DF=-62135596800;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<DF)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ls(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-DF).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Ct("string",Ve._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Ve(0,0))}static max(){return new J(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function NF(t){return new Fn(t.readTime,t.key,-1)}class Fn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fn(J.min(),H.empty(),-1)}static max(){return new Fn(J.max(),H.empty(),-1)}}function LT(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=H.comparator(t.documentKey,e.documentKey),0!==n?n:re(t.largestBatchId,e.largestBatchId))}class xF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bi(t){return FT.apply(this,arguments)}function FT(){return(FT=I(function*(t){if(t.code!==M.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;F("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new P((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Hi(t){return"IndexedDbTransactionError"===t.name}let jn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function Gl(t){return null==t}function zl(t){return 0===t&&1/t==-1/0}function poe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function LF(t){return t+"\x01\x01"}const Kl="mutationQueues",ir="mutations",hc="documentMutations",Ql="remoteDocumentGlobal",fc="targets",pc="targetDocuments",ms="targetGlobal",Yl="collectionParents",gc="clientMetadata",Cg="bundles",Ag="namedQueries";function YF(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class We{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dg(this.root,e,this.comparator,!0)}}class Dg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=o??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1,$t.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Le{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XF(this.data.getIterator())}getIteratorFrom(e){return new XF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class XF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Dn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Le(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class e2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new e2("Invalid base64 string: "+o):o}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const joe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(Y(!!t,39018),"string"==typeof t){let e=0;const n=joe.exec(t);if(Y(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xr(t){return"string"==typeof t?ft.fromBase64String(t):ft.fromUint8Array(t)}const t2="server_timestamp",n2="__type__",r2="__previous_value__",i2="__local_write_time__";function Rg(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[n2])||void 0===n?void 0:n.stringValue)===t2}function Pg(t){const e=t.mapValue.fields[r2];return Rg(e)?Pg(e):e}function Xl(t){const e=Zr(t.mapValue.fields[i2].timestampValue);return new Ve(e.seconds,e.nanos)}class Boe{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const ed="(default)";class _s{constructor(e,n){this.projectId=e,this.database=n||ed}static empty(){return new _s("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}const KT="__type__",o2="__max__",Gi_mapValue={fields:{__type__:{stringValue:o2}}},QT="__vector__",_c="value";function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rg(t)?4:l2(t)?9007199254740991:kg(t)?10:11:z(28295,{value:t})}function Tr(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xl(t).isEqual(Xl(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Zr(i.timestampValue),a=Zr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Xr(t.bytesValue).isEqual(Xr(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return nt(i.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return nt(i.integerValue)===nt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=nt(i.doubleValue),a=nt(o.doubleValue);return s===a?zl(s)===zl(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ac(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(YF(s)!==YF(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Tr(s[c],a[c])))return!1;return!0}(t,e);default:return z(52216,{left:t})}var o}function td(t,e){return void 0!==(t.values||[]).find(n=>Tr(n,e))}function Wi(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=nt(o.integerValue||o.doubleValue),c=nt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return s2(t.timestampValue,e.timestampValue);case 4:return s2(Xl(t),Xl(e));case 5:return xT(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Xr(o),c=Xr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=re(a[u],c[u]);if(0!==d)return d}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=re(nt(o.latitude),nt(s.latitude));return 0!==a?a:re(nt(o.longitude),nt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a2(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[_c])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[_c])||void 0===c?void 0:c.arrayValue,v=re((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:a2(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Gi_mapValue&&s===Gi_mapValue)return 0;if(o===Gi_mapValue)return 1;if(s===Gi_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=xT(c[h],d[h]);if(0!==f)return f;const g=Wi(a[c[h]],u[d[h]]);if(0!==g)return g}return re(c.length,d.length)}(t.mapValue,e.mapValue);default:throw z(23264,{le:n})}}function s2(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return re(t,e);const n=Zr(t),r=Zr(e),i=re(n.seconds,r.seconds);return 0!==i?i:re(n.nanos,r.nanos)}function a2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Wi(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function yc(t){return YT(t)}function YT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xr(t.bytesValue).toBase64():"referenceValue"in t?H.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=YT(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${YT(n.fields[s])}`;return i+"}"}(t.mapValue):z(61005,{value:t})}function Mg(t){switch(zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pg(t);return e?16+Mg(e):16;case 5:return 2*t.stringValue.length;case 6:return Xr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+Mg(o),0);case 10:case 11:return function(r){let i=0;return qi(r.fields,(o,s)=>{i+=o.length+Mg(s)}),i}(t.mapValue);default:throw z(13486,{value:t})}}function ys(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function JT(t){return!!t&&"integerValue"in t}function nd(t){return!!t&&"arrayValue"in t}function c2(t){return!!t&&"nullValue"in t}function u2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xg(t){return!!t&&"mapValue"in t}function kg(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[KT])||void 0===n?void 0:n.stringValue)===QT}function rd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===o2}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rd(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=rd(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());xg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new qt(rd(this.value))}}function p2(t){const e=[];return qi(t.fields,(n,r)=>{const i=new tt([n]);if(xg(r)){const o=p2(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Dn(e)}class Qe{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Qe(e,0,J.min(),J.min(),J.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new Qe(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new Qe(e,2,n,J.min(),J.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new Qe(e,3,n,J.min(),J.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ki{constructor(e,n){this.position=e,this.inclusive=n}}function g2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(s.referenceValue),n.key):Wi(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function m2(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}class id{constructor(e,n="asc"){this.field=e,this.dir=n}}function qoe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class _2{}class ye extends _2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Goe(e,n,r):"array-contains"===n?new Koe(e,r):"in"===n?new w2(e,r):"not-in"===n?new Qoe(e,r):"array-contains-any"===n?new Yoe(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new zoe(e,r):new Woe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Wi(n,this.value)):null!==n&&zi(this.value)===zi(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fe extends _2{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fe(e,n)}matches(e){return vc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function vc(t){return"and"===t.op}function XT(t){return function y2(t){for(const e of t.filters)if(e instanceof Fe)return!1;return!0}(t)&&vc(t)}function ew(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+yc(t.value);if(XT(t))return t.filters.map(e=>ew(e)).join(",");{const e=t.filters.map(n=>ew(n)).join(",");return`${t.op}(${e})`}}function v2(t,e){return t instanceof ye?(r=t,(i=e)instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)):t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&v2(s,i.filters[a]),!0)}(t,e):void z(19439);var r,i}function E2(t){return t instanceof ye?`${(n=t).field.canonicalString()} ${n.op} ${yc(n.value)}`:t instanceof Fe?function(n){return n.op.toString()+" {"+n.getFilters().map(E2).join(" ,")+"}"}(t):"Filter";var n}class Goe extends ye{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class zoe extends ye{constructor(e,n){super(e,"in",n),this.keys=T2(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Woe extends ye{constructor(e,n){super(e,"not-in",n),this.keys=T2(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function T2(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class Koe extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nd(n)&&td(n.arrayValue,this.value)}}class w2 extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&td(this.value.arrayValue,n)}}class Qoe extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!td(this.value.arrayValue,n)}}class Yoe extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>td(this.value.arrayValue,r))}}class Joe{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function tw(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Joe(t,e,n,r,i,o,s)}function vs(t){const e=$(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ew(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yc(r)).join(",")),e.Pe=n}return e.Pe}function od(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qoe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m2(t.startAt,e.startAt)&&m2(t.endAt,e.endAt)}function Og(t){return H.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class ei{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function Ic(t){return new ei(t)}function S2(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function nw(t){return null!==t.collectionGroup}function Ec(t){const e=$(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Le(tt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new id(o,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new id(tt.keyField(),r))}return e.Te}function nn(t){const e=$(t);return e.Ie||(e.Ie=function R2(t,e){if("F"===t.limitType)return tw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new id(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ki(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ki(t.startAt.position,t.startAt.inclusive):null;return tw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Ec(t))),e.Ie}function rw(t,e){const n=t.filters.concat([e]);return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lg(t,e,n){return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sd(t,e){return od(nn(t),nn(e))&&t.limitType===e.limitType}function P2(t){return`${vs(nn(t))}|lt:${t.limitType}`}function Tc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>E2(i)).join(", ")}]`),Gl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yc(i)).join(",")),`Target(${r})`}(nn(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ec(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=g2(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Ec(r),i)||r.endAt&&!function(s,a,c){const u=g2(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Ec(r),i)));var r,i}function M2(t){return(e,n)=>{let r=!1;for(const i of Ec(t)){const o=Zoe(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Zoe(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Wi(c,u):z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}class ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ZF(this.inner)}size(){return this.innerSize}}const Xoe=new We(H.comparator);function Rn(){return Xoe}const x2=new We(H.comparator);function cd(...t){let e=x2;for(const n of t)e=e.insert(n.key,n);return e}function k2(t){let e=x2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wr(){return ud()}function O2(){return ud()}function ud(){return new ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const ese=new We(H.comparator),tse=new Le(H.comparator);function fe(...t){let e=tse;for(const n of t)e=e.add(n);return e}const nse=new Le(re);function ow(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(e)?"-0":e}}function V2(t){return{integerValue:""+t}}function L2(t,e){return function VF(t){return"number"==typeof t&&Number.isInteger(t)&&!zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?V2(e):ow(t,e)}class Fg{constructor(){this._=void 0}}function rse(t,e,n){return t instanceof wc?function(i,o){const s={fields:{[n2]:{stringValue:t2},[i2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Rg(o)&&(o=Pg(o)),o&&(s.fields[r2]=o),{mapValue:s}}(n,e):t instanceof Is?U2(t,e):t instanceof Es?j2(t,e):function(i,o){const s=F2(i,o),a=B2(s)+B2(i.Ee);return JT(s)&&JT(i.Ee)?V2(a):ow(i.serializer,a)}(t,e)}function ise(t,e,n){return t instanceof Is?U2(t,e):t instanceof Es?j2(t,e):n}function F2(t,e){return t instanceof bc?JT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class wc extends Fg{}class Is extends Fg{constructor(e){super(),this.elements=e}}function U2(t,e){const n=H2(e);for(const r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Es extends Fg{constructor(e){super(),this.elements=e}}function j2(t,e){let n=H2(e);for(const r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}class bc extends Fg{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function B2(t){return nt(t.integerValue||t.doubleValue)}function H2(t){return nd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ld{constructor(e,n){this.field=e,this.transform=n}}class sse{constructor(e,n){this.version=e,this.transformResults=n}}class rt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rt}static exists(e){return new rt(void 0,e)}static updateTime(e){return new rt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ug(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class jg{}function $2(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ac(t.key,rt.none()):new Cc(t.key,t.data,rt.none());{const n=t.data,r=qt.empty();let i=new Le(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ni(t.key,r,new Dn(i.toArray()),rt.none())}}function ase(t,e,n){t instanceof Cc?function(i,o,s){const a=i.value.clone(),c=z2(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ni?function(i,o,s){if(!Ug(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=z2(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(G2(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function dd(t,e,n,r){return t instanceof Cc?function(o,s,a,c){if(!Ug(o.precondition,s))return a;const u=o.value.clone(),d=W2(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ni?function(o,s,a,c){if(!Ug(o.precondition,s))return a;const u=W2(o.fieldTransforms,c,s),d=s.data;return d.setAll(G2(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,Ug(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function cse(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=F2(r.transform,i||null);null!=o&&(null===n&&(n=qt.empty()),n.set(r.field,o))}return n||null}function q2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&ac(r,i,(o,s)=>function ose(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Is&&i instanceof Is||r instanceof Es&&i instanceof Es?ac(r.elements,i.elements,Tr):r instanceof bc&&i instanceof bc?Tr(r.Ee,i.Ee):r instanceof wc&&i instanceof wc);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Cc extends jg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends jg{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function G2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function z2(t,e,n){const r=new Map;Y(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ise(s,a,n[i]))}return r}function W2(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,rse(o,s,e))}return r}class Ac extends jg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sw extends jg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&ase(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=O2();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=$2(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(n,r)=>q2(n,r))&&ac(this.baseMutations,e.baseMutations,(n,r)=>q2(n,r))}}class cw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return ese}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new cw(e,n,r,i)}}class uw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class use{constructor(e,n){this.count=e,this.unchangedNames=n}}var At,Te;function Y2(t){if(void 0===t)return yt("GRPC error has no .code"),M.UNKNOWN;switch(t){case At.OK:return M.OK;case At.CANCELLED:return M.CANCELLED;case At.UNKNOWN:return M.UNKNOWN;case At.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case At.INTERNAL:return M.INTERNAL;case At.UNAVAILABLE:return M.UNAVAILABLE;case At.UNAUTHENTICATED:return M.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case At.NOT_FOUND:return M.NOT_FOUND;case At.ALREADY_EXISTS:return M.ALREADY_EXISTS;case At.PERMISSION_DENIED:return M.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case At.ABORTED:return M.ABORTED;case At.OUT_OF_RANGE:return M.OUT_OF_RANGE;case At.UNIMPLEMENTED:return M.UNIMPLEMENTED;case At.DATA_LOSS:return M.DATA_LOSS;default:return z(39323,{code:t})}}(Te=At||(At={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";const lse=new Ui([4294967295,4294967295],0);function J2(t){const e=NT().encode(t),n=new dF;return n.update(e),new Uint8Array(n.digest())}function Z2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ui([n,r],0),new Ui([i,o],0)]}class lw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hd(`Invalid padding: ${n}`);if(r<0)throw new hd(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new hd(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new hd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ui.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ui.fromNumber(r)));return 1===i.compare(lse)&&(i=new Ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=J2(e),[r,i]=Z2(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new lw(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=J2(e),[r,i]=Z2(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(J.min(),i,new We(re),Rn(),fe())}}class pd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pd(r,n,fe(),fe(),fe())}}class Hg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class X2{constructor(e,n){this.targetId=e,this.De=n}}class eU{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tU{constructor(){this.ve=0,this.Ce=nU(),this.Fe=ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new pd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=nU()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class dse{constructor(e){this.We=e,this.Ge=new Map,this.ze=Rn(),this.je=$g(),this.Je=$g(),this.He=new We(re)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(Og(o))if(0===r){const s=new H(o.path);this.Xe(n,s,Qe.newNoDocument(s,J.min()))}else Y(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Xr(r).toUint8Array()}catch(c){if(c instanceof e2)return mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new lw(s,i,o)}catch(c){return mn(c instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&Og(a.target)){const c=new H(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Qe.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new fd(e,n,this.He,this.ze,r);return this.ze=Rn(),this.je=$g(),this.Je=$g(),this.He=new We(re),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new tU,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Le(re),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Le(re),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tU),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function $g(){return new We(H.comparator)}function nU(){return new We(H.comparator)}const hse={asc:"ASCENDING",desc:"DESCENDING"},fse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pse={and:"AND",or:"OR"};class gse{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dw(t,e){return t.useProto3Json||Gl(e)?e:{value:e}}function Sc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mse(t,e){return Sc(t,e.toTimestamp())}function vt(t){return Y(!!t,49232),J.fromTimestamp(function(n){const r=Zr(n);return new Ve(r.seconds,r.nanos)}(t))}function hw(t,e){return fw(t,e).canonicalString()}function fw(t,e){const n=(i=t,new pe(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function iU(t){const e=pe.fromString(t);return Y(pU(e),10190,{key:e.toString()}),e}function gd(t,e){return hw(t.databaseId,e.path)}function br(t,e){const n=iU(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(aU(n))}function oU(t,e){return hw(t.databaseId,e)}function pw(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aU(t){return Y(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function cU(t,e,n){return{name:gd(t,e),fields:n.value.mapValue.fields}}function uU(t,e){return{documents:[oU(t,e.path)]}}function Gg(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oU(t,i);const o=function(u){if(0!==u.length)return fU(Fe.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Qi((f=d).field),direction:Ese(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=dw(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function dU(t){let e=function sU(t){const e=iU(t);return 4===e.length?pe.emptyPath():aU(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Y(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=hU(h);return f instanceof Fe&&XT(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new id(Dc((_=f).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,Gl(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new Ki((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new Ki(h.values||[],!h.before)}(n.endAt)),function A2(t,e,n,r,i,o,s,a){return new ei(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function hU(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dc(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dc(n.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Dc(n.unaryFilter.field);return ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Dc(n.unaryFilter.field);return ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}}(t):void 0!==t.fieldFilter?ye.create(Dc((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Fe.create(n.compositeFilter.filters.map(r=>hU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}}(n.compositeFilter.op))}(t):z(30097,{filter:t});var n}function Ese(t){return hse[t]}function Tse(t){return fse[t]}function wse(t){return pse[t]}function Qi(t){return{fieldPath:t.canonicalString()}}function Dc(t){return tt.fromServerFormat(t.fieldPath)}function fU(t){return t instanceof ye?function(n){if("=="===n.op){if(u2(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NAN"}};if(c2(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(u2(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NAN"}};if(c2(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(n.field),op:Tse(n.op),value:n.value}}}(t):t instanceof Fe?function(n){const r=n.getFilters().map(i=>fU(i));return 1===r.length?r[0]:{compositeFilter:{op:wse(n.op),filters:r}}}(t):z(54877,{filter:t})}function bse(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pU(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ri{constructor(e,n,r,i,o=J.min(),s=J.min(),a=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gU{constructor(e){this.gt=e}}function Wg(t){const e=dU({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Lg(e,e.limit,"L"):e}class Cs{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(nt(e.integerValue));else if("doubleValue"in e){const r=nt(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),zl(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=Zr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Xr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?l2(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):kg(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=_c,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(nt(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),H.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}Cs.Ut=new Cs;class xse{constructor(){this.Dn=new Ew}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Fn.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class Ew{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(pe.comparator)).toArray()}}new Uint8Array(0);const MU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Ss{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ss(0)}static ur(){return new Ss(-1)}}const FU="LruGarbageCollector";function jU([t,e],[n,r]){const i=re(t,n);return 0===i?re(e,r):i}class Vse{constructor(e){this.Tr=e,this.buffer=new Le(jU),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jU(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;F(FU,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,I(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Hi(r)?F(FU,"Ignoring IndexedDB error during garbage collection: ",r):yield Bi(r)}yield n.Rr(3e5)}))}}class Lse{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return P.resolve(jn.ue);const r=new Vse(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(MU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MU):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),sc()<=_e.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class $U{constructor(){this.changes=new ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bse{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class KU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&dd(r.mutation,i,Dn.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=cd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Rn();const s=ud(),a=ud();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof ni)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),dd(d.mutation,u,d.mutation.getFieldMask(),Ve.now())):s.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new Bse(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ud();let i=new We((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Dn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||fe()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=O2();d.forEach(f=>{if(!o.has(f)){const g=$2(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return H.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):nw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(wr());let a=-1,c=o;return s.next(u=>P.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,fe())).next(d=>({batchId:a,changes:k2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=cd();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,c=>{const u=(h=n,f=c.child(o),new ei(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,Qe.newInvalidDocument(d)))});let a=cd();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&dd(d.mutation,u,Dn.empty(),Ve.now()),ad(n,u)&&(a=a.insert(c,u))}),a})}}class Hse{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:vt(i.createTime)}),P.resolve();var i}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:Wg(i.bundledQuery),readTime:vt(i.readTime)}),P.resolve();var i}}class $se{constructor(){this.overlays=new We(H.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wr();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=wr(),o=n.length+1,s=new H(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new We((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=wr(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=wr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new uw(n,r));let o=this.kr.get(n);void 0===o&&(o=fe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class qse{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}class Tw{constructor(){this.qr=new Le(Vt.Qr),this.$r=new Le(Vt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Vt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new H(new pe([])),r=new Vt(n,e),i=new Vt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new H(new pe([])),r=new Vt(n,e),i=new Vt(n,e+1);let o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Vt(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return H.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||H.comparator(e.key,n.key)}}class Gse{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Le(Vt.Qr)}checkEmpty(e){return P.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new aw(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(re);return n.forEach(i=>{const o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;H.isDocumentKey(o)||(o=o.child(""));const s=new Vt(new H(o),0);let a=new Le(re);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Y(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{const o=new Vt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Vt(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class zse{constructor(e){this.ni=e,this.docs=new We(H.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Qe.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qe.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Rn();const s=n.path,a=new H(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||LT(NF(d),r)<=0||(i.has(d.key)||ad(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wse(this)}getSize(e){return P.resolve(this.size)}}class Wse extends $U{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class Kse{constructor(e){this.persistence=e,this.ii=new ti(n=>vs(n),od),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Tw,this.targetCount=0,this._i=Ss.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ss(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}}class ww{constructor(e,n){this.ai={},this.overlays={},this.ui=new jn(0),this.ci=!1,this.ci=!0,this.li=new qse,this.referenceDelegate=e(this),this.hi=new Kse(this),this.indexManager=new xse,this.remoteDocumentCache=new zse(r=>this.referenceDelegate.Pi(r)),this.serializer=new gU(n),this.Ti=new Hse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $se,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Gse(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);const i=new Qse(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Qse extends xF{constructor(e){super(),this.currentSequenceNumber=e}}class tm{constructor(e){this.persistence=e,this.Ai=new Tw,this.Ri=null}static Vi(e){return new tm(e)}get mi(){if(this.Ri)return this.Ri;throw z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{const i=H.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class nm{constructor(e,n){this.persistence=e,this.gi=new ti(r=>function tn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=LF(e)),e=poe(t.get(n),e);return LF(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function HU(t,e){return new Lse(t,e)}(this,n)}static Vi(e,n){return new nm(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mg(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return P.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Rw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=fe(),i=fe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Rw(e,n.fromCache,r,i)}}class Jse{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class JU{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=HL()?8:function kF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(_t())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Jse;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(sc()<=_e.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Tc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(sc()<=_e.DEBUG&&F("QueryEngine","Query:",Tc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(sc()<=_e.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Tc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):P.resolve())}ps(e,n){if(S2(n))return P.resolve(null);let r=nn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Lg(n,null,"F"),r=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,Lg(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return S2(n)||i.isEqual(J.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(sc()<=_e.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tc(n)),this.vs(e,s,n,function PF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(1e9===r?new Ve(n+1,0):new Ve(n,r));return new Fn(i,H.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new Le(M2(e));return n.forEach((i,o)=>{ad(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return sc()<=_e.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Tc(n)),this.gs.getDocumentsMatchingQuery(e,n,Fn.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const Pw="LocalStore";class Xse{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new We(re),this.Ms=new ti(o=>vs(o),od),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KU(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function XU(t,e){return Nw.apply(this,arguments)}function Nw(){return(Nw=I(function*(t,e){const n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=fe();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function ej(t){const e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function nae(t,e){const n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oc(t,e,n){return Mw.apply(this,arguments)}function Mw(){return(Mw=I(function*(t,e,n){const r=$(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Hi(s))throw s;F(Pw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function im(t,e,n){const r=$(t);let i=J.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=$(c),f=h.Ms.get(d);return void 0!==f?P.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:fe())).next(a=>(function ij(t,e,n){let r=t.xs.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function N2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class Lw{constructor(){this.activeTargetIds=function iw(){return nse}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lj{constructor(){this.Fo=new Lw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Lw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oae{xo(e){}shutdown(){}}const dj="ConnectivityMonitor";class hj{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(dj,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){F(dj,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let am=null;function Uw(){return null===am?am=268435456+Math.round(2147483648*Math.random()):am++,"0x"+am.toString(16)}const jw="RestConnection",sae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aae{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ed?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=Uw(),a=this.Go(e,n.toUriEncodedString());F(jw,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=nc(u);return this.jo(e,a,c,r,d).then(h=>(F(jw,`Received RPC '${e}' ${s}: `,h),h),h=>{throw mn(jw,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${sae[e]}`}terminate(){}}class cae{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const on="WebChannelConnection";class uae extends aae{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=Uw();return new Promise((a,c)=>{const u=new hF;u.setWithCredentials(!0),u.listenOnce(fF.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _g.NO_ERROR:const h=u.getResponseJson();F(on,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case _g.TIMEOUT:F(on,`RPC '${e}' ${s} timed out`),c(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case _g.HTTP_ERROR:const f=u.getStatus();if(F(on,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(N){const S=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(S)>=0?S:M.UNKNOWN}(_.status);c(new V(v,_.message))}else c(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(M.UNAVAILABLE,"Connection failed."));break;default:z(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{F(on,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);F(on,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=Uw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mF(),a=gF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");F(on,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new cae({Ho:T=>{g?F(on,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(F(on,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),F(on,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Yo:()=>h.close()}),v=(T,N,S)=>{T.listen(N,L=>{try{S(L)}catch(G){setTimeout(()=>{throw G},0)}})};return v(h,Hl.EventType.OPEN,()=>{g||(F(on,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),v(h,Hl.EventType.CLOSE,()=>{g||(g=!0,F(on,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),v(h,Hl.EventType.ERROR,T=>{g||(g=!0,mn(on,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.__(new V(M.UNAVAILABLE,"The operation could not be completed")))}),v(h,Hl.EventType.MESSAGE,T=>{var N;if(!g){const S=T.data[0];Y(!!S,16349);const L=S,G=L?.error||(null===(N=L[0])||void 0===N?void 0:N.error);if(G){F(on,`RPC '${e}' stream ${i} received error:`,G);const K=G.status;let Z=function(w){const A=At[w];if(void 0!==A)return Y2(A)}(K),C=G.message;void 0===Z&&(Z=M.INTERNAL,C="Unknown error status: "+K+" with message "+G.message),g=!0,_.__(new V(Z,C)),h.close()}else F(on,`RPC '${e}' stream ${i} received:`,S),_.a_(S)}}),v(a,pF.STAT_EVENT,T=>{T.stat===DT.PROXY?F(on,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===DT.NOPROXY&&F(on,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function cm(){return typeof document<"u"?document:null}function Rs(t){return new gse(t,!0)}class Bw{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const pj="PersistentStream";class gj{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bw(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return I(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return I(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return I(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(I(function*(){e.state=0,e.start()}))}G_(e){return F(pj,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(pj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lae extends gj{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function yse(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:z(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Y(void 0===d||"string"==typeof d,58123),ft.fromBase64String(d||"")):(Y(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?M.UNKNOWN:Y2(u.code);return new V(d,u.message||"")}(s);n=new eU(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=br(t,r.document.name),o=vt(r.document.updateTime),s=r.document.createTime?vt(r.document.createTime):J.min(),a=new qt({mapValue:{fields:r.document.fields}}),c=Qe.newFoundDocument(i,o,s,a);n=new Hg(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=br(t,r.document),o=r.readTime?vt(r.readTime):J.min(),s=Qe.newNoDocument(i,o);n=new Hg([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=br(t,r.document);n=new Hg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return z(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new use(i,o);n=new X2(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?vt(s.readTime):J.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=pw(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=Og(c)?{documents:uU(o,c)}:{query:Gg(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=rU(o,s.resumeToken);const u=dw(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Sc(o,s.snapshotVersion.toTimestamp());const u=dw(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function Ise(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=pw(this.serializer),n.removeTarget=e,this.k_(n)}}class dae extends gj{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function vse(t,e){return t&&t.length>0?(Y(void 0!==e,14353),t.map(n=>function(i,o){let s=vt(i.updateTime?i.updateTime:o);return s.isEqual(J.min())&&(s=vt(o)),new sse(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=vt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=pw(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function md(t,e){let n;if(e instanceof Cc)n={update:cU(t,e.key,e.value)};else if(e instanceof Ac)n={delete:gd(t,e.key)};else if(e instanceof ni)n={update:cU(t,e.key,e.data),updateMask:bse(e.fieldMask)};else{if(!(e instanceof sw))return z(16599,{Rt:e.type});n={verify:gd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof wc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Es)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bc)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:mse(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:z(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class hae{}class fae extends hae{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,fw(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,fw(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class pae{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yt(n),this._a=!1):F("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Ps="RemoteStore";class gae{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(I(function*(){var c;eo(s)&&(F(Ps,"Restarting streams for network reachability change."),yield(c=I(function*(d){const h=$(d);h.Ia.add(4),yield Vc(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield bd(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new pae(r,i)}}function bd(t){return Hw.apply(this,arguments)}function Hw(){return(Hw=I(function*(t){if(eo(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Vc(t){return $w.apply(this,arguments)}function $w(){return($w=I(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function um(t,e){const n=$(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),zw(n)?Gw(n):Uc(n).x_()&&qw(n,e))}function Lc(t,e){const n=$(t),r=Uc(n);n.Ta.delete(e),r.x_()&&mj(n,e),0===n.Ta.size&&(r.x_()?r.B_():eo(n)&&n.Aa.set("Unknown"))}function qw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).H_(e)}function mj(t,e){t.Ra.$e(e),Uc(t).Y_(e)}function Gw(t){t.Ra=new dse({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.Aa.aa()}function zw(t){return eo(t)&&!Uc(t).M_()&&t.Ta.size>0}function eo(t){return 0===$(t).Ia.size}function _j(t){t.Ra=void 0}function mae(t){return Ww.apply(this,arguments)}function Ww(){return(Ww=I(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function _ae(t){return Kw.apply(this,arguments)}function Kw(){return(Kw=I(function*(t){t.Ta.forEach((e,n)=>{qw(t,e)})})).apply(this,arguments)}function yae(t,e){return Qw.apply(this,arguments)}function Qw(){return(Qw=I(function*(t,e){_j(t),zw(t)?(t.Aa.la(e),Gw(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function vae(t,e,n){return Yw.apply(this,arguments)}function Yw(){return Yw=I(function*(t,e,n){if(t.Aa.set("Online"),e instanceof eU&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){F(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lm(t,r)}else if(e instanceof Hg?t.Ra.Ye(e):e instanceof X2?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{const r=yield ej(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(ft.EMPTY_BYTE_STRING,d.snapshotVersion)),mj(o,c);const h=new ri(d.target,c,u,d.sequenceNumber);qw(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F(Ps,"Failed to raise snapshot:",r),yield lm(t,r)}var r}),Yw.apply(this,arguments)}function lm(t,e,n){return Jw.apply(this,arguments)}function Jw(){return(Jw=I(function*(t,e,n){if(!Hi(e))throw e;t.Ia.add(1),yield Vc(t),t.Aa.set("Offline"),n||(n=()=>ej(t.localStore)),t.asyncQueue.enqueueRetryable(I(function*(){F(Ps,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield bd(t)}))})).apply(this,arguments)}function yj(t,e){return e().catch(n=>lm(t,n,e))}function Fc(t){return Zw.apply(this,arguments)}function Zw(){return(Zw=I(function*(t){const e=$(t),n=to(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;Iae(e);)try{const i=yield nae(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,Eae(e,i)}catch(i){yield lm(e,i)}vj(e)&&Ij(e)})).apply(this,arguments)}function Iae(t){return eo(t)&&t.Pa.length<10}function Eae(t,e){t.Pa.push(e);const n=to(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function vj(t){return eo(t)&&!to(t).M_()&&t.Pa.length>0}function Ij(t){to(t).start()}function Tae(t){return Xw.apply(this,arguments)}function Xw(){return(Xw=I(function*(t){to(t).na()})).apply(this,arguments)}function wae(t){return eb.apply(this,arguments)}function eb(){return(eb=I(function*(t){const e=to(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function bae(t,e,n){return tb.apply(this,arguments)}function tb(){return(tb=I(function*(t,e,n){const r=t.Pa.shift(),i=cw.from(r,e,n);yield yj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Fc(t)})).apply(this,arguments)}function Cae(t,e){return nb.apply(this,arguments)}function nb(){return nb=I(function*(t,e){var n;e&&to(t).Z_&&(yield(n=I(function*(i,o){if(function Q2(t){switch(t){case M.OK:return z(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return z(15467,{code:t})}}(a=o.code)&&a!==M.ABORTED){const s=i.Pa.shift();to(i).N_(),yield yj(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Fc(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),vj(t)&&Ij(t)}),nb.apply(this,arguments)}function Ej(t,e){return rb.apply(this,arguments)}function rb(){return(rb=I(function*(t,e){const n=$(t);n.asyncQueue.verifyOperationInProgress(),F(Ps,"RemoteStore received new credentials");const r=eo(n);n.Ia.add(3),yield Vc(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield bd(n)})).apply(this,arguments)}function ib(t,e){return ob.apply(this,arguments)}function ob(){return(ob=I(function*(t,e){const n=$(t);e?(n.Ia.delete(2),yield bd(n)):e||(n.Ia.add(2),yield Vc(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function Uc(t){return t.Va||(t.Va=function(n,r,i){const o=$(n);return o.ia(),new lae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:mae.bind(null,t),e_:_ae.bind(null,t),n_:yae.bind(null,t),J_:vae.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.Va.N_(),zw(t)?Gw(t):t.Aa.set("Unknown")):(yield t.Va.stop(),_j(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function to(t){return t.ma||(t.ma=function(n,r,i){const o=$(n);return o.ia(),new dae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Tae.bind(null,t),n_:Cae.bind(null,t),ea:wae.bind(null,t),ta:bae.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.ma.N_(),yield Fc(t)):(yield t.ma.stop(),t.Pa.length>0&&(F(Ps,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class sb{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new sb(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jc(t,e){if(yt("AsyncQueue",`${e}: ${t}`),Hi(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=cd(),this.sortedSet=new We(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ns;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Tj{constructor(){this.fa=new We(H.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ms{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Ms(e,n,Ns.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Aae{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Sae{constructor(){this.queries=wj(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=$(n),o=i.queries;i.queries=wj(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new V(M.ABORTED,"Firestore shutting down"))}}function wj(){return new ti(t=>P2(t),sd)}function ab(t,e){return cb.apply(this,arguments)}function cb(){return(cb=I(function*(t,e){const n=$(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Aae,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=jc(s,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&db(n)})).apply(this,arguments)}function ub(t,e){return lb.apply(this,arguments)}function lb(){return(lb=I(function*(t,e){const n=$(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Dae(t,e){const n=$(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&db(n)}function Rae(t,e,n){const r=$(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function db(t){t.Da.forEach(e=>{e.next()})}var hb,bj;(bj=hb||(hb={})).Fa="default",bj.Cache="cache";class fb{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hb.Cache}}class Dj{constructor(e){this.key=e}}class Rj{constructor(e){this.key=e}}class Pj{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=M2(e),this.eu=new Ns(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Tj,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=ad(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),T=!0):this.iu(f,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(c||u)&&(a=!0)),T&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{At:T})}};return v(g)-v(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new Ms(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tj,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Rj(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Dj(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ms.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const no="SyncEngine";class Pae{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Nae{constructor(e){this.key=e,this.lu=!1}}class Mae{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ti(a=>P2(a),sd),this.Tu=new Map,this.Iu=new Set,this.du=new We(H.comparator),this.Eu=new Map,this.Au=new Tw,this.Ru={},this.Vu=new Map,this.mu=Ss.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function xae(t,e){return gb.apply(this,arguments)}function gb(){return(gb=I(function*(t,e,n=!0){const r=dm(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield Nj(r,e,n,!0),i})).apply(this,arguments)}function kae(t,e){return mb.apply(this,arguments)}function mb(){return(mb=I(function*(t,e){const n=dm(t);yield Nj(n,e,!0,!1)})).apply(this,arguments)}function Nj(t,e,n,r){return _b.apply(this,arguments)}function _b(){return(_b=I(function*(t,e,n,r){const i=yield function kc(t,e){const n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new ri(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,nn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function yb(t,e,n,r,i){return vb.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&um(t.remoteStore,i),a})).apply(this,arguments)}function vb(){return vb=I(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=I(function*(T,N,S,L){let G=N.view.nu(S);G.Ds&&(G=yield im(T.localStore,N.query,!1).then(({documents:E})=>N.view.nu(E,G)));const K=L&&L.targetChanges.get(N.targetId),Z=L&&null!=L.targetMismatches.get(N.targetId),C=N.view.applyChanges(G,T.isPrimaryClient,K,Z);return Pb(T,N.targetId,C._u),C.snapshot}),function v(T,N,S,L){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield im(t.localStore,e,!0),s=new Pj(e,o.qs),a=s.nu(o.documents),c=pd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);Pb(t,n,u._u);const d=new Pae(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),vb.apply(this,arguments)}function Oae(t,e,n){return Ib.apply(this,arguments)}function Ib(){return(Ib=I(function*(t,e,n){const r=$(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!sd(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Oc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Lc(r.remoteStore,i.targetId),Bc(r,i.targetId)}).catch(Bi))):(Bc(r,i.targetId),yield Oc(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Vae(t,e){return Eb.apply(this,arguments)}function Eb(){return(Eb=I(function*(t,e){const n=$(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lc(n.remoteStore,r.targetId))})).apply(this,arguments)}function Tb(){return(Tb=I(function*(t,e,n){const r=function Bb(t){const e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jae.bind(null,e),e}(t);try{const i=yield function(s,a){const c=$(s),u=Ve.now(),d=a.reduce((g,_)=>g.add(_.key),fe());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Rn(),v=fe();return c.Os.getEntries(g,d).next(T=>{_=T,_.forEach((N,S)=>{S.isValidDocument()||(v=v.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(T=>{h=T;const N=[];for(const S of a){const L=cse(S,h.get(S.key).overlayedDocument);null!=L&&N.push(new ni(S.key,L,p2(L.value.mapValue),rt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,a)}).next(T=>{f=T;const N=T.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,T.batchId,N)})}).then(()=>({batchId:f.batchId,changes:k2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new We(re)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield ii(r,i.changes),yield Fc(r.remoteStore)}catch(i){const o=jc(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function Mj(t,e){return wb.apply(this,arguments)}function wb(){return(wb=I(function*(t,e){const n=$(t);try{const r=yield function tae(t,e){const n=$(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var v,T,N;null!==e.targetMismatches.get(h)?g=g.withResumeToken(ft.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),T=g,N=d,(0===(v=f).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=Rn(),u=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function tj(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Rn();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):F(Pw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(J.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Y(s.lu,14607):i.removedDocuments.size>0&&(Y(s.lu,42227),s.lu=!1))}),yield ii(n,r,e)}catch(r){yield Bi(r)}})).apply(this,arguments)}function xj(t,e,n){const r=$(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=$(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&db(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fae(t,e,n){return bb.apply(this,arguments)}function bb(){return(bb=I(function*(t,e,n){const r=$(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new We(H.comparator);s=s.insert(o,Qe.newNoDocument(o,J.min()));const a=fe().add(o),c=new fd(J.min(),new Map,new We(re),s,a);yield Mj(r,c),r.du=r.du.remove(o),r.Eu.delete(e),Nb(r)}else yield Oc(r.localStore,e,!1).then(()=>Bc(r,e,n)).catch(Bi)})).apply(this,arguments)}function Uae(t,e){return Cb.apply(this,arguments)}function Cb(){return(Cb=I(function*(t,e){const n=$(t),r=e.batch.batchId;try{const i=yield function eae(t,e){const n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=P.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const T=u.docVersions.get(_);Y(null!==T,48541),v.version.compareTo(T)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);Rb(n,r,null),Db(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ii(n,i)}catch(i){yield Bi(i)}})).apply(this,arguments)}function jae(t,e,n){return Ab.apply(this,arguments)}function Ab(){return(Ab=I(function*(t,e,n){const r=$(t);try{const i=yield function(s,a){const c=$(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(Y(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);Rb(r,e,n),Db(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ii(r,i)}catch(i){yield Bi(i)}})).apply(this,arguments)}function Db(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Rb(t,e,n){const r=$(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Bc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||kj(t,r)})}function kj(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(Lc(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Nb(t))}function Pb(t,e,n){for(const r of n)r instanceof Dj?(t.Au.addReference(r.key,e),Hae(t,r)):r instanceof Rj?(F(no,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||kj(t,r.key)):z(19791,{yu:r})}function Hae(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(no,"New document in limbo: "+n),t.Iu.add(r),Nb(t))}function Nb(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new H(pe.fromString(e)),r=t.mu.next();t.Eu.set(r,new Nae(n)),t.du=t.du.insert(n,r),um(t.remoteStore,new ri(nn(Ic(n.path)),r,"TargetPurposeLimboResolution",jn.ue))}}function ii(t,e,n){return Mb.apply(this,arguments)}function Mb(){return Mb=I(function*(t,e,n){const r=$(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Rw.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=I(function*(u,d){const h=$(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(d,g=>P.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>P.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Hi(f))throw f;F(Pw,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),T=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,T)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),Mb.apply(this,arguments)}function $ae(t,e){return xb.apply(this,arguments)}function xb(){return(xb=I(function*(t,e){const n=$(t);if(!n.currentUser.isEqual(e)){F(no,"User change. New user:",e.toKey());const r=yield XU(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new V(M.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ii(n,r.Bs)}var o})).apply(this,arguments)}function qae(t,e){const n=$(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function dm(t){const e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fae.bind(null,e),e.hu.J_=Dae.bind(null,e.eventManager),e.hu.pu=Rae.bind(null,e.eventManager),e}let hm=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return I(function*(){r.serializer=Rs(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function ZU(t,e,n,r){return new Xse(t,e,n,r)}(this.persistence,new JU,n.initialUser,this.serializer)}Du(n){return new ww(tm.Vi,this.serializer)}bu(n){return new lj}terminate(){var n=this;return I(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class Hb extends hm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return Y(this.persistence.referenceDelegate instanceof nm,46915),new BU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ww(r=>nm.Vi(r,n),this.serializer)}}let Hc=(()=>{class t{initialize(n,r){var i=this;return I(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>xj(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=$ae.bind(null,i.syncEngine),yield ib(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Sae}createDatastore(n){const r=Rs(n.databaseInfo.databaseId),i=new uae(n.databaseInfo);return new fae(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>xj(this.syncEngine,r,0),c=hj.C()?new hj:new oae,new gae(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new Mae(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const c=$(a);F(Ps,"RemoteStore shutting down."),c.Ia.add(5),yield Vc(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class fm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const ro="FirestoreClient";class rce{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=MT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(c){F(ro,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(F(ro,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=jc(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function qb(t,e){return Gb.apply(this,arguments)}function Gb(){return Gb=I(function*(t,e){t.asyncQueue.verifyOperationInProgress(),F(ro,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield XU(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{mn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),Gb.apply(this,arguments)}function Uj(t,e){return zb.apply(this,arguments)}function zb(){return(zb=I(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function Wb(t){return Kb.apply(this,arguments)}(t);F(ro,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ej(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ej(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function Kb(){return(Kb=I(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(ro,"Using user provided OfflineComponentProvider");try{yield qb(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;mn("Error using user provided cache. Falling back to memory cache: "+e),yield qb(t,new hm)}}else F(ro,"Using default OfflineComponentProvider"),yield qb(t,new Hb(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function pm(t){return Qb.apply(this,arguments)}function Qb(){return(Qb=I(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(ro,"Using user provided OnlineComponentProvider"),yield Uj(t,t._uninitializedComponentsProvider._online)):(F(ro,"Using default OnlineComponentProvider"),yield Uj(t,new Hc))),t._onlineComponents})).apply(this,arguments)}function qc(t){return Jb.apply(this,arguments)}function Jb(){return(Jb=I(function*(t){const e=yield pm(t),n=e.eventManager;return n.onListen=xae.bind(null,e.syncEngine),n.onUnlisten=Oae.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kae.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Vae.bind(null,e.syncEngine),n})).apply(this,arguments)}function zj(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Wj=new Map,Kj="firestore.googleapis.com";class Yj{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kj,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function aoe(t,e,n,r){if(!0===e&&!0===r)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yj(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Zie;switch(r.type){case"firstParty":return new noe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wj.get(n);r&&(F("ComponentProvider","Removing Datastore"),Wj.delete(n),r.terminate())}(this),Promise.resolve()}}class Lt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lt(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ls(n,Be._jsonSchema))return new Be(e,r||null,new H(pe.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ct("string",Be._jsonSchemaVersion),referencePath:Ct("string")};class Ar extends Lt{constructor(e,n,r){super(e,n,Ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new H(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Jj(t,e,...n){if(t=bt(t),OT("collection","path",e),t instanceof Cd){const r=pe.fromString(e,...n);return CF(r),new Ar(t,null,r)}{if(!(t instanceof Be||t instanceof Ar))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return CF(r),new Ar(t.firestore,null,r)}}function Zb(t,e,...n){if(t=bt(t),1===arguments.length&&(e=MT.newId()),OT("doc","path",e),t instanceof Cd){const r=pe.fromString(e,...n);return bF(r),new Be(t,null,new H(r))}{if(!(t instanceof Be||t instanceof Ar))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return bF(r),new Be(t.firestore,t instanceof Ar?t.converter:null,new H(r))}}const Xj="AsyncQueue";class eB{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bw(this,"async_queue_retry"),this.oc=()=>{const r=cm();r&&F(Xj,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=cm();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=cm();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ot;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return I(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!Hi(n))throw n;F(Xj,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,yt("INTERNAL UNHANDLED ERROR: ",tB(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=sb.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&z(47125,{hc:tB(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return I(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function tB(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class $e extends Cd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new eB,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new eB(n),e._firestoreClient=void 0,yield n}})()}}function _ce(t,e){const n="object"==typeof t?t:rF(),r="string"==typeof t?t:e||ed,i=gg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=kL("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function gce(t,e,n,r={}){var i;t=ge(t,Cd);const o=nc(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(FL(`https://${c}`),jL("Firestore",!0)),s.host!==Kj&&s.host!==c&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Kr(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=kt.MOCK_USER;else{d=function ure(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lg(JSON.stringify({alg:"none",type:"JWT"})),lg(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new kt(f)}t._authCredentials=new Xie(new EF(d,h))}}(i,...o)}return i}function at(t){if(t._terminated)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function nB(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Boe(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zj(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new rce(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(ft.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ls(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Ct("string",Bn._jsonSchemaVersion),bytes:Ct("string")};class xs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ks{constructor(e){this._methodName=e}}class Sr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(ls(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:Ct("string",Sr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};class or{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ls(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new or(e.vectorValues);throw new V(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Ct("string",or._jsonSchemaVersion),vectorValues:Ct("object")};const Ice=/^__.*__$/;class Ece{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class oB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sB(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ec:t})}}class gm{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ym(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(sB(this.Ec)&&Ice.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Tce{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rs(e)}Dc(e,n,r,i=!1){return new gm({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Os(t){const e=t._freezeSettings(),n=Rs(t._databaseId);return new Tce(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mm(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);sC("Data must be an object, but it was:",s,r);const a=uB(r,s);let c,u;if(o.merge)c=new Dn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=Dd(e,h,n);if(!s.contains(f))throw new V(M.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);dB(d,f)||d.push(f)}c=new Dn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new Ece(new qt(a),c,u)}class Sd extends ks{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}class eC extends ks{_toFieldTransform(e){return new ld(e.path,new wc)}isEqual(e){return e instanceof eC}}function Vs(t,e){if(lB(t=bt(t)))return sC("Unsupported field value:",e,t),uB(t,e);if(t instanceof ks)return function(r,i){if(!sB(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Vs(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=bt(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return L2(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ve.fromDate(r);return{timestampValue:Sc(i.serializer,o)}}if(r instanceof Ve){const o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sc(i.serializer,o)}}if(r instanceof Sr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:rU(i.serializer,r._byteString)};if(r instanceof Be){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof or)return s=r,a=i,{mapValue:{fields:{[KT]:{stringValue:QT},[_c]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return ow(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${yg(r)}`)}(t,e)}function uB(t,e){const n={};return ZF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,i)=>{const o=Vs(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function lB(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Sr||t instanceof Bn||t instanceof Be||t instanceof ks||t instanceof or)}function sC(t,e,n){if(!lB(n)||!AF(n)){const r=yg(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function Dd(t,e,n){if((e=bt(e))instanceof xs)return e._internalPath;if("string"==typeof e)return _m(t,e);throw ym("Field path arguments must be of type string or ",t,!1,void 0,n)}const wce=new RegExp("[~\\*/\\[\\]]");function _m(t,e,n){if(e.search(wce)>=0)throw ym(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xs(...e.split("."))._internalPath}catch{throw ym(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ym(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new V(M.INVALID_ARGUMENT,a+t+c)}function dB(t,e){return t.some(n=>n.isEqual(e))}class Rd{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class bce extends Rd{data(){return super.data()}}function vm(t,e){return"string"==typeof e?_m(t,e):e instanceof xs?e._internalPath:e._delegate._internalPath}class aC{}class Pd extends aC{}class Nd extends Pd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nd(e,n,r)}_apply(e){const n=this._parse(e);return mB(e._query,n),new Lt(e.firestore,e.converter,rw(e._query,n))}_parse(e){const n=Os(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new V(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){gB(h,d);const _=[];for(const v of h)_.push(pB(c,o,v));f={arrayValue:{values:_}}}else f=pB(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||gB(h,d),f=function cB(t,e,n,r=!1){return Vs(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return ye.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class zc extends aC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Fe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)mB(s,c),s=rw(s,c)}(e._query,n),new Lt(e.firestore,e.converter,rw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cC extends Pd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cC(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new id(o,s)}(e._query,this._field,this._direction);return new Lt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new ei(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function pB(t,e,n){if("string"==typeof(n=bt(n))){if(""===n)throw new V(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&-1!==n.indexOf("/"))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!H.isDocumentKey(r))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ys(t,new H(r))}if(n instanceof Be)return ys(t,n._key);throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yg(n)}.`)}function gB(t,e){if(!Array.isArray(t)||0===t.length)throw new V(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mB(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new V(M.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yB{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[_c].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>nt(s.doubleValue));return new or(o)}convertGeoPoint(e){return new Sr(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pg(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const n=Zr(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);Y(pU(r),9688,{name:e});const i=new _s(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||yt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hn extends Rd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}Hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hn._jsonSchema={type:Ct("string",Hn._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class bm extends Hn{data(e={}){return super.data(e)}}class $n{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new io(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bm(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new bm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new bm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Dce(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=MT.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function Dce(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}$n._jsonSchemaVersion="firestore/querySnapshot/1.0",$n._jsonSchema={type:Ct("string",$n._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class oo extends yB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function Mce(t,e){const n=ge(t.firestore,$e),r=Zb(t),i=function wm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return Md(n,[mm(Os(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,rt.exists(!1))]).then(()=>r)}function Md(t,e){return function(r,i){const o=new Ot;return r.asyncQueue.enqueueAndForget(I(function*(){return function Lae(t,e,n){return Tb.apply(this,arguments)}(yield function Yb(t){return pm(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(at(t),e)}function EB(){return new eC("serverTimestamp")}!function(e,n=!0){oc=ic,rc(new ss("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new $e(new eoe(r.getProvider("auth-internal")),new roe(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Yr(yF,"4.8.0",e),Yr(yF,"4.8.0","esm2017")}();const Kce=function CB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},AB=new Ll("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Am=new mT("@firebase/auth");function Sm(t,...e){Am.logLevel<=_e.ERROR&&Am.error(`Auth (${ic}): ${t}`,...e)}function Pn(t,...e){throw fC(t,...e)}function _n(t,...e){return fC(t,...e)}function hC(t,e,n){const r=Object.assign(Object.assign({},Kce()),{[e]:n});return new Ll("auth","Firebase",r).create(e,{appName:t.name})}function Ft(t){return hC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fC(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AB.create(t,...e)}function j(t,e,...n){if(!t)throw fC(e,...n)}function Dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sm(e),new Error(e)}function oi(t,e){t||Dr(e)}function Od(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function SB(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Yce(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function pC(){return"http:"===SB()||"https:"===SB()}()||function gre(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Vd{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=function hre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}()||function mre(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Yce()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gC(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class DB{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xce=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eue=new Vd(3e4,6e4);function Ye(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Je(t,e,n,r){return mC.apply(this,arguments)}function mC(){return(mC=I(function*(t,e,n,r,i={}){return RB(t,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Fl(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function pre(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&nc(t.emulatorConfig.host)&&(u.credentials="include"),DB.fetch()(yield PB(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function RB(t,e,n){return _C.apply(this,arguments)}function _C(){return(_C=I(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zce),e);try{const i=new nue(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Ld(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Ld(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Ld(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Ld(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw hC(t,d,u);Pn(t,d)}}catch(i){if(i instanceof Wr)throw i;Pn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function si(t,e,n,r){return yC.apply(this,arguments)}function yC(){return(yC=I(function*(t,e,n,r,i={}){const o=yield Je(t,e,n,r,i);return"mfaPendingCredential"in o&&Pn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function PB(t,e,n,r){return vC.apply(this,arguments)}function vC(){return(vC=I(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?gC(t.config,i):`${t.config.apiScheme}://${i}`;return Xce.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class nue{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),eue.get())})}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_n(t,e,r);return i.customData._tokenResponse=n,i}function TC(){return(TC=I(function*(t,e){return Je(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Dm(t,e){return bC.apply(this,arguments)}function bC(){return(bC=I(function*(t,e){return Je(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Fd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function CC(){return(CC=I(function*(t,e=!1){const n=bt(t),r=yield n.getIdToken(e),i=Rm(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Fd(AC(i.auth_time)),issuedAtTime:Fd(AC(i.iat)),expirationTime:Fd(AC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function AC(t){return 1e3*Number(t)}function Rm(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Sm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ol(n);return i?JSON.parse(i):(Sm("Failed to decode base64 JWT payload"),null)}catch(i){return Sm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function OB(t){const e=Rm(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ai(t,e){return SC.apply(this,arguments)}function SC(){return(SC=I(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Wr&&function aue({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class cue{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield n.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class DC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fd(this.lastLoginAt),this.creationTime=Fd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ud(t){return RC.apply(this,arguments)}function RC(){return(RC=I(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield ai(t,Dm(n,{idToken:r}));j(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?VB(o.providerUserInfo):[],a=function lue(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new DC(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function PC(){return(PC=I(function*(t){const e=bt(t);yield Ud(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function VB(t){return t.map(e=>{var{providerId:n}=e,r=qp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function NC(){return(NC=I(function*(t,e){const n=yield RB(t,{},I(function*(){const r=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield PB(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&nc(t.emulatorConfig.host)&&(c.credentials="include"),DB.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function MC(){return(MC=I(function*(t,e){return Je(t,"POST","/v2/accounts:revokeToken",Ye(t,e))})).apply(this,arguments)}class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(0!==e.length,"internal-error");const n=OB(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return I(function*(r,i=!1){return i||!n.accessToken||n.isExpired?(j(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function due(t,e){return NC.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Kc;return r&&(j("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(j("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(j("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return Dr("not implemented")}}function ao(t,e){j("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=qp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cue(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new DC(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return I(function*(){const r=yield ai(n,n.stsTokenManager.getToken(n.auth,e));return j(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function sue(t){return CC.apply(this,arguments)}(this,e)}reload(){return function uue(t){return PC.apply(this,arguments)}(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Ud(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(rr(e.auth.app))return Promise.reject(Ft(e.auth));const n=yield e.getIdToken();return yield ai(e,function iue(t,e){return TC.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,T=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,N=null!==(u=n.createdAt)&&void 0!==u?u:void 0,S=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:L,emailVerified:G,isAnonymous:K,providerData:Z,stsTokenManager:C}=n;j(L&&C,e,"internal-error");const E=Kc.fromJSON(this.name,C);j("string"==typeof L,e,"internal-error"),ao(h,e.name),ao(f,e.name),j("boolean"==typeof G,e,"internal-error"),j("boolean"==typeof K,e,"internal-error"),ao(g,e.name),ao(_,e.name),ao(v,e.name),ao(T,e.name),ao(N,e.name),ao(S,e.name);const w=new sr({uid:L,auth:e,email:f,emailVerified:G,displayName:h,isAnonymous:K,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:N,lastLoginAt:S});return Z&&Array.isArray(Z)&&(w.providerData=Z.map(A=>Object.assign({},A))),T&&(w._redirectEventId=T),w}static _fromIdTokenResponse(e,n){return I(function*(r,i,o=!1){const s=new Kc;s.updateFromServerResponse(i);const a=new sr({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Ud(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return I(function*(){const i=n.users[0];j(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?VB(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Kc;a.updateFromIdToken(r);const c=new sr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new DC(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const LB=new Map;function ci(t){oi(t instanceof Function,"Expected a class definition");let e=LB.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LB.set(t,e),e)}const FB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(n,r){var i=this;return I(function*(){i.storage[n]=r})()}_get(n){var r=this;return I(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return I(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Pm(t,e,n){return`firebase:${t}:${e}:${n}`}class Qc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Pm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield Dm(e.auth,{idToken:n}).catch(()=>{});return r?sr._fromGetAccountInfoResponse(e.auth,r,n):null}return sr._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return I(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return I(function*(r,i,o="authUser"){if(!i.length)return new Qc(ci(FB),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||ci(FB);const c=Pm(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield Dm(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield sr._fromGetAccountInfoResponse(r,_,f)}else g=sr._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new Qc(a,r,o)):new Qc(a,r,o)}).apply(this,arguments)}}function UB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($B(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GB(e))return"Blackberry";if(zB(e))return"Webos";if(BB(e))return"Safari";if((e.includes("chrome/")||HB(e))&&!e.includes("edge/"))return"Chrome";if(qB(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function jB(t=_t()){return/firefox\//i.test(t)}function BB(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HB(t=_t()){return/crios\//i.test(t)}function $B(t=_t()){return/iemobile/i.test(t)}function qB(t=_t()){return/android/i.test(t)}function GB(t=_t()){return/blackberry/i.test(t)}function zB(t=_t()){return/webos/i.test(t)}function xC(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WB(t=_t()){return xC(t)||qB(t)||zB(t)||GB(t)||/windows phone/i.test(t)||$B(t)}function KB(t,e=[]){let n;switch(t){case"Browser":n=UB(_t());break;case"Worker":n=`${UB(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ic}/${r}`}class gue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return I(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function kC(){return(kC=I(function*(t,e={}){return Je(t,"GET","/v2/passwordPolicy",Ye(t,e))})).apply(this,arguments)}class yue{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class vue{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QB(this),this.idTokenSubscription=new QB(this),this.beforeStateQueue=new gue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(I(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield Qc.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return I(function*(){try{const r=yield Dm(n,{idToken:e}),i=yield sr._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return I(function*(){var r;if(rr(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return j(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return I(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return I(function*(){try{yield Ud(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Jce(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return I(function*(){if(rr(n.app))return Promise.reject(Ft(n));const r=e?bt(e):null;return r&&j(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return I(function*(r,i=!1){if(!n._deleted)return r&&j(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(I(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return rr(e.app)?Promise.reject(Ft(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return rr(this.app)?Promise.reject(Ft(this)):this.queue(I(function*(){yield n.assertedPersistence.setPersistence(ci(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return I(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const n=yield function mue(t){return kC.apply(this,arguments)}(e),r=new yue(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return I(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function hue(t,e){return MC.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return I(function*(){if(!n.redirectPersistenceManager){const r=e&&ci(e)||n._popupRedirectResolver;j(r,n,"argument-error"),n.redirectPersistenceManager=yield Qc.create(n,[ci(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return I(function*(){var r,i;return n._isInitialized&&(yield n.queue(I(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return I(function*(){if(e===n.currentUser)return n.queue(I(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return I(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var n;if(rr(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Qce(t,...e){Am.logLevel<=_e.WARN&&Am.warn(`Auth (${ic}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function It(t){return bt(t)}class QB{constructor(e){this.auth=e,this.observer=null,this.addObserver=function wre(t,e){const n=new bre(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jd={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YB(t){return`__${t}${Math.floor(1e6*Math.random())}`}function XB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eH(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class $d{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,n){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}function ui(t,e){return ZC.apply(this,arguments)}function ZC(){return(ZC=I(function*(t,e){return si(t,"POST","/v1/accounts:signInWithIdp",Ye(t,e))})).apply(this,arguments)}class Yc extends $d{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=qp(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Yc(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return ui(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ui(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}class li{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class iH extends li{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let ele=(()=>{class t extends iH{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Yc._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return I(function*(i,o,s,a=!1){const c=yield sr._fromIdTokenResponse(i,s,a),u=sH(s);return new er({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=sH(r);return new er({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function sH(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Om extends Wr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Om.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Om(e,n,r,i)}}function aH(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Om._fromErrorAndOperation(t,o,e,r):o})}function aA(t,e){return cA.apply(this,arguments)}function cA(){return(cA=I(function*(t,e,n=!1){const r=yield ai(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return er._forOperation(t,"link",r)})).apply(this,arguments)}function uH(t,e){return lA.apply(this,arguments)}function lA(){return(lA=I(function*(t,e,n=!1){const{auth:r}=t;if(rr(r.app))return Promise.reject(Ft(r));const i="reauthenticate";try{const o=yield ai(t,aH(r,i,e,t),n);j(o.idToken,r,"internal-error");const s=Rm(o.idToken);j(s,r,"internal-error");const{sub:a}=s;return j(t.uid===a,r,"user-mismatch"),er._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Pn(r,"user-mismatch"),o}})).apply(this,arguments)}function lH(t,e){return dA.apply(this,arguments)}function dA(){return(dA=I(function*(t,e,n=!1){if(rr(t.app))return Promise.reject(Ft(t));const r="signIn",i=yield aH(t,r,e),o=yield er._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const Fm="__sak";class pH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fm,"1"),this.storage.removeItem(Fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const wle=(()=>{class t extends pH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WB(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function pue(){return function _re(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),gH=(()=>{class t extends pH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Cle=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return I(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=I(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function ble(t){return Promise.all(t.map(function(){var e=I(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function Um(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Ale{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=Um("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(v.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function St(){return window}function HA(){return typeof St().WorkerGlobalScope<"u"&&"function"==typeof St().importScripts}function $A(){return($A=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mH="firebaseLocalStorageDb",jm="firebaseLocalStorage",_H="fbase_key";class Wd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bm(t,e){return t.transaction([jm],e?"readwrite":"readonly").objectStore(jm)}function qA(){const t=indexedDB.open(mH,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jm,{keyPath:_H})}catch(i){n(i)}}),t.addEventListener("success",I(function*(){const r=t.result;r.objectStoreNames.contains(jm)?e(r):(r.close(),yield function Mle(){const t=indexedDB.deleteDatabase(mH);return new Wd(t).toPromise()}(),e(yield qA()))}))})}function yH(t,e,n){return GA.apply(this,arguments)}function GA(){return(GA=I(function*(t,e,n){const r=Bm(t,!0).put({[_H]:e,value:n});return new Wd(r).toPromise()})).apply(this,arguments)}function zA(){return(zA=I(function*(t,e){const n=Bm(t,!1).get(e),r=yield new Wd(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function vH(t,e){const n=Bm(t,!0).delete(e);return new Wd(n).toPromise()}const Vle=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return I(function*(){return n.db||(n.db=yield qA()),n.db})()}_withRetries(n){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return I(function*(){return HA()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return I(function*(){n.receiver=Cle._getInstance(function Ple(){return HA()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return I(function*(){var r,i;if(n.activeServiceWorker=yield function Dle(){return $A.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Ale(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function Rle(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const n=yield qA();return yield yH(n,Fm,"1"),yield vH(n,Fm),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return I(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>yH(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return I(function*(){const i=yield r._withRetries(o=>function xle(t,e){return zA.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>vH(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return I(function*(){const r=yield n._withRetries(s=>{const a=Bm(s,!1).getAll();return new Wd(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Fs(t,e){return e?ci(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}YB("rcb"),new Vd(3e4,6e4);class rS extends $d{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gle(t){return lH(t.auth,new rS(t),t.bypassAuthState)}function zle(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),uH(n,new rS(t),t.bypassAuthState)}function Wle(t){return iS.apply(this,arguments)}function iS(){return(iS=I(function*(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),aA(n,new rS(t),t.bypassAuthState)})).apply(this,arguments)}class EH{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gle;case"linkViaPopup":case"linkViaRedirect":return Wle;case"reauthViaPopup":case"reauthViaRedirect":return zle;default:Pn(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kle=new Vd(2e3,1e4);function oS(){return(oS=I(function*(t,e,n){if(rr(t.app))return Promise.reject(_n(t,"operation-not-supported-in-this-environment"));const r=It(t);!function Wc(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Pn(t,"argument-error"),hC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,li);const i=Fs(r,n);return new cS(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let cS=(()=>{class t extends EH{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return I(function*(){const r=yield n.execute();return j(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return I(function*(){oi(1===n.filter.length,"Popup operations only handle one event");const r=Um();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(_n(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,Kle.get())};n()}}return t.currentPopupAction=null,t})();const Qd=new Map;class Jle extends EH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return I(function*(){let r=Qd.get(n.auth._key());if(!r){try{const o=(yield function Zle(t,e){return uS.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Qd.set(n.auth._key(),r)}return n.bypassAuthState||Qd.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function uS(){return(uS=I(function*(t,e){const n=function wH(t){return Pm("pendingRedirect",t.config.apiKey,t.name)}(e),r=function TH(t){return ci(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Xle(t,e){Qd.set(t._key(),e)}function bH(t,e){return mS.apply(this,arguments)}function mS(){return(mS=I(function*(t,e,n=!1){if(rr(t.app))return Promise.reject(Ft(t));const r=It(t),i=Fs(r,e),s=yield new Jle(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class ide{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function ode(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SH(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SH(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(AH(e))}saveEventToCache(e){this.cachedEventUids.add(AH(e)),this.lastProcessedEventTime=Date.now()}}function AH(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SH({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function yS(){return(yS=I(function*(t,e={}){return Je(t,"GET","/v1/projects",e)})).apply(this,arguments)}const ade=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cde=/^https?/;function vS(){return vS=I(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function sde(t){return yS.apply(this,arguments)}(t);for(const n of e)try{if(lde(n))return}catch{}Pn(t,"unauthorized-domain")}),vS.apply(this,arguments)}function lde(t){const e=Od(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!cde.test(n))return!1;if(ade.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dde=new Vd(3e4,6e4);function DH(){const t=St().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function hde(t){return new Promise((e,n)=>{var r,i,o;function s(){DH(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DH(),n(_n(t,"network-request-failed"))},timeout:dde.get()})}if(null!==(i=null===(r=St().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=St().gapi)||void 0===o||!o.load){const a=YB("iframefcb");return St()[a]=()=>{gapi.load?s():n(_n(t,"network-request-failed"))},function OC(t){return jd.loadJS(t)}(`${function wue(){return jd.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw Hm=null,e})}let Hm=null;const pde=new Vd(5e3,15e3),_de={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yde=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vde(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gC(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:ic},i=yde.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Fl(r).slice(1)}`}function IS(){return IS=I(function*(t){const e=yield function fde(t){return Hm=Hm||hde(t),Hm}(t),n=St().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:vde(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_de,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=_n(t,"network-request-failed"),c=St().setTimeout(()=>{s(a)},pde.get());function u(){St().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),IS.apply(this,arguments)}const Ede={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class RH{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Pde=encodeURIComponent("fac");function PH(t,e,n,r,i,o){return ES.apply(this,arguments)}function ES(){return(ES=I(function*(t,e,n,r,i,o){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ic,eventId:i};if(e instanceof li){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function Tre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof iH){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${Pde}=${encodeURIComponent(c)}`:"";return`${function Nde({config:t}){return t.emulator?gC(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Fl(a).slice(1)}${u}`})).apply(this,arguments)}const TS="webStorageSupport",xde=class Mde{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gH,this._completeRedirectFn=bH,this._overrideRedirectResult=Xle}_openPopup(e,n,r,i){var o=this;return I(function*(){var s;oi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield PH(e,n,r,Od(),i);return function Ade(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Ede),{width:r.toString(),height:i.toString(),top:o,left:s}),u=_t().toLowerCase();n&&(a=HB(u)?"_blank":n),jB(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function fue(t=_t()){var e;return xC(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function Sde(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new RH(null);const h=window.open(e||"",a,d);j(h,t,"popup-blocked");try{h.focus()}catch{}return new RH(h)}(e,a,Um())})()}_openRedirect(e,n,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function Sle(t){St().location.href=t}(yield PH(e,n,r,Od(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(oi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return I(function*(){const r=yield function Ide(t){return IS.apply(this,arguments)}(e),i=new ide(e);return r.register("authEvent",o=>(j(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(TS,{type:TS},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[TS];void 0!==s&&n(!!s),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function ude(t){return vS.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WB()||BB()||xC()}};var kH="@firebase/auth";class kde{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return I(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Lde=VL("authIdTokenMaxAge")||300;let VH=null;const Fde=t=>function(){var e=I(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Lde)return;const o=r?.token;VH!==o&&(VH=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function Ude(t=rF()){const e=gg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Mue(t,e){const n=gg(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Kr(n.getOptions(),e??{}))return i;Pn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:xde,persistence:[Vle,wle,gH]}),r=VL("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=Fde(o.toString());(function gle(t,e,n){bt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function ple(t,e,n,r){bt(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=kL("auth");return i&&function kue(t,e,n){const r=It(t);j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=XB(e),{host:s,port:a}=function Oue(t){const e=XB(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:eH(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:eH(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return j(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void j(Kr(u,r.config.emulator)&&Kr(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,nc(s)?(FL(`${o}//${s}${c}`),jL("Auth",!0)):i||function Vue(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function Iue(t){jd=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=_n("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function jde(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Vde(t){rc(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;j(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KB(t)},u=new vue(r,i,o,c);return function xue(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ci);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rc(new ss("auth-internal",e=>{const n=It(e.getProvider("auth").getImmediate());return new kde(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(kH,"1.10.8",function Ode(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),Yr(kH,"1.10.8","esm2017")}("Browser");const LH_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Bde=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new ele,this.user=wt(null),this.canWrite=wt(!1),this.authLoading=wt(!0),this.ensureFirebaseConfig();const i=nF(LH_firebase);this.db=_ce(i),this.auth=Ude(i),function mle(t,e,n,r){bt(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=I(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return I(function*(){yield function Qle(t,e,n){return oS.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return I(function*(){yield function _le(t){return bt(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return I(function*(){r.ensureSignedIn();const o=function Cce(t,e,...n){let r=[];e instanceof aC&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof zc).length,a=o.filter(c=>c instanceof Nd).length;if(s>1||s>0&&a>0)throw new V(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(Jj(r.db,"recipes"),function Ace(t,e="asc"){const n=e,r=vm("orderBy",t);return cC._create(r,n)}("updated_at","desc"));return(yield function Rce(t){t=ge(t,Lt);const e=ge(t.firestore,$e),n=at(e),r=new oo(e);return function hB(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function qj(t,e,n={}){const r=new Ot;return t.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,c,u){const d=new fm({next:f=>{d.Ou(),s.enqueueAndForget(()=>ub(o,h)),f.fromCache&&"server"===c.source?u.reject(new V(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new fb(a,d,{includeMetadataChanges:!0,ka:!0});return ab(o,h)}(yield qc(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new $n(e,r,t,i))}(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at;return"string"!=typeof u?null:{id:a.id,raw_text:u,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield Mce(Jj(i.db,"recipes"),{raw_text:o,updated_at:EB(),updated_by:i.user()?.email??""})).id,raw_text:o,updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return I(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield function Pce(t,e,n,...r){t=ge(t,Be);const i=ge(t.firestore,$e),o=Os(i);let s;return s="string"==typeof(e=bt(e))||e instanceof xs?function oC(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[Dd(e,r,n)],c=[i];if(o.length%2!=0)throw new V(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(Dd(e,o[f])),c.push(o[f+1]);const u=[],d=qt.empty();for(let f=a.length-1;f>=0;--f)if(!dB(u,a[f])){const g=a[f];let _=c[f];_=bt(_);const v=s.gc(g);if(_ instanceof Sd)u.push(g);else{const T=Vs(_,v);null!=T&&(u.push(g),d.set(g,T))}}const h=new Dn(u);return new oB(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function iC(t,e,n,r){const i=t.Dc(1,e,n);sC("Data must be an object, but it was:",i,r);const o=[],s=qt.empty();qi(r,(c,u)=>{const d=_m(e,c,n);u=bt(u);const h=i.gc(d);if(u instanceof Sd)o.push(d);else{const f=Vs(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new Dn(o);return new oB(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),Md(i,[s.toMutation(t._key,rt.exists(!0))])}(Zb(o.db,"recipes",r),{raw_text:s,updated_at:EB(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}deleteRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();try{yield function Nce(t){return Md(ge(t.firestore,$e),[new Ac(t._key,rt.none())])}(Zb(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(LH_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const Hde=(t,e)=>e.id,$de=(t,e)=>e.title;function qde(t,e){1&t&&(be(0,"section",1)(1,"p"),st(2,"Loading"),Ee()())}function Gde(t,e){if(1&t){const n=Qo();be(0,"section",2)(1,"h1"),st(2,"Recipes"),Ee(),be(3,"button",4),ot("click",function(){return On(n),Vn(Xe().signIn())}),st(4,"Continue with Google"),Ee()()}if(2&t){const n=Xe();Ae(3),_r("disabled",n.authBusy())}}function zde(t,e){if(1&t){const n=Qo();be(0,"section",7)(1,"div",13)(2,"input",14),ot("ngModelChange",function(i){return On(n),Vn(Xe(2).searchQuery.set(i))}),Ee()()()}if(2&t){const n=Xe(2);Ae(2),_r("ngModel",n.searchQuery())}}function Wde(t,e){1&t&&(be(0,"p"),st(1,"Loading"),Ee())}function Kde(t,e){1&t&&(be(0,"p"),st(1,"No recipes"),Ee())}function Qde(t,e){if(1&t){const n=Qo();be(0,"li")(1,"button",16),ot("click",function(){const i=On(n).$implicit;return Vn(Xe(4).openDetail(i))}),st(2),Ee()()}if(2&t){const n=e.$implicit,r=Xe(4);Ae(2),Wa(" ",r.parsedFromRaw(n.raw_text).title," ")}}function Yde(t,e){if(1&t&&(be(0,"ul",15),fl(1,Qde,3,1,"li",null,Hde),Ee()),2&t){const n=Xe(3);Ae(),pl(n.filteredRecipes())}}function Jde(t,e){if(1&t&&(be(0,"section",8),gr(1,Wde,2,0,"p")(2,Kde,2,0,"p")(3,Yde,3,0,"ul",15),Ee()),2&t){const n=Xe(2);Ae(),mr(n.loading()?1:0===n.filteredRecipes().length?2:3)}}function Zde(t,e){if(1&t&&(be(0,"li"),st(1),Ee()),2&t){const n=e.$implicit;Ae(),JI("",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name)}}function Xde(t,e){if(1&t&&(be(0,"div",18)(1,"h3"),st(2),Ee(),be(3,"ul"),fl(4,Zde,2,2,"li",null,OI),Ee()()),2&t){const n=e.$implicit;Ae(2),za(n.title),Ae(2),pl(n.items)}}function ehe(t,e){if(1&t&&(be(0,"li"),st(1),Ee()),2&t){const n=e.$implicit;Ae(),za(n)}}function the(t,e){if(1&t&&(be(0,"div",18)(1,"h3"),st(2,"Steps"),Ee(),be(3,"ol"),fl(4,ehe,2,1,"li",null,OI),Ee()()),2&t){const n=Xe(4);Ae(4),pl(n.selectedParsed().steps)}}function nhe(t,e){if(1&t){const n=Qo();be(0,"article",17)(1,"h2"),st(2),Ee(),fl(3,Xde,6,1,"div",18,$de),gr(5,the,6,0,"div",18),Ee(),be(6,"div",19)(7,"button",6),ot("click",function(){return On(n),Vn(Xe(3).openEditSelected())}),st(8,"Edit"),Ee(),be(9,"button",20),ot("click",function(){return On(n),Vn(Xe(3).deleteSelectedRecipe())}),st(10),Ee(),be(11,"button",21),ot("click",function(){return On(n),Vn(Xe(3).printRecipe())}),st(12,"Print"),Ee()()}if(2&t){const n=Xe(3);Ae(2),za(n.selectedParsed().title),Ae(),pl(n.selectedParsed().ingredientSections),Ae(2),mr(n.selectedParsed().steps.length?5:-1),Ae(2),_r("disabled",!n.canWrite()),Ae(2),_r("disabled",!n.canWrite()||n.deleting()),Ae(),Wa(" ",n.deleting()?"Deleting":"Delete"," ")}}function rhe(t,e){1&t&&(be(0,"p"),st(1,"Recipe not found"),Ee())}function ihe(t,e){if(1&t&&(be(0,"section",9),gr(1,nhe,13,5)(2,rhe,2,0,"p"),Ee()),2&t){const n=Xe(2);Ae(),mr(n.selectedParsed()?1:2)}}function ohe(t,e){if(1&t){const n=Qo();be(0,"section",10)(1,"textarea",22),ot("ngModelChange",function(i){return On(n),Vn(Xe(2).rawText.set(i))}),Ee(),be(2,"div",23)(3,"button",4),ot("click",function(){return On(n),Vn(Xe(2).saveRecipe())}),st(4),Ee()()()}if(2&t){const n=Xe(2);Ae(),_r("ngModel",n.rawText())("disabled",!n.canWrite()),Ae(2),_r("disabled",n.saving()||!n.canWrite()),Ae(),Wa(" ",n.saving()?"Saving":"Save"," ")}}function she(t,e){if(1&t){const n=Qo();be(0,"header",5)(1,"h1"),st(2,"Recipes"),Ee(),be(3,"button",6),ot("click",function(){return On(n),Vn(Xe().signOut())}),st(4,"Sign out"),Ee()(),gr(5,zde,3,1,"section",7),gr(6,Jde,4,1,"section",8),gr(7,ihe,3,1,"section",9),gr(8,ohe,5,4,"section",10),be(9,"nav",11)(10,"button",12),ot("click",function(){return On(n),Vn(Xe().goTo("home"))}),st(11,"Home"),Ee(),be(12,"button",12),ot("click",function(){return On(n),Vn(Xe().goTo("list"))}),st(13,"Recipes"),Ee(),be(14,"button",4),ot("click",function(){return On(n),Vn(Xe().openAddRecipe())}),st(15,"Add"),Ee()()}if(2&t){const n=Xe();Ae(3),_r("disabled",n.authBusy()),Ae(2),mr("home"===n.page()?5:-1),Ae(),mr("list"===n.page()?6:-1),Ae(),mr("detail"===n.page()?7:-1),Ae(),mr("editor"===n.page()?8:-1),Ae(2),Jo("active","home"===n.page()),Ae(2),Jo("active","list"===n.page()),Ae(2),Jo("active","editor"===n.page()),_r("disabled",!n.canWrite())}}function ahe(t,e){if(1&t&&(be(0,"p",3),st(1),Ee()),2&t){const n=Xe();Ae(),za(n.error())}}(function oee(t,e,n){return fX({rootComponent:t,platformRef:n?.platformRef,...tV(e)})})((()=>{var t;class e{constructor(){this.api=X(Bde),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.page=wt("home"),this.searchQuery=wt(""),this.rawText=wt(""),this.selectedRecipeId=wt(null),this.recipes=wt([]),this.loading=wt(!1),this.saving=wt(!1),this.deleting=wt(!1),this.authBusy=wt(!1),this.error=wt(""),this.isEditing=Xt(()=>null!==this.selectedRecipeId()),this.parsed=Xt(()=>ug(this.rawText())),this.selectedRecipe=Xt(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=Xt(()=>{const r=this.selectedRecipe();return r?ug(r.raw_text):null}),this.filteredRecipes=Xt(()=>{const r=this.searchQuery().trim().toLowerCase(),i=this.recipes();return r?i.filter(o=>ug(o.raw_text).title.toLowerCase().includes(r)||o.raw_text.toLowerCase().includes(r)):i})}ngOnInit(){var r=this;return I(function*(){yield new Promise(o=>{const s=setInterval(()=>{r.authLoading()||(clearInterval(s),o())},50)}),r.user()&&(yield r.refresh())})()}signIn(){var r=this;return I(function*(){r.authBusy.set(!0),r.error.set("");try{yield r.api.signInWithGoogle(),yield r.refresh(),r.goTo("home")}catch(i){r.error.set(i.message)}finally{r.authBusy.set(!1)}})()}signOut(){var r=this;return I(function*(){r.authBusy.set(!0),r.error.set("");try{yield r.api.signOut(),r.selectedRecipeId.set(null),r.recipes.set([]),r.page.set("home")}catch(i){r.error.set(i.message)}finally{r.authBusy.set(!1)}})()}goTo(r){this.page.set(r)}openDetail(r){this.selectedRecipeId.set(r.id),this.page.set("detail")}openAddRecipe(){this.selectedRecipeId.set(null),this.rawText.set(""),this.page.set("editor")}openEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.page.set("editor"))}saveRecipe(){var r=this;return I(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();i?yield r.api.updateRecipe(i,r.rawText()):yield r.api.createRecipe(r.rawText()),yield r.refresh(),r.page.set("list")}catch(i){r.error.set(i.message)}finally{r.saving.set(!1)}})()}deleteSelectedRecipe(){var r=this;return I(function*(){const i=r.selectedRecipeId();if(i){r.deleting.set(!0),r.error.set("");try{yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),r.page.set("list")}catch(o){r.error.set(o.message)}finally{r.deleting.set(!1)}}})()}parsedFromRaw(r){return ug(r)}printRecipe(){window.print()}refresh(){var r=this;return I(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&(r.selectedRecipeId.set(null),"detail"===r.page()&&r.page.set("list"))}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=O0({type:e,selectors:[["app-root"]],decls:5,vars:2,consts:[[1,"app-shell"],[1,"screen","center-screen"],[1,"screen","login-screen","center-screen"],[1,"error","no-print"],["type","button",3,"click","disabled"],[1,"top-bar","no-print"],["type","button",1,"ghost",3,"click","disabled"],[1,"screen","home-screen"],[1,"screen","list-screen"],[1,"screen","detail-screen"],[1,"screen","editor-screen"],[1,"bottom-nav","no-print"],["type","button",3,"click"],[1,"search-wrap"],["type","search","placeholder","Search recipes",3,"ngModelChange","ngModel"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],[1,"recipe-card","printable-recipe"],[1,"block"],[1,"detail-actions","no-print"],["type","button",1,"danger",3,"click","disabled"],["type","button",1,"ghost",3,"click"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"editor-actions"]],template:function(i,o){1&i&&(be(0,"main",0),gr(1,qde,3,0,"section",1)(2,Gde,5,1,"section",2)(3,she,16,12),gr(4,ahe,2,1,"p",3),Ee()),2&i&&(Ae(),mr(o.authLoading()?1:o.user()?3:2),Ae(3),mr(o.error()?4:-1))},dependencies:[Fne,zp,ZV,sT],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#f8fafc}*[_ngcontent-%COMP%]{box-sizing:border-box}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:1.25rem 1rem 5.5rem;max-width:920px;margin:0 auto}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.center-screen[_ngcontent-%COMP%]{min-height:85vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}.search-wrap[_ngcontent-%COMP%]{min-height:55vh;display:grid;place-items:center}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font:inherit}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff}input[_ngcontent-%COMP%]{max-width:560px}textarea[_ngcontent-%COMP%]{min-height:55vh;resize:vertical}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff}button[_ngcontent-%COMP%]:disabled{opacity:.45}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.detail-actions[_ngcontent-%COMP%], .editor-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:.65rem}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.65rem .75rem calc(.65rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}.bottom-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#f1f5f9;color:#0f172a}.bottom-nav[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.error[_ngcontent-%COMP%]{margin-top:.75rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding-bottom:2rem}.screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:1rem 0 0;max-width:420px}}@media print{[_nghost-%COMP%]{background:#fff;color:#000}.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .detail-actions[_ngcontent-%COMP%], .editor-actions[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.app-shell[_ngcontent-%COMP%], .screen[_ngcontent-%COMP%]{padding:0;border:0;box-shadow:none;min-height:auto}}"]}))}return t(),e})()).catch(t=>console.error(t))}},$s=>{$s($s.s=183)}]);