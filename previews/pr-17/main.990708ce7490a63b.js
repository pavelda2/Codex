"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{536(){let Oa;function rl(){return Oa}function oi(t){const e=Oa;return Oa=t,e}const M3=Symbol("NotFound");function Ky(t){return t===M3||"\u0275NotFound"===t?.name}Error;let on=null,il=!1,Qy=1;const $t=Symbol("SIGNAL");function se(t){const e=on;return on=t,e}const Va={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ol(t){if(il)throw new Error("");if(null===on)return;on.consumerOnSignalRead(t);const e=on.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=on.recomputing;if(r&&(n=void 0!==e?e.nextProducer:on.producers,void 0!==n&&n.producer===t))return on.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===on&&(!r||function V3(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,on)))return;const o=Fa(on),s={producer:t,consumer:on,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};on.producersTail=s,void 0!==e?e.nextProducer=s:on.producers=s,o&&_P(t,s)}function sl(t){if((!Fa(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Qy)){if(!t.producerMustRecompute(t)&&!Pf(t))return void Rf(t);t.producerRecomputeValue(t),Rf(t)}}function gP(t){if(void 0===t.consumers)return;const e=il;il=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||x3(r)}}finally{il=e}}function mP(){return!1!==on?.consumerAllowSignalWrites}function x3(t){t.dirty=!0,gP(t),t.consumerMarkedDirty?.(t)}function Rf(t){t.dirty=!1,t.lastCleanEpoch=Qy}function La(t){return t&&function k3(t){t.producersTail=void 0,t.recomputing=!0}(t),se(t)}function al(t,e){se(e),t&&function O3(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Fa(t))do{n=Zy(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function Pf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(sl(n),r!==n.version))return!0}return!1}function cl(t){if(Fa(t)){let e=t.producers;for(;void 0!==e;)e=Zy(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function _P(t,e){const n=t.consumersTail,r=Fa(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)_P(i.producer,i)}function Zy(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Fa(e)){let o=e.producers;for(;void 0!==o;)o=Zy(o)}return n}function Fa(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function ev(t,e){return Object.is(t,e)}const Jo=Symbol("UNSET"),Ua=Symbol("COMPUTING"),zi=Symbol("ERRORED"),F3={...Va,value:Jo,dirty:!0,error:null,equal:ev,kind:"computed",producerMustRecompute:t=>t.value===Jo||t.value===Ua,producerRecomputeValue(t){if(t.value===Ua)throw new Error("");const e=t.value;t.value=Ua;const n=La(t);let r,i=!1;try{r=t.computation(),se(null),i=e!==Jo&&e!==zi&&r!==zi&&t.equal(e,r)}catch(o){r=zi,t.error=o}finally{al(t,n)}i?t.value=e:(t.value=r,t.version++)}};let yP=function U3(){throw new Error};function vP(t){yP(t)}function B3(t,e){const n=Object.create(tv);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function $3(t){return ol(t),t.value}(n);return r[$t]=n,[r,s=>Nf(n,s),s=>function IP(t,e){mP()||vP(t),Nf(t,e(t.value))}(n,s)]}function Nf(t,e){mP()||vP(t),t.equal(t.value,e)||(t.value=e,function H3(t){t.version++,function N3(){Qy++}(),gP(t)}(t))}const tv={...Va,equal:ev,value:void 0,kind:"signal"};function et(t){return"function"==typeof t}function nv(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const rv=nv(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function iv(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class wn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(et(r))try{r()}catch(o){e=o instanceof rv?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{TP(o)}catch(s){e=e??[],s instanceof rv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rv(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TP(e);else{if(e instanceof wn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&iv(n,e)}remove(e){const{_finalizers:n}=this;n&&iv(n,e),e instanceof wn&&e._removeParent(this)}}wn.EMPTY=(()=>{const t=new wn;return t.closed=!0,t})();const EP=wn.EMPTY;function wP(t){return t instanceof wn||t&&"closed"in t&&et(t.remove)&&et(t.add)&&et(t.unsubscribe)}function TP(t){et(t)?t():t.unsubscribe()}const Zo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xf={setTimeout(t,e,...n){const{delegate:r}=xf;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=xf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function bP(t){xf.setTimeout(()=>{const{onUnhandledError:e}=Zo;if(!e)throw t;e(t)})}function ov(){}const q3=sv("C",void 0,void 0);function sv(t,e,n){return{kind:t,value:e,error:n}}let Xo=null;function kf(t){if(Zo.useDeprecatedSynchronousErrorHandling){const e=!Xo;if(e&&(Xo={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Xo;if(Xo=null,n)throw r}}else t()}class av extends wn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wP(e)&&e.add(this)):this.destination=J3}static create(e,n,r){return new uv(e,n,r)}next(e){this.isStopped?lv(function G3(t){return sv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?lv(function z3(t){return sv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lv(q3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const K3=Function.prototype.bind;function cv(t,e){return K3.call(t,e)}class Q3{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Of(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Of(r)}else Of(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Of(n)}}}class uv extends av{constructor(e,n,r){let i;if(super(),et(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Zo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cv(e.next,o),error:e.error&&cv(e.error,o),complete:e.complete&&cv(e.complete,o)}):i=e}this.destination=new Q3(i)}}function Of(t){Zo.useDeprecatedSynchronousErrorHandling?function W3(t){Zo.useDeprecatedSynchronousErrorHandling&&Xo&&(Xo.errorThrown=!0,Xo.error=t)}(t):bP(t)}function lv(t,e){const{onStoppedNotification:n}=Zo;n&&xf.setTimeout(()=>n(t,e))}const J3={closed:!0,next:ov,error:function Y3(t){throw t},complete:ov},dv="function"==typeof Symbol&&Symbol.observable||"@@observable";function es(t){return t}function CP(t){return 0===t.length?es:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Mt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function eG(t){return t&&t instanceof av||function X3(t){return t&&et(t.next)&&et(t.error)&&et(t.complete)}(t)&&wP(t)}(n)?n:new uv(n,r,i);return kf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=SP(r))((i,o)=>{const s=new uv({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[dv](){return this}pipe(...n){return CP(n)(this)}toPromise(n){return new(n=SP(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function SP(t){var e;return null!==(e=t??Zo.Promise)&&void 0!==e?e:Promise}const tG=nv(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Vn=(()=>{class t extends Mt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new AP(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tG}next(n){kf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){kf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){kf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?EP:(this.currentObservers=null,o.push(n),new wn(()=>{this.currentObservers=null,iv(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Mt;return n.source=this,n}}return t.create=(e,n)=>new AP(e,n),t})();class AP extends Vn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:EP}}class ur extends Vn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const RP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class U extends Error{code;constructor(e,n){super(xr(e,n)),this.code=e}}function xr(t,e){return`${function nG(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const ft=globalThis;function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("")}function rG(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ln(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Ln).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function hv(t,e){return t?e?`${t} ${e}`:t:e||""}const iG=Me({__forward_ref__:Me});function Ye(t){return t.__forward_ref__=Ye,t.toString=function(){return Ln(this())},t}function he(t){return Lf(t)?t():t}function Lf(t){return"function"==typeof t&&t.hasOwnProperty(iG)&&t.__forward_ref__===Ye}function te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ul(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ff(t){return function dG(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,jf)}function Uf(t){return t&&t.hasOwnProperty(fv)?t[fv]:null}const jf=Me({\u0275prov:Me}),fv=Me({\u0275inj:Me});class H{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gv(t){return t&&!!t.\u0275providers}const mv=Me({\u0275cmp:Me}),_G=Me({\u0275dir:Me}),yG=Me({\u0275pipe:Me}),PP=Me({\u0275mod:Me}),ns=Me({\u0275fac:Me}),hl=Me({__NG_ELEMENT_ID__:Me}),MP=Me({__NG_ENV_ID__:Me});function ue(t){return"string"==typeof t?t:null==t?"":String(t)}const _v=Me({ngErrorCode:Me}),NP=Me({ngErrorMessage:Me}),fl=Me({ngTokenPath:Me});function yv(t,e){return xP("",-200,e)}function vv(t,e){throw new U(-201,!1)}function xP(t,e,n){const r=new U(e,t);return r[_v]=e,r[NP]=t,n&&(r[fl]=n),r}let Iv;function kP(){return Iv}function Fn(t){const e=Iv;return Iv=t,e}function OP(t,e,n){const r=Ff(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void vv()}const rs={};class bG{injector;constructor(e){this.injector=e}retrieve(e,n){const r=pl(n)||0;try{return this.injector.get(e,8&r?null:rs,r)}catch(i){if(Ky(i))return i;throw i}}}function CG(t,e=0){const n=rl();if(void 0===n)throw new U(-203,!1);if(null===n)return OP(t,void 0,e);{const r=function SG(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(Ky(i)){if(r.optional)return null;throw i}return i}}function ye(t,e=0){return(kP()||CG)(he(t),e)}function O(t,e){return ye(t,pl(e))}function pl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wv(t){const e=[];for(let n=0;n<t.length;n++){const r=he(t[n]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=AG(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(ye(i,o))}else e.push(ye(r))}return e}function AG(t){return t.__NG_DI_FLAG__}function is(t,e){return t.hasOwnProperty(ns)?t[ns]:null}function ja(t,e){t.forEach(n=>Array.isArray(n)?ja(n,e):e(n))}function LP(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $f(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qf(t,e,n){let r=ml(t,e);return r>=0?t[1|r]=n:(r=~r,function UP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Tv(t,e){const n=ml(t,e);if(n>=0)return t[1|n]}function ml(t,e){return function RG(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const kr={},Je=[],Wi=new H(""),jP=new H("",-1),bv=new H("");class zf{get(e,n=rs){if(n===rs){const i=xP("",-201);throw i.name="\u0275NotFound",i}return n}}function Or(t){return t[PP]||null}function xe(t){return t[mv]||null}function Tn(t){return t[_G]||null}function Ir(t){return t[yG]||null}function MG(...t){return{\u0275providers:Av(0,t),\u0275fromNgModule:!0}}function Av(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return ja(e,s=>{const a=s;Gf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&BP(i,o),n}function BP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Dv(i,o=>{e(o,r)})}}function Gf(t,e,n,r){if(!(t=he(t)))return!1;let i=null,o=Uf(t);const s=!o&&xe(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Uf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Gf(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{ja(o.imports,d=>{Gf(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&BP(u,e)}if(!a){const u=is(i)||(()=>new i);e({provide:i,useFactory:u,deps:Je},i),e({provide:bv,useValue:i,multi:!0},i),e({provide:Wi,useValue:()=>ye(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;Dv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function Dv(t,e){for(let n of t)gv(n)&&(n=n.\u0275providers),Array.isArray(n)?Dv(n,e):e(n)}const NG=Me({provide:String,useValue:Me});function Rv(t){return null!==t&&"object"==typeof t&&NG in t}function si(t){return"function"==typeof t}const Pv=new H(""),Wf={},zP={};let Mv;function Nv(){return void 0===Mv&&(Mv=new zf),Mv}class bn{}class os extends bn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,kv(e,s=>this.processProvider(s)),this.records.set(jP,$a(void 0,this)),i.has("environment")&&this.records.set(bn,$a(void 0,this));const o=this.records.get(Pv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bv,Je,{self:!0}))}retrieve(e,n){const r=pl(n)||0;try{return this.get(e,rs,r)}catch(i){if(Ky(i))return i;throw i}}destroy(){_l(this),this._destroyed=!0;const e=se(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return _l(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){_l(this);const n=oi(this),r=Fn(void 0);try{return e()}finally{oi(n),Fn(r)}}get(e,n=rs,r){if(_l(this),e.hasOwnProperty(MP))return e[MP](this);const i=pl(r),s=oi(this),a=Fn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function LG(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&Ff(e);u=d&&this.injectableDefInScope(d)?$a(xv(e),Wf):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?Nv():this.parent).get(e,n=8&i&&n===rs?null:n)}catch(c){const u=function wG(t){return t[_v]}(c);throw-200===u||-201===u?new U(u,null):c}finally{Fn(a),oi(s)}}resolveInjectorInitializers(){const e=se(null),n=oi(this),r=Fn(void 0);try{const o=this.get(Wi,Je,{self:!0});for(const s of o)s()}finally{oi(n),Fn(r),se(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ln(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=si(e=he(e))?e:he(e&&e.provide);const r=function kG(t){return Rv(t)?$a(void 0,t.useValue):$a(GP(t),Wf)}(e);if(!si(e)&&!0===e.multi){let i=this.records.get(n);i||(i=$a(void 0,Wf,!0),i.factory=()=>wv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=se(null);try{if(n.value===zP)throw yv(Ln(e));return n.value===Wf&&(n.value=zP,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function VG(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=he(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function xv(t){const e=Ff(t),n=null!==e?e.factory:is(t);if(null!==n)return n;if(t instanceof H)throw new U(204,!1);if(t instanceof Function)return function xG(t){if(t.length>0)throw new U(204,!1);const n=function hG(t){return(t?.[jf]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new U(204,!1)}function GP(t,e,n){let r;if(si(t)){const i=he(t);return is(i)||xv(i)}if(Rv(t))r=()=>he(t.useValue);else if(function HP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...wv(t.deps||[]));else if(function $P(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>ye(he(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=he(t&&(t.useClass||t.provide));if(!function OG(t){return!!t.deps}(t))return is(i)||xv(i);r=()=>new i(...wv(t.deps))}return r}function _l(t){if(t.destroyed)throw new U(205,!1)}function $a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kv(t,e){for(const n of t)Array.isArray(n)?kv(n,e):n&&gv(n)?kv(n.\u0275providers,e):e(n)}function dr(t,e){let n;t instanceof os?(_l(t),n=t):n=new bG(t);const i=oi(n),o=Fn(void 0);try{return e()}finally{oi(i),Fn(o)}}function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Cn(t){return Array.isArray(t)&&!0===t[1]}function KP(t){return!!(4&t.flags)}function ui(t){return t.componentOffset>-1}function Wa(t){return!(1&~t.flags)}function Jn(t){return!!t.template}function Zi(t){return!!(512&t[2])}function li(t){return!(256&~t[2])}function qt(t){for(;Array.isArray(t);)t=t[0];return t}function Ka(t,e){return qt(e[t])}function xt(t,e){return qt(e[t.index])}function Qa(t,e){return t.data[e]}function Sn(t,e){const n=e[t];return dt(n)?n:n[0]}function Uv(t){return!(128&~t[2])}function cn(t,e){return null==e?null:t[e]}function eM(t){t[17]=0}function tM(t){1024&t[2]||(t[2]|=1024,Uv(t)&&Ya(t))}function Jf(t){return!!(9216&t[2]||t[24]?.dirty)}function jv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),Jf(t)&&Ya(t)}function Ya(t){t[10].changeDetectionScheduler?.notify(0);let e=di(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Uv(e));)e=di(e)}function Zf(t,e){if(li(t))throw new U(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function di(t){const e=t[3];return Cn(e)?e[3]:e}function rM(t){return t[7]??=[]}function iM(t){return t.cleanup??=[]}const ae={lFrame:vM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Hv=!1;function oM(){ae.lFrame.elementDepthCount--}function aM(t){return ae.skipHydrationRootTNode===t}function cM(){ae.skipHydrationRootTNode=null}function V(){return ae.lFrame.lView}function fe(){return ae.lFrame.tView}function Xi(t){return ae.lFrame.contextLView=t,t[8]}function eo(t){return ae.lFrame.contextLView=null,t}function ce(){let t=uM();for(;null!==t&&64===t.type;)t=t.parent;return t}function uM(){return ae.lFrame.currentTNode}function hi(t,e){const n=ae.lFrame;n.currentTNode=t,n.isParent=e}function lM(){return ae.lFrame.isParent}function pM(){return Hv}function Xf(t){const e=Hv;return Hv=t,e}function Un(){return ae.lFrame.bindingIndex++}function pi(t){const e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function YG(t,e){const n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,zv(e)}function zv(t){ae.lFrame.currentDirectiveIndex=t}function Wv(){return ae.lFrame.currentQueryIndex}function ep(t){ae.lFrame.currentQueryIndex=t}function ZG(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function _M(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=ZG(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ae.lFrame=yM();return r.currentTNode=e,r.lView=t,!0}function Kv(t){const e=yM(),n=t[1];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yM(){const t=ae.lFrame,e=null===t?null:t.child;return null===e?vM(t):e}function vM(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function IM(){const t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const EM=IM;function Qv(){const t=IM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jt(){return ae.lFrame.selectedIndex}function ls(t){ae.lFrame.selectedIndex=t}function Vr(){const t=ae.lFrame;return Qa(t.tView,t.selectedIndex)}let wM=!0;function tp(){return wM}function El(t){wM=t}function TM(t,e=null,n=null,r){const i=bM(t,e,n,r);return i.resolveInjectorInitializers(),i}function bM(t,e=null,n=null,r,i=new Set){const o=[n||Je,MG(t)];return r=r||("object"==typeof t?void 0:Ln(t)),new os(o,e||Nv(),r||null,i)}class Zn{static THROW_IF_NOT_FOUND=rs;static NULL=new zf;static create(e,n){if(Array.isArray(e))return TM({name:""},n,e,"");{const r=e.name??"";return TM({name:r},e.parent,e.providers,r)}}static \u0275prov=te({token:Zn,providedIn:"any",factory:()=>ye(jP)});static __NG_ELEMENT_ID__=-1}const Er=new H("");let Lr=(()=>class t{static __NG_ELEMENT_ID__=o6;static __NG_ENV_ID__=n=>n})();class CM extends Lr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return li(this._lView)}onDestroy(e){const n=this._lView;return Zf(n,e),()=>function Bv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function o6(){return new CM(V())}class Za{_console=console;handleError(e){this._console.error("ERROR",e)}}const Fr=new H("",{providedIn:"root",factory:()=>{const t=O(bn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Za),e.handleError(n))}}}),SM={provide:Wi,useValue:()=>{O(Za)},multi:!0};function Tt(t,e){const[n,r,i]=B3(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=Yv.bind(o),o}function Yv(){const t=this[$t];if(void 0===t.readonlyFn){const e=()=>this();e[$t]=t,t.readonlyFn=e}return t.readonlyFn}let Jv=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=a6})();function a6(){return new Jv(V(),ce())}class ds{}const RM=new H("",{providedIn:"root",factory:()=>!1}),PM=new H(""),MM=new H("");let to=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ur(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Mt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}return t})();function wl(...t){}let xM=(()=>{class t{static \u0275prov=te({token:t,providedIn:"root",factory:()=>new c6})}return t})();class c6{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let kM=null;function no(){return kM}class l6{}let OM=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(d6),providedIn:"platform"})}return t})(),d6=(()=>{class t extends OM{_location;_history;_doc=O(Er);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return no().getBaseHref(this._doc)}onPopState(n){const r=no().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=no().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function VM(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function LM(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function hs(t){return t&&"?"!==t[0]?`?${t}`:t}let np=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(f6),providedIn:"root"})}return t})();const h6=new H("");let f6=(()=>{class t extends np{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Er).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return VM(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+hs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+hs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+hs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ye(OM),ye(h6,8))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tl=(()=>{class t{_subject=new Vn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function m6(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(LM(FM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+hs(r))}normalize(n){return t.stripTrailingSlash(function g6(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,FM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=hs;static joinWithSlash=VM;static stripTrailingSlash=LM;static \u0275fac=function(r){return new(r||t)(ye(np))};static \u0275prov=te({token:t,factory:()=>function p6(){return new Tl(ye(np))}(),providedIn:"root"})}return t})();function FM(t){return t.replace(/\/index.html$/,"")}function YM(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){YM(o,r,i,s,a,"next",c)}function a(c){YM(o,r,i,s,a,"throw",c)}s(void 0)})}}function JM(t){return et(t?.lift)}function Zt(t){return e=>{if(JM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(t,e,n,r,i){return new X6(t,e,n,r,i)}class X6 extends av{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ke(t,e){return Zt((n,r)=>{let i=0;n.subscribe(Ut(r,o=>{r.next(t.call(e,o,i++))}))})}function gi(t){return{toString:t}.toString()}class O5{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function lN(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const mi=(()=>{const t=()=>dN;return t.ngInherit=!0,t})();function dN(t){return t.type.prototype.ngOnChanges&&(t.setInput=L5),V5}function V5(){const t=fN(this),e=t?.current;if(e){const n=t.previous;if(n===kr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function L5(t,e,n,r,i){const o=this.declaredInputs[r],s=fN(t)||function F5(t,e){return t[hN]=e}(t,{previous:kr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new O5(u&&u.currentValue,n,c===kr),lN(t,e,i,n)}const hN="__ngSimpleChanges__";function fN(t){return t[hN]||null}const ps=[],Oe=function(t,e=null,n){for(let r=0;r<ps.length;r++)(0,ps[r])(t,e,n)};function hp(t,e,n){gN(t,e,3,n)}function fp(t,e,n,r){(3&t[2])===n&&gN(t,e,n,r)}function cI(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function gN(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(H5(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function mN(t,e){Oe(4,t,e);const n=se(null);try{e.call(t)}finally{se(n),Oe(5,t,e)}}function H5(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,mN(a,o)):mN(a,o)}class Pl{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function yN(t){return 3===t||4===t||6===t}function vN(t){return 64===t.charCodeAt(0)}function sc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||IN(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function IN(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function lI(t){return-1!==t}function Ml(t){return 32767&t}function Nl(t,e){let n=function W5(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let dI=!0;function pp(t){const e=dI;return dI=t,e}let K5=0;const jr={};function gp(t,e){const n=TN(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,hI(r.data,t),hI(e,null),hI(r.blueprint,null));const i=mp(t,e),o=t.injectorIndex;if(lI(i)){const s=Ml(i),a=Nl(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function hI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function TN(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function mp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=PN(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function fI(t,e,n){!function Q5(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(hl)&&(r=n[hl]),null==r&&(r=n[hl]=K5++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function bN(t,e,n){if(8&n||void 0!==t)return t;vv()}function CN(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=Fn(void 0);try{return i?i.get(e,r,8&n):OP(e,r,8&n)}finally{Fn(o)}}return bN(r,0,n)}function SN(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function eW(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!Zi(s);){const a=AN(o,s,n,2|r,jr);if(a!==jr)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,jr,r);if(d!==jr)return d}c=PN(s),s=s[14]}o=c}return i}(t,e,n,r,jr);if(s!==jr)return s}const o=AN(t,e,n,r,jr);if(o!==jr)return o}return CN(e,n,r,i)}function AN(t,e,n,r,i){const o=function Z5(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(hl)?t[hl]:void 0;return"number"==typeof e?e>=0?255&e:X5:e}(n);if("function"==typeof o){if(!_M(e,t,r))return 1&r?bN(i,0,r):CN(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;vv()}finally{EM()}}else if("number"==typeof o){let s=null,a=TN(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?mp(t,e):e[a+8],-1!==c&&RN(r,!1)?(s=e[1],a=Ml(c),e=Nl(c,e)):a=-1);-1!==a;){const d=e[1];if(DN(o,a,d.data)){const h=J5(a,e,n,s,r,u);if(h!==jr)return h}c=e[a+8],-1!==c&&RN(r,e[1].data[a+8]===u)&&DN(o,a,e)?(s=d,a=Ml(c),e=Nl(c,e)):a=-1}}return i}function J5(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=_p(a,s,n,null==r?ui(a)&&dI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?xl(e,s,d,a,i):jr}function _p(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&Jn(g)&&g.type===n)return c}return null}function xl(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof Pl){const a=o;if(a.resolving)throw function be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(s[n]),yv();const c=pp(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Fn(a.injectImpl):null;_M(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function $5(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=dN(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&Fn(h),pp(c),a.resolving=!1,EM()}}return o}function DN(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function RN(t,e){return!(2&t||1&t&&e)}class mt{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return SN(this._tNode,this._lView,e,pl(r),n)}}function X5(){return new mt(ce(),V())}function zt(t){return gi(()=>{const e=t.prototype.constructor,n=e[ns]||pI(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[ns]||pI(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function pI(t){return Lf(t)?()=>{const e=pI(he(t));return e&&e()}:is(t)}function PN(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function yp(t){return function Y5(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(yN(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(ce(),t)}function cW(){return ac(ce(),V())}function ac(t,e){return new wr(xt(t,e))}let wr=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=cW})();function ON(t){return t instanceof wr?t.nativeElement:t}function uW(){return this._results[Symbol.iterator]()}class lW{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Vn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function lr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function DG(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=uW}function kl(t){return!(128&~t.flags)}var Ip=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ip||{});const Ep=new Map;let fW=0;function _I(t){Ep.delete(t[19])}const vI="__ngContext__";function Bn(t,e){dt(e)?(t[vI]=e[19],function gW(t){Ep.set(t[19],t)}(e)):t[vI]=e}function GN(t){return KN(t[12])}function WN(t){return KN(t[4])}function KN(t){for(;null!==t&&!Cn(t);)t=t[4];return t}let II;const Vl=new H("",{providedIn:"root",factory:()=>LW}),LW="ng",t0=new H(""),n0=new H("",{providedIn:"platform",factory:()=>"unknown"}),r0=new H("",{providedIn:"root",factory:()=>function oo(){if(void 0!==II)return II;if(typeof document<"u")return document;throw new U(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),zW=new H("",{providedIn:"root",factory:()=>!1});function Sp(t){return!(32&~t.flags)}function D0(t,e){const n=t.contentQueries;if(null!==n){const r=se(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];ep(n[i]),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function FI(t,e,n){ep(0);const r=se(null);try{e(t,n)}finally{se(r)}}function UI(t,e,n){if(KP(e)){const r=se(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{se(r)}}}var _i=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(_i||{});let kp;function O0(t){return function $I(){if(void 0===kp&&(kp=null,ft.trustedTypes))try{kp=ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kp}()?.createScriptURL(t)||t}class V0{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RP})`}}function ao(t){return t instanceof V0?t.changingThisBreaksApplicationSecurity:t}function Ul(t,e){const n=function D9(t){return t instanceof V0&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${RP})`)}return n===e}const N9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vp(t,e,n){return t.createElement(e,n)}function ms(t,e,n,r,i){t.insertBefore(e,n,r,i)}function W0(t,e,n){t.appendChild(e,n)}function K0(t,e,n,r,i){null!==r?ms(t,e,n,r,i):W0(t,e,n)}function Bl(t,e,n,r){t.removeChild(null,e,n,r)}function Y0(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function G5(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];vN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function G9(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function z9(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var fc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fc||{});function J0(t){const e=$l();return e?e.sanitize(fc.URL,t)||"":Ul(t,"URL")?ao(t):function HI(t){return(t=String(t)).match(N9)?t:"unsafe:"+t}(ue(t))}function Z0(t){const e=$l();if(e)return O0(e.sanitize(fc.RESOURCE_URL,t)||"");if(Ul(t,"ResourceURL"))return O0(ao(t));throw new U(904,!1)}const X9=new Set(["embed","frame","iframe","media","script"]),e8=new Set(["base","link","script"]);function X0(t,e,n){return function t8(t,e){return"src"===e&&X9.has(t)||"href"===e&&e8.has(t)||"xlink:href"===e&&"script"===t?Z0:J0}(e,n)(t)}function $l(){const t=V();return t&&t[10].sanitizer}function Br(t){return t instanceof Function?t():t}function h8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const ix="ng-template";function f8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==h8(e[i+1].toLowerCase(),n,0))return!0}else if(QI(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function QI(t){return 4===t.type&&t.value!==ix}function p8(t,e,n){return e===(4!==t.type||n?t.value:ix)}function g8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function y8(t){for(let e=0;e<t.length;e++)if(yN(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!p8(t,c,n)||""===c&&1===e.length){if(Tr(r))return!1;s=!0}}else if(8&r){if(null===i||!f8(t,i,c,n)){if(Tr(r))return!1;s=!0}}else{const u=e[++a],d=m8(c,i,QI(t),n);if(-1===d){if(Tr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Tr(r))return!1;s=!0}}}}else{if(!s&&!Tr(r)&&!Tr(c))return!1;if(s&&Tr(c))continue;s=!1,r=c|1&r}}return Tr(r)||s}function Tr(t){return!(1&t)}function m8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function v8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ox(t,e,n=!1){for(let r=0;r<e.length;r++)if(g8(t,e[r],n))return!0;return!1}function sx(t,e){return t?":not("+e.trim()+")":e}function E8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Tr(s)&&(e+=sx(o,i),i=""),r=s,o=o||!Tr(r);n++}return""!==i&&(e+=sx(o,i)),e}const Ve={};function YI(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function b8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ve);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function Fp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),eM(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function pW(){return fW++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function JI(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Hl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ZI(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function _e(t=1){cx(fe(),V(),Jt()+t,!1)}function cx(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&fp(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&hp(e,o,n)}ls(n)}var Up=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Up||{});function ql(t,e,n,r){const i=se(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&Up.SignalBased)&&(c=e[o][$t]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):lN(e,c,o,r)}finally{se(i)}}var _s=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_s||{});function eE(t,e){return undefined(t,e)}const ys=new Set;var tE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(tE||{});const zl=new H(""),hx=new Set;function ln(t){hx.has(t)||(hx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const fx=!1,kt=class M8 extends Vn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Ov(){return void 0!==kP()||null!=rl()}()&&(this.destroyRef=O(Lr,{optional:!0})??void 0,this.pendingTasks=O(to,{optional:!0})??void 0)}emit(e){const n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof wn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function px(t){let e,n;function r(){t=wl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gx(t){return queueMicrotask(()=>t()),()=>{t=wl}}const nE="isAngularZone",Bp=nE+"_ID";let N8=0;class Ne{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new kt(!1);onMicrotaskEmpty=new kt(!1);onStable=new kt(!1);onError=new kt(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=fx}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function O8(t){const e=()=>{!function k8(t){function e(){px(()=>{t.callbackScheduled=!1,iE(t),t.isCheckStableRunning=!0,rE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),iE(t))}(t)},n=N8++;t._inner=t._inner.fork({name:"angular",properties:{[nE]:!0,[Bp]:n,[Bp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function V8(t){return yx(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return mx(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),_x(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return mx(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function L8(t){return yx(t,"__scheduler_tick__")}(c)&&e(),_x(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,iE(t),rE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(nE)}static assertInAngularZone(){if(!Ne.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(Ne.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,x8,wl,wl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const x8={};function rE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function mx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _x(t){t._nesting--,rE(t)}class oE{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new kt;onMicrotaskEmpty=new kt;onStable=new kt;onError=new kt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function yx(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let vx=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}return t})();const $p=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Tx(t,e,n){const r=t.get($p);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function bx(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function aE(t,e){for(const[n,r]of e)Tx(t,r.animateFns)}(r,i)}function mc(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;Cn(i)?c=i:dt(i)&&(u=!0,i=i[0]);const d=qt(i);0===t&&null!==r?(bx(a,r,o,n),null==s?W0(e,r,d):ms(e,r,d,s||null,!0)):1===t&&null!==r?(bx(a,r,o,n),ms(e,r,d,s||null,!0)):2===t?Ax(a,o,n,h=>{Bl(e,d,u,h)}):3===t&&Ax(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function Y8(t,e,n,r,i,o,s){const a=r[7];a!==qt(r)&&mc(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];zp(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function Sx(t,e){e[10].changeDetectionScheduler?.notify(9),zp(t,e,e[11],2,null,null)}function cE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Gl(t,e){if(li(e))return;const n=e[11];n.destroyNode&&zp(t,e,n,3,null,null),function z8(t){let e=t[12];if(!e)return uE(t[1],t);for(;e;){let n=null;if(dt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&uE(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&uE(e[1],e),n=e&&e[4]}e=n}}(e)}function uE(t,e){if(li(e))return;const n=se(null);try{e[2]&=-129,e[2]|=256,e[24]&&cl(e[24]),function K8(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Pl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Oe(4,a,c);try{c.call(a)}finally{Oe(5,a,c)}}else{Oe(4,i,o);try{o.call(i)}finally{Oe(5,i,o)}}}}}(t,e),function W8(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Cn(e[3])){r!==e[3]&&cE(r,e);const i=e[18];null!==i&&i.detachView(t)}_I(e)}finally{se(n)}}function Ax(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&ys.add(t),Tx(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function G8(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,ys.delete(t),e(!0)}):e(!1)}(t,r)}else t&&ys.delete(t),r(!1)},i)}function lE(t,e,n){return function Dx(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(ui(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===_i.None||i===_i.Emulated)return null}return xt(r,n)}(t,e.parent,n)}let Mx=function Px(t,e,n){return 40&t.type?xt(t,n):null};function hE(t,e,n,r){const i=lE(t,r,e),o=e[11],a=function Rx(t,e,n){return Mx(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)K0(o,i,n[c],a,!1);else K0(o,i,n,a,!1)}function vs(t,e){if(null!==e){const n=e.type;if(3&n)return xt(e,t);if(4&n)return qp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return vs(t,r);{const i=t[e.index];return Cn(i)?qp(-1,i):qt(i)}}if(128&n)return vs(t,e.next);if(32&n)return eE(e,t)()||qt(t[e.index]);{const r=xx(t,e);return null!==r?Array.isArray(r)?r[0]:vs(di(t[15]),r):vs(t,e.next)}}return null}function xx(t,e){return null!==e?t[15][5].projection[e.projection]:null}function qp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return vs(r,i)}return e[7]}function fE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&Bn(qt(c),r),n.flags|=2),!Sp(n))if(8&u)fE(t,e,n.child,r,i,o,!1),mc(e,t,a,i,c,n,o,r);else if(32&u){const d=eE(n,r);let h;for(;h=d();)mc(e,t,a,i,h,n,o,r);mc(e,t,a,i,c,n,o,r)}else 16&u?kx(t,e,r,n,i,o):mc(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function zp(t,e,n,r,i,o){fE(n,r,t.firstChild,e,i,o,!1)}function kx(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)mc(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];kl(r)&&(u.flags|=128),fE(t,e,u,d,i,o,!0)}}function Ox(t,e,n,r,i){const o=Jt(),s=2&r;try{ls(-1),s&&e.length>27&&cx(t,e,27,!1),Oe(s?2:0,i,n),n(r,i)}finally{ls(o),Oe(s?3:1,i,n)}}function Gp(t,e,n){(function n7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;ui(n)&&function C8(t,e,n){const r=xt(e,t),i=function ax(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=YI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=ZI(t,Fp(t,i,null,JI(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||gp(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=xl(e,t,s,n);Bn(c,e),null!==o&&s7(0,s-r,c,a,0,o),Jn(a)&&(Sn(n.index,e)[8]=xl(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function r7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function JG(){return ae.lFrame.currentDirectiveIndex}();try{ls(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];zv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&i7(c,u)}}finally{ls(-1),zv(s)}}(t,e,n)}function _c(t,e,n=xt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let Vx=()=>null;function pE(t,e,n,r,i,o){Yp(t,e[1],e,n,r)?ui(t)&&function Lx(t,e){const n=Sn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function t7(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),gE(t,e,n,r,i,o))}function gE(t,e,n,r,i,o){if(3&t.type){const s=xt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function i7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function mE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];ox(e,o.selectors,!1)&&(r??=[],Jn(o)?r.unshift(o):r.push(o))}return r}function s7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)ql(r,n,s[a],s[a+1])}function Kp(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,hi(t,!0);const c=2===t.type;return c?(Y0(e[11],a,t),(0===function zG(){return ae.lFrame.elementDepthCount}()||Wa(t))&&Bn(a,e),function GG(){ae.lFrame.elementDepthCount++}()):Bn(a,e),tp()&&(!c||!Sp(t))&&hE(s,e,a,t),t}function Qp(t){let e=t;return lM()?function dM(){ae.lFrame.isParent=!1}():(e=e.parent,hi(e,!1)),e}function Yp(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];ql(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)ql(e.data[c],n[c],r,i),a=!0;return a}function c7(t,e){const n=Sn(e,t),r=n[1];!function u7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),Oe(18),Jp(r,n,n[8]),Oe(19,n[8])}function Jp(t,e,n){Kv(e);try{const r=t.viewQuery;null!==r&&FI(1,r,n);const i=t.template;null!==i&&Ox(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&D0(t,e),t.staticViewQueries&&FI(2,t.viewQuery,n);const o=t.components;null!==o&&function l7(t,e){for(let n=0;n<e.length;n++)c7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Qv()}}function yc(t,e,n,r){const i=se(null);try{const o=e.tView,c=Fp(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),Jp(o,c,n),c}finally{se(i)}}function Is(t,e){return!e||null===e.firstChild||kl(t)}function Wl(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(qt(o)),Cn(o)&&d7(o,r);const s=n.type;if(8&s)Wl(t,e,n.child,r);else if(32&s){const a=eE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=xx(e,n);if(Array.isArray(a))r.push(...a);else{const c=di(e[15]);Wl(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function d7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&Wl(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function jx(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let Bx=[];const g7={...Va,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ya(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},_7={...Va,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=di(t.lView);for(;e&&!$x(e[1]);)e=di(e);e&&tM(e)},consumerOnSignalRead(){this.lView[24]=this}};function $x(t){return 2!==t.type}function Hx(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function Zp(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function v7(t,e){const n=pM();try{Xf(!0),yE(t,e);let r=0;for(;Jf(t);){if(100===r)throw new U(103,!1);r++,yE(t,1)}}finally{Xf(n)}}(t,e)}finally{r.end?.()}}function qx(t,e,n,r){if(li(e))return;const i=e[2];Kv(e);let a=!0,c=null,u=null;$x(t)?(u=function h7(t){return t[24]??function f7(t){const e=Bx.pop()??Object.create(g7);return e.lView=t,e}(t)}(e),c=La(u)):null===function Jy(){return on}()?(a=!1,u=function m7(t){const e=t[24]??Object.create(_7);return e.lView=t,e}(e),c=La(u)):e[24]&&(cl(e[24]),e[24]=null);try{eM(e),function gM(t){return ae.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Ox(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&hp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&fp(e,g,0,null),cI(e,0)}if(function I7(t){for(let e=GN(t);null!==e;e=WN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)tM(n[r])}}(e),Hx(e),zx(e,0),null!==t.contentQueries&&D0(t,e),d){const g=t.contentCheckHooks;null!==g&&hp(e,g)}else{const g=t.contentHooks;null!==g&&fp(e,g,1),cI(e,1)}!function w7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ls(~i);else{const o=i,s=n[++r],a=n[++r];YG(s,o);const c=e[o];Oe(24,c),a(2,c),Oe(25,c)}}}finally{ls(-1)}}(t,e);const h=t.components;null!==h&&Wx(e,h,0);const f=t.viewQuery;if(null!==f&&FI(2,f,r),d){const g=t.viewCheckHooks;null!==g&&hp(e,g)}else{const g=t.viewHooks;null!==g&&fp(e,g,2),cI(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}jx(e),e[2]&=-73}catch(d){throw Ya(e),d}finally{null!==u&&(al(u,c),a&&function p7(t){t.lView[24]!==t&&(t.lView=null,Bx.push(t))}(u)),Qv()}}function zx(t,e){for(let n=GN(t);null!==n;n=WN(n))for(let r=10;r<n.length;r++)Gx(n[r],e)}function E7(t,e,n){Oe(18);const r=Sn(e,t);Gx(r,n),Oe(19,r[8])}function Gx(t,e){Uv(t)&&yE(t,e)}function yE(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!Pf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)qx(r,t,r.template,t[8]);else if(8192&i){const a=se(null);try{Hx(t),zx(t,1);const c=r.components;null!==c&&Wx(t,c,1),jx(t)}finally{se(a)}}}function Wx(t,e,n){for(let r=0;r<e.length;r++)E7(t,e[r],n)}function vc(t,e){const n=pM()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=di(t);if(Zi(t)&&!r)return t;t=r}return null}function Kx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qx(t,e){const n=10+e;if(n<t.length)return t[n]}function Ic(t,e,n,r=!0){const i=e[1];if(function T7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],LP(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&Yx(s,e);const a=e[18];null!==a&&a.insertView(t),jv(e),e[2]|=128}(i,e,t,n),r){const s=qp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function q8(t,e,n,r,i,o){r[0]=i,r[5]=e,zp(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function vE(t,e){const n=Kl(t,e);return void 0!==n&&Gl(n[1],n),n}function Kl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&cE(i,r),e>0&&(t[n-1][4]=r[4]);const o=$f(t,10+e);!function Cx(t,e){Sx(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Yx(t,e){const n=t[9],r=e[3];(dt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Ql{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return Wl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return li(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Cn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Kl(e,r),$f(n,r))}this._attachedToViewContainer=!1}Gl(this._lView[1],this._lView)}onDestroy(e){Zf(this._lView,e)}markForCheck(){vc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){jv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Zp(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Zi(this._lView),n=this._lView[16];null!==n&&!e&&cE(n,this._lView),Sx(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;const n=Zi(this._lView),r=this._lView[16];null!==r&&!n&&Yx(r,this._lView),jv(this._lView)}}let Xp=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=b7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=yc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ql(o)}})();function b7(){return eg(ce(),V())}function eg(t,e){return 4&t.type?new Xp(e,t,ac(t,e)):null}function Es(t,e,n,r,i){let o=t.data[e];if(null===o)o=function TE(t,e,n,r,i){const o=uM(),s=lM(),c=t.data[e]=function x7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function sM(){return null!==ae.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function N7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function QG(){return ae.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Il(){const t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return hi(o,!0),o}function gk(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;Bl(e,r,!1),r=o,n++}}}let gK=class{},Ek=class{};class mK{resolveComponentFactory(e){throw new U(917,!1)}}let cg=class{static NULL=new mK};class PE{}let Ts=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function _K(){const t=V(),n=Sn(ce().index,t);return(dt(n)?n:t)[11]}()})(),yK=(()=>{class t{static \u0275prov=te({token:t,providedIn:"root",factory:()=>null})}return t})();const NE={};class wc{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,NE,r);return i!==NE||n===NE?i:this.parentInjector.get(e,n,r)}}function lg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=hv(i,a):2==o&&(r=hv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Z(t,e=0){const n=V();return null===n?ye(t,e):SN(ce(),n,he(t),e)}function bK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function bk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),Sk(e,o)}}function Ck(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Sk(e,s)}}function Sk(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function Ak(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||QI(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function AK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=is(i.type)),s=new Pl(o,Jn(i),Z,null);t.blueprint[r]=s,n[r]=s,function DK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function RK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Hl(t,n,i.hostVars,Ve),i)}function PK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Jn(e)&&(n[""]=t)}}function xE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=Es(c,t,n,r,cn(u,s));return o&&function Tk(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function CK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&Jn(g)&&(c=!0,bK(t,n,f)),fI(gp(n,e),t,g.type)}!function MK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Hl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=sc(n.mergedAttrs,g.hostAttrs),AK(t,n,e,h,g),PK(h,g,i),null!==s&&s.has(g)){const[v,w]=s.get(g);n.directiveToIndex.set(g.type,[h,v+n.directiveStart,w+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function SK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);Ck(0,e,o,r),Ck(1,e,o,r),Ak(e,r,!0)}else bk(0,e,i,r),bk(1,e,i,r),Ak(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function TK(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new U(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,cn(u,a),i),h.mergedAttrs=sc(h.mergedAttrs,h.attrs),null!==h.attrs&&lg(h,h.attrs,!1),null!==h.mergedAttrs&&lg(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function kE(t,e){(function pN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),KP(e)&&t.queries.elementEnd(e)}function tt(t,e,n){return n!==Ve&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function sd(t,e,n){return function r(i){vc(ui(t)?Sn(t.index,e):e,5);const s=e[8];let a=Rk(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Rk(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Rk(t,e,n,r){const i=se(null);try{return Oe(6,e,n),!1!==n(r)}catch(o){return function _E(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(Fr,null)}catch{r=null}r?.(e)}(t,o),!1}finally{Oe(7,e,n),se(i)}}function Pk(t,e,n,r,i,o,s,a){const c=Wa(t);let u=!1,d=null;if(!r&&c&&(d=function VK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=xt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function OK(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||Mk(r?v=>r(qt(v[t.index])):t.index,e,n,o,a,g,!1)}return u}function Mk(t,e,n,r,i,o,s){const a=e.firstCreatePass?iM(e):null,c=rM(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function fg(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);Mk(t.index,a,e,i,o,h,!0)}const uo=Symbol("BINDING");class Nk extends cg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=xe(e);return new VE(n,this.ngModule)}}class VE extends Ek{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function qK(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&Up.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function zK(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function w8(t){return t.map(E8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Oe(22);const a=se(null);try{const c=this.componentDef,u=function YK(t,e,n,r){const i=t?["ng-version","20.3.16"]:function T8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Tr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[uo].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[uo].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=Tn("function"==typeof d?d:d.type);c.push(f)}return YI(0,null,function JK(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function GK(t,e,n){let r=e instanceof bn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new wc(n,r):n}(c,i||this.ngModule,e),h=function WK(t){const e=t.get(PE,null);if(null===e)throw new U(407,!1);return{rendererFactory:e,sanitizer:t.get(yK,null),changeDetectionScheduler:t.get(ds,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function Z8(t,e,n,r){const o=r.get(zW,!1)||n===_i.ShadowDom,s=t.selectRootElement(e,o);return function X8(t){Vx(t)}(s),s}(f,r,c.encapsulation,d):function KK(t,e){const n=function QK(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return Vp(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(xk)||o?.some(A=>"function"!=typeof A&&A.bindings.some(xk)),v=Fp(null,u,null,512|JI(c),null,null,h,f,d,null,null);v[27]=g,Kv(v);let w=null;try{const A=xE(27,v,2,"#host",()=>u.directiveRegistry,!0,0);Y0(f,g,A),Bn(g,v),Gp(u,v,A),UI(u,A,v),kE(u,A),void 0!==n&&function XK(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),w=Sn(A.index,v),v[8]=w[8],Jp(u,v,null)}catch(A){throw null!==w&&_I(w),_I(v),A}finally{Oe(23),Qv()}return new ZK(this.componentType,v,!!_)}finally{se(a)}}}function xk(t){const e=t[uo].kind;return"input"===e||"twoWay"===e}class ZK extends gK{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Qa(n[1],27),this.location=ac(this._tNode,n),this.instance=Sn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Ql(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;Yp(r,i[1],i,e,n),this.previousInputValues.set(e,n),vc(Sn(r.index,i),1)}get injector(){return new mt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let pg=(()=>class t{static __NG_ELEMENT_ID__=eQ})();function eQ(){return Vk(ce(),V())}const tQ=pg,kk=class extends tQ{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ac(this._hostTNode,this._hostLView)}get injector(){return new mt(this._hostTNode,this._hostLView)}get parentInjector(){const e=mp(this._hostTNode,this._hostLView);if(lI(e)){const n=Nl(e,this._hostLView),r=Ml(e);return new mt(n[1].data[r+8],n)}return new mt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Ok(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,Is(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function Rl(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const w=n||{};u=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}const d=c?e:new VE(xe(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(bn,null);A&&(o=A)}xe(d.componentType??{});const v=d.create(h,i,null,o,s,a);return this.insertImpl(v.hostView,u,Is(this._hostTNode,null)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function HG(t){return Cn(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new kk(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Ic(s,i,o,r),e.attachToViewContainerRef(),LP(LE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Ok(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Kl(this._lContainer,n);r&&($f(LE(this._lContainer),n),Gl(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Kl(this._lContainer,n);return r&&null!=$f(LE(this._lContainer),n)?new Ql(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ok(t){return t[8]}function LE(t){return t[8]||(t[8]=[])}function Vk(t,e){let n;const r=e[t.index];return Cn(r)?n=r:(n=Kx(r,e,null,t),e[t.index]=n,ZI(e,n)),Lk(n,e,t,r),new kk(n,t,e)}let Lk=function Uk(t,e,n,r){if(t[7])return;let i;i=8&n.type?qt(r):function nQ(t,e){const n=t[11],r=n.createComment(""),i=xt(e,t),o=n.parentNode(i);return ms(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class UE{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new UE(this.queryList)}setDirty(){this.queryList.setDirty()}}class jE{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new jE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==zE(e,n).matches&&this.queries[n].setDirty()}}class jk{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function uQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class BE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new BE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class $E{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new $E(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,oQ(n,o)),this.matchTNodeWithReadOption(e,n,_p(n,e,o,!1,!1))}else r===Xp?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,_p(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===wr||i===pg||i===Xp&&4&n.type)this.addMatch(n.index,-2);else{const o=_p(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function oQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function aQ(t,e,n,r){return-1===n?function sQ(t,e){return 11&t.type?ac(t,e):4&t.type?eg(t,e):null}(e,t):-2===n?function cQ(t,e,n){return n===wr?ac(e,t):n===Xp?eg(e,t):n===pg?Vk(e,t):void 0}(t,e,r):xl(t,t[1],n,e)}function Bk(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:aQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function HE(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Bk(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&HE(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];HE(g[1],g,u,r)}}}}}return r}function qk(t,e,n,r){const i=fe();if(i.firstCreatePass){const o=ce();(function zk(t,e,n){null===t.queries&&(t.queries=new BE),t.queries.track(new $E(e,n))})(i,new jk(e,n,r),o.index),function lQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function $k(t,e,n){const r=new lW(!(4&~n));return function qG(t,e,n,r){const i=rM(e);i.push(n),t.firstCreatePass&&iM(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new jE).queries.push(new UE(r))-1}(i,V(),n)}function zE(t,e){return t.queries.getByIndex(e)}function Gk(t,e){const n=t[1],r=zE(n,e);return r.crossesNgTemplate?HE(n,t,e,[]):Bk(n,t,r,e)}let bc=class{},Jk=class{};class KE extends bc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Nk(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=Or(e);this._bootstrapComponents=Br(o.bootstrap),this._r3Injector=bM(e,n,[{provide:bc,useValue:this},{provide:cg,useValue:this.componentFactoryResolver},...r],Ln(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Zk extends Jk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new KE(this.moduleType,e,[])}}class Xk extends bc{injector;componentFactoryResolver=new Nk(this);instance=null;constructor(e){super();const n=new os([...e.providers,{provide:bc,useValue:this},{provide:cg,useValue:this.componentFactoryResolver}],e.parent||Nv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function QE(t,e,n=null){return new Xk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let IQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Av(0,n.type),i=r.length>0?QE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:t,providedIn:"environment",factory:()=>new t(ye(bn))})}return t})();function vi(t){return gi(()=>{const e=tO(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ip.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(IQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_i.Emulated,styles:t.styles||Je,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&ln("NgStandalone"),nO(n);const r=t.dependencies;return n.directiveDefs=mg(r,eO),n.pipeDefs=mg(r,Ir),n.id=function CQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function eO(t){return xe(t)||Tn(t)}function gg(t){return gi(()=>({type:t.type,bootstrap:t.bootstrap||Je,declarations:t.declarations||Je,imports:t.imports||Je,exports:t.exports||Je,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function EQ(t,e){if(null==t)return kr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Up.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function wQ(t){if(null==t)return kr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ee(t){return gi(()=>{const e=tO(t);return nO(e),e})}function tO(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||kr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||Je,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:EQ(t.inputs,e),outputs:wQ(t.outputs),debugInfo:null}}function nO(t){t.features?.forEach(e=>e(t))}function mg(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Le(t){let e=function rO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Jn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=YE(t.inputs),s.declaredInputs=YE(t.declaredInputs),s.outputs=YE(t.outputs);const a=i.hostBindings;a&&PQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&DQ(t,c),u&&RQ(t,u),SQ(t,i),rG(t.outputs,i.outputs),Jn(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Le&&(n=!1)}}e=Object.getPrototypeOf(e)}!function AQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=sc(i.hostAttrs,n=sc(n,i.hostAttrs))}}(r)}function SQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function YE(t){return t===kr?{}:t===Je?[]:t}function DQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function RQ(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function PQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ss(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=Es(e,h,4,s||null,a||null),null!=u){const g=cn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function cO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=sc(t.mergedAttrs,t.attrs);const d=t.tView=YI(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),hi(t,!1);const c=dO(n,e,t,r);tp()&&hE(n,e,c,t),Bn(c,e);const u=Kx(c,e,c,t);e[r+27]=u,ZI(e,u)}(f,t,e,n,r,i,o,c),null!=u&&_c(t,f,d),f}let dO=function hO(t,e,n,r){return El(!0),e[11].createComment("")};let CO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const jO=new H("");function Cg(t){return!!t&&"function"==typeof t.then}function GY(t){return!!t&&"function"==typeof t.subscribe}const BO=new H("");let $O=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(BO,{optional:!0})??[];injector=O(Zn);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=dr(this.injector,i);if(Cg(o))n.push(o);else if(GY(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HO=new H("");let Ii=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Fr);afterRenderManager=O(vx);zonelessEnabled=O(RM);rootEffectScheduler=O(xM);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Vn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(to);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ke(n=>!n))}constructor(){O(zl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(bn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Zn.NULL){return this._injector.get(Ne).run(()=>{Oe(10);const s=n instanceof Ek;if(!this._injector.get($O).done)throw new U(405,"");let c;c=s?n:this._injector.get(cg).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function KY(t){return t.isBoundToModule}(c)?void 0:this._injector.get(bc),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(jO,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Sg(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),Oe(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Oe(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(tE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);const n=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Oe(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(PE,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)Oe(14),this.synchronizeOnce(),Oe(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||Jf(i))&&(Zp(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>Jf(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Sg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(HO,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Sg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Hr(t,e,n,r){const i=V();return tt(i,Un(),e)&&(fe(),function o7(t,e,n,r,i,o){const s=xt(t,e);!function Wp(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?ue(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}(Vr(),i,t,e,n,r)),Hr}typeof document<"u"&&document;class zJ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function _w(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function yw(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function r1(t,e,n,r,i){if(yw(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function i1(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class o1{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function er(t,e,n,r,i,o,s,a){ln("NgControlFlow");const c=V(),u=fe();return Ss(c,u,t,e,n,r,i,cn(u.consts,o),256,s,a),vw}function vw(t,e,n,r,i,o,s,a){ln("NgControlFlow");const c=V(),u=fe();return Ss(c,u,t,e,n,r,i,cn(u.consts,o),512,s,a),vw}function tr(t,e){ln("NgControlFlow");const n=V(),r=Un(),i=n[r]!==Ve?n[r]:-1,o=-1!==i?Og(n,27+i):void 0;if(tt(n,r,t)){const a=se(null);try{if(void 0!==o&&vE(o,0),-1!==t){const c=27+t,u=Og(n,c),d=Ew(n[1],c),h=null;Ic(u,yc(n,d,e,{dehydratedView:h}),0,Is(d,h))}}finally{se(a)}}else if(void 0!==o){const a=Qx(o,0);void 0!==a&&(a[8]=e)}}class WJ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function Iw(t,e){return e}class QJ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function ks(t,e,n,r,i,o,s,a,c,u,d,h,f){ln("NgControlFlow");const g=V(),_=fe(),v=void 0!==c,w=V(),A=a?s.bind(w[15][8]):s,D=new QJ(v,A);w[27+t]=D,Ss(g,_,t+1,e,n,r,i,cn(_.consts,o),256),v&&Ss(g,_,t+2,c,u,d,h,cn(_.consts,f),512)}class YJ extends zJ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Ic(this.lContainer,n,e,Is(this.templateTNode,r)),function JJ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function $8(t,e){const n=t.get($p);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),ys.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function ZJ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function XJ(t,e){return Kl(t,e)}(this.lContainer,e)}create(e,n){const i=yc(this.hostLView,this.templateTNode,new WJ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){Gl(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function eZ(t,e){return Qx(t,e)}(this.lContainer,e)}}function Os(t){const e=se(null),n=Jt();try{const r=V(),i=r[1],o=r[n],s=n+1,a=Og(r,s);if(void 0===o.liveCollection){const u=Ew(i,s);o.liveCollection=new YJ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function GJ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=_w(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=_w(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const v=n(o,u),w=n(s,f),A=n(o,d);if(Object.is(A,w)){const D=n(c,g);Object.is(D,v)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new o1,i??=i1(t,o,s,n),yw(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(v,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)r1(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=_w(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new o1,i??=i1(t,o,s,n);const g=n(o,h);if(yw(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)r1(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Un(),d=0===c.length;if(tt(r,u,d)){const h=n+2,f=Og(r,h);if(d){const g=Ew(i,h),_=null;Ic(f,yc(r,g,void 0,{dehydratedView:_}),0,Is(g,_))}else i.firstUpdatePass&&function og(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):gk(o,r);t[6]=i}(f),vE(f,0)}}}finally{se(e)}}function Og(t,e){return t[e]}function Ew(t,e){return Qa(t,e)}function gr(t,e,n){const r=V();return tt(r,Un(),e)&&(fe(),pE(Vr(),r,t,e,r[11],n)),gr}function ww(t,e,n,r,i){Yp(e,t,n,i?"class":"style",r)}function Ze(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?xE(s,i,2,e,mE,function qv(){return ae.bindingsEnabled}(),n,r):o.data[s];if(Kp(a,i,t,e,Tw),Wa(a)){const c=i[1];Gp(c,i,a),UI(c,a,i)}return null!=r&&_c(i,a),Ze}function We(){const t=fe(),n=Qp(ce());return t.firstCreatePass&&kE(t,n),aM(n)&&cM(),oM(),null!=n.classesWithoutHost&&function q5(t){return!!(8&t.flags)}(n)&&ww(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function z5(t){return!!(16&t.flags)}(n)&&ww(t,n,V(),n.stylesWithoutHost,!1),We}function xc(t,e,n,r){return Ze(t,e,n,r),We(),xc}function Ct(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function Dk(t,e,n,r,i,o){const s=e.consts,c=Es(e,t,n,r,cn(s,i));if(c.mergedAttrs=sc(c.mergedAttrs,c.attrs),null!=o){const u=cn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&lg(c,c.attrs,!1),null!==c.mergedAttrs&&lg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return Kp(a,i,t,e,Tw),null!=r&&_c(i,a),Ct}function yt(){return aM(Qp(ce()))&&cM(),oM(),yt}let Tw=(t,e,n,r,i)=>(El(!0),Vp(e[11],r,function i6(){return ae.lFrame.currentNamespace}()));function kc(){return V()}function Aw(t,e,n){const r=V();return tt(r,Un(),e)&&(fe(),gE(Vr(),r,t,e,r[11],n)),Aw}const Fg="en-US";let f1=Fg;function St(t,e,n){const r=V(),i=fe(),o=ce();return function Pw(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=sd(r,e,o),Pk(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=sd(r,e,o),fg(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=sd(r,e,o),fg(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),St}function $g(t,e,n){const r=V(),i=fe(),o=ce();return(3&o.type||n)&&Pk(o,i,r,n,r[11],t,e,sd(o,r,e)),$g}function vt(t=1){return function XG(t){return(ae.lFrame.contextLView=function nM(t,e){for(;t>0;)e=e[14],t--;return e}(t,ae.lFrame.contextLView))[8]}(t)}function Hg(t,e){return t<<17|e<<2}function Vs(t){return t>>17&32767}function Mw(t){return 2|t}function Vc(t){return(131068&t)>>2}function Nw(t,e){return-131069&t|e<<2}function xw(t){return 1|t}function O1(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Vs(i):Vc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];aX(t[s],e)&&(a=!0,t[s+1]=r?xw(u):Mw(u)),s=r?Vs(u):Vc(u)}a&&(t[n+1]=r?Mw(i):xw(i))}function aX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ml(t,e)>=0}function Ls(t,e){return function H1(t,e,n,r){const i=V(),o=fe(),s=pi(2);o.firstUpdatePass&&function G1(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Jt()],s=function z1(t,e){return e>=t.expandoStartIndex}(t,n);(function Y1(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function yX(t,e,n,r){const i=function Gv(t){const e=ae.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=vd(n=kw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=kw(i,t,e,n,r),null===o){let c=function vX(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Vc(r))return t[Vs(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=kw(null,t,e,c[1],r),c=vd(c,e.attrs,r),function IX(t,e,n,r){t[Vs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function EX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=vd(r,t[o].hostAttrs,n);return vd(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function oX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vs(s),c=Vc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||ml(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Vs(t[a+1]);t[r+1]=Hg(f,a),0!==f&&(t[f+1]=Nw(t[f+1],r)),t[a+1]=function rX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Hg(a,0),0!==a&&(t[a+1]=Nw(t[a+1],r)),a=r;else t[r+1]=Hg(c,0),0===a?a=r:t[c+1]=Nw(t[c+1],r),c=r;u&&(t[r+1]=Mw(t[r+1])),O1(t,d,r,!0),O1(t,d,r,!1),function sX(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ml(o,e)>=0&&(n[r+1]=xw(n[r+1]))}(e,d,t,r,o),s=Hg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Ve&&tt(i,s,e)&&function K1(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function iX(t){return!(1&~t)}(u)?Q1(c,e,n,i,Vc(u),s):void 0;qg(d)||(qg(o)||function nX(t){return!(2&~t)}(u)&&(o=Q1(c,null,n,i,a,s)),function J8(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:_s.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_s.Important),t.setStyle(n,r,i,o))}}(r,s,Ka(Jt(),n),i,o))}(o,o.data[Jt()],i,i[11],t,i[s+1]=function CX(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ln(ao(t)))),t}(e,n),r,s)}(t,e,null,!0),Ls}function kw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=vd(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function vd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),qf(t,s,!!n||e[++o]))}return void 0===t?null:t}function Q1(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===Ve&&(f=h?Je:void 0);let g=h?Tv(f,r):d===r?f:void 0;if(u&&!qg(g)&&(g=Tv(c,r)),qg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Vs(_):Vc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Tv(c,r))}return a}function qg(t){return void 0!==t}function Fe(t,e=""){const n=V(),r=fe(),i=t+27,o=r.firstCreatePass?Es(r,i,1,e,null):r.data[i],s=J1(r,n,o,e,t);n[i]=s,tp()&&hE(r,n,s,o),hi(o,!1)}let J1=(t,e,n,r,i)=>(El(!0),function WI(t,e){return t.createText(e)}(e[11],r));function eV(t,e,n,r,i,o=""){const a=function Cs(t,e,n,r){const i=tt(t,e,n);return tt(t,e+1,r)||i}(t,function fi(){return ae.lFrame.bindingIndex}(),n,i);return pi(2),a?e+ue(n)+r+ue(i)+o:Ve}function Fs(t){return fo("",t),Fs}function fo(t,e,n){const r=V(),i=function X1(t,e,n,r=""){return tt(t,Un(),n)?e+ue(n)+r:Ve}(r,t,e,n);return i!==Ve&&Ei(r,Jt(),i),fo}function Ow(t,e,n,r,i){const o=V(),s=eV(o,t,e,n,r,i);return s!==Ve&&Ei(o,Jt(),s),Ow}function Ei(t,e,n){const r=Ka(e,t);!function G0(t,e,n){t.setValue(e,n)}(t[11],r,n)}function Vw(t,e,n,r,i){if(t=he(t),Array.isArray(t))for(let o=0;o<t.length;o++)Vw(t[o],e,n,r,i);else{const o=fe(),s=V(),a=ce();let c=si(t)?t:he(t.provide);const u=GP(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(si(t)||!t.multi){const g=new Pl(u,i,Z,null),_=Fw(c,e,i?d:d+f,h);-1===_?(fI(gp(a,s),o,c),Lw(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=Fw(c,e,d+f,h),_=Fw(c,e,d,d+f),w=_>=0&&n[_];if(i&&!w||!i&&!(g>=0&&n[g])){fI(gp(a,s),o,c);const A=function qX(t,e,n,r,i){const s=new Pl(t,n,Z,null);return s.multi=[],s.index=e,s.componentProviders=0,yV(s,i,r&&!n),s}(i?HX:$X,n.length,i,r,u);!i&&w&&(n[_].providerFactory=A),Lw(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else Lw(o,t,g>-1?g:_,yV(n[i?_:g],u,!i&&r));!i&&r&&w&&n[_].componentProviders++}}}function Lw(t,e,n,r){const i=si(e),o=function qP(t){return!!t.useClass}(e);if(i||o){const c=(o?he(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function yV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $X(t,e,n,r,i){return Uw(this.multi,[])}function HX(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=xl(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),Uw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Uw(o,s);return s}function Uw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function st(t,e=[]){return n=>{n.providersResolver=(r,i)=>function BX(t,e,n){const r=fe();if(r.firstCreatePass){const i=Jn(t);Vw(n,r.data,r.blueprint,i,!0),Vw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function jw(t,e,n){const r=function An(){const t=ae.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===Ve?function $r(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function od(t,e){return t[e]}(i,r)}class Fee{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Uee=(()=>{class t{compileModuleSync(n){return new Zk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Br(Or(n).declarations).reduce((s,a)=>{const c=xe(a);return c&&s.push(new VE(c)),s},[]);return new Fee(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bee=(()=>{class t{zone=O(Ne);changeDetectionScheduler=O(ds);applicationRef=O(Ii);applicationErrorHandler=O(Fr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ne({...Gw(),scheduleInRootZone:n}),[{provide:Ne,useFactory:t},{provide:Wi,multi:!0,useFactory:()=>{const r=O(Bee,{optional:!0});return()=>r.initialize()}},{provide:Wi,multi:!0,useFactory:()=>{const r=O(Hee);return()=>{r.initialize()}}},!0===e?{provide:PM,useValue:!0}:[],{provide:MM,useValue:n??fx},{provide:Fr,useFactory:()=>{const r=O(Ne),i=O(bn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Za),o.handleError(s))})}}}]}function Gw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let Hee=(()=>{class t{subscription=new wn;initialized=!1;zone=O(Ne);pendingTasks=O(to);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Kw=(()=>{class t{applicationErrorHandler=O(Fr);appRef=O(Ii);taskService=O(to);ngZone=O(Ne);zonelessEnabled=O(RM);tracing=O(zl,{optional:!0});disableScheduling=O(PM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new wn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(MM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof oE||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?gx:px;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const qV=new H("",{providedIn:"root",factory:()=>O(qV,{optional:!0,skipSelf:!0})||function qee(){return typeof $localize<"u"&&$localize.locale||Fg}()}),tm=Symbol("InputSignalNode#UNSET"),SL={...tv,transformFn:void 0,applyValueToInputSignal(t,e){Nf(t,e)}};function AL(t,e){const n=Object.create(SL);function r(){if(ol(n),n.value===tm)throw new U(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[$t]=n,r}class kne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>yp(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function DL(t,e){return AL(t,e)}new H("").__NG_ELEMENT_ID__=t=>{const e=ce();if(null===e)throw new U(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new U(204,!1)};const cT=(DL.required=function Vne(t){return AL(tm,t)},DL),nm=new H(""),Bne=new H("");function Cd(t){return!t.moduleRef}let $c=null;let im=(()=>class t{static __NG_ELEMENT_ID__=Wne})();function Wne(t){return function Kne(t,e,n){if(ui(t)&&!n){const r=Sn(t.index,e);return new Ql(r,r)}return 175&t.type?new Ql(e[15],e):null}(ce(),V(),!(16&~t))}function rre(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Oe(8);try{const o=i?.injector??function Gne(t=[]){if($c)return $c;const e=function LL(t=[],e){return Zn.create({name:e,providers:[{provide:Pv,useValue:"platform"},{provide:nm,useValue:new Set([()=>$c=null])},...t]})}(t);return $c=e,function WY(){!function j3(t){yP=t}(()=>{throw new U(600,"")})}(),function FL(t){const e=t.get(t0,null);dr(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[zw({}),{provide:ds,useExisting:Kw},SM,...n||[]];return function xL(t){const e=Cd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ne);return n.run(()=>{Cd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Fr);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Cd(t)){const o=()=>e.destroy(),s=t.platformInjector.get(nm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(nm);s.add(o),t.moduleRef.onDestroy(()=>{Sg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function Hne(t,e,n){try{const r=n();return Cg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(to),s=o.add(),a=e.get($O);return a.runInitializers(),a.donePromise.then(()=>{if(function lZ(t){"string"==typeof t&&(f1=t.toLowerCase().replace(/_/g,"-"))}(e.get(qV,Fg)||Fg),!e.get(Bne,!0))return Cd(t)?e.get(Ii):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Cd(t)){const d=e.get(Ii);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new Xk({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Oe(9)}}function Hc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class cF{_doc;constructor(e){this._doc=e}manager}let dT=(()=>{class t extends cF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ye(Er))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const hT=new H("");let uF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof dT));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof dT);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ye(hT),ye(Ne))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const fT="ng-app-id";function lF(t){for(const e of t)e.remove()}function dF(t,e){const n=e.createElement("style");return n.textContent=t,n}function pT(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let hF=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Pre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${fT}="${e}"],link[${fT}="${e}"]`);if(i)for(const o of i)o.removeAttribute(fT),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,dF);r?.forEach(i=>this.addUsage(i,this.external,pT))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(lF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])lF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,dF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,pT(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ye(Er),ye(Vl),ye(r0,8),ye(n0))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const gT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mT=/%COMP%/g,Vre=new H("",{providedIn:"root",factory:()=>!0});function pF(t,e){return e.map(n=>n.replace(mT,t))}let gF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new _T(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof _F?i.applyToHost(n):i instanceof yT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case _i.Emulated:o=new _F(c,u,r,this.appId,d,s,a,h,f);break;case _i.ShadowDom:return new jre(c,u,n,r,s,a,this.nonce,h,f);default:o=new yT(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ye(uF),ye(hF),ye(Vl),ye(Vre),ye(Er),ye(Ne),ye(r0),ye(zl,8))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();class _T{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(gT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=gT[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=gT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_s.DashCase|_s.Important)?e.style.setProperty(n,r,i&_s.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_s.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=no().getGlobalEventTarget(this.doc,e)))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function mF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class jre extends _T{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=pF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=pT(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yT extends _T{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?pF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===ys.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class _F extends yT{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function Lre(t){return"_ngcontent-%COMP%".replace(mT,t)}(d),this.hostAttr=function Fre(t){return"_nghost-%COMP%".replace(mT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class vT extends l6{supportsDOMEvents=!0;static makeCurrent(){!function u6(t){kM??=t}(new vT)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function $re(){return Ad=Ad||document.head.querySelector("base"),Ad?Ad.getAttribute("href"):null}();return null==n?null:function Hre(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Ad=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ad=null,zre=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const yF=["alt","control","meta","shift"],Gre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wre={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function vF(t){return{appProviders:[...tie,...t?.providers??[]],platformProviders:Xre}}const Xre=[{provide:n0,useValue:"browser"},{provide:t0,useValue:function Yre(){vT.makeCurrent()},multi:!0},{provide:Er,useFactory:function Zre(){return function VW(t){II=t}(document),document}}],tie=[{provide:Pv,useValue:"root"},{provide:Za,useFactory:function Jre(){return new Za}},{provide:hT,useClass:dT,multi:!0,deps:[Er]},{provide:hT,useClass:(()=>{class t extends cF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>no().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Gre[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),yF.forEach(s=>{s!==i&&(0,Wre[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(ye(Er))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Er]},gF,hF,uF,{provide:PE,useExisting:gF},{provide:class y6{},useClass:zre},[]],sie={...Va,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function at(t){return function oie(t){const e=se(null);try{return t()}finally{se(e)}}(t)}function Dn(t,e){return function L3(t,e){const n=Object.create(F3);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(sl(n),ol(n),n.value===zi)throw n.error;return n.value};return r[$t]=n,r}(t,e?.equal)}class pie{[$t];constructor(e){this[$t]=e}destroy(){this[$t].destroy()}}const bF={...sie,cleanupFns:void 0,zone:null,onDestroyFn:wl,run(){const t=Xf(!1);try{!function aie(t){if(t.dirty=!1,t.version>0&&!Pf(t))return;t.version++;const e=La(t);try{t.cleanup(),t.fn()}finally{al(t,e)}}(this)}finally{Xf(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=se(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],se(t)}}},gie={...bF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){cl(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},mie={...bF,consumerMarkedDirty(){this.view[2]|=8192,Ya(this.view),this.notifier.notify(13)},destroy(){cl(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function CF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function mo(t){return this instanceof mo?(this.v=t,this):new mo(t)}function xF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function CT(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const kF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function OF(t){return et(t?.then)}function VF(t){return et(t[dv])}function LF(t){return Symbol.asyncIterator&&et(t?.[Symbol.asyncIterator])}function FF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const UF=function Xie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function jF(t){return et(t?.[UF])}function BF(t){return function NF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(v){return new Promise(function(w,A){o.push([g,v,w,A])>1||c(g,v)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof mo?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(v){f(o[0][3],v)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield mo(n.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{n.releaseLock()}})}function $F(t){return et(t?.getReader)}function qr(t){if(t instanceof Mt)return t;if(null!=t){if(VF(t))return function eoe(t){return new Mt(e=>{const n=t[dv]();if(et(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(kF(t))return function toe(t){return new Mt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(OF(t))return function noe(t){return new Mt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bP)})}(t);if(LF(t))return HF(t);if(jF(t))return function roe(t){return new Mt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if($F(t))return function ioe(t){return HF(BF(t))}(t)}throw FF(t)}function HF(t){return new Mt(e=>{(function ooe(t,e){var n,r,i,o;return function PF(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=xF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function wi(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function qF(t,e=0){return Zt((n,r)=>{n.subscribe(Ut(r,i=>wi(r,t,()=>r.next(i),e),()=>wi(r,t,()=>r.complete(),e),i=>wi(r,t,()=>r.error(i),e)))})}function zF(t,e=0){return Zt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function GF(t,e){if(!t)throw new Error("Iterable cannot be null");return new Mt(n=>{wi(n,e,()=>{const r=t[Symbol.asyncIterator]();wi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function dn(t,e){return e?function doe(t,e){if(null!=t){if(VF(t))return function soe(t,e){return qr(t).pipe(zF(e),qF(e))}(t,e);if(kF(t))return function coe(t,e){return new Mt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(OF(t))return function aoe(t,e){return qr(t).pipe(zF(e),qF(e))}(t,e);if(LF(t))return GF(t,e);if(jF(t))return function uoe(t,e){return new Mt(n=>{let r;return wi(n,e,()=>{r=t[UF](),wi(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>et(r?.return)&&r.return()})}(t,e);if($F(t))return function loe(t,e){return GF(BF(t),e)}(t,e)}throw FF(t)}(t,e):qr(t)}function AT(t){return t[t.length-1]}function WF(t){return et(AT(t))?t.pop():void 0}function lm(t){return function hoe(t){return t&&et(t.schedule)}(AT(t))?t.pop():void 0}function de(...t){return dn(t,lm(t))}const dm=nv(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:foe}=Array,{getPrototypeOf:poe,prototype:goe,keys:moe}=Object;function KF(t){if(1===t.length){const e=t[0];if(foe(e))return{args:e,keys:null};if(function _oe(t){return t&&"object"==typeof t&&poe(t)===goe}(e)){const n=moe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:yoe}=Array;function QF(t){return ke(e=>function voe(t,e){return yoe(e)?t(...e):t(e)}(t,e))}function YF(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function JF(...t){const e=lm(t),n=WF(t),{args:r,keys:i}=KF(t);if(0===r.length)return dn([],e);const o=new Mt(function Ioe(t,e,n=es){return r=>{ZF(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)ZF(e,()=>{const u=dn(t[c],e);let d=!1;u.subscribe(Ut(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>YF(i,s):es));return n?o.pipe(QF(n)):o}function ZF(t,e,n){t?wi(n,t,e):e()}function Rn(t,e,n=1/0){return et(e)?Rn((r,i)=>ke((o,s)=>e(r,o,i,s))(qr(t(r,i))),n):("number"==typeof e&&(n=e),Zt((r,i)=>function Eoe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=v=>u<r?_(v):c.push(v),_=v=>{o&&e.next(v),u++;let w=!1;qr(n(v,d++)).subscribe(Ut(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){const A=c.shift();s?wi(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe(Ut(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function DT(t=1/0){return Rn(es,t)}function RT(...t){return function woe(){return DT(1)}()(dn(t,lm(t)))}function PT(t){return new Mt(e=>{qr(t()).subscribe(e)})}function hm(t,e){const n=et(t)?t:()=>t,r=i=>i.error(n());return new Mt(e?i=>e.schedule(r,0,i):r)}const br=new Mt(t=>t.complete());function MT(){return Zt((t,e)=>{let n=null;t._refCount++;const r=Ut(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class XF extends Mt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,JM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wn;const n=this.getSubject();e.add(this.source.subscribe(Ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wn.EMPTY)}return e}refCount(){return MT()(this)}}function mr(t,e){return Zt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ut(r,c=>{i?.unsubscribe();let u=0;const d=o++;qr(t(c,d)).subscribe(i=Ut(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qc(t){return t<=0?()=>br:Zt((e,n)=>{let r=0;e.subscribe(Ut(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _o(t,e){return Zt((n,r)=>{let i=0;n.subscribe(Ut(r,o=>t.call(e,o,i++)&&r.next(o)))})}function fm(t){return Zt((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function e2(t=Soe){return Zt((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Soe(){return new dm}function qs(t,e){const n=arguments.length>=2;return r=>r.pipe(t?_o((i,o)=>t(i,o,r)):es,qc(1),n?fm(e):e2(()=>new dm))}function pm(t,e){return et(e)?Rn(t,e,1):Rn(t,1)}function hn(t,e,n){const r=et(t)||e||n?{next:t,error:e,complete:n}:t;return r?Zt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ut(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):es}function zc(t){return Zt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ut(n,void 0,void 0,s=>{o=qr(t(s,zc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function NT(t){return t<=0?()=>br:Zt((e,n)=>{let r=[];e.subscribe(Ut(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xT(t){return Zt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function t2(t){return Zt((e,n)=>{qr(t).subscribe(Ut(n,()=>n.complete(),ov)),!n.closed&&e.subscribe(n)})}let Uoe=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ye(Er))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pe="primary",Pd=Symbol("RouteTitle");class Goe{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Gc(t){return new Goe(t)}function Woe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zr(t,e){const n=t?kT(t):void 0,r=e?kT(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!l2(t[i],e[i]))return!1;return!0}function kT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function l2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function d2(t){return t.length>0?t[t.length-1]:null}function Ti(t){return function Aie(t){return!!t&&(t instanceof Mt||et(t.lift)&&et(t.subscribe))}(t)?t:Cg(t)?dn(Promise.resolve(t)):de(t)}const Qoe={exact:function p2(t,e,n){if(!Gs(t.segments,e.segments)||!gm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!p2(t.children[r],e.children[r],n))return!1;return!0},subset:g2},h2={exact:function Yoe(t,e){return zr(t,e)},subset:function Joe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>l2(t[n],e[n]))},ignored:()=>!0};function f2(t,e,n){return Qoe[n.paths](t.root,e.root,n.matrixParams)&&h2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function g2(t,e,n){return m2(t,e,e.segments,n)}function m2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Gs(i,n)||e.hasChildren()||!gm(i,n,r))}if(t.segments.length===n.length){if(!Gs(t.segments,n)||!gm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!g2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Gs(t.segments,i)&&gm(t.segments,i,r)&&t.children[pe])&&m2(t.children[pe],e,o,r)}}function gm(t,e,n){return e.every((r,i)=>h2[n](t[i].parameters,r.parameters))}class zs{root;queryParams;fragment;_queryParamMap;constructor(e=new qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return ese.serialize(this)}}class qe{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ym(this)}}class Md{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Gc(this.parameters),this._parameterMap}toString(){return v2(this)}}function Gs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let mm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>new _m,providedIn:"root"})}return t})();class _m{parse(e){const n=new dse(e);return new zs(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Nd(e.root,!0)}`,r=function rse(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${vm(n)}=${vm(i)}`).join("&"):`${vm(n)}=${vm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function tse(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ese=new _m;function ym(t){return t.segments.map(e=>v2(e)).join("/")}function Nd(t,e){if(!t.hasChildren())return ym(t);if(e){const n=t.children[pe]?Nd(t.children[pe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==pe&&r.push(`${i}:${Nd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Xoe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===pe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==pe&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===pe?[Nd(t.children[pe],!1)]:[`${i}:${Nd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[pe]?`${ym(t)}/${n[0]}`:`${ym(t)}/(${n.join("//")})`}}function _2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vm(t){return _2(t).replace(/%3B/gi,";")}function OT(t){return _2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Im(t){return decodeURIComponent(t)}function y2(t){return Im(t.replace(/\+/g,"%20"))}function v2(t){return`${OT(t.path)}${function nse(t){return Object.entries(t).map(([e,n])=>`;${OT(e)}=${OT(n)}`).join("")}(t.parameters)}`}const ise=/^[^\/()?;#]+/;function VT(t){const e=t.match(ise);return e?e[0]:""}const ose=/^[^\/()?;=#]+/,ase=/^[^=?&#]+/,use=/^[^&#]+/;class dse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[pe]=new qe(e,n)),r}parseSegment(){const e=VT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Md(Im(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function sse(t){const e=t.match(ose);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=VT(this.remaining);i&&(r=i,this.capture(r))}e[Im(n)]=Im(r)}parseQueryParam(e){const n=function cse(t){const e=t.match(ase);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function lse(t){const e=t.match(use);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=y2(n),o=y2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=VT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=pe);const s=this.parseChildren();n[o??pe]=1===Object.keys(s).length&&s[pe]?s[pe]:new qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function I2(t){return t.segments.length>0?new qe([],{[pe]:t}):t}function E2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=E2(i);if(r===pe&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function hse(t){if(1===t.numberOfChildren&&t.children[pe]){const e=t.children[pe];return new qe(t.segments.concat(e.segments),e.children)}return t}(new qe(t.segments,e))}function Ws(t){return t instanceof zs}function w2(t){let e;const i=I2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new qe(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function T2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return LT(i,i,i,n,r);const o=function pse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new C2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new C2(n,e,r)}(e);if(o.toRoot())return LT(i,i,new qe([],{}),n,r);const s=function gse(t,e,n){if(t.isAbsolute)return new wm(e,!0,0);if(!n)return new wm(e,!1,NaN);if(null===n.parent)return new wm(n,!0,0);const r=Em(t.commands[0])?0:1;return function mse(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new wm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?kd(s.segmentGroup,s.index,o.commands):S2(s.segmentGroup,s.index,o.commands);return LT(i,s.segmentGroup,a,n,r)}function Em(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function xd(t){return"object"==typeof t&&null!=t&&t.outlets}function LT(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:b2(t,e,n);const a=I2(E2(s));return new zs(a,o,i)}function b2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:b2(o,e,n)}),new qe(t.segments,r)}class C2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Em(r[0]))throw new U(4003,!1);const i=r.find(xd);if(i&&i!==d2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function S2(t,e,n){if(t??=new qe([],{}),0===t.segments.length&&t.hasChildren())return kd(t,e,n);const r=function yse(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(xd(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!D2(c,u,s))return o;r+=2}else{if(!D2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new qe(t.segments.slice(0,r.pathIndex),{});return o.children[pe]=new qe(t.segments.slice(r.pathIndex),t.children),kd(o,0,i)}return r.match&&0===i.length?new qe(t.segments,{}):r.match&&!t.hasChildren()?FT(t,e,n):r.match?kd(t,0,i):FT(t,e,n)}function kd(t,e,n){if(0===n.length)return new qe(t.segments,{});{const r=function _se(t){return xd(t[0])?t[0].outlets:{[pe]:t}}(n),i={};if(Object.keys(r).some(o=>o!==pe)&&t.children[pe]&&1===t.numberOfChildren&&0===t.children[pe].segments.length){const o=kd(t.children[pe],e,n);return new qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=S2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new qe(t.segments,i)}}function FT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(xd(o)){const c=vse(o.outlets);return new qe(r,c)}if(0===i&&Em(n[0])){r.push(new Md(t.segments[e].path,A2(n[0]))),i++;continue}const s=xd(o)?o.outlets[pe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Em(a)?(r.push(new Md(s,A2(a))),i+=2):(r.push(new Md(s,{})),i++)}return new qe(r,{})}function vse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=FT(new qe([],{}),0,r))}),e}function A2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function D2(t,e,n){return t==n.path&&zr(e,n.parameters)}const Tm="imperative";var Se=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Se||{});class Gr{id;url;constructor(e,n){this.id=e,this.url=n}}class UT extends Gr{type=Se.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ks extends Gr{urlAfterRedirects;type=Se.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var zn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(zn||{}),jT=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jT||{});class Qs extends Gr{reason;code;type=Se.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Od extends Gr{reason;code;type=Se.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class BT extends Gr{error;target;type=Se.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class R2 extends Gr{urlAfterRedirects;state;type=Se.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ise extends Gr{urlAfterRedirects;state;type=Se.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ese extends Gr{urlAfterRedirects;state;shouldActivate;type=Se.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wse extends Gr{urlAfterRedirects;state;type=Se.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tse extends Gr{urlAfterRedirects;state;type=Se.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bse{route;type=Se.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cse{route;type=Se.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sse{snapshot;type=Se.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ase{snapshot;type=Se.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dse{snapshot;type=Se.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rse{snapshot;type=Se.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $T{}class bm{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Cr(t){return t.outlet||pe}function Wc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Vse{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vd(this.rootInjector)}}let Vd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vse(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ye(bn))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class P2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=HT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=HT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=qT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qT(e,this._root).map(n=>n.value)}}function HT(t,e){if(t===e.value)return e;for(const n of e.children){const r=HT(t,n);if(r)return r}return null}function qT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=qT(t,n);if(r.length)return r.unshift(e),r}return[]}class Sr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Kc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class M2 extends P2{snapshot;constructor(e,n){super(e),this.snapshot=n,zT(this,e)}toString(){return this.snapshot.toString()}}function N2(t){const e=function Lse(t){const o=new Sm([],{},{},"",{},pe,t,null,{});return new x2("",new Sr(o,[]))}(t),n=new ur([new Md("",{})]),r=new ur({}),i=new ur({}),o=new ur({}),s=new ur(""),a=new vo(n,r,o,s,i,pe,t,e.root);return a.snapshot=e.root,new M2(new Sr(a,[]),e)}class vo{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ke(u=>u[Pd]))??de(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ke(e=>Gc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ke(e=>Gc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cm(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&O2(i)&&(r.resolve[Pd]=i.title),r}class Sm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Pd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class x2 extends P2{url;constructor(e,n){super(n),this.url=e,zT(this,n)}toString(){return k2(this._root)}}function zT(t,e){e.value._routerState=t,e.children.forEach(n=>zT(t,n))}function k2(t){const e=t.children.length>0?` { ${t.children.map(k2).join(", ")} } `:"";return`${t.value}${e}`}function GT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zr(e.params,n.params)||t.paramsSubject.next(n.params),function Koe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),zr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function WT(t,e){const n=zr(t.params,e.params)&&function Zoe(t,e){return Gs(t,e)&&t.every((n,r)=>zr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||WT(t.parent,e.parent))}function O2(t){return"string"==typeof t.title||null===t.title}const Fse=new H("");let KT=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=pe;activateEvents=new kt;deactivateEvents=new kt;attachEvents=new kt;detachEvents=new kt;routerOutletData=cT();parentContexts=O(Vd);location=O(pg);changeDetector=O(im);inputBinder=O(QT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Use(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ee({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mi]})}return t})();class Use{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===vo?this.route:e===Vd?this.childContexts:e===Fse?this.outletData:this.parent.get(e,n)}}const QT=new H("");let V2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=vi({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&xc(0,"router-outlet")},dependencies:[KT],encapsulation:2})}return t})();function YT(t){const e=t.children&&t.children.map(YT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==pe&&(n.component=V2),n}function Ld(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Bse(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ld(t,r,i);return Ld(t,r)})}(t,e,n);return new Sr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ld(t,a)),s}}const r=function $se(t){return new vo(new ur(t.url),new ur(t.params),new ur(t.queryParams),new ur(t.fragment),new ur(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Ld(t,o));return new Sr(r,i)}}class JT{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const L2="ngNavigationCancelingError";function Am(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ws(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=F2(!1,zn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function F2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[L2]=!0,n.cancellationCode=e,n}function U2(t){return!!t&&t[L2]}class zse{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),GT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Kc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Kc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Rse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ase(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(GT(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),GT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class j2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dm{component;route;constructor(e,n){this.component=e,this.route=n}}function Gse(t,e,n){const r=t._root;return Fd(r,e?e._root:null,n,[r.value])}function Qc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function lG(t){return null!==Ff(t)}(t)?e.get(t):t:r}function Fd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Kc(e);return t.children.forEach(s=>{(function Kse(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Qse(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Gs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gs(t.url,e.url)||!zr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WT(t,e)||!zr(t.queryParams,e.queryParams);default:return!WT(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new j2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Fd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Dm(a.outlet.component,s))}else s&&Ud(e,a,i),i.canActivateChecks.push(new j2(r)),Fd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ud(a,n.getContext(s),i)),i}function Ud(t,e,n){const r=Kc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Ud(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Dm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function jd(t){return"function"==typeof t}function B2(t){return t instanceof dm||"EmptyError"===t?.name}const Rm=Symbol("INITIAL_VALUE");function Yc(){return mr(t=>JF(t.map(e=>e.pipe(qc(1),function Coe(...t){const e=lm(t);return Zt((n,r)=>{(e?RT(t,n,e):RT(t,n)).subscribe(r)})}(Rm)))).pipe(ke(e=>{for(const n of e)if(!0!==n){if(n===Rm)return Rm;if(!1===n||nae(n))return n}return!0}),_o(e=>e!==Rm),qc(1)))}function nae(t){return Ws(t)||t instanceof JT}function $2(t){return function Z3(...t){return CP(t)}(hn(e=>{if("boolean"!=typeof e)throw Am(0,e)}),ke(e=>!0===e))}class ZT{segmentGroup;constructor(e){this.segmentGroup=e||null}}class XT extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Jc(t){return hm(new ZT(t))}function fae(t){return hm(new U(4e3,!1))}class gae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return de(r);if(i.numberOfChildren>1||!i.children[pe])return fae();i=i.children[pe]}}applyRedirectCommands(e,n,r,i,o){return function mae(t,e,n){if("string"==typeof t)return de(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return Ti(dr(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(ke(s=>{if(s instanceof zs)throw new XT(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new XT(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new zs(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const eb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _ae(t,e,n,r,i){const o=H2(t,e,n);return o.matched?(r=function Mse(t,e){return t.providers&&!t._injector&&(t._injector=QE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function hae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?de(i.map(s=>{const a=Qc(s,t);return Ti(function tae(t){return t&&jd(t.canMatch)}(a)?a.canMatch(e,n):dr(t,()=>a(e,n)))})).pipe(Yc(),$2()):de(!0)}(r,e,n).pipe(ke(s=>!0===s?o:{...eb}))):de(o)}function H2(t,e,n){if("**"===e.path)return function yae(t){return{matched:!0,parameters:t.length>0?d2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...eb}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Woe)(n,t,e);if(!i)return{...eb};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function q2(t,e,n,r){return n.length>0&&function Eae(t,e,n){return n.some(r=>Pm(t,e,r)&&Cr(r)!==pe)}(t,n,r)?{segmentGroup:new qe(e,Iae(r,new qe(n,t.children))),slicedSegments:[]}:0===n.length&&function wae(t,e,n){return n.some(r=>Pm(t,e,r))}(t,n,r)?{segmentGroup:new qe(t.segments,vae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new qe(t.segments,t.children),slicedSegments:n}}function vae(t,e,n,r){const i={};for(const o of n)if(Pm(t,e,o)&&!r[Cr(o)]){const s=new qe([],{});i[Cr(o)]=s}return{...r,...i}}function Iae(t,e){const n={};n[pe]=e;for(const r of t)if(""===r.path&&Cr(r)!==pe){const i=new qe([],{});n[Cr(r)]=i}return n}function Pm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class bae{}class Aae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new gae(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){const e=q2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ke(({children:n,rootSnapshot:r})=>{const i=new Sr(r,n),o=new x2("",i),s=function fse(t,e,n=null,r=null){return T2(w2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new Sm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,pe,n).pipe(ke(r=>({children:r,rootSnapshot:n})),zc(r=>{if(r instanceof XT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ZT?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ke(s=>s instanceof Sr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return dn(o).pipe(pm(s=>{const a=r.children[s],c=function Ose(t,e){const n=t.filter(r=>Cr(r)===e);return n.push(...t.filter(r=>Cr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function Doe(t,e){return Zt(function Aoe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ut(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),fm(null),function Roe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?_o((i,o)=>t(i,o,r)):es,NT(1),n?fm(e):e2(()=>new dm))}(),Rn(s=>{if(null===s)return Jc(r);const a=z2(s);return function Dae(t){t.sort((e,n)=>e.value.outlet===pe?-1:n.value.outlet===pe?1:e.value.outlet.localeCompare(n.value.outlet))}(a),de(a)}))}processSegment(e,n,r,i,o,s,a){return dn(n).pipe(pm(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(zc(u=>{if(u instanceof ZT)return de(null);throw u}))),qs(c=>!!c),zc(c=>{if(B2(c))return function Tae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?de(new bae):Jc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Cr(r)===s||s!==pe&&Pm(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Jc(i):Jc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=H2(n,i,o);if(!c)return Jc(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new Sm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G2(i),Cr(i),i.component??i._loadedComponent??null,i,W2(i)),_=Cm(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(mr(w=>this.applyRedirects.lineralizeSegments(i,w)),Rn(w=>this.processSegment(e,r,n,w.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=_ae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(mr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(mr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new Sm(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G2(r),Cr(r),r.component??r._loadedComponent??null,r,W2(r)),v=Cm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);const{segmentGroup:w,slicedSegments:A}=q2(n,f,g,u);if(0===A.length&&w.hasChildren())return this.processChildren(d,u,w,_).pipe(ke(F=>new Sr(_,F)));if(0===u.length&&0===A.length)return de(new Sr(_,[]));const D=Cr(r)===o;return this.processSegment(d,u,w,A,D?pe:o,!0,_).pipe(ke(F=>new Sr(_,F instanceof Sr?[F]:[])))})):Jc(n)))}getChildConfig(e,n,r){return n.children?de({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?de({routes:n._loadedRoutes,injector:n._loadedInjector}):function dae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?de(!0):de(i.map(s=>{const a=Qc(s,t);return Ti(function Jse(t){return t&&jd(t.canLoad)}(a)?a.canLoad(e,n):dr(t,()=>a(e,n)))})).pipe(Yc(),$2())}(e,n,r).pipe(Rn(i=>i?this.configLoader.loadChildren(e,n).pipe(hn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function pae(){return hm(F2(!1,zn.GuardRejected))}())):de({routes:[],injector:e})}}function Rae(t){const e=t.value.routeConfig;return e&&""===e.path}function z2(t){const e=[],n=new Set;for(const r of t){if(!Rae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=z2(r.children);e.push(new Sr(r.value,i))}return e.filter(r=>!n.has(r))}function G2(t){return t.data||{}}function W2(t){return t.resolve||{}}function K2(t){const e=t.children.map(n=>K2(n)).flat();return[t,...e]}function tb(t){return mr(e=>{const n=t(e);return n?dn(n).pipe(ke(()=>e)):de(e)})}let Q2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===pe);return r}getResolvedTitleForRoute(n){return n.data[Pd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Oae),providedIn:"root"})}return t})(),Oae=(()=>{class t extends Q2{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ye(Uoe))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Mm=new H("",{providedIn:"root",factory:()=>({})}),nb=new H("");let Y2=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Uee);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return de(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Ti(dr(n,()=>r.loadComponent())).pipe(ke(J2),mr(Z2),hn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xT(()=>{this.componentLoaders.delete(r)})),o=new XF(i,()=>new Vn).pipe(MT());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Vae(t,e,n,r){return Ti(dr(n,()=>t.loadChildren())).pipe(ke(J2),mr(Z2),Rn(i=>i instanceof Jk||Array.isArray(i)?de(i):dn(e.compileModuleAsync(i))),ke(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(nb,[],{optional:!0,self:!0}).flat()),{routes:s.map(YT),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(xT(()=>{this.childrenLoaders.delete(r)})),s=new XF(o,()=>new Vn).pipe(MT());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function J2(t){return function Lae(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function Z2(t){return de(t)}let rb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Fae),providedIn:"root"})}return t})(),Fae=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Uae=new H(""),$ae=new H("");let Hae=(()=>{class t{currentNavigation=Tt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Vn;transitionAbortWithErrorSubject=new Vn;configLoader=O(Y2);environmentInjector=O(bn);destroyRef=O(Lr);urlSerializer=O(mm);rootContexts=O(Vd);location=O(Tl);inputBindingEnabled=null!==O(QT,{optional:!0});titleStrategy=O(Q2);options=O(Mm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(rb);createViewTransition=O(Uae,{optional:!0});navigationErrorHandler=O($ae,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new Cse(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new bse(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;at(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new ur(null),this.transitions.pipe(_o(r=>null!==r),mr(r=>{let i=!1;return de(r).pipe(mr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),br;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new Od(o.id,this.urlSerializer.serialize(o.rawUrl),"",jT.IgnoredSameUrlNavigation)),o.resolve(!1),br;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return de(o).pipe(mr(c=>(this.events.next(new UT(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?br:Promise.resolve(c))),function Pae(t,e,n,r,i,o){return Rn(s=>function Cae(t,e,n,r,i,o,s="emptyOnly"){return new Aae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(ke(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),hn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new R2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new UT(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=N2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(v=>(v.finalUrl=u,v)),de(r)}return this.events.next(new Od(o.id,this.urlSerializer.serialize(o.extractedUrl),"",jT.IgnoredByUrlHandlingStrategy)),o.resolve(!1),br}),hn(o=>{const s=new Ise(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ke(o=>(this.currentTransition=r={...o,guards:Gse(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function rae(t,e){return Rn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?de({...n,guardsResult:!0}):function iae(t,e,n,r){return dn(t).pipe(Rn(i=>function lae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?de(o.map(a=>{const c=Wc(e)??i,u=Qc(a,c);return Ti(function eae(t){return t&&jd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):dr(c,()=>u(t,e,n,r))).pipe(qs())})).pipe(Yc()):de(!0)}(i.component,i.route,n,e,r)),qs(i=>!0!==i,!0))}(s,r,i,t).pipe(Rn(a=>a&&function Yse(t){return"boolean"==typeof t}(a)?function oae(t,e,n,r){return dn(e).pipe(pm(i=>RT(function aae(t,e){return null!==t&&e&&e(new Sse(t)),de(!0)}(i.route.parent,r),function sae(t,e){return null!==t&&e&&e(new Dse(t)),de(!0)}(i.route,r),function uae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Wse(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>PT(()=>de(s.guards.map(c=>{const u=Wc(s.node)??n,d=Qc(c,u);return Ti(function Xse(t){return t&&jd(t.canActivateChild)}(d)?d.canActivateChild(r,t):dr(u,()=>d(r,t))).pipe(qs())})).pipe(Yc())));return de(o).pipe(Yc())}(t,i.path,n),function cae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return de(!0);const i=r.map(o=>PT(()=>{const s=Wc(e)??n,a=Qc(o,s);return Ti(function Zse(t){return t&&jd(t.canActivate)}(a)?a.canActivate(e,t):dr(s,()=>a(e,t))).pipe(qs())}));return de(i).pipe(Yc())}(t,i.route,n))),qs(i=>!0!==i,!0))}(r,o,t,e):de(a)),ke(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),hn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Am(0,o.guardsResult);const s=new Ese(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),_o(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",zn.GuardRejected),!1)),tb(o=>{if(0!==o.guards.canActivateChecks.length)return de(o).pipe(hn(s=>{const a=new wse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),mr(s=>{let a=!1;return de(s).pipe(function Mae(t,e){return Rn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return de(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of K2(c))s.add(u);let a=0;return dn(s).pipe(pm(c=>o.has(c)?function Nae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!O2(i)&&(o[Pd]=i.title),PT(()=>(t.data=Cm(t,t.parent,n).resolve,function xae(t,e,n,r){const i=kT(t);if(0===i.length)return de({});const o={};return dn(i).pipe(Rn(s=>function kae(t,e,n,r){const i=Wc(e)??r,o=Qc(t,i);return Ti(o.resolve?o.resolve(e,n):dr(i,()=>o(e,n)))}(t[s],e,n,r).pipe(qs(),hn(a=>{if(a instanceof JT)throw Am(new _m,a);o[s]=a}))),NT(1),ke(()=>o),zc(s=>B2(s)?br:hm(s)))}(o,t,e,r).pipe(ke(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=Cm(c,c.parent,t).resolve,de(void 0))),hn(()=>a++),NT(1),Rn(c=>a===s.size?de(n):br))})}(this.paramsInheritanceStrategy,this.environmentInjector),hn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",zn.NoDataFromResolver)}}))}),hn(s=>{const a=new Tse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),tb(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=Wc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(hn(d=>{a.component=d}),ke(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return JF(s(o.targetSnapshot.root)).pipe(fm(null),qc(1))}),tb(()=>this.afterPreactivation()),mr(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?dn(a).pipe(ke(()=>r)):de(r)}),ke(o=>{const s=function jse(t,e,n){const r=Ld(t,e._root,n?n._root:void 0);return new M2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),hn(()=>{this.events.next(new $T)}),((t,e,n,r)=>ke(i=>(new zse(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),qc(1),t2(new Mt(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(_o(()=>!i&&!r.targetRouterState),hn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",zn.Aborted)}))),hn({next:o=>{i=!0,this.lastSuccessfulNavigation=at(this.currentNavigation),this.events.next(new Ks(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),t2(this.transitionAbortWithErrorSubject.pipe(hn(o=>{throw o}))),xT(()=>{i||this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),zc(o=>{if(this.destroyed)return r.resolve(!1),br;if(i=!0,U2(o))this.events.next(new Qs(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function Hse(t){return U2(t)&&Ws(t.url)}(o)?this.events.next(new bm(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new BT(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=dr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof JT))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Am(0,a);this.events.next(new Qs(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new bm(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return br}))}))}cancelNavigationTransition(n,r,i){const o=new Qs(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=at(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qae(t){return t!==Tm}let zae=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Wae),providedIn:"root"})}return t})();class Gae{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Wae=(()=>{class t extends Gae{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(t)))(i||t)}})();static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),X2=(()=>{class t{urlSerializer=O(mm);options=O(Mm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Tl);urlHandlingStrategy=O(rb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zs;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof zs?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=N2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Kae),providedIn:"root"})}return t})(),Kae=(()=>{class t extends X2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof UT?this.updateStateMemento():n instanceof Od?this.commitTransition(r):n instanceof R2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof $T?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Qs&&n.code!==zn.SupersededByNewNavigation&&n.code!==zn.Redirect?this.restoreHistory(r):n instanceof BT?this.restoreHistory(r,!0):n instanceof Ks&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(t)))(i||t)}})();static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Yae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(CO);stateManager=O(X2);options=O(Mm,{optional:!0})||{};pendingTasks=O(to);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Hae);urlSerializer=O(mm);location=O(Tl);urlHandlingStrategy=O(rb);injector=O(bn);_events=new Vn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(zae);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(nb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(QT,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new wn;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=at(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Qs&&r.code!==zn.Redirect&&r.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ks)this.navigated=!0;else if(r instanceof bm){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||qae(i.source),...s};this.scheduleNavigation(a,Tm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Pse(t){return!(t instanceof $T||t instanceof bm)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Tm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Fr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return at(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(YT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=w2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return T2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ws(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Tm,null,r)}navigate(n,r={skipLocationChange:!1}){return function Zae(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new U(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(xr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Yae}:!1===r?{...Jae}:r,Ws(n))return f2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return f2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function Qae(t,e){t.events.pipe(_o(n=>n instanceof Ks||n instanceof Qs||n instanceof BT||n instanceof Od),ke(n=>n instanceof Ks||n instanceof Od?0:n instanceof Qs&&(n.code===zn.Redirect||n.code===zn.SupersededByNewNavigation)?2:1),_o(n=>2!==n),qc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nm=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Tt(null);get href(){return at(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Vn;applicationErrorHandler=O(Fr);options=O(Mm,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new kne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ks&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ws(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:Ws(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Z(Pn),Z(vo),yp("tabindex"),Z(Ts),Z(wr),Z(np))};static \u0275dir=Ee({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&St("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Hr("href",i.reactiveHref(),X0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Hc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Hc],replaceUrl:[2,"replaceUrl","replaceUrl",Hc],routerLink:"routerLink"},features:[mi]})}return t})(),cU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new kt;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Ks&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(DT()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=dn(n).pipe(DT()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function pce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Z(Pn),Z(wr),Z(Ts),Z(im),Z(Nm,8))};static \u0275dir=Ee({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function N1(t,e,n,r){qk(t,e,n,r)}(o,Nm,5),2&r){let s;(function x1(t){const e=V(),n=fe(),r=Wv();ep(r+1);const i=zE(n,r);if(t.dirty&&function $G(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=Gk(e,r);t.reset(o,ON),t.notifyOnChanges()}return!0}return!1})(s=function k1(){return function qE(t,e){return t[18].queries[e].queryList}(V(),Wv())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[mi]})}return t})();const sb=new H("");function lU(t){return t.routerState.root}function dU(){const t=O(Zn);return e=>{const n=t.get(Ii);if(e!==n.components[0])return;const r=t.get(Pn),i=t.get(hU);1===t.get(ab)&&r.initialNavigation(),t.get(fU,null,{optional:!0})?.setUpPreloading(),t.get(sb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const hU=new H("",{factory:()=>new Vn}),ab=new H("",{providedIn:"root",factory:()=>1}),fU=new H(""),gU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},mU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new Cce;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Cce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xm=function(t){return function(t){const e=gU(t);return mU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Bd=function(t){try{return mU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const km=()=>{try{return function yU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},vU=t=>{var e,n;return null===(n=null===(e=km())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},IU=()=>{var t;return null===(t=km())||void 0===t?void 0:t.config},EU=t=>{var e;return null===(e=km())||void 0===e?void 0:e[`_${t}`]};class wU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Zc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function TU(t){return ub.apply(this,arguments)}function ub(){return(ub=I(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const $d={};let bU=!1;function CU(t,e){if(typeof window>"u"||typeof document>"u"||!Zc(window.location.host)||$d[t]===e||$d[t]||bU)return;function n(f){return`__firebase__banner__${f}`}$d[t]=e;const r="__firebase__banner",o=function xce(){const t={prod:[],emulator:[]};for(const e of Object.keys($d))$d[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function kce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),w=document.getElementById(v)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const F=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(F),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(w,v);const W=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{bU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),F.append(D,_,w,W),document.body.appendChild(F)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function At(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function AU(){return!function SU(){var t;const e=null===(t=km())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hd.prototype.create)}}class Hd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function Hce(t,e){return t.replace(qce,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new bi(i,`${this.serviceName}: ${s} (${i}).`,r)}}const qce=/\{\$([^}]+)}/g;function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(MU(o)&&MU(s)){if(!Ci(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function MU(t){return null!==t&&"object"==typeof t}function qd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Wce{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Kce(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=lb),void 0===i.error&&(i.error=lb),void 0===i.complete&&(i.complete=lb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lb(){}function Ot(t){return t&&t._delegate?t._delegate:t}class Ys{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Js="[DEFAULT]";class eue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function nue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Js?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const hb=[];var we=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(we||{});const NU={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},iue=we.INFO,oue={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},sue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=oue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class fb{constructor(e){this.name=e,this._logLevel=iue,this._logHandler=sue,this._userLogHandler=null,hb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?NU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}let xU,kU;const OU=new WeakMap,pb=new WeakMap,VU=new WeakMap,gb=new WeakMap,mb=new WeakMap;let _b={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return pb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||VU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Io(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function pue(t){return"function"==typeof t?function fue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uue(){return kU||(kU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(yb(this),e),Io(OU.get(this))}:function(...e){return Io(t.apply(yb(this),e))}:function(e,...n){const r=t.call(yb(this),e,...n);return VU.set(r,e.sort?e.sort():[e]),Io(r)}}(t):(t instanceof IDBTransaction&&function due(t){if(pb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});pb.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function cue(){return xU||(xU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,_b):t)}function Io(t){if(t instanceof IDBRequest)return function lue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Io(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&OU.set(n,t)}).catch(()=>{}),mb.set(e,t),e}(t);if(gb.has(t))return gb.get(t);const e=pue(t);return e!==t&&(gb.set(t,e),mb.set(e,t)),e}const yb=t=>mb.get(t),_ue=["get","getKey","getAll","getAllKeys","count"],yue=["put","add","delete","clear"],vb=new Map;function LU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(vb.get(e))return vb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_ue.includes(n))return;const o=function(){var s=I(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return vb.set(e,o),o}!function hue(t){_b=t(_b)}(t=>({...t,get:(e,n,r)=>LU(e,n)||t.get(e,n,r),has:(e,n)=>!!LU(e,n)||t.has(e,n)}));class bue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Cue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Vm="@firebase/app",Si=new fb("@firebase/app"),Sue="@firebase/app-compat",Aue="@firebase/analytics-compat",Due="@firebase/analytics",Rue="@firebase/app-check-compat",Pue="@firebase/app-check",Mue="@firebase/auth",Nue="@firebase/auth-compat",xue="@firebase/database",kue="@firebase/data-connect",Oue="@firebase/database-compat",Vue="@firebase/functions",Lue="@firebase/functions-compat",Fue="@firebase/installations",Uue="@firebase/installations-compat",jue="@firebase/messaging",Bue="@firebase/messaging-compat",$ue="@firebase/performance",Hue="@firebase/performance-compat",que="@firebase/remote-config",zue="@firebase/remote-config-compat",Gue="@firebase/storage",Wue="@firebase/storage-compat",Kue="@firebase/firestore",Que="@firebase/ai",Yue="@firebase/firestore-compat",Jue="firebase",Lm="[DEFAULT]",Xue={[Vm]:"fire-core",[Sue]:"fire-core-compat",[Due]:"fire-analytics",[Aue]:"fire-analytics-compat",[Pue]:"fire-app-check",[Rue]:"fire-app-check-compat",[Mue]:"fire-auth",[Nue]:"fire-auth-compat",[xue]:"fire-rtdb",[kue]:"fire-data-connect",[Oue]:"fire-rtdb-compat",[Vue]:"fire-fn",[Lue]:"fire-fn-compat",[Fue]:"fire-iid",[Uue]:"fire-iid-compat",[jue]:"fire-fcm",[Bue]:"fire-fcm-compat",[$ue]:"fire-perf",[Hue]:"fire-perf-compat",[que]:"fire-rc",[zue]:"fire-rc-compat",[Gue]:"fire-gcs",[Wue]:"fire-gcs-compat",[Kue]:"fire-fst",[Yue]:"fire-fst-compat",[Que]:"fire-vertex","fire-js":"fire-js",[Jue]:"fire-js-all"},Zs=new Map,zd=new Map,Gd=new Map;function FU(t,e){try{t.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xc(t){const e=t.name;if(Gd.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,t);for(const n of Zs.values())FU(n,t);for(const n of zd.values())FU(n,t);return!0}function Fm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return null!=t&&void 0!==t.settings}const _r=new Hd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class UU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const eu="11.10.0";function BU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Lm,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw _r.create("bad-app-name",{appName:String(i)});if(n||(n=IU()),!n)throw _r.create("no-options");const o=Zs.get(i);if(o){if(Ci(n,o.options)&&Ci(r,o.config))return o;throw _r.create("duplicate-app",{appName:i})}const s=new rue(i);for(const c of Gd.values())s.addComponent(c);const a=new UU(n,r,s);return Zs.set(i,a),a}function $U(t=Lm){const e=Zs.get(t);if(!e&&t===Lm&&IU())return BU();if(!e)throw _r.create("no-app",{appName:t});return e}function Ai(t,e,n){var r;let i=null!==(r=Xue[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Si.warn(a.join(" "))}Xc(new Ys(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Wd="firebase-heartbeat-store";let wb=null;function HU(){return wb||(wb=function mue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Io(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Io(s.result),c.oldVersion,c.newVersion,Io(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Wd)}catch(n){console.warn(n)}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),wb}function Tb(){return(Tb=I(function*(t){try{const n=(yield HU()).transaction(Wd),r=yield n.objectStore(Wd).get(zU(t));return yield n.done,r}catch(e){if(e instanceof bi)Si.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e?.message});Si.warn(n.message)}}})).apply(this,arguments)}function qU(t,e){return bb.apply(this,arguments)}function bb(){return(bb=I(function*(t,e){try{const r=(yield HU()).transaction(Wd,"readwrite");yield r.objectStore(Wd).put(e,zU(t)),yield r.done}catch(n){if(n instanceof bi)Si.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n?.message});Si.warn(r.message)}}})).apply(this,arguments)}function zU(t){return`${t.name}!${t.options.appId}`}class ule{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=GU();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function hle(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){Si.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=GU(),{heartbeatsToSend:i,unsentEntries:o}=function lle(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WU(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WU(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=xm(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Si.warn(r),""}})()}}function GU(){return(new Date).toISOString().substring(0,10)}class dle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function RU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Bce(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function sle(t){return Tb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return qU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return qU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function WU(t){return xm(JSON.stringify({version:2,heartbeats:t})).length}!function fle(t){Xc(new Ys("platform-logger",e=>new bue(e),"PRIVATE")),Xc(new Ys("heartbeat",e=>new ule(e),"PRIVATE")),Ai(Vm,"0.13.2",t),Ai(Vm,"0.13.2","esm2017"),Ai("fire-js","")}(""),Ai("firebase","11.10.0","app");var Eo,YU,KU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QU={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,T){T||(T=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(T=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=T+(b<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(R^x&(T^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(T^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(R^(T|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=T+((b=E+(R^(T|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(E^(x|~T))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var T=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(T[R]=x,S=!1)}this.g=T}(function e(C,E){function T(){}T.prototype=E.prototype,C.D=E.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),$i=2;$i<arguments.length;$i++)b[$i-2]=arguments[$i];return E.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var T=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=T;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var T=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&T,T/=256;for(this.u(C),C=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)C[T++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(u(-C));for(var E=[],T=1,S=0;C>=T;S++)E[S]=C/T|0,T*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function v(C){return-1==C.h}function w(C){for(var E=C.g.length,T=[],S=0;S<E;S++)T[S]=~C.g[S];return new s(T,~C.h).add(f)}function A(C,E){return C.add(w(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function F(C,E){this.g=C,this.h=E}function W(C,E){if(_(E))throw Error("division by zero");if(_(C))return new F(h,h);if(v(C))return E=W(w(C),E),new F(w(E.g),w(E.h));if(v(E))return E=W(C,w(E)),new F(w(E.g),E.h);if(30<C.g.length){if(v(C)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var T=f,S=E;0>=S.l(C);)T=Q(T),S=Q(S);var R=ee(T,1),x=ee(S,1);for(S=ee(S,2),T=ee(T,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(T),x=b),S=ee(S,1),T=ee(T,1)}return E=A(C,R.j(E)),new F(R,E)}for(R=h;0<=C.l(E);){for(T=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(T)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(T)).j(E);v(b)||0<b.l(C);)b=(x=u(T-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,b)}return new F(R,C)}function Q(C){for(var E=C.g.length+1,T=[],S=0;S<E;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(T,C.h)}function ee(C,E){var T=E>>5;E%=32;for(var S=C.g.length-T,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+T)>>>E|C.i(x+T+1)<<32-E:C.i(x+T);return new s(R,C.h)}(t=s.prototype).m=function(){if(v(this))return-w(this).m();for(var C=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(v(this))return"-"+w(this).toString(C);for(var E=u(Math.pow(C,6)),T=this,S="";;){var R=W(T,E).g,x=((0<(T=A(T,R.j(E))).g.length?T.g[0]:T.h)>>>0).toString(C);if(_(T=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return v(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return v(this)?w(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,T[R]=(b&=65535)<<16|(x&=65535)}return new s(T,-2147483648&T[T.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(v(this))return v(C)?w(this).j(w(C)):w(w(this).j(C));if(v(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),$i=C.i(R)>>>16,lf=65535&C.i(R);T[2*S+2*R]+=b*lf,D(T,2*S+2*R),T[2*S+2*R+1]+=x*lf,D(T,2*S+2*R+1),T[2*S+2*R+1]+=b*$i,D(T,2*S+2*R+1),T[2*S+2*R+2]+=x*$i,D(T,2*S+2*R+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)},t.A=function(C){return W(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&C.i(S);return new s(T,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|C.i(S);return new s(T,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^C.i(S);return new s(T,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YU=QU.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return w(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(b))):S=(S=S.j(T)).add(u(b))}return S},Eo=QU.Integer=s}).apply(typeof KU<"u"?KU:typeof self<"u"?self:typeof window<"u"?window:{});var JU,Kd,ZU,jm,Cb,XU,ej,tj,Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Di={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Um&&Um];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in m))break e;m=m[P]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,P={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),l.apply(p,P)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,P,k){for(var G=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)G[Qe-2]=arguments[Qe];return p.prototype[P].apply(y,G)}}function v(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function w(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const P=l.length||0,k=y.length||0;l.length=P+k;for(let G=0;G<k;G++)l[P+G]=y[G]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Q=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function ee(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let P=1;P<arguments.length;P++){for(m in y=arguments[P],y)l[m]=y[m];for(let k=0;k<T.length;k++)m=T[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=HR;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var lf=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new sve,l=>l.reset());class sve{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let df,hf=!1,HR=new class $i{constructor(){this.h=this.g=null}add(p,m){const y=lf.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Pz=()=>{const l=a.Promise.resolve(void 0);df=()=>{l.then(ave)}};var ave=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=lf;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}hf=!1};function Wo(){this.s=this.s,this.C=this.C}function yn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Wo.prototype.s=!1,Wo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},yn.prototype.h=function(){this.defaultPrevented=!0};var cve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function ff(l,p){if(yn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Q){e:{try{W(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:uve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ff.aa.h.call(this)}}_(ff,yn);var uve={2:"touch",3:"pen",4:"mouse"};ff.prototype.h=function(){ff.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var pf="closure_listenable_"+(1e6*Math.random()|0),lve=0;function dve(l,p,m,y,P){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=P,this.key=++lve,this.da=this.fa=!1}function My(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ny(l){this.src=l,this.g={},this.h=0}function qR(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],P=Array.prototype.indexOf.call(y,p,void 0);(k=0<=P)&&Array.prototype.splice.call(y,P,1),k&&(My(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function zR(l,p,m,y){for(var P=0;P<l.length;++P){var k=l[P];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return P}return-1}Ny.prototype.add=function(l,p,m,y,P){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var G=zR(l,p,y,P);return-1<G?(p=l[G],m||(p.fa=!1)):((p=new dve(p,this.src,k,!!y,P)).fa=m,l.push(p)),p};var GR="closure_lm_"+(1e6*Math.random()|0),WR={};function Mz(l,p,m,y,P){if(y&&y.once)return xz(l,p,m,y,P);if(Array.isArray(p)){for(var k=0;k<p.length;k++)Mz(l,p[k],m,y,P);return null}return m=JR(m),l&&l[pf]?l.K(p,m,u(y)?!!y.capture:!!y,P):Nz(l,p,m,!1,y,P)}function Nz(l,p,m,y,P,k){if(!p)throw Error("Invalid event type");var G=u(P)?!!P.capture:!!P,Qe=QR(l);if(Qe||(l[GR]=Qe=new Ny(l)),(m=Qe.add(p,m,y,G,k)).proxy)return m;if(y=function hve(){const p=fve;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)cve||(P=G),void 0===P&&(P=!1),l.addEventListener(p.toString(),y,P);else if(l.attachEvent)l.attachEvent(Oz(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function xz(l,p,m,y,P){if(Array.isArray(p)){for(var k=0;k<p.length;k++)xz(l,p[k],m,y,P);return null}return m=JR(m),l&&l[pf]?l.L(p,m,u(y)?!!y.capture:!!y,P):Nz(l,p,m,!0,y,P)}function kz(l,p,m,y,P){if(Array.isArray(p))for(var k=0;k<p.length;k++)kz(l,p[k],m,y,P);else y=u(y)?!!y.capture:!!y,m=JR(m),l&&l[pf]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=zR(k=l.g[p],m,y,P))&&(My(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=QR(l))&&(p=l.g[p.toString()],l=-1,p&&(l=zR(p,m,y,P)),(m=-1<l?p[l]:null)&&KR(m))}function KR(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[pf])qR(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(Oz(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=QR(p))?(qR(m,l),0==m.h&&(m.src=null,p[GR]=null)):My(l)}}}function Oz(l){return l in WR?WR[l]:WR[l]="on"+l}function fve(l,p){if(l.da)l=!0;else{p=new ff(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&KR(l),l=m.call(y,p)}return l}function QR(l){return(l=l[GR])instanceof Ny?l:null}var YR="__closure_events_fn_"+(1e9*Math.random()>>>0);function JR(l){return"function"==typeof l?l:(l[YR]||(l[YR]=function(p){return l.handleEvent(p)}),l[YR])}function vn(){Wo.call(this),this.i=new Ny(this),this.M=this,this.F=null}function kn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new yn(p,l);else if(p instanceof yn)p.target=p.target||l;else{var P=p;S(p=new yn(y,l),P)}if(P=!0,m)for(var k=m.length-1;0<=k;k--){var G=p.g=m[k];P=xy(G,y,!0,p)&&P}if(P=xy(G=p.g=l,y,!0,p)&&P,P=xy(G,y,!1,p)&&P,m)for(k=0;k<m.length;k++)P=xy(G=p.g=m[k],y,!1,p)&&P}function xy(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var P=!0,k=0;k<p.length;++k){var G=p[k];if(G&&!G.da&&G.capture==m){var Qe=G.listener,rn=G.ha||G.src;G.fa&&qR(l.i,G),P=!1!==Qe.call(rn,y)&&P}}return P&&!y.defaultPrevented}function Vz(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Lz(l){l.g=Vz(()=>{l.g=null,l.i&&(l.i=!1,Lz(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(vn,Wo),vn.prototype[pf]=!0,vn.prototype.removeEventListener=function(l,p,m,y){kz(this,l,p,m,y)},vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)My(m[y]);delete l.g[p],l.h--}}this.F=null},vn.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},vn.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class pve extends Wo{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Lz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gf(l){Wo.call(this),this.h=l,this.g={}}_(gf,Wo);var Fz=[];function Uz(l){ee(l.g,function(p,m){this.g.hasOwnProperty(m)&&KR(p)},l),l.g={}}gf.prototype.N=function(){gf.aa.N.call(this),Uz(this)},gf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ZR=a.JSON.stringify,gve=a.JSON.parse,mve=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function XR(){}function Bz(){}XR.prototype.h=null;var mf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eP(){yn.call(this,"d")}function tP(){yn.call(this,"c")}_(eP,yn),_(tP,yn);var Ma={},$z=null;function ky(){return $z=$z||new vn}function Hz(l){yn.call(this,Ma.La,l)}function _f(l){const p=ky();kn(p,new Hz(p))}function qz(l,p){yn.call(this,Ma.STAT_EVENT,l),this.stat=p}function On(l){const p=ky();kn(p,new qz(p,l))}function zz(l,p){yn.call(this,Ma.Ma,l),this.size=p}function yf(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function vf(){this.g=!0}function Xu(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function Ive(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var G=1;G<P.length;G++)P[G]=""}}}return ZR(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Ma.La="serverreachability",_(Hz,yn),Ma.STAT_EVENT="statevent",_(qz,yn),Ma.Ma="timingevent",_(zz,yn),vf.prototype.xa=function(){this.g=!1},vf.prototype.info=function(){};var nP,Oy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Vy(){}function Ko(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new gf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wz}function Wz(){this.i=null,this.g="",this.h=!1}_(Vy,XR),Vy.prototype.g=function(){return new XMLHttpRequest},Vy.prototype.i=function(){return{}},nP=new Vy;var Kz={},rP={};function iP(l,p,m){l.L=1,l.v=jy(Hi(p)),l.m=m,l.P=!0,Qz(l,null)}function Qz(l,p){l.F=Date.now(),Ly(l),l.A=Hi(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),u3(m.i,"t",y),l.C=0,m=l.j.J,l.h=new Wz,l.g=A3(l.j,m?p:null,!l.m),0<l.O&&(l.M=new pve(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Fz[0]=P.toString()),P=Fz);for(var k=0;k<P.length;k++){var G=Mz(m,P[k],y||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),_f(),function _ve(l,p,m,y,P,k){l.info(function(){if(l.g)if(k)for(var G="",Qe=k.split("&"),rn=0;rn<Qe.length;rn++){var Pe=Qe[rn].split("=");if(1<Pe.length){var In=Pe[0];Pe=Pe[1];var En=In.split("_");G=2<=En.length&&"type"==En[1]?G+(In+"=")+Pe+"&":G+(In+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+p+"\n"+m+"\n"+G})}(l.i,l.u,l.A,l.l,l.R,l.m)}function Yz(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function Eve(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?rP:(m=Number(p.substring(m,y)),isNaN(m)?Kz:(y+=1)+m>p.length?rP:(p=p.slice(y,y+m),l.C=y+m,p))}function Ly(l){l.S=Date.now()+l.I,Jz(l,l.I)}function Jz(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=yf(f(l.ba,l),p)}function oP(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function If(l){0==l.j.G||l.J||T3(l.j,l)}function Na(l){oP(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,Uz(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function sP(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||aP(m.h,l)))if(!l.K&&aP(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var P=y;if(0==P[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;zy(m),Hy(m)}dP(m),On(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&0==m.v&&!m.C&&(m.C=yf(f(m.Za,m),6e3));if(1>=e3(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ka(m,11)}else if((l.K||m.g==l)&&zy(m),!D(p))for(P=m.Da.g.parse(p),p=0;p<P.length;p++){let Pe=P[p];if(m.T=Pe[0],Pe=Pe[1],2==m.G)if("c"==Pe[0]){m.K=Pe[1],m.ia=Pe[2];const In=Pe[3];null!=In&&(m.la=In,m.j.info("VER="+m.la));const En=Pe[4];null!=En&&(m.Aa=En,m.j.info("SVER="+m.Aa));const nl=Pe[5];null!=nl&&"number"==typeof nl&&0<nl&&(m.L=y=1.5*nl,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Nr=l.g;if(Nr){const Wy=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wy){var k=y.h;k.g||-1==Wy.indexOf("spdy")&&-1==Wy.indexOf("quic")&&-1==Wy.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(cP(k,k.h),k.h=null))}if(y.D){const fP=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;fP&&(y.ya=fP,ot(y.I,y.D,fP))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var G=l;if((y=m).qa=S3(y,y.J?y.ia:null,y.W),G.K){t3(y.h,G);var Qe=G,rn=y.L;rn&&(Qe.I=rn),Qe.B&&(oP(Qe),Ly(Qe)),y.g=G}else E3(y);0<m.i.length&&qy(m)}else"stop"!=Pe[0]&&"close"!=Pe[0]||ka(m,7);else 3==m.G&&("stop"==Pe[0]||"close"==Pe[0]?"stop"==Pe[0]?ka(m,7):lP(m):"noop"!=Pe[0]&&m.l&&m.l.ta(Pe),m.v=0)}_f()}catch{}}Ko.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==qi(l)?p.j():this.Y(l)},Ko.prototype.Y=function(l){try{if(l==this.g)e:{const En=qi(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>En)&&(3!=En||this.g&&(this.h.h||this.g.oa()||m3(this.g)))){this.J||4!=En||7==p||_f(),oP(this);var m=this.g.Z();this.X=m;t:if(Yz(this)){var y=m3(this.g);l="";var P=y.length,k=4==qi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Na(this),If(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==P-1)});y.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=200==m,function yve(l,p,m,y,P,k,G){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+p+"\n"+m+"\n"+k+" "+G})}(this.i,this.u,this.A,this.l,this.R,En,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,rn=this.g;if((Qe=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Qe)){var Pe=Qe;break t}}Pe=null}if(!(m=Pe)){this.o=!1,this.s=3,On(12),Na(this),If(this);break e}Xu(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sP(this,m)}if(this.P){let Nr;for(m=!0;!this.J&&this.C<G.length;){if(Nr=Eve(this,G),Nr==rP){4==En&&(this.s=4,On(14),m=!1),Xu(this.i,this.l,null,"[Incomplete Response]");break}if(Nr==Kz){this.s=4,On(15),Xu(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}Xu(this.i,this.l,Nr,null),sP(this,Nr)}if(Yz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=En||0!=G.length||this.h.h||(this.s=1,On(16),m=!1),this.o=this.o&&m,m){if(0<G.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),hP(In),In.M=!0,On(11))}}else Xu(this.i,this.l,G,"[Invalid Chunked Response]"),Na(this),If(this)}else Xu(this.i,this.l,G,null),sP(this,G);4==En&&Na(this),this.o&&!this.J&&(4==En?T3(this.j,this):(this.o=!1,Ly(this)))}else(function Fve(l){const p={};l=(l.g&&2<=qi(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const P=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[P]||[];p[P]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<G.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),Na(this),If(this)}}}catch{}},Ko.prototype.cancel=function(){this.J=!0,Na(this)},Ko.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function vve(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(_f(),On(17)),Na(this),this.s=2,If(this)):Jz(this,this.S-l)};var wve=class{constructor(l,p){this.g=l,this.map=p}};function Zz(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xz(l){return!!l.h||!!l.g&&l.g.size>=l.j}function e3(l){return l.h?1:l.g?l.g.size:0}function aP(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function cP(l,p){l.g?l.g.add(p):l.h=p}function t3(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function n3(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return v(l.i)}function r3(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function bve(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function Tve(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),P=y.length,k=0;k<P;k++)p.call(void 0,y[k],m&&m[k],l)}Zz.prototype.cancel=function(){if(this.i=n3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var i3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof xa){this.h=l.h,Fy(this,l.j),this.o=l.o,this.g=l.g,Uy(this,l.s),this.l=l.l;var p=l.i,m=new Tf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),o3(this,m),this.m=l.m}else l&&(p=String(l).match(i3))?(this.h=!1,Fy(this,p[1]||"",!0),this.o=Ef(p[2]||""),this.g=Ef(p[3]||"",!0),Uy(this,p[4]),this.l=Ef(p[5]||"",!0),o3(this,p[6]||"",!0),this.m=Ef(p[7]||"")):(this.h=!1,this.i=new Tf(null,this.h))}function Hi(l){return new xa(l)}function Fy(l,p,m){l.j=m?Ef(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Uy(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function o3(l,p,m){p instanceof Tf?(l.i=p,function Mve(l,p){p&&!l.j&&(Qo(l),l.i=null,l.g.forEach(function(m,y){var P=y.toLowerCase();y!=P&&(a3(this,y),u3(this,P,m))},l)),l.j=p}(l.i,l.h)):(m||(p=wf(p,Rve)),l.i=new Tf(p,l.h))}function ot(l,p,m){l.i.set(p,m)}function jy(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ef(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function wf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,Sve),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Sve(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}xa.prototype.toString=function(){var l=[],p=this.j;p&&l.push(wf(p,s3,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(wf(p,s3,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(wf(m,"/"==m.charAt(0)?Dve:Ave,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",wf(m,Pve)),l.join("")};var s3=/[#\/\?@]/g,Ave=/[#\?:]/g,Dve=/[#\?]/g,Rve=/[#\?@]/g,Pve=/#/g;function Tf(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Qo(l){l.g||(l.g=new Map,l.h=0,l.i&&function Cve(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),P=null;if(0<=y){var k=l[m].substring(0,y);P=l[m].substring(y+1)}else k=l[m];p(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function a3(l,p){Qo(l),p=el(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function c3(l,p){return Qo(l),p=el(l,p),l.g.has(p)}function u3(l,p,m){a3(l,p),0<m.length&&(l.i=null,l.g.set(el(l,p),v(m)),l.h+=m.length)}function el(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Yo(l,p,m,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(m)}catch{}}function kve(){this.g=new mve}function Ove(l,p,m){const y=m||"";try{r3(l,function(P,k){let G=P;u(P)&&(G=ZR(P)),p.push(y+k+"="+encodeURIComponent(G))})}catch(P){throw p.push(y+"type="+encodeURIComponent("_badmap")),P}}function bf(l){this.l=l.Ub||null,this.j=l.eb||!1}function By(l,p){vn.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function l3(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Cf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Sf(l)}function Sf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function d3(l){let p="";return ee(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function uP(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=d3(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):ot(l,p,m))}function Et(l){vn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Tf.prototype).add=function(l,p){Qo(this),this.i=null,l=el(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){Qo(this),this.g.forEach(function(m,y){m.forEach(function(P){l.call(p,P,y,this)},this)},this)},t.na=function(){Qo(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const P=l[y];for(let k=0;k<P.length;k++)m.push(p[y])}return m},t.V=function(l){Qo(this);let p=[];if("string"==typeof l)c3(this,l)&&(p=p.concat(this.g.get(el(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return Qo(this),this.i=null,c3(this,l=el(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var P=k;""!==G[y]&&(P+="="+encodeURIComponent(String(G[y]))),l.push(P)}}return this.i=l.join("&")},_(bf,XR),bf.prototype.g=function(){return new By(this.l,this.j)},bf.prototype.i=function(l){return function(){return l}}({}),_(By,vn),(t=By.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Sf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Sf(this)),this.g&&(this.readyState=3,Sf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;l3(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Cf(this):Sf(this),3==this.readyState&&l3(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Cf(this))},t.Qa=function(l){this.g&&(this.response=l,Cf(this))},t.ga=function(){this.g&&Cf(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(By.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Et,vn);var Vve=/^https?$/i,Lve=["POST","PUT"];function h3(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,f3(l),$y(l)}function f3(l){l.A||(l.A=!0,kn(l,"complete"),kn(l,"error"))}function p3(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=qi(l)||2!=l.Z()))if(l.u&&4==qi(l))Vz(l.Ea,0,l);else if(kn(l,"readystatechange"),4==qi(l)){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===G){var P=String(l.D).match(i3)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!Vve.test(P?P.toLowerCase():"")}m=y}if(m)kn(l,"complete"),kn(l,"success");else{l.m=6;try{var k=2<qi(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",f3(l)}}finally{$y(l)}}}function $y(l,p){if(l.g){g3(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||kn(l,"ready");try{m.onreadystatechange=y}catch{}}}function g3(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function qi(l){return l.g?l.g.readyState:0}function m3(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Af(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function _3(l){this.Aa=0,this.i=[],this.j=new vf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Af("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Af("baseRetryDelayMs",5e3,l),this.cb=Af("retryDelaySeedMs",1e4,l),this.Wa=Af("forwardChannelMaxRetries",2,l),this.wa=Af("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Zz(l&&l.concurrentRequestLimit),this.Da=new kve,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function lP(l){if(y3(l),3==l.G){var p=l.U++,m=Hi(l.I);if(ot(m,"SID",l.K),ot(m,"RID",p),ot(m,"TYPE","terminate"),Df(l,m),(p=new Ko(l,l.j,p)).L=2,p.v=jy(Hi(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=A3(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ly(p)}C3(l)}function Hy(l){l.g&&(hP(l),l.g.cancel(),l.g=null)}function y3(l){Hy(l),l.u&&(a.clearTimeout(l.u),l.u=null),zy(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function qy(l){if(!Xz(l.h)&&!l.s){l.s=!0;var p=l.Ga;df||Pz(),hf||(df(),hf=!0),HR.add(p,l),l.B=0}}function v3(l,p){var m;m=p?p.l:l.U++;const y=Hi(l.I);ot(y,"SID",l.K),ot(y,"RID",m),ot(y,"AID",l.T),Df(l,y),l.m&&l.o&&uP(y,l.m,l.o),m=new Ko(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=I3(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),cP(l.h,m),iP(m,y,p)}function Df(l,p){l.H&&ee(l.H,function(m,y){ot(p,y,m)}),l.l&&r3({},function(m,y){ot(p,y,m)})}function I3(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var P=l.i;let k=-1;for(;;){const G=["count="+m];-1==k?0<m?(k=P[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Qe=!0;for(let rn=0;rn<m;rn++){let Pe=P[rn].g;const In=P[rn].map;if(Pe-=k,0>Pe)k=Math.max(0,P[rn].g-100),Qe=!1;else try{Ove(In,G,"req"+Pe+"_")}catch{y&&y(In)}}if(Qe){y=G.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function E3(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;df||Pz(),hf||(df(),hf=!0),HR.add(p,l),l.v=0}}function dP(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=yf(f(l.Fa,l),b3(l,l.v)),l.v++,0))}function hP(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function w3(l){l.g=new Ko(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=Hi(l.qa);ot(p,"RID","rpc"),ot(p,"SID",l.K),ot(p,"AID",l.T),ot(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(p,"TO",l.ja),ot(p,"TYPE","xmlhttp"),Df(l,p),l.m&&l.o&&uP(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=jy(Hi(p)),m.m=null,m.P=!0,Qz(m,l)}function zy(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function T3(l,p){var m=null;if(l.g==p){zy(l),hP(l),l.g=null;var y=2}else{if(!aP(l.h,p))return;m=p.D,t3(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var P=l.B;kn(y=ky(),new zz(y,m)),qy(l)}else E3(l);else if(3==(P=p.s)||0==P&&0<p.X||!(1==y&&function Uve(l,p){return!(e3(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=yf(f(l.Ga,l,p),b3(l,l.B)),l.B++,0)))}(l,p)||2==y&&dP(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),P){case 1:ka(l,5);break;case 4:ka(l,10);break;case 3:ka(l,6);break;default:ka(l,2)}}function b3(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function ka(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const P=!y;y=new xa(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Fy(y,"https"),jy(y),P?function Nve(l,p){const m=new vf;if(a.Image){const y=new Image;y.onload=g(Yo,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(Yo,m,"TestLoadImage: error",!1,p,y),y.onabort=g(Yo,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(Yo,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function xve(l,p){new vf;const y=new AbortController,P=setTimeout(()=>{y.abort(),Yo(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(P),Yo(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(P),Yo(0,0,!1,p)})}(y.toString(),m)}else On(2);l.G=0,l.l&&l.l.sa(p),C3(l),y3(l)}function C3(l){if(l.G=0,l.ka=[],l.l){const p=n3(l.h);(0!=p.length||0!=l.i.length)&&(w(l.ka,p),w(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function S3(l,p,m){var y=m instanceof xa?Hi(m):new xa(m);if(""!=y.g)p&&(y.g=p+"."+y.g),Uy(y,y.s);else{var P=a.location;y=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var k=new xa(null);y&&Fy(k,y),p&&(k.g=p),P&&Uy(k,P),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&ot(y,m,p),ot(y,"VER",l.la),Df(l,y),y}function A3(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Et(l.Ca&&!l.pa?new bf({eb:m}):l.pa)).Ha(l.J),p}function D3(){}function Gy(){}function cr(l,p){vn.call(this),this.g=new _3(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new tl(this)}function R3(l){eP.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function P3(){tP.call(this),this.status=1}function tl(l){this.g=l}(t=Et.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nP.g(),this.v=function jz(l){return l.h||(l.h=l.i())}(this.o?this.o:nP),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void h3(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)m.set(P,y[P]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Lve,p,void 0))||y||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of m)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g3(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){h3(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,kn(this,"complete"),kn(this,"abort"),$y(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$y(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?p3(this):this.bb())},t.bb=function(){p3(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<qi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),gve(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=_3.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){On(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=S3(this,null,this.W),qy(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const P=new Ko(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(P.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=I3(this,P,p),ot(m=Hi(this.I),"RID",l),ot(m,"CVER",22),this.D&&ot(m,"X-HTTP-Session-Id",this.D),Df(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(d3(k)))+"&"+p:this.m&&uP(m,this.m,k)),cP(this.h,P),this.Ua&&ot(m,"TYPE","init"),this.P?(ot(m,"$req",p),ot(m,"SID","null"),P.T=!0,iP(P,m,null)):iP(P,m,p),this.G=2}}else 3==this.G&&(l?v3(this,l):0==this.i.length||Xz(this.h)||v3(this))},t.Fa=function(){if(this.u=null,w3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=yf(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),Hy(this),w3(this))},t.Za=function(){null!=this.C&&(this.C=null,Hy(this),dP(this),On(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=D3.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Gy.prototype.g=function(l,p){return new cr(l,p)},_(cr,vn),cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){lP(this.g)},cr.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=ZR(l),l=m);p.i.push(new wve(p.Ya++,l)),3==p.G&&qy(p)},cr.prototype.N=function(){this.g.l=null,delete this.j,lP(this.g),delete this.g,cr.aa.N.call(this)},_(R3,eP),_(P3,tP),_(tl,D3),tl.prototype.ua=function(){kn(this.g,"a")},tl.prototype.ta=function(l){kn(this.g,new R3(l))},tl.prototype.sa=function(l){kn(this.g,new P3)},tl.prototype.ra=function(){kn(this.g,"b")},Gy.prototype.createWebChannel=Gy.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,tj=Di.createWebChannelTransport=function(){return new Gy},ej=Di.getStatEventTarget=function(){return ky()},XU=Di.Event=Ma,Cb=Di.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oy.NO_ERROR=0,Oy.TIMEOUT=8,Oy.HTTP_ERROR=6,jm=Di.ErrorCode=Oy,Gz.COMPLETE="complete",ZU=Di.EventType=Gz,Bz.EventType=mf,mf.OPEN="a",mf.CLOSE="b",mf.ERROR="c",mf.MESSAGE="d",vn.prototype.listen=vn.prototype.K,Kd=Di.WebChannel=Bz,Di.FetchXmlHttpFactory=bf,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,JU=Di.XhrIo=Et}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});const rj="@firebase/firestore";class Gt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let tu="11.10.0";const wo=new fb("@firebase/firestore");function nu(){return wo.logLevel}function j(t,...e){if(wo.logLevel<=we.DEBUG){const n=e.map(Sb);wo.debug(`Firestore (${tu}): ${t}`,...n)}}function Dt(t,...e){if(wo.logLevel<=we.ERROR){const n=e.map(Sb);wo.error(`Firestore (${tu}): ${t}`,...n)}}function Mn(t,...e){if(wo.logLevel<=we.WARN){const n=e.map(Sb);wo.warn(`Firestore (${tu}): ${t}`,...n)}}function Sb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function K(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,oj(t,r,n)}function oj(t,e,n){let r=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Dt(r),new Error(r)}function J(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||oj(e,i,r)}function z(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class sj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ele{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class wle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tle{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;J(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(I(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J("string"==typeof r.accessToken,31837,{l:r}),new sj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return J(null===e||"string"==typeof e,2055,{h:e}),new Gt(e)}}class ble{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Cle{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ble(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){J(void 0===this.o,3512);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new Ab(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ale(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Db(){return new TextEncoder}class Rb{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Ale(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Pb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ie(r,i);{const o=Db(),s=Dle(o.encode(aj(t,n)),o.encode(aj(e,n)));return 0!==s?s:ie(r,i)}}n+=r>65535?2:1}return ie(t.length,e.length)}function aj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Dle(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function ru(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const Mb="__name__";class Kr{constructor(e,n,r){void 0===n?n=0:n>e.length&&K(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Kr.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Kr.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return ie(e.length,n.length)}static compareSegments(e,n){const r=Kr.isNumericId(e),i=Kr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Kr.extractNumericId(e).compare(Kr.extractNumericId(n)):Pb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eo.fromString(e.substring(4,e.length-2))}}class ve extends Kr{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const Rle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Kr{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return Rle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Mb}static keyField(){return new ct([Mb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}class q{constructor(e){this.path=e}static fromPath(e){return new q(ve.fromString(e))}static fromName(e){return new q(ve.fromString(e).popFirst(5))}static empty(){return new q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ve.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ve(e.slice()))}}function Nb(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uj(t){if(!q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lj(t){if(q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Bm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":K(12329,{type:typeof t})}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ea(t,e){if(!dj(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}const fj=-62135596800;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fj)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ea(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-fj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Vt("string",Ue._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Ue(0,0))}static max(){return new X(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function mj(t){return new nr(t.readTime,t.key,-1)}class nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new nr(X.min(),q.empty(),-1)}static max(){return new nr(X.max(),q.empty(),-1)}}function kb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=q.comparator(t.documentKey,e.documentKey),0!==n?n:ie(t.largestBatchId,e.largestBatchId))}class yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function To(t){return Ob.apply(this,arguments)}function Ob(){return(Ob=I(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function bo(t){return"IndexedDbTransactionError"===t.name}let ir=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function Jd(t){return null==t}function Zd(t){return 0===t&&1/t==-1/0}function Lle(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function wj(t){return t+"\x01\x01"}const eh="mutationQueues",Rr="mutations",cu="documentMutations",th="remoteDocumentGlobal",uu="targets",lu="targetDocuments",sa="targetGlobal",nh="collectionParents",du="clientMetadata",Km="bundles",Qm="namedQueries";function Oj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Xe{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jm(this.root,e,this.comparator,!0)}}class Jm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=i??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new tn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return tn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1,tn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fj(this.data.getIterator())}getIteratorFrom(e){return new Fj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class Fj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new je(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ru(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Uj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Uj("Invalid base64 string: "+o):o}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const ude=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(t){if(J(!!t,39018),"string"==typeof t){let e=0;const n=ude.exec(t);if(J(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Pi(t){return"string"==typeof t?It.fromBase64String(t):It.fromUint8Array(t)}const jj="server_timestamp",Bj="__type__",$j="__previous_value__",Hj="__local_write_time__";function Zm(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[Bj])||void 0===n?void 0:n.stringValue)===jj}function Xm(t){const e=t.mapValue.fields[$j];return Zm(e)?Xm(e):e}function oh(t){const e=Ri(t.mapValue.fields[Hj].timestampValue);return new Ue(e.seconds,e.nanos)}class lde{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const sh="(default)";class aa{constructor(e,n){this.projectId=e,this.database=n||sh}static empty(){return new aa("","")}get isDefaultDatabase(){return this.database===sh}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}const zb="__type__",qj="__max__",Ao_mapValue={fields:{__type__:{stringValue:qj}}},Gb="__vector__",fu="value";function Do(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:Qj(t)?9007199254740991:r_(t)?10:11:K(28295,{value:t})}function Jr(t,e){if(t===e)return!0;const n=Do(t);if(n!==Do(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oh(t).isEqual(oh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ri(i.timestampValue),a=Ri(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Pi(t.bytesValue).isEqual(Pi(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ut(i.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ut(i.integerValue)===ut(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ut(i.doubleValue),a=ut(o.doubleValue);return s===a?Zd(s)===Zd(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ru(t.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Oj(s)!==Oj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Jr(s[c],a[c])))return!1;return!0}(t,e);default:return K(52216,{left:t})}var o}function ah(t,e){return void 0!==(t.values||[]).find(n=>Jr(n,e))}function Ro(t,e){if(t===e)return 0;const n=Do(t),r=Do(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ut(o.integerValue||o.doubleValue),c=ut(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return zj(t.timestampValue,e.timestampValue);case 4:return zj(oh(t),oh(e));case 5:return Pb(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Pi(o),c=Pi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ie(a[u],c[u]);if(0!==d)return d}return ie(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ie(ut(o.latitude),ut(s.latitude));return 0!==a?a:ie(ut(o.longitude),ut(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gj(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[fu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[fu])||void 0===c?void 0:c.arrayValue,v=ie((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:Gj(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ao_mapValue&&s===Ao_mapValue)return 0;if(o===Ao_mapValue)return 1;if(s===Ao_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Pb(c[h],d[h]);if(0!==f)return f;const g=Ro(a[c[h]],u[d[h]]);if(0!==g)return g}return ie(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function zj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ie(t,e);const n=Ri(t),r=Ri(e),i=ie(n.seconds,r.seconds);return 0!==i?i:ie(n.nanos,r.nanos)}function Gj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Ro(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function pu(t){return Wb(t)}function Wb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Pi(t.bytesValue).toBase64():"referenceValue"in t?q.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Wb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Wb(n.fields[s])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function t_(t){switch(Do(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xm(t);return e?16+t_(e):16;case 5:return 2*t.stringValue.length;case 6:return Pi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+t_(o),0);case 10:case 11:return function(r){let i=0;return So(r.fields,(o,s)=>{i+=o.length+t_(s)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function ca(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kb(t){return!!t&&"integerValue"in t}function ch(t){return!!t&&"arrayValue"in t}function Wj(t){return!!t&&"nullValue"in t}function Kj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function n_(t){return!!t&&"mapValue"in t}function r_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[zb])||void 0===n?void 0:n.stringValue)===Gb}function uh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Qj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qj}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!n_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uh(n)}setAll(e){let n=ct.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=uh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());n_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];n_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new nn(uh(this.value))}}function Xj(t){const e=[];return So(t.fields,(n,r)=>{const i=new ct([n]);if(n_(r)){const o=Xj(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}class nt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,X.min(),X.min(),X.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,X.min(),X.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,X.min(),X.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Po{constructor(e,n){this.position=e,this.inclusive=n}}function eB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?q.comparator(q.fromName(s.referenceValue),n.key):Ro(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function tB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jr(t.position[n],e.position[n]))return!1;return!0}class lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function fde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class nB{}class Te extends nB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new pde(e,n,r):"array-contains"===n?new _de(e,r):"in"===n?new cB(e,r):"not-in"===n?new yde(e,r):"array-contains-any"===n?new vde(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new gde(e,r):new mde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Ro(n,this.value)):null!==n&&Do(this.value)===Do(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends nB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Be(e,n)}matches(e){return gu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gu(t){return"and"===t.op}function Yb(t){return function rB(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}(t)&&gu(t)}function Jb(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+pu(t.value);if(Yb(t))return t.filters.map(e=>Jb(e)).join(",");{const e=t.filters.map(n=>Jb(n)).join(",");return`${t.op}(${e})`}}function iB(t,e){return t instanceof Te?(r=t,(i=e)instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Jr(r.value,i.value)):t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&iB(s,i.filters[a]),!0)}(t,e):void K(19439);var r,i}function sB(t){return t instanceof Te?`${(n=t).field.canonicalString()} ${n.op} ${pu(n.value)}`:t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(sB).join(" ,")+"}"}(t):"Filter";var n}class pde extends Te{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class gde extends Te{constructor(e,n){super(e,"in",n),this.keys=aB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mde extends Te{constructor(e,n){super(e,"not-in",n),this.keys=aB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class _de extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ch(n)&&ah(n.arrayValue,this.value)}}class cB extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&ah(this.value.arrayValue,n)}}class yde extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!ah(this.value.arrayValue,n)}}class vde extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}class Ide{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function Zb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Ide(t,e,n,r,i,o,s)}function ua(t){const e=z(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pu(r)).join(",")),e.Pe=n}return e.Pe}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tB(t.startAt,e.startAt)&&tB(t.endAt,e.endAt)}function i_(t){return q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Mi{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function mu(t){return new Mi(t)}function hB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Xb(t){return null!==t.collectionGroup}function _u(t){const e=z(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new je(ct.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new lh(o,r))}),n.has(ct.keyField().canonicalString())||e.Te.push(new lh(ct.keyField(),r))}return e.Te}function pn(t){const e=z(t);return e.Ie||(e.Ie=function pB(t,e){if("F"===t.limitType)return Zb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new lh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Po(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Po(t.startAt.position,t.startAt.inclusive):null;return Zb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,_u(t))),e.Ie}function eC(t,e){const n=t.filters.concat([e]);return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function s_(t,e,n){return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hh(t,e){return dh(pn(t),pn(e))&&t.limitType===e.limitType}function gB(t){return`${ua(pn(t))}|lt:${t.limitType}`}function yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sB(i)).join(", ")}]`),Jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pu(i)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function fh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of _u(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=eB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,_u(r),i)||r.endAt&&!function(s,a,c){const u=eB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,_u(r),i)));var r,i}function _B(t){return(e,n)=>{let r=!1;for(const i of _u(t)){const o=Ede(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Ede(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Ro(c,u):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}class Ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Lj(this.inner)}size(){return this.innerSize}}const wde=new Xe(q.comparator);function Wn(){return wde}const yB=new Xe(q.comparator);function ph(...t){let e=yB;for(const n of t)e=e.insert(n.key,n);return e}function vB(t){let e=yB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return gh()}function IB(){return gh()}function gh(){return new Ni(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tde=new Xe(q.comparator),bde=new je(q.comparator);function me(...t){let e=bde;for(const n of t)e=e.add(n);return e}const Cde=new je(ie);function nC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(e)?"-0":e}}function EB(t){return{integerValue:""+t}}function wB(t,e){return function Ej(t){return"number"==typeof t&&Number.isInteger(t)&&!Zd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?EB(e):nC(t,e)}class a_{constructor(){this._=void 0}}function Sde(t,e,n){return t instanceof vu?function(i,o){const s={fields:{[Bj]:{stringValue:jj},[Hj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zm(o)&&(o=Xm(o)),o&&(s.fields[$j]=o),{mapValue:s}}(n,e):t instanceof la?bB(t,e):t instanceof da?CB(t,e):function(i,o){const s=TB(i,o),a=SB(s)+SB(i.Ee);return Kb(s)&&Kb(i.Ee)?EB(a):nC(i.serializer,a)}(t,e)}function Ade(t,e,n){return t instanceof la?bB(t,e):t instanceof da?CB(t,e):n}function TB(t,e){return t instanceof Iu?Kb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class vu extends a_{}class la extends a_{constructor(e){super(),this.elements=e}}function bB(t,e){const n=AB(e);for(const r of t.elements)n.some(i=>Jr(i,r))||n.push(r);return{arrayValue:{values:n}}}class da extends a_{constructor(e){super(),this.elements=e}}function CB(t,e){let n=AB(e);for(const r of t.elements)n=n.filter(i=>!Jr(i,r));return{arrayValue:{values:n}}}class Iu extends a_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function SB(t){return ut(t.integerValue||t.doubleValue)}function AB(t){return ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class mh{constructor(e,n){this.field=e,this.transform=n}}class Rde{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class u_{}function DB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new wu(t.key,lt.none()):new Eu(t.key,t.data,lt.none());{const n=t.data,r=nn.empty();let i=new je(ct.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new xi(t.key,r,new Gn(i.toArray()),lt.none())}}function Pde(t,e,n){t instanceof Eu?function(i,o,s){const a=i.value.clone(),c=MB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xi?function(i,o,s){if(!c_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=MB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(PB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function _h(t,e,n,r){return t instanceof Eu?function(o,s,a,c){if(!c_(o.precondition,s))return a;const u=o.value.clone(),d=NB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xi?function(o,s,a,c){if(!c_(o.precondition,s))return a;const u=NB(o.fieldTransforms,c,s),d=s.data;return d.setAll(PB(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,c_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Mde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=TB(r.transform,i||null);null!=o&&(null===n&&(n=nn.empty()),n.set(r.field,o))}return n||null}function RB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&ru(r,i,(o,s)=>function Dde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof la&&i instanceof la||r instanceof da&&i instanceof da?ru(r.elements,i.elements,Jr):r instanceof Iu&&i instanceof Iu?Jr(r.Ee,i.Ee):r instanceof vu&&i instanceof vu);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Eu extends u_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xi extends u_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function PB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function MB(t,e,n){const r=new Map;J(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ade(s,a,n[i]))}return r}function NB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Sde(o,s,e))}return r}class wu extends u_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends u_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Pde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=DB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ru(this.mutations,e.mutations,(n,r)=>RB(n,r))&&ru(this.baseMutations,e.baseMutations,(n,r)=>RB(n,r))}}class oC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Tde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new oC(e,n,r,i)}}class sC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nde{constructor(e,n){this.count=e,this.unchangedNames=n}}var Lt,Ae;function OB(t){if(void 0===t)return Dt("GRPC error has no .code"),N.UNKNOWN;switch(t){case Lt.OK:return N.OK;case Lt.CANCELLED:return N.CANCELLED;case Lt.UNKNOWN:return N.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return N.INTERNAL;case Lt.UNAVAILABLE:return N.UNAVAILABLE;case Lt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Lt.NOT_FOUND:return N.NOT_FOUND;case Lt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Lt.ABORTED:return N.ABORTED;case Lt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Lt.DATA_LOSS:return N.DATA_LOSS;default:return K(39323,{code:t})}}(Ae=Lt||(Lt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";const xde=new Eo([4294967295,4294967295],0);function VB(t){const e=Db().encode(t),n=new YU;return n.update(e),new Uint8Array(n.digest())}function LB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Eo([n,r],0),new Eo([i,o],0)]}class aC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yh(`Invalid padding: ${n}`);if(r<0)throw new yh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new yh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new yh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Eo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Eo.fromNumber(r)));return 1===i.compare(xde)&&(i=new Eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=VB(e),[r,i]=LB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new aC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=VB(e),[r,i]=LB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vh{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vh(X.min(),i,new Xe(ie),Wn(),me())}}class Ih{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ih(r,n,me(),me(),me())}}class d_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class FB{constructor(e,n){this.targetId=e,this.De=n}}class UB{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jB{constructor(){this.ve=0,this.Ce=BB(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=me(),n=me(),r=me();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new Ih(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=BB()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class kde{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=h_(),this.Je=h_(),this.He=new Xe(ie)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(i_(o))if(0===r){const s=new q(o.path);this.Xe(n,s,nt.newNoDocument(s,X.min()))}else J(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Pi(r).toUint8Array()}catch(c){if(c instanceof Uj)return Mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new aC(s,i,o)}catch(c){return Mn(c instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&i_(a.target)){const c=new q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,nt.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=me();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new vh(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=h_(),this.Je=h_(),this.He=new Xe(ie),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new jB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new je(ie),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new je(ie),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function h_(){return new Xe(q.comparator)}function BB(){return new Xe(q.comparator)}const Ode={asc:"ASCENDING",desc:"DESCENDING"},Vde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lde={and:"AND",or:"OR"};class Fde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cC(t,e){return t.useProto3Json||Jd(e)?e:{value:e}}function Tu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $B(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ude(t,e){return Tu(t,e.toTimestamp())}function Rt(t){return J(!!t,49232),X.fromTimestamp(function(n){const r=Ri(n);return new Ue(r.seconds,r.nanos)}(t))}function uC(t,e){return lC(t,e).canonicalString()}function lC(t,e){const n=(i=t,new ve(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function HB(t){const e=ve.fromString(t);return J(XB(e),10190,{key:e.toString()}),e}function Eh(t,e){return uC(t.databaseId,e.path)}function Xr(t,e){const n=HB(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(GB(n))}function qB(t,e){return uC(t.databaseId,e)}function dC(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GB(t){return J(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function WB(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function KB(t,e){return{documents:[qB(t,e.path)]}}function p_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qB(t,i);const o=function(u){if(0!==u.length)return ZB(Be.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Mo((f=d).field),direction:qde(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=cC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function YB(t){let e=function zB(t){const e=HB(t);return 4===e.length?ve.emptyPath():GB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){J(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=JB(h);return f instanceof Be&&Yb(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new lh(bu((_=f).field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,Jd(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new Po((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new Po(h.values||[],!h.before)}(n.endAt)),function dB(t,e,n,r,i,o,s,a){return new Mi(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function JB(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bu(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bu(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bu(n.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bu(n.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):void 0!==t.fieldFilter?Te.create(bu((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Be.create(n.compositeFilter.filters.map(r=>JB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t});var n}function qde(t){return Ode[t]}function zde(t){return Vde[t]}function Gde(t){return Lde[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function bu(t){return ct.fromServerFormat(t.fieldPath)}function ZB(t){return t instanceof Te?function(n){if("=="===n.op){if(Kj(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(Wj(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Kj(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(Wj(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:zde(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(i=>ZB(i));return 1===r.length?r[0]:{compositeFilter:{op:Gde(n.op),filters:r}}}(t):K(54877,{filter:t})}function Wde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XB(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class ki{constructor(e,n,r,i,o=X.min(),s=X.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class e${constructor(e){this.gt=e}}function m_(t){const e=YB({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?s_(e,e.limit,"L"):e}class ga{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Zd(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=Ri(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Pi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?Qj(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):r_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=fu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(ut(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}ga.Ut=new ga;class nhe{constructor(){this.Dn=new yC}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(nr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class yC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(ve.comparator)).toArray()}}new Uint8Array(0);const _$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(41943040,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class _a{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new _a(0)}static ur(){return new _a(-1)}}const T$="LruGarbageCollector";function C$([t,e],[n,r]){const i=ie(t,n);return 0===i?ie(e,r):i}class ohe{constructor(e){this.Tr=e,this.buffer=new je(C$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();C$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;j(T$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,I(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){bo(r)?j(T$,"Ignoring IndexedDB error during garbage collection: ",r):yield To(r)}yield n.Rr(3e5)}))}}class she{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return M.resolve(ir.ue);const r=new ohe(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(_$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),nu()<=we.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class D${constructor(){this.changes=new Ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lhe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class x${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&_h(r.mutation,i,Gn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ph();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Wn();const s=gh(),a=gh();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof xi)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),_h(d.mutation,u,d.mutation.getFieldMask(),Ue.now())):s.set(u.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new lhe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gh();let i=new Xe((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Gn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=IB();d.forEach(f=>{if(!o.has(f)){const g=DB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return q.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Xb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(Zr());let a=-1,c=o;return s.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,me())).next(d=>({batchId:a,changes:vB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ph();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{const u=(h=n,f=c.child(o),new Mi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,nt.newInvalidDocument(d)))});let a=ph();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&_h(d.mutation,u,Gn.empty(),Ue.now()),fh(n,u)&&(a=a.insert(c,u))}),a})}}class dhe{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Rt(i.createTime)}),M.resolve();var i}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:m_(i.bundledQuery),readTime:Rt(i.readTime)}),M.resolve();var i}}class hhe{constructor(){this.overlays=new Xe(q.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Zr(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xe((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=Zr(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Zr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sC(n,r));let o=this.kr.get(n);void 0===o&&(o=me(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class fhe{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class vC{constructor(){this.qr=new je(Kt.Qr),this.$r=new je(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Kt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new ve([])),r=new Kt(n,e),i=new Kt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new ve([])),r=new Kt(n,e),i=new Kt(n,e+1);let o=me();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Kt(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}class phe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new je(Kt.Qr)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new iC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new Kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),i=new Kt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ie);return n.forEach(i=>{const o=new Kt(i,0),s=new Kt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const s=new Kt(new q(o),0);let a=new je(ie);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),M.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){J(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{const o=new Kt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Kt(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ghe{constructor(e){this.ni=e,this.docs=new Xe(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Wn();const s=n.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||kb(mj(d),r)<=0||(i.has(d.key)||fh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mhe(this)}getSize(e){return M.resolve(this.size)}}class mhe extends D${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class _he{constructor(e){this.persistence=e,this.ii=new Ni(n=>ua(n),dh),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new vC,this.targetCount=0,this._i=_a.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new _a(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}class IC{constructor(e,n){this.ai={},this.overlays={},this.ui=new ir(0),this.ci=!1,this.ci=!0,this.li=new fhe,this.referenceDelegate=e(this),this.hi=new _he(this),this.indexManager=new nhe,this.remoteDocumentCache=new ghe(r=>this.referenceDelegate.Pi(r)),this.serializer=new e$(n),this.Ti=new dhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new phe(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new yhe(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class yhe extends yj{constructor(e){super(),this.currentSequenceNumber=e}}class b_{constructor(e){this.persistence=e,this.Ai=new vC,this.Ri=null}static Vi(e){return new b_(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class C_{constructor(e,n){this.persistence=e,this.gi=new Ni(r=>function fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wj(e)),e=Lle(t.get(n),e);return wj(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function A$(t,e){return new she(t,e)}(this,n)}static Vi(e,n){return new C_(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=t_(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return M.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class SC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=me(),i=me();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new SC(e,n.fromCache,r,i)}}class Ihe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class V${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=AU()?8:function vj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(At())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Ihe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(nu()<=we.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(nu()<=we.DEBUG&&j("QueryEngine","Query:",yu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(nu()<=we.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):M.resolve())}ps(e,n){if(hB(n))return M.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=s_(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=me(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,s_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return hB(n)||i.isEqual(X.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(nu()<=we.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yu(n)),this.vs(e,s,n,function gj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new Ue(n+1,0):new Ue(n,r));return new nr(i,q.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new je(_B(e));return n.forEach((i,o)=>{fh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return nu()<=we.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",yu(n)),this.gs.getDocumentsMatchingQuery(e,n,nr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const AC="LocalStore";class whe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Xe(ie),this.Ms=new Ni(o=>ua(o),dh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function F$(t,e){return DC.apply(this,arguments)}function DC(){return(DC=I(function*(t,e){const n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=me();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function U$(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Che(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mu(t,e,n){return RC.apply(this,arguments)}function RC(){return(RC=I(function*(t,e,n){const r=z(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!bo(s))throw s;j(AC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function A_(t,e,n){const r=z(t);let i=X.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=z(c),f=h.Ms.get(d);return void 0!==f?M.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:me())).next(a=>(function H$(t,e,n){let r=t.xs.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function mB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class kC{constructor(){this.activeTargetIds=function tC(){return Cde}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q${constructor(){this.Fo=new kC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dhe{xo(e){}shutdown(){}}const Y$="ConnectivityMonitor";class J${constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(Y$,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){j(Y$,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let P_=null;function VC(){return null===P_?P_=268435456+Math.round(2147483648*Math.random()):P_++,"0x"+P_.toString(16)}const LC="RestConnection",Rhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Phe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===sh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=VC(),a=this.Go(e,n.toUriEncodedString());j(LC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=Zc(u);return this.jo(e,a,c,r,d).then(h=>(j(LC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Mn(LC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${Rhe[e]}`}terminate(){}}class Mhe{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const mn="WebChannelConnection";class Nhe extends Phe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=VC();return new Promise((a,c)=>{const u=new JU;u.setWithCredentials(!0),u.listenOnce(ZU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case jm.NO_ERROR:const h=u.getResponseJson();j(mn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case jm.TIMEOUT:j(mn,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case jm.HTTP_ERROR:const f=u.getStatus();if(j(mn,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new L(v,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(mn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);j(mn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=VC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tj(),a=ej(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(mn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new Mhe({Ho:w=>{g?j(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(j(mn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(mn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Yo:()=>h.close()}),v=(w,A,D)=>{w.listen(A,F=>{try{D(F)}catch(W){setTimeout(()=>{throw W},0)}})};return v(h,Kd.EventType.OPEN,()=>{g||(j(mn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),v(h,Kd.EventType.CLOSE,()=>{g||(g=!0,j(mn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),v(h,Kd.EventType.ERROR,w=>{g||(g=!0,Mn(mn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),v(h,Kd.EventType.MESSAGE,w=>{var A;if(!g){const D=w.data[0];J(!!D,16349);const F=D,W=F?.error||(null===(A=F[0])||void 0===A?void 0:A.error);if(W){j(mn,`RPC '${e}' stream ${i} received error:`,W);const Q=W.status;let ee=function(T){const S=Lt[T];if(void 0!==S)return OB(S)}(Q),C=W.message;void 0===ee&&(ee=N.INTERNAL,C="Unknown error status: "+Q+" with message "+W.message),g=!0,_.__(new L(ee,C)),h.close()}else j(mn,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),v(a,XU.STAT_EVENT,w=>{w.stat===Cb.PROXY?j(mn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Cb.NOPROXY&&j(mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function M_(){return typeof document<"u"?document:null}function va(t){return new Fde(t,!0)}class FC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const X$="PersistentStream";class eH{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new FC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return I(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return I(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return I(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Dt(n.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(I(function*(){e.state=0,e.start()}))}G_(e){return j(X$,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(X$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xhe extends eH{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function Bde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:K(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(J(void 0===d||"string"==typeof d,58123),It.fromBase64String(d||"")):(J(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:OB(u.code);return new L(d,u.message||"")}(s);n=new UB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Xr(t,r.document.name),o=Rt(r.document.updateTime),s=r.document.createTime?Rt(r.document.createTime):X.min(),a=new nn({mapValue:{fields:r.document.fields}}),c=nt.newFoundDocument(i,o,s,a);n=new d_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Xr(t,r.document),o=r.readTime?Rt(r.readTime):X.min(),s=nt.newNoDocument(i,o);n=new d_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Xr(t,r.document);n=new d_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return K(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Nde(i,o);n=new FB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Rt(s.readTime):X.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=dC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=i_(c)?{documents:KB(o,c)}:{query:p_(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$B(o,s.resumeToken);const u=cC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Tu(o,s.snapshotVersion.toTimestamp());const u=cC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function Hde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=dC(this.serializer),n.removeTarget=e,this.k_(n)}}class khe extends eH{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function $de(t,e){return t&&t.length>0?(J(void 0!==e,14353),t.map(n=>function(i,o){let s=Rt(i.updateTime?i.updateTime:o);return s.isEqual(X.min())&&(s=Rt(o)),new Rde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Rt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=dC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function wh(t,e){let n;if(e instanceof Eu)n={update:WB(t,e.key,e.value)};else if(e instanceof wu)n={delete:Eh(t,e.key)};else if(e instanceof xi)n={update:WB(t,e.key,e.data),updateMask:Wde(e.fieldMask)};else{if(!(e instanceof rC))return K(16599,{Rt:e.type});n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof vu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof la)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof da)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Iu)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ude(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:K(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class Ohe{}class Vhe extends Ohe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,lC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,lC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Lhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dt(n),this._a=!1):j("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Ia="RemoteStore";class Fhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(I(function*(){var c;Vo(s)&&(j(Ia,"Restarting streams for network reachability change."),yield(c=I(function*(d){const h=z(d);h.Ia.add(4),yield Nu(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield Ph(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new Lhe(r,i)}}function Ph(t){return UC.apply(this,arguments)}function UC(){return(UC=I(function*(t){if(Vo(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Nu(t){return jC.apply(this,arguments)}function jC(){return(jC=I(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function N_(t,e){const n=z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),HC(n)?$C(n):Ou(n).x_()&&BC(n,e))}function xu(t,e){const n=z(t),r=Ou(n);n.Ta.delete(e),r.x_()&&tH(n,e),0===n.Ta.size&&(r.x_()?r.B_():Vo(n)&&n.Aa.set("Unknown"))}function BC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ou(t).H_(e)}function tH(t,e){t.Ra.$e(e),Ou(t).Y_(e)}function $C(t){t.Ra=new kde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ou(t).start(),t.Aa.aa()}function HC(t){return Vo(t)&&!Ou(t).M_()&&t.Ta.size>0}function Vo(t){return 0===z(t).Ia.size}function nH(t){t.Ra=void 0}function Uhe(t){return qC.apply(this,arguments)}function qC(){return(qC=I(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function jhe(t){return zC.apply(this,arguments)}function zC(){return(zC=I(function*(t){t.Ta.forEach((e,n)=>{BC(t,e)})})).apply(this,arguments)}function Bhe(t,e){return GC.apply(this,arguments)}function GC(){return(GC=I(function*(t,e){nH(t),HC(t)?(t.Aa.la(e),$C(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function $he(t,e,n){return WC.apply(this,arguments)}function WC(){return WC=I(function*(t,e,n){if(t.Aa.set("Online"),e instanceof UB&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield x_(t,r)}else if(e instanceof d_?t.Ra.Ye(e):e instanceof FB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(X.min()))try{const r=yield U$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),tH(o,c);const h=new ki(d.target,c,u,d.sequenceNumber);BC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Ia,"Failed to raise snapshot:",r),yield x_(t,r)}var r}),WC.apply(this,arguments)}function x_(t,e,n){return KC.apply(this,arguments)}function KC(){return(KC=I(function*(t,e,n){if(!bo(e))throw e;t.Ia.add(1),yield Nu(t),t.Aa.set("Offline"),n||(n=()=>U$(t.localStore)),t.asyncQueue.enqueueRetryable(I(function*(){j(Ia,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Ph(t)}))})).apply(this,arguments)}function rH(t,e){return e().catch(n=>x_(t,n,e))}function ku(t){return QC.apply(this,arguments)}function QC(){return(QC=I(function*(t){const e=z(t),n=Lo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;Hhe(e);)try{const i=yield Che(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,qhe(e,i)}catch(i){yield x_(e,i)}iH(e)&&oH(e)})).apply(this,arguments)}function Hhe(t){return Vo(t)&&t.Pa.length<10}function qhe(t,e){t.Pa.push(e);const n=Lo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function iH(t){return Vo(t)&&!Lo(t).M_()&&t.Pa.length>0}function oH(t){Lo(t).start()}function zhe(t){return YC.apply(this,arguments)}function YC(){return(YC=I(function*(t){Lo(t).na()})).apply(this,arguments)}function Ghe(t){return JC.apply(this,arguments)}function JC(){return(JC=I(function*(t){const e=Lo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function Whe(t,e,n){return ZC.apply(this,arguments)}function ZC(){return(ZC=I(function*(t,e,n){const r=t.Pa.shift(),i=oC.from(r,e,n);yield rH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ku(t)})).apply(this,arguments)}function Khe(t,e){return XC.apply(this,arguments)}function XC(){return XC=I(function*(t,e){var n;e&&Lo(t).Z_&&(yield(n=I(function*(i,o){if(function kB(t){switch(t){case N.OK:return K(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return K(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();Lo(i).N_(),yield rH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield ku(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),iH(t)&&oH(t)}),XC.apply(this,arguments)}function sH(t,e){return eS.apply(this,arguments)}function eS(){return(eS=I(function*(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),j(Ia,"RemoteStore received new credentials");const r=Vo(n);n.Ia.add(3),yield Nu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Ph(n)})).apply(this,arguments)}function tS(t,e){return nS.apply(this,arguments)}function nS(){return(nS=I(function*(t,e){const n=z(t);e?(n.Ia.delete(2),yield Ph(n)):e||(n.Ia.add(2),yield Nu(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function Ou(t){return t.Va||(t.Va=function(n,r,i){const o=z(n);return o.ia(),new xhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Uhe.bind(null,t),e_:jhe.bind(null,t),n_:Bhe.bind(null,t),J_:$he.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.Va.N_(),HC(t)?$C(t):t.Aa.set("Unknown")):(yield t.Va.stop(),nH(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function Lo(t){return t.ma||(t.ma=function(n,r,i){const o=z(n);return o.ia(),new khe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:zhe.bind(null,t),n_:Khe.bind(null,t),ea:Ghe.bind(null,t),ta:Whe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.ma.N_(),yield ku(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(Ia,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class rS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new rS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vu(t,e){if(Dt("AsyncQueue",`${e}: ${t}`),bo(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Ea{static emptySet(e){return new Ea(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=ph(),this.sortedSet=new Xe(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class aH{constructor(){this.fa=new Xe(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class wa{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new wa(e,n,Ea.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Qhe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Yhe{constructor(){this.queries=cH(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=z(n),o=i.queries;i.queries=cH(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new L(N.ABORTED,"Firestore shutting down"))}}function cH(){return new Ni(t=>gB(t),hh)}function iS(t,e){return oS.apply(this,arguments)}function oS(){return(oS=I(function*(t,e){const n=z(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Qhe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Vu(s,`Initialization of query '${yu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&cS(n)})).apply(this,arguments)}function sS(t,e){return aS.apply(this,arguments)}function aS(){return(aS=I(function*(t,e){const n=z(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Jhe(t,e){const n=z(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&cS(n)}function Zhe(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function cS(t){t.Da.forEach(e=>{e.next()})}var uS,uH;(uH=uS||(uS={})).Fa="default",uH.Cache="cache";class lS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uS.Cache}}class fH{constructor(e){this.key=e}}class pH{constructor(e){this.key=e}}class gH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=me(),this.mutatedKeys=me(),this.Xa=_B(e),this.eu=new Ea(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new aH,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=fh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),w=!0):this.iu(f,g)||(r.track({type:2,doc:g}),w=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:w})}};return v(g)-v(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new wa(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new aH,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new pH(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new fH(r))}),n}uu(e){this.Ha=e.qs,this.Za=me();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return wa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Fo="SyncEngine";class Xhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class efe{constructor(e){this.key=e,this.lu=!1}}class tfe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ni(a=>gB(a),hh),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(q.comparator),this.Eu=new Map,this.Au=new vC,this.Ru={},this.Vu=new Map,this.mu=_a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function nfe(t,e){return hS.apply(this,arguments)}function hS(){return(hS=I(function*(t,e,n=!0){const r=k_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield mH(r,e,n,!0),i})).apply(this,arguments)}function rfe(t,e){return fS.apply(this,arguments)}function fS(){return(fS=I(function*(t,e){const n=k_(t);yield mH(n,e,!0,!1)})).apply(this,arguments)}function mH(t,e,n,r){return pS.apply(this,arguments)}function pS(){return(pS=I(function*(t,e,n,r){const i=yield function Pu(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new ki(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function gS(t,e,n,r,i){return mS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&N_(t.remoteStore,i),a})).apply(this,arguments)}function mS(){return mS=I(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=I(function*(w,A,D,F){let W=A.view.nu(D);W.Ds&&(W=yield A_(w.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,W)));const Q=F&&F.targetChanges.get(A.targetId),ee=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges(W,w.isPrimaryClient,Q,ee);return AS(w,A.targetId,C._u),C.snapshot}),function v(w,A,D,F){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield A_(t.localStore,e,!0),s=new gH(e,o.qs),a=s.nu(o.documents),c=Ih.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);AS(t,n,u._u);const d=new Xhe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),mS.apply(this,arguments)}function ife(t,e,n){return _S.apply(this,arguments)}function _S(){return(_S=I(function*(t,e,n){const r=z(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!hh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Mu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xu(r.remoteStore,i.targetId),Lu(r,i.targetId)}).catch(To))):(Lu(r,i.targetId),yield Mu(r.localStore,i.targetId,!0))})).apply(this,arguments)}function ofe(t,e){return yS.apply(this,arguments)}function yS(){return(yS=I(function*(t,e){const n=z(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xu(n.remoteStore,r.targetId))})).apply(this,arguments)}function vS(){return(vS=I(function*(t,e,n){const r=function FS(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ufe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=z(s),u=Ue.now(),d=a.reduce((g,_)=>g.add(_.key),me());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Wn(),v=me();return c.Os.getEntries(g,d).next(w=>{_=w,_.forEach((A,D)=>{D.isValidDocument()||(v=v.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(w=>{h=w;const A=[];for(const D of a){const F=Mde(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new xi(D.key,F,Xj(F.value.mapValue),lt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(w=>{f=w;const A=w.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,w.batchId,A)})}).then(()=>({batchId:f.batchId,changes:vB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new Xe(ie)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Oi(r,i.changes),yield ku(r.remoteStore)}catch(i){const o=Vu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function _H(t,e){return IS.apply(this,arguments)}function IS(){return(IS=I(function*(t,e){const n=z(t);try{const r=yield function bhe(t,e){const n=z(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var v,w,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(It.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),w=g,A=d,(0===(v=f).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=Wn(),u=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function j$(t,e,n){let r=me(),i=me();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Wn();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(AC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(X.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?J(s.lu,14607):i.removedDocuments.size>0&&(J(s.lu,42227),s.lu=!1))}),yield Oi(n,r,e)}catch(r){yield To(r)}})).apply(this,arguments)}function yH(t,e,n){const r=z(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=z(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&cS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function afe(t,e,n){return ES.apply(this,arguments)}function ES(){return(ES=I(function*(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(q.comparator);s=s.insert(o,nt.newNoDocument(o,X.min()));const a=me().add(o),c=new vh(X.min(),new Map,new Xe(ie),s,a);yield _H(r,c),r.du=r.du.remove(o),r.Eu.delete(e),DS(r)}else yield Mu(r.localStore,e,!1).then(()=>Lu(r,e,n)).catch(To)})).apply(this,arguments)}function cfe(t,e){return wS.apply(this,arguments)}function wS(){return(wS=I(function*(t,e){const n=z(t),r=e.batch.batchId;try{const i=yield function The(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=M.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const w=u.docVersions.get(_);J(null!==w,48541),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);SS(n,r,null),CS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Oi(n,i)}catch(i){yield To(i)}})).apply(this,arguments)}function ufe(t,e,n){return TS.apply(this,arguments)}function TS(){return(TS=I(function*(t,e,n){const r=z(t);try{const i=yield function(s,a){const c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(J(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);SS(r,e,n),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Oi(r,i)}catch(i){yield To(i)}})).apply(this,arguments)}function CS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function SS(t,e,n){const r=z(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||vH(t,r)})}function vH(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(xu(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),DS(t))}function AS(t,e,n){for(const r of n)r instanceof fH?(t.Au.addReference(r.key,e),dfe(t,r)):r instanceof pH?(j(Fo,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||vH(t,r.key)):K(19791,{yu:r})}function dfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(Fo,"New document in limbo: "+n),t.Iu.add(r),DS(t))}function DS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(ve.fromString(e)),r=t.mu.next();t.Eu.set(r,new efe(n)),t.du=t.du.insert(n,r),N_(t.remoteStore,new ki(pn(mu(n.path)),r,"TargetPurposeLimboResolution",ir.ue))}}function Oi(t,e,n){return RS.apply(this,arguments)}function RS(){return RS=I(function*(t,e,n){const r=z(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=SC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=I(function*(u,d){const h=z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(d,g=>M.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>M.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!bo(f))throw f;j(AC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),w=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,w)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),RS.apply(this,arguments)}function hfe(t,e){return PS.apply(this,arguments)}function PS(){return(PS=I(function*(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){j(Fo,"User change. New user:",e.toKey());const r=yield F$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Oi(n,r.Bs)}var o})).apply(this,arguments)}function ffe(t,e){const n=z(t),r=n.Eu.get(e);if(r&&r.lu)return me().add(r.key);{let i=me();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function k_(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_H.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ffe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=afe.bind(null,e),e.hu.J_=Jhe.bind(null,e.eventManager),e.hu.pu=Zhe.bind(null,e.eventManager),e}let O_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return I(function*(){r.serializer=va(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function L$(t,e,n,r){return new whe(t,e,n,r)}(this.persistence,new V$,n.initialUser,this.serializer)}Du(n){return new IC(b_.Vi,this.serializer)}bu(n){return new Q$}terminate(){var n=this;return I(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class US extends O_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return J(this.persistence.referenceDelegate instanceof C_,46915),new S$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new IC(r=>C_.Vi(r,n),this.serializer)}}let Fu=(()=>{class t{initialize(n,r){var i=this;return I(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>yH(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=hfe.bind(null,i.syncEngine),yield tS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Yhe}createDatastore(n){const r=va(n.databaseInfo.databaseId),i=new Nhe(n.databaseInfo);return new Vhe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>yH(this.syncEngine,r,0),c=J$.C()?new J$:new Dhe,new Fhe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new tfe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const c=z(a);j(Ia,"RemoteStore shutting down."),c.Ia.add(5),yield Nu(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class V_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Uo="FirestoreClient";class Sfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=Rb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(c){j(Uo,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j(Uo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Vu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function BS(t,e){return $S.apply(this,arguments)}function $S(){return $S=I(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j(Uo,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield F$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{Mn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Mn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),$S.apply(this,arguments)}function bH(t,e){return HS.apply(this,arguments)}function HS(){return(HS=I(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function qS(t){return zS.apply(this,arguments)}(t);j(Uo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>sH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function zS(){return(zS=I(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Uo,"Using user provided OfflineComponentProvider");try{yield BS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Mn("Error using user provided cache. Falling back to memory cache: "+e),yield BS(t,new O_)}}else j(Uo,"Using default OfflineComponentProvider"),yield BS(t,new US(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function L_(t){return GS.apply(this,arguments)}function GS(){return(GS=I(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Uo,"Using user provided OnlineComponentProvider"),yield bH(t,t._uninitializedComponentsProvider._online)):(j(Uo,"Using default OnlineComponentProvider"),yield bH(t,new Fu))),t._onlineComponents})).apply(this,arguments)}function ju(t){return KS.apply(this,arguments)}function KS(){return(KS=I(function*(t){const e=yield L_(t),n=e.eventManager;return n.onListen=nfe.bind(null,e.syncEngine),n.onUnlisten=ife.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ofe.bind(null,e.syncEngine),n})).apply(this,arguments)}function MH(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const NH=new Map,xH="firestore.googleapis.com";class OH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xH,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Ple(t,e,n,r){if(!0===e&&!0===r)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=MH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OH(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ele;switch(r.type){case"firstParty":return new Cle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NH.get(n);r&&(j("ComponentProvider","Removing Datastore"),NH.delete(n),r.terminate())}(this),Promise.resolve()}}class Qt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qt(this.firestore,e,this._query)}}class ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ze(this.firestore,e,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ea(n,ze._jsonSchema))return new ze(e,r||null,new q(ve.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Vt("string",ze._jsonSchemaVersion),referencePath:Vt("string")};class ti extends Qt{constructor(e,n,r){super(e,n,mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new q(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function VH(t,e,...n){if(t=Ot(t),Nb("collection","path",e),t instanceof Mh){const r=ve.fromString(e,...n);return lj(r),new ti(t,null,r)}{if(!(t instanceof ze||t instanceof ti))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return lj(r),new ti(t.firestore,null,r)}}function QS(t,e,...n){if(t=Ot(t),1===arguments.length&&(e=Rb.newId()),Nb("doc","path",e),t instanceof Mh){const r=ve.fromString(e,...n);return uj(r),new ze(t,null,new q(r))}{if(!(t instanceof ze||t instanceof ti))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return uj(r),new ze(t.firestore,t instanceof ti?t.converter:null,new q(r))}}const FH="AsyncQueue";class UH{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new FC(this,"async_queue_retry"),this.oc=()=>{const r=M_();r&&j(FH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=M_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=M_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Wt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return I(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!bo(n))throw n;j(FH,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Dt("INTERNAL UNHANDLED ERROR: ",jH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=rS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:jH(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return I(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function jH(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Ke extends Mh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new UH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new UH(n),e._firestoreClient=void 0,yield n}})()}}function jfe(t,e){const n="object"==typeof t?t:$U(),r="string"==typeof t?t:e||sh,i=Fm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=vU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function Ffe(t,e,n,r={}){var i;t=Ie(t,Mh);const o=Zc(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(TU(`https://${c}`),CU("Firestore",!0)),s.host!==xH&&s.host!==c&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Ci(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Gt.MOCK_USER;else{d=function Nce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xm(JSON.stringify({alg:"none",type:"JWT"})),xm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Gt(f)}t._authCredentials=new wle(new sj(d,h))}}(i,...o)}return i}function ht(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function BH(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new lde(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,MH(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Sfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(It.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ea(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:Vt("string",or._jsonSchemaVersion),bytes:Vt("string")};class Ta{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ba{constructor(e){this._methodName=e}}class ni{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ni._jsonSchemaVersion}}static fromJSON(e){if(ea(e,ni._jsonSchema))return new ni(e.latitude,e.longitude)}}ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:Vt("string",ni._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};class Pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ea(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new Pr(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:Vt("string",Pr._jsonSchemaVersion),vectorValues:Vt("object")};const Hfe=/^__.*__$/;class qfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class qH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}class F_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new F_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return B_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(zH(this.Ec)&&Hfe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||va(e)}Dc(e,n,r,i=!1){return new F_({Ec:e,methodName:n,bc:r,path:ct.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ca(t){const e=t._freezeSettings(),n=va(t._databaseId);return new zfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);rA("Data must be an object, but it was:",s,r);const a=KH(r,s);let c,u;if(o.merge)c=new Gn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=kh(e,h,n);if(!s.contains(f))throw new L(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YH(d,f)||d.push(f)}c=new Gn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new qfe(new nn(a),c,u)}class xh extends ba{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xh}}class JS extends ba{_toFieldTransform(e){return new mh(e.path,new vu)}isEqual(e){return e instanceof JS}}function Sa(t,e){if(QH(t=Ot(t)))return rA("Unsupported field value:",e,t),KH(t,e);if(t instanceof ba)return function(r,i){if(!zH(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Sa(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Ot(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return wB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ue.fromDate(r);return{timestampValue:Tu(i.serializer,o)}}if(r instanceof Ue){const o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tu(i.serializer,o)}}if(r instanceof ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof or)return{bytesValue:$B(i.serializer,r._byteString)};if(r instanceof ze){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pr)return s=r,a=i,{mapValue:{fields:{[zb]:{stringValue:Gb},[fu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return nC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${Bm(r)}`)}(t,e)}function KH(t,e){const n={};return Lj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const o=Sa(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function QH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof ni||t instanceof or||t instanceof ze||t instanceof ba||t instanceof Pr)}function rA(t,e,n){if(!QH(n)||!dj(n)){const r=Bm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function kh(t,e,n){if((e=Ot(e))instanceof Ta)return e._internalPath;if("string"==typeof e)return j_(t,e);throw B_("Field path arguments must be of type string or ",t,!1,void 0,n)}const Gfe=new RegExp("[~\\*/\\[\\]]");function j_(t,e,n){if(e.search(Gfe)>=0)throw B_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ta(...e.split("."))._internalPath}catch{throw B_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function B_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+t+c)}function YH(t,e){return t.some(n=>n.isEqual(e))}class Oh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Wfe extends Oh{data(){return super.data()}}function $_(t,e){return"string"==typeof e?j_(t,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}class iA{}class Vh extends iA{}class Lh extends Vh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Lh(e,n,r)}_apply(e){const n=this._parse(e);return t4(e._query,n),new Qt(e.firestore,e.converter,eC(e._query,n))}_parse(e){const n=Ca(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){e4(h,d);const _=[];for(const v of h)_.push(XH(c,o,v));f={arrayValue:{values:_}}}else f=XH(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||e4(h,d),f=function WH(t,e,n,r=!1){return Sa(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Te.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class $u extends iA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $u(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)t4(s,c),s=eC(s,c)}(e._query,n),new Qt(e.firestore,e.converter,eC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oA extends Vh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new oA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lh(o,s)}(e._query,this._field,this._direction);return new Qt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Mi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function XH(t,e,n){if("string"==typeof(n=Ot(n))){if(""===n)throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xb(e)&&-1!==n.indexOf("/"))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ca(t,new q(r))}if(n instanceof ze)return ca(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bm(n)}.`)}function e4(t,e){if(!Array.isArray(t)||0===t.length)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new L(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class r4{convertValue(e,n="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[fu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>ut(s.doubleValue));return new Pr(o)}convertGeoPoint(e){return new ni(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const n=Ri(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);J(XB(r),9688,{name:e});const i=new aa(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Dt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sr extends Oh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new W_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=sr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}sr._jsonSchemaVersion="firestore/documentSnapshot/1.0",sr._jsonSchema={type:Vt("string",sr._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class W_ extends sr{data(e={}){return super.data(e)}}class ar{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new jo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new W_(this._firestore,this._userDataWriter,r.key,r,new jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new W_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new W_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Jfe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ar._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rb.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function Jfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}ar._jsonSchemaVersion="firestore/querySnapshot/1.0",ar._jsonSchema={type:Vt("string",ar._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Bo extends r4{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function tpe(t,e){const n=Ie(t.firestore,Ke),r=QS(t),i=function G_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return Fh(n,[U_(Ca(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function Fh(t,e){return function(r,i){const o=new Wt;return r.asyncQueue.enqueueAndForget(I(function*(){return function sfe(t,e,n){return vS.apply(this,arguments)}(yield function WS(t){return L_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ht(t),e)}function s4(){return new JS("serverTimestamp")}!function(e,n=!0){tu=eu,Xc(new Ys("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ke(new Tle(r.getProvider("auth-internal")),new Sle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ai(rj,"4.8.0",e),Ai(rj,"4.8.0","esm2017")}();const _pe=function l4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},d4=new Hd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Q_=new fb("@firebase/auth");function Y_(t,...e){Q_.logLevel<=we.ERROR&&Q_.error(`Auth (${eu}): ${t}`,...e)}function Kn(t,...e){throw lA(t,...e)}function Nn(t,...e){return lA(t,...e)}function uA(t,e,n){const r=Object.assign(Object.assign({},_pe()),{[e]:n});return new Hd("auth","Firebase",r).create(e,{appName:t.name})}function Yt(t){return uA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d4.create(t,...e)}function $(t,e,...n){if(!t)throw lA(e,...n)}function ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Y_(e),new Error(e)}function Vi(t,e){t||ri(e)}function Bh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function h4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function vpe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function dA(){return"http:"===h4()||"https:"===h4()}()||function Fce(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class $h{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=function Oce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}()||function Uce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return vpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hA(t,e){Vi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class f4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Epe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tpe=new $h(3e4,6e4);function rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function it(t,e,n,r){return fA.apply(this,arguments)}function fA(){return(fA=I(function*(t,e,n,r,i={}){return p4(t,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=qd(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function Lce(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Zc(t.emulatorConfig.host)&&(u.credentials="include"),f4.fetch()(yield g4(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function p4(t,e,n){return pA.apply(this,arguments)}function pA(){return(pA=I(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Epe),e);try{const i=new Cpe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Hh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Hh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Hh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Hh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uA(t,d,u);Kn(t,d)}}catch(i){if(i instanceof bi)throw i;Kn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Li(t,e,n,r){return gA.apply(this,arguments)}function gA(){return(gA=I(function*(t,e,n,r,i={}){const o=yield it(t,e,n,r,i);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function g4(t,e,n,r){return mA.apply(this,arguments)}function mA(){return(mA=I(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?hA(t.config,i):`${t.config.apiScheme}://${i}`;return wpe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class Cpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),Tpe.get())})}}function Hh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nn(t,e,r);return i.customData._tokenResponse=n,i}function vA(){return(vA=I(function*(t,e){return it(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function J_(t,e){return EA.apply(this,arguments)}function EA(){return(EA=I(function*(t,e){return it(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function qh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wA(){return(wA=I(function*(t,e=!1){const n=Ot(t),r=yield n.getIdToken(e),i=Z_(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qh(TA(i.auth_time)),issuedAtTime:qh(TA(i.iat)),expirationTime:qh(TA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function TA(t){return 1e3*Number(t)}function Z_(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Y_("JWT malformed, contained fewer than 3 sections"),null;try{const i=Bd(n);return i?JSON.parse(i):(Y_("Failed to decode base64 JWT payload"),null)}catch(i){return Y_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function I4(t){const e=Z_(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fi(t,e){return bA.apply(this,arguments)}function bA(){return(bA=I(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof bi&&function Ppe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Mpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield n.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class CA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qh(this.lastLoginAt),this.creationTime=qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zh(t){return SA.apply(this,arguments)}function SA(){return(SA=I(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Fi(t,J_(n,{idToken:r}));$(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?E4(o.providerUserInfo):[],a=function xpe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new CA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function AA(){return(AA=I(function*(t){const e=Ot(t);yield zh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function E4(t){return t.map(e=>{var{providerId:n}=e,r=um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function DA(){return(DA=I(function*(t,e){const n=yield p4(t,{},I(function*(){const r=qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield g4(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Zc(t.emulatorConfig.host)&&(c.credentials="include"),f4.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function RA(){return(RA=I(function*(t,e){return it(t,"POST","/v2/accounts:revokeToken",rt(t,e))})).apply(this,arguments)}class qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(0!==e.length,"internal-error");const n=I4(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return I(function*(r,i=!1){return i||!n.accessToken||n.isExpired?($(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function kpe(t,e){return DA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new qu;return r&&($("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&($("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&($("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qu,this.toJSON())}_performRefresh(){return ri("not implemented")}}function Ho(t,e){$("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new CA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return I(function*(){const r=yield Fi(n,n.stsTokenManager.getToken(n.auth,e));return $(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Rpe(t){return wA.apply(this,arguments)}(this,e)}reload(){return function Npe(t){return AA.apply(this,arguments)}(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield zh(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(Dr(e.auth.app))return Promise.reject(Yt(e.auth));const n=yield e.getIdToken();return yield Fi(e,function Ape(t,e){return vA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,w=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:W,isAnonymous:Q,providerData:ee,stsTokenManager:C}=n;$(F&&C,e,"internal-error");const E=qu.fromJSON(this.name,C);$("string"==typeof F,e,"internal-error"),Ho(h,e.name),Ho(f,e.name),$("boolean"==typeof W,e,"internal-error"),$("boolean"==typeof Q,e,"internal-error"),Ho(g,e.name),Ho(_,e.name),Ho(v,e.name),Ho(w,e.name),Ho(A,e.name),Ho(D,e.name);const T=new Mr({uid:F,auth:e,email:f,emailVerified:W,displayName:h,isAnonymous:Q,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:A,lastLoginAt:D});return ee&&Array.isArray(ee)&&(T.providerData=ee.map(S=>Object.assign({},S))),w&&(T._redirectEventId=w),T}static _fromIdTokenResponse(e,n){return I(function*(r,i,o=!1){const s=new qu;s.updateFromServerResponse(i);const a=new Mr({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield zh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return I(function*(){const i=n.users[0];$(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?E4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new qu;a.updateFromIdToken(r);const c=new Mr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new CA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const w4=new Map;function Ui(t){Vi(t instanceof Function,"Expected a class definition");let e=w4.get(t);return e?(Vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w4.set(t,e),e)}const T4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(n,r){var i=this;return I(function*(){i.storage[n]=r})()}_get(n){var r=this;return I(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return I(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function X_(t,e,n){return`firebase:${t}:${e}:${n}`}class zu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=X_(this.userKey,i.apiKey,o),this.fullPersistenceKey=X_("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield J_(e.auth,{idToken:n}).catch(()=>{});return r?Mr._fromGetAccountInfoResponse(e.auth,r,n):null}return Mr._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return I(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return I(function*(r,i,o="authUser"){if(!i.length)return new zu(Ui(T4),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Ui(T4);const c=X_(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield J_(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield Mr._fromGetAccountInfoResponse(r,_,f)}else g=Mr._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new zu(a,r,o)):new zu(a,r,o)}).apply(this,arguments)}}function b4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P4(e))return"Blackberry";if(M4(e))return"Webos";if(S4(e))return"Safari";if((e.includes("chrome/")||A4(e))&&!e.includes("edge/"))return"Chrome";if(R4(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function C4(t=At()){return/firefox\//i.test(t)}function S4(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A4(t=At()){return/crios\//i.test(t)}function D4(t=At()){return/iemobile/i.test(t)}function R4(t=At()){return/android/i.test(t)}function P4(t=At()){return/blackberry/i.test(t)}function M4(t=At()){return/webos/i.test(t)}function PA(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N4(t=At()){return PA(t)||R4(t)||M4(t)||P4(t)||/windows phone/i.test(t)||D4(t)}function x4(t,e=[]){let n;switch(t){case"Browser":n=b4(At());break;case"Worker":n=`${b4(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eu}/${r}`}class Fpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return I(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function MA(){return(MA=I(function*(t,e={}){return it(t,"GET","/v2/passwordPolicy",rt(t,e))})).apply(this,arguments)}class Bpe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class $pe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k4(this),this.idTokenSubscription=new k4(this),this.beforeStateQueue=new Fpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(I(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield zu.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return I(function*(){try{const r=yield J_(n,{idToken:e}),i=yield Mr._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return I(function*(){var r;if(Dr(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return $(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return I(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return I(function*(){try{yield zh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ipe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return I(function*(){if(Dr(n.app))return Promise.reject(Yt(n));const r=e?Ot(e):null;return r&&$(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return I(function*(r,i=!1){if(!n._deleted)return r&&$(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(I(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return Dr(e.app)?Promise.reject(Yt(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Dr(this.app)?Promise.reject(Yt(this)):this.queue(I(function*(){yield n.assertedPersistence.setPersistence(Ui(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return I(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const n=yield function Upe(t){return MA.apply(this,arguments)}(e),r=new Bpe(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return I(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Ope(t,e){return RA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return I(function*(){if(!n.redirectPersistenceManager){const r=e&&Ui(e)||n._popupRedirectResolver;$(r,n,"argument-error"),n.redirectPersistenceManager=yield zu.create(n,[Ui(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return I(function*(){var r,i;return n._isInitialized&&(yield n.queue(I(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return I(function*(){if(e===n.currentUser)return n.queue(I(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return I(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var n;if(Dr(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function ype(t,...e){Q_.logLevel<=we.WARN&&Q_.warn(`Auth (${eu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Pt(t){return Ot(t)}class k4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Gce(t,e){const n=new Wce(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gh={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O4(t){return`__${t}${Math.floor(1e6*Math.random())}`}function F4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function U4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Qh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}function ji(t,e){return QA.apply(this,arguments)}function QA(){return(QA=I(function*(t,e){return Li(t,"POST","/v1/accounts:signInWithIdp",rt(t,e))})).apply(this,arguments)}class Gu extends Qh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=um(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gu(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return ji(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ji(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qd(n)}return e}}class Bi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class H4 extends Bi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Tge=(()=>{class t extends H4{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Gu._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return I(function*(i,o,s,a=!1){const c=yield Mr._fromIdTokenResponse(i,s,a),u=z4(s);return new vr({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=z4(r);return new vr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function z4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class iy extends bi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,iy.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new iy(e,n,r,i)}}function G4(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?iy._fromErrorAndOperation(t,o,e,r):o})}function iD(t,e){return oD.apply(this,arguments)}function oD(){return(oD=I(function*(t,e,n=!1){const r=yield Fi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return vr._forOperation(t,"link",r)})).apply(this,arguments)}function K4(t,e){return aD.apply(this,arguments)}function aD(){return(aD=I(function*(t,e,n=!1){const{auth:r}=t;if(Dr(r.app))return Promise.reject(Yt(r));const i="reauthenticate";try{const o=yield Fi(t,G4(r,i,e,t),n);$(o.idToken,r,"internal-error");const s=Z_(o.idToken);$(s,r,"internal-error");const{sub:a}=s;return $(t.uid===a,r,"user-mismatch"),vr._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Kn(r,"user-mismatch"),o}})).apply(this,arguments)}function Q4(t,e){return cD.apply(this,arguments)}function cD(){return(cD=I(function*(t,e,n=!1){if(Dr(t.app))return Promise.reject(Yt(t));const r="signIn",i=yield G4(t,r,e),o=yield vr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const ay="__sak";class X4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ay,"1"),this.storage.removeItem(ay),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gge=(()=>{class t extends X4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Lpe(){return function jce(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),eq=(()=>{class t extends X4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Kge=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return I(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=I(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function Wge(t){return Promise.all(t.map(function(){var e=I(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Qge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=cy("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(v.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Ft(){return window}function UD(){return typeof Ft().WorkerGlobalScope<"u"&&"function"==typeof Ft().importScripts}function jD(){return(jD=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const tq="firebaseLocalStorageDb",uy="firebaseLocalStorage",nq="fbase_key";class Xh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ly(t,e){return t.transaction([uy],e?"readwrite":"readonly").objectStore(uy)}function BD(){const t=indexedDB.open(tq,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uy,{keyPath:nq})}catch(i){n(i)}}),t.addEventListener("success",I(function*(){const r=t.result;r.objectStoreNames.contains(uy)?e(r):(r.close(),yield function tme(){const t=indexedDB.deleteDatabase(tq);return new Xh(t).toPromise()}(),e(yield BD()))}))})}function rq(t,e,n){return $D.apply(this,arguments)}function $D(){return($D=I(function*(t,e,n){const r=ly(t,!0).put({[nq]:e,value:n});return new Xh(r).toPromise()})).apply(this,arguments)}function HD(){return(HD=I(function*(t,e){const n=ly(t,!1).get(e),r=yield new Xh(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function iq(t,e){const n=ly(t,!0).delete(e);return new Xh(n).toPromise()}const ome=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return I(function*(){return n.db||(n.db=yield BD()),n.db})()}_withRetries(n){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return I(function*(){return UD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return I(function*(){n.receiver=Kge._getInstance(function Xge(){return UD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return I(function*(){var r,i;if(n.activeServiceWorker=yield function Jge(){return jD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Qge(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function Zge(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const n=yield BD();return yield rq(n,ay,"1"),yield iq(n,ay),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return I(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>rq(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return I(function*(){const i=yield r._withRetries(o=>function nme(t,e){return HD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>iq(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return I(function*(){const r=yield n._withRetries(s=>{const a=ly(s,!1).getAll();return new Xh(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Da(t,e){return e?Ui(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}O4("rcb"),new $h(3e4,6e4);class eR extends Qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pme(t){return Q4(t.auth,new eR(t),t.bypassAuthState)}function gme(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),K4(n,new eR(t),t.bypassAuthState)}function mme(t){return tR.apply(this,arguments)}function tR(){return(tR=I(function*(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),iD(n,new eR(t),t.bypassAuthState)})).apply(this,arguments)}class sq{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pme;case"linkViaPopup":case"linkViaRedirect":return mme;case"reauthViaPopup":case"reauthViaRedirect":return gme;default:Kn(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _me=new $h(2e3,1e4);function nR(){return(nR=I(function*(t,e,n){if(Dr(t.app))return Promise.reject(Nn(t,"operation-not-supported-in-this-environment"));const r=Pt(t);!function Hu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Kn(t,"argument-error"),uA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Bi);const i=Da(r,n);return new oR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let oR=(()=>{class t extends sq{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return I(function*(){const r=yield n.execute();return $(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return I(function*(){Vi(1===n.filter.length,"Popup operations only handle one event");const r=cy();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(Nn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,_me.get())};n()}}return t.currentPopupAction=null,t})();const tf=new Map;class Ime extends sq{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return I(function*(){let r=tf.get(n.auth._key());if(!r){try{const o=(yield function Eme(t,e){return sR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}tf.set(n.auth._key(),r)}return n.bypassAuthState||tf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function sR(){return(sR=I(function*(t,e){const n=function cq(t){return X_("pendingRedirect",t.config.apiKey,t.name)}(e),r=function aq(t){return Ui(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function wme(t,e){tf.set(t._key(),e)}function uq(t,e){return fR.apply(this,arguments)}function fR(){return(fR=I(function*(t,e,n=!1){if(Dr(t.app))return Promise.reject(Yt(t));const r=Pt(t),i=Da(r,e),s=yield new Ime(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Ame{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Dme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hq(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hq(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dq(e))}saveEventToCache(e){this.cachedEventUids.add(dq(e)),this.lastProcessedEventTime=Date.now()}}function dq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hq({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function gR(){return(gR=I(function*(t,e={}){return it(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Pme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mme=/^https?/;function mR(){return mR=I(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function Rme(t){return gR.apply(this,arguments)}(t);for(const n of e)try{if(xme(n))return}catch{}Kn(t,"unauthorized-domain")}),mR.apply(this,arguments)}function xme(t){const e=Bh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Mme.test(n))return!1;if(Pme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const kme=new $h(3e4,6e4);function fq(){const t=Ft().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Ome(t){return new Promise((e,n)=>{var r,i,o;function s(){fq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fq(),n(Nn(t,"network-request-failed"))},timeout:kme.get()})}if(null!==(i=null===(r=Ft().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ft().gapi)||void 0===o||!o.load){const a=O4("iframefcb");return Ft()[a]=()=>{gapi.load?s():n(Nn(t,"network-request-failed"))},function NA(t){return Gh.loadJS(t)}(`${function Gpe(){return Gh.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw dy=null,e})}let dy=null;const Lme=new $h(5e3,15e3),jme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $me(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:eu},i=Bme.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qd(r).slice(1)}`}function _R(){return _R=I(function*(t){const e=yield function Vme(t){return dy=dy||Ome(t),dy}(t),n=Ft().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:$me(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jme,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Nn(t,"network-request-failed"),c=Ft().setTimeout(()=>{s(a)},Lme.get());function u(){Ft().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),_R.apply(this,arguments)}const qme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xme=encodeURIComponent("fac");function gq(t,e,n,r,i,o){return yR.apply(this,arguments)}function yR(){return(yR=I(function*(t,e,n,r,i,o){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eu,eventId:i};if(e instanceof Bi){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function zce(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof H4){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${Xme}=${encodeURIComponent(c)}`:"";return`${function e_e({config:t}){return t.emulator?hA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${qd(a).slice(1)}${u}`})).apply(this,arguments)}const vR="webStorageSupport",n_e=class t_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eq,this._completeRedirectFn=uq,this._overrideRedirectResult=wme}_openPopup(e,n,r,i){var o=this;return I(function*(){var s;Vi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield gq(e,n,r,Bh(),i);return function Qme(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},qme),{width:r.toString(),height:i.toString(),top:o,left:s}),u=At().toLowerCase();n&&(a=A4(u)?"_blank":n),C4(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Vpe(t=At()){var e;return PA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function Yme(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new pq(null);const h=window.open(e||"",a,d);$(h,t,"popup-blocked");try{h.focus()}catch{}return new pq(h)}(e,a,cy())})()}_openRedirect(e,n,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function Yge(t){Ft().location.href=t}(yield gq(e,n,r,Bh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Vi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return I(function*(){const r=yield function Hme(t){return _R.apply(this,arguments)}(e),i=new Ame(e);return r.register("authEvent",o=>($(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vR,{type:vR},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[vR];void 0!==s&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Nme(t){return mR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return N4()||S4()||PA()}};var vq="@firebase/auth";class r_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return I(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const s_e=EU("authIdTokenMaxAge")||300;let Eq=null;const a_e=t=>function(){var e=I(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>s_e)return;const o=r?.token;Eq!==o&&(Eq=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function c_e(t=$U()){const e=Fm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function tge(t,e){const n=Fm(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Ci(n.getOptions(),e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:n_e,persistence:[ome,Gge,eq]}),r=EU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=a_e(o.toString());(function Fge(t,e,n){Ot(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Lge(t,e,n,r){Ot(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=vU("auth");return i&&function rge(t,e,n){const r=Pt(t);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=F4(e),{host:s,port:a}=function ige(t){const e=F4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:U4(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:U4(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $(Ci(u,r.config.emulator)&&Ci(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Zc(s)?(TU(`${o}//${s}${c}`),CU("Auth",!0)):i||function oge(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function Hpe(t){Gh=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Nn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function u_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function o_e(t){Xc(new Ys("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x4(t)},u=new $pe(r,i,o,c);return function nge(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ui);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xc(new Ys("auth-internal",e=>{const n=Pt(e.getProvider("auth").getImmediate());return new r_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(vq,"1.10.8",function i_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),Ai(vq,"1.10.8","esm2017")}("Browser");const wq_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Ku=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new Tge,this.user=Tt(null),this.canWrite=Tt(!1),this.authLoading=Tt(!0),this.ensureFirebaseConfig();const i=BU(wq_firebase);this.db=jfe(i),this.auth=c_e(i),function Uge(t,e,n,r){Ot(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=I(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return I(function*(){yield function yme(t,e,n){return nR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return I(function*(){yield function jge(t){return Ot(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return I(function*(){r.ensureSignedIn();const o=function Kfe(t,e,...n){let r=[];e instanceof iA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof $u).length,a=o.filter(c=>c instanceof Lh).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(VH(r.db,"recipes"),function Qfe(t,e="asc"){const n=e,r=$_("orderBy",t);return oA._create(r,n)}("updated_at","desc"));return(yield function Zfe(t){t=Ie(t,Qt);const e=Ie(t.firestore,Ke),n=ht(e),r=new Bo(e);return function JH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function RH(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,c,u){const d=new V_({next:f=>{d.Ou(),s.enqueueAndForget(()=>sS(o,h)),f.fromCache&&"server"===c.source?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new lS(a,d,{includeMetadataChanges:!0,ka:!0});return iS(o,h)}(yield ju(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new ar(e,r,t,i))}(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at;return"string"!=typeof u?null:{id:a.id,raw_text:u,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield tpe(VH(i.db,"recipes"),{raw_text:o,updated_at:s4(),updated_by:i.user()?.email??""})).id,raw_text:o,updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return I(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield function Xfe(t,e,n,...r){t=Ie(t,ze);const i=Ie(t.firestore,Ke),o=Ca(i);let s;return s="string"==typeof(e=Ot(e))||e instanceof Ta?function nA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[kh(e,r,n)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(kh(e,o[f])),c.push(o[f+1]);const u=[],d=nn.empty();for(let f=a.length-1;f>=0;--f)if(!YH(u,a[f])){const g=a[f];let _=c[f];_=Ot(_);const v=s.gc(g);if(_ instanceof xh)u.push(g);else{const w=Sa(_,v);null!=w&&(u.push(g),d.set(g,w))}}const h=new Gn(u);return new qH(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function tA(t,e,n,r){const i=t.Dc(1,e,n);rA("Data must be an object, but it was:",i,r);const o=[],s=nn.empty();So(r,(c,u)=>{const d=j_(e,c,n);u=Ot(u);const h=i.gc(d);if(u instanceof xh)o.push(d);else{const f=Sa(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new Gn(o);return new qH(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),Fh(i,[s.toMutation(t._key,lt.exists(!0))])}(QS(o.db,"recipes",r),{raw_text:s,updated_at:s4(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}deleteRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();try{yield function epe(t){return Fh(Ie(t.firestore,Ke),[new wu(t._key,lt.none())])}(QS(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(wq_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const l_e=["postup","kroky","p\u0159\xedprava"],Tq=/^[\-\u2013\u2022*]\s*/,d_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,h_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,f_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function fy(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function p_e(t){const e=bq(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=bq(e),o=function g_e(t){return t.findIndex(e=>l_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:m_e(s,n),steps:T_e(a),warnings:n}}function bq(t){return t.findIndex(e=>e.length>0)}function m_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(Cq(o))i&&r.push(i),i={title:y_e(o),items:[]};else if(__e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=v_e(o);void 0===s.amount&&w_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function __e(t){return!Cq(t)}function Cq(t){return/:$/.test(t.trim())}function y_e(t){return t.replace(/:$/,"").trim()}function v_e(t){const e=t.replace(Tq,"").trim(),n=[],r=e.match(/\(([^)]+)\)\s*$/);r&&void 0!==r.index&&n.push({start:r.index,value:r[1].trim()});const i=e.match(/\s-\s*(.+)$/);if(void 0!==i?.index){const f=i[1].trim();f&&n.push({start:i.index,value:f})}const o=function I_e(t){for(let e=0;e<t.length;e+=1){if(","!==t[e])continue;const r=e+1<t.length?t[e+1]:"";if(!/\d/.test(e>0?t[e-1]:"")||!/\d/.test(r))return e}return-1}(e);if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function E_e(t){let e=t.trim();const r=e.match(d_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(h_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function w_e(t){const e=t.toLowerCase();return f_e.some(n=>e.startsWith(n))}function T_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(Tq,"").trim()).filter(Boolean)}let Qu=(()=>{var t;class e{constructor(){this.api=O(Ku),this.recipes=Tt([]),this.selectedRecipeId=Tt(null),this.rawText=Tt(""),this.searchQuery=Tt(""),this.loading=Tt(!1),this.saving=Tt(!1),this.deleting=Tt(!1),this.error=Tt(""),this.parsed=Dn(()=>fy(this.rawText())),this.selectedRecipe=Dn(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=Dn(()=>{const r=this.selectedRecipe();return r?fy(r.raw_text):null}),this.searchResults=Dn(()=>{const r=this.searchQuery().trim().toLowerCase();return r?this.recipes().filter(i=>fy(i.raw_text).title.toLowerCase().includes(r)||i.raw_text.toLowerCase().includes(r)):[]})}refresh(){var r=this;return I(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return I(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();return i?yield r.api.updateRecipe(i,r.rawText()):yield r.api.createRecipe(r.rawText()),yield r.refresh(),!0}catch(i){return r.error.set(i.message),!1}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return I(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return fy(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const Sq=()=>({exact:!0});function b_e(t,e){1&t&&(Ze(0,"section",1)(1,"p"),Fe(2,"Loading"),We()())}function C_e(t,e){if(1&t){const n=kc();Ze(0,"header",3)(1,"h1"),Fe(2,"Recipes"),We(),Ze(3,"button",5),St("click",function(){return Xi(n),eo(vt(2).signOut())}),Fe(4,"Sign out"),We()()}if(2&t){const n=vt(2);_e(3),gr("disabled",n.authBusy())}}function S_e(t,e){if(1&t){const n=kc();Ze(0,"nav",4)(1,"a",6),Fe(2,"Home"),We(),Ze(3,"a",7),Fe(4,"Recipes"),We(),Ze(5,"a",8),St("click",function(){return Xi(n),eo(vt(2).startAdd())}),Fe(6,"Add"),We()()}if(2&t){const n=vt(2);_e(),gr("routerLinkActiveOptions",jw(4,Sq)),_e(2),gr("routerLinkActiveOptions",jw(5,Sq)),_e(2),Ls("disabled",!n.canWrite())}}function A_e(t,e){if(1&t&&(er(0,C_e,5,1,"header",3),xc(1,"router-outlet"),er(2,S_e,7,6,"nav",4)),2&t){const n=vt();tr(n.user()?0:-1),_e(2),tr(n.user()?2:-1)}}function D_e(t,e){if(1&t&&(Ze(0,"p",2),Fe(1),We()),2&t){const n=vt();_e(),Fs(n.state.error())}}let R_e=(()=>{var t;class e{constructor(){this.router=O(Pn),this.api=O(Ku),this.state=O(Qu),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=Tt(!1),function TF(t,e){const n=e?.injector??O(Zn);let i,r=!0!==e?.manualCleanup?n.get(Lr):null;const o=n.get(Jv,null,{optional:!0}),s=n.get(ds);return null!==o?(i=function _ie(t,e,n){const r=Object.create(mie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=CF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof CM&&r._lView===o.view&&(r=null)):i=function yie(t,e,n){const r=Object.create(gie);return r.fn=CF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(xM),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new pie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return I(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"app-shell"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],[1,"bottom-nav","no-print"],["type","button",1,"ghost",3,"click","disabled"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes/new","routerLinkActive","active",3,"click"]],template:function(i,o){1&i&&(Ze(0,"main",0),er(1,b_e,3,0,"section",1)(2,A_e,3,2),er(3,D_e,2,1,"p",2),We()),2&i&&(_e(),tr(o.authLoading()?1:2),_e(2),tr(o.state.error()?3:-1))},dependencies:[KT,Nm,cU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#f8fafc}*[_ngcontent-%COMP%]{box-sizing:border-box}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:1.25rem 1rem 5.5rem;max-width:920px;margin:0 auto}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.65rem .75rem calc(.65rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:12px;padding:.75rem 1rem;background:#f1f5f9;color:#0f172a}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.75rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding-bottom:2rem}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:1rem 0 0;max-width:420px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})(),Aq=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Z(Ts),Z(wr))};static \u0275dir=Ee({type:t})}return t})(),Ra=(()=>{class t extends Aq{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(t)))(i||t)}})();static \u0275dir=Ee({type:t,features:[Le]})}return t})();const ii=new H(""),N_e={provide:ii,useExisting:Ye(()=>nf),multi:!0},k_e=new H("");let nf=(()=>{class t extends Aq{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function x_e(){const t=no()?no().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Z(Ts),Z(wr),Z(k_e,8))};static \u0275dir=Ee({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&St("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[st([N_e]),Le]})}return t})();const _n=new H(""),zo=new H("");function Lq(t){return null!=t}function Fq(t){return Cg(t)?dn(t):t}function Uq(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function jq(t,e){return e.map(n=>n(t))}function Bq(t){return t.map(e=>function V_e(t){return!t.validate}(e)?e:n=>e.validate(n))}function TR(t){return null!=t?function $q(t){if(!t)return null;const e=t.filter(Lq);return 0==e.length?null:function(n){return Uq(jq(n,e))}}(Bq(t)):null}function bR(t){return null!=t?function Hq(t){if(!t)return null;const e=t.filter(Lq);return 0==e.length?null:function(n){return function P_e(...t){const e=WF(t),{args:n,keys:r}=KF(t),i=new Mt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;qr(n[d]).subscribe(Ut(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?YF(r,a):a),o.complete())}))}});return e?i.pipe(QF(e)):i}(jq(n,e).map(Fq)).pipe(ke(Uq))}}(Bq(t)):null}function qq(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CR(t){return t?Array.isArray(t)?t:[t]:[]}function gy(t,e){return Array.isArray(t)?t.includes(e):t===e}function Wq(t,e){const n=CR(e);return CR(t).forEach(i=>{gy(n,i)||n.push(i)}),n}function Kq(t,e){return CR(e).filter(n=>!gy(t,n))}class Qq{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class xn extends Qq{name;get formDirective(){return null}get path(){return null}}class Go extends Qq{_parent=null;name=null;valueAccessor=null}class Yq{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let SR=(()=>{class t extends Yq{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Z(Go,2))};static \u0275dir=Ee({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Ls("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Le]})}return t})();const rf="VALID",_y="INVALID",Yu="PENDING",of="DISABLED";class Ju{}class Zq extends Ju{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class RR extends Ju{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class PR extends Ju{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class yy extends Ju{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class MR extends Ju{source;constructor(e){super(),this.source=e}}function vy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class kR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return at(this.statusReactive)}set status(e){at(()=>this.statusReactive.set(e))}_status=Dn(()=>this.statusReactive());statusReactive=Tt(void 0);get valid(){return this.status===rf}get invalid(){return this.status===_y}get pending(){return this.status==Yu}get disabled(){return this.status===of}get enabled(){return this.status!==of}errors;get pristine(){return at(this.pristineReactive)}set pristine(e){at(()=>this.pristineReactive.set(e))}_pristine=Dn(()=>this.pristineReactive());pristineReactive=Tt(!0);get dirty(){return!this.pristine}get touched(){return at(this.touchedReactive)}set touched(e){at(()=>this.touchedReactive.set(e))}_touched=Dn(()=>this.touchedReactive());touchedReactive=Tt(!1);get untouched(){return!this.touched}_events=new Vn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Wq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Wq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Kq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Kq(e,this._rawAsyncValidators))}hasValidator(e){return gy(this._rawValidators,e)}hasAsyncValidator(e){return gy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new PR(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new PR(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new RR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new RR(!0,r))}markAsPending(e={}){this.status=Yu;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new yy(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=of,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Zq(this.value,r)),this._events.next(new yy(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=rf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rf||this.status===Yu)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Zq(this.value,n)),this._events.next(new yy(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?of:rf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Yu,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=Fq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yy(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new kt,this.statusChanges=new kt}_calculateStatus(){return this._allControlsDisabled()?of:this.errors?_y:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yu)?Yu:this._anyControlsHaveStatus(_y)?_y:rf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new RR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new PR(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function q_e(t){return Array.isArray(t)?TR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function z_e(t){return Array.isArray(t)?bR(t):t||null}(this._rawAsyncValidators)}}const Zu=new H("",{providedIn:"root",factory:()=>Iy}),Iy="always";function sf(t,e,n=Iy){(function VR(t,e){const n=function zq(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(qq(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function Gq(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(qq(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Ty(e._rawValidators,i),Ty(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function K_e(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&nz(t,e)})}(t,e),function Y_e(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Q_e(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&nz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function W_e(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Ty(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function nz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function oz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function sz(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const az=class extends kR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function NR(t){return(vy(t)?t.validators:t)||null}(n),function xR(t,e){return(vy(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=sz(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new MR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){sz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},sye={provide:Go,useExisting:Ye(()=>Dy)},cz=Promise.resolve();let Dy=(()=>{class t extends Go{_changeDetectorRef;callSetDisabledState;control=new az;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new kt;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function UR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===nf?n=o:function X_e(t){return Object.getPrototypeOf(t.constructor)===Ra}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function FR(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){cz.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Hc(r);cz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Ey(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Z(xn,9),Z(_n,10),Z(zo,10),Z(ii,10),Z(im,8),Z(Zu,8))};static \u0275dir=Ee({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[st([sye]),Le,mi]})}return t})(),Mye=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=gg({type:t});static \u0275inj=ul({})}return t})(),Az=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Zu,useValue:n.callSetDisabledState??Iy}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gg({type:t});static \u0275inj=ul({imports:[Mye]})}return t})();const xye=(t,e)=>e.id;function kye(t,e){1&t&&(Ze(0,"p"),Fe(1,"Loading"),We())}function Oye(t,e){1&t&&(Ze(0,"p"),Fe(1,"No recipes"),We())}function Vye(t,e){if(1&t){const n=kc();Ze(0,"li")(1,"button",7),St("click",function(){const i=Xi(n).$implicit;return eo(vt(3).open(i.id))}),Fe(2),We()()}if(2&t){const n=e.$implicit,r=vt(3);_e(2),fo(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function Lye(t,e){if(1&t&&(Ze(0,"ul",6),ks(1,Vye,3,1,"li",null,xye),We()),2&t){const n=vt(2);_e(),Os(n.state.searchResults())}}function Fye(t,e){if(1&t&&(Ze(0,"section",5),er(1,kye,2,0,"p")(2,Oye,2,0,"p")(3,Lye,3,0,"ul",6),We()),2&t){const n=vt();Ls("loading",n.state.loading()),_e(),tr(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let Uye=(()=>{var t;class e{constructor(){this.state=O(Qu),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["type","search","placeholder","Search recipes",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(Ze(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),St("ngModelChange",function(a){return o.state.searchQuery.set(a)}),We()(),er(4,Fye,4,3,"section",4),We()()),2&i&&(Ls("has-query",o.state.searchQuery().trim().length>0),_e(3),gr("ngModel",o.state.searchQuery()),_e(),tr(o.state.searchQuery().trim().length>0?4:-1))},dependencies:[Az,nf,SR,Dy],styles:[".home-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:1rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{min-height:55vh;display:grid;place-items:center;transition:min-height .24s ease,place-items .24s ease}.home-screen.has-query[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]{min-height:0;place-items:start}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start;opacity:1;transform:translateY(0);transition:opacity .22s ease,transform .22s ease}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(260px,340px) minmax(0,1fr);column-gap:1rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})(),jye=(()=>{var t;class e{constructor(){this.api=O(Ku),this.state=O(Qu),this.router=O(Pn),this.authBusy=!1}signIn(){var r=this;return I(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(Ct(0,"section",0)(1,"h1"),Fe(2,"Recipes"),yt(),Ct(3,"button",1),$g("click",function(){return o.signIn()}),Fe(4,"Continue with Google"),yt()()),2&i&&(_e(3),Aw("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const Bye=(t,e)=>e.id;function $ye(t,e){1&t&&(Ct(0,"p"),Fe(1,"Loading"),yt())}function Hye(t,e){1&t&&(Ct(0,"p"),Fe(1,"No recipes"),yt())}function qye(t,e){if(1&t){const n=kc();Ct(0,"li")(1,"button",2),$g("click",function(){const i=Xi(n).$implicit;return eo(vt(2).open(i.id))}),Fe(2),yt()()}if(2&t){const n=e.$implicit,r=vt(2);_e(2),fo(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function zye(t,e){if(1&t&&(Ct(0,"ul",1),ks(1,qye,3,1,"li",null,Bye),yt()),2&t){const n=vt();_e(),Os(n.state.recipes())}}let Gye=(()=>{var t;class e{constructor(){this.state=O(Qu),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(Ct(0,"section",0),er(1,$ye,2,0,"p")(2,Hye,2,0,"p")(3,zye,3,0,"ul",1),yt()),2&i&&(_e(),tr(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const Wye=(t,e)=>e.title,Kye=(t,e)=>e.message;function Qye(t,e){if(1&t&&(Ct(0,"em"),Fe(1),yt()),2&t){const n=vt().$implicit;_e(),fo(" \u2014 ",n.note)}}function Yye(t,e){if(1&t&&(Ct(0,"li"),Fe(1),er(2,Qye,2,1,"em"),yt()),2&t){const n=e.$implicit;_e(),Ow(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),_e(),tr(n.note?2:-1)}}function Jye(t,e){if(1&t&&(Ct(0,"div",1)(1,"h3"),Fe(2),yt(),Ct(3,"ul"),ks(4,Yye,3,3,"li",null,Iw),yt()()),2&t){const n=e.$implicit;_e(2),Fs(n.title),_e(2),Os(n.items)}}function Zye(t,e){if(1&t&&(Ct(0,"li"),Fe(1),yt()),2&t){const n=e.$implicit;_e(),Fs(n.message)}}function Xye(t,e){if(1&t&&(Ct(0,"div",2)(1,"h3"),Fe(2,"Warnings"),yt(),Ct(3,"ul"),ks(4,Zye,2,1,"li",null,Kye),yt()()),2&t){const n=vt();_e(4),Os(n.warnings)}}function eve(t,e){if(1&t&&(Ct(0,"li"),Fe(1),yt()),2&t){const n=e.$implicit;_e(),Fs(n)}}function tve(t,e){if(1&t&&(Ct(0,"div",1)(1,"h3"),Fe(2,"Steps"),yt(),Ct(3,"ol"),ks(4,eve,2,1,"li",null,Iw),yt()()),2&t){const n=vt();_e(4),Os(n.steps)}}function nve(t,e){if(1&t&&(Ct(0,"article",0)(1,"h2"),Fe(2),yt(),ks(3,Jye,6,1,"div",1,Wye),er(5,Xye,6,0,"div",2),er(6,tve,6,0,"div",1),yt()),2&t){const n=e,r=vt();_e(2),Fs(n.title),_e(),Os(n.ingredientSections),_e(2),tr(r.showWarnings()&&n.warnings.length?5:-1),_e(),tr(n.steps.length?6:-1)}}let Dz=(()=>{var t;class e{constructor(){this.parsed=cT(null),this.showWarnings=cT(!1)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-recipe-preview"]],inputs:{parsed:[1,"parsed"],showWarnings:[1,"showWarnings"]},decls:1,vars:1,consts:[[1,"recipe-card"],[1,"block"],[1,"block","parser-warnings"]],template:function(i,o){if(1&i&&er(0,nve,7,3,"article",0),2&i){let s;tr((s=o.parsed())?0:-1,s)}},styles:[".recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}"]}))}return t(),e})();function rve(t,e){if(1&t){const n=kc();Ze(0,"div",1),xc(1,"app-recipe-preview",2),We(),Ze(2,"div",3)(3,"button",4),St("click",function(){return Xi(n),eo(vt().edit())}),Fe(4,"Edit"),We(),Ze(5,"button",5),St("click",function(){return Xi(n),eo(vt().remove())}),Fe(6),We(),Ze(7,"button",6),St("click",function(){return Xi(n),eo(vt().state.print())}),Fe(8,"Print"),We()()}if(2&t){const n=vt();_e(),gr("parsed",n.state.selectedParsed()),_e(2),gr("disabled",!n.api.canWrite()),_e(2),gr("disabled",!n.api.canWrite()||n.state.deleting()),_e(),fo(" ",n.state.deleting()?"Deleting":"Delete"," ")}}function ive(t,e){1&t&&(Ze(0,"p"),Fe(1,"Recipe not found"),We())}let ove=(()=>{var t;class e{constructor(){this.state=O(Qu),this.api=O(Ku),this.route=O(vo),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return I(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}remove(){var r=this;return I(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-recipe-detail"]],decls:3,vars:1,consts:[[1,"detail-screen"],[1,"printable-recipe"],[3,"parsed"],[1,"detail-actions","no-print"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"],["type","button",1,"ghost",3,"click"]],template:function(i,o){1&i&&(Ze(0,"section",0),er(1,rve,9,4)(2,ive,2,0,"p"),We()),2&i&&(_e(),tr(o.state.selectedParsed()?1:2))},dependencies:[Dz],styles:[".detail-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.detail-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.detail-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}@media print{.detail-actions[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;border:0;min-height:auto}}"]}))}return t(),e})(),Rz=(()=>{var t;class e{constructor(){this.state=O(Qu),this.api=O(Ku),this.route=O(vo),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected()):r.state.startAdd()})()}save(){var r=this;return I(function*(){(yield r.state.saveSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=vi({type:e,selectors:[["app-recipe-editor"]],decls:7,vars:6,consts:[[1,"editor-screen"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"editor-actions"],["type","button",3,"click","disabled"],[1,"preview-card"],[3,"parsed","showWarnings"]],template:function(i,o){1&i&&(Ze(0,"section",0)(1,"textarea",1),St("ngModelChange",function(a){return o.state.rawText.set(a)}),We(),Ze(2,"div",2)(3,"button",3),St("click",function(){return o.save()}),Fe(4),We()(),Ze(5,"div",4),xc(6,"app-recipe-preview",5),We()()),2&i&&(_e(),gr("ngModel",o.state.rawText())("disabled",!o.api.canWrite()),_e(2),gr("disabled",o.state.saving()||!o.api.canWrite()),_e(),fo(" ",o.state.saving()?"Saving":"Save"," "),_e(2),gr("parsed",o.state.parsed())("showWarnings",!0))},dependencies:[Az,nf,SR,Dy,Dz],styles:[".editor-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}textarea[_ngcontent-%COMP%]{width:100%;min-height:55vh;resize:vertical;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.editor-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.preview-card[_ngcontent-%COMP%]{margin-top:1rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const uf=()=>{const t=O(Ku),e=O(Pn);return!!t.user()||e.parseUrl("/login")};(function Qre(t,e,n){return rre({rootComponent:t,platformRef:n?.platformRef,...vF(e)})})(R_e,{providers:[function _ce(t,...e){return function Sv(t){return{\u0275providers:t}}([{provide:nb,multi:!0,useValue:t},[],{provide:vo,useFactory:lU,deps:[Pn]},{provide:HO,multi:!0,useFactory:dU},e.map(n=>n.\u0275providers)])}([{path:"login",component:jye},{path:"",canActivate:[uf],component:Uye},{path:"recipes",canActivate:[uf],component:Gye},{path:"recipes/new",canActivate:[uf],component:Rz},{path:"recipes/:id",canActivate:[uf],component:ove},{path:"recipes/:id/edit",canActivate:[uf],component:Rz},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},Oa=>{Oa(Oa.s=536)}]);