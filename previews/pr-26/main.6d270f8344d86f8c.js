"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{149(){let qa;function hl(){return qa}function vi(t){const e=qa;return qa=t,e}const Z5=Symbol("NotFound");function sv(t){return t===Z5||"\u0275NotFound"===t?.name}Error;let vn=null,fl=!1,av=1;const en=Symbol("SIGNAL");function he(t){const e=vn;return vn=t,e}const Ga={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function pl(t){if(fl)throw new Error("");if(null===vn)return;vn.consumerOnSignalRead(t);const e=vn.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=vn.recomputing;if(r&&(n=void 0!==e?e.nextProducer:vn.producers,void 0!==n&&n.producer===t))return vn.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===vn&&(!r||function r6(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,vn)))return;const o=Ka(vn),s={producer:t,consumer:vn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};vn.producersTail=s,void 0!==e?e.nextProducer=s:vn.producers=s,o&&PM(t,s)}function gl(t){if((!Ka(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==av)){if(!t.producerMustRecompute(t)&&!Uf(t))return void Ff(t);t.producerRecomputeValue(t),Ff(t)}}function RM(t){if(void 0===t.consumers)return;const e=fl;fl=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||e6(r)}}finally{fl=e}}function MM(){return!1!==vn?.consumerAllowSignalWrites}function e6(t){t.dirty=!0,RM(t),t.consumerMarkedDirty?.(t)}function Ff(t){t.dirty=!1,t.lastCleanEpoch=av}function Wa(t){return t&&function t6(t){t.producersTail=void 0,t.recomputing=!0}(t),he(t)}function ml(t,e){he(e),t&&function n6(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Ka(t))do{n=lv(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function Uf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(gl(n),r!==n.version))return!0}return!1}function _l(t){if(Ka(t)){let e=t.producers;for(;void 0!==e;)e=lv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function PM(t,e){const n=t.consumersTail,r=Ka(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)PM(i.producer,i)}function lv(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Ka(e)){let o=e.producers;for(;void 0!==o;)o=lv(o)}return n}function Ka(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function hv(t,e){return Object.is(t,e)}const ls=Symbol("UNSET"),Qa=Symbol("COMPUTING"),ao=Symbol("ERRORED"),o6={...Ga,value:ls,dirty:!0,error:null,equal:hv,kind:"computed",producerMustRecompute:t=>t.value===ls||t.value===Qa,producerRecomputeValue(t){if(t.value===Qa)throw new Error("");const e=t.value;t.value=Qa;const n=Wa(t);let r,i=!1;try{r=t.computation(),he(null),i=e!==ls&&e!==ao&&r!==ao&&t.equal(e,r)}catch(o){r=ao,t.error=o}finally{ml(t,n)}i?t.value=e:(t.value=r,t.version++)}};let NM=function s6(){throw new Error};function xM(t){NM(t)}function c6(t,e){const n=Object.create(fv);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function u6(t){return pl(t),t.value}(n);return r[en]=n,[r,s=>Bf(n,s),s=>function kM(t,e){MM()||xM(t),Bf(t,e(t.value))}(n,s)]}function Bf(t,e){MM()||xM(t),t.equal(t.value,e)||(t.value=e,function l6(t){t.version++,function X5(){av++}(),RM(t)}(t))}const fv={...Ga,equal:hv,value:void 0,kind:"signal"};function lt(t){return"function"==typeof t}function pv(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const gv=pv(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function mv(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Vn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(lt(r))try{r()}catch(o){e=o instanceof gv?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{LM(o)}catch(s){e=e??[],s instanceof gv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gv(e)}}add(e){var n;if(e&&e!==this)if(this.closed)LM(e);else{if(e instanceof Vn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mv(n,e)}remove(e){const{_finalizers:n}=this;n&&mv(n,e),e instanceof Vn&&e._removeParent(this)}}Vn.EMPTY=(()=>{const t=new Vn;return t.closed=!0,t})();const OM=Vn.EMPTY;function VM(t){return t instanceof Vn||t&&"closed"in t&&lt(t.remove)&&lt(t.add)&&lt(t.unsubscribe)}function LM(t){lt(t)?t():t.unsubscribe()}const ds={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$f={setTimeout(t,e,...n){const{delegate:r}=$f;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=$f;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function FM(t){$f.setTimeout(()=>{const{onUnhandledError:e}=ds;if(!e)throw t;e(t)})}function _v(){}const d6=yv("C",void 0,void 0);function yv(t,e,n){return{kind:t,value:e,error:n}}let hs=null;function Hf(t){if(ds.useDeprecatedSynchronousErrorHandling){const e=!hs;if(e&&(hs={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=hs;if(hs=null,n)throw r}}else t()}class vv extends Vn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,VM(e)&&e.add(this)):this.destination=y6}static create(e,n,r){return new Ev(e,n,r)}next(e){this.isStopped?wv(function f6(t){return yv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wv(function h6(t){return yv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wv(d6,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const g6=Function.prototype.bind;function Iv(t,e){return g6.call(t,e)}class m6{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zf(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zf(r)}else zf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zf(n)}}}class Ev extends vv{constructor(e,n,r){let i;if(super(),lt(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ds.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Iv(e.next,o),error:e.error&&Iv(e.error,o),complete:e.complete&&Iv(e.complete,o)}):i=e}this.destination=new m6(i)}}function zf(t){ds.useDeprecatedSynchronousErrorHandling?function p6(t){ds.useDeprecatedSynchronousErrorHandling&&hs&&(hs.errorThrown=!0,hs.error=t)}(t):FM(t)}function wv(t,e){const{onStoppedNotification:n}=ds;n&&$f.setTimeout(()=>n(t,e))}const y6={closed:!0,next:_v,error:function _6(t){throw t},complete:_v},bv="function"==typeof Symbol&&Symbol.observable||"@@observable";function fs(t){return t}function UM(t){return 0===t.length?fs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let jt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function E6(t){return t&&t instanceof vv||function I6(t){return t&&lt(t.next)&&lt(t.error)&&lt(t.complete)}(t)&&VM(t)}(n)?n:new Ev(n,r,i);return Hf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=jM(r))((i,o)=>{const s=new Ev({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[bv](){return this}pipe(...n){return UM(n)(this)}toPromise(n){return new(n=jM(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function jM(t){var e;return null!==(e=t??ds.Promise)&&void 0!==e?e:Promise}const w6=pv(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qn=(()=>{class t extends jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new BM(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new w6}next(n){Hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?OM:(this.currentObservers=null,o.push(n),new Vn(()=>{this.currentObservers=null,mv(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new jt;return n.source=this,n}}return t.create=(e,n)=>new BM(e,n),t})();class BM extends Qn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:OM}}class br extends Qn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const HM="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class j extends Error{code;constructor(e,n){super(Gr(e,n)),this.code=e}}function Gr(t,e){return`${function b6(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const Tt=globalThis;function Ue(t){for(let e in t)if(t[e]===Ue)return e;throw Error("")}function T6(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Yn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Yn).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function Tv(t,e){return t?e?`${t} ${e}`:t:e||""}const C6=Ue({__forward_ref__:Ue});function st(t){return t.__forward_ref__=st,t.toString=function(){return Yn(this())},t}function ve(t){return Gf(t)?t():t}function Gf(t){return"function"==typeof t&&t.hasOwnProperty(C6)&&t.__forward_ref__===st}function se(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function yl(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wf(t){return function N6(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Qf)}function Kf(t){return t&&t.hasOwnProperty(Cv)?t[Cv]:null}const Qf=Ue({\u0275prov:Ue}),Cv=Ue({\u0275inj:Ue});class G{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=se({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Av(t){return t&&!!t.\u0275providers}const Dv=Ue({\u0275cmp:Ue}),F6=Ue({\u0275dir:Ue}),U6=Ue({\u0275pipe:Ue}),zM=Ue({\u0275mod:Ue}),gs=Ue({\u0275fac:Ue}),El=Ue({__NG_ELEMENT_ID__:Ue}),qM=Ue({__NG_ENV_ID__:Ue});function me(t){return"string"==typeof t?t:null==t?"":String(t)}const Rv=Ue({ngErrorCode:Ue}),GM=Ue({ngErrorMessage:Ue}),wl=Ue({ngTokenPath:Ue});function Mv(t,e){return WM("",-200,e)}function Pv(t,e){throw new j(-201,!1)}function WM(t,e,n){const r=new j(e,t);return r[Rv]=e,r[GM]=t,n&&(r[wl]=n),r}let Nv;function KM(){return Nv}function Jn(t){const e=Nv;return Nv=t,e}function QM(t,e,n){const r=Wf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void Pv()}const ms={};class q6{injector;constructor(e){this.injector=e}retrieve(e,n){const r=bl(n)||0;try{return this.injector.get(e,8&r?null:ms,r)}catch(i){if(sv(i))return i;throw i}}}function G6(t,e=0){const n=hl();if(void 0===n)throw new j(-203,!1);if(null===n)return QM(t,void 0,e);{const r=function W6(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(sv(i)){if(r.optional)return null;throw i}return i}}function Te(t,e=0){return(KM()||G6)(ve(t),e)}function O(t,e){return Te(t,bl(e))}function bl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kv(t){const e=[];for(let n=0;n<t.length;n++){const r=ve(t[n]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=K6(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(Te(i,o))}else e.push(Te(r))}return e}function K6(t){return t.__NG_DI_FLAG__}function _s(t,e){return t.hasOwnProperty(gs)?t[gs]:null}function Ya(t,e){t.forEach(n=>Array.isArray(n)?Ya(n,e):e(n))}function JM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Jf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Xf(t,e,n){let r=Cl(t,e);return r>=0?t[1|r]=n:(r=~r,function XM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Ov(t,e){const n=Cl(t,e);if(n>=0)return t[1|n]}function Cl(t,e){return function Y6(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Wr={},at=[],uo=new G(""),e0=new G("",-1),Vv=new G("");class ep{get(e,n=ms){if(n===ms){const i=WM("",-201);throw i.name="\u0275NotFound",i}return n}}function Kr(t){return t[zM]||null}function $e(t){return t[Dv]||null}function Ln(t){return t[F6]||null}function xr(t){return t[U6]||null}function Z6(...t){return{\u0275providers:Uv(0,t),\u0275fromNgModule:!0}}function Uv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ya(e,s=>{const a=s;tp(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&t0(i,o),n}function t0(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];jv(i,o=>{e(o,r)})}}function tp(t,e,n,r){if(!(t=ve(t)))return!1;let i=null,o=Kf(t);const s=!o&&$e(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Kf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)tp(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Ya(o.imports,d=>{tp(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&t0(u,e)}if(!a){const u=_s(i)||(()=>new i);e({provide:i,useFactory:u,deps:at},i),e({provide:Vv,useValue:i,multi:!0},i),e({provide:uo,useValue:()=>Te(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;jv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function jv(t,e){for(let n of t)Av(n)&&(n=n.\u0275providers),Array.isArray(n)?jv(n,e):e(n)}const X6=Ue({provide:String,useValue:Ue});function Bv(t){return null!==t&&"object"==typeof t&&X6 in t}function Ii(t){return"function"==typeof t}const $v=new G(""),np={},o0={};let Hv;function zv(){return void 0===Hv&&(Hv=new ep),Hv}class Fn{}class ys extends Fn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Gv(e,s=>this.processProvider(s)),this.records.set(e0,Za(void 0,this)),i.has("environment")&&this.records.set(Fn,Za(void 0,this));const o=this.records.get($v);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vv,at,{self:!0}))}retrieve(e,n){const r=bl(n)||0;try{return this.get(e,ms,r)}catch(i){if(sv(i))return i;throw i}}destroy(){Sl(this),this._destroyed=!0;const e=he(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return Sl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Sl(this);const n=vi(this),r=Jn(void 0);try{return e()}finally{vi(n),Jn(r)}}get(e,n=ms,r){if(Sl(this),e.hasOwnProperty(qM))return e[qM](this);const i=bl(r),s=vi(this),a=Jn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function iq(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&Wf(e);u=d&&this.injectableDefInScope(d)?Za(qv(e),np):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?zv():this.parent).get(e,n=8&i&&n===ms?null:n)}catch(c){const u=function H6(t){return t[Rv]}(c);throw-200===u||-201===u?new j(u,null):c}finally{Jn(a),vi(s)}}resolveInjectorInitializers(){const e=he(null),n=vi(this),r=Jn(void 0);try{const o=this.get(uo,at,{self:!0});for(const s of o)s()}finally{vi(n),Jn(r),he(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Yn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=Ii(e=ve(e))?e:ve(e&&e.provide);const r=function tq(t){return Bv(t)?Za(void 0,t.useValue):Za(s0(t),np)}(e);if(!Ii(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Za(void 0,np,!0),i.factory=()=>kv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=he(null);try{if(n.value===o0)throw Mv(Yn(e));return n.value===np&&(n.value=o0,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function rq(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ve(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function qv(t){const e=Wf(t),n=null!==e?e.factory:_s(t);if(null!==n)return n;if(t instanceof G)throw new j(204,!1);if(t instanceof Function)return function eq(t){if(t.length>0)throw new j(204,!1);const n=function x6(t){return(t?.[Qf]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new j(204,!1)}function s0(t,e,n){let r;if(Ii(t)){const i=ve(t);return _s(i)||qv(i)}if(Bv(t))r=()=>ve(t.useValue);else if(function r0(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...kv(t.deps||[]));else if(function n0(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>Te(ve(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=ve(t&&(t.useClass||t.provide));if(!function nq(t){return!!t.deps}(t))return _s(i)||qv(i);r=()=>new i(...kv(t.deps))}return r}function Sl(t){if(t.destroyed)throw new j(205,!1)}function Za(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Gv(t,e){for(const n of t)Array.isArray(n)?Gv(n,e):n&&Av(n)?Gv(n.\u0275providers,e):e(n)}function Cr(t,e){let n;t instanceof ys?(Sl(t),n=t):n=new q6(t);const i=vi(n),o=Jn(void 0);try{return e()}finally{vi(i),Jn(o)}}function wt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Un(t){return Array.isArray(t)&&!0===t[1]}function c0(t){return!!(4&t.flags)}function bi(t){return t.componentOffset>-1}function rc(t){return!(1&~t.flags)}function hr(t){return!!t.template}function go(t){return!!(512&t[2])}function Ti(t){return!(256&~t[2])}function nn(t){for(;Array.isArray(t);)t=t[0];return t}function ic(t,e){return nn(e[t])}function $t(t,e){return nn(e[t.index])}function oc(t,e){return t.data[e]}function jn(t,e){const n=e[t];return wt(n)?n:n[0]}function Jv(t){return!(128&~t[2])}function wn(t,e){return null==e?null:t[e]}function p0(t){t[17]=0}function g0(t){1024&t[2]||(t[2]|=1024,Jv(t)&&sc(t))}function sp(t){return!!(9216&t[2]||t[24]?.dirty)}function Zv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),sp(t)&&sc(t)}function sc(t){t[10].changeDetectionScheduler?.notify(0);let e=Ci(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Jv(e));)e=Ci(e)}function ap(t,e){if(Ti(t))throw new j(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function Ci(t){const e=t[3];return Un(e)?e[3]:e}function _0(t){return t[7]??=[]}function y0(t){return t.cleanup??=[]}const fe={lFrame:x0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let tI=!1;function v0(){fe.lFrame.elementDepthCount--}function E0(t){return fe.skipHydrationRootTNode===t}function w0(){fe.skipHydrationRootTNode=null}function V(){return fe.lFrame.lView}function Ie(){return fe.lFrame.tView}function qe(t){return fe.lFrame.contextLView=t,t[8]}function Ge(t){return fe.lFrame.contextLView=null,t}function ge(){let t=b0();for(;null!==t&&64===t.type;)t=t.parent;return t}function b0(){return fe.lFrame.currentTNode}function Si(t,e){const n=fe.lFrame;n.currentTNode=t,n.isParent=e}function T0(){return fe.lFrame.isParent}function D0(){return tI}function cp(t){const e=tI;return tI=t,e}function Zn(){return fe.lFrame.bindingIndex++}function Di(t){const e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _q(t,e){const n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,rI(e)}function rI(t){fe.lFrame.currentDirectiveIndex=t}function oI(){return fe.lFrame.currentQueryIndex}function up(t){fe.lFrame.currentQueryIndex=t}function vq(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function P0(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=vq(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=fe.lFrame=N0();return r.currentTNode=e,r.lView=t,!0}function sI(t){const e=N0(),n=t[1];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function N0(){const t=fe.lFrame,e=null===t?null:t.child;return null===e?x0(t):e}function x0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function k0(){const t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const O0=k0;function aI(){const t=k0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ln(){return fe.lFrame.selectedIndex}function bs(t){fe.lFrame.selectedIndex=t}function Qr(){const t=fe.lFrame;return oc(t.tView,t.selectedIndex)}function fr(){fe.lFrame.currentNamespace="svg"}function Yr(){!function wq(){fe.lFrame.currentNamespace=null}()}let V0=!0;function lp(){return V0}function Ml(t){V0=t}function L0(t,e=null,n=null,r){const i=F0(t,e,n,r);return i.resolveInjectorInitializers(),i}function F0(t,e=null,n=null,r,i=new Set){const o=[n||at,Z6(t)];return r=r||("object"==typeof t?void 0:Yn(t)),new ys(o,e||zv(),r||null,i)}class pr{static THROW_IF_NOT_FOUND=ms;static NULL=new ep;static create(e,n){if(Array.isArray(e))return L0({name:""},n,e,"");{const r=e.name??"";return L0({name:r},e.parent,e.providers,r)}}static \u0275prov=se({token:pr,providedIn:"any",factory:()=>Te(e0)});static __NG_ELEMENT_ID__=-1}const kr=new G("");let Jr=(()=>class t{static __NG_ELEMENT_ID__=Tq;static __NG_ENV_ID__=n=>n})();class U0 extends Jr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ti(this._lView)}onDestroy(e){const n=this._lView;return ap(n,e),()=>function Xv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function Tq(){return new U0(V())}class cc{_console=console;handleError(e){this._console.error("ERROR",e)}}const Zr=new G("",{providedIn:"root",factory:()=>{const t=O(Fn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(cc),e.handleError(n))}}}),j0={provide:uo,useValue:()=>{O(cc)},multi:!0};function je(t,e){const[n,r,i]=c6(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=cI.bind(o),o}function cI(){const t=this[en];if(void 0===t.readonlyFn){const e=()=>this();e[en]=t,t.readonlyFn=e}return t.readonlyFn}let uI=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Sq})();function Sq(){return new uI(V(),ge())}class Ts{}const H0=new G("",{providedIn:"root",factory:()=>!1}),z0=new G(""),q0=new G("");let mo=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new br(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new jt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=se({token:t,providedIn:"root",factory:()=>new t})}return t})();function Pl(...t){}let W0=(()=>{class t{static \u0275prov=se({token:t,providedIn:"root",factory:()=>new Aq})}return t})();class Aq{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let K0=null;function _o(){return K0}class Rq{}let Q0=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(Mq),providedIn:"platform"})}return t})(),Mq=(()=>{class t extends Q0{_location;_history;_doc=O(kr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _o().getBaseHref(this._doc)}onPopState(n){const r=_o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=_o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Y0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function J0(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function Cs(t){return t&&"?"!==t[0]?`?${t}`:t}let dp=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(Nq),providedIn:"root"})}return t})();const Pq=new G("");let Nq=(()=>{class t extends dp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(kr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Y0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Cs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Cs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Cs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Te(Q0),Te(Pq,8))};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nl=(()=>{class t{_subject=new Qn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Oq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(J0(Z0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Cs(r))}normalize(n){return t.stripTrailingSlash(function kq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Z0(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Cs;static joinWithSlash=Y0;static stripTrailingSlash=J0;static \u0275fac=function(r){return new(r||t)(Te(dp))};static \u0275prov=se({token:t,factory:()=>function xq(){return new Nl(Te(dp))}(),providedIn:"root"})}return t})();function Z0(t){return t.replace(/\/index.html$/,"")}function lP(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){lP(o,r,i,s,a,"next",c)}function a(c){lP(o,r,i,s,a,"throw",c)}s(void 0)})}}function dP(t){return lt(t?.lift)}function dn(t){return e=>{if(dP(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Jt(t,e,n,r,i){return new y9(t,e,n,r,i)}class y9 extends vv{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function He(t,e){return dn((n,r)=>{let i=0;n.subscribe(Jt(r,o=>{r.next(t.call(e,o,i++))}))})}function Ri(t){return{toString:t}.toString()}class eG{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function TP(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const Mi=(()=>{const t=()=>CP;return t.ngInherit=!0,t})();function CP(t){return t.type.prototype.ngOnChanges&&(t.setInput=nG),tG}function tG(){const t=AP(this),e=t?.current;if(e){const n=t.previous;if(n===Wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function nG(t,e,n,r,i){const o=this.declaredInputs[r],s=AP(t)||function rG(t,e){return t[SP]=e}(t,{previous:Wr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new eG(u&&u.currentValue,n,c===Wr),TP(t,e,i,n)}const SP="__ngSimpleChanges__";function AP(t){return t[SP]||null}const As=[],ze=function(t,e=null,n){for(let r=0;r<As.length;r++)(0,As[r])(t,e,n)};function Ep(t,e,n){RP(t,e,3,n)}function wp(t,e,n,r){(3&t[2])===n&&RP(t,e,n,r)}function II(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function RP(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(cG(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function MP(t,e){ze(4,t,e);const n=he(null);try{e.call(t)}finally{he(n),ze(5,t,e)}}function cG(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,MP(a,o)):MP(a,o)}class Ul{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function NP(t){return 3===t||4===t||6===t}function xP(t){return 64===t.charCodeAt(0)}function mc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||kP(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function kP(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function wI(t){return-1!==t}function jl(t){return 32767&t}function Bl(t,e){let n=function hG(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let bI=!0;function bp(t){const e=bI;return bI=t,e}let fG=0;const ei={};function Tp(t,e){const n=LP(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,TI(r.data,t),TI(e,null),TI(r.blueprint,null));const i=Cp(t,e),o=t.injectorIndex;if(wI(i)){const s=jl(i),a=Bl(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function TI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Cp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=zP(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function CI(t,e,n){!function pG(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(El)&&(r=n[El]),null==r&&(r=n[El]=fG++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function FP(t,e,n){if(8&n||void 0!==t)return t;Pv()}function UP(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=Jn(void 0);try{return i?i.get(e,r,8&n):QM(e,r,8&n)}finally{Jn(o)}}return FP(r,0,n)}function jP(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function vG(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!go(s);){const a=BP(o,s,n,2|r,ei);if(a!==ei)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,ei,r);if(d!==ei)return d}c=zP(s),s=s[14]}o=c}return i}(t,e,n,r,ei);if(s!==ei)return s}const o=BP(t,e,n,r,ei);if(o!==ei)return o}return UP(e,n,r,i)}function BP(t,e,n,r,i){const o=function _G(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(El)?t[El]:void 0;return"number"==typeof e?e>=0?255&e:yG:e}(n);if("function"==typeof o){if(!P0(e,t,r))return 1&r?FP(i,0,r):UP(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;Pv()}finally{O0()}}else if("number"==typeof o){let s=null,a=LP(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?Cp(t,e):e[a+8],-1!==c&&HP(r,!1)?(s=e[1],a=jl(c),e=Bl(c,e)):a=-1);-1!==a;){const d=e[1];if($P(o,a,d.data)){const h=mG(a,e,n,s,r,u);if(h!==ei)return h}c=e[a+8],-1!==c&&HP(r,e[1].data[a+8]===u)&&$P(o,a,e)?(s=d,a=jl(c),e=Bl(c,e)):a=-1}}return i}function mG(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=Sp(a,s,n,null==r?bi(a)&&bI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?$l(e,s,d,a,i):ei}function Sp(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&hr(g)&&g.type===n)return c}return null}function $l(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof Ul){const a=o;if(a.resolving)throw function Ne(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():me(t)}(s[n]),Mv();const c=bp(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Jn(a.injectImpl):null;P0(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function aG(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=CP(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&Jn(h),bp(c),a.resolving=!1,O0()}}return o}function $P(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function HP(t,e){return!(2&t||1&t&&e)}class At{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jP(this._tNode,this._lView,e,bl(r),n)}}function yG(){return new At(ge(),V())}function rn(t){return Ri(()=>{const e=t.prototype.constructor,n=e[gs]||SI(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[gs]||SI(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function SI(t){return Gf(t)?()=>{const e=SI(ve(t));return e&&e()}:_s(t)}function zP(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function Ap(t){return function gG(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(NP(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(ge(),t)}function AG(){return _c(ge(),V())}function _c(t,e){return new Or($t(t,e))}let Or=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=AG})();function QP(t){return t instanceof Or?t.nativeElement:t}function DG(){return this._results[Symbol.iterator]()}class RG{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function Tr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Q6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=DG}function Hl(t){return!(128&~t.flags)}var Rp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Rp||{});const Mp=new Map;let NG=0;function RI(t){Mp.delete(t[19])}const PI="__ngContext__";function er(t,e){wt(e)?(t[PI]=e[19],function kG(t){Mp.set(t[19],t)}(e)):t[PI]=e}function sN(t){return cN(t[12])}function aN(t){return cN(t[4])}function cN(t){for(;null!==t&&!Un(t);)t=t[4];return t}let NI;const ql=new G("",{providedIn:"root",factory:()=>nW}),nW="ng",gN=new G(""),mN=new G("",{providedIn:"platform",factory:()=>"unknown"}),_N=new G("",{providedIn:"root",factory:()=>function Io(){if(void 0!==NI)return NI;if(typeof document<"u")return document;throw new j(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),lW=new G("",{providedIn:"root",factory:()=>!1});function Op(t){return!(32&~t.flags)}function $N(t,e){const n=t.contentQueries;if(null!==n){const r=he(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];up(n[i]),a.contentQueries(2,e[s],s)}}}finally{he(r)}}}function YI(t,e,n){up(0);const r=he(null);try{e(t,n)}finally{he(r)}}function JI(t,e,n){if(c0(e)){const r=he(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{he(r)}}}var Pi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Pi||{});let Hp;function QN(t){return function eE(){if(void 0===Hp&&(Hp=null,Tt.trustedTypes))try{Hp=Tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hp}()?.createScriptURL(t)||t}class YN{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HM})`}}function wo(t){return t instanceof YN?t.changingThisBreaksApplicationSecurity:t}function Kl(t,e){const n=function WW(t){return t instanceof YN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${HM})`)}return n===e}const JW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qp(t,e,n){return t.createElement(e,n)}function Rs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function a1(t,e,n){t.appendChild(e,n)}function c1(t,e,n,r,i){null!==r?Rs(t,e,n,r,i):a1(t,e,n)}function Yl(t,e,n,r){t.removeChild(null,e,n,r)}function l1(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function dG(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];xP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function d8(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function l8(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var bc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(bc||{});function xi(t){const e=Jl();return e?e.sanitize(bc.URL,t)||"":Kl(t,"URL")?wo(t):function tE(t){return(t=String(t)).match(JW)?t:"unsafe:"+t}(me(t))}function d1(t){const e=Jl();if(e)return QN(e.sanitize(bc.RESOURCE_URL,t)||"");if(Kl(t,"ResourceURL"))return QN(wo(t));throw new j(904,!1)}const y8=new Set(["embed","frame","iframe","media","script"]),v8=new Set(["base","link","script"]);function h1(t,e,n){return function I8(t,e){return"src"===e&&y8.has(t)||"href"===e&&v8.has(t)||"xlink:href"===e&&"script"===t?d1:xi}(e,n)(t)}function Jl(){const t=V();return t&&t[10].sanitizer}function ti(t){return t instanceof Function?t():t}function P8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const _1="ng-template";function N8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==P8(e[i+1].toLowerCase(),n,0))return!0}else if(aE(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function aE(t){return 4===t.type&&t.value!==_1}function x8(t,e,n){return e===(4!==t.type||n?t.value:_1)}function k8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function L8(t){for(let e=0;e<t.length;e++)if(NP(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!x8(t,c,n)||""===c&&1===e.length){if(Vr(r))return!1;s=!0}}else if(8&r){if(null===i||!N8(t,i,c,n)){if(Vr(r))return!1;s=!0}}else{const u=e[++a],d=O8(c,i,aE(t),n);if(-1===d){if(Vr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Vr(r))return!1;s=!0}}}}else{if(!s&&!Vr(r)&&!Vr(c))return!1;if(s&&Vr(c))continue;s=!1,r=c|1&r}}return Vr(r)||s}function Vr(t){return!(1&t)}function O8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function F8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function y1(t,e,n=!1){for(let r=0;r<e.length;r++)if(k8(t,e[r],n))return!0;return!1}function v1(t,e){return t?":not("+e.trim()+")":e}function j8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Vr(s)&&(e+=v1(o,i),i=""),r=s,o=o||!Vr(r);n++}return""!==i&&(e+=v1(o,i)),e}const We={};function cE(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function H8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function Wp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),p0(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function xG(){return NG++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function uE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Zl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lE(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function L(t=1){E1(Ie(),V(),ln()+t,!1)}function E1(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&wp(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&Ep(e,o,n)}bs(n)}var Kp=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Kp||{});function Xl(t,e,n,r){const i=he(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&Kp.SignalBased)&&(c=e[o][en]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):TP(e,c,o,r)}finally{he(i)}}var Ms=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ms||{});function hE(t,e){return undefined(t,e)}const Ps=new Set;var fE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(fE||{});const ed=new G(""),C1=new Set;function Tn(t){C1.has(t)||(C1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const S1=!1,Ht=class Y8 extends Qn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Wv(){return void 0!==KM()||null!=hl()}()&&(this.destroyRef=O(Jr,{optional:!0})??void 0,this.pendingTasks=O(mo,{optional:!0})??void 0)}emit(e){const n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Vn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function A1(t){let e,n;function r(){t=Pl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function D1(t){return queueMicrotask(()=>t()),()=>{t=Pl}}const pE="isAngularZone",Yp=pE+"_ID";let J8=0;class Be{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ht(!1);onMicrotaskEmpty=new Ht(!1);onStable=new Ht(!1);onError=new Ht(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=S1}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function e7(t){const e=()=>{!function X8(t){function e(){A1(()=>{t.callbackScheduled=!1,mE(t),t.isCheckStableRunning=!0,gE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),mE(t))}(t)},n=J8++;t._inner=t._inner.fork({name:"angular",properties:{[pE]:!0,[Yp]:n,[Yp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function t7(t){return P1(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return R1(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),M1(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return R1(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function n7(t){return P1(t,"__scheduler_tick__")}(c)&&e(),M1(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,mE(t),gE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(pE)}static assertInAngularZone(){if(!Be.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(Be.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Z8,Pl,Pl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Z8={};function gE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function R1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function M1(t){t._nesting--,gE(t)}class _E{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ht;onMicrotaskEmpty=new Ht;onStable=new Ht;onError=new Ht;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function P1(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let N1=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=se({token:t,providedIn:"root",factory:()=>new t})}return t})();const Jp=new G("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function V1(t,e,n){const r=t.get(Jp);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function L1(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function vE(t,e){for(const[n,r]of e)V1(t,r.animateFns)}(r,i)}function Sc(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;Un(i)?c=i:wt(i)&&(u=!0,i=i[0]);const d=nn(i);0===t&&null!==r?(L1(a,r,o,n),null==s?a1(e,r,d):Rs(e,r,d,s||null,!0)):1===t&&null!==r?(L1(a,r,o,n),Rs(e,r,d,s||null,!0)):2===t?j1(a,o,n,h=>{Yl(e,d,u,h)}):3===t&&j1(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function g7(t,e,n,r,i,o,s){const a=r[7];a!==nn(r)&&Sc(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];eg(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function U1(t,e){e[10].changeDetectionScheduler?.notify(9),eg(t,e,e[11],2,null,null)}function IE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function td(t,e){if(Ti(e))return;const n=e[11];n.destroyNode&&eg(t,e,n,3,null,null),function l7(t){let e=t[12];if(!e)return EE(t[1],t);for(;e;){let n=null;if(wt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)wt(e)&&EE(e[1],e),e=e[3];null===e&&(e=t),wt(e)&&EE(e[1],e),n=e&&e[4]}e=n}}(e)}function EE(t,e){if(Ti(e))return;const n=he(null);try{e[2]&=-129,e[2]|=256,e[24]&&_l(e[24]),function f7(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ul)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];ze(4,a,c);try{c.call(a)}finally{ze(5,a,c)}}else{ze(4,i,o);try{o.call(i)}finally{ze(5,i,o)}}}}}(t,e),function h7(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Un(e[3])){r!==e[3]&&IE(r,e);const i=e[18];null!==i&&i.detachView(t)}RI(e)}finally{he(n)}}function j1(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Ps.add(t),V1(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function d7(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Ps.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Ps.delete(t),r(!1)},i)}function wE(t,e,n){return function B1(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(bi(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Pi.None||i===Pi.Emulated)return null}return $t(r,n)}(t,e.parent,n)}let z1=function H1(t,e,n){return 40&t.type?$t(t,n):null};function TE(t,e,n,r){const i=wE(t,r,e),o=e[11],a=function $1(t,e,n){return z1(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)c1(o,i,n[c],a,!1);else c1(o,i,n,a,!1)}function Ns(t,e){if(null!==e){const n=e.type;if(3&n)return $t(e,t);if(4&n)return Xp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ns(t,r);{const i=t[e.index];return Un(i)?Xp(-1,i):nn(i)}}if(128&n)return Ns(t,e.next);if(32&n)return hE(e,t)()||nn(t[e.index]);{const r=G1(t,e);return null!==r?Array.isArray(r)?r[0]:Ns(Ci(t[15]),r):Ns(t,e.next)}}return null}function G1(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Xp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ns(r,i)}return e[7]}function CE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&er(nn(c),r),n.flags|=2),!Op(n))if(8&u)CE(t,e,n.child,r,i,o,!1),Sc(e,t,a,i,c,n,o,r);else if(32&u){const d=hE(n,r);let h;for(;h=d();)Sc(e,t,a,i,h,n,o,r);Sc(e,t,a,i,c,n,o,r)}else 16&u?W1(t,e,r,n,i,o):Sc(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function eg(t,e,n,r,i,o){CE(n,r,t.firstChild,e,i,o,!1)}function W1(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Sc(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];Hl(r)&&(u.flags|=128),CE(t,e,u,d,i,o,!0)}}function K1(t,e,n,r,i){const o=ln(),s=2&r;try{bs(-1),s&&e.length>27&&E1(t,e,27,!1),ze(s?2:0,i,n),n(r,i)}finally{bs(o),ze(s?3:1,i,n)}}function tg(t,e,n){(function E7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;bi(n)&&function z8(t,e,n){const r=$t(e,t),i=function I1(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=cE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=lE(t,Wp(t,i,null,uE(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Tp(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=$l(e,t,s,n);er(c,e),null!==o&&C7(0,s-r,c,a,0,o),hr(a)&&(jn(n.index,e)[8]=$l(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function w7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function yq(){return fe.lFrame.currentDirectiveIndex}();try{bs(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];rI(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&b7(c,u)}}finally{bs(-1),rI(s)}}(t,e,n)}function Ac(t,e,n=$t){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let Q1=()=>null;function SE(t,e,n,r,i,o){og(t,e[1],e,n,r)?bi(t)&&function Y1(t,e){const n=jn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function I7(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),AE(t,e,n,r,i,o))}function AE(t,e,n,r,i,o){if(3&t.type){const s=$t(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function b7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function DE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];y1(e,o.selectors,!1)&&(r??=[],hr(o)?r.unshift(o):r.push(o))}return r}function C7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)Xl(r,n,s[a],s[a+1])}function rg(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,Si(t,!0);const c=2===t.type;return c?(l1(e[11],a,t),(0===function hq(){return fe.lFrame.elementDepthCount}()||rc(t))&&er(a,e),function fq(){fe.lFrame.elementDepthCount++}()):er(a,e),lp()&&(!c||!Op(t))&&TE(s,e,a,t),t}function ig(t){let e=t;return T0()?function C0(){fe.lFrame.isParent=!1}():(e=e.parent,Si(e,!1)),e}function og(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];Xl(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)Xl(e.data[c],n[c],r,i),a=!0;return a}function A7(t,e){const n=jn(e,t),r=n[1];!function D7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),ze(18),sg(r,n,n[8]),ze(19,n[8])}function sg(t,e,n){sI(e);try{const r=t.viewQuery;null!==r&&YI(1,r,n);const i=t.template;null!==i&&K1(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&$N(t,e),t.staticViewQueries&&YI(2,t.viewQuery,n);const o=t.components;null!==o&&function R7(t,e){for(let n=0;n<e.length;n++)A7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,aI()}}function Dc(t,e,n,r){const i=he(null);try{const o=e.tView,c=Wp(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),sg(o,c,n),c}finally{he(i)}}function xs(t,e){return!e||null===e.firstChild||Hl(t)}function nd(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(nn(o)),Un(o)&&M7(o,r);const s=n.type;if(8&s)nd(t,e,n.child,r);else if(32&s){const a=hE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=G1(e,n);if(Array.isArray(a))r.push(...a);else{const c=Ci(e[15]);nd(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function M7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&nd(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function X1(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let ex=[];const k7={...Ga,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{sc(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},V7={...Ga,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Ci(t.lView);for(;e&&!tx(e[1]);)e=Ci(e);e&&g0(e)},consumerOnSignalRead(){this.lView[24]=this}};function tx(t){return 2!==t.type}function nx(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function ag(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function F7(t,e){const n=D0();try{cp(!0),ME(t,e);let r=0;for(;sp(t);){if(100===r)throw new j(103,!1);r++,ME(t,1)}}finally{cp(n)}}(t,e)}finally{r.end?.()}}function rx(t,e,n,r){if(Ti(e))return;const i=e[2];sI(e);let a=!0,c=null,u=null;tx(t)?(u=function P7(t){return t[24]??function N7(t){const e=ex.pop()??Object.create(k7);return e.lView=t,e}(t)}(e),c=Wa(u)):null===function uv(){return vn}()?(a=!1,u=function O7(t){const e=t[24]??Object.create(V7);return e.lView=t,e}(e),c=Wa(u)):e[24]&&(_l(e[24]),e[24]=null);try{p0(e),function R0(t){return fe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&K1(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&Ep(e,g,null)}else{const g=t.preOrderHooks;null!==g&&wp(e,g,0,null),II(e,0)}if(function U7(t){for(let e=sN(t);null!==e;e=aN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)g0(n[r])}}(e),nx(e),ix(e,0),null!==t.contentQueries&&$N(t,e),d){const g=t.contentCheckHooks;null!==g&&Ep(e,g)}else{const g=t.contentHooks;null!==g&&wp(e,g,1),II(e,1)}!function B7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)bs(~i);else{const o=i,s=n[++r],a=n[++r];_q(s,o);const c=e[o];ze(24,c),a(2,c),ze(25,c)}}}finally{bs(-1)}}(t,e);const h=t.components;null!==h&&sx(e,h,0);const f=t.viewQuery;if(null!==f&&YI(2,f,r),d){const g=t.viewCheckHooks;null!==g&&Ep(e,g)}else{const g=t.viewHooks;null!==g&&wp(e,g,2),II(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}X1(e),e[2]&=-73}catch(d){throw sc(e),d}finally{null!==u&&(ml(u,c),a&&function x7(t){t.lView[24]!==t&&(t.lView=null,ex.push(t))}(u)),aI()}}function ix(t,e){for(let n=sN(t);null!==n;n=aN(n))for(let r=10;r<n.length;r++)ox(n[r],e)}function j7(t,e,n){ze(18);const r=jn(e,t);ox(r,n),ze(19,r[8])}function ox(t,e){Jv(t)&&ME(t,e)}function ME(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!Uf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)rx(r,t,r.template,t[8]);else if(8192&i){const a=he(null);try{nx(t),ix(t,1);const c=r.components;null!==c&&sx(t,c,1),X1(t)}finally{he(a)}}}function sx(t,e,n){for(let r=0;r<e.length;r++)j7(t,e[r],n)}function Rc(t,e){const n=D0()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=Ci(t);if(go(t)&&!r)return t;t=r}return null}function ax(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cx(t,e){const n=10+e;if(n<t.length)return t[n]}function Mc(t,e,n,r=!0){const i=e[1];if(function $7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],JM(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&ux(s,e);const a=e[18];null!==a&&a.insertView(t),Zv(e),e[2]|=128}(i,e,t,n),r){const s=Xp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function u7(t,e,n,r,i,o){r[0]=i,r[5]=e,eg(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function PE(t,e){const n=rd(t,e);return void 0!==n&&td(n[1],n),n}function rd(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&IE(i,r),e>0&&(t[n-1][4]=r[4]);const o=Jf(t,10+e);!function F1(t,e){U1(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ux(t,e){const n=t[9],r=e[3];(wt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class id{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return nd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Ti(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Un(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(rd(e,r),Jf(n,r))}this._attachedToViewContainer=!1}td(this._lView[1],this._lView)}onDestroy(e){ap(this._lView,e)}markForCheck(){Rc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Zv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,ag(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=go(this._lView),n=this._lView[16];null!==n&&!e&&IE(n,this._lView),U1(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;const n=go(this._lView),r=this._lView[16];null!==r&&!n&&ux(r,this._lView),Zv(this._lView)}}let cg=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=H7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=Dc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new id(o)}})();function H7(){return ug(ge(),V())}function ug(t,e){return 4&t.type?new cg(e,t,_c(t,e)):null}function ks(t,e,n,r,i){let o=t.data[e];if(null===o)o=function OE(t,e,n,r,i){const o=b0(),s=T0(),c=t.data[e]=function Z7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function I0(){return null!==fe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function J7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function mq(){return fe.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Rl(){const t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Si(o,!0),o}function Dx(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;Yl(e,r,!1),r=o,n++}}}let kK=class{},kx=class{};class OK{resolveComponentFactory(e){throw new j(917,!1)}}let _g=class{static NULL=new OK};class $E{}let Vs=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function VK(){const t=V(),n=jn(ge().index,t);return(wt(n)?n:t)[11]}()})(),LK=(()=>{class t{static \u0275prov=se({token:t,providedIn:"root",factory:()=>null})}return t})();const zE={};class Nc{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,zE,r);return i!==zE||n===zE?i:this.parentInjector.get(e,n,r)}}function vg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Tv(i,a):2==o&&(r=Tv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function re(t,e=0){const n=V();return null===n?Te(t,e):jP(ge(),n,ve(t),e)}function HK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Lx(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),Ux(e,o)}}function Fx(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ux(e,s)}}function Ux(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function jx(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||aE(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function GK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=_s(i.type)),s=new Ul(o,hr(i),re,null);t.blueprint[r]=s,n[r]=s,function WK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function KK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Zl(t,n,i.hostVars,We),i)}function QK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hr(e)&&(n[""]=t)}}function qE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=ks(c,t,n,r,wn(u,s));return o&&function Vx(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function zK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&hr(g)&&(c=!0,HK(t,n,f)),CI(Tp(n,e),t,g.type)}!function YK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Zl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=mc(n.mergedAttrs,g.hostAttrs),GK(t,n,e,h,g),QK(h,g,i),null!==s&&s.has(g)){const[I,w]=s.get(g);n.directiveToIndex.set(g.type,[h,I+n.directiveStart,w+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function qK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);Fx(0,e,o,r),Fx(1,e,o,r),jx(e,r,!0)}else Lx(0,e,i,r),Lx(1,e,i,r),jx(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function $K(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new j(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,wn(u,a),i),h.mergedAttrs=mc(h.mergedAttrs,h.attrs),null!==h.attrs&&vg(h,h.attrs,!1),null!==h.mergedAttrs&&vg(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function GE(t,e){(function DP(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),c0(e)&&t.queries.elementEnd(e)}function dt(t,e,n){return n!==We&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function gd(t,e,n){return function r(i){Rc(bi(t)?jn(t.index,e):e,5);const s=e[8];let a=$x(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=$x(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function $x(t,e,n,r){const i=he(null);try{return ze(6,e,n),!1!==n(r)}catch(o){return function RE(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(Zr,null)}catch{r=null}r?.(e)}(t,o),!1}finally{ze(7,e,n),he(i)}}function Hx(t,e,n,r,i,o,s,a){const c=rc(t);let u=!1,d=null;if(!r&&c&&(d=function tQ(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=$t(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function eQ(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||zx(r?I=>r(nn(I[t.index])):t.index,e,n,o,a,g,!1)}return u}function zx(t,e,n,r,i,o,s){const a=e.firstCreatePass?y0(e):null,c=_0(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function wg(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);zx(t.index,a,e,i,o,h,!0)}const To=Symbol("BINDING");class qx extends _g{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=$e(e);return new KE(n,this.ngModule)}}class KE extends kx{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function uQ(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&Kp.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function lQ(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function B8(t){return t.map(j8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ze(22);const a=he(null);try{const c=this.componentDef,u=function gQ(t,e,n,r){const i=t?["ng-version","20.3.16"]:function $8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Vr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[To].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[To].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=Ln("function"==typeof d?d:d.type);c.push(f)}return cE(0,null,function mQ(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function dQ(t,e,n){let r=e instanceof Fn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new Nc(n,r):n}(c,i||this.ngModule,e),h=function hQ(t){const e=t.get($E,null);if(null===e)throw new j(407,!1);return{rendererFactory:e,sanitizer:t.get(LK,null),changeDetectionScheduler:t.get(Ts,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function _7(t,e,n,r){const o=r.get(lW,!1)||n===Pi.ShadowDom,s=t.selectRootElement(e,o);return function y7(t){Q1(t)}(s),s}(f,r,c.encapsulation,d):function fQ(t,e){const n=function pQ(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return qp(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(Gx)||o?.some(A=>"function"!=typeof A&&A.bindings.some(Gx)),I=Wp(null,u,null,512|uE(c),null,null,h,f,d,null,null);I[27]=g,sI(I);let w=null;try{const A=qE(27,I,2,"#host",()=>u.directiveRegistry,!0,0);l1(f,g,A),er(g,I),tg(u,I,A),JI(u,A,I),GE(u,A),void 0!==n&&function yQ(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),w=jn(A.index,I),I[8]=w[8],sg(u,I,null)}catch(A){throw null!==w&&RI(w),RI(I),A}finally{ze(23),aI()}return new _Q(this.componentType,I,!!_)}finally{he(a)}}}function Gx(t){const e=t[To].kind;return"input"===e||"twoWay"===e}class _Q extends kK{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=oc(n[1],27),this.location=_c(this._tNode,n),this.instance=jn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new id(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;og(r,i[1],i,e,n),this.previousInputValues.set(e,n),Rc(jn(r.index,i),1)}get injector(){return new At(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let bg=(()=>class t{static __NG_ELEMENT_ID__=vQ})();function vQ(){return Qx(ge(),V())}const IQ=bg,Wx=class extends IQ{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _c(this._hostTNode,this._hostLView)}get injector(){return new At(this._hostTNode,this._hostLView)}get parentInjector(){const e=Cp(this._hostTNode,this._hostLView);if(wI(e)){const n=Bl(e,this._hostLView),r=jl(e);return new At(n[1].data[r+8],n)}return new At(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Kx(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,xs(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function Fl(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const w=n||{};u=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}const d=c?e:new KE($e(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(Fn,null);A&&(o=A)}$e(d.componentType??{});const I=d.create(h,i,null,o,s,a);return this.insertImpl(I.hostView,u,xs(this._hostTNode,null)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function lq(t){return Un(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new Wx(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Mc(s,i,o,r),e.attachToViewContainerRef(),JM(QE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Kx(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=rd(this._lContainer,n);r&&(Jf(QE(this._lContainer),n),td(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=rd(this._lContainer,n);return r&&null!=Jf(QE(this._lContainer),n)?new id(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Kx(t){return t[8]}function QE(t){return t[8]||(t[8]=[])}function Qx(t,e){let n;const r=e[t.index];return Un(r)?n=r:(n=ax(r,e,null,t),e[t.index]=n,lE(e,n)),Yx(n,e,t,r),new Wx(n,t,e)}let Yx=function Zx(t,e,n,r){if(t[7])return;let i;i=8&n.type?nn(r):function EQ(t,e){const n=t[11],r=n.createComment(""),i=$t(e,t),o=n.parentNode(i);return Rs(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class JE{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new JE(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZE{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new ZE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==rw(e,n).matches&&this.queries[n].setDirty()}}class Xx{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function DQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class XE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new XE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ew{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new ew(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,TQ(n,o)),this.matchTNodeWithReadOption(e,n,Sp(n,e,o,!1,!1))}else r===cg?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Sp(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Or||i===bg||i===cg&&4&n.type)this.addMatch(n.index,-2);else{const o=Sp(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function TQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function SQ(t,e,n,r){return-1===n?function CQ(t,e){return 11&t.type?_c(t,e):4&t.type?ug(t,e):null}(e,t):-2===n?function AQ(t,e,n){return n===Or?_c(e,t):n===cg?ug(e,t):n===bg?Qx(e,t):void 0}(t,e,r):$l(t,t[1],n,e)}function ek(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:SQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function tw(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ek(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&tw(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];tw(g[1],g,u,r)}}}}}return r}function rk(t,e,n,r){const i=Ie();if(i.firstCreatePass){const o=ge();(function ik(t,e,n){null===t.queries&&(t.queries=new XE),t.queries.track(new ew(e,n))})(i,new Xx(e,n,r),o.index),function RQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function tk(t,e,n){const r=new RG(!(4&~n));return function dq(t,e,n,r){const i=_0(e);i.push(n),t.firstCreatePass&&y0(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new ZE).queries.push(new JE(r))-1}(i,V(),n)}function rw(t,e){return t.queries.getByIndex(e)}function ok(t,e){const n=t[1],r=rw(n,e);return r.crossesNgTemplate?tw(n,t,e,[]):ek(n,t,r,e)}let kc=class{},lk=class{};class sw extends kc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new qx(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=Kr(e);this._bootstrapComponents=ti(o.bootstrap),this._r3Injector=F0(e,n,[{provide:kc,useValue:this},{provide:_g,useValue:this.componentFactoryResolver},...r],Yn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class dk extends lk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new sw(this.moduleType,e,[])}}class hk extends kc{injector;componentFactoryResolver=new qx(this);instance=null;constructor(e){super();const n=new ys([...e.providers,{provide:kc,useValue:this},{provide:_g,useValue:this.componentFactoryResolver}],e.parent||zv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function aw(t,e,n=null){return new hk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let UQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Uv(0,n.type),i=r.length>0?aw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=se({token:t,providedIn:"environment",factory:()=>new t(Te(Fn))})}return t})();function ri(t){return Ri(()=>{const e=pk(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Rp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(UQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Pi.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&Tn("NgStandalone"),gk(n);const r=t.dependencies;return n.directiveDefs=Cg(r,fk),n.pipeDefs=Cg(r,xr),n.id=function zQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function fk(t){return $e(t)||Ln(t)}function Tg(t){return Ri(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jQ(t,e){if(null==t)return Wr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Kp.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function BQ(t){if(null==t)return Wr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Re(t){return Ri(()=>{const e=pk(t);return gk(e),e})}function pk(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jQ(t.inputs,e),outputs:BQ(t.outputs),debugInfo:null}}function gk(t){t.features?.forEach(e=>e(t))}function Cg(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Ke(t){let e=function mk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(hr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=cw(t.inputs),s.declaredInputs=cw(t.declaredInputs),s.outputs=cw(t.outputs);const a=i.hostBindings;a&&QQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&WQ(t,c),u&&KQ(t,u),qQ(t,i),T6(t.outputs,i.outputs),hr(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Ke&&(n=!1)}}e=Object.getPrototypeOf(e)}!function GQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=mc(i.hostAttrs,n=mc(n,i.hostAttrs))}}(r)}function qQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function cw(t){return t===Wr?{}:t===at?[]:t}function WQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function KQ(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function QQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Us(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=ks(e,h,4,s||null,a||null),null!=u){const g=wn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function Ek(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=mc(t.mergedAttrs,t.attrs);const d=t.tView=cE(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Si(t,!1);const c=Tk(n,e,t,r);lp()&&TE(n,e,c,t),er(c,e);const u=ax(c,e,c,t);e[r+27]=u,lE(e,u)}(f,t,e,n,r,i,o,c),null!=u&&Ac(t,f,d),f}let Tk=function Ck(t,e,n,r){return Ml(!0),e[11].createComment("")};let Fk=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Xk=new G("");function kg(t){return!!t&&"function"==typeof t.then}function dJ(t){return!!t&&"function"==typeof t.subscribe}const eO=new G("");let tO=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(eO,{optional:!0})??[];injector=O(pr);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=Cr(this.injector,i);if(kg(o))n.push(o);else if(dJ(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nO=new G("");let ki=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Zr);afterRenderManager=O(N1);zonelessEnabled=O(H0);rootEffectScheduler=O(W0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(mo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(He(n=>!n))}constructor(){O(ed,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(Fn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=pr.NULL){return this._injector.get(Be).run(()=>{ze(10);const s=n instanceof kx;if(!this._injector.get(tO).done)throw new j(405,"");let c;c=s?n:this._injector.get(_g).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function fJ(t){return t.isBoundToModule}(c)?void 0:this._injector.get(kc),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(Xk,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Og(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),ze(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ze(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(fE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);const n=he(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,he(n),this.afterTick.next(),ze(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get($E,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)ze(14),this.synchronizeOnce(),ze(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||sp(i))&&(ag(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>sp(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Og(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(nO,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Og(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Og(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function fn(t,e,n,r){const i=V();return dt(i,Zn(),e)&&(Ie(),function T7(t,e,n,r,i,o){const s=$t(t,e);!function ng(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?me(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}(Qr(),i,t,e,n,r)),fn}typeof document<"u"&&document;class lZ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function Rw(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Mw(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function mO(t,e,n,r,i){if(Mw(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function _O(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class yO{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function Ce(t,e,n,r,i,o,s,a){Tn("NgControlFlow");const c=V(),u=Ie();return Us(c,u,t,e,n,r,i,wn(u.consts,o),256,s,a),Pw}function Pw(t,e,n,r,i,o,s,a){Tn("NgControlFlow");const c=V(),u=Ie();return Us(c,u,t,e,n,r,i,wn(u.consts,o),512,s,a),Pw}function Se(t,e){Tn("NgControlFlow");const n=V(),r=Zn(),i=n[r]!==We?n[r]:-1,o=-1!==i?qg(n,27+i):void 0;if(dt(n,r,t)){const a=he(null);try{if(void 0!==o&&PE(o,0),-1!==t){const c=27+t,u=qg(n,c),d=Nw(n[1],c),h=null;Mc(u,Dc(n,d,e,{dehydratedView:h}),0,xs(d,h))}}finally{he(a)}}else if(void 0!==o){const a=cx(o,0);void 0!==a&&(a[8]=e)}}class hZ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function zg(t){return t}function wd(t,e){return e}class fZ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function zt(t,e,n,r,i,o,s,a,c,u,d,h,f){Tn("NgControlFlow");const g=V(),_=Ie(),I=void 0!==c,w=V(),A=a?s.bind(w[15][8]):s,D=new fZ(I,A);w[27+t]=D,Us(g,_,t+1,e,n,r,i,wn(_.consts,o),256),I&&Us(g,_,t+2,c,u,d,h,wn(_.consts,f),512)}class pZ extends lZ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Mc(this.lContainer,n,e,xs(this.templateTNode,r)),function gZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function a7(t,e){const n=t.get(Jp);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Ps.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function mZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function _Z(t,e){return rd(t,e)}(this.lContainer,e)}create(e,n){const i=Dc(this.hostLView,this.templateTNode,new hZ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){td(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function yZ(t,e){return cx(t,e)}(this.lContainer,e)}}function qt(t){const e=he(null),n=ln();try{const r=V(),i=r[1],o=r[n],s=n+1,a=qg(r,s);if(void 0===o.liveCollection){const u=Nw(i,s);o.liveCollection=new pZ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function dZ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=Rw(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=Rw(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const I=n(o,u),w=n(s,f),A=n(o,d);if(Object.is(A,w)){const D=n(c,g);Object.is(D,I)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new yO,i??=_O(t,o,s,n),Mw(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(I,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)mO(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=Rw(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new yO,i??=_O(t,o,s,n);const g=n(o,h);if(Mw(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)mO(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Zn(),d=0===c.length;if(dt(r,u,d)){const h=n+2,f=qg(r,h);if(d){const g=Nw(i,h),_=null;Mc(f,Dc(r,g,void 0,{dehydratedView:_}),0,xs(g,_))}else i.firstUpdatePass&&function pg(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):Dx(o,r);t[6]=i}(f),PE(f,0)}}}finally{he(e)}}function qg(t,e){return t[e]}function Nw(t,e){return oc(t,e)}function xt(t,e,n){const r=V();return dt(r,Zn(),e)&&(Ie(),SE(Qr(),r,t,e,r[11],n)),xt}function xw(t,e,n,r,i){og(e,t,n,i?"class":"style",r)}function le(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?qE(s,i,2,e,DE,function nI(){return fe.bindingsEnabled}(),n,r):o.data[s];if(rg(a,i,t,e,kw),rc(a)){const c=i[1];tg(c,i,a),JI(c,a,i)}return null!=r&&Ac(i,a),le}function pe(){const t=Ie(),n=ig(ge());return t.firstCreatePass&&GE(t,n),E0(n)&&w0(),v0(),null!=n.classesWithoutHost&&function uG(t){return!!(8&t.flags)}(n)&&xw(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function lG(t){return!!(16&t.flags)}(n)&&xw(t,n,V(),n.stylesWithoutHost,!1),pe}function kt(t,e,n,r){return le(t,e,n,r),pe(),kt}function H(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function Bx(t,e,n,r,i,o){const s=e.consts,c=ks(e,t,n,r,wn(s,i));if(c.mergedAttrs=mc(c.mergedAttrs,c.attrs),null!=o){const u=wn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&vg(c,c.attrs,!1),null!==c.mergedAttrs&&vg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return rg(a,i,t,e,kw),null!=r&&Ac(i,a),H}function z(){return E0(ig(ge()))&&w0(),v0(),z}function Gt(t,e,n,r){return H(t,e,n,r),z(),Gt}let kw=(t,e,n,r,i)=>(Ml(!0),qp(e[11],r,function bq(){return fe.lFrame.currentNamespace}()));function rr(){return V()}function ir(t,e,n){const r=V();return dt(r,Zn(),e)&&(Ie(),AE(Qr(),r,t,e,r[11],n)),ir}const Kg="en-US";let CO=Kg;function ct(t,e,n){const r=V(),i=Ie(),o=ge();return function jw(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=gd(r,e,o),Hx(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=gd(r,e,o),wg(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=gd(r,e,o),wg(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),ct}function Ot(t,e,n){const r=V(),i=Ie(),o=ge();return(3&o.type||n)&&Hx(o,i,r,n,r[11],t,e,gd(o,r,e)),Ot}function Z(t=1){return function Iq(t){return(fe.lFrame.contextLView=function m0(t,e){for(;t>0;)e=e[14],t--;return e}(t,fe.lFrame.contextLView))[8]}(t)}function Bw(t){return function ws(t,e){return t[e]}(function S0(){return fe.lFrame.contextLView}(),27+t)}function Zg(t,e){return t<<17|e<<2}function Ws(t){return t>>17&32767}function $w(t){return 2|t}function zc(t){return(131068&t)>>2}function Hw(t,e){return-131069&t|e<<2}function zw(t){return 1|t}function WO(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Ws(i):zc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];TX(t[s],e)&&(a=!0,t[s+1]=r?zw(u):$w(u)),s=r?Ws(u):zc(u)}a&&(t[n+1]=r?$w(i):zw(i))}function TX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Cl(t,e)>=0}function $n(t,e){return function tV(t,e,n,r){const i=V(),o=Ie(),s=Di(2);o.firstUpdatePass&&function iV(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ln()],s=function rV(t,e){return e>=t.expandoStartIndex}(t,n);(function cV(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function OX(t,e,n,r){const i=function iI(t){const e=fe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Rd(n=qw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qw(i,t,e,n,r),null===o){let c=function VX(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==zc(r))return t[Ws(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=qw(null,t,e,c[1],r),c=Rd(c,e.attrs,r),function LX(t,e,n,r){t[Ws(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function FX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Rd(r,t[o].hostAttrs,n);return Rd(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function wX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ws(s),c=zc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||Cl(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Ws(t[a+1]);t[r+1]=Zg(f,a),0!==f&&(t[f+1]=Hw(t[f+1],r)),t[a+1]=function IX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Zg(a,0),0!==a&&(t[a+1]=Hw(t[a+1],r)),a=r;else t[r+1]=Zg(c,0),0===a?a=r:t[c+1]=Hw(t[c+1],r),c=r;u&&(t[r+1]=$w(t[r+1])),WO(t,d,r,!0),WO(t,d,r,!1),function bX(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Cl(o,e)>=0&&(n[r+1]=zw(n[r+1]))}(e,d,t,r,o),s=Zg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==We&&dt(i,s,e)&&function sV(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function EX(t){return!(1&~t)}(u)?aV(c,e,n,i,zc(u),s):void 0;Xg(d)||(Xg(o)||function vX(t){return!(2&~t)}(u)&&(o=aV(c,null,n,i,a,s)),function m7(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ms.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ms.Important),t.setStyle(n,r,i,o))}}(r,s,ic(ln(),n),i,o))}(o,o.data[ln()],i,i[11],t,i[s+1]=function $X(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Yn(wo(t)))),t}(e,n),r,s)}(t,e,null,!0),$n}function qw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Rd(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Rd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xf(t,s,!!n||e[++o]))}return void 0===t?null:t}function aV(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===We&&(f=h?at:void 0);let g=h?Ov(f,r):d===r?f:void 0;if(u&&!Xg(g)&&(g=Ov(c,r)),Xg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Ws(_):zc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Ov(c,r))}return a}function Xg(t){return void 0!==t}function Y(t,e=""){const n=V(),r=Ie(),i=t+27,o=r.firstCreatePass?ks(r,i,1,e,null):r.data[i],s=uV(r,n,o,e,t);n[i]=s,lp()&&TE(r,n,s,o),Si(o,!1)}let uV=(t,e,n,r,i)=>(Ml(!0),function oE(t,e){return t.createText(e)}(e[11],r));function hV(t,e,n,r,i,o=""){const a=function Fs(t,e,n,r){const i=dt(t,e,n);return dt(t,e+1,r)||i}(t,function Ai(){return fe.lFrame.bindingIndex}(),n,i);return Di(2),a?e+me(n)+r+me(i)+o:We}function ht(t){return Oi("",t),ht}function Oi(t,e,n){const r=V(),i=function dV(t,e,n,r=""){return dt(t,Zn(),n)?e+me(n)+r:We}(r,t,e,n);return i!==We&&Vi(r,ln(),i),Oi}function Gc(t,e,n,r,i){const o=V(),s=hV(o,t,e,n,r,i);return s!==We&&Vi(o,ln(),s),Gc}function Vi(t,e,n){const r=ic(e,t);!function s1(t,e,n){t.setValue(e,n)}(t[11],r,n)}function Gw(t,e,n,r,i){if(t=ve(t),Array.isArray(t))for(let o=0;o<t.length;o++)Gw(t[o],e,n,r,i);else{const o=Ie(),s=V(),a=ge();let c=Ii(t)?t:ve(t.provide);const u=s0(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Ii(t)||!t.multi){const g=new Ul(u,i,re,null),_=Kw(c,e,i?d:d+f,h);-1===_?(CI(Tp(a,s),o,c),Ww(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=Kw(c,e,d+f,h),_=Kw(c,e,d,d+f),w=_>=0&&n[_];if(i&&!w||!i&&!(g>=0&&n[g])){CI(Tp(a,s),o,c);const A=function aee(t,e,n,r,i){const s=new Ul(t,n,re,null);return s.multi=[],s.index=e,s.componentProviders=0,MV(s,i,r&&!n),s}(i?see:oee,n.length,i,r,u);!i&&w&&(n[_].providerFactory=A),Ww(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else Ww(o,t,g>-1?g:_,MV(n[i?_:g],u,!i&&r));!i&&r&&w&&n[_].componentProviders++}}}function Ww(t,e,n,r){const i=Ii(e),o=function i0(t){return!!t.useClass}(e);if(i||o){const c=(o?ve(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function MV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oee(t,e,n,r,i){return Qw(this.multi,[])}function see(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=$l(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),Qw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Qw(o,s);return s}function Qw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function _t(t,e=[]){return n=>{n.providersResolver=(r,i)=>function iee(t,e,n){const r=Ie();if(r.firstCreatePass){const i=hr(t);Gw(n,r.data,r.blueprint,i,!0),Gw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function Yw(t,e,n){const r=function Bn(){const t=fe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===We?function ni(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function pd(t,e){return t[e]}(i,r)}class tte{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let nte=(()=>{class t{compileModuleSync(n){return new dk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=ti(Kr(n).declarations).reduce((s,a)=>{const c=$e(a);return c&&s.push(new KE(c)),s},[]);return new tte(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ite=(()=>{class t{zone=O(Be);changeDetectionScheduler=O(Ts);applicationRef=O(ki);applicationErrorHandler=O(Zr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Be({...nb(),scheduleInRootZone:n}),[{provide:Be,useFactory:t},{provide:uo,multi:!0,useFactory:()=>{const r=O(ite,{optional:!0});return()=>r.initialize()}},{provide:uo,multi:!0,useFactory:()=>{const r=O(ste);return()=>{r.initialize()}}},!0===e?{provide:z0,useValue:!0}:[],{provide:q0,useValue:n??S1},{provide:Zr,useFactory:()=>{const r=O(Be),i=O(Fn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(cc),o.handleError(s))})}}}]}function nb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let ste=(()=>{class t{subscription=new Vn;initialized=!1;zone=O(Be);pendingTasks=O(mo);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Be.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ib=(()=>{class t{applicationErrorHandler=O(Zr);appRef=O(ki);taskService=O(mo);ngZone=O(Be);zonelessEnabled=O(H0);tracing=O(ed,{optional:!0});disableScheduling=O(z0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Vn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(q0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _E||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?D1:A1;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,D1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nL=new G("",{providedIn:"root",factory:()=>O(nL,{optional:!0,skipSelf:!0})||function ate(){return typeof $localize<"u"&&$localize.locale||Kg}()}),lm=Symbol("InputSignalNode#UNSET"),FL={...fv,transformFn:void 0,applyValueToInputSignal(t,e){Bf(t,e)}};function UL(t,e){const n=Object.create(FL);function r(){if(pl(n),n.value===lm)throw new j(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[en]=n,r}class Jne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ap(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function jL(t,e){return UL(t,e)}new G("").__NG_ELEMENT_ID__=t=>{const e=ge();if(null===e)throw new j(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new j(204,!1)};const dm=(jL.required=function Xne(t){return UL(lm,t)},jL),hm=new G(""),ire=new G("");function Od(t){return!t.moduleRef}let Jc=null;let pm=(()=>class t{static __NG_ELEMENT_ID__=lre})();function lre(t){return function dre(t,e,n){if(bi(t)&&!n){const r=jn(t.index,e);return new id(r,r)}return 175&t.type?new id(e[15],e):null}(ge(),V(),!(16&~t))}function Ire(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ze(8);try{const o=i?.injector??function ure(t=[]){if(Jc)return Jc;const e=function QL(t=[],e){return pr.create({name:e,providers:[{provide:$v,useValue:"platform"},{provide:hm,useValue:new Set([()=>Jc=null])},...t]})}(t);return Jc=e,function hJ(){!function a6(t){NM=t}(()=>{throw new j(600,"")})}(),function YL(t){const e=t.get(gN,null);Cr(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[tb({}),{provide:Ts,useExisting:ib},j0,...n||[]];return function qL(t){const e=Od(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Be);return n.run(()=>{Od(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Zr);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Od(t)){const o=()=>e.destroy(),s=t.platformInjector.get(hm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(hm);s.add(o),t.moduleRef.onDestroy(()=>{Og(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function sre(t,e,n){try{const r=n();return kg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(mo),s=o.add(),a=e.get(tO);return a.runInitializers(),a.donePromise.then(()=>{if(function DZ(t){"string"==typeof t&&(CO=t.toLowerCase().replace(/_/g,"-"))}(e.get(nL,Kg)||Kg),!e.get(ire,!0))return Od(t)?e.get(ki):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Od(t)){const d=e.get(ki);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new hk({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ze(9)}}function Zc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class IF{_doc;constructor(e){this._doc=e}manager}let Ib=(()=>{class t extends IF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Te(kr))};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})();const Eb=new G("");let EF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof Ib));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof Ib);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Te(Eb),Te(Be))};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})();const wb="ng-app-id";function wF(t){for(const e of t)e.remove()}function bF(t,e){const n=e.createElement("style");return n.textContent=t,n}function bb(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let TF=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Wre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${wb}="${e}"],link[${wb}="${e}"]`);if(i)for(const o of i)o.removeAttribute(wb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,bF);r?.forEach(i=>this.addUsage(i,this.external,bb))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(wF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])wF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,bF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,bb(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Te(kr),Te(ql),Te(_N,8),Te(mN))};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})();const Tb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cb=/%COMP%/g,Xre=new G("",{providedIn:"root",factory:()=>!0});function SF(t,e){return e.map(n=>n.replace(Cb,t))}let AF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Sb(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof RF?i.applyToHost(n):i instanceof Ab&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Pi.Emulated:o=new RF(c,u,r,this.appId,d,s,a,h,f);break;case Pi.ShadowDom:return new rie(c,u,n,r,s,a,this.nonce,h,f);default:o=new Ab(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Te(EF),Te(TF),Te(ql),Te(Xre),Te(kr),Te(Be),Te(_N),Te(ed,8))};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})();class Sb{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Tb[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(DF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(DF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Tb[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Tb[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ms.DashCase|Ms.Important)?e.style.setProperty(n,r,i&Ms.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ms.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=_o().getGlobalEventTarget(this.doc,e)))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function DF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class rie extends Sb{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=SF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=bb(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ab extends Sb{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?SF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Ps.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class RF extends Ab{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function eie(t){return"_ngcontent-%COMP%".replace(Cb,t)}(d),this.hostAttr=function tie(t){return"_nghost-%COMP%".replace(Cb,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class Db extends Rq{supportsDOMEvents=!0;static makeCurrent(){!function Dq(t){K0??=t}(new Db)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function oie(){return Ld=Ld||document.head.querySelector("base"),Ld?Ld.getAttribute("href"):null}();return null==n?null:function sie(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Ld=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Vq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ld=null,cie=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})();const MF=["alt","control","meta","shift"],uie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lie={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function PF(t){return{appProviders:[...yie,...t?.providers??[]],platformProviders:mie}}const mie=[{provide:mN,useValue:"browser"},{provide:gN,useValue:function fie(){Db.makeCurrent()},multi:!0},{provide:kr,useFactory:function gie(){return function tW(t){NI=t}(document),document}}],yie=[{provide:$v,useValue:"root"},{provide:cc,useFactory:function pie(){return new cc}},{provide:Eb,useClass:Ib,multi:!0,deps:[kr]},{provide:Eb,useClass:(()=>{class t extends IF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_o().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),MF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=uie[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MF.forEach(s=>{s!==i&&(0,lie[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(Te(kr))};static \u0275prov=se({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[kr]},AF,TF,EF,{provide:$E,useExisting:AF},{provide:class Lq{},useClass:cie},[]],bie={...Ga,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function yt(t){return function wie(t){const e=he(null);try{return t()}finally{he(e)}}(t)}function rt(t,e){return function i6(t,e){const n=Object.create(o6);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(gl(n),pl(n),n.value===ao)throw n.error;return n.value};return r[en]=n,r}(t,e?.equal)}class Pie{[en];constructor(e){this[en]=e}destroy(){this[en].destroy()}}const VF={...bie,cleanupFns:void 0,zone:null,onDestroyFn:Pl,run(){const t=cp(!1);try{!function Tie(t){if(t.dirty=!1,t.version>0&&!Uf(t))return;t.version++;const e=Wa(t);try{t.cleanup(),t.fn()}finally{ml(t,e)}}(this)}finally{cp(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=he(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],he(t)}}},Nie={...VF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){_l(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},xie={...VF,consumerMarkedDirty(){this.view[2]|=8192,sc(this.view),this.notifier.notify(13)},destroy(){_l(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function LF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function vm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Ro(t){return this instanceof Ro?(this.v=t,this):new Ro(t)}function qF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function kb(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const GF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function WF(t){return lt(t?.then)}function KF(t){return lt(t[bv])}function QF(t){return Symbol.asyncIterator&&lt(t?.[Symbol.asyncIterator])}function YF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const JF=function moe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ZF(t){return lt(t?.[JF])}function XF(t){return function zF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(I){return new Promise(function(w,A){o.push([g,I,w,A])>1||c(g,I)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof Ro?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(I){f(o[0][3],I)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Ro(n.read());if(i)return yield Ro(void 0);yield yield Ro(r)}}finally{n.releaseLock()}})}function e2(t){return lt(t?.getReader)}function ii(t){if(t instanceof jt)return t;if(null!=t){if(KF(t))return function _oe(t){return new jt(e=>{const n=t[bv]();if(lt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(GF(t))return function yoe(t){return new jt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(WF(t))return function voe(t){return new jt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,FM)})}(t);if(QF(t))return t2(t);if(ZF(t))return function Ioe(t){return new jt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(e2(t))return function Eoe(t){return t2(XF(t))}(t)}throw YF(t)}function t2(t){return new jt(e=>{(function woe(t,e){var n,r,i,o;return function $F(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=qF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Li(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function n2(t,e=0){return dn((n,r)=>{n.subscribe(Jt(r,i=>Li(r,t,()=>r.next(i),e),()=>Li(r,t,()=>r.complete(),e),i=>Li(r,t,()=>r.error(i),e)))})}function r2(t,e=0){return dn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function i2(t,e){if(!t)throw new Error("Iterable cannot be null");return new jt(n=>{Li(n,e,()=>{const r=t[Symbol.asyncIterator]();Li(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Cn(t,e){return e?function Doe(t,e){if(null!=t){if(KF(t))return function boe(t,e){return ii(t).pipe(r2(e),n2(e))}(t,e);if(GF(t))return function Coe(t,e){return new jt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(WF(t))return function Toe(t,e){return ii(t).pipe(r2(e),n2(e))}(t,e);if(QF(t))return i2(t,e);if(ZF(t))return function Soe(t,e){return new jt(n=>{let r;return Li(n,e,()=>{r=t[JF](),Li(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>lt(r?.return)&&r.return()})}(t,e);if(e2(t))return function Aoe(t,e){return i2(XF(t),e)}(t,e)}throw YF(t)}(t,e):ii(t)}function Vb(t){return t[t.length-1]}function o2(t){return lt(Vb(t))?t.pop():void 0}function Im(t){return function Roe(t){return t&&lt(t.schedule)}(Vb(t))?t.pop():void 0}function ye(...t){return Cn(t,Im(t))}const Em=pv(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Moe}=Array,{getPrototypeOf:Poe,prototype:Noe,keys:xoe}=Object;function s2(t){if(1===t.length){const e=t[0];if(Moe(e))return{args:e,keys:null};if(function koe(t){return t&&"object"==typeof t&&Poe(t)===Noe}(e)){const n=xoe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Ooe}=Array;function a2(t){return He(e=>function Voe(t,e){return Ooe(e)?t(...e):t(e)}(t,e))}function c2(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function u2(...t){const e=Im(t),n=o2(t),{args:r,keys:i}=s2(t);if(0===r.length)return Cn([],e);const o=new jt(function Loe(t,e,n=fs){return r=>{l2(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)l2(e,()=>{const u=Cn(t[c],e);let d=!1;u.subscribe(Jt(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>c2(i,s):fs));return n?o.pipe(a2(n)):o}function l2(t,e,n){t?Li(n,t,e):e()}function Hn(t,e,n=1/0){return lt(e)?Hn((r,i)=>He((o,s)=>e(r,o,i,s))(ii(t(r,i))),n):("number"==typeof e&&(n=e),dn((r,i)=>function Foe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=I=>u<r?_(I):c.push(I),_=I=>{o&&e.next(I),u++;let w=!1;ii(n(I,d++)).subscribe(Jt(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){const A=c.shift();s?Li(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe(Jt(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function Lb(t=1/0){return Hn(fs,t)}function Fb(...t){return function Uoe(){return Lb(1)}()(Cn(t,Im(t)))}function Ub(t){return new jt(e=>{ii(t()).subscribe(e)})}function wm(t,e){const n=lt(t)?t:()=>t,r=i=>i.error(n());return new jt(e?i=>e.schedule(r,0,i):r)}const Lr=new jt(t=>t.complete());function jb(){return dn((t,e)=>{let n=null;t._refCount++;const r=Jt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class d2 extends jt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,dP(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Vn;const n=this.getSubject();e.add(this.source.subscribe(Jt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Vn.EMPTY)}return e}refCount(){return jb()(this)}}function Rr(t,e){return dn((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Jt(r,c=>{i?.unsubscribe();let u=0;const d=o++;ii(t(c,d)).subscribe(i=Jt(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xc(t){return t<=0?()=>Lr:dn((e,n)=>{let r=0;e.subscribe(Jt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Mo(t,e){return dn((n,r)=>{let i=0;n.subscribe(Jt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function bm(t){return dn((e,n)=>{let r=!1;e.subscribe(Jt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function h2(t=Hoe){return dn((e,n)=>{let r=!1;e.subscribe(Jt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Hoe(){return new Em}function Xs(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mo((i,o)=>t(i,o,r)):fs,Xc(1),n?bm(e):h2(()=>new Em))}function Tm(t,e){return lt(e)?Hn(t,e,1):Hn(t,1)}function Sn(t,e,n){const r=lt(t)||e||n?{next:t,error:e,complete:n}:t;return r?dn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Jt(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):fs}function eu(t){return dn((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Jt(n,void 0,void 0,s=>{o=ii(t(s,eu(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Bb(t){return t<=0?()=>Lr:dn((e,n)=>{let r=[];e.subscribe(Jt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $b(t){return dn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function f2(t){return dn((e,n)=>{ii(t).subscribe(Jt(n,()=>n.complete(),_v)),!n.closed&&e.subscribe(n)})}let nse=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Te(kr))};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Ee="primary",jd=Symbol("RouteTitle");class use{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function tu(t){return new use(t)}function lse(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function oi(t,e){const n=t?Hb(t):void 0,r=e?Hb(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!w2(t[i],e[i]))return!1;return!0}function Hb(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function w2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function b2(t){return t.length>0?t[t.length-1]:null}function Fi(t){return function zie(t){return!!t&&(t instanceof jt||lt(t.lift)&&lt(t.subscribe))}(t)?t:kg(t)?Cn(Promise.resolve(t)):ye(t)}const hse={exact:function S2(t,e,n){if(!ta(t.segments,e.segments)||!Cm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!S2(t.children[r],e.children[r],n))return!1;return!0},subset:A2},T2={exact:function fse(t,e){return oi(t,e)},subset:function pse(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>w2(t[n],e[n]))},ignored:()=>!0};function C2(t,e,n){return hse[n.paths](t.root,e.root,n.matrixParams)&&T2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function A2(t,e,n){return D2(t,e,e.segments,n)}function D2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!ta(i,n)||e.hasChildren()||!Cm(i,n,r))}if(t.segments.length===n.length){if(!ta(t.segments,n)||!Cm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!A2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(ta(t.segments,i)&&Cm(t.segments,i,r)&&t.children[Ee])&&D2(t.children[Ee],e,o,r)}}function Cm(t,e,n){return e.every((r,i)=>T2[n](t[i].parameters,r.parameters))}class ea{root;queryParams;fragment;_queryParamMap;constructor(e=new et([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tu(this.queryParams),this._queryParamMap}toString(){return _se.serialize(this)}}class et{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dm(this)}}class Bd{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=tu(this.parameters),this._parameterMap}toString(){return P2(this)}}function ta(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Sm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>new Am,providedIn:"root"})}return t})();class Am{parse(e){const n=new Dse(e);return new ea(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${$d(e.root,!0)}`,r=function Ise(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Rm(n)}=${Rm(i)}`).join("&"):`${Rm(n)}=${Rm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function yse(t){return encodeURI(t)}(e.fragment)}`:""}`}}const _se=new Am;function Dm(t){return t.segments.map(e=>P2(e)).join("/")}function $d(t,e){if(!t.hasChildren())return Dm(t);if(e){const n=t.children[Ee]?$d(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${$d(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function mse(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ee?[$d(t.children[Ee],!1)]:[`${i}:${$d(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ee]?`${Dm(t)}/${n[0]}`:`${Dm(t)}/(${n.join("//")})`}}function R2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rm(t){return R2(t).replace(/%3B/gi,";")}function zb(t){return R2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mm(t){return decodeURIComponent(t)}function M2(t){return Mm(t.replace(/\+/g,"%20"))}function P2(t){return`${zb(t.path)}${function vse(t){return Object.entries(t).map(([e,n])=>`;${zb(e)}=${zb(n)}`).join("")}(t.parameters)}`}const Ese=/^[^\/()?;#]+/;function qb(t){const e=t.match(Ese);return e?e[0]:""}const wse=/^[^\/()?;=#]+/,Tse=/^[^=?&#]+/,Sse=/^[^&#]+/;class Dse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new et(e,n)),r}parseSegment(){const e=qb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Bd(Mm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function bse(t){const e=t.match(wse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=qb(this.remaining);i&&(r=i,this.capture(r))}e[Mm(n)]=Mm(r)}parseQueryParam(e){const n=function Cse(t){const e=t.match(Tse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Ase(t){const e=t.match(Sse);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=M2(n),o=M2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=qb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);const s=this.parseChildren();n[o??Ee]=1===Object.keys(s).length&&s[Ee]?s[Ee]:new et([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}}function N2(t){return t.segments.length>0?new et([],{[Ee]:t}):t}function x2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=x2(i);if(r===Ee&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Rse(t){if(1===t.numberOfChildren&&t.children[Ee]){const e=t.children[Ee];return new et(t.segments.concat(e.segments),e.children)}return t}(new et(t.segments,e))}function na(t){return t instanceof ea}function k2(t){let e;const i=N2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new et(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function O2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Gb(i,i,i,n,r);const o=function Pse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new L2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new L2(n,e,r)}(e);if(o.toRoot())return Gb(i,i,new et([],{}),n,r);const s=function Nse(t,e,n){if(t.isAbsolute)return new Nm(e,!0,0);if(!n)return new Nm(e,!1,NaN);if(null===n.parent)return new Nm(n,!0,0);const r=Pm(t.commands[0])?0:1;return function xse(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Nm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?zd(s.segmentGroup,s.index,o.commands):F2(s.segmentGroup,s.index,o.commands);return Gb(i,s.segmentGroup,a,n,r)}function Pm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Hd(t){return"object"==typeof t&&null!=t&&t.outlets}function Gb(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:V2(t,e,n);const a=N2(x2(s));return new ea(a,o,i)}function V2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:V2(o,e,n)}),new et(t.segments,r)}class L2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Pm(r[0]))throw new j(4003,!1);const i=r.find(Hd);if(i&&i!==b2(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function F2(t,e,n){if(t??=new et([],{}),0===t.segments.length&&t.hasChildren())return zd(t,e,n);const r=function Ose(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Hd(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!j2(c,u,s))return o;r+=2}else{if(!j2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new et(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new et(t.segments.slice(r.pathIndex),t.children),zd(o,0,i)}return r.match&&0===i.length?new et(t.segments,{}):r.match&&!t.hasChildren()?Wb(t,e,n):r.match?zd(t,0,i):Wb(t,e,n)}function zd(t,e,n){if(0===n.length)return new et(t.segments,{});{const r=function kse(t){return Hd(t[0])?t[0].outlets:{[Ee]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&1===t.numberOfChildren&&0===t.children[Ee].segments.length){const o=zd(t.children[Ee],e,n);return new et(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=F2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new et(t.segments,i)}}function Wb(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Hd(o)){const c=Vse(o.outlets);return new et(r,c)}if(0===i&&Pm(n[0])){r.push(new Bd(t.segments[e].path,U2(n[0]))),i++;continue}const s=Hd(o)?o.outlets[Ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Pm(a)?(r.push(new Bd(s,U2(a))),i+=2):(r.push(new Bd(s,{})),i++)}return new et(r,{})}function Vse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Wb(new et([],{}),0,r))}),e}function U2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function j2(t,e,n){return t==n.path&&oi(e,n.parameters)}const xm="imperative";var ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ke||{});class si{id;url;constructor(e,n){this.id=e,this.url=n}}class Kb extends si{type=ke.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class No extends si{urlAfterRedirects;type=ke.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var sr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(sr||{}),Qb=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Qb||{});class ra extends si{reason;code;type=ke.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qd extends si{reason;code;type=ke.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class Yb extends si{error;target;type=ke.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class B2 extends si{urlAfterRedirects;state;type=ke.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lse extends si{urlAfterRedirects;state;type=ke.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fse extends si{urlAfterRedirects;state;shouldActivate;type=ke.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Use extends si{urlAfterRedirects;state;type=ke.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jse extends si{urlAfterRedirects;state;type=ke.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bse{route;type=ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $se{route;type=ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hse{snapshot;type=ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zse{snapshot;type=ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qse{snapshot;type=ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gse{snapshot;type=ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jb{}class km{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Fr(t){return t.outlet||Ee}function nu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Xse{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return nu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Gd(this.rootInjector)}}let Gd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xse(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Te(Fn))};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class $2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Zb(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Zb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Xb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xb(e,this._root).map(n=>n.value)}}function Zb(t,e){if(t===e.value)return e;for(const n of e.children){const r=Zb(t,n);if(r)return r}return null}function Xb(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Xb(t,n);if(r.length)return r.unshift(e),r}return[]}class Ur{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function ru(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class H2 extends $2{snapshot;constructor(e,n){super(e),this.snapshot=n,eT(this,e)}toString(){return this.snapshot.toString()}}function z2(t){const e=function eae(t){const o=new Vm([],{},{},"",{},Ee,t,null,{});return new q2("",new Ur(o,[]))}(t),n=new br([new Bd("",{})]),r=new br({}),i=new br({}),o=new br({}),s=new br(""),a=new Ui(n,r,o,s,i,Ee,t,e.root);return a.snapshot=e.root,new H2(new Ur(a,[]),e)}class Ui{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(He(u=>u[jd]))??ye(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(He(e=>tu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(He(e=>tu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Om(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&W2(i)&&(r.resolve[jd]=i.title),r}class Vm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[jd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tu(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class q2 extends $2{url;constructor(e,n){super(n),this.url=e,eT(this,n)}toString(){return G2(this._root)}}function eT(t,e){e.value._routerState=t,e.children.forEach(n=>eT(t,n))}function G2(t){const e=t.children.length>0?` { ${t.children.map(G2).join(", ")} } `:"";return`${t.value}${e}`}function tT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,oi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),oi(e.params,n.params)||t.paramsSubject.next(n.params),function dse(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!oi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),oi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nT(t,e){const n=oi(t.params,e.params)&&function gse(t,e){return ta(t,e)&&t.every((n,r)=>oi(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||nT(t.parent,e.parent))}function W2(t){return"string"==typeof t.title||null===t.title}const tae=new G("");let rT=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new Ht;deactivateEvents=new Ht;attachEvents=new Ht;detachEvents=new Ht;routerOutletData=dm();parentContexts=O(Gd);location=O(bg);changeDetector=O(pm);inputBinder=O(iT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nae(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Re({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Mi]})}return t})();class nae{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Ui?this.route:e===Gd?this.childContexts:e===tae?this.outletData:this.parent.get(e,n)}}const iT=new G("");let K2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ri({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&kt(0,"router-outlet")},dependencies:[rT],encapsulation:2})}return t})();function oT(t){const e=t.children&&t.children.map(oT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=K2),n}function Wd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function iae(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wd(t,r,i);return Wd(t,r)})}(t,e,n);return new Ur(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wd(t,a)),s}}const r=function oae(t){return new Ui(new br(t.url),new br(t.params),new br(t.queryParams),new br(t.fragment),new br(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Wd(t,o));return new Ur(r,i)}}class sT{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const Q2="ngNavigationCancelingError";function Lm(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Y2(!1,sr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Y2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[Q2]=!0,n.cancellationCode=e,n}function J2(t){return!!t&&t[Q2]}class cae{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=ru(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ru(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ru(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=ru(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Gse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(tT(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class Z2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Fm{component;route;constructor(e,n){this.component=e,this.route=n}}function uae(t,e,n){const r=t._root;return Kd(r,e?e._root:null,n,[r.value])}function iu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function P6(t){return null!==Wf(t)}(t)?e.get(t):t:r}function Kd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ru(e);return t.children.forEach(s=>{(function dae(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function hae(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ta(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ta(t.url,e.url)||!oi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nT(t,e)||!oi(t.queryParams,e.queryParams);default:return!nT(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Z2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Kd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fm(a.outlet.component,s))}else s&&Qd(e,a,i),i.canActivateChecks.push(new Z2(r)),Kd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qd(a,n.getContext(s),i)),i}function Qd(t,e,n){const r=ru(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Qd(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Fm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Yd(t){return"function"==typeof t}function X2(t){return t instanceof Em||"EmptyError"===t?.name}const Um=Symbol("INITIAL_VALUE");function ou(){return Rr(t=>u2(t.map(e=>e.pipe(Xc(1),function $oe(...t){const e=Im(t);return dn((n,r)=>{(e?Fb(t,n,e):Fb(t,n)).subscribe(r)})}(Um)))).pipe(He(e=>{for(const n of e)if(!0!==n){if(n===Um)return Um;if(!1===n||vae(n))return n}return!0}),Mo(e=>e!==Um),Xc(1)))}function vae(t){return na(t)||t instanceof sT}function eU(t){return function v6(...t){return UM(t)}(Sn(e=>{if("boolean"!=typeof e)throw Lm(0,e)}),He(e=>!0===e))}class aT{segmentGroup;constructor(e){this.segmentGroup=e||null}}class cT extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function su(t){return wm(new aT(t))}function Mae(t){return wm(new j(4e3,!1))}class Nae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ye(r);if(i.numberOfChildren>1||!i.children[Ee])return Mae();i=i.children[Ee]}}applyRedirectCommands(e,n,r,i,o){return function xae(t,e,n){if("string"==typeof t)return ye(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return Fi(Cr(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(He(s=>{if(s instanceof ea)throw new cT(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new cT(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new ea(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new et(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const uT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kae(t,e,n,r,i){const o=tU(t,e,n);return o.matched?(r=function Kse(t,e){return t.providers&&!t._injector&&(t._injector=aw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Rae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ye(i.map(s=>{const a=iu(s,t);return Fi(function yae(t){return t&&Yd(t.canMatch)}(a)?a.canMatch(e,n):Cr(t,()=>a(e,n)))})).pipe(ou(),eU()):ye(!0)}(r,e,n).pipe(He(s=>!0===s?o:{...uT}))):ye(o)}function tU(t,e,n){if("**"===e.path)return function Oae(t){return{matched:!0,parameters:t.length>0?b2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...uT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lse)(n,t,e);if(!i)return{...uT};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nU(t,e,n,r){return n.length>0&&function Fae(t,e,n){return n.some(r=>jm(t,e,r)&&Fr(r)!==Ee)}(t,n,r)?{segmentGroup:new et(e,Lae(r,new et(n,t.children))),slicedSegments:[]}:0===n.length&&function Uae(t,e,n){return n.some(r=>jm(t,e,r))}(t,n,r)?{segmentGroup:new et(t.segments,Vae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new et(t.segments,t.children),slicedSegments:n}}function Vae(t,e,n,r){const i={};for(const o of n)if(jm(t,e,o)&&!r[Fr(o)]){const s=new et([],{});i[Fr(o)]=s}return{...r,...i}}function Lae(t,e){const n={};n[Ee]=e;for(const r of t)if(""===r.path&&Fr(r)!==Ee){const i=new et([],{});n[Fr(r)]=i}return n}function jm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Bae{}class zae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Nae(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){const e=nU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(He(({children:n,rootSnapshot:r})=>{const i=new Ur(r,n),o=new q2("",i),s=function Mse(t,e,n=null,r=null){return O2(k2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new Vm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,n).pipe(He(r=>({children:r,rootSnapshot:n})),eu(r=>{if(r instanceof cT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof aT?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(He(s=>s instanceof Ur?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Cn(o).pipe(Tm(s=>{const a=r.children[s],c=function Zse(t,e){const n=t.filter(r=>Fr(r)===e);return n.push(...t.filter(r=>Fr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function qoe(t,e){return dn(function zoe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Jt(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),bm(null),function Goe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mo((i,o)=>t(i,o,r)):fs,Bb(1),n?bm(e):h2(()=>new Em))}(),Hn(s=>{if(null===s)return su(r);const a=rU(s);return function qae(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}(a),ye(a)}))}processSegment(e,n,r,i,o,s,a){return Cn(n).pipe(Tm(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(eu(u=>{if(u instanceof aT)return ye(null);throw u}))),Xs(c=>!!c),eu(c=>{if(X2(c))return function jae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?ye(new Bae):su(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Fr(r)===s||s!==Ee&&jm(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):su(i):su(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=tU(n,i,o);if(!c)return su(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new Vm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iU(i),Fr(i),i.component??i._loadedComponent??null,i,oU(i)),_=Om(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(Rr(w=>this.applyRedirects.lineralizeSegments(i,w)),Hn(w=>this.processSegment(e,r,n,w.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=kae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(Rr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Rr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new Vm(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iU(r),Fr(r),r.component??r._loadedComponent??null,r,oU(r)),I=Om(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);const{segmentGroup:w,slicedSegments:A}=nU(n,f,g,u);if(0===A.length&&w.hasChildren())return this.processChildren(d,u,w,_).pipe(He(U=>new Ur(_,U)));if(0===u.length&&0===A.length)return ye(new Ur(_,[]));const D=Fr(r)===o;return this.processSegment(d,u,w,A,D?Ee:o,!0,_).pipe(He(U=>new Ur(_,U instanceof Ur?[U]:[])))})):su(n)))}getChildConfig(e,n,r){return n.children?ye({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ye({routes:n._loadedRoutes,injector:n._loadedInjector}):function Dae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ye(!0):ye(i.map(s=>{const a=iu(s,t);return Fi(function pae(t){return t&&Yd(t.canLoad)}(a)?a.canLoad(e,n):Cr(t,()=>a(e,n)))})).pipe(ou(),eU())}(e,n,r).pipe(Hn(i=>i?this.configLoader.loadChildren(e,n).pipe(Sn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Pae(){return wm(Y2(!1,sr.GuardRejected))}())):ye({routes:[],injector:e})}}function Gae(t){const e=t.value.routeConfig;return e&&""===e.path}function rU(t){const e=[],n=new Set;for(const r of t){if(!Gae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=rU(r.children);e.push(new Ur(r.value,i))}return e.filter(r=>!n.has(r))}function iU(t){return t.data||{}}function oU(t){return t.resolve||{}}function sU(t){const e=t.children.map(n=>sU(n)).flat();return[t,...e]}function lT(t){return Rr(e=>{const n=t(e);return n?Cn(n).pipe(He(()=>e)):ye(e)})}let aU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(n){return n.data[jd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(Zae),providedIn:"root"})}return t})(),Zae=(()=>{class t extends aU{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Te(nse))};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Bm=new G("",{providedIn:"root",factory:()=>({})}),dT=new G("");let cU=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(nte);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ye(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Fi(Cr(n,()=>r.loadComponent())).pipe(He(uU),Rr(lU),Sn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),$b(()=>{this.componentLoaders.delete(r)})),o=new d2(i,()=>new Qn).pipe(jb());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Xae(t,e,n,r){return Fi(Cr(n,()=>t.loadChildren())).pipe(He(uU),Rr(lU),Hn(i=>i instanceof lk||Array.isArray(i)?ye(i):Cn(e.compileModuleAsync(i))),He(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(dT,[],{optional:!0,self:!0}).flat()),{routes:s.map(oT),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe($b(()=>{this.childrenLoaders.delete(r)})),s=new d2(o,()=>new Qn).pipe(jb());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uU(t){return function ece(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function lU(t){return ye(t)}let hT=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(tce),providedIn:"root"})}return t})(),tce=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nce=new G(""),oce=new G("");let sce=(()=>{class t{currentNavigation=je(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Qn;transitionAbortWithErrorSubject=new Qn;configLoader=O(cU);environmentInjector=O(Fn);destroyRef=O(Jr);urlSerializer=O(Sm);rootContexts=O(Gd);location=O(Nl);inputBindingEnabled=null!==O(iT,{optional:!0});titleStrategy=O(aU);options=O(Bm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(hT);createViewTransition=O(nce,{optional:!0});navigationErrorHandler=O(oce,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>ye(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new $se(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Bse(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;yt(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new br(null),this.transitions.pipe(Mo(r=>null!==r),Rr(r=>{let i=!1;return ye(r).pipe(Rr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",sr.SupersededByNewNavigation),Lr;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new qd(o.id,this.urlSerializer.serialize(o.rawUrl),"",Qb.IgnoredSameUrlNavigation)),o.resolve(!1),Lr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ye(o).pipe(Rr(c=>(this.events.next(new Kb(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Lr:Promise.resolve(c))),function Wae(t,e,n,r,i,o){return Hn(s=>function $ae(t,e,n,r,i,o,s="emptyOnly"){return new zae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(He(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Sn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new B2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new Kb(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=z2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(I=>(I.finalUrl=u,I)),ye(r)}return this.events.next(new qd(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Qb.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Lr}),Sn(o=>{const s=new Lse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),He(o=>(this.currentTransition=r={...o,guards:uae(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function Iae(t,e){return Hn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ye({...n,guardsResult:!0}):function Eae(t,e,n,r){return Cn(t).pipe(Hn(i=>function Aae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ye(o.map(a=>{const c=nu(e)??i,u=iu(a,c);return Fi(function _ae(t){return t&&Yd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):Cr(c,()=>u(t,e,n,r))).pipe(Xs())})).pipe(ou()):ye(!0)}(i.component,i.route,n,e,r)),Xs(i=>!0!==i,!0))}(s,r,i,t).pipe(Hn(a=>a&&function fae(t){return"boolean"==typeof t}(a)?function wae(t,e,n,r){return Cn(e).pipe(Tm(i=>Fb(function Tae(t,e){return null!==t&&e&&e(new Hse(t)),ye(!0)}(i.route.parent,r),function bae(t,e){return null!==t&&e&&e(new qse(t)),ye(!0)}(i.route,r),function Sae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function lae(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Ub(()=>ye(s.guards.map(c=>{const u=nu(s.node)??n,d=iu(c,u);return Fi(function mae(t){return t&&Yd(t.canActivateChild)}(d)?d.canActivateChild(r,t):Cr(u,()=>d(r,t))).pipe(Xs())})).pipe(ou())));return ye(o).pipe(ou())}(t,i.path,n),function Cae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ye(!0);const i=r.map(o=>Ub(()=>{const s=nu(e)??n,a=iu(o,s);return Fi(function gae(t){return t&&Yd(t.canActivate)}(a)?a.canActivate(e,t):Cr(s,()=>a(e,t))).pipe(Xs())}));return ye(i).pipe(ou())}(t,i.route,n))),Xs(i=>!0!==i,!0))}(r,o,t,e):ye(a)),He(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Sn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Lm(0,o.guardsResult);const s=new Fse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Mo(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",sr.GuardRejected),!1)),lT(o=>{if(0!==o.guards.canActivateChecks.length)return ye(o).pipe(Sn(s=>{const a=new Use(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Rr(s=>{let a=!1;return ye(s).pipe(function Kae(t,e){return Hn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ye(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of sU(c))s.add(u);let a=0;return Cn(s).pipe(Tm(c=>o.has(c)?function Qae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!W2(i)&&(o[jd]=i.title),Ub(()=>(t.data=Om(t,t.parent,n).resolve,function Yae(t,e,n,r){const i=Hb(t);if(0===i.length)return ye({});const o={};return Cn(i).pipe(Hn(s=>function Jae(t,e,n,r){const i=nu(e)??r,o=iu(t,i);return Fi(o.resolve?o.resolve(e,n):Cr(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Xs(),Sn(a=>{if(a instanceof sT)throw Lm(new Am,a);o[s]=a}))),Bb(1),He(()=>o),eu(s=>X2(s)?Lr:wm(s)))}(o,t,e,r).pipe(He(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=Om(c,c.parent,t).resolve,ye(void 0))),Sn(()=>a++),Bb(1),Hn(c=>a===s.size?ye(n):Lr))})}(this.paramsInheritanceStrategy,this.environmentInjector),Sn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",sr.NoDataFromResolver)}}))}),Sn(s=>{const a=new jse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lT(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=nu(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Sn(d=>{a.component=d}),He(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return u2(s(o.targetSnapshot.root)).pipe(bm(null),Xc(1))}),lT(()=>this.afterPreactivation()),Rr(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Cn(a).pipe(He(()=>r)):ye(r)}),He(o=>{const s=function rae(t,e,n){const r=Wd(t,e._root,n?n._root:void 0);return new H2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Sn(()=>{this.events.next(new Jb)}),((t,e,n,r)=>He(i=>(new cae(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xc(1),f2(new jt(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Mo(()=>!i&&!r.targetRouterState),Sn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",sr.Aborted)}))),Sn({next:o=>{i=!0,this.lastSuccessfulNavigation=yt(this.currentNavigation),this.events.next(new No(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),f2(this.transitionAbortWithErrorSubject.pipe(Sn(o=>{throw o}))),$b(()=>{i||this.cancelNavigationTransition(r,"",sr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),eu(o=>{if(this.destroyed)return r.resolve(!1),Lr;if(i=!0,J2(o))this.events.next(new ra(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function sae(t){return J2(t)&&na(t.url)}(o)?this.events.next(new km(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new Yb(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=Cr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof sT))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Lm(0,a);this.events.next(new ra(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new km(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Lr}))}))}cancelNavigationTransition(n,r,i){const o=new ra(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=yt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ace(t){return t!==xm}let cce=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(lce),providedIn:"root"})}return t})();class uce{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let lce=(()=>{class t extends uce{static \u0275fac=(()=>{let n;return function(i){return(n||(n=rn(t)))(i||t)}})();static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dU=(()=>{class t{urlSerializer=O(Sm);options=O(Bm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Nl);urlHandlingStrategy=O(hT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ea;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof ea?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=z2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:()=>O(dce),providedIn:"root"})}return t})(),dce=(()=>{class t extends dU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Kb?this.updateStateMemento():n instanceof qd?this.commitTransition(r):n instanceof B2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Jb?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ra&&n.code!==sr.SupersededByNewNavigation&&n.code!==sr.Redirect?this.restoreHistory(r):n instanceof Yb?this.restoreHistory(r,!0):n instanceof No&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=rn(t)))(i||t)}})();static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Fk);stateManager=O(dU);options=O(Bm,{optional:!0})||{};pendingTasks=O(mo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(sce);urlSerializer=O(Sm);location=O(Nl);urlHandlingStrategy=O(hT);injector=O(Fn);_events=new Qn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(cce);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(dT,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(iT,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Vn;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=yt(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof ra&&r.code!==sr.Redirect&&r.code!==sr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof No)this.navigated=!0;else if(r instanceof km){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ace(i.source),...s};this.scheduleNavigation(a,xm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Wse(t){return!(t instanceof Jb||t instanceof km)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Zr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return yt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(oT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=k2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return O2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=na(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xm,null,r)}navigate(n,r={skipLocationChange:!1}){return function gce(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new j(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Gr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...fce}:!1===r?{...pce}:r,na(n))return C2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return C2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function hce(t,e){t.events.pipe(Mo(n=>n instanceof No||n instanceof ra||n instanceof Yb||n instanceof qd),He(n=>n instanceof No||n instanceof qd?0:n instanceof ra&&(n.code===sr.Redirect||n.code===sr.SupersededByNewNavigation)?2:1),Mo(n=>2!==n),Xc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$m=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=je(null);get href(){return yt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Qn;applicationErrorHandler=O(Zr);options=O(Bm,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Jne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof No&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=na(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:na(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(re(gn),re(Ui),Ap("tabindex"),re(Vs),re(Or),re(dp))};static \u0275dir=Re({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&ct("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&fn("href",i.reactiveHref(),h1)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Zc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Zc],replaceUrl:[2,"replaceUrl","replaceUrl",Zc],routerLink:"routerLink"},features:[Mi]})}return t})(),IU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ht;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof No&&this.update()})}ngAfterContentInit(){ye(this.links.changes,ye(null)).pipe(Lb()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Cn(n).pipe(Lb()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function Pce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(re(gn),re(Or),re(Vs),re(pm),re($m,8))};static \u0275dir=Re({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function zO(t,e,n,r){rk(t,e,n,r)}(o,$m,5),2&r){let s;(function qO(t){const e=V(),n=Ie(),r=oI();up(r+1);const i=rw(n,r);if(t.dirty&&function uq(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=ok(e,r);t.reset(o,QP),t.notifyOnChanges()}return!0}return!1})(s=function GO(){return function nw(t,e){return t[18].queries[e].queryList}(V(),oI())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Mi]})}return t})();const gT=new G("");function wU(t){return t.routerState.root}function bU(){const t=O(pr);return e=>{const n=t.get(ki);if(e!==n.components[0])return;const r=t.get(gn),i=t.get(TU);1===t.get(mT)&&r.initialNavigation(),t.get(CU,null,{optional:!0})?.setUpPreloading(),t.get(gT,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const TU=new G("",{factory:()=>new Qn}),mT=new G("",{providedIn:"root",factory:()=>1}),CU=new G(""),AU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},DU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new $ce;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hm=function(t){return function(t){const e=AU(t);return DU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Jd=function(t){try{return DU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const zm=()=>{try{return function MU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},PU=t=>{var e,n;return null===(n=null===(e=zm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},NU=()=>{var t;return null===(t=zm())||void 0===t?void 0:t.config},xU=t=>{var e;return null===(e=zm())||void 0===e?void 0:e[`_${t}`]};class kU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function au(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function OU(t){return yT.apply(this,arguments)}function yT(){return(yT=v(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const Zd={};let VU=!1;function LU(t,e){if(typeof window>"u"||typeof document>"u"||!au(window.location.host)||Zd[t]===e||Zd[t]||VU)return;function n(f){return`__firebase__banner__${f}`}Zd[t]=e;const r="__firebase__banner",o=function Yce(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zd))Zd[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function Jce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),I=n("learnmore"),w=document.getElementById(I)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const U=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(U),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(w,I);const J=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{VU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),U.append(D,_,w,J),document.body.appendChild(U)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function Vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function UU(){return!function FU(){var t;const e=null===(t=zm())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}}class Xd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function sue(t,e){return t.replace(aue,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new ji(i,`${this.serviceName}: ${s} (${i}).`,r)}}const aue=/\{\$([^}]+)}/g;function Bi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(HU(o)&&HU(s)){if(!Bi(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function HU(t){return null!==t&&"object"==typeof t}function eh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class lue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function due(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=vT),void 0===i.error&&(i.error=vT),void 0===i.complete&&(i.complete=vT);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vT(){}function Wt(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oa="[DEFAULT]";class _ue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function vue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===oa?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Iue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _ue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const ET=[];var Me=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Me||{});const zU={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Eue=Me.INFO,wue={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},bue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=wue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class wT{constructor(e){this.name=e,this._logLevel=Eue,this._logHandler=bue,this._userLogHandler=null,ET.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?zU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}let qU,GU;const WU=new WeakMap,bT=new WeakMap,KU=new WeakMap,TT=new WeakMap,CT=new WeakMap;let ST={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return bT.get(t);if("objectStoreNames"===e)return t.objectStoreNames||KU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Pue(t){return"function"==typeof t?function Mue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Sue(){return GU||(GU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(AT(this),e),xo(WU.get(this))}:function(...e){return xo(t.apply(AT(this),e))}:function(e,...n){const r=t.call(AT(this),e,...n);return KU.set(r,e.sort?e.sort():[e]),xo(r)}}(t):(t instanceof IDBTransaction&&function Due(t){if(bT.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});bT.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Cue(){return qU||(qU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,ST):t)}function xo(t){if(t instanceof IDBRequest)return function Aue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(xo(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&WU.set(n,t)}).catch(()=>{}),CT.set(e,t),e}(t);if(TT.has(t))return TT.get(t);const e=Pue(t);return e!==t&&(TT.set(t,e),CT.set(e,t)),e}const AT=t=>CT.get(t),kue=["get","getKey","getAll","getAllKeys","count"],Oue=["put","add","delete","clear"],DT=new Map;function QU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(DT.get(e))return DT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Oue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!kue.includes(n))return;const o=function(){var s=v(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return DT.set(e,o),o}!function Rue(t){ST=t(ST)}(t=>({...t,get:(e,n,r)=>QU(e,n)||t.get(e,n,r),has:(e,n)=>!!QU(e,n)||t.has(e,n)}));class Bue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function $ue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Gm="@firebase/app",$i=new wT("@firebase/app"),Hue="@firebase/app-compat",zue="@firebase/analytics-compat",que="@firebase/analytics",Gue="@firebase/app-check-compat",Wue="@firebase/app-check",Kue="@firebase/auth",Que="@firebase/auth-compat",Yue="@firebase/database",Jue="@firebase/data-connect",Zue="@firebase/database-compat",Xue="@firebase/functions",ele="@firebase/functions-compat",tle="@firebase/installations",nle="@firebase/installations-compat",rle="@firebase/messaging",ile="@firebase/messaging-compat",ole="@firebase/performance",sle="@firebase/performance-compat",ale="@firebase/remote-config",cle="@firebase/remote-config-compat",ule="@firebase/storage",lle="@firebase/storage-compat",dle="@firebase/firestore",hle="@firebase/ai",fle="@firebase/firestore-compat",ple="firebase",Wm="[DEFAULT]",mle={[Gm]:"fire-core",[Hue]:"fire-core-compat",[que]:"fire-analytics",[zue]:"fire-analytics-compat",[Wue]:"fire-app-check",[Gue]:"fire-app-check-compat",[Kue]:"fire-auth",[Que]:"fire-auth-compat",[Yue]:"fire-rtdb",[Jue]:"fire-data-connect",[Zue]:"fire-rtdb-compat",[Xue]:"fire-fn",[ele]:"fire-fn-compat",[tle]:"fire-iid",[nle]:"fire-iid-compat",[rle]:"fire-fcm",[ile]:"fire-fcm-compat",[ole]:"fire-perf",[sle]:"fire-perf-compat",[ale]:"fire-rc",[cle]:"fire-rc-compat",[ule]:"fire-gcs",[lle]:"fire-gcs-compat",[dle]:"fire-fst",[fle]:"fire-fst-compat",[hle]:"fire-vertex","fire-js":"fire-js",[ple]:"fire-js-all"},sa=new Map,th=new Map,nh=new Map;function YU(t,e){try{t.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cu(t){const e=t.name;if(nh.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of sa.values())YU(n,t);for(const n of th.values())YU(n,t);return!0}function Km(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Br(t){return null!=t&&void 0!==t.settings}const Mr=new Xd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class JU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}const uu="11.10.0";function XU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Wm,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=NU()),!n)throw Mr.create("no-options");const o=sa.get(i);if(o){if(Bi(n,o.options)&&Bi(r,o.config))return o;throw Mr.create("duplicate-app",{appName:i})}const s=new Iue(i);for(const c of nh.values())s.addComponent(c);const a=new JU(n,r,s);return sa.set(i,a),a}function ej(t=Wm){const e=sa.get(t);if(!e&&t===Wm&&NU())return XU();if(!e)throw Mr.create("no-app",{appName:t});return e}function Hi(t,e,n){var r;let i=null!==(r=mle[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void $i.warn(a.join(" "))}cu(new ia(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const rh="firebase-heartbeat-store";let PT=null;function tj(){return PT||(PT=function xue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=xo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(xo(s.result),c.oldVersion,c.newVersion,xo(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(rh)}catch(n){console.warn(n)}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),PT}function NT(){return(NT=v(function*(t){try{const n=(yield tj()).transaction(rh),r=yield n.objectStore(rh).get(rj(t));return yield n.done,r}catch(e){if(e instanceof ji)$i.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e?.message});$i.warn(n.message)}}})).apply(this,arguments)}function nj(t,e){return xT.apply(this,arguments)}function xT(){return(xT=v(function*(t,e){try{const r=(yield tj()).transaction(rh,"readwrite");yield r.objectStore(rh).put(e,rj(t)),yield r.done}catch(n){if(n instanceof ji)$i.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n?.message});$i.warn(r.message)}}})).apply(this,arguments)}function rj(t){return`${t.name}!${t.options.appId}`}class Sle{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Dle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ij();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function Rle(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){$i.warn(i)}})()}getHeartbeatsHeader(){var e=this;return v(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=ij(),{heartbeatsToSend:i,unsentEntries:o}=function Ale(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),oj(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Hm(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return $i.warn(r),""}})()}}function ij(){return(new Date).toISOString().substring(0,10)}class Dle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!function BU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function iue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function ble(t){return NT.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return nj(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return nj(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function oj(t){return Hm(JSON.stringify({version:2,heartbeats:t})).length}!function Mle(t){cu(new ia("platform-logger",e=>new Bue(e),"PRIVATE")),cu(new ia("heartbeat",e=>new Sle(e),"PRIVATE")),Hi(Gm,"0.13.2",t),Hi(Gm,"0.13.2","esm2017"),Hi("fire-js","")}(""),Hi("firebase","11.10.0","app");var ko,cj,sj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aj={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,b){b||(b=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(R=0;16>R;++R)S[R]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;var x=C.g[3],T=(E=C.g[0])+(x^(b=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;T=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=(b=(R=(x=(E=b+(T<<7&4294967295|T>>>25))+((T=x+(R^E&(b^R))+S[1]+3905402710&4294967295)<<12&4294967295|T>>>20))+((T=R+(b^x&(E^b))+S[2]+606105819&4294967295)<<17&4294967295|T>>>15))+((T=b+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|T>>>10))+((T=E+(x^b&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|T>>>25))+((T=x+(R^E&(b^R))+S[5]+1200080426&4294967295)<<12&4294967295|T>>>20))+((T=R+(b^x&(E^b))+S[6]+2821735955&4294967295)<<17&4294967295|T>>>15))+((T=b+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|T>>>10))+((T=E+(x^b&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|T>>>25))+((T=x+(R^E&(b^R))+S[9]+2336552879&4294967295)<<12&4294967295|T>>>20))+((T=R+(b^x&(E^b))+S[10]+4294925233&4294967295)<<17&4294967295|T>>>15))+((T=b+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|T>>>10))+((T=E+(x^b&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|T>>>25))+((T=x+(R^E&(b^R))+S[13]+4254626195&4294967295)<<12&4294967295|T>>>20))+((T=R+(b^x&(E^b))+S[14]+2792965006&4294967295)<<17&4294967295|T>>>15))+((T=b+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|T>>>10))+((T=E+(R^x&(b^R))+S[1]+4129170786&4294967295)<<5&4294967295|T>>>27))+((T=x+(b^R&(E^b))+S[6]+3225465664&4294967295)<<9&4294967295|T>>>23))+((T=R+(E^b&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|T>>>18))+((T=b+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|T>>>12))+((T=E+(R^x&(b^R))+S[5]+3593408605&4294967295)<<5&4294967295|T>>>27))+((T=x+(b^R&(E^b))+S[10]+38016083&4294967295)<<9&4294967295|T>>>23))+((T=R+(E^b&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|T>>>18))+((T=b+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|T>>>12))+((T=E+(R^x&(b^R))+S[9]+568446438&4294967295)<<5&4294967295|T>>>27))+((T=x+(b^R&(E^b))+S[14]+3275163606&4294967295)<<9&4294967295|T>>>23))+((T=R+(E^b&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|T>>>18))+((T=b+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|T>>>12))+((T=E+(R^x&(b^R))+S[13]+2850285829&4294967295)<<5&4294967295|T>>>27))+((T=x+(b^R&(E^b))+S[2]+4243563512&4294967295)<<9&4294967295|T>>>23))+((T=R+(E^b&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|T>>>18))+((T=b+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|T>>>12))+((T=E+(b^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|T>>>28))+((T=x+(E^b^R)+S[8]+2272392833&4294967295)<<11&4294967295|T>>>21))+((T=R+(x^E^b)+S[11]+1839030562&4294967295)<<16&4294967295|T>>>16))+((T=b+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|T>>>9))+((T=E+(b^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|T>>>28))+((T=x+(E^b^R)+S[4]+1272893353&4294967295)<<11&4294967295|T>>>21))+((T=R+(x^E^b)+S[7]+4139469664&4294967295)<<16&4294967295|T>>>16))+((T=b+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|T>>>9))+((T=E+(b^R^x)+S[13]+681279174&4294967295)<<4&4294967295|T>>>28))+((T=x+(E^b^R)+S[0]+3936430074&4294967295)<<11&4294967295|T>>>21))+((T=R+(x^E^b)+S[3]+3572445317&4294967295)<<16&4294967295|T>>>16))+((T=b+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|T>>>9))+((T=E+(b^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|T>>>28))+((T=x+(E^b^R)+S[12]+3873151461&4294967295)<<11&4294967295|T>>>21))+((T=R+(x^E^b)+S[15]+530742520&4294967295)<<16&4294967295|T>>>16))+((T=b+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|T>>>9))+((T=E+(R^(b|~x))+S[0]+4096336452&4294967295)<<6&4294967295|T>>>26))+((T=x+(b^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|T>>>22))+((T=R+(E^(x|~b))+S[14]+2878612391&4294967295)<<15&4294967295|T>>>17))+((T=b+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|T>>>11))+((T=E+(R^(b|~x))+S[12]+1700485571&4294967295)<<6&4294967295|T>>>26))+((T=x+(b^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|T>>>22))+((T=R+(E^(x|~b))+S[10]+4293915773&4294967295)<<15&4294967295|T>>>17))+((T=b+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|T>>>11))+((T=E+(R^(b|~x))+S[8]+1873313359&4294967295)<<6&4294967295|T>>>26))+((T=x+(b^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|T>>>22))+((T=R+(E^(x|~b))+S[6]+2734768916&4294967295)<<15&4294967295|T>>>17))+((T=b+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|T>>>11))+((x=(E=b+((T=E+(R^(b|~x))+S[4]+4149444226&4294967295)<<6&4294967295|T>>>26))+((T=x+(b^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|T>>>22))^((R=x+((T=R+(E^(x|~b))+S[2]+718787259&4294967295)<<15&4294967295|T>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var b=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(b[R]=x,S=!1)}this.g=b}(function e(C,E){function b(){}b.prototype=E.prototype,C.D=E.prototype,C.prototype=new b,C.prototype.constructor=C,C.C=function(S,R,x){for(var T=Array(arguments.length-2),io=2;io<arguments.length;io++)T[io-2]=arguments[io];return E.prototype[R].apply(S,T)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var b=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=b;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var b=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&b,b/=256;for(this.u(C),C=Array(16),E=b=0;4>E;++E)for(var S=0;32>S;S+=8)C[b++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var b=a;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(u(-C));for(var E=[],b=1,S=0;C>=b;S++)E[S]=C/b|0,b*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function I(C){return-1==C.h}function w(C){for(var E=C.g.length,b=[],S=0;S<E;S++)b[S]=~C.g[S];return new s(b,~C.h).add(f)}function A(C,E){return C.add(w(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function U(C,E){this.g=C,this.h=E}function J(C,E){if(_(E))throw Error("division by zero");if(_(C))return new U(h,h);if(I(C))return E=J(w(C),E),new U(w(E.g),w(E.h));if(I(E))return E=J(C,w(E)),new U(w(E.g),E.h);if(30<C.g.length){if(I(C)||I(E))throw Error("slowDivide_ only works with positive integers.");for(var b=f,S=E;0>=S.l(C);)b=ee(b),S=ee(S);var R=oe(b,1),x=oe(S,1);for(S=oe(S,2),b=oe(b,2);!_(S);){var T=x.add(S);0>=T.l(C)&&(R=R.add(b),x=T),S=oe(S,1),b=oe(b,1)}return E=A(C,R.j(E)),new U(R,E)}for(R=h;0<=C.l(E);){for(b=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(b)/Math.LN2))?1:Math.pow(2,S-48),T=(x=u(b)).j(E);I(T)||0<T.l(C);)T=(x=u(b-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,T)}return new U(R,C)}function ee(C){for(var E=C.g.length+1,b=[],S=0;S<E;S++)b[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(b,C.h)}function oe(C,E){var b=E>>5;E%=32;for(var S=C.g.length-b,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+b)>>>E|C.i(x+b+1)<<32-E:C.i(x+b);return new s(R,C.h)}(t=s.prototype).m=function(){if(I(this))return-w(this).m();for(var C=0,E=1,b=0;b<this.g.length;b++){var S=this.i(b);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(I(this))return"-"+w(this).toString(C);for(var E=u(Math.pow(C,6)),b=this,S="";;){var R=J(b,E).g,x=((0<(b=A(b,R.j(E))).g.length?b.g[0]:b.h)>>>0).toString(C);if(_(b=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return I(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return I(this)?w(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),b=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),T=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=T>>>16,b[R]=(T&=65535)<<16|(x&=65535)}return new s(b,-2147483648&b[b.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(I(this))return I(C)?w(this).j(w(C)):w(w(this).j(C));if(I(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,b=[],S=0;S<2*E;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,T=65535&this.i(S),io=C.i(R)>>>16,vf=65535&C.i(R);b[2*S+2*R]+=T*vf,D(b,2*S+2*R),b[2*S+2*R+1]+=x*vf,D(b,2*S+2*R+1),b[2*S+2*R+1]+=T*io,D(b,2*S+2*R+1),b[2*S+2*R+2]+=x*io,D(b,2*S+2*R+2)}for(S=0;S<E;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=E;S<2*E;S++)b[S]=0;return new s(b,0)},t.A=function(C){return J(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)&C.i(S);return new s(b,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)|C.i(S);return new s(b,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)^C.i(S);return new s(b,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cj=aj.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return w(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),T=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(T))):S=(S=S.j(b)).add(u(T))}return S},ko=aj.Integer=s}).apply(typeof sj<"u"?sj:typeof self<"u"?self:typeof window<"u"?window:{});var uj,ih,lj,Ym,kT,dj,hj,fj,Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Qm&&Qm];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var M=l[y];if(!(M in m))break e;m=m[M]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,M={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),l.apply(p,M)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,M,k){for(var Q=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Q[ot-2]=arguments[ot];return p.prototype[M].apply(y,Q)}}function I(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function w(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const M=l.length||0,k=y.length||0;l.length=M+k;for(let Q=0;Q<k;Q++)l[M+Q]=y[Q]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function U(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function J(l){return J[" "](l),l}J[" "]=function(){};var ee=!(-1==U().indexOf("Gecko")||-1!=U().toLowerCase().indexOf("webkit")&&-1==U().indexOf("Edge")||-1!=U().indexOf("Trident")||-1!=U().indexOf("MSIE")||-1!=U().indexOf("Edge"));function oe(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let M=1;M<arguments.length;M++){for(m in y=arguments[M],y)l[m]=y[m];for(let k=0;k<b.length;k++)m=b[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function T(){var l=rM;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var vf=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new JIe,l=>l.reset());class JIe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let If,Ef=!1,rM=new class io{constructor(){this.h=this.g=null}add(p,m){const y=vf.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Jz=()=>{const l=a.Promise.resolve(void 0);If=()=>{l.then(ZIe)}};var ZIe=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(m){x(m)}var p=vf;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}Ef=!1};function ss(){this.s=this.s,this.C=this.C}function Nn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}ss.prototype.s=!1,ss.prototype.ma=function(){this.s||(this.s=!0,this.N())},ss.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Nn.prototype.h=function(){this.defaultPrevented=!0};var XIe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function wf(l,p){if(Nn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(ee){e:{try{J(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:eEe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wf.aa.h.call(this)}}_(wf,Nn);var eEe={2:"touch",3:"pen",4:"mouse"};wf.prototype.h=function(){wf.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var bf="closure_listenable_"+(1e6*Math.random()|0),tEe=0;function nEe(l,p,m,y,M){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=M,this.key=++tEe,this.da=this.fa=!1}function Hy(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function zy(l){this.src=l,this.g={},this.h=0}function iM(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],M=Array.prototype.indexOf.call(y,p,void 0);(k=0<=M)&&Array.prototype.splice.call(y,M,1),k&&(Hy(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function oM(l,p,m,y){for(var M=0;M<l.length;++M){var k=l[M];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return M}return-1}zy.prototype.add=function(l,p,m,y,M){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var Q=oM(l,p,y,M);return-1<Q?(p=l[Q],m||(p.fa=!1)):((p=new nEe(p,this.src,k,!!y,M)).fa=m,l.push(p)),p};var sM="closure_lm_"+(1e6*Math.random()|0),aM={};function Zz(l,p,m,y,M){if(y&&y.once)return e5(l,p,m,y,M);if(Array.isArray(p)){for(var k=0;k<p.length;k++)Zz(l,p[k],m,y,M);return null}return m=dM(m),l&&l[bf]?l.K(p,m,u(y)?!!y.capture:!!y,M):Xz(l,p,m,!1,y,M)}function Xz(l,p,m,y,M,k){if(!p)throw Error("Invalid event type");var Q=u(M)?!!M.capture:!!M,ot=uM(l);if(ot||(l[sM]=ot=new zy(l)),(m=ot.add(p,m,y,Q,k)).proxy)return m;if(y=function rEe(){const p=iEe;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)XIe||(M=Q),void 0===M&&(M=!1),l.addEventListener(p.toString(),y,M);else if(l.attachEvent)l.attachEvent(n5(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function e5(l,p,m,y,M){if(Array.isArray(p)){for(var k=0;k<p.length;k++)e5(l,p[k],m,y,M);return null}return m=dM(m),l&&l[bf]?l.L(p,m,u(y)?!!y.capture:!!y,M):Xz(l,p,m,!0,y,M)}function t5(l,p,m,y,M){if(Array.isArray(p))for(var k=0;k<p.length;k++)t5(l,p[k],m,y,M);else y=u(y)?!!y.capture:!!y,m=dM(m),l&&l[bf]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=oM(k=l.g[p],m,y,M))&&(Hy(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=uM(l))&&(p=l.g[p.toString()],l=-1,p&&(l=oM(p,m,y,M)),(m=-1<l?p[l]:null)&&cM(m))}function cM(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[bf])iM(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(n5(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=uM(p))?(iM(m,l),0==m.h&&(m.src=null,p[sM]=null)):Hy(l)}}}function n5(l){return l in aM?aM[l]:aM[l]="on"+l}function iEe(l,p){if(l.da)l=!0;else{p=new wf(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&cM(l),l=m.call(y,p)}return l}function uM(l){return(l=l[sM])instanceof zy?l:null}var lM="__closure_events_fn_"+(1e9*Math.random()>>>0);function dM(l){return"function"==typeof l?l:(l[lM]||(l[lM]=function(p){return l.handleEvent(p)}),l[lM])}function xn(){ss.call(this),this.i=new zy(this),this.M=this,this.F=null}function Wn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new Nn(p,l);else if(p instanceof Nn)p.target=p.target||l;else{var M=p;S(p=new Nn(y,l),M)}if(M=!0,m)for(var k=m.length-1;0<=k;k--){var Q=p.g=m[k];M=qy(Q,y,!0,p)&&M}if(M=qy(Q=p.g=l,y,!0,p)&&M,M=qy(Q,y,!1,p)&&M,m)for(k=0;k<m.length;k++)M=qy(Q=p.g=m[k],y,!1,p)&&M}function qy(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var M=!0,k=0;k<p.length;++k){var Q=p[k];if(Q&&!Q.da&&Q.capture==m){var ot=Q.listener,yn=Q.ha||Q.src;Q.fa&&iM(l.i,Q),M=!1!==ot.call(yn,y)&&M}}return M&&!y.defaultPrevented}function r5(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function i5(l){l.g=r5(()=>{l.g=null,l.i&&(l.i=!1,i5(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(xn,ss),xn.prototype[bf]=!0,xn.prototype.removeEventListener=function(l,p,m,y){t5(this,l,p,m,y)},xn.prototype.N=function(){if(xn.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)Hy(m[y]);delete l.g[p],l.h--}}this.F=null},xn.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},xn.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class oEe extends ss{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:i5(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tf(l){ss.call(this),this.h=l,this.g={}}_(Tf,ss);var o5=[];function s5(l){oe(l.g,function(p,m){this.g.hasOwnProperty(m)&&cM(p)},l),l.g={}}Tf.prototype.N=function(){Tf.aa.N.call(this),s5(this)},Tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hM=a.JSON.stringify,sEe=a.JSON.parse,aEe=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function fM(){}function c5(){}fM.prototype.h=null;var Cf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pM(){Nn.call(this,"d")}function gM(){Nn.call(this,"c")}_(pM,Nn),_(gM,Nn);var Ba={},u5=null;function Gy(){return u5=u5||new xn}function l5(l){Nn.call(this,Ba.La,l)}function Sf(l){const p=Gy();Wn(p,new l5(p))}function d5(l,p){Nn.call(this,Ba.STAT_EVENT,l),this.stat=p}function Kn(l){const p=Gy();Wn(p,new d5(p,l))}function h5(l,p){Nn.call(this,Ba.Ma,l),this.size=p}function Af(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Df(){this.g=!0}function cl(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function dEe(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var k=M[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var Q=1;Q<M.length;Q++)M[Q]=""}}}return hM(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Ba.La="serverreachability",_(l5,Nn),Ba.STAT_EVENT="statevent",_(d5,Nn),Ba.Ma="timingevent",_(h5,Nn),Df.prototype.xa=function(){this.g=!1},Df.prototype.info=function(){};var mM,Wy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f5={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ky(){}function as(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new Tf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new p5}function p5(){this.i=null,this.g="",this.h=!1}_(Ky,fM),Ky.prototype.g=function(){return new XMLHttpRequest},Ky.prototype.i=function(){return{}},mM=new Ky;var g5={},_M={};function yM(l,p,m){l.L=1,l.v=Zy(oo(p)),l.m=m,l.P=!0,m5(l,null)}function m5(l,p){l.F=Date.now(),Qy(l),l.A=oo(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),M5(m.i,"t",y),l.C=0,m=l.j.J,l.h=new p5,l.g=K5(l.j,m?p:null,!l.m),0<l.O&&(l.M=new oEe(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(o5[0]=M.toString()),M=o5);for(var k=0;k<M.length;k++){var Q=Zz(m,M[k],y||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Sf(),function cEe(l,p,m,y,M,k){l.info(function(){if(l.g)if(k)for(var Q="",ot=k.split("&"),yn=0;yn<ot.length;yn++){var Fe=ot[yn].split("=");if(1<Fe.length){var kn=Fe[0];Fe=Fe[1];var On=kn.split("_");Q=2<=On.length&&"type"==On[1]?Q+(kn+"=")+Fe+"&":Q+(kn+"=redacted&")}}else Q=null;else Q=k;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+p+"\n"+m+"\n"+Q})}(l.i,l.u,l.A,l.l,l.R,l.m)}function _5(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function hEe(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?_M:(m=Number(p.substring(m,y)),isNaN(m)?g5:(y+=1)+m>p.length?_M:(p=p.slice(y,y+m),l.C=y+m,p))}function Qy(l){l.S=Date.now()+l.I,y5(l,l.I)}function y5(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Af(f(l.ba,l),p)}function vM(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Rf(l){0==l.j.G||l.J||z5(l.j,l)}function $a(l){vM(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,s5(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function IM(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||EM(m.h,l)))if(!l.K&&EM(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var M=y;if(0==M[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;rv(m),tv(m)}CM(m),Kn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&0==m.v&&!m.C&&(m.C=Af(f(m.Za,m),6e3));if(1>=E5(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else za(m,11)}else if((l.K||m.g==l)&&rv(m),!D(p))for(M=m.Da.g.parse(p),p=0;p<M.length;p++){let Fe=M[p];if(m.T=Fe[0],Fe=Fe[1],2==m.G)if("c"==Fe[0]){m.K=Fe[1],m.ia=Fe[2];const kn=Fe[3];null!=kn&&(m.la=kn,m.j.info("VER="+m.la));const On=Fe[4];null!=On&&(m.Aa=On,m.j.info("SVER="+m.Aa));const dl=Fe[5];null!=dl&&"number"==typeof dl&&0<dl&&(m.L=y=1.5*dl,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const qr=l.g;if(qr){const ov=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ov){var k=y.h;k.g||-1==ov.indexOf("spdy")&&-1==ov.indexOf("quic")&&-1==ov.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(wM(k,k.h),k.h=null))}if(y.D){const AM=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;AM&&(y.ya=AM,mt(y.I,y.D,AM))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var Q=l;if((y=m).qa=W5(y,y.J?y.ia:null,y.W),Q.K){w5(y.h,Q);var ot=Q,yn=y.L;yn&&(ot.I=yn),ot.B&&(vM(ot),Qy(ot)),y.g=Q}else $5(y);0<m.i.length&&nv(m)}else"stop"!=Fe[0]&&"close"!=Fe[0]||za(m,7);else 3==m.G&&("stop"==Fe[0]||"close"==Fe[0]?"stop"==Fe[0]?za(m,7):TM(m):"noop"!=Fe[0]&&m.l&&m.l.ta(Fe),m.v=0)}Sf()}catch{}}as.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==so(l)?p.j():this.Y(l)},as.prototype.Y=function(l){try{if(l==this.g)e:{const On=so(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>On)&&(3!=On||this.g&&(this.h.h||this.g.oa()||L5(this.g)))){this.J||4!=On||7==p||Sf(),vM(this);var m=this.g.Z();this.X=m;t:if(_5(this)){var y=L5(this.g);l="";var M=y.length,k=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$a(this),Rf(this);var Q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==M-1)});y.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=200==m,function uEe(l,p,m,y,M,k,Q){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+p+"\n"+m+"\n"+k+" "+Q})}(this.i,this.u,this.A,this.l,this.R,On,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,yn=this.g;if((ot=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ot)){var Fe=ot;break t}}Fe=null}if(!(m=Fe)){this.o=!1,this.s=3,Kn(12),$a(this),Rf(this);break e}cl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,IM(this,m)}if(this.P){let qr;for(m=!0;!this.J&&this.C<Q.length;){if(qr=hEe(this,Q),qr==_M){4==On&&(this.s=4,Kn(14),m=!1),cl(this.i,this.l,null,"[Incomplete Response]");break}if(qr==g5){this.s=4,Kn(15),cl(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}cl(this.i,this.l,qr,null),IM(this,qr)}if(_5(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=On||0!=Q.length||this.h.h||(this.s=1,Kn(16),m=!1),this.o=this.o&&m,m){if(0<Q.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),SM(kn),kn.M=!0,Kn(11))}}else cl(this.i,this.l,Q,"[Invalid Chunked Response]"),$a(this),Rf(this)}else cl(this.i,this.l,Q,null),IM(this,Q);4==On&&$a(this),this.o&&!this.J&&(4==On?z5(this.j,this):(this.o=!1,Qy(this)))}else(function REe(l){const p={};l=(l.g&&2<=so(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const M=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[M]||[];p[M]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<Q.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),$a(this),Rf(this)}}}catch{}},as.prototype.cancel=function(){this.J=!0,$a(this)},as.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function lEe(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(Sf(),Kn(17)),$a(this),this.s=2,Rf(this)):y5(this,this.S-l)};var fEe=class{constructor(l,p){this.g=l,this.map=p}};function v5(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function I5(l){return!!l.h||!!l.g&&l.g.size>=l.j}function E5(l){return l.h?1:l.g?l.g.size:0}function EM(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function wM(l,p){l.g?l.g.add(p):l.h=p}function w5(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function b5(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return I(l.i)}function T5(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function gEe(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function pEe(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),M=y.length,k=0;k<M;k++)p.call(void 0,y[k],m&&m[k],l)}v5.prototype.cancel=function(){if(this.i=b5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var C5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ha){this.h=l.h,Yy(this,l.j),this.o=l.o,this.g=l.g,Jy(this,l.s),this.l=l.l;var p=l.i,m=new Nf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),S5(this,m),this.m=l.m}else l&&(p=String(l).match(C5))?(this.h=!1,Yy(this,p[1]||"",!0),this.o=Mf(p[2]||""),this.g=Mf(p[3]||"",!0),Jy(this,p[4]),this.l=Mf(p[5]||"",!0),S5(this,p[6]||"",!0),this.m=Mf(p[7]||"")):(this.h=!1,this.i=new Nf(null,this.h))}function oo(l){return new Ha(l)}function Yy(l,p,m){l.j=m?Mf(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Jy(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function S5(l,p,m){p instanceof Nf?(l.i=p,function wEe(l,p){p&&!l.j&&(cs(l),l.i=null,l.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(D5(this,y),M5(this,M,m))},l)),l.j=p}(l.i,l.h)):(m||(p=Pf(p,IEe)),l.i=new Nf(p,l.h))}function mt(l,p,m){l.i.set(p,m)}function Zy(l){return mt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mf(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Pf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,_Ee),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function _Ee(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Ha.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Pf(p,A5,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(Pf(p,A5,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(Pf(m,"/"==m.charAt(0)?vEe:yEe,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Pf(m,EEe)),l.join("")};var A5=/[#\/\?@]/g,yEe=/[#\?:]/g,vEe=/[#\?]/g,IEe=/[#\?@]/g,EEe=/#/g;function Nf(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function cs(l){l.g||(l.g=new Map,l.h=0,l.i&&function mEe(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),M=null;if(0<=y){var k=l[m].substring(0,y);M=l[m].substring(y+1)}else k=l[m];p(k,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function D5(l,p){cs(l),p=ul(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function R5(l,p){return cs(l),p=ul(l,p),l.g.has(p)}function M5(l,p,m){D5(l,p),0<m.length&&(l.i=null,l.g.set(ul(l,p),I(m)),l.h+=m.length)}function ul(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function us(l,p,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function CEe(){this.g=new aEe}function SEe(l,p,m){const y=m||"";try{T5(l,function(M,k){let Q=M;u(M)&&(Q=hM(M)),p.push(y+k+"="+encodeURIComponent(Q))})}catch(M){throw p.push(y+"type="+encodeURIComponent("_badmap")),M}}function xf(l){this.l=l.Ub||null,this.j=l.eb||!1}function Xy(l,p){xn.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function P5(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function kf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Of(l)}function Of(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function N5(l){let p="";return oe(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function bM(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=N5(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):mt(l,p,m))}function Mt(l){xn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Nf.prototype).add=function(l,p){cs(this),this.i=null,l=ul(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){cs(this),this.g.forEach(function(m,y){m.forEach(function(M){l.call(p,M,y,this)},this)},this)},t.na=function(){cs(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const M=l[y];for(let k=0;k<M.length;k++)m.push(p[y])}return m},t.V=function(l){cs(this);let p=[];if("string"==typeof l)R5(this,l)&&(p=p.concat(this.g.get(ul(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return cs(this),this.i=null,R5(this,l=ul(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),Q=this.V(y);for(y=0;y<Q.length;y++){var M=k;""!==Q[y]&&(M+="="+encodeURIComponent(String(Q[y]))),l.push(M)}}return this.i=l.join("&")},_(xf,fM),xf.prototype.g=function(){return new Xy(this.l,this.j)},xf.prototype.i=function(l){return function(){return l}}({}),_(Xy,xn),(t=Xy.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Of(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Of(this)),this.g&&(this.readyState=3,Of(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;P5(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?kf(this):Of(this),3==this.readyState&&P5(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,kf(this))},t.Qa=function(l){this.g&&(this.response=l,kf(this))},t.ga=function(){this.g&&kf(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(Xy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Mt,xn);var AEe=/^https?$/i,DEe=["POST","PUT"];function x5(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,k5(l),ev(l)}function k5(l){l.A||(l.A=!0,Wn(l,"complete"),Wn(l,"error"))}function O5(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=so(l)||2!=l.Z()))if(l.u&&4==so(l))r5(l.Ea,0,l);else if(Wn(l,"readystatechange"),4==so(l)){l.h=!1;try{const Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===Q){var M=String(l.D).match(C5)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!AEe.test(M?M.toLowerCase():"")}m=y}if(m)Wn(l,"complete"),Wn(l,"success");else{l.m=6;try{var k=2<so(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",k5(l)}}finally{ev(l)}}}function ev(l,p){if(l.g){V5(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Wn(l,"ready");try{m.onreadystatechange=y}catch{}}}function V5(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function so(l){return l.g?l.g.readyState:0}function L5(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Vf(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function F5(l){this.Aa=0,this.i=[],this.j=new Df,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vf("baseRetryDelayMs",5e3,l),this.cb=Vf("retryDelaySeedMs",1e4,l),this.Wa=Vf("forwardChannelMaxRetries",2,l),this.wa=Vf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new v5(l&&l.concurrentRequestLimit),this.Da=new CEe,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function TM(l){if(U5(l),3==l.G){var p=l.U++,m=oo(l.I);if(mt(m,"SID",l.K),mt(m,"RID",p),mt(m,"TYPE","terminate"),Lf(l,m),(p=new as(l,l.j,p)).L=2,p.v=Zy(oo(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=K5(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Qy(p)}G5(l)}function tv(l){l.g&&(SM(l),l.g.cancel(),l.g=null)}function U5(l){tv(l),l.u&&(a.clearTimeout(l.u),l.u=null),rv(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function nv(l){if(!I5(l.h)&&!l.s){l.s=!0;var p=l.Ga;If||Jz(),Ef||(If(),Ef=!0),rM.add(p,l),l.B=0}}function j5(l,p){var m;m=p?p.l:l.U++;const y=oo(l.I);mt(y,"SID",l.K),mt(y,"RID",m),mt(y,"AID",l.T),Lf(l,y),l.m&&l.o&&bM(y,l.m,l.o),m=new as(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=B5(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wM(l.h,m),yM(m,y,p)}function Lf(l,p){l.H&&oe(l.H,function(m,y){mt(p,y,m)}),l.l&&T5({},function(m,y){mt(p,y,m)})}function B5(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var M=l.i;let k=-1;for(;;){const Q=["count="+m];-1==k?0<m?(k=M[0].g,Q.push("ofs="+k)):k=0:Q.push("ofs="+k);let ot=!0;for(let yn=0;yn<m;yn++){let Fe=M[yn].g;const kn=M[yn].map;if(Fe-=k,0>Fe)k=Math.max(0,M[yn].g-100),ot=!1;else try{SEe(kn,Q,"req"+Fe+"_")}catch{y&&y(kn)}}if(ot){y=Q.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function $5(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;If||Jz(),Ef||(If(),Ef=!0),rM.add(p,l),l.v=0}}function CM(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Af(f(l.Fa,l),q5(l,l.v)),l.v++,0))}function SM(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function H5(l){l.g=new as(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=oo(l.qa);mt(p,"RID","rpc"),mt(p,"SID",l.K),mt(p,"AID",l.T),mt(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&mt(p,"TO",l.ja),mt(p,"TYPE","xmlhttp"),Lf(l,p),l.m&&l.o&&bM(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Zy(oo(p)),m.m=null,m.P=!0,m5(m,l)}function rv(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function z5(l,p){var m=null;if(l.g==p){rv(l),SM(l),l.g=null;var y=2}else{if(!EM(l.h,p))return;m=p.D,w5(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var M=l.B;Wn(y=Gy(),new h5(y,m)),nv(l)}else $5(l);else if(3==(M=p.s)||0==M&&0<p.X||!(1==y&&function MEe(l,p){return!(E5(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Af(f(l.Ga,l,p),q5(l,l.B)),l.B++,0)))}(l,p)||2==y&&CM(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),M){case 1:za(l,5);break;case 4:za(l,10);break;case 3:za(l,6);break;default:za(l,2)}}function q5(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function za(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const M=!y;y=new Ha(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Yy(y,"https"),Zy(y),M?function bEe(l,p){const m=new Df;if(a.Image){const y=new Image;y.onload=g(us,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(us,m,"TestLoadImage: error",!1,p,y),y.onabort=g(us,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(us,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function TEe(l,p){new Df;const y=new AbortController,M=setTimeout(()=>{y.abort(),us(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(M),us(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(M),us(0,0,!1,p)})}(y.toString(),m)}else Kn(2);l.G=0,l.l&&l.l.sa(p),G5(l),U5(l)}function G5(l){if(l.G=0,l.ka=[],l.l){const p=b5(l.h);(0!=p.length||0!=l.i.length)&&(w(l.ka,p),w(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function W5(l,p,m){var y=m instanceof Ha?oo(m):new Ha(m);if(""!=y.g)p&&(y.g=p+"."+y.g),Jy(y,y.s);else{var M=a.location;y=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var k=new Ha(null);y&&Yy(k,y),p&&(k.g=p),M&&Jy(k,M),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&mt(y,m,p),mt(y,"VER",l.la),Lf(l,y),y}function K5(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Mt(l.Ca&&!l.pa?new xf({eb:m}):l.pa)).Ha(l.J),p}function Q5(){}function iv(){}function wr(l,p){xn.call(this),this.g=new F5(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new ll(this)}function Y5(l){pM.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function J5(){gM.call(this),this.status=1}function ll(l){this.g=l}(t=Mt.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mM.g(),this.v=function a5(l){return l.h||(l.h=l.i())}(this.o?this.o:mM),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void x5(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DEe,p,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,Q]of m)this.g.setRequestHeader(k,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{V5(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){x5(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Wn(this,"complete"),Wn(this,"abort"),ev(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ev(this,!0)),Mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?O5(this):this.bb())},t.bb=function(){O5(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),sEe(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=F5.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){Kn(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=W5(this,null,this.W),nv(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new as(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(M.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=B5(this,M,p),mt(m=oo(this.I),"RID",l),mt(m,"CVER",22),this.D&&mt(m,"X-HTTP-Session-Id",this.D),Lf(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(N5(k)))+"&"+p:this.m&&bM(m,this.m,k)),wM(this.h,M),this.Ua&&mt(m,"TYPE","init"),this.P?(mt(m,"$req",p),mt(m,"SID","null"),M.T=!0,yM(M,m,null)):yM(M,m,p),this.G=2}}else 3==this.G&&(l?j5(this,l):0==this.i.length||I5(this.h)||j5(this))},t.Fa=function(){if(this.u=null,H5(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Af(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),tv(this),H5(this))},t.Za=function(){null!=this.C&&(this.C=null,tv(this),CM(this),Kn(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Q5.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},iv.prototype.g=function(l,p){return new wr(l,p)},_(wr,xn),wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){TM(this.g)},wr.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=hM(l),l=m);p.i.push(new fEe(p.Ya++,l)),3==p.G&&nv(p)},wr.prototype.N=function(){this.g.l=null,delete this.j,TM(this.g),delete this.g,wr.aa.N.call(this)},_(Y5,pM),_(J5,gM),_(ll,Q5),ll.prototype.ua=function(){Wn(this.g,"a")},ll.prototype.ta=function(l){Wn(this.g,new Y5(l))},ll.prototype.sa=function(l){Wn(this.g,new J5)},ll.prototype.ra=function(){Wn(this.g,"b")},iv.prototype.createWebChannel=iv.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,fj=zi.createWebChannelTransport=function(){return new iv},hj=zi.getStatEventTarget=function(){return Gy()},dj=zi.Event=Ba,kT=zi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wy.NO_ERROR=0,Wy.TIMEOUT=8,Wy.HTTP_ERROR=6,Ym=zi.ErrorCode=Wy,f5.COMPLETE="complete",lj=zi.EventType=f5,c5.EventType=Cf,Cf.OPEN="a",Cf.CLOSE="b",Cf.ERROR="c",Cf.MESSAGE="d",xn.prototype.listen=xn.prototype.K,ih=zi.WebChannel=c5,zi.FetchXmlHttpFactory=xf,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,uj=zi.XhrIo=Mt}).apply(typeof Qm<"u"?Qm:typeof self<"u"?self:typeof window<"u"?window:{});const gj="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let lu="11.10.0";const Oo=new wT("@firebase/firestore");function du(){return Oo.logLevel}function B(t,...e){if(Oo.logLevel<=Me.DEBUG){const n=e.map(OT);Oo.debug(`Firestore (${lu}): ${t}`,...n)}}function Lt(t,...e){if(Oo.logLevel<=Me.ERROR){const n=e.map(OT);Oo.error(`Firestore (${lu}): ${t}`,...n)}}function zn(t,...e){if(Oo.logLevel<=Me.WARN){const n=e.map(OT);Oo.warn(`Firestore (${lu}): ${t}`,...n)}}function OT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function X(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,_j(t,r,n)}function _j(t,e,n){let r=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Lt(r),new Error(r)}function ne(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||_j(e,i,r)}function K(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class yj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class Ule{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jle{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;ne(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(v(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne("string"==typeof r.accessToken,31837,{l:r}),new yj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(null===e||"string"==typeof e,2055,{h:e}),new on(e)}}class Ble{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $le{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ble(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ne(void 0===this.o,3512);const r=o=>{null!=o.error&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new VT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new VT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function LT(){return new TextEncoder}class FT{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function UT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ue(r,i);{const o=LT(),s=qle(o.encode(vj(t,n)),o.encode(vj(e,n)));return 0!==s?s:ue(r,i)}}n+=r>65535?2:1}return ue(t.length,e.length)}function vj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function qle(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function hu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const jT="__name__";class ci{constructor(e,n,r){void 0===n?n=0:n>e.length&&X(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ci.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ci.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return ue(e.length,n.length)}static compareSegments(e,n){const r=ci.isNumericId(e),i=ci.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ci.extractNumericId(e).compare(ci.extractNumericId(n)):UT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class Ae extends ci{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const Gle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends ci{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return Gle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===jT}static keyField(){return new vt([jT])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}class W{constructor(e){this.path=e}static fromPath(e){return new W(Ae.fromString(e))}static fromName(e){return new W(Ae.fromString(e).popFirst(5))}static empty(){return new W(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new Ae(e.slice()))}}function BT(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ej(t){if(!W.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wj(t){if(W.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Jm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":X(12329,{type:typeof t})}function De(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jm(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ca(t,e){if(!bj(t))throw new F(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(N.INVALID_ARGUMENT,n);return!0}const Cj=-62135596800;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cj)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ca(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-Cj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Kt("string",Qe._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Qe(0,0))}static max(){return new ie(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Dj(t){return new mr(t.readTime,t.key,-1)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(ie.min(),W.empty(),-1)}static max(){return new mr(ie.max(),W.empty(),-1)}}function HT(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=W.comparator(t.documentKey,e.documentKey),0!==n?n:ue(t.largestBatchId,e.largestBatchId))}class Mj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Vo(t){return zT.apply(this,arguments)}function zT(){return(zT=v(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;B("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new P((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Lo(t){return"IndexedDbTransactionError"===t.name}let yr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function ah(t){return null==t}function ch(t){return 0===t&&1/t==-1/0}function ede(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function kj(t){return t+"\x01\x01"}const lh="mutationQueues",$r="mutations",_u="documentMutations",dh="remoteDocumentGlobal",yu="targets",vu="targetDocuments",pa="targetGlobal",hh="collectionParents",Iu="clientMetadata",i_="bundles",o_="namedQueries";function Wj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ut{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new a_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new a_(this.root,e,this.comparator,!1)}getReverseIterator(){return new a_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new a_(this.root,e,this.comparator,!0)}}class a_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??mn.RED,this.left=i??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new mn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1,mn.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yj(this.data.getIterator())}getIteratorFrom(e){return new Yj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Yj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ar{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new ar([])}unionWith(e){let n=new Ye(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Jj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jj("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const Sde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(ne(!!t,39018),"string"==typeof t){let e=0;const n=Sde.exec(t);if(ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Gi(t){return"string"==typeof t?Rt.fromBase64String(t):Rt.fromUint8Array(t)}const Zj="server_timestamp",Xj="__type__",eB="__previous_value__",tB="__local_write_time__";function c_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[Xj])||void 0===n?void 0:n.stringValue)===Zj}function u_(t){const e=t.mapValue.fields[eB];return c_(e)?u_(e):e}function gh(t){const e=qi(t.mapValue.fields[tB].timestampValue);return new Qe(e.seconds,e.nanos)}class Ade{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const mh="(default)";class ga{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}const eC="__type__",nB="__max__",jo_mapValue={fields:{__type__:{stringValue:nB}}},tC="__vector__",wu="value";function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c_(t)?4:aB(t)?9007199254740991:f_(t)?10:11:X(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gh(t).isEqual(gh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=qi(i.timestampValue),a=qi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Gi(t.bytesValue).isEqual(Gi(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=It(i.doubleValue),a=It(o.doubleValue);return s===a?ch(s)===ch(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return hu(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Wj(s)!==Wj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!di(s[c],a[c])))return!1;return!0}(t,e);default:return X(52216,{left:t})}var o}function _h(t,e){return void 0!==(t.values||[]).find(n=>di(n,e))}function $o(t,e){if(t===e)return 0;const n=Bo(t),r=Bo(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=It(o.integerValue||o.doubleValue),c=It(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return rB(t.timestampValue,e.timestampValue);case 4:return rB(gh(t),gh(e));case 5:return UT(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Gi(o),c=Gi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ue(a[u],c[u]);if(0!==d)return d}return ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ue(It(o.latitude),It(s.latitude));return 0!==a?a:ue(It(o.longitude),It(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iB(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[wu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[wu])||void 0===c?void 0:c.arrayValue,I=ue((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==I?I:iB(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===jo_mapValue&&s===jo_mapValue)return 0;if(o===jo_mapValue)return 1;if(s===jo_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=UT(c[h],d[h]);if(0!==f)return f;const g=$o(a[c[h]],u[d[h]]);if(0!==g)return g}return ue(c.length,d.length)}(t.mapValue,e.mapValue);default:throw X(23264,{le:n})}}function rB(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ue(t,e);const n=qi(t),r=qi(e),i=ue(n.seconds,r.seconds);return 0!==i?i:ue(n.nanos,r.nanos)}function iB(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=$o(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function bu(t){return nC(t)}function nC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Gi(t.bytesValue).toBase64():"referenceValue"in t?W.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=nC(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${nC(n.fields[s])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function d_(t){switch(Bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=u_(t);return e?16+d_(e):16;case 5:return 2*t.stringValue.length;case 6:return Gi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+d_(o),0);case 10:case 11:return function(r){let i=0;return Uo(r.fields,(o,s)=>{i+=o.length+d_(s)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function ma(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rC(t){return!!t&&"integerValue"in t}function yh(t){return!!t&&"arrayValue"in t}function oB(t){return!!t&&"nullValue"in t}function sB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function h_(t){return!!t&&"mapValue"in t}function f_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[eC])||void 0===n?void 0:n.stringValue)===tC}function vh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Uo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nB}class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!h_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=vh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());h_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];h_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Uo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _n(vh(this.value))}}function dB(t){const e=[];return Uo(t.fields,(n,r)=>{const i=new vt([n]);if(h_(r)){const o=dB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ar(e)}class ft{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,ie.min(),ie.min(),ie.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,ie.min(),ie.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ie.min(),ie.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ho{constructor(e,n){this.position=e,this.inclusive=n}}function hB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(s.referenceValue),n.key):$o(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function fB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}class Ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function Mde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class pB{}class Pe extends pB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Pde(e,n,r):"array-contains"===n?new kde(e,r):"in"===n?new IB(e,r):"not-in"===n?new Ode(e,r):"array-contains-any"===n?new Vde(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Nde(e,r):new xde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison($o(n,this.value)):null!==n&&Bo(this.value)===Bo(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends pB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Je(e,n)}matches(e){return Tu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Tu(t){return"and"===t.op}function oC(t){return function gB(t){for(const e of t.filters)if(e instanceof Je)return!1;return!0}(t)&&Tu(t)}function sC(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+bu(t.value);if(oC(t))return t.filters.map(e=>sC(e)).join(",");{const e=t.filters.map(n=>sC(n)).join(",");return`${t.op}(${e})`}}function mB(t,e){return t instanceof Pe?(r=t,(i=e)instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)):t instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&mB(s,i.filters[a]),!0)}(t,e):void X(19439);var r,i}function yB(t){return t instanceof Pe?`${(n=t).field.canonicalString()} ${n.op} ${bu(n.value)}`:t instanceof Je?function(n){return n.op.toString()+" {"+n.getFilters().map(yB).join(" ,")+"}"}(t):"Filter";var n}class Pde extends Pe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nde extends Pe{constructor(e,n){super(e,"in",n),this.keys=vB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xde extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=vB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class kde extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yh(n)&&_h(n.arrayValue,this.value)}}class IB extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&_h(this.value.arrayValue,n)}}class Ode extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(_h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!_h(this.value.arrayValue,n)}}class Vde extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_h(this.value.arrayValue,r))}}class Lde{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function aC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Lde(t,e,n,r,i,o,s)}function _a(t){const e=K(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bu(r)).join(",")),e.Pe=n}return e.Pe}function Eh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Mde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fB(t.startAt,e.startAt)&&fB(t.endAt,e.endAt)}function p_(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Wi{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function Cu(t){return new Wi(t)}function TB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function cC(t){return null!==t.collectionGroup}function Su(t){const e=K(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(vt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ih(o,r))}),n.has(vt.keyField().canonicalString())||e.Te.push(new Ih(vt.keyField(),r))}return e.Te}function Dn(t){const e=K(t);return e.Ie||(e.Ie=function SB(t,e){if("F"===t.limitType)return aC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Ih(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ho(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ho(t.startAt.position,t.startAt.inclusive):null;return aC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Su(t))),e.Ie}function uC(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function m_(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wh(t,e){return Eh(Dn(t),Dn(e))&&t.limitType===e.limitType}function AB(t){return`${_a(Dn(t))}|lt:${t.limitType}`}function Au(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yB(i)).join(", ")}]`),ah(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bu(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Su(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=hB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Su(r),i)||r.endAt&&!function(s,a,c){const u=hB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Su(r),i)));var r,i}function RB(t){return(e,n)=>{let r=!1;for(const i of Su(t)){const o=Fde(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Fde(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?$o(c,u):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}class Ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Qj(this.inner)}size(){return this.innerSize}}const Ude=new ut(W.comparator);function cr(){return Ude}const MB=new ut(W.comparator);function Th(...t){let e=MB;for(const n of t)e=e.insert(n.key,n);return e}function PB(t){let e=MB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return Ch()}function NB(){return Ch()}function Ch(){return new Ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const jde=new ut(W.comparator),Bde=new Ye(W.comparator);function be(...t){let e=Bde;for(const n of t)e=e.add(n);return e}const $de=new Ye(ue);function dC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function xB(t){return{integerValue:""+t}}function kB(t,e){return function xj(t){return"number"==typeof t&&Number.isInteger(t)&&!ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?xB(e):dC(t,e)}class __{constructor(){this._=void 0}}function Hde(t,e,n){return t instanceof Du?function(i,o){const s={fields:{[Xj]:{stringValue:Zj},[tB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&c_(o)&&(o=u_(o)),o&&(s.fields[eB]=o),{mapValue:s}}(n,e):t instanceof ya?VB(t,e):t instanceof va?LB(t,e):function(i,o){const s=OB(i,o),a=FB(s)+FB(i.Ee);return rC(s)&&rC(i.Ee)?xB(a):dC(i.serializer,a)}(t,e)}function zde(t,e,n){return t instanceof ya?VB(t,e):t instanceof va?LB(t,e):n}function OB(t,e){return t instanceof Ru?rC(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Du extends __{}class ya extends __{constructor(e){super(),this.elements=e}}function VB(t,e){const n=UB(e);for(const r of t.elements)n.some(i=>di(i,r))||n.push(r);return{arrayValue:{values:n}}}class va extends __{constructor(e){super(),this.elements=e}}function LB(t,e){let n=UB(e);for(const r of t.elements)n=n.filter(i=>!di(i,r));return{arrayValue:{values:n}}}class Ru extends __{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function FB(t){return It(t.integerValue||t.doubleValue)}function UB(t){return yh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Sh{constructor(e,n){this.field=e,this.transform=n}}class Gde{constructor(e,n){this.version=e,this.transformResults=n}}class Et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function y_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class v_{}function jB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Pu(t.key,Et.none()):new Mu(t.key,t.data,Et.none());{const n=t.data,r=_n.empty();let i=new Ye(vt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Qi(t.key,r,new ar(i.toArray()),Et.none())}}function Wde(t,e,n){t instanceof Mu?function(i,o,s){const a=i.value.clone(),c=HB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qi?function(i,o,s){if(!y_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=HB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll($B(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ah(t,e,n,r){return t instanceof Mu?function(o,s,a,c){if(!y_(o.precondition,s))return a;const u=o.value.clone(),d=zB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qi?function(o,s,a,c){if(!y_(o.precondition,s))return a;const u=zB(o.fieldTransforms,c,s),d=s.data;return d.setAll($B(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,y_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Kde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=OB(r.transform,i||null);null!=o&&(null===n&&(n=_n.empty()),n.set(r.field,o))}return n||null}function BB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&hu(r,i,(o,s)=>function qde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ya&&i instanceof ya||r instanceof va&&i instanceof va?hu(r.elements,i.elements,di):r instanceof Ru&&i instanceof Ru?di(r.Ee,i.Ee):r instanceof Du&&i instanceof Du);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Mu extends v_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qi extends v_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $B(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function HB(t,e,n){const r=new Map;ne(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zde(s,a,n[i]))}return r}function zB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Hde(o,s,e))}return r}class Pu extends v_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hC extends v_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Wde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ah(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ah(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=jB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&hu(this.mutations,e.mutations,(n,r)=>BB(n,r))&&hu(this.baseMutations,e.baseMutations,(n,r)=>BB(n,r))}}class pC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return jde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new pC(e,n,r,i)}}class gC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qde{constructor(e,n){this.count=e,this.unchangedNames=n}}var Qt,Oe;function WB(t){if(void 0===t)return Lt("GRPC error has no .code"),N.UNKNOWN;switch(t){case Qt.OK:return N.OK;case Qt.CANCELLED:return N.CANCELLED;case Qt.UNKNOWN:return N.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return N.INTERNAL;case Qt.UNAVAILABLE:return N.UNAVAILABLE;case Qt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Qt.NOT_FOUND:return N.NOT_FOUND;case Qt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Qt.ABORTED:return N.ABORTED;case Qt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Qt.DATA_LOSS:return N.DATA_LOSS;default:return X(39323,{code:t})}}(Oe=Qt||(Qt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";const Yde=new ko([4294967295,4294967295],0);function KB(t){const e=LT().encode(t),n=new cj;return n.update(e),new Uint8Array(n.digest())}function QB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ko([n,r],0),new ko([i,o],0)]}class mC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dh(`Invalid padding: ${n}`);if(r<0)throw new Dh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Dh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Dh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ko.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ko.fromNumber(r)));return 1===i.compare(Yde)&&(i=new ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=KB(e),[r,i]=QB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=KB(e),[r,i]=QB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Dh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rh{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rh(ie.min(),i,new ut(ue),cr(),be())}}class Mh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mh(r,n,be(),be(),be())}}class E_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class YB{constructor(e,n){this.targetId=e,this.De=n}}class JB{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZB{constructor(){this.ve=0,this.Ce=XB(),this.Fe=Rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),n=be(),r=be();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new Mh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=XB()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Jde{constructor(e){this.We=e,this.Ge=new Map,this.ze=cr(),this.je=w_(),this.Je=w_(),this.He=new ut(ue)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(p_(o))if(0===r){const s=new W(o.path);this.Xe(n,s,ft.newNoDocument(s,ie.min()))}else ne(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Gi(r).toUint8Array()}catch(c){if(c instanceof Jj)return zn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mC(s,i,o)}catch(c){return zn(c instanceof Dh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&p_(a.target)){const c=new W(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ft.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=be();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new Rh(e,n,this.He,this.ze,r);return this.ze=cr(),this.je=w_(),this.Je=w_(),this.He=new ut(ue),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new ZB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ye(ue),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ye(ue),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||B("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ZB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function w_(){return new ut(W.comparator)}function XB(){return new ut(W.comparator)}const Zde={asc:"ASCENDING",desc:"DESCENDING"},Xde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ehe={and:"AND",or:"OR"};class the{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _C(t,e){return t.useProto3Json||ah(e)?e:{value:e}}function Nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nhe(t,e){return Nu(t,e.toTimestamp())}function Ft(t){return ne(!!t,49232),ie.fromTimestamp(function(n){const r=qi(n);return new Qe(r.seconds,r.nanos)}(t))}function yC(t,e){return vC(t,e).canonicalString()}function vC(t,e){const n=(i=t,new Ae(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function t$(t){const e=Ae.fromString(t);return ne(d$(e),10190,{key:e.toString()}),e}function Ph(t,e){return yC(t.databaseId,e.path)}function fi(t,e){const n=t$(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(i$(n))}function n$(t,e){return yC(t.databaseId,e)}function IC(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i$(t){return ne(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function o$(t,e,n){return{name:Ph(t,e),fields:n.value.mapValue.fields}}function s$(t,e){return{documents:[n$(t,e.path)]}}function T_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=n$(t,i);const o=function(u){if(0!==u.length)return l$(Je.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:zo((f=d).field),direction:ahe(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=_C(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function c$(t){let e=function r$(t){const e=t$(t);return 4===e.length?Ae.emptyPath():i$(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ne(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=u$(h);return f instanceof Je&&oC(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new Ih(xu((_=f).field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,ah(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new Ho((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new Ho(h.values||[],!h.before)}(n.endAt)),function bB(t,e,n,r,i,o,s,a){return new Wi(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function u$(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xu(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xu(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xu(n.unaryFilter.field);return Pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xu(n.unaryFilter.field);return Pe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):void 0!==t.fieldFilter?Pe.create(xu((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Je.create(n.compositeFilter.filters.map(r=>u$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t});var n}function ahe(t){return Zde[t]}function che(t){return Xde[t]}function uhe(t){return ehe[t]}function zo(t){return{fieldPath:t.canonicalString()}}function xu(t){return vt.fromServerFormat(t.fieldPath)}function l$(t){return t instanceof Pe?function(n){if("=="===n.op){if(sB(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(oB(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(sB(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(oB(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:che(n.op),value:n.value}}}(t):t instanceof Je?function(n){const r=n.getFilters().map(i=>l$(i));return 1===r.length?r[0]:{compositeFilter:{op:uhe(n.op),filters:r}}}(t):X(54877,{filter:t})}function lhe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Yi{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h${constructor(e){this.gt=e}}function S_(t){const e=c$({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?m_(e,e.limit,"L"):e}class ba{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(It(e.integerValue));else if("doubleValue"in e){const r=It(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),ch(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=qi(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Gi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?aB(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):f_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):X(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=wu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(It(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),W.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}ba.Ut=new ba;class vhe{constructor(){this.Dn=new AC}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(mr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class AC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ae.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ae.comparator)).toArray()}}new Uint8Array(0);const R$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(41943040,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);class Ca{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ca(0)}static ur(){return new Ca(-1)}}const O$="LruGarbageCollector";function L$([t,e],[n,r]){const i=ue(t,n);return 0===i?ue(e,r):i}class whe{constructor(e){this.Tr=e,this.buffer=new Ye(L$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();L$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class F${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;B(O$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,v(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Lo(r)?B(O$,"Ignoring IndexedDB error during garbage collection: ",r):yield Vo(r)}yield n.Rr(3e5)}))}}class bhe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return P.resolve(yr.ue);const r=new whe(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(R$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),du()<=Me.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class j${constructor(){this.changes=new Ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ahe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class q${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ah(r.mutation,i,ar.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Th();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr();const s=Ch(),a=Ch();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof Qi)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),Ah(d.mutation,u,d.mutation.getFieldMask(),Qe.now())):s.set(u.key,ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new Ahe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ch();let i=new ut((s,a)=>s-a),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||ar.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||be()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=NB();d.forEach(f=>{if(!o.has(f)){const g=jB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return W.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):cC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(hi());let a=-1,c=o;return s.next(u=>P.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,be())).next(d=>({batchId:a,changes:PB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Th();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Th();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,c=>{const u=(h=n,f=c.child(o),new Wi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,ft.newInvalidDocument(d)))});let a=Th();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&Ah(d.mutation,u,ar.empty(),Qe.now()),bh(n,u)&&(a=a.insert(c,u))}),a})}}class Dhe{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Ft(i.createTime)}),P.resolve();var i}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:S_(i.bundledQuery),readTime:Ft(i.readTime)}),P.resolve();var i}}class Rhe{constructor(){this.overlays=new ut(W.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=hi(),o=n.length+1,s=new W(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ut((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=hi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=hi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gC(n,r));let o=this.kr.get(n);void 0===o&&(o=be(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class Mhe{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}class DC{constructor(){this.qr=new Ye(an.Qr),this.$r=new Ye(an.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new an(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new W(new Ae([])),r=new an(n,e),i=new an(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new W(new Ae([])),r=new an(n,e),i=new an(n,e+1);let o=be();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new an(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return W.comparator(e.key,n.key)||ue(e.Hr,n.Hr)}static Ur(e,n){return ue(e.Hr,n.Hr)||W.comparator(e.key,n.key)}}class Phe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ye(an.Qr)}checkEmpty(e){return P.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new fC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new an(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),i=new an(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ue);return n.forEach(i=>{const o=new an(i,0),s=new an(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;W.isDocumentKey(o)||(o=o.child(""));const s=new an(new W(o),0);let a=new Ye(ue);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){ne(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{const o=new an(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new an(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Nhe{constructor(e){this.ni=e,this.docs=new ut(W.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ft.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr();const s=n.path,a=new W(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||HT(Dj(d),r)<=0||(i.has(d.key)||bh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){X(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xhe(this)}getSize(e){return P.resolve(this.size)}}class xhe extends j${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class khe{constructor(e){this.persistence=e,this.ii=new Ki(n=>_a(n),Eh),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new DC,this.targetCount=0,this._i=Ca.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ca(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}}class RC{constructor(e,n){this.ai={},this.overlays={},this.ui=new yr(0),this.ci=!1,this.ci=!0,this.li=new Mhe,this.referenceDelegate=e(this),this.hi=new khe(this),this.indexManager=new vhe,this.remoteDocumentCache=new Nhe(r=>this.referenceDelegate.Pi(r)),this.serializer=new h$(n),this.Ti=new Dhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Phe(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const i=new Ohe(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Ohe extends Mj{constructor(e){super(),this.currentSequenceNumber=e}}class k_{constructor(e){this.persistence=e,this.Ai=new DC,this.Ri=null}static Vi(e){return new k_(e)}get mi(){if(this.Ri)return this.Ri;throw X(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{const i=W.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class O_{constructor(e,n){this.persistence=e,this.gi=new Ki(r=>function An(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kj(e)),e=ede(t.get(n),e);return kj(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function U$(t,e){return new bhe(t,e)}(this,n)}static Vi(e,n){return new O_(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=d_(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return P.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class OC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=be(),i=be();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new OC(e,n.fromCache,r,i)}}class Lhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class K${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=UU()?8:function Pj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Vt())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Lhe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(du()<=Me.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Au(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(du()<=Me.DEBUG&&B("QueryEngine","Query:",Au(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(du()<=Me.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Au(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):P.resolve())}ps(e,n){if(TB(n))return P.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=m_(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=be(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,m_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return TB(n)||i.isEqual(ie.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(du()<=Me.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Au(n)),this.vs(e,s,n,function Aj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(1e9===r?new Qe(n+1,0):new Qe(n,r));return new mr(i,W.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new Ye(RB(e));return n.forEach((i,o)=>{bh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return du()<=Me.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Au(n)),this.gs.getDocumentsMatchingQuery(e,n,mr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const VC="LocalStore";class Uhe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ut(ue),this.Ms=new Ki(o=>_a(o),Eh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Y$(t,e){return LC.apply(this,arguments)}function LC(){return(LC=v(function*(t,e){const n=K(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=be();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function J$(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $he(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ju(t,e,n){return FC.apply(this,arguments)}function FC(){return(FC=v(function*(t,e,n){const r=K(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Lo(s))throw s;B(VC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function L_(t,e,n){const r=K(t);let i=ie.min(),o=be();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=K(c),f=h.Ms.get(d);return void 0!==f?P.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:be())).next(a=>(function t4(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function DB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class HC{constructor(){this.activeTargetIds=function lC(){return $de}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a4{constructor(){this.Fo=new HC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new HC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qhe{xo(e){}shutdown(){}}const c4="ConnectivityMonitor";class u4{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(c4,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){B(c4,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let j_=null;function qC(){return null===j_?j_=268435456+Math.round(2147483648*Math.random()):j_++,"0x"+j_.toString(16)}const GC="RestConnection",Ghe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Whe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===mh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=qC(),a=this.Go(e,n.toUriEncodedString());B(GC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=au(u);return this.jo(e,a,c,r,d).then(h=>(B(GC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw zn(GC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${Ghe[e]}`}terminate(){}}class Khe{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Mn="WebChannelConnection";class Qhe extends Whe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=qC();return new Promise((a,c)=>{const u=new uj;u.setWithCredentials(!0),u.listenOnce(lj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ym.NO_ERROR:const h=u.getResponseJson();B(Mn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Ym.TIMEOUT:B(Mn,`RPC '${e}' ${s} timed out`),c(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ym.HTTP_ERROR:const f=u.getStatus();if(B(Mn,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const I=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new F(I,_.message))}else c(new F(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new F(N.UNAVAILABLE,"Connection failed."));break;default:X(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{B(Mn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);B(Mn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=qC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fj(),a=hj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");B(Mn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new Khe({Ho:w=>{g?B(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(B(Mn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),B(Mn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Yo:()=>h.close()}),I=(w,A,D)=>{w.listen(A,U=>{try{D(U)}catch(J){setTimeout(()=>{throw J},0)}})};return I(h,ih.EventType.OPEN,()=>{g||(B(Mn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),I(h,ih.EventType.CLOSE,()=>{g||(g=!0,B(Mn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),I(h,ih.EventType.ERROR,w=>{g||(g=!0,zn(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),_.__(new F(N.UNAVAILABLE,"The operation could not be completed")))}),I(h,ih.EventType.MESSAGE,w=>{var A;if(!g){const D=w.data[0];ne(!!D,16349);const U=D,J=U?.error||(null===(A=U[0])||void 0===A?void 0:A.error);if(J){B(Mn,`RPC '${e}' stream ${i} received error:`,J);const ee=J.status;let oe=function(b){const S=Qt[b];if(void 0!==S)return WB(S)}(ee),C=J.message;void 0===oe&&(oe=N.INTERNAL,C="Unknown error status: "+ee+" with message "+J.message),g=!0,_.__(new F(oe,C)),h.close()}else B(Mn,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),I(a,dj.STAT_EVENT,w=>{w.stat===kT.PROXY?B(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===kT.NOPROXY&&B(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function B_(){return typeof document<"u"?document:null}function Aa(t){return new the(t,!0)}class WC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const d4="PersistentStream";class h4{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return v(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return v(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return v(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(v(function*(){e.state=0,e.start()}))}G_(e){return B(d4,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(B(d4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yhe extends h4{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function ihe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:X(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ne(void 0===d||"string"==typeof d,58123),Rt.fromBase64String(d||"")):(ne(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),Rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:WB(u.code);return new F(d,u.message||"")}(s);n=new JB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=fi(t,r.document.name),o=Ft(r.document.updateTime),s=r.document.createTime?Ft(r.document.createTime):ie.min(),a=new _n({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(i,o,s,a);n=new E_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=fi(t,r.document),o=r.readTime?Ft(r.readTime):ie.min(),s=ft.newNoDocument(i,o);n=new E_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=fi(t,r.document);n=new E_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return X(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Qde(i,o);n=new YB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Ft(s.readTime):ie.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=IC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=p_(c)?{documents:s$(o,c)}:{query:T_(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=e$(o,s.resumeToken);const u=_C(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Nu(o,s.snapshotVersion.toTimestamp());const u=_C(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function she(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=IC(this.serializer),n.removeTarget=e,this.k_(n)}}class Jhe extends h4{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ne(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function ohe(t,e){return t&&t.length>0?(ne(void 0!==e,14353),t.map(n=>function(i,o){let s=Ft(i.updateTime?i.updateTime:o);return s.isEqual(ie.min())&&(s=Ft(o)),new Gde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Ft(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=IC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Nh(t,e){let n;if(e instanceof Mu)n={update:o$(t,e.key,e.value)};else if(e instanceof Pu)n={delete:Ph(t,e.key)};else if(e instanceof Qi)n={update:o$(t,e.key,e.data),updateMask:lhe(e.fieldMask)};else{if(!(e instanceof hC))return X(16599,{Rt:e.type});n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Du)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ya)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof va)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ru)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw X(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nhe(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:X(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class Zhe{}class Xhe extends Zhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,vC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,vC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class efe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Lt(n),this._a=!1):B("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Da="RemoteStore";class tfe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(v(function*(){var c;Qo(s)&&(B(Da,"Restarting streams for network reachability change."),yield(c=v(function*(d){const h=K(d);h.Ia.add(4),yield Bu(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield jh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new efe(r,i)}}function jh(t){return KC.apply(this,arguments)}function KC(){return(KC=v(function*(t){if(Qo(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Bu(t){return QC.apply(this,arguments)}function QC(){return(QC=v(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function $_(t,e){const n=K(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),ZC(n)?JC(n):zu(n).x_()&&YC(n,e))}function $u(t,e){const n=K(t),r=zu(n);n.Ta.delete(e),r.x_()&&f4(n,e),0===n.Ta.size&&(r.x_()?r.B_():Qo(n)&&n.Aa.set("Unknown"))}function YC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zu(t).H_(e)}function f4(t,e){t.Ra.$e(e),zu(t).Y_(e)}function JC(t){t.Ra=new Jde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),zu(t).start(),t.Aa.aa()}function ZC(t){return Qo(t)&&!zu(t).M_()&&t.Ta.size>0}function Qo(t){return 0===K(t).Ia.size}function p4(t){t.Ra=void 0}function nfe(t){return XC.apply(this,arguments)}function XC(){return(XC=v(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function rfe(t){return eS.apply(this,arguments)}function eS(){return(eS=v(function*(t){t.Ta.forEach((e,n)=>{YC(t,e)})})).apply(this,arguments)}function ife(t,e){return tS.apply(this,arguments)}function tS(){return(tS=v(function*(t,e){p4(t),ZC(t)?(t.Aa.la(e),JC(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function ofe(t,e,n){return nS.apply(this,arguments)}function nS(){return nS=v(function*(t,e,n){if(t.Aa.set("Online"),e instanceof JB&&2===e.state&&e.cause)try{yield(r=v(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){B(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield H_(t,r)}else if(e instanceof E_?t.Ra.Ye(e):e instanceof YB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{const r=yield J$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Rt.EMPTY_BYTE_STRING,d.snapshotVersion)),f4(o,c);const h=new Yi(d.target,c,u,d.sequenceNumber);YC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B(Da,"Failed to raise snapshot:",r),yield H_(t,r)}var r}),nS.apply(this,arguments)}function H_(t,e,n){return rS.apply(this,arguments)}function rS(){return(rS=v(function*(t,e,n){if(!Lo(e))throw e;t.Ia.add(1),yield Bu(t),t.Aa.set("Offline"),n||(n=()=>J$(t.localStore)),t.asyncQueue.enqueueRetryable(v(function*(){B(Da,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield jh(t)}))})).apply(this,arguments)}function g4(t,e){return e().catch(n=>H_(t,n,e))}function Hu(t){return iS.apply(this,arguments)}function iS(){return(iS=v(function*(t){const e=K(t),n=Yo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;sfe(e);)try{const i=yield $he(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,afe(e,i)}catch(i){yield H_(e,i)}m4(e)&&_4(e)})).apply(this,arguments)}function sfe(t){return Qo(t)&&t.Pa.length<10}function afe(t,e){t.Pa.push(e);const n=Yo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function m4(t){return Qo(t)&&!Yo(t).M_()&&t.Pa.length>0}function _4(t){Yo(t).start()}function cfe(t){return oS.apply(this,arguments)}function oS(){return(oS=v(function*(t){Yo(t).na()})).apply(this,arguments)}function ufe(t){return sS.apply(this,arguments)}function sS(){return(sS=v(function*(t){const e=Yo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function lfe(t,e,n){return aS.apply(this,arguments)}function aS(){return(aS=v(function*(t,e,n){const r=t.Pa.shift(),i=pC.from(r,e,n);yield g4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hu(t)})).apply(this,arguments)}function dfe(t,e){return cS.apply(this,arguments)}function cS(){return cS=v(function*(t,e){var n;e&&Yo(t).Z_&&(yield(n=v(function*(i,o){if(function GB(t){switch(t){case N.OK:return X(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return X(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();Yo(i).N_(),yield g4(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Hu(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),m4(t)&&_4(t)}),cS.apply(this,arguments)}function y4(t,e){return uS.apply(this,arguments)}function uS(){return(uS=v(function*(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),B(Da,"RemoteStore received new credentials");const r=Qo(n);n.Ia.add(3),yield Bu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield jh(n)})).apply(this,arguments)}function lS(t,e){return dS.apply(this,arguments)}function dS(){return(dS=v(function*(t,e){const n=K(t);e?(n.Ia.delete(2),yield jh(n)):e||(n.Ia.add(2),yield Bu(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function zu(t){return t.Va||(t.Va=function(n,r,i){const o=K(n);return o.ia(),new Yhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:nfe.bind(null,t),e_:rfe.bind(null,t),n_:ife.bind(null,t),J_:ofe.bind(null,t)}),t.da.push(function(){var e=v(function*(n){n?(t.Va.N_(),ZC(t)?JC(t):t.Aa.set("Unknown")):(yield t.Va.stop(),p4(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function Yo(t){return t.ma||(t.ma=function(n,r,i){const o=K(n);return o.ia(),new Jhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:cfe.bind(null,t),n_:dfe.bind(null,t),ea:ufe.bind(null,t),ta:lfe.bind(null,t)}),t.da.push(function(){var e=v(function*(n){n?(t.ma.N_(),yield Hu(t)):(yield t.ma.stop(),t.Pa.length>0&&(B(Da,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class hS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new hS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qu(t,e){if(Lt("AsyncQueue",`${e}: ${t}`),Lo(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Th(),this.sortedSet=new ut(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class v4{constructor(){this.fa=new ut(W.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):X(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ma{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Ma(e,n,Ra.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class hfe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class ffe{constructor(){this.queries=I4(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=K(n),o=i.queries;i.queries=I4(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new F(N.ABORTED,"Firestore shutting down"))}}function I4(){return new Ki(t=>AB(t),wh)}function fS(t,e){return pS.apply(this,arguments)}function pS(){return(pS=v(function*(t,e){const n=K(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new hfe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=qu(s,`Initialization of query '${Au(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&_S(n)})).apply(this,arguments)}function gS(t,e){return mS.apply(this,arguments)}function mS(){return(mS=v(function*(t,e){const n=K(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function pfe(t,e){const n=K(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&_S(n)}function gfe(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function _S(t){t.Da.forEach(e=>{e.next()})}var yS,E4;(E4=yS||(yS={})).Fa="default",E4.Cache="cache";class vS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yS.Cache}}class C4{constructor(e){this.key=e}}class S4{constructor(e){this.key=e}}class A4{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=RB(e),this.eu=new Ra(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new v4,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=bh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?_!==I&&(r.track({type:3,doc:g}),w=!0):this.iu(f,g)||(r.track({type:2,doc:g}),w=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(g?(s=s.add(g),o=I?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const I=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{At:w})}};return I(g)-I(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new Ma(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new v4,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=be(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new S4(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new C4(r))}),n}uu(e){this.Ha=e.qs,this.Za=be();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ma.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Jo="SyncEngine";class mfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _fe{constructor(e){this.key=e,this.lu=!1}}class yfe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ki(a=>AB(a),wh),this.Tu=new Map,this.Iu=new Set,this.du=new ut(W.comparator),this.Eu=new Map,this.Au=new DC,this.Ru={},this.Vu=new Map,this.mu=Ca.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function vfe(t,e){return ES.apply(this,arguments)}function ES(){return(ES=v(function*(t,e,n=!0){const r=z_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield D4(r,e,n,!0),i})).apply(this,arguments)}function Ife(t,e){return wS.apply(this,arguments)}function wS(){return(wS=v(function*(t,e){const n=z_(t);yield D4(n,e,!0,!1)})).apply(this,arguments)}function D4(t,e,n,r){return bS.apply(this,arguments)}function bS(){return(bS=v(function*(t,e,n,r){const i=yield function Uu(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Yi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,Dn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function TS(t,e,n,r,i){return CS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&$_(t.remoteStore,i),a})).apply(this,arguments)}function CS(){return CS=v(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=v(function*(w,A,D,U){let J=A.view.nu(D);J.Ds&&(J=yield L_(w.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,J)));const ee=U&&U.targetChanges.get(A.targetId),oe=U&&null!=U.targetMismatches.get(A.targetId),C=A.view.applyChanges(J,w.isPrimaryClient,ee,oe);return VS(w,A.targetId,C._u),C.snapshot}),function I(w,A,D,U){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield L_(t.localStore,e,!0),s=new A4(e,o.qs),a=s.nu(o.documents),c=Mh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);VS(t,n,u._u);const d=new mfe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),CS.apply(this,arguments)}function Efe(t,e,n){return SS.apply(this,arguments)}function SS(){return(SS=v(function*(t,e,n){const r=K(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!wh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ju(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$u(r.remoteStore,i.targetId),Gu(r,i.targetId)}).catch(Vo))):(Gu(r,i.targetId),yield ju(r.localStore,i.targetId,!0))})).apply(this,arguments)}function wfe(t,e){return AS.apply(this,arguments)}function AS(){return(AS=v(function*(t,e){const n=K(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$u(n.remoteStore,r.targetId))})).apply(this,arguments)}function DS(){return(DS=v(function*(t,e,n){const r=function WS(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sfe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=K(s),u=Qe.now(),d=a.reduce((g,_)=>g.add(_.key),be());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=cr(),I=be();return c.Os.getEntries(g,d).next(w=>{_=w,_.forEach((A,D)=>{D.isValidDocument()||(I=I.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(w=>{h=w;const A=[];for(const D of a){const U=Kde(D,h.get(D.key).overlayedDocument);null!=U&&A.push(new Qi(D.key,U,dB(U.value.mapValue),Et.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(w=>{f=w;const A=w.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(g,w.batchId,A)})}).then(()=>({batchId:f.batchId,changes:PB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new ut(ue)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Ji(r,i.changes),yield Hu(r.remoteStore)}catch(i){const o=qu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function R4(t,e){return RS.apply(this,arguments)}function RS(){return(RS=v(function*(t,e){const n=K(t);try{const r=yield function Bhe(t,e){const n=K(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var I,w,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(Rt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),w=g,A=d,(0===(I=f).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=cr(),u=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function Z$(t,e,n){let r=be(),i=be();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):B(VC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ie.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ne(s.lu,14607):i.removedDocuments.size>0&&(ne(s.lu,42227),s.lu=!1))}),yield Ji(n,r,e)}catch(r){yield Vo(r)}})).apply(this,arguments)}function M4(t,e,n){const r=K(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=K(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&_S(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Tfe(t,e,n){return MS.apply(this,arguments)}function MS(){return(MS=v(function*(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ut(W.comparator);s=s.insert(o,ft.newNoDocument(o,ie.min()));const a=be().add(o),c=new Rh(ie.min(),new Map,new ut(ue),s,a);yield R4(r,c),r.du=r.du.remove(o),r.Eu.delete(e),LS(r)}else yield ju(r.localStore,e,!1).then(()=>Gu(r,e,n)).catch(Vo)})).apply(this,arguments)}function Cfe(t,e){return PS.apply(this,arguments)}function PS(){return(PS=v(function*(t,e){const n=K(t),r=e.batch.batchId;try{const i=yield function jhe(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=P.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(I=>{const w=u.docVersions.get(_);ne(null!==w,48541),I.version.compareTo(w)<0&&(h.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);OS(n,r,null),kS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ji(n,i)}catch(i){yield Vo(i)}})).apply(this,arguments)}function Sfe(t,e,n){return NS.apply(this,arguments)}function NS(){return(NS=v(function*(t,e,n){const r=K(t);try{const i=yield function(s,a){const c=K(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(ne(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);OS(r,e,n),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ji(r,i)}catch(i){yield Vo(i)}})).apply(this,arguments)}function kS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function OS(t,e,n){const r=K(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Gu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||P4(t,r)})}function P4(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&($u(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),LS(t))}function VS(t,e,n){for(const r of n)r instanceof C4?(t.Au.addReference(r.key,e),Dfe(t,r)):r instanceof S4?(B(Jo,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||P4(t,r.key)):X(19791,{yu:r})}function Dfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(B(Jo,"New document in limbo: "+n),t.Iu.add(r),LS(t))}function LS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new W(Ae.fromString(e)),r=t.mu.next();t.Eu.set(r,new _fe(n)),t.du=t.du.insert(n,r),$_(t.remoteStore,new Yi(Dn(Cu(n.path)),r,"TargetPurposeLimboResolution",yr.ue))}}function Ji(t,e,n){return FS.apply(this,arguments)}function FS(){return FS=v(function*(t,e,n){const r=K(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=OC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=v(function*(u,d){const h=K(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(d,g=>P.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>P.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Lo(f))throw f;B(VC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),w=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,w)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),FS.apply(this,arguments)}function Rfe(t,e){return US.apply(this,arguments)}function US(){return(US=v(function*(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){B(Jo,"User change. New user:",e.toKey());const r=yield Y$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new F(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ji(n,r.Bs)}var o})).apply(this,arguments)}function Mfe(t,e){const n=K(t),r=n.Eu.get(e);if(r&&r.lu)return be().add(r.key);{let i=be();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function z_(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tfe.bind(null,e),e.hu.J_=pfe.bind(null,e.eventManager),e.hu.pu=gfe.bind(null,e.eventManager),e}let q_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return v(function*(){r.serializer=Aa(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function Q$(t,e,n,r){return new Uhe(t,e,n,r)}(this.persistence,new K$,n.initialUser,this.serializer)}Du(n){return new RC(k_.Vi,this.serializer)}bu(n){return new a4}terminate(){var n=this;return v(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class KS extends q_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return ne(this.persistence.referenceDelegate instanceof O_,46915),new F$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new RC(r=>O_.Vi(r,n),this.serializer)}}let Wu=(()=>{class t{initialize(n,r){var i=this;return v(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>M4(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=Rfe.bind(null,i.syncEngine),yield lS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new ffe}createDatastore(n){const r=Aa(n.databaseInfo.databaseId),i=new Qhe(n.databaseInfo);return new Xhe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>M4(this.syncEngine,r,0),c=u4.C()?new u4:new qhe,new tfe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new yfe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return v(function*(){var r,i,o;yield(o=v(function*(a){const c=K(a);B(Da,"RemoteStore shutting down."),c.Ia.add(5),yield Bu(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class G_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Zo="FirestoreClient";class Hfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=FT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=v(function*(c){B(Zo,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(B(Zo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=qu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function YS(t,e){return JS.apply(this,arguments)}function JS(){return JS=v(function*(t,e){t.asyncQueue.verifyOperationInProgress(),B(Zo,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=v(function*(o){r.isEqual(o)||(yield Y$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{zn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{zn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),JS.apply(this,arguments)}function V4(t,e){return ZS.apply(this,arguments)}function ZS(){return(ZS=v(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function XS(t){return eA.apply(this,arguments)}(t);B(Zo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>y4(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>y4(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function eA(){return(eA=v(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Zo,"Using user provided OfflineComponentProvider");try{yield YS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;zn("Error using user provided cache. Falling back to memory cache: "+e),yield YS(t,new q_)}}else B(Zo,"Using default OfflineComponentProvider"),yield YS(t,new KS(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function W_(t){return tA.apply(this,arguments)}function tA(){return(tA=v(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Zo,"Using user provided OnlineComponentProvider"),yield V4(t,t._uninitializedComponentsProvider._online)):(B(Zo,"Using default OnlineComponentProvider"),yield V4(t,new Wu))),t._onlineComponents})).apply(this,arguments)}function Qu(t){return rA.apply(this,arguments)}function rA(){return(rA=v(function*(t){const e=yield W_(t),n=e.eventManager;return n.onListen=vfe.bind(null,e.syncEngine),n.onUnlisten=Efe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ife.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wfe.bind(null,e.syncEngine),n})).apply(this,arguments)}function H4(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const z4=new Map,q4="firestore.googleapis.com";class W4{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q4,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Wle(t,e,n,r){if(!0===e&&!0===r)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=H4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W4(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Fle;switch(r.type){case"firstParty":return new $le(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return v(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=z4.get(n);r&&(B("ComponentProvider","Removing Datastore"),z4.delete(n),r.terminate())}(this),Promise.resolve()}}class cn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cn(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ca(n,tt._jsonSchema))return new tt(e,r||null,new W(Ae.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:Kt("string",tt._jsonSchemaVersion),referencePath:Kt("string")};class gi extends cn{constructor(e,n,r){super(e,n,Cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new W(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function iA(t,e,...n){if(t=Wt(t),BT("collection","path",e),t instanceof Bh){const r=Ae.fromString(e,...n);return wj(r),new gi(t,null,r)}{if(!(t instanceof tt||t instanceof gi))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return wj(r),new gi(t.firestore,null,r)}}function Yu(t,e,...n){if(t=Wt(t),1===arguments.length&&(e=FT.newId()),BT("doc","path",e),t instanceof Bh){const r=Ae.fromString(e,...n);return Ej(r),new tt(t,null,new W(r))}{if(!(t instanceof tt||t instanceof gi))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Ej(r),new tt(t.firestore,t instanceof gi?t.converter:null,new W(r))}}const Q4="AsyncQueue";class Y4{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WC(this,"async_queue_retry"),this.oc=()=>{const r=B_();r&&B(Q4,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=B_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=B_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new sn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return v(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!Lo(n))throw n;B(Q4,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Lt("INTERNAL UNHANDLED ERROR: ",J4(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=hS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&X(47125,{hc:J4(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return v(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function J4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class it extends Bh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Y4,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return v(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new Y4(n),e._firestoreClient=void 0,yield n}})()}}function rpe(t,e){const n="object"==typeof t?t:ej(),r="string"==typeof t?t:e||mh,i=Km(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=PU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function tpe(t,e,n,r={}){var i;t=De(t,Bh);const o=au(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(OU(`https://${c}`),LU("Firestore",!0)),s.host!==q4&&s.host!==c&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Bi(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=on.MOCK_USER;else{d=function Qce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hm(JSON.stringify({alg:"none",type:"JWT"})),Hm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new on(f)}t._authCredentials=new Ule(new yj(d,h))}}(i,...o)}return i}function bt(t){if(t._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function Z4(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Ade(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,H4(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Hfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(Rt.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ca(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:Kt("string",vr._jsonSchemaVersion),bytes:Kt("string")};class Pa{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Na{constructor(e){this._methodName=e}}class mi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(e){if(ca(e,mi._jsonSchema))return new mi(e.latitude,e.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Kt("string",mi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class Hr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ca(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new Hr(e.vectorValues);throw new F(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Kt("string",Hr._jsonSchemaVersion),vectorValues:Kt("object")};const spe=/^__.*__$/;class ape{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mu(e,this.data,n,this.fieldTransforms)}}class tH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ec:t})}}class K_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new K_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return J_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(nH(this.Ec)&&spe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class cpe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Aa(e)}Dc(e,n,r,i=!1){return new K_({Ec:e,methodName:n,bc:r,path:vt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xa(t){const e=t._freezeSettings(),n=Aa(t._databaseId);return new cpe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);hA("Data must be an object, but it was:",s,r);const a=oH(r,s);let c,u;if(o.merge)c=new ar(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=zh(e,h,n);if(!s.contains(f))throw new F(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);aH(d,f)||d.push(f)}c=new ar(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new ape(new _n(a),c,u)}class Hh extends Na{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}class sA extends Na{_toFieldTransform(e){return new Sh(e.path,new Du)}isEqual(e){return e instanceof sA}}function ka(t,e){if(sH(t=Wt(t)))return hA("Unsupported field value:",e,t),oH(t,e);if(t instanceof Na)return function(r,i){if(!nH(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=ka(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Wt(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return kB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Qe.fromDate(r);return{timestampValue:Nu(i.serializer,o)}}if(r instanceof Qe){const o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nu(i.serializer,o)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:e$(i.serializer,r._byteString)};if(r instanceof tt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hr)return s=r,a=i,{mapValue:{fields:{[eC]:{stringValue:tC},[wu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return dC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${Jm(r)}`)}(t,e)}function oH(t,e){const n={};return Qj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(t,(r,i)=>{const o=ka(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function sH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof mi||t instanceof vr||t instanceof tt||t instanceof Na||t instanceof Hr)}function hA(t,e,n){if(!sH(n)||!bj(n)){const r=Jm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function zh(t,e,n){if((e=Wt(e))instanceof Pa)return e._internalPath;if("string"==typeof e)return Y_(t,e);throw J_("Field path arguments must be of type string or ",t,!1,void 0,n)}const upe=new RegExp("[~\\*/\\[\\]]");function Y_(t,e,n){if(e.search(upe)>=0)throw J_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw J_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function J_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new F(N.INVALID_ARGUMENT,a+t+c)}function aH(t,e){return t.some(n=>n.isEqual(e))}class qh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Z_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class lpe extends qh{data(){return super.data()}}function Z_(t,e){return"string"==typeof e?Y_(t,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}class fA{}class Gh extends fA{}class Wh extends Gh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return hH(e._query,n),new cn(e.firestore,e.converter,uC(e._query,n))}_parse(e){const n=xa(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){dH(h,d);const _=[];for(const I of h)_.push(lH(c,o,I));f={arrayValue:{values:_}}}else f=lH(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||dH(h,d),f=function iH(t,e,n,r=!1){return ka(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Pe.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zu extends fA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)hH(s,c),s=uC(s,c)}(e._query,n),new cn(e.firestore,e.converter,uC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pA extends Gh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ih(o,s)}(e._query,this._field,this._direction);return new cn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Wi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function lH(t,e,n){if("string"==typeof(n=Wt(n))){if(""===n)throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cC(e)&&-1!==n.indexOf("/"))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!W.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ma(t,new W(r))}if(n instanceof tt)return ma(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(n)}.`)}function dH(t,e){if(!Array.isArray(t)||0===t.length)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hH(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new F(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pH{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Uo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[wu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>It(s.doubleValue));return new Hr(o)}convertGeoPoint(e){return new mi(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gh(e));default:return null}}convertTimestamp(e){const n=qi(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);ne(d$(r),9688,{name:e});const i=new ga(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(n)||Lt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function ny(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ir extends qh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Z_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ir._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}Ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ir._jsonSchema={type:Kt("string",Ir._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class ry extends Ir{data(e={}){return super.data(e)}}class Er{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ry(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new ry(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new ry(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:ppe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Er._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=FT.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function ppe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}Er._jsonSchemaVersion="firestore/querySnapshot/1.0",Er._jsonSchema={type:Kt("string",Er._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class es extends pH{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function mH(t){t=De(t,cn);const e=De(t.firestore,it),n=bt(e),r=new es(e);return function cH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function B4(t,e,n={}){const r=new sn;return t.asyncQueue.enqueueAndForget(v(function*(){return function(o,s,a,c,u){const d=new G_({next:f=>{d.Ou(),s.enqueueAndForget(()=>gS(o,h)),f.fromCache&&"server"===c.source?u.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new vS(a,d,{includeMetadataChanges:!0,ka:!0});return fS(o,h)}(yield Qu(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new Er(e,r,t,i))}function _H(t,e,n,...r){t=De(t,tt);const i=De(t.firestore,it),o=xa(i);let s;return s="string"==typeof(e=Wt(e))||e instanceof Pa?function dA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[zh(e,r,n)],c=[i];if(o.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(zh(e,o[f])),c.push(o[f+1]);const u=[],d=_n.empty();for(let f=a.length-1;f>=0;--f)if(!aH(u,a[f])){const g=a[f];let _=c[f];_=Wt(_);const I=s.gc(g);if(_ instanceof Hh)u.push(g);else{const w=ka(_,I);null!=w&&(u.push(g),d.set(g,w))}}const h=new ar(u);return new tH(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function lA(t,e,n,r){const i=t.Dc(1,e,n);hA("Data must be an object, but it was:",i,r);const o=[],s=_n.empty();Uo(r,(c,u)=>{const d=Y_(e,c,n);u=Wt(u);const h=i.gc(d);if(u instanceof Hh)o.push(d);else{const f=ka(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new ar(o);return new tH(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),Kh(i,[s.toMutation(t._key,Et.exists(!0))])}function yH(t){return Kh(De(t.firestore,it),[new Pu(t._key,Et.none())])}function mpe(t,e){const n=De(t.firestore,it),r=Yu(t),i=ny(t.converter,e);return Kh(n,[Q_(xa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function Kh(t,e){return function(r,i){const o=new sn;return r.asyncQueue.enqueueAndForget(v(function*(){return function bfe(t,e,n){return DS.apply(this,arguments)}(yield function nA(t){return W_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(bt(t),e)}function iy(){return new sA("serverTimestamp")}!function(e,n=!0){lu=uu,cu(new ia("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new it(new jle(r.getProvider("auth-internal")),new Hle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Hi(gj,"4.8.0",e),Hi(gj,"4.8.0","esm2017")}();const Npe=function bH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},TH=new Xd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sy=new wT("@firebase/auth");function ay(t,...e){sy.logLevel<=Me.ERROR&&sy.error(`Auth (${uu}): ${t}`,...e)}function ur(t,...e){throw vA(t,...e)}function qn(t,...e){return vA(t,...e)}function yA(t,e,n){const r=Object.assign(Object.assign({},Npe()),{[e]:n});return new Xd("auth","Firebase",r).create(e,{appName:t.name})}function un(t){return yA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TH.create(t,...e)}function q(t,e,...n){if(!t)throw vA(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ay(e),new Error(e)}function Zi(t,e){t||_i(e)}function Jh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function CH(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function kpe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function IA(){return"http:"===CH()||"https:"===CH()}()||function tue(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Zh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=function Zce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}()||function nue(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return kpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function EA(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class SH{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void _i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void _i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void _i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Lpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fpe=new Zh(3e4,6e4);function pt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function gt(t,e,n,r){return wA.apply(this,arguments)}function wA(){return(wA=v(function*(t,e,n,r,i={}){return AH(t,i,v(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=eh(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function eue(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&au(t.emulatorConfig.host)&&(u.credentials="include"),SH.fetch()(yield DH(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function AH(t,e,n){return bA.apply(this,arguments)}function bA(){return(bA=v(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vpe),e);try{const i=new jpe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Xh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Xh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Xh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Xh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yA(t,d,u);ur(t,d)}}catch(i){if(i instanceof ji)throw i;ur(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Xi(t,e,n,r){return TA.apply(this,arguments)}function TA(){return(TA=v(function*(t,e,n,r,i={}){const o=yield gt(t,e,n,r,i);return"mfaPendingCredential"in o&&ur(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function DH(t,e,n,r){return CA.apply(this,arguments)}function CA(){return(CA=v(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?EA(t.config,i):`${t.config.apiScheme}://${i}`;return Lpe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class jpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),Fpe.get())})}}function Xh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qn(t,e,r);return i.customData._tokenResponse=n,i}function DA(){return(DA=v(function*(t,e){return gt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function cy(t,e){return MA.apply(this,arguments)}function MA(){return(MA=v(function*(t,e){return gt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ef(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function PA(){return(PA=v(function*(t,e=!1){const n=Wt(t),r=yield n.getIdToken(e),i=uy(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ef(NA(i.auth_time)),issuedAtTime:ef(NA(i.iat)),expirationTime:ef(NA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function NA(t){return 1e3*Number(t)}function uy(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return ay("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jd(n);return i?JSON.parse(i):(ay("Failed to decode base64 JWT payload"),null)}catch(i){return ay("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xH(t){const e=uy(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function eo(t,e){return xA.apply(this,arguments)}function xA(){return(xA=v(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof ji&&function qpe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Gpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield n.iteration()}),r)}iteration(){var e=this;return v(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class kA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ef(this.lastLoginAt),this.creationTime=ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tf(t){return OA.apply(this,arguments)}function OA(){return(OA=v(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield eo(t,cy(n,{idToken:r}));q(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?kH(o.providerUserInfo):[],a=function Kpe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new kA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function VA(){return(VA=v(function*(t){const e=Wt(t);yield tf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function kH(t){return t.map(e=>{var{providerId:n}=e,r=vm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function LA(){return(LA=v(function*(t,e){const n=yield AH(t,{},v(function*(){const r=eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield DH(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&au(t.emulatorConfig.host)&&(c.credentials="include"),SH.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function FA(){return(FA=v(function*(t,e){return gt(t,"POST","/v2/accounts:revokeToken",pt(t,e))})).apply(this,arguments)}class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xH(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(0!==e.length,"internal-error");const n=xH(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return v(function*(r,i=!1){return i||!n.accessToken||n.isExpired?(q(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return v(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Qpe(t,e){return LA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new el;return r&&(q("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(q("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(q("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return _i("not implemented")}}function ns(t,e){q("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return v(function*(){const r=yield eo(n,n.stsTokenManager.getToken(n.auth,e));return q(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function zpe(t){return PA.apply(this,arguments)}(this,e)}reload(){return function Wpe(t){return VA.apply(this,arguments)}(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return v(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield tf(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return v(function*(){if(Br(e.auth.app))return Promise.reject(un(e.auth));const n=yield e.getIdToken();return yield eo(e,function $pe(t,e){return DA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,I=null!==(a=n.tenantId)&&void 0!==a?a:void 0,w=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:U,emailVerified:J,isAnonymous:ee,providerData:oe,stsTokenManager:C}=n;q(U&&C,e,"internal-error");const E=el.fromJSON(this.name,C);q("string"==typeof U,e,"internal-error"),ns(h,e.name),ns(f,e.name),q("boolean"==typeof J,e,"internal-error"),q("boolean"==typeof ee,e,"internal-error"),ns(g,e.name),ns(_,e.name),ns(I,e.name),ns(w,e.name),ns(A,e.name),ns(D,e.name);const b=new zr({uid:U,auth:e,email:f,emailVerified:J,displayName:h,isAnonymous:ee,photoURL:_,phoneNumber:g,tenantId:I,stsTokenManager:E,createdAt:A,lastLoginAt:D});return oe&&Array.isArray(oe)&&(b.providerData=oe.map(S=>Object.assign({},S))),w&&(b._redirectEventId=w),b}static _fromIdTokenResponse(e,n){return v(function*(r,i,o=!1){const s=new el;s.updateFromServerResponse(i);const a=new zr({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield tf(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return v(function*(){const i=n.users[0];q(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?kH(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new el;a.updateFromIdToken(r);const c=new zr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new kA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const OH=new Map;function to(t){Zi(t instanceof Function,"Expected a class definition");let e=OH.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OH.set(t,e),e)}const VH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(n,r){var i=this;return v(function*(){i.storage[n]=r})()}_get(n){var r=this;return v(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return v(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ly(t,e,n){return`firebase:${t}:${e}:${n}`}class tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ly(this.userKey,i.apiKey,o),this.fullPersistenceKey=ly("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield cy(e.auth,{idToken:n}).catch(()=>{});return r?zr._fromGetAccountInfoResponse(e.auth,r,n):null}return zr._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return v(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return v(function*(r,i,o="authUser"){if(!i.length)return new tl(to(VH),r,o);const s=(yield Promise.all(i.map(function(){var h=v(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||to(VH);const c=ly(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield cy(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield zr._fromGetAccountInfoResponse(r,_,f)}else g=zr._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=v(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new tl(a,r,o)):new tl(a,r,o)}).apply(this,arguments)}}function LH(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HH(e))return"Blackberry";if(zH(e))return"Webos";if(UH(e))return"Safari";if((e.includes("chrome/")||jH(e))&&!e.includes("edge/"))return"Chrome";if($H(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function FH(t=Vt()){return/firefox\//i.test(t)}function UH(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jH(t=Vt()){return/crios\//i.test(t)}function BH(t=Vt()){return/iemobile/i.test(t)}function $H(t=Vt()){return/android/i.test(t)}function HH(t=Vt()){return/blackberry/i.test(t)}function zH(t=Vt()){return/webos/i.test(t)}function UA(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qH(t=Vt()){return UA(t)||$H(t)||zH(t)||HH(t)||/windows phone/i.test(t)||BH(t)}function GH(t,e=[]){let n;switch(t){case"Browser":n=LH(Vt());break;case"Worker":n=`${LH(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uu}/${r}`}class Xpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return v(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function jA(){return(jA=v(function*(t,e={}){return gt(t,"GET","/v2/passwordPolicy",pt(t,e))})).apply(this,arguments)}class nge{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class rge{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WH(this),this.idTokenSubscription=new WH(this),this.beforeStateQueue=new Xpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=to(n)),this._initializationPromise=this.queue(v(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield tl.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return v(function*(){try{const r=yield cy(n,{idToken:e}),i=yield zr._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return v(function*(){var r;if(Br(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return q(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return v(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return v(function*(){try{yield tf(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ope(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return v(function*(){if(Br(n.app))return Promise.reject(un(n));const r=e?Wt(e):null;return r&&q(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return v(function*(r,i=!1){if(!n._deleted)return r&&q(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(v(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return v(function*(){return Br(e.app)?Promise.reject(un(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Br(this.app)?Promise.reject(un(this)):this.queue(v(function*(){yield n.assertedPersistence.setPersistence(to(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return v(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return v(function*(){const n=yield function ege(t){return jA.apply(this,arguments)}(e),r=new nge(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return v(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Ype(t,e){return FA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return v(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return v(function*(){if(!n.redirectPersistenceManager){const r=e&&to(e)||n._popupRedirectResolver;q(r,n,"argument-error"),n.redirectPersistenceManager=yield tl.create(n,[to(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return v(function*(){var r,i;return n._isInitialized&&(yield n.queue(v(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return v(function*(){if(e===n.currentUser)return n.queue(v(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return v(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return v(function*(){var n;if(Br(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function xpe(t,...e){sy.logLevel<=Me.WARN&&sy.warn(`Auth (${uu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Ut(t){return Wt(t)}class WH{constructor(e){this.auth=e,this.observer=null,this.addObserver=function uue(t,e){const n=new lue(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let nf={loadJS:()=>v(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KH(t){return`__${t}${Math.floor(1e6*Math.random())}`}function JH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZH(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class sf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}function no(t,e){return iD.apply(this,arguments)}function iD(){return(iD=v(function*(t,e){return Xi(t,"POST","/v1/accounts:signInWithIdp",pt(t,e))})).apply(this,arguments)}class nl extends sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=vm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new nl(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return no(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,no(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,no(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eh(n)}return e}}class ro{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n3 extends ro{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Fge=(()=>{class t extends n3{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return nl._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return v(function*(i,o,s,a=!1){const c=yield zr._fromIdTokenResponse(i,s,a),u=i3(s);return new Nr({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return v(function*(){yield e._updateTokensIfNecessary(r,!0);const i=i3(r);return new Nr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function i3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class gy extends ji{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gy.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gy(e,n,r,i)}}function o3(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?gy._fromErrorAndOperation(t,o,e,r):o})}function fD(t,e){return pD.apply(this,arguments)}function pD(){return(pD=v(function*(t,e,n=!1){const r=yield eo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Nr._forOperation(t,"link",r)})).apply(this,arguments)}function a3(t,e){return mD.apply(this,arguments)}function mD(){return(mD=v(function*(t,e,n=!1){const{auth:r}=t;if(Br(r.app))return Promise.reject(un(r));const i="reauthenticate";try{const o=yield eo(t,o3(r,i,e,t),n);q(o.idToken,r,"internal-error");const s=uy(o.idToken);q(s,r,"internal-error");const{sub:a}=s;return q(t.uid===a,r,"user-mismatch"),Nr._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&ur(r,"user-mismatch"),o}})).apply(this,arguments)}function c3(t,e){return _D.apply(this,arguments)}function _D(){return(_D=v(function*(t,e,n=!1){if(Br(t.app))return Promise.reject(un(t));const r="signIn",i=yield o3(t,r,e),o=yield Nr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const yy="__sak";class h3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yy,"1"),this.storage.removeItem(yy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ame=(()=>{class t extends h3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qH(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Zpe(){return function rue(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return v(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return v(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return v(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),f3=(()=>{class t extends h3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let ume=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return v(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=v(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function cme(t){return Promise.all(t.map(function(){var e=v(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function vy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class lme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return v(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=vy("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const I=_;if(I.data.eventId===f)switch(I.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(I.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Yt(){return window}function KD(){return typeof Yt().WorkerGlobalScope<"u"&&"function"==typeof Yt().importScripts}function QD(){return(QD=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const p3="firebaseLocalStorageDb",Iy="firebaseLocalStorage",g3="fbase_key";class lf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ey(t,e){return t.transaction([Iy],e?"readwrite":"readonly").objectStore(Iy)}function YD(){const t=indexedDB.open(p3,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Iy,{keyPath:g3})}catch(i){n(i)}}),t.addEventListener("success",v(function*(){const r=t.result;r.objectStoreNames.contains(Iy)?e(r):(r.close(),yield function mme(){const t=indexedDB.deleteDatabase(p3);return new lf(t).toPromise()}(),e(yield YD()))}))})}function m3(t,e,n){return JD.apply(this,arguments)}function JD(){return(JD=v(function*(t,e,n){const r=Ey(t,!0).put({[g3]:e,value:n});return new lf(r).toPromise()})).apply(this,arguments)}function ZD(){return(ZD=v(function*(t,e){const n=Ey(t,!1).get(e),r=yield new lf(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function _3(t,e){const n=Ey(t,!0).delete(e);return new lf(n).toPromise()}const Ime=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return v(function*(){return n.db||(n.db=yield YD()),n.db})()}_withRetries(n){var r=this;return v(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return v(function*(){return KD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return v(function*(){n.receiver=ume._getInstance(function pme(){return KD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=v(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=v(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return v(function*(){var r,i;if(n.activeServiceWorker=yield function hme(){return QD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new lme(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return v(function*(){if(r.sender&&r.activeServiceWorker&&function fme(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const n=yield YD();return yield m3(n,yy,"1"),yield _3(n,yy),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return v(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(o=>m3(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return v(function*(){const i=yield r._withRetries(o=>function _me(t,e){return ZD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(i=>_3(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return v(function*(){const r=yield n._withRetries(s=>{const a=Ey(s,!1).getAll();return new lf(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Va(t,e){return e?to(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}KH("rcb"),new Zh(3e4,6e4);class uR extends sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,n){return no(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Rme(t){return c3(t.auth,new uR(t),t.bypassAuthState)}function Mme(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),a3(n,new uR(t),t.bypassAuthState)}function Pme(t){return lR.apply(this,arguments)}function lR(){return(lR=v(function*(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),fD(n,new uR(t),t.bypassAuthState)})).apply(this,arguments)}class v3{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=v(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return v(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rme;case"linkViaPopup":case"linkViaRedirect":return Pme;case"reauthViaPopup":case"reauthViaRedirect":return Mme;default:ur(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nme=new Zh(2e3,1e4);function dR(){return(dR=v(function*(t,e,n){if(Br(t.app))return Promise.reject(qn(t,"operation-not-supported-in-this-environment"));const r=Ut(t);!function Xu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&ur(t,"argument-error"),yA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,ro);const i=Va(r,n);return new pR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let pR=(()=>{class t extends v3{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return v(function*(){const r=yield n.execute();return q(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return v(function*(){Zi(1===n.filter.length,"Popup operations only handle one event");const r=vy();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(qn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,Nme.get())};n()}}return t.currentPopupAction=null,t})();const hf=new Map;class Ome extends v3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return v(function*(){let r=hf.get(n.auth._key());if(!r){try{const o=(yield function Vme(t,e){return gR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}hf.set(n.auth._key(),r)}return n.bypassAuthState||hf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return v(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function gR(){return(gR=v(function*(t,e){const n=function E3(t){return ly("pendingRedirect",t.config.apiKey,t.name)}(e),r=function I3(t){return to(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Lme(t,e){hf.set(t._key(),e)}function w3(t,e){return wR.apply(this,arguments)}function wR(){return(wR=v(function*(t,e,n=!1){if(Br(t.app))return Promise.reject(un(t));const r=Ut(t),i=Va(r,e),s=yield new Ome(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class $me{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Hme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C3(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!C3(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(T3(e))}saveEventToCache(e){this.cachedEventUids.add(T3(e)),this.lastProcessedEventTime=Date.now()}}function T3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C3({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function TR(){return(TR=v(function*(t,e={}){return gt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const qme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gme=/^https?/;function CR(){return CR=v(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function zme(t){return TR.apply(this,arguments)}(t);for(const n of e)try{if(Kme(n))return}catch{}ur(t,"unauthorized-domain")}),CR.apply(this,arguments)}function Kme(t){const e=Jh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Gme.test(n))return!1;if(qme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Qme=new Zh(3e4,6e4);function S3(){const t=Yt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Yme(t){return new Promise((e,n)=>{var r,i,o;function s(){S3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S3(),n(qn(t,"network-request-failed"))},timeout:Qme.get()})}if(null!==(i=null===(r=Yt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Yt().gapi)||void 0===o||!o.load){const a=KH("iframefcb");return Yt()[a]=()=>{gapi.load?s():n(qn(t,"network-request-failed"))},function BA(t){return nf.loadJS(t)}(`${function age(){return nf.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw wy=null,e})}let wy=null;const Zme=new Zh(5e3,15e3),t_e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n_e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r_e(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?EA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:uu},i=n_e.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${eh(r).slice(1)}`}function SR(){return SR=v(function*(t){const e=yield function Jme(t){return wy=wy||Yme(t),wy}(t),n=Yt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:r_e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t_e,dontclear:!0},r=>new Promise(function(){var i=v(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=qn(t,"network-request-failed"),c=Yt().setTimeout(()=>{s(a)},Zme.get());function u(){Yt().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),SR.apply(this,arguments)}const o_e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class A3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const p_e=encodeURIComponent("fac");function D3(t,e,n,r,i,o){return AR.apply(this,arguments)}function AR(){return(AR=v(function*(t,e,n,r,i,o){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uu,eventId:i};if(e instanceof ro){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function cue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof n3){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${p_e}=${encodeURIComponent(c)}`:"";return`${function g_e({config:t}){return t.emulator?EA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${eh(a).slice(1)}${u}`})).apply(this,arguments)}const DR="webStorageSupport",__e=class m_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f3,this._completeRedirectFn=w3,this._overrideRedirectResult=Lme}_openPopup(e,n,r,i){var o=this;return v(function*(){var s;Zi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield D3(e,n,r,Jh(),i);return function l_e(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},o_e),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Vt().toLowerCase();n&&(a=jH(u)?"_blank":n),FH(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Jpe(t=Vt()){var e;return UA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function d_e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new A3(null);const h=window.open(e||"",a,d);q(h,t,"popup-blocked");try{h.focus()}catch{}return new A3(h)}(e,a,vy())})()}_openRedirect(e,n,r,i){var o=this;return v(function*(){return yield o._originValidation(e),function dme(t){Yt().location.href=t}(yield D3(e,n,r,Jh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Zi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return v(function*(){const r=yield function i_e(t){return SR.apply(this,arguments)}(e),i=new $me(e);return r.register("authEvent",o=>(q(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(DR,{type:DR},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[DR];void 0!==s&&n(!!s),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Wme(t){return CR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qH()||UH()||UA()}};var N3="@firebase/auth";class y_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return v(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const E_e=xU("authIdTokenMaxAge")||300;let k3=null;const w_e=t=>function(){var e=v(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>E_e)return;const o=r?.token;k3!==o&&(k3=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function b_e(t=ej()){const e=Km(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function mge(t,e){const n=Km(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Bi(n.getOptions(),e??{}))return i;ur(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:__e,persistence:[Ime,ame,f3]}),r=xU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=w_e(o.toString());(function Xge(t,e,n){Wt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Zge(t,e,n,r){Wt(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=PU("auth");return i&&function yge(t,e,n){const r=Ut(t);q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=JH(e),{host:s,port:a}=function vge(t){const e=JH(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ZH(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:ZH(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void q(Bi(u,r.config.emulator)&&Bi(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,au(s)?(OU(`${o}//${s}${c}`),LU("Auth",!0)):i||function Ige(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function ige(t){nf=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=qn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function T_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function I_e(t){cu(new ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GH(t)},u=new rge(r,i,o,c);return function _ge(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(to);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cu(new ia("auth-internal",e=>{const n=Ut(e.getProvider("auth").getImmediate());return new y_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(N3,"1.10.8",function v_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),Hi(N3,"1.10.8","esm2017")}("Browser");const O3_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let La=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new Fge,this.fullImageCache=new Map,this.user=je(null),this.canWrite=je(!1),this.authLoading=je(!0),this.ensureFirebaseConfig();const i=XU(O3_firebase);this.db=rpe(i),this.auth=b_e(i),function eme(t,e,n,r){Wt(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=v(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return v(function*(){yield function xme(t,e,n){return dR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return v(function*(){yield function tme(t){return Wt(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return v(function*(){r.ensureSignedIn();const o=function dpe(t,e,...n){let r=[];e instanceof fA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof Zu).length,a=o.filter(c=>c instanceof Wh).length;if(s>1||s>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(iA(r.db,"recipes"),function hpe(t,e="asc"){const n=e,r=Z_("orderBy",t);return pA._create(r,n)}("updated_at","desc"));return(yield mH(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at,h=r.readThumbs(c.image_thumbs);return"string"!=typeof u?null:{id:a.id,raw_text:u,image_thumbs:h,primary_image_id:"string"==typeof c.primary_image_id?c.primary_image_id:void 0,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return v(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield mpe(iA(i.db,"recipes"),{raw_text:o,image_thumbs:[],primary_image_id:null,updated_at:iy(),updated_by:i.user()?.email??""})).id,raw_text:o,image_thumbs:[],updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return v(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield _H(Yu(o.db,"recipes",r),{raw_text:s,updated_at:iy(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}saveRecipeImageMeta(r,i,o){var s=this;return v(function*(){s.ensureCanWrite();try{yield _H(Yu(s.db,"recipes",r),{image_thumbs:i,primary_image_id:o,updated_at:iy(),updated_by:s.user()?.email??""})}catch{throw new Error("Nepoda\u0159ilo se ulo\u017eit metadata obr\xe1zk\u016f receptu.")}})()}listRecipeImages(r){var i=this;return v(function*(){i.ensureSignedIn();try{const o=iA(i.db,"recipes",r,"images");return(yield mH(o)).docs.map(a=>{const c=a.data(),u=c.full_data_url,d=c.thumb_data_url,h=c.mime_type,f=c.width,g=c.height,_=c.updated_at;if("string"!=typeof u||"string"!=typeof d||"string"!=typeof h||"number"!=typeof f||"number"!=typeof g)return null;const I={id:a.id,full_data_url:u,data_url:d,mime_type:h,width:f,height:g,updated_at:_&&"function"==typeof _.toDate?_.toDate().toISOString():void 0};return i.setCachedImage(r,I),I}).filter(a=>null!==a)}catch{throw new Error("Nepoda\u0159ilo se na\u010d\xedst obr\xe1zky receptu.")}})()}upsertRecipeImage(r,i){var o=this;return v(function*(){o.ensureCanWrite();try{yield function gpe(t,e,n){t=De(t,tt);const r=De(t.firestore,it),i=ny(t.converter,e,n);return Kh(r,[Q_(xa(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Et.none())])}(Yu(o.db,"recipes",r,"images",i.id),{full_data_url:i.full_data_url,thumb_data_url:i.data_url,mime_type:i.mime_type,width:i.width,height:i.height,updated_at:iy(),updated_by:o.user()?.email??""}),o.setCachedImage(r,i)}catch{throw new Error("Nepoda\u0159ilo se ulo\u017eit obr\xe1zek receptu.")}})()}deleteRecipeImage(r,i){var o=this;return v(function*(){o.ensureCanWrite();try{yield yH(Yu(o.db,"recipes",r,"images",i)),o.fullImageCache.delete(o.cacheKey(r,i)),localStorage.removeItem(o.cacheKey(r,i))}catch{throw new Error("Nepoda\u0159ilo se odstranit obr\xe1zek receptu.")}})()}getCachedRecipeImage(r,i){const o=this.cacheKey(r,i),s=this.fullImageCache.get(o);if(s)return s;const a=localStorage.getItem(o);if(!a)return null;try{const c=JSON.parse(a);return this.fullImageCache.set(o,c),c}catch{return null}}deleteRecipe(r){var i=this;return v(function*(){i.ensureCanWrite();try{yield yH(Yu(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}readThumbs(r){return Array.isArray(r)?r.map(i=>{if(!i||"object"!=typeof i)return null;const o=i.id,s=i.data_url;return"string"!=typeof o||"string"!=typeof s?null:{id:o,data_url:s}}).filter(i=>null!==i):[]}setCachedImage(r,i){const o=this.cacheKey(r,i.id);this.fullImageCache.set(o,i);try{localStorage.setItem(o,JSON.stringify(i))}catch{}}cacheKey(r,i){return`recipe-image:${r}:${i}`}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(O3_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const C_e=["postup","kroky","p\u0159\xedprava"],V3=/^[\-\u2013\u2022*]\s*/,S_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,A_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,D_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function Ty(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function R_e(t){const e=L3(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=L3(e),o=function M_e(t){return t.findIndex(e=>C_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:P_e(s,n),steps:F_e(a),warnings:n}}function L3(t){return t.findIndex(e=>e.length>0)}function P_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(F3(o))i&&r.push(i),i={title:x_e(o),items:[]};else if(N_e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=k_e(o);void 0===s.amount&&L_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function N_e(t){return!F3(t)}function F3(t){return/:$/.test(t.trim())}function x_e(t){return t.replace(/:$/,"").trim()}function k_e(t){const e=t.replace(V3,"").trim(),n=[],r=e.match(/\(([^)]+)\)\s*$/);r&&void 0!==r.index&&n.push({start:r.index,value:r[1].trim()});const i=e.match(/\s-\s*(.+)$/);if(void 0!==i?.index){const f=i[1].trim();f&&n.push({start:i.index,value:f})}const o=function O_e(t){for(let e=0;e<t.length;e+=1){if(","!==t[e])continue;const r=e+1<t.length?t[e+1]:"";if(!/\d/.test(e>0?t[e-1]:"")||!/\d/.test(r))return e}return-1}(e);if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function V_e(t){let e=t.trim();const r=e.match(S_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(A_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function L_e(t){const e=t.toLowerCase();return D_e.some(n=>e.startsWith(n))}function F_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(V3,"").trim()).filter(Boolean)}let Fa=(()=>{var t;class e{constructor(){this.api=O(La),this.recipes=je([]),this.selectedRecipeId=je(null),this.rawText=je(""),this.searchQuery=je(""),this.loading=je(!1),this.saving=je(!1),this.deleting=je(!1),this.error=je(""),this.parsed=rt(()=>Ty(this.rawText())),this.selectedRecipe=rt(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=rt(()=>{const r=this.selectedRecipe();return r?Ty(r.raw_text):null}),this.searchResults=rt(()=>{const i=j3(this.searchQuery().trim());return i?this.recipes().map(o=>function U_e(t,e){const r=Ty(t.raw_text).title.trim()||"Untitled recipe",i=U3(r,e),s=t.raw_text.replace(r,"").trim()||t.raw_text,a=U3(s,e),u=a.exact.length>0||a.fuzzy.length>0;if(!(i.exact.length>0||i.fuzzy.length>0)&&!u)return{recipe:t,titleParts:[{text:r,highlighted:!1}],contentLabel:"",contentParts:[],rank:Number.NEGATIVE_INFINITY};const d=MR(r,[...i.exact,...i.fuzzy]),h=function j_e(t,e){const n=Cy([...e.exact,...e.fuzzy]);if(0===n.length)return MR(t.slice(0,90),[]);const[r,i]=n[0],o=Math.max(0,r-30),s=Math.min(t.length,i+50),a=t.slice(o,s),c=n.filter(([d])=>d<s).map(([d,h])=>[Math.max(0,d-o),Math.min(a.length,h-o)]).filter(([d,h])=>d<h),u=MR(a,c);return o>0&&u.unshift({text:"\u2026",highlighted:!1}),s<t.length&&u.push({text:"\u2026",highlighted:!1}),u}(s,a);return{recipe:t,titleParts:d,contentLabel:u?"Recipe content":"",contentParts:u?h:[],rank:100*i.exact.length+40*i.fuzzy.length+(10*a.exact.length+4*a.fuzzy.length)}}(o,i)).filter(o=>o.rank>Number.NEGATIVE_INFINITY).sort((o,s)=>s.rank-o.rank).map(({rank:o,...s})=>s):[]})}refresh(){var r=this;return v(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return v(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();if(i)return yield r.api.updateRecipe(i,r.rawText()),yield r.refresh(),i;const o=yield r.api.createRecipe(r.rawText());return r.selectedRecipeId.set(o.id),yield r.refresh(),o.id}catch(i){return r.error.set(i.message),null}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return v(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return Ty(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();function U3(t,e){const n=function B_e(t,e){if(!t||!e)return[];const{normalized:n,indexMap:r}=function z_e(t){const e=[],n=[];for(let r=0;r<t.length;r+=1){const o=B3(t[r]);for(const s of o)e.push(s),n.push(r)}return{normalized:e.join(""),indexMap:n}}(t),i=[];let o=0;for(;o<n.length;){const s=n.indexOf(e,o);if(s<0)break;const a=r[s];i.push([a,(r[s+e.length-1]??a)+1]),o=s+Math.max(1,e.length)}return Cy(i)}(t,e),r=function $_e(t,e,n){if(!t||!e)return[];const r=Array.from(t.matchAll(new RegExp("\\p{L}[\\p{L}\\p{N}'-]*","gu"))),i=Math.max(1,Math.floor(.34*e.length));return Cy(r.map(o=>{const s=o.index??0,a=o[0],c=s+a.length,u=j3(a);return!u||u.includes(e)||function H_e(t,e){return e.some(([n,r])=>t[0]>=n&&t[1]<=r)}([s,c],n)?null:function q_e(t,e){if(t===e)return 0;if(0===t.length)return e.length;if(0===e.length)return t.length;const n=Array.from({length:e.length+1},(r,i)=>i);for(let r=1;r<=t.length;r+=1){let i=r;for(let o=1;o<=e.length;o+=1){const d=Math.min(i+1,n[o]+1,n[o-1]+(t[r-1]===e[o-1]?0:1));n[o-1]=i,i=d}n[e.length]=i}return n[e.length]}(u,e)<=i?[s,c]:null}).filter(o=>null!==o))}(t,e,n);return{exact:n,fuzzy:r}}function MR(t,e){const n=Cy(e);if(0===n.length)return[{text:t,highlighted:!1}];const r=[];let i=0;for(const[o,s]of n)o>i&&r.push({text:t.slice(i,o),highlighted:!1}),r.push({text:t.slice(o,s),highlighted:!0}),i=s;return i<t.length&&r.push({text:t.slice(i),highlighted:!1}),r.filter(o=>o.text.length>0)}function Cy(t){if(0===t.length)return[];const e=[...t].sort((r,i)=>r[0]-i[0]),n=[];for(const[r,i]of e){const o=n[n.length-1];!o||r>o[1]?n.push([r,i]):o[1]=Math.max(o[1],i)}return n}function j3(t){return Array.from(t).flatMap(e=>B3(e)).join("")}function B3(t){return Array.from(t.normalize("NFD").toLowerCase()).filter(e=>!new RegExp("\\p{Mark}","u").test(e))}const $3=()=>({exact:!0});function G_e(t,e){1&t&&(le(0,"section",13)(1,"p"),Y(2,"Loading"),pe()())}function W_e(t,e){if(1&t){const n=rr();le(0,"header",15)(1,"h1"),Y(2,"Recipes"),pe(),le(3,"button",17),ct("click",function(){return qe(n),Ge(Z(2).signOut())}),fr(),le(4,"svg",18),kt(5,"use",19),pe()()()}if(2&t){const n=Z(2);L(3),xt("disabled",n.authBusy())}}function K_e(t,e){if(1&t){const n=rr();le(0,"nav",16)(1,"a",20),fr(),le(2,"svg",21),kt(3,"use",22),pe(),Yr(),le(4,"span",23),Y(5,"Search"),pe()(),le(6,"a",24),fr(),le(7,"svg",21),kt(8,"use",25),pe(),Yr(),le(9,"span",23),Y(10,"Recipes"),pe()(),le(11,"a",26),ct("click",function(){return qe(n),Ge(Z(2).startAdd())}),fr(),le(12,"svg",21),kt(13,"use",27),pe(),Yr(),le(14,"span",23),Y(15,"Add"),pe()()()}if(2&t){const n=Z(2);L(),xt("routerLinkActiveOptions",Yw(4,$3)),L(5),xt("routerLinkActiveOptions",Yw(5,$3)),L(5),$n("disabled",!n.canWrite())}}function Q_e(t,e){if(1&t&&(Ce(0,W_e,6,1,"header",15),kt(1,"router-outlet"),Ce(2,K_e,16,6,"nav",16)),2&t){const n=Z();Se(n.user()&&!n.isCookingLayout()?0:-1),L(2),Se(n.user()&&!n.isCookingLayout()?2:-1)}}function Y_e(t,e){if(1&t&&(le(0,"p",14),Y(1),pe()),2&t){const n=Z();L(),ht(n.state.error())}}let J_e=(()=>{var t;class e{constructor(){this.router=O(gn),this.api=O(La),this.state=O(Fa),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=je(!1),this.isCookingLayout=je(!1),this.updateLayoutByRoute(this.router.url),this.router.events.subscribe(r=>{r instanceof No&&this.updateLayoutByRoute(r.urlAfterRedirects)}),function OF(t,e){const n=e?.injector??O(pr);let i,r=!0!==e?.manualCleanup?n.get(Jr):null;const o=n.get(uI,null,{optional:!0}),s=n.get(Ts);return null!==o?(i=function kie(t,e,n){const r=Object.create(xie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=LF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof U0&&r._lView===o.view&&(r=null)):i=function Oie(t,e,n){const r=Object.create(Nie);return r.fn=LF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(W0),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Pie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return v(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}updateLayoutByRoute(r){this.isCookingLayout.set(r.includes("/cook"))}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-root"]],decls:16,vars:4,consts:[[1,"app-shell"],["aria-hidden","true","focusable","false",1,"icon-sprite"],["id","icon-search","viewBox","0 0 24 24"],["d","M21 21l-4.35-4.35m1.35-5.65a7 7 0 11-14 0 7 7 0 0114 0z"],["id","icon-library","viewBox","0 0 24 24"],["d","M4 6.5A2.5 2.5 0 016.5 4h11A2.5 2.5 0 0120 6.5v11a2.5 2.5 0 01-2.5 2.5h-11A2.5 2.5 0 014 17.5v-11z"],["d","M9 4v16"],["id","icon-add","viewBox","0 0 24 24"],["d","M12 5v14M5 12h14"],["id","icon-logout","viewBox","0 0 24 24"],["d","M14 7l5 5-5 5"],["d","M19 12H9"],["d","M11 4H6a2 2 0 00-2 2v12a2 2 0 002 2h5"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],["aria-label","Primary navigation",1,"bottom-nav","no-print"],["type","button","aria-label","Sign out",1,"icon-ghost",3,"click","disabled"],["aria-hidden","true",1,"icon"],["href","#icon-logout"],["routerLink","/","routerLinkActive","active","aria-label","Search recipes",3,"routerLinkActiveOptions"],["aria-hidden","true",1,"nav-icon","icon"],["href","#icon-search"],[1,"nav-label"],["routerLink","/recipes","routerLinkActive","active","aria-label","Recipes",3,"routerLinkActiveOptions"],["href","#icon-library"],["routerLink","/recipes/new","routerLinkActive","active","aria-label","Add new recipe",3,"click"],["href","#icon-add"]],template:function(i,o){1&i&&(le(0,"main",0),fr(),le(1,"svg",1)(2,"symbol",2),kt(3,"path",3),pe(),le(4,"symbol",4),kt(5,"path",5)(6,"path",6),pe(),le(7,"symbol",7),kt(8,"path",8),pe(),le(9,"symbol",9),kt(10,"path",10)(11,"path",11)(12,"path",12),pe()(),Ce(13,G_e,3,0,"section",13)(14,Q_e,3,2),Ce(15,Y_e,2,1,"p",14),pe()),2&i&&($n("cooking-layout",o.isCookingLayout()),L(13),Se(o.authLoading()?13:14),L(2),Se(o.state.error()&&!o.isCookingLayout()?15:-1))},dependencies:[rT,$m,IU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#fff}*[_ngcontent-%COMP%]{box-sizing:border-box}.icon-sprite[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:.5rem .65rem 4.3rem;max-width:920px;margin:0 auto}.app-shell.cooking-layout[_ngcontent-%COMP%]{max-width:none;padding:0}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem;padding-bottom:.45rem;border-bottom:1px solid #e5e7eb}.top-bar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.95rem;letter-spacing:.01em}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;padding:1rem 0;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:6px;padding:.58rem .75rem;background:#111827;color:#fff;font:inherit}.icon-ghost[_ngcontent-%COMP%]{background:#f1f5f9;color:#1f2937;width:1.9rem;height:1.9rem;border-radius:6px;padding:0;display:grid;place-items:center}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.3rem .5rem calc(.3rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.35rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:6px;padding:.3rem .2rem;background:#f8fafc;color:#0f172a;display:grid;gap:.08rem}.nav-icon[_ngcontent-%COMP%]{line-height:1}.nav-icon.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;margin:0 auto}.nav-label[_ngcontent-%COMP%]{font-size:.68rem;line-height:1.2}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.5rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding:.8rem .9rem 1rem}.app-shell.cooking-layout[_ngcontent-%COMP%]{padding:0}.top-bar[_ngcontent-%COMP%]{margin-bottom:.75rem}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:.25rem 0 0;max-width:330px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})();const Z_e=/^(\d+(?:[.,]\d+)?(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?|\d+\/\d+)(?:\s*(?:kg|g|mg|ml|l|ks|strou\u017eky?|strou\u017eek|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed))?/i;function iye(t){return{...t,normalized:PR(t.item),stemmed:z3(t.item),amount:hye(t.original)}}function sye(t,e,n){let i=null;for(let o=Math.min(4,t.length-e);o>=1;o-=1){const s=e+o-1,a=t.slice(e,s+1).map(d=>d.value),c=PR(a.join(" "));if(!c)continue;const u=z3(a.join(" "));for(const d of n){if(aye(c,d.normalized))continue;const h=cye(c,u,d);if(h>.42)continue;const f={ingredient:d,startWord:e,endWord:s,segmentStart:t[e].segmentIndex,segmentEnd:t[s].segmentIndex,score:h};(!i||lye(f,i))&&(i=f)}}return i}function aye(t,e){const n=t.split(" ").filter(Boolean),r=e.split(" ").filter(Boolean);return!(n.length<=r.length)&&n.some(o=>/\d/.test(o))}function cye(t,e,n){const r=H3(t,n.normalized),i=H3(e,n.stemmed),o=Math.min(r,i);return t===n.normalized||e===n.stemmed?.6*o:o}function H3(t,e){if(t===e)return 0;const n=Math.max(t.length,e.length);return 0===n?0:function uye(t,e){const n=Array.from({length:t.length+1},()=>Array(e.length+1).fill(0));for(let r=0;r<=t.length;r+=1)n[r][0]=r;for(let r=0;r<=e.length;r+=1)n[0][r]=r;for(let r=1;r<=t.length;r+=1)for(let i=1;i<=e.length;i+=1)n[r][i]=Math.min(n[r-1][i]+1,n[r][i-1]+1,n[r-1][i-1]+(t[r-1]===e[i-1]?0:1));return n[t.length][e.length]}(t,e)/n}function lye(t,e){const n=t.endWord-t.startWord,r=e.endWord-e.startWord;return n!==r?n>r:t.score<e.score}function hye(t){return t.trim().match(Z_e)?.[0]?.trim()??null}function z3(t){return PR(t).split(" ").filter(Boolean).map(fye).join(" ")}function fye(t){const e=["atech","\u011btem","at\u016fm","ovat","ov\xe9ho","ov\xe9mu","\xfdmi","ami","emi","ovi","ov\xe9","\xe9ho","\xe9mu","\xe1ch","\xedch","ami","emi","ou","\u016fm","em","\u011bm","\u016fm","mi","ce","ci","ku","ka","ky","ek","ice","ici","iku","ika","iky","\xed","y"];for(const n of e){if(t.length<=3)return t;if(t.endsWith(n)&&t.length-n.length>=3)return t.slice(0,-n.length)}return t}function PR(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\p{L}\p{N}\s]/gu," ").replace(/\s+/g," ").trim()}const pye=(t,e)=>e.title,q3=(t,e)=>e.raw;function gye(t,e){1&t&&(H(0,"p"),Y(1,"Suroviny p\u0159ed startem"),z())}function mye(t,e){if(1&t&&(H(0,"p"),Y(1),z()),2&t){const n=Z(2);L(),Gc("Krok ",n.stepIndex()+1," / ",n.stepCount())}}function _ye(t,e){if(1&t&&(H(0,"span",8),Y(1),z()),2&t){const n=Z().$implicit;L(),Oi("(",n.note,")")}}function yye(t,e){if(1&t&&(H(0,"li"),Y(1),Ce(2,_ye,2,1,"span",8),z()),2&t){const n=e.$implicit;L(),Gc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),L(),Se(n.note?2:-1)}}function vye(t,e){if(1&t&&(H(0,"div",7)(1,"h3"),Y(2),z(),H(3,"ul"),zt(4,yye,3,3,"li",null,q3),z()()),2&t){const n=e.$implicit;L(2),ht(n.title),L(2),qt(n.items)}}function Iye(t,e){if(1&t&&(H(0,"article",3),zt(1,vye,6,1,"div",7,pye),z()),2&t){const n=Z();L(),qt(n.ingredientSections)}}function Eye(t,e){if(1&t&&(H(0,"span",11),Y(1),z()),2&t){const n=Z().$implicit,r=Z(3);L(),ht(r.ingredientTokenLabel(n))}}function wye(t,e){if(1&t&&(H(0,"span"),Y(1),z()),2&t){const n=Z().$implicit;L(),ht(n.value)}}function bye(t,e){1&t&&Ce(0,Eye,2,1,"span",11)(1,wye,2,1,"span"),2&t&&Se("ingredient"===e.$implicit.type?0:1)}function Tye(t,e){if(1&t&&(H(0,"span"),Y(1),z()),2&t){const n=Z().$implicit;L(),Gc(" \u2013 ",n.amount,"",n.unit?" "+n.unit:"")}}function Cye(t,e){if(1&t&&(H(0,"span"),Y(1),z()),2&t){const n=Z().$implicit;L(),Oi(" (",n.note,")")}}function Sye(t,e){if(1&t&&(H(0,"li")(1,"strong"),Y(2),z(),Ce(3,Tye,2,2,"span"),Ce(4,Cye,2,1,"span"),z()),2&t){const n=e.$implicit;L(2),ht(n.name),L(),Se(n.amount||n.unit?3:-1),L(),Se(n.note?4:-1)}}function Aye(t,e){if(1&t&&(H(0,"aside",10)(1,"h3"),Y(2,"P\u0159ipomenut\xed surovin"),z(),H(3,"ul"),zt(4,Sye,5,3,"li",null,q3),z()()),2&t){const n=Z(3);L(4),qt(n.highlightedIngredients())}}function Dye(t,e){if(1&t){const n=rr();H(0,"article",9),Ot("click",function(){return qe(n),Ge(Z(2).nextStep())}),H(1,"p"),zt(2,bye,2,1,null,null,zg),z()(),Ce(4,Aye,6,0,"aside",10)}if(2&t){const n=Z(2);L(2),qt(n.stepTokens()),L(2),Se(n.highlightedIngredients().length>0?4:-1)}}function Rye(t,e){if(1&t){const n=rr();H(0,"header",1)(1,"button",2),Ot("click",function(){return qe(n),Ge(Z().backToDetail())}),Y(2,"Zp\u011bt"),z(),H(3,"div")(4,"h2"),Y(5),z(),Ce(6,gye,2,0,"p")(7,mye,2,2,"p"),z()(),Ce(8,Iye,3,0,"article",3)(9,Dye,5,1),H(10,"footer",4)(11,"button",5),Ot("click",function(){return qe(n),Ge(Z().previousStep())}),Y(12,"P\u0159edchoz\xed"),z(),H(13,"button",6),Ot("click",function(){return qe(n),Ge(Z().nextStep())}),Y(14),z()()}if(2&t){const n=Z();L(5),ht(e.title),L(),Se(n.showIngredients()?6:7),L(2),Se(n.showIngredients()?8:9),L(3),ir("disabled",n.stepIndex()<=-1),L(2),ir("disabled",!n.showIngredients()&&n.stepIndex()>=n.stepCount()-1),L(),Oi(" ",n.showIngredients()?"Za\u010d\xedt va\u0159it":"Dal\u0161\xed krok"," ")}}function Mye(t,e){1&t&&(H(0,"p"),Y(1,"Recept nebyl nalezen."),z())}let Pye=(()=>{var t;class e{constructor(){this.state=O(Fa),this.route=O(Ui),this.router=O(gn),this.stepIndex=je(-1),this.showIngredients=rt(()=>this.stepIndex()<0),this.parsed=rt(()=>this.state.selectedParsed()),this.steps=rt(()=>this.parsed()?.steps??[]),this.stepCount=rt(()=>this.steps().length),this.currentStep=rt(()=>{const r=this.stepIndex();return r<0?"":this.steps()[r]??""}),this.ingredientLookup=rt(()=>{const r=this.parsed();return r?r.ingredientSections.flatMap(i=>i.items.map(o=>({key:G3(o.name,o.raw),input:{original:o.raw,item:o.name},ingredient:o}))):[]}),this.stepTokens=rt(()=>{const r=this.currentStep();return r?function tye(t,e){if(!e)return[];const n=function nye(t){const e=[];let n=0;const r=/[\p{L}\p{N}]+(?:['\u2019-][\p{L}\p{N}]+)*/gu;for(const i of t.matchAll(r)){const o=i[0],s=i.index??0;s>n&&e.push({value:t.slice(n,s),isWord:!1}),e.push({value:o,isWord:!0}),n=s+o.length}return n<t.length&&e.push({value:t.slice(n),isWord:!1}),e}(e),r=function rye(t){return t.flatMap((e,n)=>e.isWord?[{value:e.value,segmentIndex:n}]:[])}(n);if(0===r.length||0===t.length)return[{type:"text",value:e}];const o=function oye(t,e){const n=[];let r=0;for(;r<t.length;){const i=sye(t,r,e);i?(n.push(i),r=i.endWord+1):r+=1}return n}(r,t.map(iye).filter(s=>s.normalized.length>0));return function dye(t,e){if(0===e.length)return[{type:"text",value:t.map(i=>i.value).join("")}];const n=[];let r=0;for(const i of e){if(r<i.segmentStart){const s=t.slice(r,i.segmentStart).map(a=>a.value).join("");s&&n.push({type:"text",value:s})}const o=t.slice(i.segmentStart,i.segmentEnd+1).map(s=>s.value).join("");n.push({type:"ingredient",value:o,ingredient:i.ingredient.item,amount:i.ingredient.amount,original:i.ingredient.original}),r=i.segmentEnd+1}if(r<t.length){const i=t.slice(r).map(o=>o.value).join("");i&&n.push({type:"text",value:i})}return n}(n,o)}(this.ingredientLookup().map(({input:o})=>o),r):[]}),this.highlightedIngredients=rt(()=>{const r=new Map(this.ingredientLookup().map(i=>[i.key,i.ingredient]));return this.stepTokens().flatMap(i=>"ingredient"===i.type?[i]:[]).map(i=>r.get(G3(i.ingredient,i.original))).filter(i=>void 0!==i).filter((i,o,s)=>s.findIndex(a=>a.raw===i.raw)===o)})}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");if(!i)return void(yield r.router.navigateByUrl("/recipes"));0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i);const o=r.state.selectedParsed();if(!o)return void(yield r.router.navigate(["/recipes",i]));r.stepIndex.set(-1);const s=r.readProgress(i,o);null!==s&&(window.confirm(`Pokra\u010dovat od kroku ${s.stepIndex+1}?`)?r.stepIndex.set(s.stepIndex):r.clearProgress(i))})()}previousStep(){const r=this.stepIndex()-1;r<-1||(this.stepIndex.set(r),this.persistProgress())}nextStep(){if(this.showIngredients())return this.stepIndex.set(0),void this.persistProgress();const r=this.stepIndex()+1;if(r>=this.stepCount())return this.stepIndex.set(this.stepCount()-1),void this.persistProgress();this.stepIndex.set(r),this.persistProgress()}backToDetail(){var r=this;return v(function*(){const i=r.state.selectedRecipeId();i?yield r.router.navigate(["/recipes",i]):yield r.router.navigateByUrl("/recipes")})()}ingredientTokenLabel(r){return r.amount?`${r.value} (${r.amount})`:r.value}persistProgress(){const r=this.state.selectedRecipeId();if(!r)return;const i=this.stepIndex();if(i<0)return void this.clearProgress(r);const o={stepIndex:i,startedAt:(new Date).toISOString()};localStorage.setItem(NR(r),JSON.stringify(o))}readProgress(r,i){const o=localStorage.getItem(NR(r));if(!o)return null;try{const s=JSON.parse(o);return s.stepIndex<0||s.stepIndex>=i.steps.length?(this.clearProgress(r),null):s}catch{return this.clearProgress(r),null}}clearProgress(r){localStorage.removeItem(NR(r))}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-cooking-mode"]],decls:3,vars:1,consts:[[1,"cooking-screen"],[1,"cooking-header"],["type","button",1,"ghost",3,"click"],[1,"ingredient-overview"],[1,"step-controls"],["type","button",1,"ghost",3,"click","disabled"],["type","button",3,"click","disabled"],[1,"section-block"],[1,"ingredient-note"],[1,"step-card",3,"click"],[1,"inline-help"],[1,"step-ingredient"]],template:function(i,o){if(1&i&&(H(0,"section",0),Ce(1,Rye,15,6)(2,Mye,2,0,"p"),z()),2&i){let s;L(),Se((s=o.parsed())?1:2,s)}},styles:[".cooking-screen[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;width:100vw;min-height:100dvh;padding:max(1rem,env(safe-area-inset-top)) 1rem max(1rem,env(safe-area-inset-bottom));display:grid;gap:1rem}.cooking-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.ingredient-overview[_ngcontent-%COMP%], .step-card[_ngcontent-%COMP%], .inline-help[_ngcontent-%COMP%]{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:1rem}.step-card[_ngcontent-%COMP%]{min-height:32vh;display:flex;align-items:center;justify-content:center;text-align:center;cursor:pointer}.step-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1.4rem,5vw,2.2rem);line-height:1.4}.section-block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.section-block[_ngcontent-%COMP%] + .section-block[_ngcontent-%COMP%]{margin-top:.75rem}ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.4rem}.ingredient-note[_ngcontent-%COMP%]{color:#cbd5e1}.step-controls[_ngcontent-%COMP%]{margin-top:auto;display:grid;grid-template-columns:1fr 1fr;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.9rem 1rem;background:#22c55e;color:#052e16;font:inherit;font-weight:600}button.ghost[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.cooking-screen[_ngcontent-%COMP%]{padding:1.5rem}}.step-ingredient[_ngcontent-%COMP%]{color:#86efac;font-weight:700}"]}))}return t(),e})();function NR(t){return`cooking-progress:${t}`}function G3(t,e){return`${t}:::${e}`}let W3=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(re(Vs),re(Or))};static \u0275dir=Re({type:t})}return t})(),Ua=(()=>{class t extends W3{static \u0275fac=(()=>{let n;return function(i){return(n||(n=rn(t)))(i||t)}})();static \u0275dir=Re({type:t,features:[Ke]})}return t})();const yi=new G(""),kye={provide:yi,useExisting:st(()=>ff),multi:!0},Vye=new G("");let ff=(()=>{class t extends W3{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Oye(){const t=_o()?_o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(re(Vs),re(Or),re(Vye,8))};static \u0275dir=Re({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ct("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[_t([kye]),Ke]})}return t})();const Pn=new G(""),is=new G("");function rz(t){return null!=t}function iz(t){return kg(t)?Cn(t):t}function oz(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function sz(t,e){return e.map(n=>n(t))}function az(t){return t.map(e=>function Fye(t){return!t.validate}(e)?e:n=>e.validate(n))}function OR(t){return null!=t?function cz(t){if(!t)return null;const e=t.filter(rz);return 0==e.length?null:function(n){return oz(sz(n,e))}}(az(t)):null}function VR(t){return null!=t?function uz(t){if(!t)return null;const e=t.filter(rz);return 0==e.length?null:function(n){return function Nye(...t){const e=o2(t),{args:n,keys:r}=s2(t),i=new jt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;ii(n[d]).subscribe(Jt(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?c2(r,a):a),o.complete())}))}});return e?i.pipe(a2(e)):i}(sz(n,e).map(iz)).pipe(He(oz))}}(az(t)):null}function lz(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function LR(t){return t?Array.isArray(t)?t:[t]:[]}function Ay(t,e){return Array.isArray(t)?t.includes(e):t===e}function fz(t,e){const n=LR(e);return LR(t).forEach(i=>{Ay(n,i)||n.push(i)}),n}function pz(t,e){return LR(e).filter(n=>!Ay(t,n))}class gz{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Gn extends gz{name;get formDirective(){return null}get path(){return null}}class os extends gz{_parent=null;name=null;valueAccessor=null}class mz{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let FR=(()=>{class t extends mz{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(re(os,2))};static \u0275dir=Re({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&$n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ke]})}return t})();const pf="VALID",Ry="INVALID",il="PENDING",gf="DISABLED";class ol{}class yz extends ol{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class BR extends ol{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class $R extends ol{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class My extends ol{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class HR extends ol{source;constructor(e){super(),this.source=e}}function Py(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class GR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yt(this.statusReactive)}set status(e){yt(()=>this.statusReactive.set(e))}_status=rt(()=>this.statusReactive());statusReactive=je(void 0);get valid(){return this.status===pf}get invalid(){return this.status===Ry}get pending(){return this.status==il}get disabled(){return this.status===gf}get enabled(){return this.status!==gf}errors;get pristine(){return yt(this.pristineReactive)}set pristine(e){yt(()=>this.pristineReactive.set(e))}_pristine=rt(()=>this.pristineReactive());pristineReactive=je(!0);get dirty(){return!this.pristine}get touched(){return yt(this.touchedReactive)}set touched(e){yt(()=>this.touchedReactive.set(e))}_touched=rt(()=>this.touchedReactive());touchedReactive=je(!1);get untouched(){return!this.touched}_events=new Qn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pz(e,this._rawAsyncValidators))}hasValidator(e){return Ay(this._rawValidators,e)}hasAsyncValidator(e){return Ay(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new $R(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new $R(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new BR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new BR(!0,r))}markAsPending(e={}){this.status=il;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new My(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=gf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new yz(this.value,r)),this._events.next(new My(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=pf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pf||this.status===il)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new yz(this.value,n)),this._events.next(new My(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gf:pf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=il,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=iz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new My(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ht,this.statusChanges=new Ht}_calculateStatus(){return this._allControlsDisabled()?gf:this.errors?Ry:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(il)?il:this._anyControlsHaveStatus(Ry)?Ry:pf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new BR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new $R(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Py(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Gye(t){return Array.isArray(t)?OR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Wye(t){return Array.isArray(t)?VR(t):t||null}(this._rawAsyncValidators)}}const sl=new G("",{providedIn:"root",factory:()=>Ny}),Ny="always";function mf(t,e,n=Ny){(function KR(t,e){const n=function dz(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(lz(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function hz(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(lz(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Oy(e._rawValidators,i),Oy(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Yye(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&wz(t,e)})}(t,e),function Zye(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Jye(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&wz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Qye(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Oy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function wz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Cz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sz(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const Az=class extends GR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function zR(t){return(Py(t)?t.validators:t)||null}(n),function qR(t,e){return(Py(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Py(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Sz(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new HR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cve={provide:os,useExisting:st(()=>jy)},Dz=Promise.resolve();let jy=(()=>{class t extends os{_changeDetectorRef;callSetDisabledState;control=new Az;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ht;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function JR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===ff?n=o:function tve(t){return Object.getPrototypeOf(t.constructor)===Ua}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function YR(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Dz.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Zc(r);Dz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function xy(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(re(Gn,9),re(Pn,10),re(is,10),re(yi,10),re(pm,8),re(sl,8))};static \u0275dir=Re({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_t([cve]),Ke,Mi]})}return t})(),xve=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tg({type:t});static \u0275inj=yl({})}return t})(),Wz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:sl,useValue:n.callSetDisabledState??Ny}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tg({type:t});static \u0275inj=yl({imports:[xve]})}return t})();const Ove=(t,e)=>e.recipe.id;function Vve(t,e){1&t&&(le(0,"p"),Y(1,"Loading"),pe())}function Lve(t,e){1&t&&(le(0,"p"),Y(1,"No recipes"),pe())}function Fve(t,e){1&t&&kt(0,"img",9),2&t&&xt("src",e,xi)}function Uve(t,e){1&t&&kt(0,"mark",13),2&t&&xt("textContent",Z().$implicit.text)}function jve(t,e){1&t&&kt(0,"span",13),2&t&&xt("textContent",Z().$implicit.text)}function Bve(t,e){1&t&&Ce(0,Uve,1,1,"mark",13)(1,jve,1,1,"span",13),2&t&&Se(e.$implicit.highlighted?0:1)}function $ve(t,e){1&t&&kt(0,"mark",13),2&t&&xt("textContent",Z().$implicit.text)}function Hve(t,e){1&t&&kt(0,"span",13),2&t&&xt("textContent",Z().$implicit.text)}function zve(t,e){1&t&&Ce(0,$ve,1,1,"mark",13)(1,Hve,1,1,"span",13),2&t&&Se(e.$implicit.highlighted?0:1)}function qve(t,e){if(1&t&&(le(0,"small",12),zt(1,zve,2,1,null,null,zg),pe()),2&t){const n=Z().$implicit;fn("aria-label",n.contentLabel||"Recipe snippet"),L(),qt(n.contentParts)}}function Gve(t,e){if(1&t){const n=rr();le(0,"li")(1,"button",8),ct("click",function(){const i=qe(n).$implicit;return Ge(Z(3).open(i.recipe.id))}),Ce(2,Fve,1,1,"img",9),le(3,"div",10)(4,"span",11),zt(5,Bve,2,1,null,null,zg),pe(),Ce(7,qve,3,1,"small",12),pe()()()}if(2&t){let n;const r=e.$implicit,i=Z(3);L(),$n("recipe-item-with-image",i.hasThumb(r.recipe))("recipe-item-no-image",!i.hasThumb(r.recipe)),L(),Se((n=i.firstThumb(r.recipe))?2:-1,n),L(3),qt(r.titleParts),L(2),Se(r.contentParts.length>0?7:-1)}}function Wve(t,e){if(1&t&&(le(0,"ul",7),zt(1,Gve,8,6,"li",null,Ove),pe()),2&t){const n=Z(2);L(),qt(n.state.searchResults())}}function Kve(t,e){if(1&t&&(le(0,"section",6),Ce(1,Vve,2,0,"p")(2,Lve,2,0,"p")(3,Wve,3,0,"ul",7),pe()),2&t){const n=Z();$n("loading",n.state.loading()),L(),Se(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let Qve=(()=>{var t;class e{constructor(){this.state=O(Fa),this.router=O(gn)}ngOnInit(){var r=this;return v(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return v(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}hasThumb(r){return null!==this.firstThumb(r)}firstThumb(r){const i=r.primary_image_id;return i?r.image_thumbs.find(o=>o.id===i)?.data_url??r.image_thumbs[0]?.data_url??null:r.image_thumbs[0]?.data_url??null}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-home"]],decls:7,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["for","recipe-search",1,"search-label"],["id","recipe-search","type","search","placeholder","name, ingredient, step",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],["alt","Recipe image","loading","lazy",3,"src"],[1,"recipe-meta"],["aria-label","Recipe title",1,"recipe-title-parts"],[1,"recipe-snippet"],[3,"textContent"]],template:function(i,o){1&i&&(le(0,"section",0)(1,"div",1)(2,"div",2)(3,"label",3),Y(4,"Find recipe"),pe(),le(5,"input",4),ct("ngModelChange",function(a){return o.state.searchQuery.set(a)}),pe()(),Ce(6,Kve,4,3,"section",5),pe()()),2&i&&($n("has-query",o.state.searchQuery().trim().length>0),L(5),xt("ngModel",o.state.searchQuery()),L(),Se(o.state.searchQuery().trim().length>0?6:-1))},dependencies:[Wz,ff,FR,jy],styles:[".home-screen[_ngcontent-%COMP%]{padding:.3rem 0;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:.55rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:#fff;padding-bottom:.3rem;display:grid;gap:.3rem}.search-label[_ngcontent-%COMP%]{font-size:.72rem;color:#4b5563}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:6px;padding:.6rem .75rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.45rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.42rem;background:#fff;color:#0f172a;border:1px solid #e5e7eb;border-radius:6px;font:inherit;display:grid;grid-template-columns:1fr;gap:.45rem;align-items:start}.recipe-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px;object-fit:cover;border-radius:4px}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(220px,300px) minmax(0,1fr);column-gap:.8rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.45rem 0}}.recipe-meta[_ngcontent-%COMP%]{min-width:0;display:grid;gap:.15rem}.recipe-title-parts[_ngcontent-%COMP%]{min-width:0;color:#111827;font-weight:600;font-size:.88rem;line-height:1.2}.recipe-title-parts[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .recipe-title-parts[_ngcontent-%COMP%] > mark[_ngcontent-%COMP%], .recipe-snippet[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .recipe-snippet[_ngcontent-%COMP%] > mark[_ngcontent-%COMP%]{margin:0;padding:0}.recipe-snippet[_ngcontent-%COMP%]{min-width:0;color:#4b5563;font-size:.76rem;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}mark[_ngcontent-%COMP%]{background:#fff59d;padding:0}.recipe-item-with-image[_ngcontent-%COMP%]{grid-template-columns:44px 1fr}.recipe-item-no-image[_ngcontent-%COMP%]{grid-template-columns:1fr}"]}))}return t(),e})(),Yve=(()=>{var t;class e{constructor(){this.api=O(La),this.state=O(Fa),this.router=O(gn),this.authBusy=!1}signIn(){var r=this;return v(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(H(0,"section",0)(1,"h1"),Y(2,"Recipes"),z(),H(3,"button",1),Ot("click",function(){return o.signIn()}),Y(4,"Continue with Google"),z()()),2&i&&(L(3),ir("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const Jve=(t,e)=>e.label,Zve=(t,e)=>e.title,Xve=(t,e)=>e.id,eIe=(t,e)=>e.raw;function tIe(t,e){1&t&&Gt(0,"img",68),2&t&&ir("src",Z().data_url,xi)}function nIe(t,e){if(1&t){const n=rr();H(0,"button",73),Ot("click",function(){const i=qe(n).$implicit;return Ge(Z(4).selectImage(i.id))}),Gt(1,"img",74),z()}if(2&t){const n=e.$implicit,r=Z(2);fn("aria-pressed",n.id===r.id),L(),ir("src",n.data_url,xi)}}function rIe(t,e){if(1&t&&(H(0,"div",71),zt(1,nIe,2,2,"button",72,Xve),z()),2&t){const n=Z(3);L(),qt(n.images())}}function iIe(t,e){if(1&t){const n=rr();H(0,"section",46)(1,"button",66),Ot("click",function(){const i=qe(n);return Ge(Z(2).openGallery(i.id))}),H(2,"span",67),Ce(3,tIe,1,1,"img",68),Gt(4,"span",69)(5,"img",70),z()(),Ce(6,rIe,3,0,"div",71),z()}if(2&t){const n=e,r=Z(2);L(3),Se(n.data_url!==n.full_data_url?3:-1),L(2),ir("src",n.full_data_url,xi),L(),Se(r.images().length>1?6:-1)}}function oIe(t,e){if(1&t&&(H(0,"article",48),fr(),H(1,"svg",75),Gt(2,"use"),z(),Yr(),H(3,"strong"),Y(4),z(),H(5,"span"),Y(6),z()()),2&t){const n=e.$implicit;L(2),fn("href","#"+n.icon),L(2),ht(n.label),L(2),ht(n.value)}}function sIe(t,e){if(1&t&&(H(0,"strong"),Y(1),z()),2&t){const n=Z().$implicit,r=Z(3);L(),ht(r.ingredientAmountLabel(n))}}function aIe(t,e){if(1&t&&(H(0,"small"),Y(1),z()),2&t){const n=Z().$implicit;L(),ht(n.note)}}function cIe(t,e){if(1&t&&(H(0,"li",77)(1,"span",78),Ce(2,sIe,2,1,"strong"),H(3,"span"),Y(4),z(),Ce(5,aIe,2,1,"small"),z()()),2&t){const n=e.$implicit;L(2),Se(n.amount?2:-1),L(2),ht(n.name),L(),Se(n.note?5:-1)}}function uIe(t,e){if(1&t&&(H(0,"section",55)(1,"h3",76),Y(2),z(),H(3,"ul"),zt(4,cIe,6,3,"li",77,eIe),z()()),2&t){const n=e.$implicit,r=e.$index;fn("aria-labelledby","group-"+r),L(),ir("id","group-"+r),L(),ht(n.title),L(2),qt(n.items)}}function lIe(t,e){if(1&t&&(H(0,"li")(1,"span",79),Y(2),z(),H(3,"p"),Y(4),z()()),2&t){const n=e.$implicit,r=e.$index;L(2),ht(r+1),L(2),ht(n)}}function dIe(t,e){if(1&t&&(H(0,"span",81),Y(1),z()),2&t){const n=e.$implicit;L(),ht(n)}}function hIe(t,e){if(1&t&&(H(0,"section",58)(1,"h2"),Y(2,"Tags"),z(),H(3,"div",80),zt(4,dIe,2,1,"span",81,wd),z()()),2&t){const n=Z(2);L(4),qt(n.recipeTags())}}function fIe(t,e){if(1&t){const n=rr();H(0,"section",82),Ot("click",function(){return qe(n),Ge(Z(2).closeGallery())}),Gt(1,"img",83),z()}2&t&&(L(),ir("src",e.full_data_url,xi))}function pIe(t,e){if(1&t){const n=rr();H(0,"header",39)(1,"h1"),Y(2),z(),H(3,"p"),Y(4),z(),H(5,"div",40)(6,"button",41),Ot("click",function(){return qe(n),Ge(Z().bookmarkRecipe())}),fr(),H(7,"svg",42),Gt(8,"use",43),z(),Yr(),H(9,"span"),Y(10,"Bookmark"),z()(),H(11,"button",44),Ot("click",function(){return qe(n),Ge(Z().shareRecipe())}),fr(),H(12,"svg",42),Gt(13,"use",45),z(),Yr(),H(14,"span"),Y(15,"Share"),z()()()(),Ce(16,iIe,7,3,"section",46),H(17,"section",47),zt(18,oIe,7,3,"article",48,Jve),z(),H(20,"section",49)(21,"div",50)(22,"h2",51),Y(23,"Ingredients"),z(),H(24,"div",52)(25,"button",53),Ot("click",function(){return qe(n),Ge(Z().setPortionPreset("1x"))}),Y(26,"1x"),z(),H(27,"button",53),Ot("click",function(){return qe(n),Ge(Z().setPortionPreset("2x"))}),Y(28,"2x"),z(),H(29,"button",53),Ot("click",function(){return qe(n),Ge(Z().setPortionPreset("3x"))}),Y(30,"3x"),z(),H(31,"input",54),Ot("input",function(i){return qe(n),Ge(Z().updateCustomMultiplier(i.target.value))}),z()()(),zt(32,uIe,6,3,"section",55,Zve),z(),H(34,"section",56)(35,"h2",57),Y(36,"Steps"),z(),H(37,"ol"),zt(38,lIe,5,2,"li",null,wd),z()(),Ce(40,hIe,6,0,"section",58),H(41,"footer",59)(42,"button",60),Ot("click",function(){return qe(n),Ge(Z().startCooking())}),fr(),H(43,"svg",42),Gt(44,"use",61),z(),Yr(),H(45,"span"),Y(46,"Start cooking"),z()(),H(47,"button",62),Ot("click",function(){return qe(n),Ge(Z().edit())}),Y(48,"Edit"),z(),H(49,"button",63),Ot("click",function(){return qe(n),Ge(Z().state.print())}),Y(50,"Print"),z(),H(51,"button",64),Ot("click",function(){return qe(n),Ge(Z().remove())}),Y(52,"Delete"),z()(),Ce(53,fIe,2,1,"section",65)}if(2&t){let n,r;const i=e,o=Z();L(2),ht(i.title),L(2),ht(o.subtitle()),L(12),Se((n=o.activeImage())?16:-1,n),L(2),qt(o.quickFacts()),L(7),$n("active","1x"===o.portionPreset()),L(2),$n("active","2x"===o.portionPreset()),L(2),$n("active","3x"===o.portionPreset()),L(2),ir("value",o.customMultiplier()),L(),qt(i.ingredientSections),L(6),qt(i.steps),L(2),Se(o.recipeTags().length>0?40:-1),L(7),ir("disabled",!o.api.canWrite()),L(4),ir("disabled",!o.api.canWrite()||o.state.deleting()),L(2),Se((r=o.galleryOpen()&&o.activeImage())?53:-1,r)}}function gIe(t,e){1&t&&(H(0,"p"),Y(1,"Recipe not found"),z())}let mIe=(()=>{var t;class e{constructor(){this.state=O(Fa),this.api=O(La),this.images=je([]),this.selectedImageId=je(null),this.galleryOpen=je(!1),this.portionPreset=je("1x"),this.customMultiplier=je("1"),this.subtitle=rt(()=>{const r=this.state.selectedParsed();return r?`${r.ingredientSections.length} ingredient sections \u2022 ${r.steps.length} cooking steps`:""}),this.ingredientMultiplier=rt(()=>{const r=this.portionPreset();if("custom"!==r)return Number.parseInt(r,10);const i=Number.parseFloat(this.customMultiplier().replace(",","."));return!Number.isFinite(i)||i<=0?1:Math.min(i,12)}),this.quickFacts=rt(()=>{const r=this.state.selectedParsed();if(!r)return[];const i=r.ingredientSections.reduce((a,c)=>a+c.items.length,0),o=Math.max(15,8*r.steps.length+2*i),s=Math.round((240+45*i)*this.ingredientMultiplier());return[{icon:"icon-time",label:"Time",value:`${o} min`},{icon:"icon-difficulty",label:"Difficulty",value:r.steps.length>7?"Advanced":r.steps.length>4?"Medium":"Easy"},{icon:"icon-servings",label:"Servings",value:`${Math.max(2,Math.ceil(i/4*this.ingredientMultiplier()))}`},{icon:"icon-calories",label:"Calories",value:`${s} kcal`}]}),this.recipeTags=rt(()=>{const r=this.state.selectedParsed();if(!r)return[];const i=[r.title,...r.ingredientSections.flatMap(o=>o.items.map(s=>s.raw)),...r.steps].join(" ").toLowerCase();return[this.hasAny(i,["vegan","tofu","lentils","chickpea"])?"vegan":"",this.quickFacts().find(o=>"Time"===o.label)?.value.includes("min")&&Number.parseInt(this.quickFacts()[0]?.value??"0",10)<=30?"quick":"",this.hasAny(i,["gluten free","bez lepku"])?"gluten-free":"",this.hasAny(i,["knedl","paprika","gul\xe1\u0161"])?"Czech cuisine":"","Easy"===this.quickFacts().find(o=>"Difficulty"===o.label)?.value?"beginner-friendly":""].filter(Boolean)}),this.route=O(Ui),this.router=O(gn)}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),yield r.loadImages(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return v(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}startCooking(){var r=this;return v(function*(){const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"cook"]))})()}remove(){var r=this;return v(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}selectImage(r){this.selectedImageId.set(r)}openGallery(r){this.selectedImageId.set(r),this.galleryOpen.set(!0)}closeGallery(){this.galleryOpen.set(!1)}activeImage(){const r=this.selectedImageId(),i=this.images();return r?i.find(o=>o.id===r)??i[0]??null:i[0]??null}setPortionPreset(r){this.portionPreset.set(r)}updateCustomMultiplier(r){this.customMultiplier.set(r),this.portionPreset.set("custom")}ingredientAmountLabel(r){return r.amount?`${function _Ie(t,e){return 1===e?t:t.replace(/\d+(?:[.,]\d+)?/g,n=>{const r=Number.parseFloat(n.replace(",","."));return Number.isFinite(r)?function yIe(t){return t.toFixed(2).replace(/\.?0+$/,"")}(r*e):n})}(r.amount,this.ingredientMultiplier())}${r.unit?` ${r.unit}`:""}`:""}shareRecipe(){var r=this;return v(function*(){const i=r.state.selectedParsed();if(i){if(navigator.share)return void(yield navigator.share({title:i.title,text:r.subtitle(),url:window.location.href}));yield navigator.clipboard.writeText(window.location.href)}})()}bookmarkRecipe(){const r=this.state.selectedRecipeId();r&&localStorage.setItem(`recipe-bookmark:${r}`,(new Date).toISOString())}pickPrimaryImageId(r,i){return i?r.find(o=>o.id===i)?.id??r[0]?.id??null:r[0]?.id??null}loadImages(r){var i=this;return v(function*(){const o=i.state.recipes().find(u=>u.id===r),s=o?.image_thumbs.map(u=>i.api.getCachedRecipeImage(r,u.id)).filter(u=>null!==u),a=o?.primary_image_id;s&&s.length>0&&(i.images.set(s),i.selectedImageId.set(i.pickPrimaryImageId(s,a)));const c=yield i.api.listRecipeImages(r);i.images.set(c),i.selectedImageId.set(i.pickPrimaryImageId(c,a))})()}hasAny(r,i){return i.some(o=>r.includes(o))}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-recipe-detail"]],decls:41,vars:1,consts:[[1,"detail-screen"],["aria-hidden","true","focusable","false",1,"icon-sprite"],["id","icon-cook","viewBox","0 0 24 24"],["d","M4 10h16v7a3 3 0 01-3 3H7a3 3 0 01-3-3v-7z"],["d","M7 10V8a5 5 0 0110 0v2"],["d","M9 4c0 1-1 1.5-1 2.5S9 8 9 9"],["d","M12 4c0 1-1 1.5-1 2.5S12 8 12 9"],["d","M15 4c0 1-1 1.5-1 2.5S15 8 15 9"],["id","icon-edit","viewBox","0 0 24 24"],["d","M4 20h4l10-10-4-4L4 16v4z"],["d","M13 7l4 4"],["id","icon-delete","viewBox","0 0 24 24"],["d","M6 7h12"],["d","M9 7V5h6v2"],["d","M8 7l1 12h6l1-12"],["id","icon-bookmark","viewBox","0 0 24 24"],["d","M6 4h12v16l-6-4-6 4z"],["id","icon-share","viewBox","0 0 24 24"],["d","M15 8l-6 4 6 4"],["d","M9 12h11"],["d","M20 8v8"],["d","M4 7h4"],["d","M4 17h4"],["id","icon-time","viewBox","0 0 24 24"],["cx","12","cy","12","r","9"],["d","M12 7v5l4 2"],["id","icon-difficulty","viewBox","0 0 24 24"],["d","M4 18h16"],["d","M7 18V9"],["d","M12 18V6"],["d","M17 18v-4"],["id","icon-servings","viewBox","0 0 24 24"],["cx","9","cy","8","r","3"],["cx","17","cy","9","r","2.5"],["d","M3 20c0-3 2.5-5 6-5s6 2 6 5"],["d","M13 20c0-2 1.6-3.6 4-3.6S21 18 21 20"],["id","icon-calories","viewBox","0 0 24 24"],["d","M12 3c2 3 4 4.8 4 8a4 4 0 11-8 0c0-3.2 2.2-5 4-8z"],["d","M12 13c.8 1 .9 2 .9 2.6A2.1 2.1 0 0110.8 18"],["aria-label","Recipe heading",1,"recipe-header"],[1,"action-row"],["type","button","aria-label","Bookmark recipe",1,"action-ghost",3,"click"],["aria-hidden","true",1,"icon"],["href","#icon-bookmark"],["type","button","aria-label","Share recipe",1,"action-ghost",3,"click"],["href","#icon-share"],[1,"hero-image","no-print"],["aria-label","Quick facts",1,"quick-facts"],[1,"fact-card"],["aria-labelledby","ingredients-title",1,"ingredients"],[1,"section-head"],["id","ingredients-title"],["role","group","aria-label","Ingredients multiplier",1,"portion-toggle"],["type","button",3,"click"],["type","number","min","0.1","step","0.1","aria-label","Custom ingredients multiplier",1,"custom-multiplier",3,"input","value"],[1,"ingredient-group"],["aria-labelledby","steps-title",1,"steps"],["id","steps-title"],["aria-label","Recipe tags",1,"tags"],["aria-label","Recipe actions",1,"footer-actions","no-print"],["type","button",1,"primary",3,"click"],["href","#icon-cook"],["type","button",1,"secondary",3,"click","disabled"],["type","button",1,"secondary",3,"click"],["type","button",1,"danger",3,"click","disabled"],[1,"gallery-overlay","no-print"],["type","button",1,"hero-button",3,"click"],[1,"image-shell"],["alt","","aria-hidden","true",1,"hero-blur",3,"src"],["aria-hidden","true",1,"image-gradient"],["loading","lazy","decoding","async","alt","Recipe photo",1,"hero-main",3,"src"],["aria-label","Other photos",1,"thumb-strip"],["type","button",1,"thumb"],["type","button",1,"thumb",3,"click"],["loading","lazy","alt","Recipe thumbnail",3,"src"],["aria-hidden","true",1,"fact-icon"],[3,"id"],[1,"ingredient-item"],[1,"ingredient-text"],[1,"step-number"],["role","list",1,"tag-row"],["role","listitem",1,"tag-chip"],[1,"gallery-overlay","no-print",3,"click"],["alt","Recipe image large",3,"src"]],template:function(i,o){if(1&i&&(H(0,"section",0),fr(),H(1,"svg",1)(2,"symbol",2),Gt(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),z(),H(8,"symbol",8),Gt(9,"path",9)(10,"path",10),z(),H(11,"symbol",11),Gt(12,"path",12)(13,"path",13)(14,"path",14),z(),H(15,"symbol",15),Gt(16,"path",16),z(),H(17,"symbol",17),Gt(18,"path",18)(19,"path",19)(20,"path",20)(21,"path",21)(22,"path",22),z(),H(23,"symbol",23),Gt(24,"circle",24)(25,"path",25),z(),H(26,"symbol",26),Gt(27,"path",27)(28,"path",28)(29,"path",29)(30,"path",30),z(),H(31,"symbol",31),Gt(32,"circle",32)(33,"circle",33)(34,"path",34)(35,"path",35),z(),H(36,"symbol",36),Gt(37,"path",37)(38,"path",38),z()(),Ce(39,pIe,54,14)(40,gIe,2,0,"p"),z()),2&i){let s;L(39),Se((s=o.state.selectedParsed())?39:40,s)}},styles:["[_nghost-%COMP%]{display:block}.icon-sprite[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.icon[_ngcontent-%COMP%]{width:1.3rem;height:1.3rem;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.detail-screen[_ngcontent-%COMP%]{--accent: #16a34a;--text-primary: #111;--text-secondary: #333;--surface: #fff;--background: #f8faf8;font-family:Inter,SF Pro Text,Roboto,sans-serif;background:var(--background);color:var(--text-primary);padding:0 0 8rem;min-height:100dvh}.recipe-header[_ngcontent-%COMP%], .quick-facts[_ngcontent-%COMP%], .ingredients[_ngcontent-%COMP%], .steps[_ngcontent-%COMP%], .tags[_ngcontent-%COMP%]{padding:0 1rem}.recipe-header[_ngcontent-%COMP%]{padding-top:1.5rem;display:grid;gap:.8rem}.recipe-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:clamp(1.5rem,6.5vw,1.75rem);line-height:1.2}.recipe-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:1rem;line-height:1.6}.action-row[_ngcontent-%COMP%]{display:flex;gap:.75rem}.action-ghost[_ngcontent-%COMP%]{min-height:2.75rem;border:1px solid #d4d4d8;border-radius:999px;padding:0 1rem;display:inline-flex;align-items:center;gap:.45rem;background:#fff;color:#1f2937}.hero-image[_ngcontent-%COMP%]{margin-top:1.5rem}.hero-button[_ngcontent-%COMP%]{border:0;padding:0;width:100%;background:transparent}.image-shell[_ngcontent-%COMP%]{width:100%;min-height:40vh;max-height:50vh;display:block;border-radius:1.1rem 1.1rem 0 0;overflow:hidden;position:relative;background:#e5e7eb}.hero-blur[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:blur(14px);transform:scale(1.06)}.hero-main[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;height:100%;object-fit:cover;display:block}.image-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:3;background:linear-gradient(to bottom,#1111110a,#1111113d);pointer-events:none}.thumb-strip[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.75rem 1rem 0;overflow-x:auto}.thumb[_ngcontent-%COMP%]{border:1px solid #d4d4d8;border-radius:.75rem;padding:.15rem;background:#fff}.thumb[aria-pressed=true][_ngcontent-%COMP%]{border-color:var(--accent)}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.2rem;height:3.2rem;border-radius:.6rem;object-fit:cover}.quick-facts[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:.75rem;overflow-x:auto;padding-bottom:.25rem}.fact-card[_ngcontent-%COMP%]{background:var(--surface);border:1px solid #e4e4e7;border-radius:.95rem;min-width:7.6rem;padding:.8rem;display:grid;gap:.35rem}.fact-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;stroke:var(--accent);fill:none;stroke-width:1.8}.fact-card[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem}.fact-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.ingredients[_ngcontent-%COMP%], .steps[_ngcontent-%COMP%], .tags[_ngcontent-%COMP%]{margin-top:1.75rem}.section-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem}h2[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;line-height:1.3}h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem}.portion-toggle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.2rem;background:#e5e7eb;border-radius:999px;padding:.2rem}.portion-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background:transparent;min-height:1.9rem;min-width:2rem;border-radius:999px;color:#374151;font-size:.78rem;padding:0 .45rem}.portion-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:#111;font-weight:700}.custom-multiplier[_ngcontent-%COMP%]{width:2.9rem;border:0;border-radius:999px;padding:.35rem .45rem;font:inherit;font-size:.78rem}.ingredient-group[_ngcontent-%COMP%]{margin-top:1rem}.ingredient-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .steps[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:.85rem 0 0;padding:0;list-style:none}.ingredient-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:.7rem}.ingredient-item[_ngcontent-%COMP%]{min-height:2.75rem;padding:.35rem 0;border-bottom:1px solid #f1f5f9}.ingredient-text[_ngcontent-%COMP%]{display:grid;gap:.2rem;font-size:1rem;line-height:1.6}.ingredient-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#166534}.ingredient-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#4b5563;font-size:.9rem}.steps[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{display:grid;gap:1rem}.steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:grid;grid-template-columns:2.2rem 1fr;gap:.75rem;align-items:start}.step-number[_ngcontent-%COMP%]{font-size:2.1rem;line-height:1;color:var(--accent);font-weight:700}.steps[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;line-height:1.6;color:var(--text-secondary)}.tag-row[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;overflow-x:auto;gap:.55rem}.tag-chip[_ngcontent-%COMP%]{border-radius:999px;background:#e8f5e9;color:#14532d;padding:.45rem .8rem;font-size:.9rem;white-space:nowrap}.footer-actions[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#f8faf8f5;border-top:1px solid #d4d4d8;padding:.75rem 1rem calc(.75rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:1fr 1fr;gap:.6rem}.footer-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:2.9rem;border:0;border-radius:.8rem;font:inherit}.footer-actions[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{grid-column:1/-1;background:var(--accent);color:#f0fdf4;display:inline-flex;align-items:center;justify-content:center;gap:.45rem;font-weight:700}.footer-actions[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{background:#fff;color:#1f2937;border:1px solid #d4d4d8}.footer-actions[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{background:#991b1b;color:#fee2e2}button[_ngcontent-%COMP%]:disabled{opacity:.45}.gallery-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#020617e6;display:grid;place-items:center;z-index:1000;padding:.75rem}.gallery-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}@media (min-width: 760px){.detail-screen[_ngcontent-%COMP%]{padding-bottom:2rem}.recipe-header[_ngcontent-%COMP%], .quick-facts[_ngcontent-%COMP%], .ingredients[_ngcontent-%COMP%], .steps[_ngcontent-%COMP%], .tags[_ngcontent-%COMP%], .hero-image[_ngcontent-%COMP%]{max-width:48rem;margin-left:auto;margin-right:auto}.footer-actions[_ngcontent-%COMP%]{position:sticky;bottom:.6rem;max-width:48rem;margin:1.5rem auto 0;border-radius:1rem;border:1px solid #d4d4d8}}@media (prefers-contrast: more){.detail-screen[_ngcontent-%COMP%]{--background: #fff;--text-primary: #000;--text-secondary: #000}.fact-card[_ngcontent-%COMP%], .ingredient-item[_ngcontent-%COMP%], .footer-actions[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%], .tag-chip[_ngcontent-%COMP%]{border:2px solid #000}}@media print{.no-print[_ngcontent-%COMP%], .footer-actions[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;background:#fff}}"]}))}return t(),e})();const vIe=(t,e)=>e.title,IIe=(t,e)=>e.message;function EIe(t,e){if(1&t&&(H(0,"h2"),Y(1),z()),2&t){const n=Z();L(),ht(n.title)}}function wIe(t,e){if(1&t&&(H(0,"span",3),Y(1),z()),2&t){const n=Z().$implicit;L(),Oi("(",n.note,")")}}function bIe(t,e){if(1&t&&(H(0,"li"),Y(1),Ce(2,wIe,2,1,"span",3),z()),2&t){const n=e.$implicit;L(),Gc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),L(),Se(n.note?2:-1)}}function TIe(t,e){if(1&t&&(H(0,"div",1)(1,"h3"),Y(2),z(),H(3,"ul"),zt(4,bIe,3,3,"li",null,wd),z()()),2&t){const n=e.$implicit;L(2),ht(n.title),L(2),qt(n.items)}}function CIe(t,e){if(1&t&&(H(0,"li"),Y(1),z()),2&t){const n=e.$implicit;L(),ht(n.message)}}function SIe(t,e){if(1&t&&(H(0,"div",2)(1,"h3"),Y(2,"Warnings"),z(),H(3,"ul"),zt(4,CIe,2,1,"li",null,IIe),z()()),2&t){const n=Z();L(4),qt(n.warnings)}}function AIe(t,e){if(1&t&&(H(0,"li"),Y(1),z()),2&t){const n=e.$implicit;L(),ht(n)}}function DIe(t,e){if(1&t&&(H(0,"div",1)(1,"h3"),Y(2,"Steps"),z(),H(3,"ol"),zt(4,AIe,2,1,"li",null,wd),z()()),2&t){const n=Z();L(4),qt(n.steps)}}function RIe(t,e){if(1&t&&(H(0,"article",0),Ce(1,EIe,2,1,"h2"),zt(2,TIe,6,1,"div",1,vIe),Ce(4,SIe,6,0,"div",2),Ce(5,DIe,6,0,"div",1),z()),2&t){const n=e,r=Z();L(),Se(r.showTitle()?1:-1),L(),qt(n.ingredientSections),L(2),Se(r.showWarnings()&&n.warnings.length?4:-1),L(),Se(n.steps.length?5:-1)}}let MIe=(()=>{var t;class e{constructor(){this.parsed=dm(null),this.showWarnings=dm(!1),this.showTitle=dm(!0)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-recipe-preview"]],inputs:{parsed:[1,"parsed"],showWarnings:[1,"showWarnings"],showTitle:[1,"showTitle"]},decls:1,vars:1,consts:[[1,"recipe-card"],[1,"block"],[1,"block","parser-warnings"],[1,"ingredient-note"]],template:function(i,o){if(1&i&&Ce(0,RIe,6,3,"article",0),2&i){let s;Se((s=o.parsed())?0:-1,s)}},styles:[".recipe-card[_ngcontent-%COMP%]{display:grid;gap:.9rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}h2[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.25}h3[_ngcontent-%COMP%]{font-size:.88rem;color:#374151;text-transform:uppercase;letter-spacing:.03em}.block[_ngcontent-%COMP%]{display:grid;gap:.35rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.25rem;line-height:1.3}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}.ingredient-note[_ngcontent-%COMP%]{color:#6b7280}"]}))}return t(),e})();function Kz(t){return tM.apply(this,arguments)}function tM(){return tM=v(function*(t){const e=yield function OIe(t){return nM.apply(this,arguments)}(t),n=Qz(e,1600),r=Qz(e,360);return{id:typeof crypto<"u"&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`,fullDataUrl:n.dataUrl,thumbDataUrl:r.dataUrl,mimeType:"image/webp",width:n.width,height:n.height}}),tM.apply(this,arguments)}function nM(){return(nM=v(function*(t){const e=yield function VIe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;"string"==typeof i?e(i):n(new Error("Nepoda\u0159ilo se na\u010d\xedst soubor obr\xe1zku."))},r.onerror=()=>n(new Error("Nepoda\u0159ilo se na\u010d\xedst soubor obr\xe1zku.")),r.readAsDataURL(t)})}(t);return new Promise((n,r)=>{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Nepoda\u0159ilo se na\u010d\xedst obr\xe1zek.")),i.src=e})})).apply(this,arguments)}function Qz(t,e){const n=Math.min(1,e/Math.max(t.width,t.height)),r=Math.max(1,Math.round(t.width*n)),i=Math.max(1,Math.round(t.height*n)),o=document.createElement("canvas");o.width=r,o.height=i;const s=o.getContext("2d");if(!s)throw new Error("Prohl\xed\u017ee\u010d nepodporuje zpracov\xe1n\xed obr\xe1zk\u016f.");return s.drawImage(t,0,0,r,i),{dataUrl:o.toDataURL("image/webp",.8),width:r,height:i}}const LIe=(t,e)=>e.id;function FIe(t,e){if(1&t&&(le(0,"p",10),Y(1),pe()),2&t){const n=Z();L(),ht(n.state.error())}}function UIe(t,e){if(1&t){const n=rr();le(0,"section",11)(1,"textarea",13),ct("ngModelChange",function(i){return qe(n),Ge(Z().state.rawText.set(i))}),pe(),le(2,"div",14),kt(3,"app-recipe-preview",15),pe()()}if(2&t){const n=Z();L(),xt("ngModel",n.state.rawText())("disabled",!n.api.canWrite()),L(2),xt("parsed",n.state.parsed())("showWarnings",!0)}}function jIe(t,e){1&t&&(le(0,"p",19),Y(1,"No images yet. Add your first photo."),pe())}function BIe(t,e){if(1&t){const n=rr();le(0,"article",21)(1,"div",22),kt(2,"img",23),le(3,"button",24),ct("click",function(){const i=qe(n).$implicit;return Ge(Z(3).setPrimaryImage(i.id))}),fr(),le(4,"svg",25),kt(5,"use",26),pe()()(),Yr(),le(6,"div",27)(7,"input",28,1),ct("change",function(i){const o=qe(n).$implicit;return Ge(Z(3).replaceImage(o.id,i))}),pe(),le(9,"button",29),ct("click",function(){return qe(n),Ge(Bw(8).click())}),Y(10," Replace "),pe(),le(11,"button",30),ct("click",function(){const i=qe(n).$implicit;return Ge(Z(3).removeImage(i.id))}),Y(12," Remove "),pe()()()}if(2&t){const n=e.$implicit,r=Z(3);L(2),xt("src",n.thumbDataUrl,xi),L(),$n("active",r.isPrimaryImage(n.id)),xt("disabled",!r.api.canWrite())("title",r.isPrimaryImage(n.id)?"Primary image":"Set as primary image"),fn("aria-label",r.isPrimaryImage(n.id)?"Primary image selected":"Set as primary image"),L(4),xt("disabled",!r.api.canWrite()),L(2),xt("disabled",!r.api.canWrite()),L(2),xt("disabled",!r.api.canWrite())}}function $Ie(t,e){if(1&t&&(le(0,"div",20),zt(1,BIe,13,9,"article",21,LIe),pe()),2&t){const n=Z(2);L(),qt(n.images())}}function HIe(t,e){if(1&t){const n=rr();le(0,"section",12)(1,"header",16)(2,"h3"),Y(3,"Recipe images"),pe(),le(4,"p"),Y(5,"Choose primary image and keep only the photos you need."),pe()(),le(6,"input",17,0),ct("change",function(i){return qe(n),Ge(Z().addImages(i))}),pe(),le(8,"button",18),ct("click",function(){return qe(n),Ge(Bw(7).click())}),Y(9," Add images "),pe(),Ce(10,jIe,2,0,"p",19)(11,$Ie,3,0,"div",20),pe()}if(2&t){const n=Z();L(6),xt("disabled",!n.api.canWrite()),L(2),xt("disabled",!n.api.canWrite()),L(2),Se(0===n.images().length?10:11)}}let Yz=(()=>{var t;class e{constructor(){this.state=O(Fa),this.api=O(La),this.images=je([]),this.activeTab=je("content"),this.primaryImageId=je(null),this.route=O(Ui),this.router=O(gn)}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected(),yield r.loadImages(i)):r.state.startAdd()})()}setTab(r){this.activeTab.set(r)}setPrimaryImage(r){this.primaryImageId.set(r)}isPrimaryImage(r){return this.primaryImageId()===r}save(){var r=this;return v(function*(){const i=yield r.state.saveSelected();if(i)try{yield r.syncImages(i),yield r.state.refresh(),yield r.router.navigateByUrl("/recipes")}catch(o){r.state.error.set(o.message)}})()}addImages(r){var i=this;return v(function*(){const o=r.target,s=Array.from(o.files??[]);for(const a of s){const c=yield Kz(a);i.images.update(u=>[...u,{id:c.id,thumbDataUrl:c.thumbDataUrl,fullDataUrl:c.fullDataUrl,mimeType:c.mimeType,width:c.width,height:c.height}]),i.primaryImageId()||i.primaryImageId.set(c.id)}o.value=""})()}replaceImage(r,i){var o=this;return v(function*(){const s=i.target,a=s.files?.[0];if(!a)return;const c=yield Kz(a);o.images.update(u=>u.map(d=>d.id===r?{...d,thumbDataUrl:c.thumbDataUrl,fullDataUrl:c.fullDataUrl,mimeType:c.mimeType,width:c.width,height:c.height}:d)),s.value=""})()}removeImage(r){if(this.images.update(o=>o.filter(s=>s.id!==r)),this.primaryImageId()!==r)return;const i=this.images()[0]?.id??null;this.primaryImageId.set(i)}loadImages(r){var i=this;return v(function*(){const o=yield i.api.listRecipeImages(r);i.images.set(o.map(u=>i.fromApiImage(u)));const a=i.state.recipes().find(u=>u.id===r)?.primary_image_id,c=!!a&&o.some(u=>u.id===a);i.primaryImageId.set(c?a??null:o[0]?.id??null)})()}fromApiImage(r){return{id:r.id,thumbDataUrl:r.data_url,fullDataUrl:r.full_data_url,mimeType:r.mime_type,width:r.width,height:r.height}}syncImages(r){var i=this;return v(function*(){const o=yield i.api.listRecipeImages(r),s=new Set(i.images().map(c=>c.id));for(const c of o)s.has(c.id)||(yield i.api.deleteRecipeImage(r,c.id));for(const c of i.images())yield i.api.upsertRecipeImage(r,{id:c.id,data_url:c.thumbDataUrl,full_data_url:c.fullDataUrl,mime_type:c.mimeType,width:c.width,height:c.height});const a=i.primaryImageId()&&s.has(i.primaryImageId()??"")?i.primaryImageId():null;yield i.api.saveRecipeImageMeta(r,i.images().map(c=>({id:c.id,data_url:c.thumbDataUrl})),a)})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-recipe-editor"]],decls:15,vars:12,consts:[["addImagesInput",""],["replaceInput",""],[1,"editor-screen"],["aria-hidden","true","focusable","false",1,"icon-sprite"],["id","icon-primary","viewBox","0 0 24 24"],["d","M12 3l2.65 5.38L20.6 9.25l-4.3 4.2 1.01 5.95L12 16.62l-5.31 2.78 1.01-5.95-4.3-4.2 5.95-.87L12 3z"],[1,"editor-topbar"],["role","tablist","aria-label","Editor sections",1,"tabs"],["type","button","role","tab",1,"tab",3,"click"],["type","button",1,"save",3,"click","disabled"],[1,"error"],["role","tabpanel",1,"content-tab"],["role","tabpanel",1,"images-tab"],["rows","15","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"preview-card"],[3,"parsed","showWarnings"],[1,"images-header"],["type","file","accept","image/*","multiple","",1,"visually-hidden",3,"change","disabled"],["type","button",1,"upload",3,"click","disabled"],[1,"empty"],[1,"image-grid"],[1,"image-card"],[1,"image-media"],["alt","Recipe thumbnail",3,"src"],["type","button",1,"primary-corner",3,"click","disabled","title"],["aria-hidden","true",1,"icon"],["href","#icon-primary"],[1,"image-actions"],["type","file","accept","image/*",1,"visually-hidden",3,"change","disabled"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"]],template:function(i,o){1&i&&(le(0,"section",2),fr(),le(1,"svg",3)(2,"symbol",4),kt(3,"path",5),pe()(),Yr(),le(4,"header",6)(5,"div",7)(6,"button",8),ct("click",function(){return o.setTab("content")}),Y(7," Recipe "),pe(),le(8,"button",8),ct("click",function(){return o.setTab("images")}),Y(9),pe()(),le(10,"button",9),ct("click",function(){return o.save()}),Y(11),pe()(),Ce(12,FIe,2,1,"p",10),Ce(13,UIe,4,4,"section",11),Ce(14,HIe,12,3,"section",12),pe()),2&i&&(L(6),$n("active","content"===o.activeTab()),fn("aria-selected","content"===o.activeTab()),L(2),$n("active","images"===o.activeTab()),fn("aria-selected","images"===o.activeTab()),L(),Oi(" Images (",o.images().length,") "),L(),xt("disabled",o.state.saving()||!o.api.canWrite()),L(),Oi(" ",o.state.saving()?"Saving":"Save"," "),L(),Se(o.state.error()?12:-1),L(),Se("content"===o.activeTab()?13:-1),L(),Se("images"===o.activeTab()?14:-1))},dependencies:[Wz,ff,FR,jy,MIe],styles:[".icon-sprite[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.icon[_ngcontent-%COMP%]{width:.9rem;height:.9rem;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.editor-screen[_ngcontent-%COMP%]{padding:.15rem 0;min-height:60vh}.editor-topbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:12;background:#fff;padding:.2rem 0 .45rem;border-bottom:1px solid #e5e7eb;display:grid;gap:.45rem}.tabs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.35rem}.tab[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:6px;padding:.5rem .55rem;background:#fff;color:#334155;font:inherit;font-size:.84rem;line-height:1.15}.tab.active[_ngcontent-%COMP%]{background:#111827;border-color:#111827;color:#fff}.save[_ngcontent-%COMP%]{border:0;border-radius:6px;padding:.58rem .85rem;background:#111827;color:#fff;font:inherit}.content-tab[_ngcontent-%COMP%], .images-tab[_ngcontent-%COMP%]{margin-top:.65rem}textarea[_ngcontent-%COMP%]{width:100%;min-height:34vh;resize:vertical;border:1px solid #d1d5db;border-radius:6px;padding:.7rem .75rem;background:#fff;font:inherit}.preview-card[_ngcontent-%COMP%]{margin-top:.65rem;padding-top:.6rem;border-top:1px solid #e5e7eb}.images-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .images-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.images-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem}.images-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.28rem;color:#475569;font-size:.82rem}.upload[_ngcontent-%COMP%], .ghost[_ngcontent-%COMP%], .danger[_ngcontent-%COMP%]{border:0;border-radius:6px;padding:.55rem .8rem;font:inherit}.upload[_ngcontent-%COMP%]{margin-top:.65rem;width:100%;background:#111827;color:#fff}.image-grid[_ngcontent-%COMP%]{margin-top:.65rem;display:grid;gap:.55rem;grid-template-columns:repeat(2,minmax(0,1fr))}.image-card[_ngcontent-%COMP%]{min-width:0;border:1px solid #e5e7eb;border-radius:6px;padding:.35rem;display:grid;gap:.4rem;background:#fff}.image-media[_ngcontent-%COMP%]{position:relative}.image-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:4px}.primary-corner[_ngcontent-%COMP%]{position:absolute;top:.3rem;right:.3rem;width:1.65rem;height:1.65rem;border:0;border-radius:6px;display:grid;place-items:center;background:#0f172acc;color:#fff}.primary-corner.active[_ngcontent-%COMP%]{background:#ca8a04;color:#111827}.image-actions[_ngcontent-%COMP%]{display:grid;gap:.35rem;grid-template-columns:1fr}.image-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-width:0}.ghost[_ngcontent-%COMP%]{background:#e2e8f0;color:#0f172a}.danger[_ngcontent-%COMP%]{background:#b91c1c;color:#fff}.empty[_ngcontent-%COMP%]{margin-top:.7rem;color:#475569;font-size:.84rem}button[_ngcontent-%COMP%]:disabled{opacity:.45}.error[_ngcontent-%COMP%]{margin:.6rem 0 0;color:#b91c1c}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@media (min-width: 520px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.image-actions[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.3rem 0}.editor-topbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;align-items:center;gap:.65rem}.save[_ngcontent-%COMP%]{min-width:120px}textarea[_ngcontent-%COMP%]{min-height:42vh}}"]}))}return t(),e})();const zIe=(t,e)=>e.id;function qIe(t,e){1&t&&(H(0,"p"),Y(1,"Loading"),z())}function GIe(t,e){1&t&&(H(0,"p"),Y(1,"No recipes"),z())}function WIe(t,e){1&t&&Gt(0,"img",3),2&t&&ir("src",e,xi)}function KIe(t,e){if(1&t){const n=rr();H(0,"li")(1,"button",2),Ot("click",function(){const i=qe(n).$implicit;return Ge(Z(2).open(i.id))}),Ce(2,WIe,1,1,"img",3),H(3,"span"),Y(4),z()()()}if(2&t){let n;const r=e.$implicit,i=Z(2);L(2),Se((n=i.firstThumb(r))?2:-1,n),L(2),ht(i.state.parsedFromRaw(r.raw_text).title)}}function QIe(t,e){if(1&t&&(H(0,"ul",1),zt(1,KIe,5,2,"li",null,zIe),z()),2&t){const n=Z();L(),qt(n.state.recipes())}}const al=()=>{const t=O(La),e=O(gn);return!(!t.authLoading()&&!t.user())||e.parseUrl("/login")};(function hie(t,e,n){return Ire({rootComponent:t,platformRef:n?.platformRef,...PF(e)})})(J_e,{providers:[function kce(t,...e){return function Fv(t){return{\u0275providers:t}}([{provide:dT,multi:!0,useValue:t},[],{provide:Ui,useFactory:wU,deps:[gn]},{provide:nO,multi:!0,useFactory:bU},e.map(n=>n.\u0275providers)])}([{path:"login",canActivate:[()=>{const t=O(La),e=O(gn);return!t.user()||e.parseUrl("/")}],component:Yve},{path:"",canActivate:[al],component:Qve},{path:"recipes",canActivate:[al],component:(()=>{var t;class e{constructor(){this.state=O(Fa),this.router=O(gn)}ngOnInit(){var r=this;return v(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return v(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}firstThumb(r){const i=r.primary_image_id;return i?r.image_thumbs.find(o=>o.id===i)?.data_url??r.image_thumbs[0]?.data_url??null:r.image_thumbs[0]?.data_url??null}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ri({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],["alt","Recipe image","loading","lazy",3,"src"]],template:function(i,o){1&i&&(H(0,"section",0),Ce(1,qIe,2,0,"p")(2,GIe,2,0,"p")(3,QIe,3,0,"ul",1),z()),2&i&&(L(),Se(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{padding:.3rem 0;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.45rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.42rem;background:#fff;color:#0f172a;border:1px solid #e5e7eb;border-radius:6px;font:inherit;display:grid;grid-template-columns:46px 1fr;gap:.55rem;align-items:center}.recipe-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:46px;height:46px;object-fit:cover;border-radius:4px}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.45rem 0}}"]}))}return t(),e})()},{path:"recipes/new",canActivate:[al],component:Yz},{path:"recipes/:id",canActivate:[al],component:mIe},{path:"recipes/:id/edit",canActivate:[al],component:Yz},{path:"recipes/:id/cook",canActivate:[al],component:Pye},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},qa=>{qa(qa.s=149)}]);