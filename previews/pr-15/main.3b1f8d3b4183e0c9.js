"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{940(){let Va;function rl(){return Va}function ai(t){const e=Va;return Va=t,e}const R3=Symbol("NotFound");function Jy(t){return t===R3||"\u0275NotFound"===t?.name}Error;let on=null,il=!1,Zy=1;const Bt=Symbol("SIGNAL");function se(t){const e=on;return on=t,e}const La={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ol(t){if(il)throw new Error("");if(null===on)return;on.consumerOnSignalRead(t);const e=on.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=on.recomputing;if(r&&(n=void 0!==e?e.nextProducer:on.producers,void 0!==n&&n.producer===t))return on.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===on&&(!r||function k3(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,on)))return;const o=Ua(on),s={producer:t,consumer:on,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};on.producersTail=s,void 0!==e?e.nextProducer=s:on.producers=s,o&&mP(t,s)}function sl(t){if((!Ua(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Zy)){if(!t.producerMustRecompute(t)&&!Nf(t))return void Mf(t);t.producerRecomputeValue(t),Mf(t)}}function pP(t){if(void 0===t.consumers)return;const e=il;il=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||M3(r)}}finally{il=e}}function gP(){return!1!==on?.consumerAllowSignalWrites}function M3(t){t.dirty=!0,pP(t),t.consumerMarkedDirty?.(t)}function Mf(t){t.dirty=!1,t.lastCleanEpoch=Zy}function Fa(t){return t&&function N3(t){t.producersTail=void 0,t.recomputing=!0}(t),se(t)}function al(t,e){se(e),t&&function x3(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Ua(t))do{n=tv(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function Nf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(sl(n),r!==n.version))return!0}return!1}function cl(t){if(Ua(t)){let e=t.producers;for(;void 0!==e;)e=tv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function mP(t,e){const n=t.consumersTail,r=Ua(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)mP(i.producer,i)}function tv(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Ua(e)){let o=e.producers;for(;void 0!==o;)o=tv(o)}return n}function Ua(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function rv(t,e){return Object.is(t,e)}const Xo=Symbol("UNSET"),ja=Symbol("COMPUTING"),Gi=Symbol("ERRORED"),V3={...La,value:Xo,dirty:!0,error:null,equal:rv,kind:"computed",producerMustRecompute:t=>t.value===Xo||t.value===ja,producerRecomputeValue(t){if(t.value===ja)throw new Error("");const e=t.value;t.value=ja;const n=Fa(t);let r,i=!1;try{r=t.computation(),se(null),i=e!==Xo&&e!==Gi&&r!==Gi&&t.equal(e,r)}catch(o){r=Gi,t.error=o}finally{al(t,n)}i?t.value=e:(t.value=r,t.version++)}};let _P=function L3(){throw new Error};function yP(t){_P(t)}function U3(t,e){const n=Object.create(iv);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function j3(t){return ol(t),t.value}(n);return r[Bt]=n,[r,s=>kf(n,s),s=>function vP(t,e){gP()||yP(t),kf(t,e(t.value))}(n,s)]}function kf(t,e){gP()||yP(t),t.equal(t.value,e)||(t.value=e,function B3(t){t.version++,function P3(){Zy++}(),pP(t)}(t))}const iv={...La,equal:rv,value:void 0,kind:"signal"};function et(t){return"function"==typeof t}function ov(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const sv=ov(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function av(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Tn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(et(r))try{r()}catch(o){e=o instanceof sv?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{TP(o)}catch(s){e=e??[],s instanceof sv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new sv(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TP(e);else{if(e instanceof Tn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&av(n,e)}remove(e){const{_finalizers:n}=this;n&&av(n,e),e instanceof Tn&&e._removeParent(this)}}Tn.EMPTY=(()=>{const t=new Tn;return t.closed=!0,t})();const IP=Tn.EMPTY;function EP(t){return t instanceof Tn||t&&"closed"in t&&et(t.remove)&&et(t.add)&&et(t.unsubscribe)}function TP(t){et(t)?t():t.unsubscribe()}const es={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Of={setTimeout(t,e,...n){const{delegate:r}=Of;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Of;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function wP(t){Of.setTimeout(()=>{const{onUnhandledError:e}=es;if(!e)throw t;e(t)})}function cv(){}const $3=uv("C",void 0,void 0);function uv(t,e,n){return{kind:t,value:e,error:n}}let ts=null;function Vf(t){if(es.useDeprecatedSynchronousErrorHandling){const e=!ts;if(e&&(ts={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ts;if(ts=null,n)throw r}}else t()}class lv extends Tn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,EP(e)&&e.add(this)):this.destination=Q3}static create(e,n,r){return new hv(e,n,r)}next(e){this.isStopped?fv(function q3(t){return uv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fv(function H3(t){return uv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fv($3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const G3=Function.prototype.bind;function dv(t,e){return G3.call(t,e)}class W3{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Lf(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Lf(r)}else Lf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Lf(n)}}}class hv extends lv{constructor(e,n,r){let i;if(super(),et(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&es.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dv(e.next,o),error:e.error&&dv(e.error,o),complete:e.complete&&dv(e.complete,o)}):i=e}this.destination=new W3(i)}}function Lf(t){es.useDeprecatedSynchronousErrorHandling?function z3(t){es.useDeprecatedSynchronousErrorHandling&&ts&&(ts.errorThrown=!0,ts.error=t)}(t):wP(t)}function fv(t,e){const{onStoppedNotification:n}=es;n&&Of.setTimeout(()=>n(t,e))}const Q3={closed:!0,next:cv,error:function K3(t){throw t},complete:cv},pv="function"==typeof Symbol&&Symbol.observable||"@@observable";function ns(t){return t}function bP(t){return 0===t.length?ns:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Pt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function Z3(t){return t&&t instanceof lv||function J3(t){return t&&et(t.next)&&et(t.error)&&et(t.complete)}(t)&&EP(t)}(n)?n:new hv(n,r,i);return Vf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=CP(r))((i,o)=>{const s=new hv({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[pv](){return this}pipe(...n){return bP(n)(this)}toPromise(n){return new(n=CP(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function CP(t){var e;return null!==(e=t??es.Promise)&&void 0!==e?e:Promise}const X3=ov(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Vn=(()=>{class t extends Pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new SP(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new X3}next(n){Vf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Vf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Vf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?IP:(this.currentObservers=null,o.push(n),new Tn(()=>{this.currentObservers=null,av(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Pt;return n.source=this,n}}return t.create=(e,n)=>new SP(e,n),t})();class SP extends Vn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:IP}}class ar extends Vn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const DP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class U extends Error{code;constructor(e,n){super(Nr(e,n)),this.code=e}}function Nr(t,e){return`${function eG(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const pt=globalThis;function Ne(t){for(let e in t)if(t[e]===Ne)return e;throw Error("")}function tG(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ln(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Ln).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function gv(t,e){return t?e?`${t} ${e}`:t:e||""}const nG=Ne({__forward_ref__:Ne});function Je(t){return t.__forward_ref__=Je,t.toString=function(){return Ln(this())},t}function fe(t){return Uf(t)?t():t}function Uf(t){return"function"==typeof t&&t.hasOwnProperty(nG)&&t.__forward_ref__===Je}function te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ul(t){return{providers:t.providers||[],imports:t.imports||[]}}function jf(t){return function uG(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,$f)}function Bf(t){return t&&t.hasOwnProperty(mv)?t[mv]:null}const $f=Ne({\u0275prov:Ne}),mv=Ne({\u0275inj:Ne});class H{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yv(t){return t&&!!t.\u0275providers}const vv=Ne({\u0275cmp:Ne}),gG=Ne({\u0275dir:Ne}),mG=Ne({\u0275pipe:Ne}),RP=Ne({\u0275mod:Ne}),is=Ne({\u0275fac:Ne}),hl=Ne({__NG_ELEMENT_ID__:Ne}),PP=Ne({__NG_ENV_ID__:Ne});function ue(t){return"string"==typeof t?t:null==t?"":String(t)}const Iv=Ne({ngErrorCode:Ne}),MP=Ne({ngErrorMessage:Ne}),fl=Ne({ngTokenPath:Ne});function Ev(t,e){return NP("",-200,e)}function Tv(t,e){throw new U(-201,!1)}function NP(t,e,n){const r=new U(e,t);return r[Iv]=e,r[MP]=t,n&&(r[fl]=n),r}let wv;function xP(){return wv}function Fn(t){const e=wv;return wv=t,e}function kP(t,e,n){const r=jf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void Tv()}const os={};class TG{injector;constructor(e){this.injector=e}retrieve(e,n){const r=pl(n)||0;try{return this.injector.get(e,8&r?null:os,r)}catch(i){if(Jy(i))return i;throw i}}}function wG(t,e=0){const n=rl();if(void 0===n)throw new U(-203,!1);if(null===n)return kP(t,void 0,e);{const r=function bG(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(Jy(i)){if(r.optional)return null;throw i}return i}}function ye(t,e=0){return(xP()||wG)(fe(t),e)}function O(t,e){return ye(t,pl(e))}function pl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Cv(t){const e=[];for(let n=0;n<t.length;n++){const r=fe(t[n]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=CG(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(ye(i,o))}else e.push(ye(r))}return e}function CG(t){return t.__NG_DI_FLAG__}function ss(t,e){return t.hasOwnProperty(is)?t[is]:null}function Ba(t,e){t.forEach(n=>Array.isArray(n)?Ba(n,e):e(n))}function VP(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gf(t,e,n){let r=ml(t,e);return r>=0?t[1|r]=n:(r=~r,function FP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Sv(t,e){const n=ml(t,e);if(n>=0)return t[1|n]}function ml(t,e){return function AG(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const xr={},Ze=[],Ki=new H(""),UP=new H("",-1),Av=new H("");class Wf{get(e,n=os){if(n===os){const i=NP("",-201);throw i.name="\u0275NotFound",i}return n}}function kr(t){return t[RP]||null}function Oe(t){return t[vv]||null}function wn(t){return t[gG]||null}function vr(t){return t[mG]||null}function RG(...t){return{\u0275providers:Pv(0,t),\u0275fromNgModule:!0}}function Pv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ba(e,s=>{const a=s;Kf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&jP(i,o),n}function jP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Mv(i,o=>{e(o,r)})}}function Kf(t,e,n,r){if(!(t=fe(t)))return!1;let i=null,o=Bf(t);const s=!o&&Oe(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Bf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Kf(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Ba(o.imports,d=>{Kf(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&jP(u,e)}if(!a){const u=ss(i)||(()=>new i);e({provide:i,useFactory:u,deps:Ze},i),e({provide:Av,useValue:i,multi:!0},i),e({provide:Ki,useValue:()=>ye(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;Mv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function Mv(t,e){for(let n of t)yv(n)&&(n=n.\u0275providers),Array.isArray(n)?Mv(n,e):e(n)}const PG=Ne({provide:String,useValue:Ne});function Nv(t){return null!==t&&"object"==typeof t&&PG in t}function ci(t){return"function"==typeof t}const xv=new H(""),Qf={},qP={};let kv;function Ov(){return void 0===kv&&(kv=new Wf),kv}class bn{}class as extends bn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Lv(e,s=>this.processProvider(s)),this.records.set(UP,Ha(void 0,this)),i.has("environment")&&this.records.set(bn,Ha(void 0,this));const o=this.records.get(xv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Av,Ze,{self:!0}))}retrieve(e,n){const r=pl(n)||0;try{return this.get(e,os,r)}catch(i){if(Jy(i))return i;throw i}}destroy(){_l(this),this._destroyed=!0;const e=se(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return _l(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){_l(this);const n=ai(this),r=Fn(void 0);try{return e()}finally{ai(n),Fn(r)}}get(e,n=os,r){if(_l(this),e.hasOwnProperty(PP))return e[PP](this);const i=pl(r),s=ai(this),a=Fn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function OG(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&jf(e);u=d&&this.injectableDefInScope(d)?Ha(Vv(e),Qf):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?Ov():this.parent).get(e,n=8&i&&n===os?null:n)}catch(c){const u=function IG(t){return t[Iv]}(c);throw-200===u||-201===u?new U(u,null):c}finally{Fn(a),ai(s)}}resolveInjectorInitializers(){const e=se(null),n=ai(this),r=Fn(void 0);try{const o=this.get(Ki,Ze,{self:!0});for(const s of o)s()}finally{ai(n),Fn(r),se(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ln(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=ci(e=fe(e))?e:fe(e&&e.provide);const r=function NG(t){return Nv(t)?Ha(void 0,t.useValue):Ha(zP(t),Qf)}(e);if(!ci(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ha(void 0,Qf,!0),i.factory=()=>Cv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=se(null);try{if(n.value===qP)throw Ev(Ln(e));return n.value===Qf&&(n.value=qP,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function kG(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=fe(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Vv(t){const e=jf(t),n=null!==e?e.factory:ss(t);if(null!==n)return n;if(t instanceof H)throw new U(204,!1);if(t instanceof Function)return function MG(t){if(t.length>0)throw new U(204,!1);const n=function lG(t){return(t?.[$f]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new U(204,!1)}function zP(t,e,n){let r;if(ci(t)){const i=fe(t);return ss(i)||Vv(i)}if(Nv(t))r=()=>fe(t.useValue);else if(function $P(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Cv(t.deps||[]));else if(function BP(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>ye(fe(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=fe(t&&(t.useClass||t.provide));if(!function xG(t){return!!t.deps}(t))return ss(i)||Vv(i);r=()=>new i(...Cv(t.deps))}return r}function _l(t){if(t.destroyed)throw new U(205,!1)}function Ha(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Lv(t,e){for(const n of t)Array.isArray(n)?Lv(n,e):n&&yv(n)?Lv(n.\u0275providers,e):e(n)}function ur(t,e){let n;t instanceof as?(_l(t),n=t):n=new TG(t);const i=ai(n),o=Fn(void 0);try{return e()}finally{ai(i),Fn(o)}}function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Cn(t){return Array.isArray(t)&&!0===t[1]}function WP(t){return!!(4&t.flags)}function di(t){return t.componentOffset>-1}function Ka(t){return!(1&~t.flags)}function Jn(t){return!!t.template}function Xi(t){return!!(512&t[2])}function hi(t){return!(256&~t[2])}function Ht(t){for(;Array.isArray(t);)t=t[0];return t}function Qa(t,e){return Ht(e[t])}function Nt(t,e){return Ht(e[t.index])}function Ya(t,e){return t.data[e]}function Sn(t,e){const n=e[t];return dt(n)?n:n[0]}function $v(t){return!(128&~t[2])}function cn(t,e){return null==e?null:t[e]}function XP(t){t[17]=0}function eM(t){1024&t[2]||(t[2]|=1024,$v(t)&&Ja(t))}function Xf(t){return!!(9216&t[2]||t[24]?.dirty)}function Hv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),Xf(t)&&Ja(t)}function Ja(t){t[10].changeDetectionScheduler?.notify(0);let e=fi(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,$v(e));)e=fi(e)}function ep(t,e){if(hi(t))throw new U(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function fi(t){const e=t[3];return Cn(e)?e[3]:e}function nM(t){return t[7]??=[]}function rM(t){return t.cleanup??=[]}const ae={lFrame:yM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Gv=!1;function iM(){ae.lFrame.elementDepthCount--}function sM(t){return ae.skipHydrationRootTNode===t}function aM(){ae.skipHydrationRootTNode=null}function V(){return ae.lFrame.lView}function pe(){return ae.lFrame.tView}function eo(t){return ae.lFrame.contextLView=t,t[8]}function to(t){return ae.lFrame.contextLView=null,t}function ce(){let t=cM();for(;null!==t&&64===t.type;)t=t.parent;return t}function cM(){return ae.lFrame.currentTNode}function pi(t,e){const n=ae.lFrame;n.currentTNode=t,n.isParent=e}function uM(){return ae.lFrame.isParent}function fM(){return Gv}function tp(t){const e=Gv;return Gv=t,e}function Un(){return ae.lFrame.bindingIndex++}function mi(t){const e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function KG(t,e){const n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kv(e)}function Kv(t){ae.lFrame.currentDirectiveIndex=t}function Yv(){return ae.lFrame.currentQueryIndex}function np(t){ae.lFrame.currentQueryIndex=t}function YG(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function mM(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=YG(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ae.lFrame=_M();return r.currentTNode=e,r.lView=t,!0}function Jv(t){const e=_M(),n=t[1];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _M(){const t=ae.lFrame,e=null===t?null:t.child;return null===e?yM(t):e}function yM(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function vM(){const t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const IM=vM;function Zv(){const t=vM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jt(){return ae.lFrame.selectedIndex}function hs(t){ae.lFrame.selectedIndex=t}function Or(){const t=ae.lFrame;return Ya(t.tView,t.selectedIndex)}let EM=!0;function rp(){return EM}function El(t){EM=t}function TM(t,e=null,n=null,r){const i=wM(t,e,n,r);return i.resolveInjectorInitializers(),i}function wM(t,e=null,n=null,r,i=new Set){const o=[n||Ze,RG(t)];return r=r||("object"==typeof t?void 0:Ln(t)),new as(o,e||Ov(),r||null,i)}class Zn{static THROW_IF_NOT_FOUND=os;static NULL=new Wf;static create(e,n){if(Array.isArray(e))return TM({name:""},n,e,"");{const r=e.name??"";return TM({name:r},e.parent,e.providers,r)}}static \u0275prov=te({token:Zn,providedIn:"any",factory:()=>ye(UP)});static __NG_ELEMENT_ID__=-1}const Ir=new H("");let Vr=(()=>class t{static __NG_ELEMENT_ID__=r6;static __NG_ENV_ID__=n=>n})();class bM extends Vr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return hi(this._lView)}onDestroy(e){const n=this._lView;return ep(n,e),()=>function qv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function r6(){return new bM(V())}class Xa{_console=console;handleError(e){this._console.error("ERROR",e)}}const Lr=new H("",{providedIn:"root",factory:()=>{const t=O(bn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Xa),e.handleError(n))}}}),CM={provide:Ki,useValue:()=>{O(Xa)},multi:!0};function wt(t,e){const[n,r,i]=U3(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=Xv.bind(o),o}function Xv(){const t=this[Bt];if(void 0===t.readonlyFn){const e=()=>this();e[Bt]=t,t.readonlyFn=e}return t.readonlyFn}let eI=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=o6})();function o6(){return new eI(V(),ce())}class fs{}const DM=new H("",{providedIn:"root",factory:()=>!1}),RM=new H(""),PM=new H("");let no=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ar(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Pt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}return t})();function Tl(...t){}let NM=(()=>{class t{static \u0275prov=te({token:t,providedIn:"root",factory:()=>new s6})}return t})();class s6{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let xM=null;function ro(){return xM}class c6{}let kM=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(u6),providedIn:"platform"})}return t})(),u6=(()=>{class t extends kM{_location;_history;_doc=O(Ir);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ro().getBaseHref(this._doc)}onPopState(n){const r=ro().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ro().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function OM(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function VM(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function ps(t){return t&&"?"!==t[0]?`?${t}`:t}let ip=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(d6),providedIn:"root"})}return t})();const l6=new H("");let d6=(()=>{class t extends ip{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Ir).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return OM(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ps(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+ps(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+ps(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ye(kM),ye(l6,8))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wl=(()=>{class t{_subject=new Vn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function p6(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(VM(LM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ps(r))}normalize(n){return t.stripTrailingSlash(function f6(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,LM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ps(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ps(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ps;static joinWithSlash=OM;static stripTrailingSlash=VM;static \u0275fac=function(r){return new(r||t)(ye(ip))};static \u0275prov=te({token:t,factory:()=>function h6(){return new wl(ye(ip))}(),providedIn:"root"})}return t})();function LM(t){return t.replace(/\/index.html$/,"")}function QM(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){QM(o,r,i,s,a,"next",c)}function a(c){QM(o,r,i,s,a,"throw",c)}s(void 0)})}}function YM(t){return et(t?.lift)}function Zt(t){return e=>{if(YM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ft(t,e,n,r,i){return new J6(t,e,n,r,i)}class J6 extends lv{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(t,e){return Zt((n,r)=>{let i=0;n.subscribe(Ft(r,o=>{r.next(t.call(e,o,i++))}))})}function _i(t){return{toString:t}.toString()}class x5{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function uN(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const yi=(()=>{const t=()=>lN;return t.ngInherit=!0,t})();function lN(t){return t.type.prototype.ngOnChanges&&(t.setInput=O5),k5}function k5(){const t=hN(this),e=t?.current;if(e){const n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function O5(t,e,n,r,i){const o=this.declaredInputs[r],s=hN(t)||function V5(t,e){return t[dN]=e}(t,{previous:xr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new x5(u&&u.currentValue,n,c===xr),uN(t,e,i,n)}const dN="__ngSimpleChanges__";function hN(t){return t[dN]||null}const ms=[],Le=function(t,e=null,n){for(let r=0;r<ms.length;r++)(0,ms[r])(t,e,n)};function pp(t,e,n){pN(t,e,3,n)}function gp(t,e,n,r){(3&t[2])===n&&pN(t,e,n,r)}function dI(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function pN(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(B5(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function gN(t,e){Le(4,t,e);const n=se(null);try{e.call(t)}finally{se(n),Le(5,t,e)}}function B5(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,gN(a,o)):gN(a,o)}class Pl{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function _N(t){return 3===t||4===t||6===t}function yN(t){return 64===t.charCodeAt(0)}function ac(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||vN(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function vN(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function fI(t){return-1!==t}function Ml(t){return 32767&t}function Nl(t,e){let n=function z5(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let pI=!0;function mp(t){const e=pI;return pI=t,e}let G5=0;const Ur={};function _p(t,e){const n=TN(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,gI(r.data,t),gI(e,null),gI(r.blueprint,null));const i=yp(t,e),o=t.injectorIndex;if(fI(i)){const s=Ml(i),a=Nl(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function gI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function TN(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function yp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=RN(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function mI(t,e,n){!function W5(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(hl)&&(r=n[hl]),null==r&&(r=n[hl]=G5++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function wN(t,e,n){if(8&n||void 0!==t)return t;Tv()}function bN(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=Fn(void 0);try{return i?i.get(e,r,8&n):kP(e,r,8&n)}finally{Fn(o)}}return wN(r,0,n)}function CN(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function Z5(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!Xi(s);){const a=SN(o,s,n,2|r,Ur);if(a!==Ur)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,Ur,r);if(d!==Ur)return d}c=RN(s),s=s[14]}o=c}return i}(t,e,n,r,Ur);if(s!==Ur)return s}const o=SN(t,e,n,r,Ur);if(o!==Ur)return o}return bN(e,n,r,i)}function SN(t,e,n,r,i){const o=function Y5(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(hl)?t[hl]:void 0;return"number"==typeof e?e>=0?255&e:J5:e}(n);if("function"==typeof o){if(!mM(e,t,r))return 1&r?wN(i,0,r):bN(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;Tv()}finally{IM()}}else if("number"==typeof o){let s=null,a=TN(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?yp(t,e):e[a+8],-1!==c&&DN(r,!1)?(s=e[1],a=Ml(c),e=Nl(c,e)):a=-1);-1!==a;){const d=e[1];if(AN(o,a,d.data)){const h=Q5(a,e,n,s,r,u);if(h!==Ur)return h}c=e[a+8],-1!==c&&DN(r,e[1].data[a+8]===u)&&AN(o,a,e)?(s=d,a=Ml(c),e=Nl(c,e)):a=-1}}return i}function Q5(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=vp(a,s,n,null==r?di(a)&&pI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?xl(e,s,d,a,i):Ur}function vp(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&Jn(g)&&g.type===n)return c}return null}function xl(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof Pl){const a=o;if(a.resolving)throw function be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(s[n]),Ev();const c=mp(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Fn(a.injectImpl):null;mM(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function j5(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=lN(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&Fn(h),mp(c),a.resolving=!1,IM()}}return o}function AN(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function DN(t,e){return!(2&t||1&t&&e)}class _t{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return CN(this._tNode,this._lView,e,pl(r),n)}}function J5(){return new _t(ce(),V())}function qt(t){return _i(()=>{const e=t.prototype.constructor,n=e[is]||_I(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[is]||_I(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _I(t){return Uf(t)?()=>{const e=_I(fe(t));return e&&e()}:ss(t)}function RN(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function Ip(t){return function K5(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(_N(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(ce(),t)}function sW(){return cc(ce(),V())}function cc(t,e){return new Er(Nt(t,e))}let Er=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=sW})();function kN(t){return t instanceof Er?t.nativeElement:t}function aW(){return this._results[Symbol.iterator]()}class cW{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Vn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function cr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function SG(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=aW}function kl(t){return!(128&~t.flags)}var Tp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Tp||{});const wp=new Map;let dW=0;function II(t){wp.delete(t[19])}const TI="__ngContext__";function Bn(t,e){dt(e)?(t[TI]=e[19],function fW(t){wp.set(t[19],t)}(e)):t[TI]=e}function zN(t){return WN(t[12])}function GN(t){return WN(t[4])}function WN(t){for(;null!==t&&!Cn(t);)t=t[4];return t}let wI;const Vl=new H("",{providedIn:"root",factory:()=>OW}),OW="ng",e0=new H(""),t0=new H("",{providedIn:"platform",factory:()=>"unknown"}),n0=new H("",{providedIn:"root",factory:()=>function so(){if(void 0!==wI)return wI;if(typeof document<"u")return document;throw new U(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),HW=new H("",{providedIn:"root",factory:()=>!1});function Dp(t){return!(32&~t.flags)}function A0(t,e){const n=t.contentQueries;if(null!==n){const r=se(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];np(n[i]),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function BI(t,e,n){np(0);const r=se(null);try{e(t,n)}finally{se(r)}}function $I(t,e,n){if(WP(e)){const r=se(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{se(r)}}}var vi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vi||{});let Vp;function k0(t){return function zI(){if(void 0===Vp&&(Vp=null,pt.trustedTypes))try{Vp=pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vp}()?.createScriptURL(t)||t}class O0{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DP})`}}function co(t){return t instanceof O0?t.changingThisBreaksApplicationSecurity:t}function Ul(t,e){const n=function S9(t){return t instanceof O0&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${DP})`)}return n===e}const P9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fp(t,e,n){return t.createElement(e,n)}function ys(t,e,n,r,i){t.insertBefore(e,n,r,i)}function G0(t,e,n){t.appendChild(e,n)}function W0(t,e,n,r,i){null!==r?ys(t,e,n,r,i):G0(t,e,n)}function Bl(t,e,n,r){t.removeChild(null,e,n,r)}function Q0(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function q5(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];yN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function q9(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function H9(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var pc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(pc||{});function Y0(t){const e=$l();return e?e.sanitize(pc.URL,t)||"":Ul(t,"URL")?co(t):function GI(t){return(t=String(t)).match(P9)?t:"unsafe:"+t}(ue(t))}function J0(t){const e=$l();if(e)return k0(e.sanitize(pc.RESOURCE_URL,t)||"");if(Ul(t,"ResourceURL"))return k0(co(t));throw new U(904,!1)}const J9=new Set(["embed","frame","iframe","media","script"]),Z9=new Set(["base","link","script"]);function Z0(t,e,n){return function X9(t,e){return"src"===e&&J9.has(t)||"href"===e&&Z9.has(t)||"xlink:href"===e&&"script"===t?J0:Y0}(e,n)(t)}function $l(){const t=V();return t&&t[10].sanitizer}function jr(t){return t instanceof Function?t():t}function l8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const rx="ng-template";function d8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==l8(e[i+1].toLowerCase(),n,0))return!0}else if(ZI(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function ZI(t){return 4===t.type&&t.value!==rx}function h8(t,e,n){return e===(4!==t.type||n?t.value:rx)}function f8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function m8(t){for(let e=0;e<t.length;e++)if(_N(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!h8(t,c,n)||""===c&&1===e.length){if(Tr(r))return!1;s=!0}}else if(8&r){if(null===i||!d8(t,i,c,n)){if(Tr(r))return!1;s=!0}}else{const u=e[++a],d=p8(c,i,ZI(t),n);if(-1===d){if(Tr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Tr(r))return!1;s=!0}}}}else{if(!s&&!Tr(r)&&!Tr(c))return!1;if(s&&Tr(c))continue;s=!1,r=c|1&r}}return Tr(r)||s}function Tr(t){return!(1&t)}function p8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function _8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ix(t,e,n=!1){for(let r=0;r<e.length;r++)if(f8(t,e[r],n))return!0;return!1}function ox(t,e){return t?":not("+e.trim()+")":e}function v8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Tr(s)&&(e+=ox(o,i),i=""),r=s,o=o||!Tr(r);n++}return""!==i&&(e+=ox(o,i)),e}const Fe={};function XI(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function T8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fe);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function jp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),XP(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function hW(){return dW++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function eE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Hl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function tE(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function de(t=1){ax(pe(),V(),Jt()+t,!1)}function ax(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&gp(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&pp(e,o,n)}hs(n)}var Bp=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bp||{});function ql(t,e,n,r){const i=se(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&Bp.SignalBased)&&(c=e[o][Bt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):uN(e,c,o,r)}finally{se(i)}}var vs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(vs||{});function rE(t,e){return undefined(t,e)}const Is=new Set;var iE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(iE||{});const zl=new H(""),dx=new Set;function ln(t){dx.has(t)||(dx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const hx=!1,xt=class R8 extends Vn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Fv(){return void 0!==xP()||null!=rl()}()&&(this.destroyRef=O(Vr,{optional:!0})??void 0,this.pendingTasks=O(no,{optional:!0})??void 0)}emit(e){const n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Tn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function fx(t){let e,n;function r(){t=Tl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function px(t){return queueMicrotask(()=>t()),()=>{t=Tl}}const oE="isAngularZone",Hp=oE+"_ID";let P8=0;class xe{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new xt(!1);onMicrotaskEmpty=new xt(!1);onStable=new xt(!1);onError=new xt(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=hx}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function x8(t){const e=()=>{!function N8(t){function e(){fx(()=>{t.callbackScheduled=!1,aE(t),t.isCheckStableRunning=!0,sE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),aE(t))}(t)},n=P8++;t._inner=t._inner.fork({name:"angular",properties:{[oE]:!0,[Hp]:n,[Hp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function k8(t){return _x(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return gx(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),mx(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return gx(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function O8(t){return _x(t,"__scheduler_tick__")}(c)&&e(),mx(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,aE(t),sE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(oE)}static assertInAngularZone(){if(!xe.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(xe.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,M8,Tl,Tl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const M8={};function sE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function aE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function gx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mx(t){t._nesting--,sE(t)}class cE{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new xt;onMicrotaskEmpty=new xt;onStable=new xt;onError=new xt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function _x(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let yx=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}return t})();const qp=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Tx(t,e,n){const r=t.get(qp);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function wx(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function lE(t,e){for(const[n,r]of e)Tx(t,r.animateFns)}(r,i)}function _c(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;Cn(i)?c=i:dt(i)&&(u=!0,i=i[0]);const d=Ht(i);0===t&&null!==r?(wx(a,r,o,n),null==s?G0(e,r,d):ys(e,r,d,s||null,!0)):1===t&&null!==r?(wx(a,r,o,n),ys(e,r,d,s||null,!0)):2===t?Sx(a,o,n,h=>{Bl(e,d,u,h)}):3===t&&Sx(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function K8(t,e,n,r,i,o,s){const a=r[7];a!==Ht(r)&&_c(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];Wp(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function Cx(t,e){e[10].changeDetectionScheduler?.notify(9),Wp(t,e,e[11],2,null,null)}function dE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Gl(t,e){if(hi(e))return;const n=e[11];n.destroyNode&&Wp(t,e,n,3,null,null),function H8(t){let e=t[12];if(!e)return hE(t[1],t);for(;e;){let n=null;if(dt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&hE(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&hE(e[1],e),n=e&&e[4]}e=n}}(e)}function hE(t,e){if(hi(e))return;const n=se(null);try{e[2]&=-129,e[2]|=256,e[24]&&cl(e[24]),function G8(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Pl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Le(4,a,c);try{c.call(a)}finally{Le(5,a,c)}}else{Le(4,i,o);try{o.call(i)}finally{Le(5,i,o)}}}}}(t,e),function z8(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Cn(e[3])){r!==e[3]&&dE(r,e);const i=e[18];null!==i&&i.detachView(t)}II(e)}finally{se(n)}}function Sx(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Is.add(t),Tx(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function q8(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Is.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Is.delete(t),r(!1)},i)}function fE(t,e,n){return function Ax(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(di(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vi.None||i===vi.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}let Px=function Rx(t,e,n){return 40&t.type?Nt(t,n):null};function gE(t,e,n,r){const i=fE(t,r,e),o=e[11],a=function Dx(t,e,n){return Px(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)W0(o,i,n[c],a,!1);else W0(o,i,n,a,!1)}function Es(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Gp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Es(t,r);{const i=t[e.index];return Cn(i)?Gp(-1,i):Ht(i)}}if(128&n)return Es(t,e.next);if(32&n)return rE(e,t)()||Ht(t[e.index]);{const r=Nx(t,e);return null!==r?Array.isArray(r)?r[0]:Es(fi(t[15]),r):Es(t,e.next)}}return null}function Nx(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Gp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Es(r,i)}return e[7]}function mE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&Bn(Ht(c),r),n.flags|=2),!Dp(n))if(8&u)mE(t,e,n.child,r,i,o,!1),_c(e,t,a,i,c,n,o,r);else if(32&u){const d=rE(n,r);let h;for(;h=d();)_c(e,t,a,i,h,n,o,r);_c(e,t,a,i,c,n,o,r)}else 16&u?xx(t,e,r,n,i,o):_c(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Wp(t,e,n,r,i,o){mE(n,r,t.firstChild,e,i,o,!1)}function xx(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)_c(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];kl(r)&&(u.flags|=128),mE(t,e,u,d,i,o,!0)}}function kx(t,e,n,r,i){const o=Jt(),s=2&r;try{hs(-1),s&&e.length>27&&ax(t,e,27,!1),Le(s?2:0,i,n),n(r,i)}finally{hs(o),Le(s?3:1,i,n)}}function Kp(t,e,n){(function e7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;di(n)&&function w8(t,e,n){const r=Nt(e,t),i=function sx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=XI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=tE(t,jp(t,i,null,eE(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||_p(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=xl(e,t,s,n);Bn(c,e),null!==o&&i7(0,s-r,c,a,0,o),Jn(a)&&(Sn(n.index,e)[8]=xl(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function t7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function QG(){return ae.lFrame.currentDirectiveIndex}();try{hs(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];Kv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&n7(c,u)}}finally{hs(-1),Kv(s)}}(t,e,n)}function yc(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let Ox=()=>null;function _E(t,e,n,r,i,o){Zp(t,e[1],e,n,r)?di(t)&&function Vx(t,e){const n=Sn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function X8(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),yE(t,e,n,r,i,o))}function yE(t,e,n,r,i,o){if(3&t.type){const s=Nt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function n7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function vE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];ix(e,o.selectors,!1)&&(r??=[],Jn(o)?r.unshift(o):r.push(o))}return r}function i7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)ql(r,n,s[a],s[a+1])}function Yp(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,pi(t,!0);const c=2===t.type;return c?(Q0(e[11],a,t),(0===function HG(){return ae.lFrame.elementDepthCount}()||Ka(t))&&Bn(a,e),function qG(){ae.lFrame.elementDepthCount++}()):Bn(a,e),rp()&&(!c||!Dp(t))&&gE(s,e,a,t),t}function Jp(t){let e=t;return uM()?function lM(){ae.lFrame.isParent=!1}():(e=e.parent,pi(e,!1)),e}function Zp(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];ql(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)ql(e.data[c],n[c],r,i),a=!0;return a}function s7(t,e){const n=Sn(e,t),r=n[1];!function a7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),Le(18),Xp(r,n,n[8]),Le(19,n[8])}function Xp(t,e,n){Jv(e);try{const r=t.viewQuery;null!==r&&BI(1,r,n);const i=t.template;null!==i&&kx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&A0(t,e),t.staticViewQueries&&BI(2,t.viewQuery,n);const o=t.components;null!==o&&function c7(t,e){for(let n=0;n<e.length;n++)s7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Zv()}}function vc(t,e,n,r){const i=se(null);try{const o=e.tView,c=jp(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),Xp(o,c,n),c}finally{se(i)}}function Ts(t,e){return!e||null===e.firstChild||kl(t)}function Wl(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Ht(o)),Cn(o)&&u7(o,r);const s=n.type;if(8&s)Wl(t,e,n.child,r);else if(32&s){const a=rE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Nx(e,n);if(Array.isArray(a))r.push(...a);else{const c=fi(e[15]);Wl(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function u7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&Wl(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function Ux(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let jx=[];const f7={...La,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ja(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},g7={...La,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fi(t.lView);for(;e&&!Bx(e[1]);)e=fi(e);e&&eM(e)},consumerOnSignalRead(){this.lView[24]=this}};function Bx(t){return 2!==t.type}function $x(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function eg(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function _7(t,e){const n=fM();try{tp(!0),EE(t,e);let r=0;for(;Xf(t);){if(100===r)throw new U(103,!1);r++,EE(t,1)}}finally{tp(n)}}(t,e)}finally{r.end?.()}}function Hx(t,e,n,r){if(hi(e))return;const i=e[2];Jv(e);let a=!0,c=null,u=null;Bx(t)?(u=function l7(t){return t[24]??function d7(t){const e=jx.pop()??Object.create(f7);return e.lView=t,e}(t)}(e),c=Fa(u)):null===function ev(){return on}()?(a=!1,u=function p7(t){const e=t[24]??Object.create(g7);return e.lView=t,e}(e),c=Fa(u)):e[24]&&(cl(e[24]),e[24]=null);try{XP(e),function pM(t){return ae.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&kx(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&pp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&gp(e,g,0,null),dI(e,0)}if(function y7(t){for(let e=zN(t);null!==e;e=GN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)eM(n[r])}}(e),$x(e),qx(e,0),null!==t.contentQueries&&A0(t,e),d){const g=t.contentCheckHooks;null!==g&&pp(e,g)}else{const g=t.contentHooks;null!==g&&gp(e,g,1),dI(e,1)}!function I7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)hs(~i);else{const o=i,s=n[++r],a=n[++r];KG(s,o);const c=e[o];Le(24,c),a(2,c),Le(25,c)}}}finally{hs(-1)}}(t,e);const h=t.components;null!==h&&Gx(e,h,0);const f=t.viewQuery;if(null!==f&&BI(2,f,r),d){const g=t.viewCheckHooks;null!==g&&pp(e,g)}else{const g=t.viewHooks;null!==g&&gp(e,g,2),dI(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}Ux(e),e[2]&=-73}catch(d){throw Ja(e),d}finally{null!==u&&(al(u,c),a&&function h7(t){t.lView[24]!==t&&(t.lView=null,jx.push(t))}(u)),Zv()}}function qx(t,e){for(let n=zN(t);null!==n;n=GN(n))for(let r=10;r<n.length;r++)zx(n[r],e)}function v7(t,e,n){Le(18);const r=Sn(e,t);zx(r,n),Le(19,r[8])}function zx(t,e){$v(t)&&EE(t,e)}function EE(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!Nf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)Hx(r,t,r.template,t[8]);else if(8192&i){const a=se(null);try{$x(t),qx(t,1);const c=r.components;null!==c&&Gx(t,c,1),Ux(t)}finally{se(a)}}}function Gx(t,e,n){for(let r=0;r<e.length;r++)v7(t,e[r],n)}function Ic(t,e){const n=fM()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=fi(t);if(Xi(t)&&!r)return t;t=r}return null}function Wx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Kx(t,e){const n=10+e;if(n<t.length)return t[n]}function Ec(t,e,n,r=!0){const i=e[1];if(function E7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],VP(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&Qx(s,e);const a=e[18];null!==a&&a.insertView(t),Hv(e),e[2]|=128}(i,e,t,n),r){const s=Gp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function $8(t,e,n,r,i,o){r[0]=i,r[5]=e,Wp(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function TE(t,e){const n=Kl(t,e);return void 0!==n&&Gl(n[1],n),n}function Kl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&dE(i,r),e>0&&(t[n-1][4]=r[4]);const o=qf(t,10+e);!function bx(t,e){Cx(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Qx(t,e){const n=t[9],r=e[3];(dt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Ql{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return Wl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return hi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Cn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Kl(e,r),qf(n,r))}this._attachedToViewContainer=!1}Gl(this._lView[1],this._lView)}onDestroy(e){ep(this._lView,e)}markForCheck(){Ic(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Hv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,eg(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Xi(this._lView),n=this._lView[16];null!==n&&!e&&dE(n,this._lView),Cx(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;const n=Xi(this._lView),r=this._lView[16];null!==r&&!n&&Qx(r,this._lView),Hv(this._lView)}}let tg=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=T7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=vc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ql(o)}})();function T7(){return ng(ce(),V())}function ng(t,e){return 4&t.type?new tg(e,t,cc(t,e)):null}function ws(t,e,n,r,i){let o=t.data[e];if(null===o)o=function SE(t,e,n,r,i){const o=cM(),s=uM(),c=t.data[e]=function M7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function oM(){return null!==ae.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function P7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function WG(){return ae.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Il(){const t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return pi(o,!0),o}function pk(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;Bl(e,r,!1),r=o,n++}}}let fK=class{},Ik=class{};class pK{resolveComponentFactory(e){throw new U(917,!1)}}let lg=class{static NULL=new pK};class xE{}let Cs=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function gK(){const t=V(),n=Sn(ce().index,t);return(dt(n)?n:t)[11]}()})(),mK=(()=>{class t{static \u0275prov=te({token:t,providedIn:"root",factory:()=>null})}return t})();const OE={};class wc{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,OE,r);return i!==OE||n===OE?i:this.parentInjector.get(e,n,r)}}function hg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=gv(i,a):2==o&&(r=gv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Z(t,e=0){const n=V();return null===n?ye(t,e):CN(ce(),n,fe(t),e)}function TK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function wk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),Ck(e,o)}}function bk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ck(e,s)}}function Ck(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function Sk(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||ZI(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function CK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ss(i.type)),s=new Pl(o,Jn(i),Z,null);t.blueprint[r]=s,n[r]=s,function SK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function AK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Hl(t,n,i.hostVars,Fe),i)}function DK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Jn(e)&&(n[""]=t)}}function VE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=ws(c,t,n,r,cn(u,s));return o&&function Tk(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function wK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&Jn(g)&&(c=!0,TK(t,n,f)),mI(_p(n,e),t,g.type)}!function RK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Hl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=ac(n.mergedAttrs,g.hostAttrs),CK(t,n,e,h,g),DK(h,g,i),null!==s&&s.has(g)){const[v,T]=s.get(g);n.directiveToIndex.set(g.type,[h,v+n.directiveStart,T+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function bK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);bk(0,e,o,r),bk(1,e,o,r),Sk(e,r,!0)}else wk(0,e,i,r),wk(1,e,i,r),Sk(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function EK(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new U(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,cn(u,a),i),h.mergedAttrs=ac(h.mergedAttrs,h.attrs),null!==h.attrs&&hg(h,h.attrs,!1),null!==h.mergedAttrs&&hg(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function LE(t,e){(function fN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),WP(e)&&t.queries.elementEnd(e)}function tt(t,e,n){return n!==Fe&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function sd(t,e,n){return function r(i){Ic(di(t)?Sn(t.index,e):e,5);const s=e[8];let a=Dk(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Dk(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Dk(t,e,n,r){const i=se(null);try{return Le(6,e,n),!1!==n(r)}catch(o){return function IE(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(Lr,null)}catch{r=null}r?.(e)}(t,o),!1}finally{Le(7,e,n),se(i)}}function Rk(t,e,n,r,i,o,s,a){const c=Ka(t);let u=!1,d=null;if(!r&&c&&(d=function kK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=Nt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function xK(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||Pk(r?v=>r(Ht(v[t.index])):t.index,e,n,o,a,g,!1)}return u}function Pk(t,e,n,r,i,o,s){const a=e.firstCreatePass?rM(e):null,c=nM(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function gg(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);Pk(t.index,a,e,i,o,h,!0)}const lo=Symbol("BINDING");class Mk extends lg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Oe(e);return new UE(n,this.ngModule)}}class UE extends Ik{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function $K(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&Bp.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function HK(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function I8(t){return t.map(v8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Le(22);const a=se(null);try{const c=this.componentDef,u=function KK(t,e,n,r){const i=t?["ng-version","20.3.16"]:function E8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Tr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[lo].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[lo].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=wn("function"==typeof d?d:d.type);c.push(f)}return XI(0,null,function QK(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function qK(t,e,n){let r=e instanceof bn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new wc(n,r):n}(c,i||this.ngModule,e),h=function zK(t){const e=t.get(xE,null);if(null===e)throw new U(407,!1);return{rendererFactory:e,sanitizer:t.get(mK,null),changeDetectionScheduler:t.get(fs,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function Y8(t,e,n,r){const o=r.get(HW,!1)||n===vi.ShadowDom,s=t.selectRootElement(e,o);return function J8(t){Ox(t)}(s),s}(f,r,c.encapsulation,d):function GK(t,e){const n=function WK(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return Fp(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(Nk)||o?.some(A=>"function"!=typeof A&&A.bindings.some(Nk)),v=jp(null,u,null,512|eE(c),null,null,h,f,d,null,null);v[27]=g,Jv(v);let T=null;try{const A=VE(27,v,2,"#host",()=>u.directiveRegistry,!0,0);Q0(f,g,A),Bn(g,v),Kp(u,v,A),$I(u,A,v),LE(u,A),void 0!==n&&function JK(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),T=Sn(A.index,v),v[8]=T[8],Xp(u,v,null)}catch(A){throw null!==T&&II(T),II(v),A}finally{Le(23),Zv()}return new YK(this.componentType,v,!!_)}finally{se(a)}}}function Nk(t){const e=t[lo].kind;return"input"===e||"twoWay"===e}class YK extends fK{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ya(n[1],27),this.location=cc(this._tNode,n),this.instance=Sn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Ql(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;Zp(r,i[1],i,e,n),this.previousInputValues.set(e,n),Ic(Sn(r.index,i),1)}get injector(){return new _t(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let mg=(()=>class t{static __NG_ELEMENT_ID__=ZK})();function ZK(){return Ok(ce(),V())}const XK=mg,xk=class extends XK{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new _t(this._hostTNode,this._hostLView)}get parentInjector(){const e=yp(this._hostTNode,this._hostLView);if(fI(e)){const n=Nl(e,this._hostLView),r=Ml(e);return new _t(n[1].data[r+8],n)}return new _t(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=kk(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,Ts(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function Rl(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const T=n||{};u=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}const d=c?e:new UE(Oe(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(bn,null);A&&(o=A)}Oe(d.componentType??{});const v=d.create(h,i,null,o,s,a);return this.insertImpl(v.hostView,u,Ts(this._hostTNode,null)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function BG(t){return Cn(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new xk(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Ec(s,i,o,r),e.attachToViewContainerRef(),VP(jE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=kk(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Kl(this._lContainer,n);r&&(qf(jE(this._lContainer),n),Gl(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Kl(this._lContainer,n);return r&&null!=qf(jE(this._lContainer),n)?new Ql(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kk(t){return t[8]}function jE(t){return t[8]||(t[8]=[])}function Ok(t,e){let n;const r=e[t.index];return Cn(r)?n=r:(n=Wx(r,e,null,t),e[t.index]=n,tE(e,n)),Vk(n,e,t,r),new xk(n,t,e)}let Vk=function Fk(t,e,n,r){if(t[7])return;let i;i=8&n.type?Ht(r):function eQ(t,e){const n=t[11],r=n.createComment(""),i=Nt(e,t),o=n.parentNode(i);return ys(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class $E{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new $E(this.queryList)}setDirty(){this.queryList.setDirty()}}class HE{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new HE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==KE(e,n).matches&&this.queries[n].setDirty()}}class Uk{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function aQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class qE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new qE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class zE{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new zE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,rQ(n,o)),this.matchTNodeWithReadOption(e,n,vp(n,e,o,!1,!1))}else r===tg?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,vp(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Er||i===mg||i===tg&&4&n.type)this.addMatch(n.index,-2);else{const o=vp(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function rQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function oQ(t,e,n,r){return-1===n?function iQ(t,e){return 11&t.type?cc(t,e):4&t.type?ng(t,e):null}(e,t):-2===n?function sQ(t,e,n){return n===Er?cc(e,t):n===tg?ng(e,t):n===mg?Ok(e,t):void 0}(t,e,r):xl(t,t[1],n,e)}function jk(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:oQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function GE(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=jk(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&GE(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];GE(g[1],g,u,r)}}}}}return r}function Hk(t,e,n,r){const i=pe();if(i.firstCreatePass){const o=ce();(function qk(t,e,n){null===t.queries&&(t.queries=new qE),t.queries.track(new zE(e,n))})(i,new Uk(e,n,r),o.index),function cQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function Bk(t,e,n){const r=new cW(!(4&~n));return function $G(t,e,n,r){const i=nM(e);i.push(n),t.firstCreatePass&&rM(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new HE).queries.push(new $E(r))-1}(i,V(),n)}function KE(t,e){return t.queries.getByIndex(e)}function zk(t,e){const n=t[1],r=KE(n,e);return r.crossesNgTemplate?GE(n,t,e,[]):jk(n,t,r,e)}let Cc=class{},Yk=class{};class JE extends Cc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mk(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=kr(e);this._bootstrapComponents=jr(o.bootstrap),this._r3Injector=wM(e,n,[{provide:Cc,useValue:this},{provide:lg,useValue:this.componentFactoryResolver},...r],Ln(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Jk extends Yk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new JE(this.moduleType,e,[])}}class Zk extends Cc{injector;componentFactoryResolver=new Mk(this);instance=null;constructor(e){super();const n=new as([...e.providers,{provide:Cc,useValue:this},{provide:lg,useValue:this.componentFactoryResolver}],e.parent||Ov(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZE(t,e,n=null){return new Zk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let yQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Pv(0,n.type),i=r.length>0?ZE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:t,providedIn:"environment",factory:()=>new t(ye(bn))})}return t})();function ho(t){return _i(()=>{const e=eO(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Tp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(yQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vi.Emulated,styles:t.styles||Ze,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&ln("NgStandalone"),tO(n);const r=t.dependencies;return n.directiveDefs=yg(r,Xk),n.pipeDefs=yg(r,vr),n.id=function wQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function Xk(t){return Oe(t)||wn(t)}function _g(t){return _i(()=>({type:t.type,bootstrap:t.bootstrap||Ze,declarations:t.declarations||Ze,imports:t.imports||Ze,exports:t.exports||Ze,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function vQ(t,e){if(null==t)return xr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Bp.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function IQ(t){if(null==t)return xr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ee(t){return _i(()=>{const e=eO(t);return tO(e),e})}function eO(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||Ze,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:vQ(t.inputs,e),outputs:IQ(t.outputs),debugInfo:null}}function tO(t){t.features?.forEach(e=>e(t))}function yg(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Ue(t){let e=function nO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Jn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=XE(t.inputs),s.declaredInputs=XE(t.declaredInputs),s.outputs=XE(t.outputs);const a=i.hostBindings;a&&DQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&SQ(t,c),u&&AQ(t,u),bQ(t,i),tG(t.outputs,i.outputs),Jn(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Ue&&(n=!1)}}e=Object.getPrototypeOf(e)}!function CQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ac(i.hostAttrs,n=ac(n,i.hostAttrs))}}(r)}function bQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function XE(t){return t===xr?{}:t===Ze?[]:t}function SQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function AQ(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function DQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ds(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=ws(e,h,4,s||null,a||null),null!=u){const g=cn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function aO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ac(t.mergedAttrs,t.attrs);const d=t.tView=XI(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),pi(t,!1);const c=lO(n,e,t,r);rp()&&gE(n,e,c,t),Bn(c,e);const u=Wx(c,e,c,t);e[r+27]=u,tE(e,u)}(f,t,e,n,r,i,o,c),null!=u&&yc(t,f,d),f}let lO=function dO(t,e,n,r){return El(!0),e[11].createComment("")};let bO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const UO=new H("");function Ag(t){return!!t&&"function"==typeof t.then}function qY(t){return!!t&&"function"==typeof t.subscribe}const jO=new H("");let BO=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(jO,{optional:!0})??[];injector=O(Zn);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=ur(this.injector,i);if(Ag(o))n.push(o);else if(qY(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $O=new H("");let Ei=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Lr);afterRenderManager=O(yx);zonelessEnabled=O(DM);rootEffectScheduler=O(NM);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Vn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(no);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ve(n=>!n))}constructor(){O(zl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(bn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Zn.NULL){return this._injector.get(xe).run(()=>{Le(10);const s=n instanceof Ik;if(!this._injector.get(BO).done)throw new U(405,"");let c;c=s?n:this._injector.get(lg).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function GY(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Cc),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(UO,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Dg(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),Le(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Le(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(iE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);const n=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Le(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xE,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)Le(14),this.synchronizeOnce(),Le(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||Xf(i))&&(eg(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>Xf(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Dg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get($O,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Dg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function $r(t,e,n,r){const i=V();return tt(i,Un(),e)&&(pe(),function r7(t,e,n,r,i,o){const s=Nt(t,e);!function Qp(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?ue(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}(Or(),i,t,e,n,r)),$r}typeof document<"u"&&document;class HJ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function IT(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function ET(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function n1(t,e,n,r,i){if(ET(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function r1(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class i1{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function fr(t,e,n,r,i,o,s,a){ln("NgControlFlow");const c=V(),u=pe();return Ds(c,u,t,e,n,r,i,cn(u.consts,o),256,s,a),TT}function TT(t,e,n,r,i,o,s,a){ln("NgControlFlow");const c=V(),u=pe();return Ds(c,u,t,e,n,r,i,cn(u.consts,o),512,s,a),TT}function pr(t,e){ln("NgControlFlow");const n=V(),r=Un(),i=n[r]!==Fe?n[r]:-1,o=-1!==i?Lg(n,27+i):void 0;if(tt(n,r,t)){const a=se(null);try{if(void 0!==o&&TE(o,0),-1!==t){const c=27+t,u=Lg(n,c),d=wT(n[1],c),h=null;Ec(u,vc(n,d,e,{dehydratedView:h}),0,Ts(d,h))}}finally{se(a)}}else if(void 0!==o){const a=Kx(o,0);void 0!==a&&(a[8]=e)}}class zJ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function fd(t,e){return e}class WJ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function Hr(t,e,n,r,i,o,s,a,c,u,d,h,f){ln("NgControlFlow");const g=V(),_=pe(),v=void 0!==c,T=V(),A=a?s.bind(T[15][8]):s,D=new WJ(v,A);T[27+t]=D,Ds(g,_,t+1,e,n,r,i,cn(_.consts,o),256),v&&Ds(g,_,t+2,c,u,d,h,cn(_.consts,f),512)}class KJ extends HJ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Ec(this.lContainer,n,e,Ts(this.templateTNode,r)),function QJ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function j8(t,e){const n=t.get(qp);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Is.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function YJ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function JJ(t,e){return Kl(t,e)}(this.lContainer,e)}create(e,n){const i=vc(this.hostLView,this.templateTNode,new zJ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){Gl(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function ZJ(t,e){return Kx(t,e)}(this.lContainer,e)}}function qr(t){const e=se(null),n=Jt();try{const r=V(),i=r[1],o=r[n],s=n+1,a=Lg(r,s);if(void 0===o.liveCollection){const u=wT(i,s);o.liveCollection=new KJ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function qJ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=IT(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=IT(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const v=n(o,u),T=n(s,f),A=n(o,d);if(Object.is(A,T)){const D=n(c,g);Object.is(D,v)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new i1,i??=r1(t,o,s,n),ET(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(v,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)n1(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=IT(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new i1,i??=r1(t,o,s,n);const g=n(o,h);if(ET(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)n1(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Un(),d=0===c.length;if(tt(r,u,d)){const h=n+2,f=Lg(r,h);if(d){const g=wT(i,h),_=null;Ec(f,vc(r,g,void 0,{dehydratedView:_}),0,Ts(g,_))}else i.firstUpdatePass&&function ag(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):pk(o,r);t[6]=i}(f),TE(f,0)}}}finally{se(e)}}function Lg(t,e){return t[e]}function wT(t,e){return Ya(t,e)}function go(t,e,n){const r=V();return tt(r,Un(),e)&&(pe(),_E(Or(),r,t,e,r[11],n)),go}function bT(t,e,n,r,i){Zp(e,t,n,i?"class":"style",r)}function je(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?VE(s,i,2,e,vE,function Wv(){return ae.bindingsEnabled}(),n,r):o.data[s];if(Yp(a,i,t,e,CT),Ka(a)){const c=i[1];Kp(c,i,a),$I(c,a,i)}return null!=r&&yc(i,a),je}function ke(){const t=pe(),n=Jp(ce());return t.firstCreatePass&&LE(t,n),sM(n)&&aM(),iM(),null!=n.classesWithoutHost&&function $5(t){return!!(8&t.flags)}(n)&&bT(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function H5(t){return!!(16&t.flags)}(n)&&bT(t,n,V(),n.stylesWithoutHost,!1),ke}function Fg(t,e,n,r){return je(t,e,n,r),ke(),Fg}function vt(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function Ak(t,e,n,r,i,o){const s=e.consts,c=ws(e,t,n,r,cn(s,i));if(c.mergedAttrs=ac(c.mergedAttrs,c.attrs),null!=o){const u=cn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&hg(c,c.attrs,!1),null!==c.mergedAttrs&&hg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return Yp(a,i,t,e,CT),null!=r&&yc(i,a),vt}function ht(){return sM(Jp(ce()))&&aM(),iM(),ht}let CT=(t,e,n,r,i)=>(El(!0),Fp(e[11],r,function n6(){return ae.lFrame.currentNamespace}()));function kc(){return V()}function pd(t,e,n){const r=V();return tt(r,Un(),e)&&(pe(),yE(Or(),r,t,e,r[11],n)),pd}const Bg="en-US";let h1=Bg;function zt(t,e,n){const r=V(),i=pe(),o=ce();return function MT(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=sd(r,e,o),Rk(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=sd(r,e,o),gg(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=sd(r,e,o),gg(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),zt}function Vs(t,e,n){const r=V(),i=pe(),o=ce();return(3&o.type||n)&&Rk(o,i,r,n,r[11],t,e,sd(o,r,e)),Vs}function Ct(t=1){return function JG(t){return(ae.lFrame.contextLView=function tM(t,e){for(;t>0;)e=e[14],t--;return e}(t,ae.lFrame.contextLView))[8]}(t)}function zg(t,e){return t<<17|e<<2}function Ls(t){return t>>17&32767}function NT(t){return 2|t}function Vc(t){return(131068&t)>>2}function xT(t,e){return-131069&t|e<<2}function kT(t){return 1|t}function k1(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Ls(i):Vc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];oX(t[s],e)&&(a=!0,t[s+1]=r?kT(u):NT(u)),s=r?Ls(u):Vc(u)}a&&(t[n+1]=r?NT(i):kT(i))}function oX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ml(t,e)>=0}function Fs(t,e){return function $1(t,e,n,r){const i=V(),o=pe(),s=mi(2);o.firstUpdatePass&&function z1(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Jt()],s=function q1(t,e){return e>=t.expandoStartIndex}(t,n);(function Q1(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function mX(t,e,n,r){const i=function Qv(t){const e=ae.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ed(n=OT(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=OT(i,t,e,n,r),null===o){let c=function _X(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Vc(r))return t[Ls(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=OT(null,t,e,c[1],r),c=Ed(c,e.attrs,r),function yX(t,e,n,r){t[Ls(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function vX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ed(r,t[o].hostAttrs,n);return Ed(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function rX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ls(s),c=Vc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||ml(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Ls(t[a+1]);t[r+1]=zg(f,a),0!==f&&(t[f+1]=xT(t[f+1],r)),t[a+1]=function tX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=zg(a,0),0!==a&&(t[a+1]=xT(t[a+1],r)),a=r;else t[r+1]=zg(c,0),0===a?a=r:t[c+1]=xT(t[c+1],r),c=r;u&&(t[r+1]=NT(t[r+1])),k1(t,d,r,!0),k1(t,d,r,!1),function iX(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ml(o,e)>=0&&(n[r+1]=kT(n[r+1]))}(e,d,t,r,o),s=zg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Fe&&tt(i,s,e)&&function W1(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function nX(t){return!(1&~t)}(u)?K1(c,e,n,i,Vc(u),s):void 0;Gg(d)||(Gg(o)||function eX(t){return!(2&~t)}(u)&&(o=K1(c,null,n,i,a,s)),function Q8(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:vs.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vs.Important),t.setStyle(n,r,i,o))}}(r,s,Qa(Jt(),n),i,o))}(o,o.data[Jt()],i,i[11],t,i[s+1]=function wX(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ln(co(t)))),t}(e,n),r,s)}(t,e,null,!0),Fs}function OT(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ed(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ed(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gf(t,s,!!n||e[++o]))}return void 0===t?null:t}function K1(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===Fe&&(f=h?Ze:void 0);let g=h?Sv(f,r):d===r?f:void 0;if(u&&!Gg(g)&&(g=Sv(c,r)),Gg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Ls(_):Vc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Sv(c,r))}return a}function Gg(t){return void 0!==t}function De(t,e=""){const n=V(),r=pe(),i=t+27,o=r.firstCreatePass?ws(r,i,1,e,null):r.data[i],s=Y1(r,n,o,e,t);n[i]=s,rp()&&gE(r,n,s,o),pi(o,!1)}let Y1=(t,e,n,r,i)=>(El(!0),function YI(t,e){return t.createText(e)}(e[11],r));function X1(t,e,n,r,i,o=""){const a=function As(t,e,n,r){const i=tt(t,e,n);return tt(t,e+1,r)||i}(t,function gi(){return ae.lFrame.bindingIndex}(),n,i);return mi(2),a?e+ue(n)+r+ue(i)+o:Fe}function zr(t){return Us("",t),zr}function Us(t,e,n){const r=V(),i=function Z1(t,e,n,r=""){return tt(t,Un(),n)?e+ue(n)+r:Fe}(r,t,e,n);return i!==Fe&&Ti(r,Jt(),i),Us}function Wg(t,e,n,r,i){const o=V(),s=X1(o,t,e,n,r,i);return s!==Fe&&Ti(o,Jt(),s),Wg}function Ti(t,e,n){const r=Qa(e,t);!function z0(t,e,n){t.setValue(e,n)}(t[11],r,n)}function VT(t,e,n,r,i){if(t=fe(t),Array.isArray(t))for(let o=0;o<t.length;o++)VT(t[o],e,n,r,i);else{const o=pe(),s=V(),a=ce();let c=ci(t)?t:fe(t.provide);const u=zP(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(ci(t)||!t.multi){const g=new Pl(u,i,Z,null),_=FT(c,e,i?d:d+f,h);-1===_?(mI(_p(a,s),o,c),LT(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=FT(c,e,d+f,h),_=FT(c,e,d,d+f),T=_>=0&&n[_];if(i&&!T||!i&&!(g>=0&&n[g])){mI(_p(a,s),o,c);const A=function $X(t,e,n,r,i){const s=new Pl(t,n,Z,null);return s.multi=[],s.index=e,s.componentProviders=0,_V(s,i,r&&!n),s}(i?BX:jX,n.length,i,r,u);!i&&T&&(n[_].providerFactory=A),LT(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else LT(o,t,g>-1?g:_,_V(n[i?_:g],u,!i&&r));!i&&r&&T&&n[_].componentProviders++}}}function LT(t,e,n,r){const i=ci(e),o=function HP(t){return!!t.useClass}(e);if(i||o){const c=(o?fe(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function _V(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function FT(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function jX(t,e,n,r,i){return UT(this.multi,[])}function BX(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=xl(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),UT(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],UT(o,s);return s}function UT(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function st(t,e=[]){return n=>{n.providersResolver=(r,i)=>function UX(t,e,n){const r=pe();if(r.firstCreatePass){const i=Jn(t);VT(n,r.data,r.blueprint,i,!0),VT(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function jT(t,e,n){const r=function An(){const t=ae.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===Fe?function Br(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function od(t,e){return t[e]}(i,r)}class Vee{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Lee=(()=>{class t{compileModuleSync(n){return new Jk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=jr(kr(n).declarations).reduce((s,a)=>{const c=Oe(a);return c&&s.push(new UE(c)),s},[]);return new Vee(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Uee=(()=>{class t{zone=O(xe);changeDetectionScheduler=O(fs);applicationRef=O(Ei);applicationErrorHandler=O(Lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new xe({...GT(),scheduleInRootZone:n}),[{provide:xe,useFactory:t},{provide:Ki,multi:!0,useFactory:()=>{const r=O(Uee,{optional:!0});return()=>r.initialize()}},{provide:Ki,multi:!0,useFactory:()=>{const r=O(Bee);return()=>{r.initialize()}}},!0===e?{provide:RM,useValue:!0}:[],{provide:PM,useValue:n??hx},{provide:Lr,useFactory:()=>{const r=O(xe),i=O(bn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Xa),o.handleError(s))})}}}]}function GT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let Bee=(()=>{class t{subscription=new Tn;initialized=!1;zone=O(xe);pendingTasks=O(no);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KT=(()=>{class t{applicationErrorHandler=O(Lr);appRef=O(Ei);taskService=O(no);ngZone=O(xe);zonelessEnabled=O(DM);tracing=O(zl,{optional:!0});disableScheduling=O(RM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Tn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(PM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cE||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?px:fx;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,px(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HV=new H("",{providedIn:"root",factory:()=>O(HV,{optional:!0,skipSelf:!0})||function $ee(){return typeof $localize<"u"&&$localize.locale||Bg}()}),im=Symbol("InputSignalNode#UNSET"),CL={...iv,transformFn:void 0,applyValueToInputSignal(t,e){kf(t,e)}};function SL(t,e){const n=Object.create(CL);function r(){if(ol(n),n.value===im)throw new U(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[Bt]=n,r}class Nne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ip(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function AL(t,e){return SL(t,e)}new H("").__NG_ELEMENT_ID__=t=>{const e=ce();if(null===e)throw new U(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new U(204,!1)};const One=(AL.required=function kne(t){return SL(im,t)},AL),om=new H(""),jne=new H("");function Ad(t){return!t.moduleRef}let $c=null;let am=(()=>class t{static __NG_ELEMENT_ID__=Gne})();function Gne(t){return function Wne(t,e,n){if(di(t)&&!n){const r=Sn(t.index,e);return new Ql(r,r)}return 175&t.type?new Ql(e[15],e):null}(ce(),V(),!(16&~t))}function nre(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Le(8);try{const o=i?.injector??function zne(t=[]){if($c)return $c;const e=function VL(t=[],e){return Zn.create({name:e,providers:[{provide:xv,useValue:"platform"},{provide:om,useValue:new Set([()=>$c=null])},...t]})}(t);return $c=e,function zY(){!function F3(t){_P=t}(()=>{throw new U(600,"")})}(),function LL(t){const e=t.get(e0,null);ur(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[zT({}),{provide:fs,useExisting:KT},CM,...n||[]];return function NL(t){const e=Ad(t)?t.r3Injector:t.moduleRef.injector,n=e.get(xe);return n.run(()=>{Ad(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Lr);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ad(t)){const o=()=>e.destroy(),s=t.platformInjector.get(om);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(om);s.add(o),t.moduleRef.onDestroy(()=>{Dg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function $ne(t,e,n){try{const r=n();return Ag(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(no),s=o.add(),a=e.get(BO);return a.runInitializers(),a.donePromise.then(()=>{if(function cZ(t){"string"==typeof t&&(h1=t.toLowerCase().replace(/_/g,"-"))}(e.get(HV,Bg)||Bg),!e.get(jne,!0))return Ad(t)?e.get(Ei):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ad(t)){const d=e.get(Ei);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new Zk({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Le(9)}}function Hc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class aF{_doc;constructor(e){this._doc=e}manager}let lw=(()=>{class t extends aF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ye(Ir))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const dw=new H("");let cF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof lw));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof lw);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ye(dw),ye(xe))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const hw="ng-app-id";function uF(t){for(const e of t)e.remove()}function lF(t,e){const n=e.createElement("style");return n.textContent=t,n}function fw(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let dF=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Rre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${hw}="${e}"],link[${hw}="${e}"]`);if(i)for(const o of i)o.removeAttribute(hw),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,lF);r?.forEach(i=>this.addUsage(i,this.external,fw))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(uF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])uF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,lF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,fw(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ye(Ir),ye(Vl),ye(n0,8),ye(t0))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const pw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gw=/%COMP%/g,Ore=new H("",{providedIn:"root",factory:()=>!0});function fF(t,e){return e.map(n=>n.replace(gw,t))}let pF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new mw(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof mF?i.applyToHost(n):i instanceof _w&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case vi.Emulated:o=new mF(c,u,r,this.appId,d,s,a,h,f);break;case vi.ShadowDom:return new Ure(c,u,n,r,s,a,this.nonce,h,f);default:o=new _w(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ye(cF),ye(dF),ye(Vl),ye(Ore),ye(Ir),ye(xe),ye(n0),ye(zl,8))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();class mw{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(pw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=pw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=pw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(vs.DashCase|vs.Important)?e.style.setProperty(n,r,i&vs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&vs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=ro().getGlobalEventTarget(this.doc,e)))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function gF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Ure extends mw{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=fF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=fw(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _w extends mw{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?fF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Is.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class mF extends _w{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function Vre(t){return"_ngcontent-%COMP%".replace(gw,t)}(d),this.hostAttr=function Lre(t){return"_nghost-%COMP%".replace(gw,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class yw extends c6{supportsDOMEvents=!0;static makeCurrent(){!function a6(t){xM??=t}(new yw)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Bre(){return Rd=Rd||document.head.querySelector("base"),Rd?Rd.getAttribute("href"):null}();return null==n?null:function $re(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Rd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function g6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Rd=null,qre=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})();const _F=["alt","control","meta","shift"],zre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gre={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function yF(t){return{appProviders:[...eie,...t?.providers??[]],platformProviders:Zre}}const Zre=[{provide:t0,useValue:"browser"},{provide:e0,useValue:function Qre(){yw.makeCurrent()},multi:!0},{provide:Ir,useFactory:function Jre(){return function kW(t){wI=t}(document),document}}],eie=[{provide:xv,useValue:"root"},{provide:Xa,useFactory:function Yre(){return new Xa}},{provide:dw,useClass:lw,multi:!0,deps:[Ir]},{provide:dw,useClass:(()=>{class t extends aF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ro().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_F.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=zre[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),_F.forEach(s=>{s!==i&&(0,Gre[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(ye(Ir))};static \u0275prov=te({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Ir]},pF,dF,cF,{provide:xE,useExisting:pF},{provide:class m6{},useClass:qre},[]],oie={...La,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function at(t){return function iie(t){const e=se(null);try{return t()}finally{se(e)}}(t)}function Dn(t,e){return function O3(t,e){const n=Object.create(V3);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(sl(n),ol(n),n.value===Gi)throw n.error;return n.value};return r[Bt]=n,r}(t,e?.equal)}class fie{[Bt];constructor(e){this[Bt]=e}destroy(){this[Bt].destroy()}}const wF={...oie,cleanupFns:void 0,zone:null,onDestroyFn:Tl,run(){const t=tp(!1);try{!function sie(t){if(t.dirty=!1,t.version>0&&!Nf(t))return;t.version++;const e=Fa(t);try{t.cleanup(),t.fn()}finally{al(t,e)}}(this)}finally{tp(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=se(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],se(t)}}},pie={...wF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){cl(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},gie={...wF,consumerMarkedDirty(){this.view[2]|=8192,Ja(this.view),this.notifier.notify(13)},destroy(){cl(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function bF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function hm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function yo(t){return this instanceof yo?(this.v=t,this):new yo(t)}function NF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function bw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const xF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function kF(t){return et(t?.then)}function OF(t){return et(t[pv])}function VF(t){return Symbol.asyncIterator&&et(t?.[Symbol.asyncIterator])}function LF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FF=function Zie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function UF(t){return et(t?.[FF])}function jF(t){return function MF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(v){return new Promise(function(T,A){o.push([g,v,T,A])>1||c(g,v)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof yo?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(v){f(o[0][3],v)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield yo(n.read());if(i)return yield yo(void 0);yield yield yo(r)}}finally{n.releaseLock()}})}function BF(t){return et(t?.getReader)}function Gr(t){if(t instanceof Pt)return t;if(null!=t){if(OF(t))return function Xie(t){return new Pt(e=>{const n=t[pv]();if(et(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(xF(t))return function eoe(t){return new Pt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(kF(t))return function toe(t){return new Pt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,wP)})}(t);if(VF(t))return $F(t);if(UF(t))return function noe(t){return new Pt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(BF(t))return function roe(t){return $F(jF(t))}(t)}throw LF(t)}function $F(t){return new Pt(e=>{(function ioe(t,e){var n,r,i,o;return function RF(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=NF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function wi(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function HF(t,e=0){return Zt((n,r)=>{n.subscribe(Ft(r,i=>wi(r,t,()=>r.next(i),e),()=>wi(r,t,()=>r.complete(),e),i=>wi(r,t,()=>r.error(i),e)))})}function qF(t,e=0){return Zt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zF(t,e){if(!t)throw new Error("Iterable cannot be null");return new Pt(n=>{wi(n,e,()=>{const r=t[Symbol.asyncIterator]();wi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function dn(t,e){return e?function loe(t,e){if(null!=t){if(OF(t))return function ooe(t,e){return Gr(t).pipe(qF(e),HF(e))}(t,e);if(xF(t))return function aoe(t,e){return new Pt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(kF(t))return function soe(t,e){return Gr(t).pipe(qF(e),HF(e))}(t,e);if(VF(t))return zF(t,e);if(UF(t))return function coe(t,e){return new Pt(n=>{let r;return wi(n,e,()=>{r=t[FF](),wi(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>et(r?.return)&&r.return()})}(t,e);if(BF(t))return function uoe(t,e){return zF(jF(t),e)}(t,e)}throw LF(t)}(t,e):Gr(t)}function Sw(t){return t[t.length-1]}function GF(t){return et(Sw(t))?t.pop():void 0}function fm(t){return function doe(t){return t&&et(t.schedule)}(Sw(t))?t.pop():void 0}function he(...t){return dn(t,fm(t))}const pm=ov(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hoe}=Array,{getPrototypeOf:foe,prototype:poe,keys:goe}=Object;function WF(t){if(1===t.length){const e=t[0];if(hoe(e))return{args:e,keys:null};if(function moe(t){return t&&"object"==typeof t&&foe(t)===poe}(e)){const n=goe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:_oe}=Array;function KF(t){return Ve(e=>function yoe(t,e){return _oe(e)?t(...e):t(e)}(t,e))}function QF(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function YF(...t){const e=fm(t),n=GF(t),{args:r,keys:i}=WF(t);if(0===r.length)return dn([],e);const o=new Pt(function voe(t,e,n=ns){return r=>{JF(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)JF(e,()=>{const u=dn(t[c],e);let d=!1;u.subscribe(Ft(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>QF(i,s):ns));return n?o.pipe(KF(n)):o}function JF(t,e,n){t?wi(n,t,e):e()}function Rn(t,e,n=1/0){return et(e)?Rn((r,i)=>Ve((o,s)=>e(r,o,i,s))(Gr(t(r,i))),n):("number"==typeof e&&(n=e),Zt((r,i)=>function Ioe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=v=>u<r?_(v):c.push(v),_=v=>{o&&e.next(v),u++;let T=!1;Gr(n(v,d++)).subscribe(Ft(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<r;){const A=c.shift();s?wi(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe(Ft(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function Aw(t=1/0){return Rn(ns,t)}function Dw(...t){return function Eoe(){return Aw(1)}()(dn(t,fm(t)))}function Rw(t){return new Pt(e=>{Gr(t()).subscribe(e)})}function gm(t,e){const n=et(t)?t:()=>t,r=i=>i.error(n());return new Pt(e?i=>e.schedule(r,0,i):r)}const wr=new Pt(t=>t.complete());function Pw(){return Zt((t,e)=>{let n=null;t._refCount++;const r=Ft(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class ZF extends Pt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,YM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tn;const n=this.getSubject();e.add(this.source.subscribe(Ft(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tn.EMPTY)}return e}refCount(){return Pw()(this)}}function gr(t,e){return Zt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ft(r,c=>{i?.unsubscribe();let u=0;const d=o++;Gr(t(c,d)).subscribe(i=Ft(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qc(t){return t<=0?()=>wr:Zt((e,n)=>{let r=0;e.subscribe(Ft(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function vo(t,e){return Zt((n,r)=>{let i=0;n.subscribe(Ft(r,o=>t.call(e,o,i++)&&r.next(o)))})}function mm(t){return Zt((e,n)=>{let r=!1;e.subscribe(Ft(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function XF(t=Coe){return Zt((e,n)=>{let r=!1;e.subscribe(Ft(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Coe(){return new pm}function zs(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vo((i,o)=>t(i,o,r)):ns,qc(1),n?mm(e):XF(()=>new pm))}function _m(t,e){return et(e)?Rn(t,e,1):Rn(t,1)}function hn(t,e,n){const r=et(t)||e||n?{next:t,error:e,complete:n}:t;return r?Zt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ft(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):ns}function zc(t){return Zt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ft(n,void 0,void 0,s=>{o=Gr(t(s,zc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Mw(t){return t<=0?()=>wr:Zt((e,n)=>{let r=[];e.subscribe(Ft(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Nw(t){return Zt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function e2(t){return Zt((e,n)=>{Gr(t).subscribe(Ft(n,()=>n.complete(),cv)),!n.closed&&e.subscribe(n)})}let Foe=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ye(Ir))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ge="primary",Nd=Symbol("RouteTitle");class zoe{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Gc(t){return new zoe(t)}function Goe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Wr(t,e){const n=t?xw(t):void 0,r=e?xw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!u2(t[i],e[i]))return!1;return!0}function xw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function u2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function l2(t){return t.length>0?t[t.length-1]:null}function bi(t){return function Sie(t){return!!t&&(t instanceof Pt||et(t.lift)&&et(t.subscribe))}(t)?t:Ag(t)?dn(Promise.resolve(t)):he(t)}const Koe={exact:function f2(t,e,n){if(!Ws(t.segments,e.segments)||!ym(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!f2(t.children[r],e.children[r],n))return!1;return!0},subset:p2},d2={exact:function Qoe(t,e){return Wr(t,e)},subset:function Yoe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>u2(t[n],e[n]))},ignored:()=>!0};function h2(t,e,n){return Koe[n.paths](t.root,e.root,n.matrixParams)&&d2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function p2(t,e,n){return g2(t,e,e.segments,n)}function g2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Ws(i,n)||e.hasChildren()||!ym(i,n,r))}if(t.segments.length===n.length){if(!Ws(t.segments,n)||!ym(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!p2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Ws(t.segments,i)&&ym(t.segments,i,r)&&t.children[ge])&&g2(t.children[ge],e,o,r)}}function ym(t,e,n){return e.every((r,i)=>d2[n](t[i].parameters,r.parameters))}class Gs{root;queryParams;fragment;_queryParamMap;constructor(e=new Ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return Xoe.serialize(this)}}class Ge{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Em(this)}}class xd{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Gc(this.parameters),this._parameterMap}toString(){return y2(this)}}function Ws(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let vm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>new Im,providedIn:"root"})}return t})();class Im{parse(e){const n=new lse(e);return new Gs(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${kd(e.root,!0)}`,r=function nse(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Tm(n)}=${Tm(i)}`).join("&"):`${Tm(n)}=${Tm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function ese(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Xoe=new Im;function Em(t){return t.segments.map(e=>y2(e)).join("/")}function kd(t,e){if(!t.hasChildren())return Em(t);if(e){const n=t.children[ge]?kd(t.children[ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ge&&r.push(`${i}:${kd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Zoe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===ge?[kd(t.children[ge],!1)]:[`${i}:${kd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ge]?`${Em(t)}/${n[0]}`:`${Em(t)}/(${n.join("//")})`}}function m2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tm(t){return m2(t).replace(/%3B/gi,";")}function kw(t){return m2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wm(t){return decodeURIComponent(t)}function _2(t){return wm(t.replace(/\+/g,"%20"))}function y2(t){return`${kw(t.path)}${function tse(t){return Object.entries(t).map(([e,n])=>`;${kw(e)}=${kw(n)}`).join("")}(t.parameters)}`}const rse=/^[^\/()?;#]+/;function Ow(t){const e=t.match(rse);return e?e[0]:""}const ise=/^[^\/()?;=#]+/,sse=/^[^=?&#]+/,cse=/^[^&#]+/;class lse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ge([],{}):new Ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ge]=new Ge(e,n)),r}parseSegment(){const e=Ow(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new xd(wm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function ose(t){const e=t.match(ise);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Ow(this.remaining);i&&(r=i,this.capture(r))}e[wm(n)]=wm(r)}parseQueryParam(e){const n=function ase(t){const e=t.match(sse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function use(t){const e=t.match(cse);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=_2(n),o=_2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ow(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ge);const s=this.parseChildren();n[o??ge]=1===Object.keys(s).length&&s[ge]?s[ge]:new Ge([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function v2(t){return t.segments.length>0?new Ge([],{[ge]:t}):t}function I2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=I2(i);if(r===ge&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function dse(t){if(1===t.numberOfChildren&&t.children[ge]){const e=t.children[ge];return new Ge(t.segments.concat(e.segments),e.children)}return t}(new Ge(t.segments,e))}function Ks(t){return t instanceof Gs}function E2(t){let e;const i=v2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new Ge(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function T2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Vw(i,i,i,n,r);const o=function fse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new b2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new b2(n,e,r)}(e);if(o.toRoot())return Vw(i,i,new Ge([],{}),n,r);const s=function pse(t,e,n){if(t.isAbsolute)return new Cm(e,!0,0);if(!n)return new Cm(e,!1,NaN);if(null===n.parent)return new Cm(n,!0,0);const r=bm(t.commands[0])?0:1;return function gse(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Cm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Vd(s.segmentGroup,s.index,o.commands):C2(s.segmentGroup,s.index,o.commands);return Vw(i,s.segmentGroup,a,n,r)}function bm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Od(t){return"object"==typeof t&&null!=t&&t.outlets}function Vw(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:w2(t,e,n);const a=v2(I2(s));return new Gs(a,o,i)}function w2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:w2(o,e,n)}),new Ge(t.segments,r)}class b2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bm(r[0]))throw new U(4003,!1);const i=r.find(Od);if(i&&i!==l2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function C2(t,e,n){if(t??=new Ge([],{}),0===t.segments.length&&t.hasChildren())return Vd(t,e,n);const r=function _se(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Od(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!A2(c,u,s))return o;r+=2}else{if(!A2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Ge(t.segments.slice(0,r.pathIndex),{});return o.children[ge]=new Ge(t.segments.slice(r.pathIndex),t.children),Vd(o,0,i)}return r.match&&0===i.length?new Ge(t.segments,{}):r.match&&!t.hasChildren()?Lw(t,e,n):r.match?Vd(t,0,i):Lw(t,e,n)}function Vd(t,e,n){if(0===n.length)return new Ge(t.segments,{});{const r=function mse(t){return Od(t[0])?t[0].outlets:{[ge]:t}}(n),i={};if(Object.keys(r).some(o=>o!==ge)&&t.children[ge]&&1===t.numberOfChildren&&0===t.children[ge].segments.length){const o=Vd(t.children[ge],e,n);return new Ge(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=C2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Ge(t.segments,i)}}function Lw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Od(o)){const c=yse(o.outlets);return new Ge(r,c)}if(0===i&&bm(n[0])){r.push(new xd(t.segments[e].path,S2(n[0]))),i++;continue}const s=Od(o)?o.outlets[ge]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bm(a)?(r.push(new xd(s,S2(a))),i+=2):(r.push(new xd(s,{})),i++)}return new Ge(r,{})}function yse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Lw(new Ge([],{}),0,r))}),e}function S2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function A2(t,e,n){return t==n.path&&Wr(e,n.parameters)}const Sm="imperative";var Se=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Se||{});class Kr{id;url;constructor(e,n){this.id=e,this.url=n}}class Fw extends Kr{type=Se.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qs extends Kr{urlAfterRedirects;type=Se.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var zn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(zn||{}),Uw=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Uw||{});class Ys extends Kr{reason;code;type=Se.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ld extends Kr{reason;code;type=Se.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class jw extends Kr{error;target;type=Se.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class D2 extends Kr{urlAfterRedirects;state;type=Se.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vse extends Kr{urlAfterRedirects;state;type=Se.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ise extends Kr{urlAfterRedirects;state;shouldActivate;type=Se.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ese extends Kr{urlAfterRedirects;state;type=Se.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tse extends Kr{urlAfterRedirects;state;type=Se.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wse{route;type=Se.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bse{route;type=Se.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cse{snapshot;type=Se.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sse{snapshot;type=Se.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ase{snapshot;type=Se.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dse{snapshot;type=Se.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bw{}class Am{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function br(t){return t.outlet||ge}function Wc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Ose{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Fd(this.rootInjector)}}let Fd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ose(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ye(bn))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class R2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=$w(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=$w(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Hw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hw(e,this._root).map(n=>n.value)}}function $w(t,e){if(t===e.value)return e;for(const n of e.children){const r=$w(t,n);if(r)return r}return null}function Hw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Hw(t,n);if(r.length)return r.unshift(e),r}return[]}class Cr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Kc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class P2 extends R2{snapshot;constructor(e,n){super(e),this.snapshot=n,qw(this,e)}toString(){return this.snapshot.toString()}}function M2(t){const e=function Vse(t){const o=new Rm([],{},{},"",{},ge,t,null,{});return new N2("",new Cr(o,[]))}(t),n=new ar([new xd("",{})]),r=new ar({}),i=new ar({}),o=new ar({}),s=new ar(""),a=new Eo(n,r,o,s,i,ge,t,e.root);return a.snapshot=e.root,new P2(new Cr(a,[]),e)}class Eo{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ve(u=>u[Nd]))??he(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>Gc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>Gc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dm(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&k2(i)&&(r.resolve[Nd]=i.title),r}class Rm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class N2 extends R2{url;constructor(e,n){super(n),this.url=e,qw(this,n)}toString(){return x2(this._root)}}function qw(t,e){e.value._routerState=t,e.children.forEach(n=>qw(t,n))}function x2(t){const e=t.children.length>0?` { ${t.children.map(x2).join(", ")} } `:"";return`${t.value}${e}`}function zw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wr(e.params,n.params)||t.paramsSubject.next(n.params),function Woe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Wr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gw(t,e){const n=Wr(t.params,e.params)&&function Joe(t,e){return Ws(t,e)&&t.every((n,r)=>Wr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Gw(t.parent,e.parent))}function k2(t){return"string"==typeof t.title||null===t.title}const Lse=new H("");let Ww=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new xt;deactivateEvents=new xt;attachEvents=new xt;detachEvents=new xt;routerOutletData=One();parentContexts=O(Fd);location=O(mg);changeDetector=O(am);inputBinder=O(Kw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Fse(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ee({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yi]})}return t})();class Fse{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Eo?this.route:e===Fd?this.childContexts:e===Lse?this.outletData:this.parent.get(e,n)}}const Kw=new H("");let O2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ho({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&Fg(0,"router-outlet")},dependencies:[Ww],encapsulation:2})}return t})();function Qw(t){const e=t.children&&t.children.map(Qw),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=O2),n}function Ud(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function jse(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ud(t,r,i);return Ud(t,r)})}(t,e,n);return new Cr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ud(t,a)),s}}const r=function Bse(t){return new Eo(new ar(t.url),new ar(t.params),new ar(t.queryParams),new ar(t.fragment),new ar(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Ud(t,o));return new Cr(r,i)}}class Yw{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const V2="ngNavigationCancelingError";function Pm(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=L2(!1,zn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function L2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[V2]=!0,n.cancellationCode=e,n}function F2(t){return!!t&&t[V2]}class qse{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),zw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Kc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Kc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(zw(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class U2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mm{component;route;constructor(e,n){this.component=e,this.route=n}}function zse(t,e,n){const r=t._root;return jd(r,e?e._root:null,n,[r.value])}function Qc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function cG(t){return null!==jf(t)}(t)?e.get(t):t:r}function jd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Kc(e);return t.children.forEach(s=>{(function Wse(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Kse(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ws(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ws(t.url,e.url)||!Wr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gw(t,e)||!Wr(t.queryParams,e.queryParams);default:return!Gw(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new U2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),jd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mm(a.outlet.component,s))}else s&&Bd(e,a,i),i.canActivateChecks.push(new U2(r)),jd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bd(a,n.getContext(s),i)),i}function Bd(t,e,n){const r=Kc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Bd(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Mm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $d(t){return"function"==typeof t}function j2(t){return t instanceof pm||"EmptyError"===t?.name}const Nm=Symbol("INITIAL_VALUE");function Yc(){return gr(t=>YF(t.map(e=>e.pipe(qc(1),function boe(...t){const e=fm(t);return Zt((n,r)=>{(e?Dw(t,n,e):Dw(t,n)).subscribe(r)})}(Nm)))).pipe(Ve(e=>{for(const n of e)if(!0!==n){if(n===Nm)return Nm;if(!1===n||tae(n))return n}return!0}),vo(e=>e!==Nm),qc(1)))}function tae(t){return Ks(t)||t instanceof Yw}function B2(t){return function Y3(...t){return bP(t)}(hn(e=>{if("boolean"!=typeof e)throw Pm(0,e)}),Ve(e=>!0===e))}class Jw{segmentGroup;constructor(e){this.segmentGroup=e||null}}class Zw extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Jc(t){return gm(new Jw(t))}function hae(t){return gm(new U(4e3,!1))}class pae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return he(r);if(i.numberOfChildren>1||!i.children[ge])return hae();i=i.children[ge]}}applyRedirectCommands(e,n,r,i,o){return function gae(t,e,n){if("string"==typeof t)return he(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return bi(ur(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(Ve(s=>{if(s instanceof Gs)throw new Zw(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new Zw(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Gs(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ge(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const Xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mae(t,e,n,r,i){const o=$2(t,e,n);return o.matched?(r=function Pse(t,e){return t.providers&&!t._injector&&(t._injector=ZE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function dae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?he(i.map(s=>{const a=Qc(s,t);return bi(function eae(t){return t&&$d(t.canMatch)}(a)?a.canMatch(e,n):ur(t,()=>a(e,n)))})).pipe(Yc(),B2()):he(!0)}(r,e,n).pipe(Ve(s=>!0===s?o:{...Xw}))):he(o)}function $2(t,e,n){if("**"===e.path)return function _ae(t){return{matched:!0,parameters:t.length>0?l2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Xw}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Goe)(n,t,e);if(!i)return{...Xw};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function H2(t,e,n,r){return n.length>0&&function Iae(t,e,n){return n.some(r=>xm(t,e,r)&&br(r)!==ge)}(t,n,r)?{segmentGroup:new Ge(e,vae(r,new Ge(n,t.children))),slicedSegments:[]}:0===n.length&&function Eae(t,e,n){return n.some(r=>xm(t,e,r))}(t,n,r)?{segmentGroup:new Ge(t.segments,yae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ge(t.segments,t.children),slicedSegments:n}}function yae(t,e,n,r){const i={};for(const o of n)if(xm(t,e,o)&&!r[br(o)]){const s=new Ge([],{});i[br(o)]=s}return{...r,...i}}function vae(t,e){const n={};n[ge]=e;for(const r of t)if(""===r.path&&br(r)!==ge){const i=new Ge([],{});n[br(r)]=i}return n}function xm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class wae{}class Sae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new pae(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){const e=H2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(({children:n,rootSnapshot:r})=>{const i=new Cr(r,n),o=new N2("",i),s=function hse(t,e,n=null,r=null){return T2(E2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new Rm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,n).pipe(Ve(r=>({children:r,rootSnapshot:n})),zc(r=>{if(r instanceof Zw)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jw?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Ve(s=>s instanceof Cr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return dn(o).pipe(_m(s=>{const a=r.children[s],c=function kse(t,e){const n=t.filter(r=>br(r)===e);return n.push(...t.filter(r=>br(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function Aoe(t,e){return Zt(function Soe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ft(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),mm(null),function Doe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vo((i,o)=>t(i,o,r)):ns,Mw(1),n?mm(e):XF(()=>new pm))}(),Rn(s=>{if(null===s)return Jc(r);const a=q2(s);return function Aae(t){t.sort((e,n)=>e.value.outlet===ge?-1:n.value.outlet===ge?1:e.value.outlet.localeCompare(n.value.outlet))}(a),he(a)}))}processSegment(e,n,r,i,o,s,a){return dn(n).pipe(_m(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(zc(u=>{if(u instanceof Jw)return he(null);throw u}))),zs(c=>!!c),zc(c=>{if(j2(c))return function Tae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?he(new wae):Jc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return br(r)===s||s!==ge&&xm(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Jc(i):Jc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=$2(n,i,o);if(!c)return Jc(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new Rm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,z2(i),br(i),i.component??i._loadedComponent??null,i,G2(i)),_=Dm(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(gr(T=>this.applyRedirects.lineralizeSegments(i,T)),Rn(T=>this.processSegment(e,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=mae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(gr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(gr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new Rm(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,z2(r),br(r),r.component??r._loadedComponent??null,r,G2(r)),v=Dm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);const{segmentGroup:T,slicedSegments:A}=H2(n,f,g,u);if(0===A.length&&T.hasChildren())return this.processChildren(d,u,T,_).pipe(Ve(F=>new Cr(_,F)));if(0===u.length&&0===A.length)return he(new Cr(_,[]));const D=br(r)===o;return this.processSegment(d,u,T,A,D?ge:o,!0,_).pipe(Ve(F=>new Cr(_,F instanceof Cr?[F]:[])))})):Jc(n)))}getChildConfig(e,n,r){return n.children?he({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?he({routes:n._loadedRoutes,injector:n._loadedInjector}):function lae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?he(!0):he(i.map(s=>{const a=Qc(s,t);return bi(function Yse(t){return t&&$d(t.canLoad)}(a)?a.canLoad(e,n):ur(t,()=>a(e,n)))})).pipe(Yc(),B2())}(e,n,r).pipe(Rn(i=>i?this.configLoader.loadChildren(e,n).pipe(hn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function fae(){return gm(L2(!1,zn.GuardRejected))}())):he({routes:[],injector:e})}}function Dae(t){const e=t.value.routeConfig;return e&&""===e.path}function q2(t){const e=[],n=new Set;for(const r of t){if(!Dae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=q2(r.children);e.push(new Cr(r.value,i))}return e.filter(r=>!n.has(r))}function z2(t){return t.data||{}}function G2(t){return t.resolve||{}}function W2(t){const e=t.children.map(n=>W2(n)).flat();return[t,...e]}function eb(t){return gr(e=>{const n=t(e);return n?dn(n).pipe(Ve(()=>e)):he(e)})}let K2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ge);return r}getResolvedTitleForRoute(n){return n.data[Nd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(kae),providedIn:"root"})}return t})(),kae=(()=>{class t extends K2{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ye(Foe))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const km=new H("",{providedIn:"root",factory:()=>({})}),tb=new H("");let Q2=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Lee);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return he(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=bi(ur(n,()=>r.loadComponent())).pipe(Ve(Y2),gr(J2),hn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Nw(()=>{this.componentLoaders.delete(r)})),o=new ZF(i,()=>new Vn).pipe(Pw());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Oae(t,e,n,r){return bi(ur(n,()=>t.loadChildren())).pipe(Ve(Y2),gr(J2),Rn(i=>i instanceof Yk||Array.isArray(i)?he(i):dn(e.compileModuleAsync(i))),Ve(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(tb,[],{optional:!0,self:!0}).flat()),{routes:s.map(Qw),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Nw(()=>{this.childrenLoaders.delete(r)})),s=new ZF(o,()=>new Vn).pipe(Pw());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Y2(t){return function Vae(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function J2(t){return he(t)}let nb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Lae),providedIn:"root"})}return t})(),Lae=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Fae=new H(""),Bae=new H("");let $ae=(()=>{class t{currentNavigation=wt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Vn;transitionAbortWithErrorSubject=new Vn;configLoader=O(Q2);environmentInjector=O(bn);destroyRef=O(Vr);urlSerializer=O(vm);rootContexts=O(Fd);location=O(wl);inputBindingEnabled=null!==O(Kw,{optional:!0});titleStrategy=O(K2);options=O(km,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(nb);createViewTransition=O(Fae,{optional:!0});navigationErrorHandler=O(Bae,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new bse(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new wse(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;at(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new ar(null),this.transitions.pipe(vo(r=>null!==r),gr(r=>{let i=!1;return he(r).pipe(gr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),wr;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new Ld(o.id,this.urlSerializer.serialize(o.rawUrl),"",Uw.IgnoredSameUrlNavigation)),o.resolve(!1),wr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return he(o).pipe(gr(c=>(this.events.next(new Fw(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?wr:Promise.resolve(c))),function Rae(t,e,n,r,i,o){return Rn(s=>function bae(t,e,n,r,i,o,s="emptyOnly"){return new Sae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Ve(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),hn(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new D2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new Fw(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=M2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(v=>(v.finalUrl=u,v)),he(r)}return this.events.next(new Ld(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Uw.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wr}),hn(o=>{const s=new vse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ve(o=>(this.currentTransition=r={...o,guards:zse(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function nae(t,e){return Rn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?he({...n,guardsResult:!0}):function rae(t,e,n,r){return dn(t).pipe(Rn(i=>function uae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?he(o.map(a=>{const c=Wc(e)??i,u=Qc(a,c);return bi(function Xse(t){return t&&$d(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):ur(c,()=>u(t,e,n,r))).pipe(zs())})).pipe(Yc()):he(!0)}(i.component,i.route,n,e,r)),zs(i=>!0!==i,!0))}(s,r,i,t).pipe(Rn(a=>a&&function Qse(t){return"boolean"==typeof t}(a)?function iae(t,e,n,r){return dn(e).pipe(_m(i=>Dw(function sae(t,e){return null!==t&&e&&e(new Cse(t)),he(!0)}(i.route.parent,r),function oae(t,e){return null!==t&&e&&e(new Ase(t)),he(!0)}(i.route,r),function cae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Gse(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Rw(()=>he(s.guards.map(c=>{const u=Wc(s.node)??n,d=Qc(c,u);return bi(function Zse(t){return t&&$d(t.canActivateChild)}(d)?d.canActivateChild(r,t):ur(u,()=>d(r,t))).pipe(zs())})).pipe(Yc())));return he(o).pipe(Yc())}(t,i.path,n),function aae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return he(!0);const i=r.map(o=>Rw(()=>{const s=Wc(e)??n,a=Qc(o,s);return bi(function Jse(t){return t&&$d(t.canActivate)}(a)?a.canActivate(e,t):ur(s,()=>a(e,t))).pipe(zs())}));return he(i).pipe(Yc())}(t,i.route,n))),zs(i=>!0!==i,!0))}(r,o,t,e):he(a)),Ve(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),hn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Pm(0,o.guardsResult);const s=new Ise(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),vo(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",zn.GuardRejected),!1)),eb(o=>{if(0!==o.guards.canActivateChecks.length)return he(o).pipe(hn(s=>{const a=new Ese(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),gr(s=>{let a=!1;return he(s).pipe(function Pae(t,e){return Rn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return he(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of W2(c))s.add(u);let a=0;return dn(s).pipe(_m(c=>o.has(c)?function Mae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!k2(i)&&(o[Nd]=i.title),Rw(()=>(t.data=Dm(t,t.parent,n).resolve,function Nae(t,e,n,r){const i=xw(t);if(0===i.length)return he({});const o={};return dn(i).pipe(Rn(s=>function xae(t,e,n,r){const i=Wc(e)??r,o=Qc(t,i);return bi(o.resolve?o.resolve(e,n):ur(i,()=>o(e,n)))}(t[s],e,n,r).pipe(zs(),hn(a=>{if(a instanceof Yw)throw Pm(new Im,a);o[s]=a}))),Mw(1),Ve(()=>o),zc(s=>j2(s)?wr:gm(s)))}(o,t,e,r).pipe(Ve(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=Dm(c,c.parent,t).resolve,he(void 0))),hn(()=>a++),Mw(1),Rn(c=>a===s.size?he(n):wr))})}(this.paramsInheritanceStrategy,this.environmentInjector),hn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",zn.NoDataFromResolver)}}))}),hn(s=>{const a=new Tse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),eb(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=Wc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(hn(d=>{a.component=d}),Ve(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return YF(s(o.targetSnapshot.root)).pipe(mm(null),qc(1))}),eb(()=>this.afterPreactivation()),gr(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?dn(a).pipe(Ve(()=>r)):he(r)}),Ve(o=>{const s=function Use(t,e,n){const r=Ud(t,e._root,n?n._root:void 0);return new P2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),hn(()=>{this.events.next(new Bw)}),((t,e,n,r)=>Ve(i=>(new qse(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),qc(1),e2(new Pt(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(vo(()=>!i&&!r.targetRouterState),hn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",zn.Aborted)}))),hn({next:o=>{i=!0,this.lastSuccessfulNavigation=at(this.currentNavigation),this.events.next(new Qs(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),e2(this.transitionAbortWithErrorSubject.pipe(hn(o=>{throw o}))),Nw(()=>{i||this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),zc(o=>{if(this.destroyed)return r.resolve(!1),wr;if(i=!0,F2(o))this.events.next(new Ys(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function $se(t){return F2(t)&&Ks(t.url)}(o)?this.events.next(new Am(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new jw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=ur(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof Yw))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Pm(0,a);this.events.next(new Ys(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Am(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return wr}))}))}cancelNavigationTransition(n,r,i){const o=new Ys(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=at(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Hae(t){return t!==Sm}let qae=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Gae),providedIn:"root"})}return t})();class zae{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Gae=(()=>{class t extends zae{static \u0275fac=(()=>{let n;return function(i){return(n||(n=qt(t)))(i||t)}})();static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Z2=(()=>{class t{urlSerializer=O(vm);options=O(km,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(wl);urlHandlingStrategy=O(nb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Gs;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Gs?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=M2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:()=>O(Wae),providedIn:"root"})}return t})(),Wae=(()=>{class t extends Z2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Fw?this.updateStateMemento():n instanceof Ld?this.commitTransition(r):n instanceof D2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Bw?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ys&&n.code!==zn.SupersededByNewNavigation&&n.code!==zn.Redirect?this.restoreHistory(r):n instanceof jw?this.restoreHistory(r,!0):n instanceof Qs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=qt(t)))(i||t)}})();static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Qae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(bO);stateManager=O(Z2);options=O(km,{optional:!0})||{};pendingTasks=O(no);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O($ae);urlSerializer=O(vm);location=O(wl);urlHandlingStrategy=O(nb);injector=O(bn);_events=new Vn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(qae);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(tb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Kw,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Tn;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=at(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Ys&&r.code!==zn.Redirect&&r.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qs)this.navigated=!0;else if(r instanceof Am){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Hae(i.source),...s};this.scheduleNavigation(a,Sm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Rse(t){return!(t instanceof Bw||t instanceof Am)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Lr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return at(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Qw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=E2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return T2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ks(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Sm,null,r)}navigate(n,r={skipLocationChange:!1}){return function Jae(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new U(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Nr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Qae}:!1===r?{...Yae}:r,Ks(n))return h2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return h2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function Kae(t,e){t.events.pipe(vo(n=>n instanceof Qs||n instanceof Ys||n instanceof jw||n instanceof Ld),Ve(n=>n instanceof Qs||n instanceof Ld?0:n instanceof Ys&&(n.code===zn.Redirect||n.code===zn.SupersededByNewNavigation)?2:1),vo(n=>2!==n),qc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Om=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=wt(null);get href(){return at(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Vn;applicationErrorHandler=O(Lr);options=O(km,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Nne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Qs&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ks(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:Ks(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Z(Pn),Z(Eo),Ip("tabindex"),Z(Cs),Z(Er),Z(ip))};static \u0275dir=Ee({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&zt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&$r("href",i.reactiveHref(),Z0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Hc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Hc],replaceUrl:[2,"replaceUrl","replaceUrl",Hc],routerLink:"routerLink"},features:[yi]})}return t})(),aU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new xt;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Qs&&this.update()})}ngAfterContentInit(){he(this.links.changes,he(null)).pipe(Aw()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=dn(n).pipe(Aw()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function fce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Z(Pn),Z(Er),Z(Cs),Z(am),Z(Om,8))};static \u0275dir=Ee({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function M1(t,e,n,r){Hk(t,e,n,r)}(o,Om,5),2&r){let s;(function N1(t){const e=V(),n=pe(),r=Yv();np(r+1);const i=KE(n,r);if(t.dirty&&function jG(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=zk(e,r);t.reset(o,kN),t.notifyOnChanges()}return!0}return!1})(s=function x1(){return function WE(t,e){return t[18].queries[e].queryList}(V(),Yv())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[yi]})}return t})();const ob=new H("");function uU(t){return t.routerState.root}function lU(){const t=O(Zn);return e=>{const n=t.get(Ei);if(e!==n.components[0])return;const r=t.get(Pn),i=t.get(dU);1===t.get(sb)&&r.initialNavigation(),t.get(hU,null,{optional:!0})?.setUpPreloading(),t.get(ob,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const dU=new H("",{factory:()=>new Vn}),sb=new H("",{providedIn:"root",factory:()=>1}),hU=new H(""),pU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},gU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new bce;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vm=function(t){return function(t){const e=pU(t);return gU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Hd=function(t){try{return gU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const Lm=()=>{try{return function _U(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},yU=t=>{var e,n;return null===(n=null===(e=Lm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},vU=()=>{var t;return null===(t=Lm())||void 0===t?void 0:t.config},IU=t=>{var e;return null===(e=Lm())||void 0===e?void 0:e[`_${t}`]};class EU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Zc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function TU(t){return cb.apply(this,arguments)}function cb(){return(cb=I(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const qd={};let wU=!1;function bU(t,e){if(typeof window>"u"||typeof document>"u"||!Zc(window.location.host)||qd[t]===e||qd[t]||wU)return;function n(f){return`__firebase__banner__${f}`}qd[t]=e;const r="__firebase__banner",o=function Nce(){const t={prod:[],emulator:[]};for(const e of Object.keys(qd))qd[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function xce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),T=document.getElementById(v)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const F=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(F),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(T,v);const W=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{wU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),F.append(D,_,T,W),document.body.appendChild(F)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function St(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function SU(){return!function CU(){var t;const e=null===(t=Lm())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zd.prototype.create)}}class zd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function $ce(t,e){return t.replace(Hce,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Ci(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Hce=/\{\$([^}]+)}/g;function Si(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(PU(o)&&PU(s)){if(!Si(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function PU(t){return null!==t&&"object"==typeof t}function Gd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Gce{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Wce(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=ub),void 0===i.error&&(i.error=ub),void 0===i.complete&&(i.complete=ub);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ub(){}function kt(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zs="[DEFAULT]";class Xce{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function tue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Zs?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class nue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Xce(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const db=[];var Te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Te||{});const MU={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},rue=Te.INFO,iue={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},oue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=iue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class hb{constructor(e){this.name=e,this._logLevel=rue,this._logHandler=oue,this._userLogHandler=null,db.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?MU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}let NU,xU;const kU=new WeakMap,fb=new WeakMap,OU=new WeakMap,pb=new WeakMap,gb=new WeakMap;let mb={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return fb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||OU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return To(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function fue(t){return"function"==typeof t?function hue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function cue(){return xU||(xU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(_b(this),e),To(kU.get(this))}:function(...e){return To(t.apply(_b(this),e))}:function(e,...n){const r=t.call(_b(this),e,...n);return OU.set(r,e.sort?e.sort():[e]),To(r)}}(t):(t instanceof IDBTransaction&&function lue(t){if(fb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});fb.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function aue(){return NU||(NU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,mb):t)}function To(t){if(t instanceof IDBRequest)return function uue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(To(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&kU.set(n,t)}).catch(()=>{}),gb.set(e,t),e}(t);if(pb.has(t))return pb.get(t);const e=fue(t);return e!==t&&(pb.set(t,e),gb.set(e,t)),e}const _b=t=>gb.get(t),mue=["get","getKey","getAll","getAllKeys","count"],_ue=["put","add","delete","clear"],yb=new Map;function VU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(yb.get(e))return yb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_ue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mue.includes(n))return;const o=function(){var s=I(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return yb.set(e,o),o}!function due(t){mb=t(mb)}(t=>({...t,get:(e,n,r)=>VU(e,n)||t.get(e,n,r),has:(e,n)=>!!VU(e,n)||t.has(e,n)}));class wue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function bue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Um="@firebase/app",Ai=new hb("@firebase/app"),Cue="@firebase/app-compat",Sue="@firebase/analytics-compat",Aue="@firebase/analytics",Due="@firebase/app-check-compat",Rue="@firebase/app-check",Pue="@firebase/auth",Mue="@firebase/auth-compat",Nue="@firebase/database",xue="@firebase/data-connect",kue="@firebase/database-compat",Oue="@firebase/functions",Vue="@firebase/functions-compat",Lue="@firebase/installations",Fue="@firebase/installations-compat",Uue="@firebase/messaging",jue="@firebase/messaging-compat",Bue="@firebase/performance",$ue="@firebase/performance-compat",Hue="@firebase/remote-config",que="@firebase/remote-config-compat",zue="@firebase/storage",Gue="@firebase/storage-compat",Wue="@firebase/firestore",Kue="@firebase/ai",Que="@firebase/firestore-compat",Yue="firebase",jm="[DEFAULT]",Zue={[Um]:"fire-core",[Cue]:"fire-core-compat",[Aue]:"fire-analytics",[Sue]:"fire-analytics-compat",[Rue]:"fire-app-check",[Due]:"fire-app-check-compat",[Pue]:"fire-auth",[Mue]:"fire-auth-compat",[Nue]:"fire-rtdb",[xue]:"fire-data-connect",[kue]:"fire-rtdb-compat",[Oue]:"fire-fn",[Vue]:"fire-fn-compat",[Lue]:"fire-iid",[Fue]:"fire-iid-compat",[Uue]:"fire-fcm",[jue]:"fire-fcm-compat",[Bue]:"fire-perf",[$ue]:"fire-perf-compat",[Hue]:"fire-rc",[que]:"fire-rc-compat",[zue]:"fire-gcs",[Gue]:"fire-gcs-compat",[Wue]:"fire-fst",[Que]:"fire-fst-compat",[Kue]:"fire-vertex","fire-js":"fire-js",[Yue]:"fire-js-all"},Xs=new Map,Wd=new Map,Kd=new Map;function LU(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xc(t){const e=t.name;if(Kd.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,t);for(const n of Xs.values())LU(n,t);for(const n of Wd.values())LU(n,t);return!0}function Bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return null!=t&&void 0!==t.settings}const mr=new zd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class FU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const eu="11.10.0";function jU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:jm,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=vU()),!n)throw mr.create("no-options");const o=Xs.get(i);if(o){if(Si(n,o.options)&&Si(r,o.config))return o;throw mr.create("duplicate-app",{appName:i})}const s=new nue(i);for(const c of Kd.values())s.addComponent(c);const a=new FU(n,r,s);return Xs.set(i,a),a}function BU(t=jm){const e=Xs.get(t);if(!e&&t===jm&&vU())return jU();if(!e)throw mr.create("no-app",{appName:t});return e}function Di(t,e,n){var r;let i=null!==(r=Zue[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ai.warn(a.join(" "))}Xc(new Js(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Qd="firebase-heartbeat-store";let Eb=null;function $U(){return Eb||(Eb=function gue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=To(s);return r&&s.addEventListener("upgradeneeded",c=>{r(To(s.result),c.oldVersion,c.newVersion,To(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Qd)}catch(n){console.warn(n)}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Eb}function Tb(){return(Tb=I(function*(t){try{const n=(yield $U()).transaction(Qd),r=yield n.objectStore(Qd).get(qU(t));return yield n.done,r}catch(e){if(e instanceof Ci)Ai.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(n.message)}}})).apply(this,arguments)}function HU(t,e){return wb.apply(this,arguments)}function wb(){return(wb=I(function*(t,e){try{const r=(yield $U()).transaction(Qd,"readwrite");yield r.objectStore(Qd).put(e,qU(t)),yield r.done}catch(n){if(n instanceof Ci)Ai.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n?.message});Ai.warn(r.message)}}})).apply(this,arguments)}function qU(t){return`${t.name}!${t.options.appId}`}class cle{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zU();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function dle(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){Ai.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=zU(),{heartbeatsToSend:i,unsentEntries:o}=function ule(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GU(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GU(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Vm(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Ai.warn(r),""}})()}}function zU(){return(new Date).toISOString().substring(0,10)}class lle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function DU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function jce(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function ole(t){return Tb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return HU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return HU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function GU(t){return Vm(JSON.stringify({version:2,heartbeats:t})).length}!function hle(t){Xc(new Js("platform-logger",e=>new wue(e),"PRIVATE")),Xc(new Js("heartbeat",e=>new cle(e),"PRIVATE")),Di(Um,"0.13.2",t),Di(Um,"0.13.2","esm2017"),Di("fire-js","")}(""),Di("firebase","11.10.0","app");var wo,QU,WU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KU={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,w){w||(w=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(R=0;16>R;++R)S[R]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(w=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=w+(b<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(R^x&(w^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(w^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(R^(w|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(w|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(w|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=w+((b=E+(R^(w|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(E^(x|~w))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var w=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(w[R]=x,S=!1)}this.g=w}(function e(C,E){function w(){}w.prototype=E.prototype,C.D=E.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),Hi=2;Hi<arguments.length;Hi++)b[Hi-2]=arguments[Hi];return E.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var w=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=w;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var w=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&w,w/=256;for(this.u(C),C=Array(16),E=w=0;4>E;++E)for(var S=0;32>S;S+=8)C[w++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return T(u(-C));for(var E=[],w=1,S=0;C>=w;S++)E[S]=C/w|0,w*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function v(C){return-1==C.h}function T(C){for(var E=C.g.length,w=[],S=0;S<E;S++)w[S]=~C.g[S];return new s(w,~C.h).add(f)}function A(C,E){return C.add(T(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function F(C,E){this.g=C,this.h=E}function W(C,E){if(_(E))throw Error("division by zero");if(_(C))return new F(h,h);if(v(C))return E=W(T(C),E),new F(T(E.g),T(E.h));if(v(E))return E=W(C,T(E)),new F(T(E.g),E.h);if(30<C.g.length){if(v(C)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var w=f,S=E;0>=S.l(C);)w=Q(w),S=Q(S);var R=ee(w,1),x=ee(S,1);for(S=ee(S,2),w=ee(w,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(w),x=b),S=ee(S,1),w=ee(w,1)}return E=A(C,R.j(E)),new F(R,E)}for(R=h;0<=C.l(E);){for(w=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(w)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(w)).j(E);v(b)||0<b.l(C);)b=(x=u(w-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,b)}return new F(R,C)}function Q(C){for(var E=C.g.length+1,w=[],S=0;S<E;S++)w[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(w,C.h)}function ee(C,E){var w=E>>5;E%=32;for(var S=C.g.length-w,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+w)>>>E|C.i(x+w+1)<<32-E:C.i(x+w);return new s(R,C.h)}(t=s.prototype).m=function(){if(v(this))return-T(this).m();for(var C=0,E=1,w=0;w<this.g.length;w++){var S=this.i(w);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(v(this))return"-"+T(this).toString(C);for(var E=u(Math.pow(C,6)),w=this,S="";;){var R=W(w,E).g,x=((0<(w=A(w,R.j(E))).g.length?w.g[0]:w.h)>>>0).toString(C);if(_(w=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return v(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return v(this)?T(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,w[R]=(b&=65535)<<16|(x&=65535)}return new s(w,-2147483648&w[w.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(v(this))return v(C)?T(this).j(T(C)):T(T(this).j(C));if(v(C))return T(this.j(T(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,w=[],S=0;S<2*E;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),Hi=C.i(R)>>>16,hf=65535&C.i(R);w[2*S+2*R]+=b*hf,D(w,2*S+2*R),w[2*S+2*R+1]+=x*hf,D(w,2*S+2*R+1),w[2*S+2*R+1]+=b*Hi,D(w,2*S+2*R+1),w[2*S+2*R+2]+=x*Hi,D(w,2*S+2*R+2)}for(S=0;S<E;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=E;S<2*E;S++)w[S]=0;return new s(w,0)},t.A=function(C){return W(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)&C.i(S);return new s(w,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)|C.i(S);return new s(w,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)^C.i(S);return new s(w,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QU=KU.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return T(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(b))):S=(S=S.j(w)).add(u(b))}return S},wo=KU.Integer=s}).apply(typeof WU<"u"?WU:typeof self<"u"?self:typeof window<"u"?window:{});var YU,Yd,JU,Hm,bb,ZU,XU,ej,$m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ri={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $m&&$m];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in m))break e;m=m[P]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,P={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),l.apply(p,P)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,P,k){for(var G=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)G[Ye-2]=arguments[Ye];return p.prototype[P].apply(y,G)}}function v(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function T(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const P=l.length||0,k=y.length||0;l.length=P+k;for(let G=0;G<k;G++)l[P+G]=y[G]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Q=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function ee(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let P=1;P<arguments.length;P++){for(m in y=arguments[P],y)l[m]=y[m];for(let k=0;k<w.length;k++)m=w[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=$R;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var hf=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new ave,l=>l.reset());class ave{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ff,pf=!1,$R=new class Hi{constructor(){this.h=this.g=null}add(p,m){const y=hf.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Dz=()=>{const l=a.Promise.resolve(void 0);ff=()=>{l.then(cve)}};var cve=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=hf;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}pf=!1};function Qo(){this.s=this.s,this.C=this.C}function yn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Qo.prototype.s=!1,Qo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},yn.prototype.h=function(){this.defaultPrevented=!0};var uve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function gf(l,p){if(yn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Q){e:{try{W(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:lve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&gf.aa.h.call(this)}}_(gf,yn);var lve={2:"touch",3:"pen",4:"mouse"};gf.prototype.h=function(){gf.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var mf="closure_listenable_"+(1e6*Math.random()|0),dve=0;function hve(l,p,m,y,P){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=P,this.key=++dve,this.da=this.fa=!1}function ky(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Oy(l){this.src=l,this.g={},this.h=0}function HR(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],P=Array.prototype.indexOf.call(y,p,void 0);(k=0<=P)&&Array.prototype.splice.call(y,P,1),k&&(ky(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function qR(l,p,m,y){for(var P=0;P<l.length;++P){var k=l[P];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return P}return-1}Oy.prototype.add=function(l,p,m,y,P){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var G=qR(l,p,y,P);return-1<G?(p=l[G],m||(p.fa=!1)):((p=new hve(p,this.src,k,!!y,P)).fa=m,l.push(p)),p};var zR="closure_lm_"+(1e6*Math.random()|0),GR={};function Rz(l,p,m,y,P){if(y&&y.once)return Mz(l,p,m,y,P);if(Array.isArray(p)){for(var k=0;k<p.length;k++)Rz(l,p[k],m,y,P);return null}return m=YR(m),l&&l[mf]?l.K(p,m,u(y)?!!y.capture:!!y,P):Pz(l,p,m,!1,y,P)}function Pz(l,p,m,y,P,k){if(!p)throw Error("Invalid event type");var G=u(P)?!!P.capture:!!P,Ye=KR(l);if(Ye||(l[zR]=Ye=new Oy(l)),(m=Ye.add(p,m,y,G,k)).proxy)return m;if(y=function fve(){const p=pve;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)uve||(P=G),void 0===P&&(P=!1),l.addEventListener(p.toString(),y,P);else if(l.attachEvent)l.attachEvent(xz(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function Mz(l,p,m,y,P){if(Array.isArray(p)){for(var k=0;k<p.length;k++)Mz(l,p[k],m,y,P);return null}return m=YR(m),l&&l[mf]?l.L(p,m,u(y)?!!y.capture:!!y,P):Pz(l,p,m,!0,y,P)}function Nz(l,p,m,y,P){if(Array.isArray(p))for(var k=0;k<p.length;k++)Nz(l,p[k],m,y,P);else y=u(y)?!!y.capture:!!y,m=YR(m),l&&l[mf]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=qR(k=l.g[p],m,y,P))&&(ky(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=KR(l))&&(p=l.g[p.toString()],l=-1,p&&(l=qR(p,m,y,P)),(m=-1<l?p[l]:null)&&WR(m))}function WR(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[mf])HR(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(xz(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=KR(p))?(HR(m,l),0==m.h&&(m.src=null,p[zR]=null)):ky(l)}}}function xz(l){return l in GR?GR[l]:GR[l]="on"+l}function pve(l,p){if(l.da)l=!0;else{p=new gf(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&WR(l),l=m.call(y,p)}return l}function KR(l){return(l=l[zR])instanceof Oy?l:null}var QR="__closure_events_fn_"+(1e9*Math.random()>>>0);function YR(l){return"function"==typeof l?l:(l[QR]||(l[QR]=function(p){return l.handleEvent(p)}),l[QR])}function vn(){Qo.call(this),this.i=new Oy(this),this.M=this,this.F=null}function kn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new yn(p,l);else if(p instanceof yn)p.target=p.target||l;else{var P=p;S(p=new yn(y,l),P)}if(P=!0,m)for(var k=m.length-1;0<=k;k--){var G=p.g=m[k];P=Vy(G,y,!0,p)&&P}if(P=Vy(G=p.g=l,y,!0,p)&&P,P=Vy(G,y,!1,p)&&P,m)for(k=0;k<m.length;k++)P=Vy(G=p.g=m[k],y,!1,p)&&P}function Vy(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var P=!0,k=0;k<p.length;++k){var G=p[k];if(G&&!G.da&&G.capture==m){var Ye=G.listener,rn=G.ha||G.src;G.fa&&HR(l.i,G),P=!1!==Ye.call(rn,y)&&P}}return P&&!y.defaultPrevented}function kz(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Oz(l){l.g=kz(()=>{l.g=null,l.i&&(l.i=!1,Oz(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(vn,Qo),vn.prototype[mf]=!0,vn.prototype.removeEventListener=function(l,p,m,y){Nz(this,l,p,m,y)},vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)ky(m[y]);delete l.g[p],l.h--}}this.F=null},vn.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},vn.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class gve extends Qo{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Oz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _f(l){Qo.call(this),this.h=l,this.g={}}_(_f,Qo);var Vz=[];function Lz(l){ee(l.g,function(p,m){this.g.hasOwnProperty(m)&&WR(p)},l),l.g={}}_f.prototype.N=function(){_f.aa.N.call(this),Lz(this)},_f.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var JR=a.JSON.stringify,mve=a.JSON.parse,_ve=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ZR(){}function Uz(){}ZR.prototype.h=null;var yf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function XR(){yn.call(this,"d")}function eP(){yn.call(this,"c")}_(XR,yn),_(eP,yn);var Na={},jz=null;function Ly(){return jz=jz||new vn}function Bz(l){yn.call(this,Na.La,l)}function vf(l){const p=Ly();kn(p,new Bz(p))}function $z(l,p){yn.call(this,Na.STAT_EVENT,l),this.stat=p}function On(l){const p=Ly();kn(p,new $z(p,l))}function Hz(l,p){yn.call(this,Na.Ma,l),this.size=p}function If(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Ef(){this.g=!0}function Xu(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function Eve(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var G=1;G<P.length;G++)P[G]=""}}}return JR(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Na.La="serverreachability",_(Bz,yn),Na.STAT_EVENT="statevent",_($z,yn),Na.Ma="timingevent",_(Hz,yn),Ef.prototype.xa=function(){this.g=!1},Ef.prototype.info=function(){};var tP,Fy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Uy(){}function Yo(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new _f(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zz}function zz(){this.i=null,this.g="",this.h=!1}_(Uy,ZR),Uy.prototype.g=function(){return new XMLHttpRequest},Uy.prototype.i=function(){return{}},tP=new Uy;var Gz={},nP={};function rP(l,p,m){l.L=1,l.v=Hy(qi(p)),l.m=m,l.P=!0,Wz(l,null)}function Wz(l,p){l.F=Date.now(),jy(l),l.A=qi(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),a3(m.i,"t",y),l.C=0,m=l.j.J,l.h=new zz,l.g=C3(l.j,m?p:null,!l.m),0<l.O&&(l.M=new gve(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Vz[0]=P.toString()),P=Vz);for(var k=0;k<P.length;k++){var G=Rz(m,P[k],y||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),vf(),function yve(l,p,m,y,P,k){l.info(function(){if(l.g)if(k)for(var G="",Ye=k.split("&"),rn=0;rn<Ye.length;rn++){var Me=Ye[rn].split("=");if(1<Me.length){var In=Me[0];Me=Me[1];var En=In.split("_");G=2<=En.length&&"type"==En[1]?G+(In+"=")+Me+"&":G+(In+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+p+"\n"+m+"\n"+G})}(l.i,l.u,l.A,l.l,l.R,l.m)}function Kz(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function Tve(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?nP:(m=Number(p.substring(m,y)),isNaN(m)?Gz:(y+=1)+m>p.length?nP:(p=p.slice(y,y+m),l.C=y+m,p))}function jy(l){l.S=Date.now()+l.I,Qz(l,l.I)}function Qz(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=If(f(l.ba,l),p)}function iP(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Tf(l){0==l.j.G||l.J||E3(l.j,l)}function xa(l){iP(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,Lz(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function oP(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||sP(m.h,l)))if(!l.K&&sP(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var P=y;if(0==P[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;Ky(m),Gy(m)}lP(m),On(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&0==m.v&&!m.C&&(m.C=If(f(m.Za,m),6e3));if(1>=Zz(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Oa(m,11)}else if((l.K||m.g==l)&&Ky(m),!D(p))for(P=m.Da.g.parse(p),p=0;p<P.length;p++){let Me=P[p];if(m.T=Me[0],Me=Me[1],2==m.G)if("c"==Me[0]){m.K=Me[1],m.ia=Me[2];const In=Me[3];null!=In&&(m.la=In,m.j.info("VER="+m.la));const En=Me[4];null!=En&&(m.Aa=En,m.j.info("SVER="+m.Aa));const nl=Me[5];null!=nl&&"number"==typeof nl&&0<nl&&(m.L=y=1.5*nl,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Mr=l.g;if(Mr){const Yy=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yy){var k=y.h;k.g||-1==Yy.indexOf("spdy")&&-1==Yy.indexOf("quic")&&-1==Yy.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(aP(k,k.h),k.h=null))}if(y.D){const hP=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;hP&&(y.ya=hP,ot(y.I,y.D,hP))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var G=l;if((y=m).qa=b3(y,y.J?y.ia:null,y.W),G.K){Xz(y.h,G);var Ye=G,rn=y.L;rn&&(Ye.I=rn),Ye.B&&(iP(Ye),jy(Ye)),y.g=G}else v3(y);0<m.i.length&&Wy(m)}else"stop"!=Me[0]&&"close"!=Me[0]||Oa(m,7);else 3==m.G&&("stop"==Me[0]||"close"==Me[0]?"stop"==Me[0]?Oa(m,7):uP(m):"noop"!=Me[0]&&m.l&&m.l.ta(Me),m.v=0)}vf()}catch{}}Yo.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==zi(l)?p.j():this.Y(l)},Yo.prototype.Y=function(l){try{if(l==this.g)e:{const En=zi(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>En)&&(3!=En||this.g&&(this.h.h||this.g.oa()||p3(this.g)))){this.J||4!=En||7==p||vf(),iP(this);var m=this.g.Z();this.X=m;t:if(Kz(this)){var y=p3(this.g);l="";var P=y.length,k=4==zi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xa(this),Tf(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==P-1)});y.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=200==m,function vve(l,p,m,y,P,k,G){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+p+"\n"+m+"\n"+k+" "+G})}(this.i,this.u,this.A,this.l,this.R,En,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,rn=this.g;if((Ye=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Ye)){var Me=Ye;break t}}Me=null}if(!(m=Me)){this.o=!1,this.s=3,On(12),xa(this),Tf(this);break e}Xu(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oP(this,m)}if(this.P){let Mr;for(m=!0;!this.J&&this.C<G.length;){if(Mr=Tve(this,G),Mr==nP){4==En&&(this.s=4,On(14),m=!1),Xu(this.i,this.l,null,"[Incomplete Response]");break}if(Mr==Gz){this.s=4,On(15),Xu(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}Xu(this.i,this.l,Mr,null),oP(this,Mr)}if(Kz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=En||0!=G.length||this.h.h||(this.s=1,On(16),m=!1),this.o=this.o&&m,m){if(0<G.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),dP(In),In.M=!0,On(11))}}else Xu(this.i,this.l,G,"[Invalid Chunked Response]"),xa(this),Tf(this)}else Xu(this.i,this.l,G,null),oP(this,G);4==En&&xa(this),this.o&&!this.J&&(4==En?E3(this.j,this):(this.o=!1,jy(this)))}else(function Uve(l){const p={};l=(l.g&&2<=zi(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const P=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[P]||[];p[P]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<G.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),xa(this),Tf(this)}}}catch{}},Yo.prototype.cancel=function(){this.J=!0,xa(this)},Yo.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function Ive(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(vf(),On(17)),xa(this),this.s=2,Tf(this)):Qz(this,this.S-l)};var wve=class{constructor(l,p){this.g=l,this.map=p}};function Yz(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jz(l){return!!l.h||!!l.g&&l.g.size>=l.j}function Zz(l){return l.h?1:l.g?l.g.size:0}function sP(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function aP(l,p){l.g?l.g.add(p):l.h=p}function Xz(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function e3(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return v(l.i)}function t3(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function Cve(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function bve(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),P=y.length,k=0;k<P;k++)p.call(void 0,y[k],m&&m[k],l)}Yz.prototype.cancel=function(){if(this.i=e3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var n3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ka(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ka){this.h=l.h,By(this,l.j),this.o=l.o,this.g=l.g,$y(this,l.s),this.l=l.l;var p=l.i,m=new Cf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),r3(this,m),this.m=l.m}else l&&(p=String(l).match(n3))?(this.h=!1,By(this,p[1]||"",!0),this.o=wf(p[2]||""),this.g=wf(p[3]||"",!0),$y(this,p[4]),this.l=wf(p[5]||"",!0),r3(this,p[6]||"",!0),this.m=wf(p[7]||"")):(this.h=!1,this.i=new Cf(null,this.h))}function qi(l){return new ka(l)}function By(l,p,m){l.j=m?wf(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function $y(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function r3(l,p,m){p instanceof Cf?(l.i=p,function Nve(l,p){p&&!l.j&&(Jo(l),l.i=null,l.g.forEach(function(m,y){var P=y.toLowerCase();y!=P&&(o3(this,y),a3(this,P,m))},l)),l.j=p}(l.i,l.h)):(m||(p=bf(p,Pve)),l.i=new Cf(p,l.h))}function ot(l,p,m){l.i.set(p,m)}function Hy(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function wf(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,Ave),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ave(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}ka.prototype.toString=function(){var l=[],p=this.j;p&&l.push(bf(p,i3,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(bf(p,i3,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(bf(m,"/"==m.charAt(0)?Rve:Dve,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",bf(m,Mve)),l.join("")};var i3=/[#\/\?@]/g,Dve=/[#\?:]/g,Rve=/[#\?]/g,Pve=/[#\?@]/g,Mve=/#/g;function Cf(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Jo(l){l.g||(l.g=new Map,l.h=0,l.i&&function Sve(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),P=null;if(0<=y){var k=l[m].substring(0,y);P=l[m].substring(y+1)}else k=l[m];p(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function o3(l,p){Jo(l),p=el(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function s3(l,p){return Jo(l),p=el(l,p),l.g.has(p)}function a3(l,p,m){o3(l,p),0<m.length&&(l.i=null,l.g.set(el(l,p),v(m)),l.h+=m.length)}function el(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Zo(l,p,m,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(m)}catch{}}function Ove(){this.g=new _ve}function Vve(l,p,m){const y=m||"";try{t3(l,function(P,k){let G=P;u(P)&&(G=JR(P)),p.push(y+k+"="+encodeURIComponent(G))})}catch(P){throw p.push(y+"type="+encodeURIComponent("_badmap")),P}}function Sf(l){this.l=l.Ub||null,this.j=l.eb||!1}function qy(l,p){vn.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function c3(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Af(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Df(l)}function Df(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function u3(l){let p="";return ee(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function cP(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=u3(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):ot(l,p,m))}function Et(l){vn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Cf.prototype).add=function(l,p){Jo(this),this.i=null,l=el(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){Jo(this),this.g.forEach(function(m,y){m.forEach(function(P){l.call(p,P,y,this)},this)},this)},t.na=function(){Jo(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const P=l[y];for(let k=0;k<P.length;k++)m.push(p[y])}return m},t.V=function(l){Jo(this);let p=[];if("string"==typeof l)s3(this,l)&&(p=p.concat(this.g.get(el(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return Jo(this),this.i=null,s3(this,l=el(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var P=k;""!==G[y]&&(P+="="+encodeURIComponent(String(G[y]))),l.push(P)}}return this.i=l.join("&")},_(Sf,ZR),Sf.prototype.g=function(){return new qy(this.l,this.j)},Sf.prototype.i=function(l){return function(){return l}}({}),_(qy,vn),(t=qy.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Df(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Af(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Df(this)),this.g&&(this.readyState=3,Df(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;c3(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Af(this):Df(this),3==this.readyState&&c3(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Af(this))},t.Qa=function(l){this.g&&(this.response=l,Af(this))},t.ga=function(){this.g&&Af(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(qy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Et,vn);var Lve=/^https?$/i,Fve=["POST","PUT"];function l3(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,d3(l),zy(l)}function d3(l){l.A||(l.A=!0,kn(l,"complete"),kn(l,"error"))}function h3(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=zi(l)||2!=l.Z()))if(l.u&&4==zi(l))kz(l.Ea,0,l);else if(kn(l,"readystatechange"),4==zi(l)){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===G){var P=String(l.D).match(n3)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!Lve.test(P?P.toLowerCase():"")}m=y}if(m)kn(l,"complete"),kn(l,"success");else{l.m=6;try{var k=2<zi(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",d3(l)}}finally{zy(l)}}}function zy(l,p){if(l.g){f3(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||kn(l,"ready");try{m.onreadystatechange=y}catch{}}}function f3(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function zi(l){return l.g?l.g.readyState:0}function p3(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Rf(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function g3(l){this.Aa=0,this.i=[],this.j=new Ef,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rf("baseRetryDelayMs",5e3,l),this.cb=Rf("retryDelaySeedMs",1e4,l),this.Wa=Rf("forwardChannelMaxRetries",2,l),this.wa=Rf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Yz(l&&l.concurrentRequestLimit),this.Da=new Ove,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function uP(l){if(m3(l),3==l.G){var p=l.U++,m=qi(l.I);if(ot(m,"SID",l.K),ot(m,"RID",p),ot(m,"TYPE","terminate"),Pf(l,m),(p=new Yo(l,l.j,p)).L=2,p.v=Hy(qi(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=C3(p.j,null),p.g.ea(p.v)),p.F=Date.now(),jy(p)}w3(l)}function Gy(l){l.g&&(dP(l),l.g.cancel(),l.g=null)}function m3(l){Gy(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ky(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function Wy(l){if(!Jz(l.h)&&!l.s){l.s=!0;var p=l.Ga;ff||Dz(),pf||(ff(),pf=!0),$R.add(p,l),l.B=0}}function _3(l,p){var m;m=p?p.l:l.U++;const y=qi(l.I);ot(y,"SID",l.K),ot(y,"RID",m),ot(y,"AID",l.T),Pf(l,y),l.m&&l.o&&cP(y,l.m,l.o),m=new Yo(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=y3(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),aP(l.h,m),rP(m,y,p)}function Pf(l,p){l.H&&ee(l.H,function(m,y){ot(p,y,m)}),l.l&&t3({},function(m,y){ot(p,y,m)})}function y3(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var P=l.i;let k=-1;for(;;){const G=["count="+m];-1==k?0<m?(k=P[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Ye=!0;for(let rn=0;rn<m;rn++){let Me=P[rn].g;const In=P[rn].map;if(Me-=k,0>Me)k=Math.max(0,P[rn].g-100),Ye=!1;else try{Vve(In,G,"req"+Me+"_")}catch{y&&y(In)}}if(Ye){y=G.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function v3(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;ff||Dz(),pf||(ff(),pf=!0),$R.add(p,l),l.v=0}}function lP(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=If(f(l.Fa,l),T3(l,l.v)),l.v++,0))}function dP(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function I3(l){l.g=new Yo(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=qi(l.qa);ot(p,"RID","rpc"),ot(p,"SID",l.K),ot(p,"AID",l.T),ot(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(p,"TO",l.ja),ot(p,"TYPE","xmlhttp"),Pf(l,p),l.m&&l.o&&cP(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Hy(qi(p)),m.m=null,m.P=!0,Wz(m,l)}function Ky(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function E3(l,p){var m=null;if(l.g==p){Ky(l),dP(l),l.g=null;var y=2}else{if(!sP(l.h,p))return;m=p.D,Xz(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var P=l.B;kn(y=Ly(),new Hz(y,m)),Wy(l)}else v3(l);else if(3==(P=p.s)||0==P&&0<p.X||!(1==y&&function jve(l,p){return!(Zz(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=If(f(l.Ga,l,p),T3(l,l.B)),l.B++,0)))}(l,p)||2==y&&lP(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),P){case 1:Oa(l,5);break;case 4:Oa(l,10);break;case 3:Oa(l,6);break;default:Oa(l,2)}}function T3(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function Oa(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const P=!y;y=new ka(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||By(y,"https"),Hy(y),P?function xve(l,p){const m=new Ef;if(a.Image){const y=new Image;y.onload=g(Zo,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(Zo,m,"TestLoadImage: error",!1,p,y),y.onabort=g(Zo,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(Zo,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function kve(l,p){new Ef;const y=new AbortController,P=setTimeout(()=>{y.abort(),Zo(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(P),Zo(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(P),Zo(0,0,!1,p)})}(y.toString(),m)}else On(2);l.G=0,l.l&&l.l.sa(p),w3(l),m3(l)}function w3(l){if(l.G=0,l.ka=[],l.l){const p=e3(l.h);(0!=p.length||0!=l.i.length)&&(T(l.ka,p),T(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function b3(l,p,m){var y=m instanceof ka?qi(m):new ka(m);if(""!=y.g)p&&(y.g=p+"."+y.g),$y(y,y.s);else{var P=a.location;y=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var k=new ka(null);y&&By(k,y),p&&(k.g=p),P&&$y(k,P),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&ot(y,m,p),ot(y,"VER",l.la),Pf(l,y),y}function C3(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Et(l.Ca&&!l.pa?new Sf({eb:m}):l.pa)).Ha(l.J),p}function S3(){}function Qy(){}function sr(l,p){vn.call(this),this.g=new g3(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new tl(this)}function A3(l){XR.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function D3(){eP.call(this),this.status=1}function tl(l){this.g=l}(t=Et.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tP.g(),this.v=function Fz(l){return l.h||(l.h=l.i())}(this.o?this.o:tP),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void l3(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)m.set(P,y[P]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fve,p,void 0))||y||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of m)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{f3(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){l3(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,kn(this,"complete"),kn(this,"abort"),zy(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zy(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?h3(this):this.bb())},t.bb=function(){h3(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),mve(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=g3.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){On(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=b3(this,null,this.W),Wy(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const P=new Yo(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(P.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=y3(this,P,p),ot(m=qi(this.I),"RID",l),ot(m,"CVER",22),this.D&&ot(m,"X-HTTP-Session-Id",this.D),Pf(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(u3(k)))+"&"+p:this.m&&cP(m,this.m,k)),aP(this.h,P),this.Ua&&ot(m,"TYPE","init"),this.P?(ot(m,"$req",p),ot(m,"SID","null"),P.T=!0,rP(P,m,null)):rP(P,m,p),this.G=2}}else 3==this.G&&(l?_3(this,l):0==this.i.length||Jz(this.h)||_3(this))},t.Fa=function(){if(this.u=null,I3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=If(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),Gy(this),I3(this))},t.Za=function(){null!=this.C&&(this.C=null,Gy(this),lP(this),On(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=S3.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Qy.prototype.g=function(l,p){return new sr(l,p)},_(sr,vn),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){uP(this.g)},sr.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=JR(l),l=m);p.i.push(new wve(p.Ya++,l)),3==p.G&&Wy(p)},sr.prototype.N=function(){this.g.l=null,delete this.j,uP(this.g),delete this.g,sr.aa.N.call(this)},_(A3,XR),_(D3,eP),_(tl,S3),tl.prototype.ua=function(){kn(this.g,"a")},tl.prototype.ta=function(l){kn(this.g,new A3(l))},tl.prototype.sa=function(l){kn(this.g,new D3)},tl.prototype.ra=function(){kn(this.g,"b")},Qy.prototype.createWebChannel=Qy.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,ej=Ri.createWebChannelTransport=function(){return new Qy},XU=Ri.getStatEventTarget=function(){return Ly()},ZU=Ri.Event=Na,bb=Ri.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fy.NO_ERROR=0,Fy.TIMEOUT=8,Fy.HTTP_ERROR=6,Hm=Ri.ErrorCode=Fy,qz.COMPLETE="complete",JU=Ri.EventType=qz,Uz.EventType=yf,yf.OPEN="a",yf.CLOSE="b",yf.ERROR="c",yf.MESSAGE="d",vn.prototype.listen=vn.prototype.K,Yd=Ri.WebChannel=Uz,Ri.FetchXmlHttpFactory=Sf,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,YU=Ri.XhrIo=Et}).apply(typeof $m<"u"?$m:typeof self<"u"?self:typeof window<"u"?window:{});const nj="@firebase/firestore";class Gt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let tu="11.10.0";const bo=new hb("@firebase/firestore");function nu(){return bo.logLevel}function j(t,...e){if(bo.logLevel<=Te.DEBUG){const n=e.map(Cb);bo.debug(`Firestore (${tu}): ${t}`,...n)}}function At(t,...e){if(bo.logLevel<=Te.ERROR){const n=e.map(Cb);bo.error(`Firestore (${tu}): ${t}`,...n)}}function Mn(t,...e){if(bo.logLevel<=Te.WARN){const n=e.map(Cb);bo.warn(`Firestore (${tu}): ${t}`,...n)}}function Cb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function K(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,ij(t,r,n)}function ij(t,e,n){let r=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw At(r),new Error(r)}function J(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||ij(e,i,r)}function z(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class oj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ile{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class Ele{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tle{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;J(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(I(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J("string"==typeof r.accessToken,31837,{l:r}),new oj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return J(null===e||"string"==typeof e,2055,{h:e}),new Gt(e)}}class wle{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ble{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wle(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){J(void 0===this.o,3512);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new Sb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Sle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Ab(){return new TextEncoder}class Db{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Sle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Rb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ie(r,i);{const o=Ab(),s=Ale(o.encode(sj(t,n)),o.encode(sj(e,n)));return 0!==s?s:ie(r,i)}}n+=r>65535?2:1}return ie(t.length,e.length)}function sj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Ale(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function ru(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const Pb="__name__";class Yr{constructor(e,n,r){void 0===n?n=0:n>e.length&&K(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Yr.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Yr.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return ie(e.length,n.length)}static compareSegments(e,n){const r=Yr.isNumericId(e),i=Yr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Yr.extractNumericId(e).compare(Yr.extractNumericId(n)):Rb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class ve extends Yr{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const Dle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Yr{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return Dle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Pb}static keyField(){return new ct([Pb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}class q{constructor(e){this.path=e}static fromPath(e){return new q(ve.fromString(e))}static fromName(e){return new q(ve.fromString(e).popFirst(5))}static empty(){return new q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ve.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ve(e.slice()))}}function Mb(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cj(t){if(!q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uj(t){if(q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function qm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":K(12329,{type:typeof t})}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!lj(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}const hj=-62135596800;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hj)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-hj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Ot("string",Be._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Be(0,0))}static max(){return new X(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function gj(t){return new er(t.readTime,t.key,-1)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(X.min(),q.empty(),-1)}static max(){return new er(X.max(),q.empty(),-1)}}function xb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=q.comparator(t.documentKey,e.documentKey),0!==n?n:ie(t.largestBatchId,e.largestBatchId))}class _j{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Co(t){return kb.apply(this,arguments)}function kb(){return(kb=I(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function So(t){return"IndexedDbTransactionError"===t.name}let nr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function Xd(t){return null==t}function eh(t){return 0===t&&1/t==-1/0}function Vle(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ej(t){return t+"\x01\x01"}const nh="mutationQueues",Dr="mutations",cu="documentMutations",rh="remoteDocumentGlobal",uu="targets",lu="targetDocuments",aa="targetGlobal",ih="collectionParents",du="clientMetadata",Jm="bundles",Zm="namedQueries";function kj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Xe{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new e_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new e_(this.root,e,this.comparator,!1)}getReverseIterator(){return new e_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new e_(this.root,e,this.comparator,!0)}}class e_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=i??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new tn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return tn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1,tn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $e{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lj(this.data.getIterator())}getIteratorFrom(e){return new Lj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class Lj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new $e(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ru(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Fj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fj("Invalid base64 string: "+o):o}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const cde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(J(!!t,39018),"string"==typeof t){let e=0;const n=cde.exec(t);if(J(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Mi(t){return"string"==typeof t?It.fromBase64String(t):It.fromUint8Array(t)}const Uj="server_timestamp",jj="__type__",Bj="__previous_value__",$j="__local_write_time__";function t_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[jj])||void 0===n?void 0:n.stringValue)===Uj}function n_(t){const e=t.mapValue.fields[Bj];return t_(e)?n_(e):e}function ah(t){const e=Pi(t.mapValue.fields[$j].timestampValue);return new Be(e.seconds,e.nanos)}class ude{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const ch="(default)";class ca{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}const qb="__type__",Hj="__max__",Ro_mapValue={fields:{__type__:{stringValue:Hj}}},zb="__vector__",fu="value";function Po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t_(t)?4:Kj(t)?9007199254740991:s_(t)?10:11:K(28295,{value:t})}function Xr(t,e){if(t===e)return!0;const n=Po(t);if(n!==Po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ah(t).isEqual(ah(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Pi(i.timestampValue),a=Pi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Mi(t.bytesValue).isEqual(Mi(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ut(i.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ut(i.integerValue)===ut(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ut(i.doubleValue),a=ut(o.doubleValue);return s===a?eh(s)===eh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ru(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(kj(s)!==kj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Xr(s[c],a[c])))return!1;return!0}(t,e);default:return K(52216,{left:t})}var o}function uh(t,e){return void 0!==(t.values||[]).find(n=>Xr(n,e))}function Mo(t,e){if(t===e)return 0;const n=Po(t),r=Po(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ut(o.integerValue||o.doubleValue),c=ut(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return qj(t.timestampValue,e.timestampValue);case 4:return qj(ah(t),ah(e));case 5:return Rb(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Mi(o),c=Mi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ie(a[u],c[u]);if(0!==d)return d}return ie(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ie(ut(o.latitude),ut(s.latitude));return 0!==a?a:ie(ut(o.longitude),ut(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zj(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[fu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[fu])||void 0===c?void 0:c.arrayValue,v=ie((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:zj(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ro_mapValue&&s===Ro_mapValue)return 0;if(o===Ro_mapValue)return 1;if(s===Ro_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Rb(c[h],d[h]);if(0!==f)return f;const g=Mo(a[c[h]],u[d[h]]);if(0!==g)return g}return ie(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function qj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ie(t,e);const n=Pi(t),r=Pi(e),i=ie(n.seconds,r.seconds);return 0!==i?i:ie(n.nanos,r.nanos)}function zj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Mo(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function pu(t){return Gb(t)}function Gb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Mi(t.bytesValue).toBase64():"referenceValue"in t?q.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Gb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Gb(n.fields[s])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function i_(t){switch(Po(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=n_(t);return e?16+i_(e):16;case 5:return 2*t.stringValue.length;case 6:return Mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+i_(o),0);case 10:case 11:return function(r){let i=0;return Do(r.fields,(o,s)=>{i+=o.length+i_(s)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function ua(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wb(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function Gj(t){return!!t&&"nullValue"in t}function Wj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function o_(t){return!!t&&"mapValue"in t}function s_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[qb])||void 0===n?void 0:n.stringValue)===zb}function dh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Kj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Hj}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!o_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dh(n)}setAll(e){let n=ct.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=dh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());o_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];o_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new nn(dh(this.value))}}function Zj(t){const e=[];return Do(t.fields,(n,r)=>{const i=new ct([n]);if(o_(r)){const o=Zj(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}class nt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,X.min(),X.min(),X.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,X.min(),X.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,X.min(),X.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class No{constructor(e,n){this.position=e,this.inclusive=n}}function Xj(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?q.comparator(q.fromName(s.referenceValue),n.key):Mo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function eB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}class hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function hde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class tB{}class we extends tB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new fde(e,n,r):"array-contains"===n?new mde(e,r):"in"===n?new aB(e,r):"not-in"===n?new _de(e,r):"array-contains-any"===n?new yde(e,r):new we(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new pde(e,r):new gde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Mo(n,this.value)):null!==n&&Po(this.value)===Po(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class He extends tB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new He(e,n)}matches(e){return gu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gu(t){return"and"===t.op}function Qb(t){return function nB(t){for(const e of t.filters)if(e instanceof He)return!1;return!0}(t)&&gu(t)}function Yb(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+pu(t.value);if(Qb(t))return t.filters.map(e=>Yb(e)).join(",");{const e=t.filters.map(n=>Yb(n)).join(",");return`${t.op}(${e})`}}function rB(t,e){return t instanceof we?(r=t,(i=e)instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)):t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&rB(s,i.filters[a]),!0)}(t,e):void K(19439);var r,i}function oB(t){return t instanceof we?`${(n=t).field.canonicalString()} ${n.op} ${pu(n.value)}`:t instanceof He?function(n){return n.op.toString()+" {"+n.getFilters().map(oB).join(" ,")+"}"}(t):"Filter";var n}class fde extends we{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class pde extends we{constructor(e,n){super(e,"in",n),this.keys=sB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gde extends we{constructor(e,n){super(e,"not-in",n),this.keys=sB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class mde extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lh(n)&&uh(n.arrayValue,this.value)}}class aB extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&uh(this.value.arrayValue,n)}}class _de extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!uh(this.value.arrayValue,n)}}class yde extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uh(this.value.arrayValue,r))}}class vde{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function Jb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new vde(t,e,n,r,i,o,s)}function la(t){const e=z(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Xd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pu(r)).join(",")),e.Pe=n}return e.Pe}function fh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eB(t.startAt,e.startAt)&&eB(t.endAt,e.endAt)}function a_(t){return q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ni{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function mu(t){return new Ni(t)}function dB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Zb(t){return null!==t.collectionGroup}function _u(t){const e=z(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new $e(ct.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new hh(o,r))}),n.has(ct.keyField().canonicalString())||e.Te.push(new hh(ct.keyField(),r))}return e.Te}function pn(t){const e=z(t);return e.Ie||(e.Ie=function fB(t,e){if("F"===t.limitType)return Jb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new hh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new No(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new No(t.startAt.position,t.startAt.inclusive):null;return Jb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,_u(t))),e.Ie}function Xb(t,e){const n=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function u_(t,e,n){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ph(t,e){return fh(pn(t),pn(e))&&t.limitType===e.limitType}function pB(t){return`${la(pn(t))}|lt:${t.limitType}`}function yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oB(i)).join(", ")}]`),Xd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pu(i)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function gh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of _u(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=Xj(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,_u(r),i)||r.endAt&&!function(s,a,c){const u=Xj(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,_u(r),i)));var r,i}function mB(t){return(e,n)=>{let r=!1;for(const i of _u(t)){const o=Ide(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Ide(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Mo(c,u):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Vj(this.inner)}size(){return this.innerSize}}const Ede=new Xe(q.comparator);function Wn(){return Ede}const _B=new Xe(q.comparator);function mh(...t){let e=_B;for(const n of t)e=e.insert(n.key,n);return e}function yB(t){let e=_B;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return _h()}function vB(){return _h()}function _h(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tde=new Xe(q.comparator),wde=new $e(q.comparator);function _e(...t){let e=wde;for(const n of t)e=e.add(n);return e}const bde=new $e(ie);function tC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function IB(t){return{integerValue:""+t}}function EB(t,e){return function Ij(t){return"number"==typeof t&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?IB(e):tC(t,e)}class l_{constructor(){this._=void 0}}function Cde(t,e,n){return t instanceof vu?function(i,o){const s={fields:{[jj]:{stringValue:Uj},[$j]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&t_(o)&&(o=n_(o)),o&&(s.fields[Bj]=o),{mapValue:s}}(n,e):t instanceof da?wB(t,e):t instanceof ha?bB(t,e):function(i,o){const s=TB(i,o),a=CB(s)+CB(i.Ee);return Wb(s)&&Wb(i.Ee)?IB(a):tC(i.serializer,a)}(t,e)}function Sde(t,e,n){return t instanceof da?wB(t,e):t instanceof ha?bB(t,e):n}function TB(t,e){return t instanceof Iu?Wb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class vu extends l_{}class da extends l_{constructor(e){super(),this.elements=e}}function wB(t,e){const n=SB(e);for(const r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ha extends l_{constructor(e){super(),this.elements=e}}function bB(t,e){let n=SB(e);for(const r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class Iu extends l_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function CB(t){return ut(t.integerValue||t.doubleValue)}function SB(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class yh{constructor(e,n){this.field=e,this.transform=n}}class Dde{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function d_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class h_{}function AB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Tu(t.key,lt.none()):new Eu(t.key,t.data,lt.none());{const n=t.data,r=nn.empty();let i=new $e(ct.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ki(t.key,r,new Gn(i.toArray()),lt.none())}}function Rde(t,e,n){t instanceof Eu?function(i,o,s){const a=i.value.clone(),c=PB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(i,o,s){if(!d_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=PB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(RB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function vh(t,e,n,r){return t instanceof Eu?function(o,s,a,c){if(!d_(o.precondition,s))return a;const u=o.value.clone(),d=MB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(o,s,a,c){if(!d_(o.precondition,s))return a;const u=MB(o.fieldTransforms,c,s),d=s.data;return d.setAll(RB(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,d_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Pde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=TB(r.transform,i||null);null!=o&&(null===n&&(n=nn.empty()),n.set(r.field,o))}return n||null}function DB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&ru(r,i,(o,s)=>function Ade(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof da&&i instanceof da||r instanceof ha&&i instanceof ha?ru(r.elements,i.elements,Xr):r instanceof Iu&&i instanceof Iu?Xr(r.Ee,i.Ee):r instanceof vu&&i instanceof vu);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Eu extends h_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ki extends h_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function PB(t,e,n){const r=new Map;J(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Sde(s,a,n[i]))}return r}function MB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Cde(o,s,e))}return r}class Tu extends h_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nC extends h_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Rde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=AB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&ru(this.mutations,e.mutations,(n,r)=>DB(n,r))&&ru(this.baseMutations,e.baseMutations,(n,r)=>DB(n,r))}}class iC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Tde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new iC(e,n,r,i)}}class oC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mde{constructor(e,n){this.count=e,this.unchangedNames=n}}var Vt,Ae;function kB(t){if(void 0===t)return At("GRPC error has no .code"),N.UNKNOWN;switch(t){case Vt.OK:return N.OK;case Vt.CANCELLED:return N.CANCELLED;case Vt.UNKNOWN:return N.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return N.INTERNAL;case Vt.UNAVAILABLE:return N.UNAVAILABLE;case Vt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Vt.NOT_FOUND:return N.NOT_FOUND;case Vt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Vt.ABORTED:return N.ABORTED;case Vt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Vt.DATA_LOSS:return N.DATA_LOSS;default:return K(39323,{code:t})}}(Ae=Vt||(Vt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";const Nde=new wo([4294967295,4294967295],0);function OB(t){const e=Ab().encode(t),n=new QU;return n.update(e),new Uint8Array(n.digest())}function VB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wo([n,r],0),new wo([i,o],0)]}class sC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ih(`Invalid padding: ${n}`);if(r<0)throw new Ih(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ih(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ih(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=wo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(wo.fromNumber(r)));return 1===i.compare(Nde)&&(i=new wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=OB(e),[r,i]=VB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new sC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=OB(e),[r,i]=VB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Eh{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Th.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eh(X.min(),i,new Xe(ie),Wn(),_e())}}class Th{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Th(r,n,_e(),_e(),_e())}}class p_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class LB{constructor(e,n){this.targetId=e,this.De=n}}class FB{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class UB{constructor(){this.ve=0,this.Ce=jB(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=_e(),n=_e(),r=_e();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new Th(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=jB()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class xde{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=g_(),this.Je=g_(),this.He=new Xe(ie)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(a_(o))if(0===r){const s=new q(o.path);this.Xe(n,s,nt.newNoDocument(s,X.min()))}else J(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Mi(r).toUint8Array()}catch(c){if(c instanceof Fj)return Mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new sC(s,i,o)}catch(c){return Mn(c instanceof Ih?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&a_(a.target)){const c=new q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,nt.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=_e();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new Eh(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=g_(),this.Je=g_(),this.He=new Xe(ie),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new UB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new $e(ie),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new $e(ie),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new UB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function g_(){return new Xe(q.comparator)}function jB(){return new Xe(q.comparator)}const kde={asc:"ASCENDING",desc:"DESCENDING"},Ode={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vde={and:"AND",or:"OR"};class Lde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aC(t,e){return t.useProto3Json||Xd(e)?e:{value:e}}function wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fde(t,e){return wu(t,e.toTimestamp())}function Dt(t){return J(!!t,49232),X.fromTimestamp(function(n){const r=Pi(n);return new Be(r.seconds,r.nanos)}(t))}function cC(t,e){return uC(t,e).canonicalString()}function uC(t,e){const n=(i=t,new ve(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function $B(t){const e=ve.fromString(t);return J(ZB(e),10190,{key:e.toString()}),e}function wh(t,e){return cC(t.databaseId,e.path)}function ti(t,e){const n=$B(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(zB(n))}function HB(t,e){return cC(t.databaseId,e)}function lC(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zB(t){return J(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function GB(t,e,n){return{name:wh(t,e),fields:n.value.mapValue.fields}}function WB(t,e){return{documents:[HB(t,e.path)]}}function __(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HB(t,i);const o=function(u){if(0!==u.length)return JB(He.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:xo((f=d).field),direction:Hde(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=aC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function QB(t){let e=function qB(t){const e=$B(t);return 4===e.length?ve.emptyPath():zB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){J(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=YB(h);return f instanceof He&&Qb(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new hh(bu((_=f).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,Xd(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new No((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new No(h.values||[],!h.before)}(n.endAt)),function lB(t,e,n,r,i,o,s,a){return new Ni(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function YB(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bu(n.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bu(n.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bu(n.unaryFilter.field);return we.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bu(n.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):void 0!==t.fieldFilter?we.create(bu((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return He.create(n.compositeFilter.filters.map(r=>YB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t});var n}function Hde(t){return kde[t]}function qde(t){return Ode[t]}function zde(t){return Vde[t]}function xo(t){return{fieldPath:t.canonicalString()}}function bu(t){return ct.fromServerFormat(t.fieldPath)}function JB(t){return t instanceof we?function(n){if("=="===n.op){if(Wj(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NAN"}};if(Gj(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Wj(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NOT_NAN"}};if(Gj(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(n.field),op:qde(n.op),value:n.value}}}(t):t instanceof He?function(n){const r=n.getFilters().map(i=>JB(i));return 1===r.length?r[0]:{compositeFilter:{op:zde(n.op),filters:r}}}(t):K(54877,{filter:t})}function Gde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZB(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Oi{constructor(e,n,r,i,o=X.min(),s=X.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XB{constructor(e){this.gt=e}}function v_(t){const e=QB({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?u_(e,e.limit,"L"):e}class ma{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),eh(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=Pi(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Mi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?Kj(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):s_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=fu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(ut(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}ma.Ut=new ma;class the{constructor(){this.Dn=new _C}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(er.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class _C{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $e(ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(ve.comparator)).toArray()}}new Uint8Array(0);const m$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(41943040,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class ya{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ya(0)}static ur(){return new ya(-1)}}const T$="LruGarbageCollector";function b$([t,e],[n,r]){const i=ie(t,n);return 0===i?ie(e,r):i}class ihe{constructor(e){this.Tr=e,this.buffer=new $e(b$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();b$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;j(T$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,I(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){So(r)?j(T$,"Ignoring IndexedDB error during garbage collection: ",r):yield Co(r)}yield n.Rr(3e5)}))}}class ohe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return M.resolve(nr.ue);const r=new ihe(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(m$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),nu()<=Te.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class A${constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uhe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class N${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&vh(r.mutation,i,Gn.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=mh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Wn();const s=_h(),a=_h();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof ki)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),vh(d.mutation,u,d.mutation.getFieldMask(),Be.now())):s.set(u.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new uhe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_h();let i=new Xe((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Gn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=vB();d.forEach(f=>{if(!o.has(f)){const g=AB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return q.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Zb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(ei());let a=-1,c=o;return s.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,_e())).next(d=>({batchId:a,changes:yB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=mh();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{const u=(h=n,f=c.child(o),new Ni(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,nt.newInvalidDocument(d)))});let a=mh();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&vh(d.mutation,u,Gn.empty(),Be.now()),gh(n,u)&&(a=a.insert(c,u))}),a})}}class lhe{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Dt(i.createTime)}),M.resolve();var i}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:v_(i.bundledQuery),readTime:Dt(i.readTime)}),M.resolve();var i}}class dhe{constructor(){this.overlays=new Xe(q.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=ei(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xe((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=ei(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=ei(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new oC(n,r));let o=this.kr.get(n);void 0===o&&(o=_e(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class hhe{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class yC{constructor(){this.qr=new $e(Kt.Qr),this.$r=new $e(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Kt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new ve([])),r=new Kt(n,e),i=new Kt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new ve([])),r=new Kt(n,e),i=new Kt(n,e+1);let o=_e();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Kt(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}class fhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $e(Kt.Qr)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new rC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new Kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),i=new Kt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(ie);return n.forEach(i=>{const o=new Kt(i,0),s=new Kt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const s=new Kt(new q(o),0);let a=new $e(ie);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),M.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){J(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{const o=new Kt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Kt(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class phe{constructor(e){this.ni=e,this.docs=new Xe(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Wn();const s=n.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||xb(gj(d),r)<=0||(i.has(d.key)||gh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ghe(this)}getSize(e){return M.resolve(this.size)}}class ghe extends A${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class mhe{constructor(e){this.persistence=e,this.ii=new xi(n=>la(n),fh),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new yC,this.targetCount=0,this._i=ya.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}class vC{constructor(e,n){this.ai={},this.overlays={},this.ui=new nr(0),this.ci=!1,this.ci=!0,this.li=new hhe,this.referenceDelegate=e(this),this.hi=new mhe(this),this.indexManager=new the,this.remoteDocumentCache=new phe(r=>this.referenceDelegate.Pi(r)),this.serializer=new XB(n),this.Ti=new lhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new fhe(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new _he(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class _he extends _j{constructor(e){super(),this.currentSequenceNumber=e}}class A_{constructor(e){this.persistence=e,this.Ai=new yC,this.Ri=null}static Vi(e){return new A_(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class D_{constructor(e,n){this.persistence=e,this.gi=new xi(r=>function fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ej(e)),e=Vle(t.get(n),e);return Ej(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function S$(t,e){return new ohe(t,e)}(this,n)}static Vi(e,n){return new D_(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=i_(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return M.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class CC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=_e(),i=_e();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new CC(e,n.fromCache,r,i)}}class vhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class O${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=SU()?8:function yj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(St())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new vhe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(nu()<=Te.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(nu()<=Te.DEBUG&&j("QueryEngine","Query:",yu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(nu()<=Te.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):M.resolve())}ps(e,n){if(dB(n))return M.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=u_(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=_e(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,u_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return dB(n)||i.isEqual(X.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(nu()<=Te.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yu(n)),this.vs(e,s,n,function pj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new Be(n+1,0):new Be(n,r));return new er(i,q.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new $e(mB(e));return n.forEach((i,o)=>{gh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return nu()<=Te.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",yu(n)),this.gs.getDocumentsMatchingQuery(e,n,er.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const SC="LocalStore";class Ehe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Xe(ie),this.Ms=new xi(o=>la(o),fh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function L$(t,e){return AC.apply(this,arguments)}function AC(){return(AC=I(function*(t,e){const n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=_e();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function F$(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function bhe(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mu(t,e,n){return DC.apply(this,arguments)}function DC(){return(DC=I(function*(t,e,n){const r=z(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!So(s))throw s;j(SC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function P_(t,e,n){const r=z(t);let i=X.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=z(c),f=h.Ms.get(d);return void 0!==f?M.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:_e())).next(a=>(function $$(t,e,n){let r=t.xs.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function gB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class xC{constructor(){this.activeTargetIds=function eC(){return bde}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K${constructor(){this.Fo=new xC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ahe{xo(e){}shutdown(){}}const Q$="ConnectivityMonitor";class Y${constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(Q$,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){j(Q$,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let x_=null;function OC(){return null===x_?x_=268435456+Math.round(2147483648*Math.random()):x_++,"0x"+x_.toString(16)}const VC="RestConnection",Dhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rhe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=OC(),a=this.Go(e,n.toUriEncodedString());j(VC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=Zc(u);return this.jo(e,a,c,r,d).then(h=>(j(VC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Mn(VC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${Dhe[e]}`}terminate(){}}class Phe{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const mn="WebChannelConnection";class Mhe extends Rhe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=OC();return new Promise((a,c)=>{const u=new YU;u.setWithCredentials(!0),u.listenOnce(JU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hm.NO_ERROR:const h=u.getResponseJson();j(mn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Hm.TIMEOUT:j(mn,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Hm.HTTP_ERROR:const f=u.getStatus();if(j(mn,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new L(v,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(mn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);j(mn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=OC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ej(),a=XU(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(mn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new Phe({Ho:T=>{g?j(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(j(mn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(mn,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Yo:()=>h.close()}),v=(T,A,D)=>{T.listen(A,F=>{try{D(F)}catch(W){setTimeout(()=>{throw W},0)}})};return v(h,Yd.EventType.OPEN,()=>{g||(j(mn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),v(h,Yd.EventType.CLOSE,()=>{g||(g=!0,j(mn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),v(h,Yd.EventType.ERROR,T=>{g||(g=!0,Mn(mn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),v(h,Yd.EventType.MESSAGE,T=>{var A;if(!g){const D=T.data[0];J(!!D,16349);const F=D,W=F?.error||(null===(A=F[0])||void 0===A?void 0:A.error);if(W){j(mn,`RPC '${e}' stream ${i} received error:`,W);const Q=W.status;let ee=function(w){const S=Vt[w];if(void 0!==S)return kB(S)}(Q),C=W.message;void 0===ee&&(ee=N.INTERNAL,C="Unknown error status: "+Q+" with message "+W.message),g=!0,_.__(new L(ee,C)),h.close()}else j(mn,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),v(a,ZU.STAT_EVENT,T=>{T.stat===bb.PROXY?j(mn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===bb.NOPROXY&&j(mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function k_(){return typeof document<"u"?document:null}function Ia(t){return new Lde(t,!0)}class LC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Z$="PersistentStream";class X${constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new LC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return I(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return I(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return I(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(At(n.toString()),At("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(I(function*(){e.state=0,e.start()}))}G_(e){return j(Z$,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(Z$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nhe extends X${constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function jde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:K(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(J(void 0===d||"string"==typeof d,58123),It.fromBase64String(d||"")):(J(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:kB(u.code);return new L(d,u.message||"")}(s);n=new FB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ti(t,r.document.name),o=Dt(r.document.updateTime),s=r.document.createTime?Dt(r.document.createTime):X.min(),a=new nn({mapValue:{fields:r.document.fields}}),c=nt.newFoundDocument(i,o,s,a);n=new p_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ti(t,r.document),o=r.readTime?Dt(r.readTime):X.min(),s=nt.newNoDocument(i,o);n=new p_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=ti(t,r.document);n=new p_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return K(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Mde(i,o);n=new LB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Dt(s.readTime):X.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=lC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=a_(c)?{documents:WB(o,c)}:{query:__(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=BB(o,s.resumeToken);const u=aC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=wu(o,s.snapshotVersion.toTimestamp());const u=aC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function $de(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=lC(this.serializer),n.removeTarget=e,this.k_(n)}}class xhe extends X${constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function Bde(t,e){return t&&t.length>0?(J(void 0!==e,14353),t.map(n=>function(i,o){let s=Dt(i.updateTime?i.updateTime:o);return s.isEqual(X.min())&&(s=Dt(o)),new Dde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Dt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=lC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function bh(t,e){let n;if(e instanceof Eu)n={update:GB(t,e.key,e.value)};else if(e instanceof Tu)n={delete:wh(t,e.key)};else if(e instanceof ki)n={update:GB(t,e.key,e.data),updateMask:Gde(e.fieldMask)};else{if(!(e instanceof nC))return K(16599,{Rt:e.type});n={verify:wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof vu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof da)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ha)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Iu)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Fde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:K(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class khe{}class Ohe extends khe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,uC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,uC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Vhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(At(n),this._a=!1):j("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Ea="RemoteStore";class Lhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(I(function*(){var c;Fo(s)&&(j(Ea,"Restarting streams for network reachability change."),yield(c=I(function*(d){const h=z(d);h.Ia.add(4),yield Nu(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield Nh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new Vhe(r,i)}}function Nh(t){return FC.apply(this,arguments)}function FC(){return(FC=I(function*(t){if(Fo(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Nu(t){return UC.apply(this,arguments)}function UC(){return(UC=I(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function O_(t,e){const n=z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$C(n)?BC(n):Ou(n).x_()&&jC(n,e))}function xu(t,e){const n=z(t),r=Ou(n);n.Ta.delete(e),r.x_()&&eH(n,e),0===n.Ta.size&&(r.x_()?r.B_():Fo(n)&&n.Aa.set("Unknown"))}function jC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ou(t).H_(e)}function eH(t,e){t.Ra.$e(e),Ou(t).Y_(e)}function BC(t){t.Ra=new xde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ou(t).start(),t.Aa.aa()}function $C(t){return Fo(t)&&!Ou(t).M_()&&t.Ta.size>0}function Fo(t){return 0===z(t).Ia.size}function tH(t){t.Ra=void 0}function Fhe(t){return HC.apply(this,arguments)}function HC(){return(HC=I(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function Uhe(t){return qC.apply(this,arguments)}function qC(){return(qC=I(function*(t){t.Ta.forEach((e,n)=>{jC(t,e)})})).apply(this,arguments)}function jhe(t,e){return zC.apply(this,arguments)}function zC(){return(zC=I(function*(t,e){tH(t),$C(t)?(t.Aa.la(e),BC(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function Bhe(t,e,n){return GC.apply(this,arguments)}function GC(){return GC=I(function*(t,e,n){if(t.Aa.set("Online"),e instanceof FB&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield V_(t,r)}else if(e instanceof p_?t.Ra.Ye(e):e instanceof LB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(X.min()))try{const r=yield F$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),eH(o,c);const h=new Oi(d.target,c,u,d.sequenceNumber);jC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Ea,"Failed to raise snapshot:",r),yield V_(t,r)}var r}),GC.apply(this,arguments)}function V_(t,e,n){return WC.apply(this,arguments)}function WC(){return(WC=I(function*(t,e,n){if(!So(e))throw e;t.Ia.add(1),yield Nu(t),t.Aa.set("Offline"),n||(n=()=>F$(t.localStore)),t.asyncQueue.enqueueRetryable(I(function*(){j(Ea,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Nh(t)}))})).apply(this,arguments)}function nH(t,e){return e().catch(n=>V_(t,n,e))}function ku(t){return KC.apply(this,arguments)}function KC(){return(KC=I(function*(t){const e=z(t),n=Uo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;$he(e);)try{const i=yield bhe(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,Hhe(e,i)}catch(i){yield V_(e,i)}rH(e)&&iH(e)})).apply(this,arguments)}function $he(t){return Fo(t)&&t.Pa.length<10}function Hhe(t,e){t.Pa.push(e);const n=Uo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function rH(t){return Fo(t)&&!Uo(t).M_()&&t.Pa.length>0}function iH(t){Uo(t).start()}function qhe(t){return QC.apply(this,arguments)}function QC(){return(QC=I(function*(t){Uo(t).na()})).apply(this,arguments)}function zhe(t){return YC.apply(this,arguments)}function YC(){return(YC=I(function*(t){const e=Uo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function Ghe(t,e,n){return JC.apply(this,arguments)}function JC(){return(JC=I(function*(t,e,n){const r=t.Pa.shift(),i=iC.from(r,e,n);yield nH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ku(t)})).apply(this,arguments)}function Whe(t,e){return ZC.apply(this,arguments)}function ZC(){return ZC=I(function*(t,e){var n;e&&Uo(t).Z_&&(yield(n=I(function*(i,o){if(function xB(t){switch(t){case N.OK:return K(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return K(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();Uo(i).N_(),yield nH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield ku(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),rH(t)&&iH(t)}),ZC.apply(this,arguments)}function oH(t,e){return XC.apply(this,arguments)}function XC(){return(XC=I(function*(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),j(Ea,"RemoteStore received new credentials");const r=Fo(n);n.Ia.add(3),yield Nu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Nh(n)})).apply(this,arguments)}function eS(t,e){return tS.apply(this,arguments)}function tS(){return(tS=I(function*(t,e){const n=z(t);e?(n.Ia.delete(2),yield Nh(n)):e||(n.Ia.add(2),yield Nu(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function Ou(t){return t.Va||(t.Va=function(n,r,i){const o=z(n);return o.ia(),new Nhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Fhe.bind(null,t),e_:Uhe.bind(null,t),n_:jhe.bind(null,t),J_:Bhe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.Va.N_(),$C(t)?BC(t):t.Aa.set("Unknown")):(yield t.Va.stop(),tH(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function Uo(t){return t.ma||(t.ma=function(n,r,i){const o=z(n);return o.ia(),new xhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:qhe.bind(null,t),n_:Whe.bind(null,t),ea:zhe.bind(null,t),ta:Ghe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.ma.N_(),yield ku(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(Ea,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class nS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new nS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vu(t,e){if(At("AsyncQueue",`${e}: ${t}`),So(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=mh(),this.sortedSet=new Xe(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ta;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class sH{constructor(){this.fa=new Xe(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class wa{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new wa(e,n,Ta.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Khe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Qhe{constructor(){this.queries=aH(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=z(n),o=i.queries;i.queries=aH(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new L(N.ABORTED,"Firestore shutting down"))}}function aH(){return new xi(t=>pB(t),ph)}function rS(t,e){return iS.apply(this,arguments)}function iS(){return(iS=I(function*(t,e){const n=z(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Khe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Vu(s,`Initialization of query '${yu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&aS(n)})).apply(this,arguments)}function oS(t,e){return sS.apply(this,arguments)}function sS(){return(sS=I(function*(t,e){const n=z(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Yhe(t,e){const n=z(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&aS(n)}function Jhe(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function aS(t){t.Da.forEach(e=>{e.next()})}var cS,cH;(cH=cS||(cS={})).Fa="default",cH.Cache="cache";class uS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cS.Cache}}class hH{constructor(e){this.key=e}}class fH{constructor(e){this.key=e}}class pH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=_e(),this.mutatedKeys=_e(),this.Xa=mB(e),this.eu=new Ta(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new sH,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=gh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),T=!0):this.iu(f,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(c||u)&&(a=!0)),T&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:T})}};return v(g)-v(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new wa(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new sH,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=_e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new fH(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new hH(r))}),n}uu(e){this.Ha=e.qs,this.Za=_e();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return wa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const jo="SyncEngine";class Zhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Xhe{constructor(e){this.key=e,this.lu=!1}}class efe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new xi(a=>pB(a),ph),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(q.comparator),this.Eu=new Map,this.Au=new yC,this.Ru={},this.Vu=new Map,this.mu=ya.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function tfe(t,e){return dS.apply(this,arguments)}function dS(){return(dS=I(function*(t,e,n=!0){const r=L_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield gH(r,e,n,!0),i})).apply(this,arguments)}function nfe(t,e){return hS.apply(this,arguments)}function hS(){return(hS=I(function*(t,e){const n=L_(t);yield gH(n,e,!0,!1)})).apply(this,arguments)}function gH(t,e,n,r){return fS.apply(this,arguments)}function fS(){return(fS=I(function*(t,e,n,r){const i=yield function Pu(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Oi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function pS(t,e,n,r,i){return gS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,i),a})).apply(this,arguments)}function gS(){return gS=I(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=I(function*(T,A,D,F){let W=A.view.nu(D);W.Ds&&(W=yield P_(T.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,W)));const Q=F&&F.targetChanges.get(A.targetId),ee=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges(W,T.isPrimaryClient,Q,ee);return SS(T,A.targetId,C._u),C.snapshot}),function v(T,A,D,F){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield P_(t.localStore,e,!0),s=new pH(e,o.qs),a=s.nu(o.documents),c=Th.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);SS(t,n,u._u);const d=new Zhe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),gS.apply(this,arguments)}function rfe(t,e,n){return mS.apply(this,arguments)}function mS(){return(mS=I(function*(t,e,n){const r=z(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ph(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Mu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xu(r.remoteStore,i.targetId),Lu(r,i.targetId)}).catch(Co))):(Lu(r,i.targetId),yield Mu(r.localStore,i.targetId,!0))})).apply(this,arguments)}function ife(t,e){return _S.apply(this,arguments)}function _S(){return(_S=I(function*(t,e){const n=z(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xu(n.remoteStore,r.targetId))})).apply(this,arguments)}function yS(){return(yS=I(function*(t,e,n){const r=function LS(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=afe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cfe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=z(s),u=Be.now(),d=a.reduce((g,_)=>g.add(_.key),_e());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Wn(),v=_e();return c.Os.getEntries(g,d).next(T=>{_=T,_.forEach((A,D)=>{D.isValidDocument()||(v=v.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(T=>{h=T;const A=[];for(const D of a){const F=Pde(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new ki(D.key,F,Zj(F.value.mapValue),lt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(T=>{f=T;const A=T.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,T.batchId,A)})}).then(()=>({batchId:f.batchId,changes:yB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new Xe(ie)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Vi(r,i.changes),yield ku(r.remoteStore)}catch(i){const o=Vu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function mH(t,e){return vS.apply(this,arguments)}function vS(){return(vS=I(function*(t,e){const n=z(t);try{const r=yield function whe(t,e){const n=z(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var v,T,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(It.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),T=g,A=d,(0===(v=f).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=Wn(),u=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function U$(t,e,n){let r=_e(),i=_e();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Wn();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(SC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(X.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?J(s.lu,14607):i.removedDocuments.size>0&&(J(s.lu,42227),s.lu=!1))}),yield Vi(n,r,e)}catch(r){yield Co(r)}})).apply(this,arguments)}function _H(t,e,n){const r=z(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=z(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&aS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sfe(t,e,n){return IS.apply(this,arguments)}function IS(){return(IS=I(function*(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(q.comparator);s=s.insert(o,nt.newNoDocument(o,X.min()));const a=_e().add(o),c=new Eh(X.min(),new Map,new Xe(ie),s,a);yield mH(r,c),r.du=r.du.remove(o),r.Eu.delete(e),AS(r)}else yield Mu(r.localStore,e,!1).then(()=>Lu(r,e,n)).catch(Co)})).apply(this,arguments)}function afe(t,e){return ES.apply(this,arguments)}function ES(){return(ES=I(function*(t,e){const n=z(t),r=e.batch.batchId;try{const i=yield function The(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=M.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const T=u.docVersions.get(_);J(null!==T,48541),v.version.compareTo(T)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);CS(n,r,null),bS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Vi(n,i)}catch(i){yield Co(i)}})).apply(this,arguments)}function cfe(t,e,n){return TS.apply(this,arguments)}function TS(){return(TS=I(function*(t,e,n){const r=z(t);try{const i=yield function(s,a){const c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(J(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);CS(r,e,n),bS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Vi(r,i)}catch(i){yield Co(i)}})).apply(this,arguments)}function bS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function CS(t,e,n){const r=z(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||yH(t,r)})}function yH(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(xu(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),AS(t))}function SS(t,e,n){for(const r of n)r instanceof hH?(t.Au.addReference(r.key,e),lfe(t,r)):r instanceof fH?(j(jo,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||yH(t,r.key)):K(19791,{yu:r})}function lfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(jo,"New document in limbo: "+n),t.Iu.add(r),AS(t))}function AS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(ve.fromString(e)),r=t.mu.next();t.Eu.set(r,new Xhe(n)),t.du=t.du.insert(n,r),O_(t.remoteStore,new Oi(pn(mu(n.path)),r,"TargetPurposeLimboResolution",nr.ue))}}function Vi(t,e,n){return DS.apply(this,arguments)}function DS(){return DS=I(function*(t,e,n){const r=z(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=CC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=I(function*(u,d){const h=z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(d,g=>M.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>M.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!So(f))throw f;j(SC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),T=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,T)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),DS.apply(this,arguments)}function dfe(t,e){return RS.apply(this,arguments)}function RS(){return(RS=I(function*(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){j(jo,"User change. New user:",e.toKey());const r=yield L$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vi(n,r.Bs)}var o})).apply(this,arguments)}function hfe(t,e){const n=z(t),r=n.Eu.get(e);if(r&&r.lu)return _e().add(r.key);{let i=_e();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function L_(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sfe.bind(null,e),e.hu.J_=Yhe.bind(null,e.eventManager),e.hu.pu=Jhe.bind(null,e.eventManager),e}let F_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return I(function*(){r.serializer=Ia(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function V$(t,e,n,r){return new Ehe(t,e,n,r)}(this.persistence,new O$,n.initialUser,this.serializer)}Du(n){return new vC(A_.Vi,this.serializer)}bu(n){return new K$}terminate(){var n=this;return I(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class FS extends F_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return J(this.persistence.referenceDelegate instanceof D_,46915),new C$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new vC(r=>D_.Vi(r,n),this.serializer)}}let Fu=(()=>{class t{initialize(n,r){var i=this;return I(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>_H(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=dfe.bind(null,i.syncEngine),yield eS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Qhe}createDatastore(n){const r=Ia(n.databaseInfo.databaseId),i=new Mhe(n.databaseInfo);return new Ohe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>_H(this.syncEngine,r,0),c=Y$.C()?new Y$:new Ahe,new Lhe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new efe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const c=z(a);j(Ea,"RemoteStore shutting down."),c.Ia.add(5),yield Nu(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class U_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):At("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Bo="FirestoreClient";class Cfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=Db.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(c){j(Bo,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j(Bo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Vu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function jS(t,e){return BS.apply(this,arguments)}function BS(){return BS=I(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j(Bo,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield L$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{Mn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Mn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),BS.apply(this,arguments)}function wH(t,e){return $S.apply(this,arguments)}function $S(){return($S=I(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function HS(t){return qS.apply(this,arguments)}(t);j(Bo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>oH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>oH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function qS(){return(qS=I(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Bo,"Using user provided OfflineComponentProvider");try{yield jS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Mn("Error using user provided cache. Falling back to memory cache: "+e),yield jS(t,new F_)}}else j(Bo,"Using default OfflineComponentProvider"),yield jS(t,new FS(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function j_(t){return zS.apply(this,arguments)}function zS(){return(zS=I(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Bo,"Using user provided OnlineComponentProvider"),yield wH(t,t._uninitializedComponentsProvider._online)):(j(Bo,"Using default OnlineComponentProvider"),yield wH(t,new Fu))),t._onlineComponents})).apply(this,arguments)}function ju(t){return WS.apply(this,arguments)}function WS(){return(WS=I(function*(t){const e=yield j_(t),n=e.eventManager;return n.onListen=tfe.bind(null,e.syncEngine),n.onUnlisten=rfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ife.bind(null,e.syncEngine),n})).apply(this,arguments)}function PH(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const MH=new Map,NH="firestore.googleapis.com";class kH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NH,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Rle(t,e,n,r){if(!0===e&&!0===r)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=PH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kH(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ile;switch(r.type){case"firstParty":return new ble(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=MH.get(n);r&&(j("ComponentProvider","Removing Datastore"),MH.delete(n),r.terminate())}(this),Promise.resolve()}}class Qt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qt(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ta(n,We._jsonSchema))return new We(e,r||null,new q(ve.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:Ot("string",We._jsonSchemaVersion),referencePath:Ot("string")};class ri extends Qt{constructor(e,n,r){super(e,n,mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new q(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function OH(t,e,...n){if(t=kt(t),Mb("collection","path",e),t instanceof xh){const r=ve.fromString(e,...n);return uj(r),new ri(t,null,r)}{if(!(t instanceof We||t instanceof ri))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return uj(r),new ri(t.firestore,null,r)}}function KS(t,e,...n){if(t=kt(t),1===arguments.length&&(e=Db.newId()),Mb("doc","path",e),t instanceof xh){const r=ve.fromString(e,...n);return cj(r),new We(t,null,new q(r))}{if(!(t instanceof We||t instanceof ri))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return cj(r),new We(t.firestore,t instanceof ri?t.converter:null,new q(r))}}const LH="AsyncQueue";class FH{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new LC(this,"async_queue_retry"),this.oc=()=>{const r=k_();r&&j(LH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=k_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=k_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Wt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return I(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!So(n))throw n;j(LH,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,At("INTERNAL UNHANDLED ERROR: ",UH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=nS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:UH(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return I(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function UH(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Qe extends xh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new FH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new FH(n),e._firestoreClient=void 0,yield n}})()}}function Ufe(t,e){const n="object"==typeof t?t:BU(),r="string"==typeof t?t:e||ch,i=Bm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=yU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function Lfe(t,e,n,r={}){var i;t=Ie(t,xh);const o=Zc(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(TU(`https://${c}`),bU("Firestore",!0)),s.host!==NH&&s.host!==c&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Si(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Gt.MOCK_USER;else{d=function Mce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vm(JSON.stringify({alg:"none",type:"JWT"})),Vm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Gt(f)}t._authCredentials=new Ele(new oj(d,h))}}(i,...o)}return i}function ft(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function jH(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new ude(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PH(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Cfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(It.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rr(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:Ot("string",rr._jsonSchemaVersion),bytes:Ot("string")};class ba{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ca{constructor(e){this._methodName=e}}class ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(ta(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Ot("string",ii._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};class Rr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new Rr(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:Ot("string",Rr._jsonSchemaVersion),vectorValues:Ot("object")};const $fe=/^__.*__$/;class Hfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class HH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}class B_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new B_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return q_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(qH(this.Ec)&&$fe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class qfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ia(e)}Dc(e,n,r,i=!1){return new B_({Ec:e,methodName:n,bc:r,path:ct.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sa(t){const e=t._freezeSettings(),n=Ia(t._databaseId);return new qfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);nA("Data must be an object, but it was:",s,r);const a=WH(r,s);let c,u;if(o.merge)c=new Gn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=Vh(e,h,n);if(!s.contains(f))throw new L(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);QH(d,f)||d.push(f)}c=new Gn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new Hfe(new nn(a),c,u)}class Oh extends Ca{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}class YS extends Ca{_toFieldTransform(e){return new yh(e.path,new vu)}isEqual(e){return e instanceof YS}}function Aa(t,e){if(KH(t=kt(t)))return nA("Unsupported field value:",e,t),WH(t,e);if(t instanceof Ca)return function(r,i){if(!qH(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Aa(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=kt(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return EB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Be.fromDate(r);return{timestampValue:wu(i.serializer,o)}}if(r instanceof Be){const o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wu(i.serializer,o)}}if(r instanceof ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:BB(i.serializer,r._byteString)};if(r instanceof We){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rr)return s=r,a=i,{mapValue:{fields:{[qb]:{stringValue:zb},[fu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return tC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${qm(r)}`)}(t,e)}function WH(t,e){const n={};return Vj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const o=Aa(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function KH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof ii||t instanceof rr||t instanceof We||t instanceof Ca||t instanceof Rr)}function nA(t,e,n){if(!KH(n)||!lj(n)){const r=qm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function Vh(t,e,n){if((e=kt(e))instanceof ba)return e._internalPath;if("string"==typeof e)return H_(t,e);throw q_("Field path arguments must be of type string or ",t,!1,void 0,n)}const zfe=new RegExp("[~\\*/\\[\\]]");function H_(t,e,n){if(e.search(zfe)>=0)throw q_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ba(...e.split("."))._internalPath}catch{throw q_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function q_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+t+c)}function QH(t,e){return t.some(n=>n.isEqual(e))}class Lh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Gfe extends Lh{data(){return super.data()}}function z_(t,e){return"string"==typeof e?H_(t,e):e instanceof ba?e._internalPath:e._delegate._internalPath}class rA{}class Fh extends rA{}class Uh extends Fh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uh(e,n,r)}_apply(e){const n=this._parse(e);return e4(e._query,n),new Qt(e.firestore,e.converter,Xb(e._query,n))}_parse(e){const n=Sa(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){XH(h,d);const _=[];for(const v of h)_.push(ZH(c,o,v));f={arrayValue:{values:_}}}else f=ZH(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||XH(h,d),f=function GH(t,e,n,r=!1){return Aa(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return we.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class $u extends rA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $u(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:He.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)e4(s,c),s=Xb(s,c)}(e._query,n),new Qt(e.firestore,e.converter,Xb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class iA extends Fh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(o,s)}(e._query,this._field,this._direction);return new Qt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ni(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ZH(t,e,n){if("string"==typeof(n=kt(n))){if(""===n)throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zb(e)&&-1!==n.indexOf("/"))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ua(t,new q(r))}if(n instanceof We)return ua(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qm(n)}.`)}function XH(t,e){if(!Array.isArray(t)||0===t.length)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new L(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class n4{convertValue(e,n="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[fu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>ut(s.doubleValue));return new Rr(o)}convertGeoPoint(e){return new ii(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=n_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ah(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);J(ZB(r),9688,{name:e});const i=new ca(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||At(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class $o{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ir extends Lh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ir._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",ir._jsonSchema={type:Ot("string",ir._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Y_ extends ir{data(e={}){return super.data(e)}}class or{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $o(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Y_(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Y_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new Y_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Yfe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=or._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Db.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function Yfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}or._jsonSchemaVersion="firestore/querySnapshot/1.0",or._jsonSchema={type:Ot("string",or._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Ho extends n4{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function epe(t,e){const n=Ie(t.firestore,Qe),r=KS(t),i=function Q_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return jh(n,[$_(Sa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function jh(t,e){return function(r,i){const o=new Wt;return r.asyncQueue.enqueueAndForget(I(function*(){return function ofe(t,e,n){return yS.apply(this,arguments)}(yield function GS(t){return j_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ft(t),e)}function o4(){return new YS("serverTimestamp")}!function(e,n=!0){tu=eu,Xc(new Js("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Qe(new Tle(r.getProvider("auth-internal")),new Cle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Di(nj,"4.8.0",e),Di(nj,"4.8.0","esm2017")}();const mpe=function u4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},l4=new zd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z_=new hb("@firebase/auth");function X_(t,...e){Z_.logLevel<=Te.ERROR&&Z_.error(`Auth (${eu}): ${t}`,...e)}function Kn(t,...e){throw uA(t,...e)}function Nn(t,...e){return uA(t,...e)}function cA(t,e,n){const r=Object.assign(Object.assign({},mpe()),{[e]:n});return new zd("auth","Firebase",r).create(e,{appName:t.name})}function Yt(t){return cA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return l4.create(t,...e)}function $(t,e,...n){if(!t)throw uA(e,...n)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw X_(e),new Error(e)}function Li(t,e){t||oi(e)}function Hh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function d4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function ype(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function lA(){return"http:"===d4()||"https:"===d4()}()||function Lce(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=function kce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}()||function Fce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return ype()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dA(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class h4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ipe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Epe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tpe=new qh(3e4,6e4);function rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function it(t,e,n,r){return hA.apply(this,arguments)}function hA(){return(hA=I(function*(t,e,n,r,i={}){return f4(t,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Gd(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function Vce(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Zc(t.emulatorConfig.host)&&(u.credentials="include"),h4.fetch()(yield p4(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function f4(t,e,n){return fA.apply(this,arguments)}function fA(){return(fA=I(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ipe),e);try{const i=new bpe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw zh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw zh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw zh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw zh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cA(t,d,u);Kn(t,d)}}catch(i){if(i instanceof Ci)throw i;Kn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Fi(t,e,n,r){return pA.apply(this,arguments)}function pA(){return(pA=I(function*(t,e,n,r,i={}){const o=yield it(t,e,n,r,i);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function p4(t,e,n,r){return gA.apply(this,arguments)}function gA(){return(gA=I(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?dA(t.config,i):`${t.config.apiScheme}://${i}`;return Epe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class bpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),Tpe.get())})}}function zh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nn(t,e,r);return i.customData._tokenResponse=n,i}function yA(){return(yA=I(function*(t,e){return it(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function ey(t,e){return IA.apply(this,arguments)}function IA(){return(IA=I(function*(t,e){return it(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Gh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function EA(){return(EA=I(function*(t,e=!1){const n=kt(t),r=yield n.getIdToken(e),i=ty(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Gh(TA(i.auth_time)),issuedAtTime:Gh(TA(i.iat)),expirationTime:Gh(TA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function TA(t){return 1e3*Number(t)}function ty(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return X_("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hd(n);return i?JSON.parse(i):(X_("Failed to decode base64 JWT payload"),null)}catch(i){return X_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function v4(t){const e=ty(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ui(t,e){return wA.apply(this,arguments)}function wA(){return(wA=I(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Ci&&function Rpe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Ppe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield n.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class bA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gh(this.lastLoginAt),this.creationTime=Gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wh(t){return CA.apply(this,arguments)}function CA(){return(CA=I(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Ui(t,ey(n,{idToken:r}));$(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?I4(o.providerUserInfo):[],a=function Npe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function SA(){return(SA=I(function*(t){const e=kt(t);yield Wh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function I4(t){return t.map(e=>{var{providerId:n}=e,r=hm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AA(){return(AA=I(function*(t,e){const n=yield f4(t,{},I(function*(){const r=Gd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield p4(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Zc(t.emulatorConfig.host)&&(c.credentials="include"),h4.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function DA(){return(DA=I(function*(t,e){return it(t,"POST","/v2/accounts:revokeToken",rt(t,e))})).apply(this,arguments)}class qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(0!==e.length,"internal-error");const n=v4(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return I(function*(r,i=!1){return i||!n.accessToken||n.isExpired?($(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function xpe(t,e){return AA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new qu;return r&&($("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&($("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&($("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qu,this.toJSON())}_performRefresh(){return oi("not implemented")}}function zo(t,e){$("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ppe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return I(function*(){const r=yield Ui(n,n.stsTokenManager.getToken(n.auth,e));return $(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Dpe(t){return EA.apply(this,arguments)}(this,e)}reload(){return function Mpe(t){return SA.apply(this,arguments)}(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Wh(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(Ar(e.auth.app))return Promise.reject(Yt(e.auth));const n=yield e.getIdToken();return yield Ui(e,function Spe(t,e){return yA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,T=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:W,isAnonymous:Q,providerData:ee,stsTokenManager:C}=n;$(F&&C,e,"internal-error");const E=qu.fromJSON(this.name,C);$("string"==typeof F,e,"internal-error"),zo(h,e.name),zo(f,e.name),$("boolean"==typeof W,e,"internal-error"),$("boolean"==typeof Q,e,"internal-error"),zo(g,e.name),zo(_,e.name),zo(v,e.name),zo(T,e.name),zo(A,e.name),zo(D,e.name);const w=new Pr({uid:F,auth:e,email:f,emailVerified:W,displayName:h,isAnonymous:Q,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:A,lastLoginAt:D});return ee&&Array.isArray(ee)&&(w.providerData=ee.map(S=>Object.assign({},S))),T&&(w._redirectEventId=T),w}static _fromIdTokenResponse(e,n){return I(function*(r,i,o=!1){const s=new qu;s.updateFromServerResponse(i);const a=new Pr({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Wh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return I(function*(){const i=n.users[0];$(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?I4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new qu;a.updateFromIdToken(r);const c=new Pr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const E4=new Map;function ji(t){Li(t instanceof Function,"Expected a class definition");let e=E4.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E4.set(t,e),e)}const T4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(n,r){var i=this;return I(function*(){i.storage[n]=r})()}_get(n){var r=this;return I(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return I(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ny(t,e,n){return`firebase:${t}:${e}:${n}`}class zu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ny(this.userKey,i.apiKey,o),this.fullPersistenceKey=ny("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield ey(e.auth,{idToken:n}).catch(()=>{});return r?Pr._fromGetAccountInfoResponse(e.auth,r,n):null}return Pr._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return I(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return I(function*(r,i,o="authUser"){if(!i.length)return new zu(ji(T4),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||ji(T4);const c=ny(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield ey(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield Pr._fromGetAccountInfoResponse(r,_,f)}else g=Pr._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new zu(a,r,o)):new zu(a,r,o)}).apply(this,arguments)}}function w4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R4(e))return"Blackberry";if(P4(e))return"Webos";if(C4(e))return"Safari";if((e.includes("chrome/")||S4(e))&&!e.includes("edge/"))return"Chrome";if(D4(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function b4(t=St()){return/firefox\//i.test(t)}function C4(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S4(t=St()){return/crios\//i.test(t)}function A4(t=St()){return/iemobile/i.test(t)}function D4(t=St()){return/android/i.test(t)}function R4(t=St()){return/blackberry/i.test(t)}function P4(t=St()){return/webos/i.test(t)}function RA(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M4(t=St()){return RA(t)||D4(t)||P4(t)||R4(t)||/windows phone/i.test(t)||A4(t)}function N4(t,e=[]){let n;switch(t){case"Browser":n=w4(St());break;case"Worker":n=`${w4(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eu}/${r}`}class Lpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return I(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function PA(){return(PA=I(function*(t,e={}){return it(t,"GET","/v2/passwordPolicy",rt(t,e))})).apply(this,arguments)}class jpe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Bpe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x4(this),this.idTokenSubscription=new x4(this),this.beforeStateQueue=new Lpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=ji(n)),this._initializationPromise=this.queue(I(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield zu.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return I(function*(){try{const r=yield ey(n,{idToken:e}),i=yield Pr._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return I(function*(){var r;if(Ar(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return $(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return I(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return I(function*(){try{yield Wh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function vpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return I(function*(){if(Ar(n.app))return Promise.reject(Yt(n));const r=e?kt(e):null;return r&&$(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return I(function*(r,i=!1){if(!n._deleted)return r&&$(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(I(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return Ar(e.app)?Promise.reject(Yt(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Ar(this.app)?Promise.reject(Yt(this)):this.queue(I(function*(){yield n.assertedPersistence.setPersistence(ji(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return I(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const n=yield function Fpe(t){return PA.apply(this,arguments)}(e),r=new jpe(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return I(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function kpe(t,e){return DA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return I(function*(){if(!n.redirectPersistenceManager){const r=e&&ji(e)||n._popupRedirectResolver;$(r,n,"argument-error"),n.redirectPersistenceManager=yield zu.create(n,[ji(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return I(function*(){var r,i;return n._isInitialized&&(yield n.queue(I(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return I(function*(){if(e===n.currentUser)return n.queue(I(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return I(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var n;if(Ar(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function _pe(t,...e){Z_.logLevel<=Te.WARN&&Z_.warn(`Auth (${eu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Rt(t){return kt(t)}class x4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function zce(t,e){const n=new Gce(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kh={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k4(t){return`__${t}${Math.floor(1e6*Math.random())}`}function L4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Jh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,n){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}function Bi(t,e){return KA.apply(this,arguments)}function KA(){return(KA=I(function*(t,e){return Fi(t,"POST","/v1/accounts:signInWithIdp",rt(t,e))})).apply(this,arguments)}class Gu extends Jh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=hm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gu(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Bi(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bi(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gd(n)}return e}}class $i{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $4 extends $i{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Tge=(()=>{class t extends $4{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Gu._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return I(function*(i,o,s,a=!1){const c=yield Pr._fromIdTokenResponse(i,s,a),u=q4(s);return new yr({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=q4(r);return new yr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function q4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ay extends Ci{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ay.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ay(e,n,r,i)}}function z4(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?ay._fromErrorAndOperation(t,o,e,r):o})}function rD(t,e){return iD.apply(this,arguments)}function iD(){return(iD=I(function*(t,e,n=!1){const r=yield Ui(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return yr._forOperation(t,"link",r)})).apply(this,arguments)}function W4(t,e){return sD.apply(this,arguments)}function sD(){return(sD=I(function*(t,e,n=!1){const{auth:r}=t;if(Ar(r.app))return Promise.reject(Yt(r));const i="reauthenticate";try{const o=yield Ui(t,z4(r,i,e,t),n);$(o.idToken,r,"internal-error");const s=ty(o.idToken);$(s,r,"internal-error");const{sub:a}=s;return $(t.uid===a,r,"user-mismatch"),yr._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Kn(r,"user-mismatch"),o}})).apply(this,arguments)}function K4(t,e){return aD.apply(this,arguments)}function aD(){return(aD=I(function*(t,e,n=!1){if(Ar(t.app))return Promise.reject(Yt(t));const r="signIn",i=yield z4(t,r,e),o=yield yr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const ly="__sak";class Z4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ly,"1"),this.storage.removeItem(ly),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zge=(()=>{class t extends Z4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Vpe(){return function Uce(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),X4=(()=>{class t extends Z4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Wge=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return I(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=I(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function Gge(t){return Promise.all(t.map(function(){var e=I(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function dy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Kge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=dy("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(v.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Lt(){return window}function FD(){return typeof Lt().WorkerGlobalScope<"u"&&"function"==typeof Lt().importScripts}function UD(){return(UD=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const eq="firebaseLocalStorageDb",hy="firebaseLocalStorage",tq="fbase_key";class tf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fy(t,e){return t.transaction([hy],e?"readwrite":"readonly").objectStore(hy)}function jD(){const t=indexedDB.open(eq,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hy,{keyPath:tq})}catch(i){n(i)}}),t.addEventListener("success",I(function*(){const r=t.result;r.objectStoreNames.contains(hy)?e(r):(r.close(),yield function eme(){const t=indexedDB.deleteDatabase(eq);return new tf(t).toPromise()}(),e(yield jD()))}))})}function nq(t,e,n){return BD.apply(this,arguments)}function BD(){return(BD=I(function*(t,e,n){const r=fy(t,!0).put({[tq]:e,value:n});return new tf(r).toPromise()})).apply(this,arguments)}function $D(){return($D=I(function*(t,e){const n=fy(t,!1).get(e),r=yield new tf(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function rq(t,e){const n=fy(t,!0).delete(e);return new tf(n).toPromise()}const ime=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return I(function*(){return n.db||(n.db=yield jD()),n.db})()}_withRetries(n){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return I(function*(){return FD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return I(function*(){n.receiver=Wge._getInstance(function Zge(){return FD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return I(function*(){var r,i;if(n.activeServiceWorker=yield function Yge(){return UD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Kge(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function Jge(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const n=yield jD();return yield nq(n,ly,"1"),yield rq(n,ly),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return I(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>nq(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return I(function*(){const i=yield r._withRetries(o=>function tme(t,e){return $D.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>rq(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return I(function*(){const r=yield n._withRetries(s=>{const a=fy(s,!1).getAll();return new tf(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Ra(t,e){return e?ji(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}k4("rcb"),new qh(3e4,6e4);class XD extends Jh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fme(t){return K4(t.auth,new XD(t),t.bypassAuthState)}function pme(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),W4(n,new XD(t),t.bypassAuthState)}function gme(t){return eR.apply(this,arguments)}function eR(){return(eR=I(function*(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),rD(n,new XD(t),t.bypassAuthState)})).apply(this,arguments)}class oq{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fme;case"linkViaPopup":case"linkViaRedirect":return gme;case"reauthViaPopup":case"reauthViaRedirect":return pme;default:Kn(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mme=new qh(2e3,1e4);function tR(){return(tR=I(function*(t,e,n){if(Ar(t.app))return Promise.reject(Nn(t,"operation-not-supported-in-this-environment"));const r=Rt(t);!function Hu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Kn(t,"argument-error"),cA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,$i);const i=Ra(r,n);return new iR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let iR=(()=>{class t extends oq{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return I(function*(){const r=yield n.execute();return $(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return I(function*(){Li(1===n.filter.length,"Popup operations only handle one event");const r=dy();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(Nn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,mme.get())};n()}}return t.currentPopupAction=null,t})();const rf=new Map;class vme extends oq{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return I(function*(){let r=rf.get(n.auth._key());if(!r){try{const o=(yield function Ime(t,e){return oR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}rf.set(n.auth._key(),r)}return n.bypassAuthState||rf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function oR(){return(oR=I(function*(t,e){const n=function aq(t){return ny("pendingRedirect",t.config.apiKey,t.name)}(e),r=function sq(t){return ji(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Eme(t,e){rf.set(t._key(),e)}function cq(t,e){return hR.apply(this,arguments)}function hR(){return(hR=I(function*(t,e,n=!1){if(Ar(t.app))return Promise.reject(Yt(t));const r=Rt(t),i=Ra(r,e),s=yield new vme(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Sme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Ame(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dq(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dq(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lq(e))}saveEventToCache(e){this.cachedEventUids.add(lq(e)),this.lastProcessedEventTime=Date.now()}}function lq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dq({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function pR(){return(pR=I(function*(t,e={}){return it(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Rme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pme=/^https?/;function gR(){return gR=I(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function Dme(t){return pR.apply(this,arguments)}(t);for(const n of e)try{if(Nme(n))return}catch{}Kn(t,"unauthorized-domain")}),gR.apply(this,arguments)}function Nme(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Pme.test(n))return!1;if(Rme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const xme=new qh(3e4,6e4);function hq(){const t=Lt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function kme(t){return new Promise((e,n)=>{var r,i,o;function s(){hq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hq(),n(Nn(t,"network-request-failed"))},timeout:xme.get()})}if(null!==(i=null===(r=Lt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Lt().gapi)||void 0===o||!o.load){const a=k4("iframefcb");return Lt()[a]=()=>{gapi.load?s():n(Nn(t,"network-request-failed"))},function MA(t){return Kh.loadJS(t)}(`${function zpe(){return Kh.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw py=null,e})}let py=null;const Vme=new qh(5e3,15e3),Ume={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bme(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:eu},i=jme.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Gd(r).slice(1)}`}function mR(){return mR=I(function*(t){const e=yield function Ome(t){return py=py||kme(t),py}(t),n=Lt().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:Bme(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ume,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Nn(t,"network-request-failed"),c=Lt().setTimeout(()=>{s(a)},Vme.get());function u(){Lt().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),mR.apply(this,arguments)}const Hme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zme=encodeURIComponent("fac");function pq(t,e,n,r,i,o){return _R.apply(this,arguments)}function _R(){return(_R=I(function*(t,e,n,r,i,o){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eu,eventId:i};if(e instanceof $i){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function qce(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof $4){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${Zme}=${encodeURIComponent(c)}`:"";return`${function Xme({config:t}){return t.emulator?dA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Gd(a).slice(1)}${u}`})).apply(this,arguments)}const yR="webStorageSupport",t_e=class e_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X4,this._completeRedirectFn=cq,this._overrideRedirectResult=Eme}_openPopup(e,n,r,i){var o=this;return I(function*(){var s;Li(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield pq(e,n,r,Hh(),i);return function Kme(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Hme),{width:r.toString(),height:i.toString(),top:o,left:s}),u=St().toLowerCase();n&&(a=S4(u)?"_blank":n),b4(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Ope(t=St()){var e;return RA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function Qme(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new fq(null);const h=window.open(e||"",a,d);$(h,t,"popup-blocked");try{h.focus()}catch{}return new fq(h)}(e,a,dy())})()}_openRedirect(e,n,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function Qge(t){Lt().location.href=t}(yield pq(e,n,r,Hh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return I(function*(){const r=yield function $me(t){return mR.apply(this,arguments)}(e),i=new Sme(e);return r.register("authEvent",o=>($(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yR,{type:yR},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[yR];void 0!==s&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Mme(t){return gR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M4()||C4()||RA()}};var yq="@firebase/auth";class n_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return I(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const o_e=IU("authIdTokenMaxAge")||300;let Iq=null;const s_e=t=>function(){var e=I(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>o_e)return;const o=r?.token;Iq!==o&&(Iq=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function a_e(t=BU()){const e=Bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function ege(t,e){const n=Bm(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Si(n.getOptions(),e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:t_e,persistence:[ime,zge,X4]}),r=IU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=s_e(o.toString());(function Lge(t,e,n){kt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Vge(t,e,n,r){kt(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=yU("auth");return i&&function nge(t,e,n){const r=Rt(t);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=L4(e),{host:s,port:a}=function rge(t){const e=L4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:F4(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:F4(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $(Si(u,r.config.emulator)&&Si(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Zc(s)?(TU(`${o}//${s}${c}`),bU("Auth",!0)):i||function ige(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function $pe(t){Kh=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Nn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function c_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function i_e(t){Xc(new Js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N4(t)},u=new Bpe(r,i,o,c);return function tge(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ji);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xc(new Js("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return new n_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(yq,"1.10.8",function r_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),Di(yq,"1.10.8","esm2017")}("Browser");const Eq_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Ku=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new Tge,this.user=wt(null),this.canWrite=wt(!1),this.authLoading=wt(!0),this.ensureFirebaseConfig();const i=jU(Eq_firebase);this.db=Ufe(i),this.auth=a_e(i),function Fge(t,e,n,r){kt(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=I(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return I(function*(){yield function _me(t,e,n){return tR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return I(function*(){yield function Uge(t){return kt(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return I(function*(){r.ensureSignedIn();const o=function Wfe(t,e,...n){let r=[];e instanceof rA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof $u).length,a=o.filter(c=>c instanceof Uh).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(OH(r.db,"recipes"),function Kfe(t,e="asc"){const n=e,r=z_("orderBy",t);return iA._create(r,n)}("updated_at","desc"));return(yield function Jfe(t){t=Ie(t,Qt);const e=Ie(t.firestore,Qe),n=ft(e),r=new Ho(e);return function YH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function DH(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,c,u){const d=new U_({next:f=>{d.Ou(),s.enqueueAndForget(()=>oS(o,h)),f.fromCache&&"server"===c.source?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new uS(a,d,{includeMetadataChanges:!0,ka:!0});return rS(o,h)}(yield ju(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new or(e,r,t,i))}(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at;return"string"!=typeof u?null:{id:a.id,raw_text:u,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield epe(OH(i.db,"recipes"),{raw_text:o,updated_at:o4(),updated_by:i.user()?.email??""})).id,raw_text:o,updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return I(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield function Zfe(t,e,n,...r){t=Ie(t,We);const i=Ie(t.firestore,Qe),o=Sa(i);let s;return s="string"==typeof(e=kt(e))||e instanceof ba?function tA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[Vh(e,r,n)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(Vh(e,o[f])),c.push(o[f+1]);const u=[],d=nn.empty();for(let f=a.length-1;f>=0;--f)if(!QH(u,a[f])){const g=a[f];let _=c[f];_=kt(_);const v=s.gc(g);if(_ instanceof Oh)u.push(g);else{const T=Aa(_,v);null!=T&&(u.push(g),d.set(g,T))}}const h=new Gn(u);return new HH(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function eA(t,e,n,r){const i=t.Dc(1,e,n);nA("Data must be an object, but it was:",i,r);const o=[],s=nn.empty();Do(r,(c,u)=>{const d=H_(e,c,n);u=kt(u);const h=i.gc(d);if(u instanceof Oh)o.push(d);else{const f=Aa(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new Gn(o);return new HH(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),jh(i,[s.toMutation(t._key,lt.exists(!0))])}(KS(o.db,"recipes",r),{raw_text:s,updated_at:o4(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}deleteRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();try{yield function Xfe(t){return jh(Ie(t.firestore,Qe),[new Tu(t._key,lt.none())])}(KS(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(Eq_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const u_e=["postup","kroky","p\u0159\xedprava"],Tq=/^[\-\u2013\u2022*]\s*/,l_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,d_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,h_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function my(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function f_e(t){const e=wq(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=wq(e),o=function p_e(t){return t.findIndex(e=>u_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:g_e(s,n),steps:E_e(a),warnings:n}}function wq(t){return t.findIndex(e=>e.length>0)}function g_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(bq(o))i&&r.push(i),i={title:__e(o),items:[]};else if(m_e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=y_e(o);void 0===s.amount&&I_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function m_e(t){return!bq(t)}function bq(t){return/:$/.test(t.trim())}function __e(t){return t.replace(/:$/,"").trim()}function y_e(t){const e=t.replace(Tq,"").trim(),n=[],r=e.match(/\(([^)]+)\)/);r&&void 0!==r.index&&n.push({start:r.index,end:r.index+r[0].length,value:r[1].trim()});const i=e.search(/\s-\s|\s-$/);if(i>=0){const f=e.slice(i+1).trim();f&&n.push({start:i,end:e.length,value:f})}const o=e.indexOf(",");if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,end:e.length,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function v_e(t){let e=t.trim();const r=e.match(l_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(d_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function I_e(t){const e=t.toLowerCase();return h_e.some(n=>e.startsWith(n))}function E_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(Tq,"").trim()).filter(Boolean)}let Qu=(()=>{var t;class e{constructor(){this.api=O(Ku),this.recipes=wt([]),this.selectedRecipeId=wt(null),this.rawText=wt(""),this.searchQuery=wt(""),this.loading=wt(!1),this.saving=wt(!1),this.deleting=wt(!1),this.error=wt(""),this.parsed=Dn(()=>my(this.rawText())),this.selectedRecipe=Dn(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=Dn(()=>{const r=this.selectedRecipe();return r?my(r.raw_text):null}),this.searchResults=Dn(()=>{const r=this.searchQuery().trim().toLowerCase();return r?this.recipes().filter(i=>my(i.raw_text).title.toLowerCase().includes(r)||i.raw_text.toLowerCase().includes(r)):[]})}refresh(){var r=this;return I(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return I(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();return i?yield r.api.updateRecipe(i,r.rawText()):yield r.api.createRecipe(r.rawText()),yield r.refresh(),!0}catch(i){return r.error.set(i.message),!1}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return I(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return my(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const Cq=()=>({exact:!0});function T_e(t,e){1&t&&(je(0,"section",1)(1,"p"),De(2,"Loading"),ke()())}function w_e(t,e){if(1&t){const n=kc();je(0,"header",3)(1,"h1"),De(2,"Recipes"),ke(),je(3,"button",5),zt("click",function(){return eo(n),to(Ct(2).signOut())}),De(4,"Sign out"),ke()()}if(2&t){const n=Ct(2);de(3),go("disabled",n.authBusy())}}function b_e(t,e){if(1&t){const n=kc();je(0,"nav",4)(1,"a",6),De(2,"Home"),ke(),je(3,"a",7),De(4,"Recipes"),ke(),je(5,"a",8),zt("click",function(){return eo(n),to(Ct(2).startAdd())}),De(6,"Add"),ke()()}if(2&t){const n=Ct(2);de(),go("routerLinkActiveOptions",jT(4,Cq)),de(2),go("routerLinkActiveOptions",jT(5,Cq)),de(2),Fs("disabled",!n.canWrite())}}function C_e(t,e){if(1&t&&(fr(0,w_e,5,1,"header",3),Fg(1,"router-outlet"),fr(2,b_e,7,6,"nav",4)),2&t){const n=Ct();pr(n.user()?0:-1),de(2),pr(n.user()?2:-1)}}function S_e(t,e){if(1&t&&(je(0,"p",2),De(1),ke()),2&t){const n=Ct();de(),zr(n.state.error())}}let A_e=(()=>{var t;class e{constructor(){this.router=O(Pn),this.api=O(Ku),this.state=O(Qu),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=wt(!1),function TF(t,e){const n=e?.injector??O(Zn);let i,r=!0!==e?.manualCleanup?n.get(Vr):null;const o=n.get(eI,null,{optional:!0}),s=n.get(fs);return null!==o?(i=function mie(t,e,n){const r=Object.create(gie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=bF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof bM&&r._lView===o.view&&(r=null)):i=function _ie(t,e,n){const r=Object.create(pie);return r.fn=bF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(NM),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new fie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return I(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"app-shell"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],[1,"bottom-nav","no-print"],["type","button",1,"ghost",3,"click","disabled"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes/new","routerLinkActive","active",3,"click"]],template:function(i,o){1&i&&(je(0,"main",0),fr(1,T_e,3,0,"section",1)(2,C_e,3,2),fr(3,S_e,2,1,"p",2),ke()),2&i&&(de(),pr(o.authLoading()?1:2),de(2),pr(o.state.error()?3:-1))},dependencies:[Ww,Om,aU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#f8fafc}*[_ngcontent-%COMP%]{box-sizing:border-box}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:1.25rem 1rem 5.5rem;max-width:920px;margin:0 auto}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.65rem .75rem calc(.65rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:12px;padding:.75rem 1rem;background:#f1f5f9;color:#0f172a}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.75rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding-bottom:2rem}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:1rem 0 0;max-width:420px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})(),Sq=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Z(Cs),Z(Er))};static \u0275dir=Ee({type:t})}return t})(),Pa=(()=>{class t extends Sq{static \u0275fac=(()=>{let n;return function(i){return(n||(n=qt(t)))(i||t)}})();static \u0275dir=Ee({type:t,features:[Ue]})}return t})();const si=new H(""),P_e={provide:si,useExisting:Je(()=>of),multi:!0},N_e=new H("");let of=(()=>{class t extends Sq{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function M_e(){const t=ro()?ro().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Z(Cs),Z(Er),Z(N_e,8))};static \u0275dir=Ee({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&zt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[st([P_e]),Ue]})}return t})();const _n=new H(""),Wo=new H("");function Vq(t){return null!=t}function Lq(t){return Ag(t)?dn(t):t}function Fq(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Uq(t,e){return e.map(n=>n(t))}function jq(t){return t.map(e=>function k_e(t){return!t.validate}(e)?e:n=>e.validate(n))}function TR(t){return null!=t?function Bq(t){if(!t)return null;const e=t.filter(Vq);return 0==e.length?null:function(n){return Fq(Uq(n,e))}}(jq(t)):null}function wR(t){return null!=t?function $q(t){if(!t)return null;const e=t.filter(Vq);return 0==e.length?null:function(n){return function D_e(...t){const e=GF(t),{args:n,keys:r}=WF(t),i=new Pt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;Gr(n[d]).subscribe(Ft(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?QF(r,a):a),o.complete())}))}});return e?i.pipe(KF(e)):i}(Uq(n,e).map(Lq)).pipe(Ve(Fq))}}(jq(t)):null}function Hq(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function bR(t){return t?Array.isArray(t)?t:[t]:[]}function yy(t,e){return Array.isArray(t)?t.includes(e):t===e}function Gq(t,e){const n=bR(e);return bR(t).forEach(i=>{yy(n,i)||n.push(i)}),n}function Wq(t,e){return bR(e).filter(n=>!yy(t,n))}class Kq{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class xn extends Kq{name;get formDirective(){return null}get path(){return null}}class Ko extends Kq{_parent=null;name=null;valueAccessor=null}class Qq{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let CR=(()=>{class t extends Qq{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Z(Ko,2))};static \u0275dir=Ee({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Fs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ue]})}return t})();const sf="VALID",Iy="INVALID",Yu="PENDING",af="DISABLED";class Ju{}class Jq extends Ju{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class DR extends Ju{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class RR extends Ju{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Ey extends Ju{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class PR extends Ju{source;constructor(e){super(),this.source=e}}function Ty(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class xR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return at(this.statusReactive)}set status(e){at(()=>this.statusReactive.set(e))}_status=Dn(()=>this.statusReactive());statusReactive=wt(void 0);get valid(){return this.status===sf}get invalid(){return this.status===Iy}get pending(){return this.status==Yu}get disabled(){return this.status===af}get enabled(){return this.status!==af}errors;get pristine(){return at(this.pristineReactive)}set pristine(e){at(()=>this.pristineReactive.set(e))}_pristine=Dn(()=>this.pristineReactive());pristineReactive=wt(!0);get dirty(){return!this.pristine}get touched(){return at(this.touchedReactive)}set touched(e){at(()=>this.touchedReactive.set(e))}_touched=Dn(()=>this.touchedReactive());touchedReactive=wt(!1);get untouched(){return!this.touched}_events=new Vn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wq(e,this._rawAsyncValidators))}hasValidator(e){return yy(this._rawValidators,e)}hasAsyncValidator(e){return yy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new RR(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new RR(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new DR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new DR(!0,r))}markAsPending(e={}){this.status=Yu;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Ey(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=af,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Jq(this.value,r)),this._events.next(new Ey(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=sf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sf||this.status===Yu)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Jq(this.value,n)),this._events.next(new Ey(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?af:sf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Yu,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=Lq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ey(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new xt,this.statusChanges=new xt}_calculateStatus(){return this._allControlsDisabled()?af:this.errors?Iy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yu)?Yu:this._anyControlsHaveStatus(Iy)?Iy:sf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new DR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new RR(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ty(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function $_e(t){return Array.isArray(t)?TR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function H_e(t){return Array.isArray(t)?wR(t):t||null}(this._rawAsyncValidators)}}const Zu=new H("",{providedIn:"root",factory:()=>wy}),wy="always";function cf(t,e,n=wy){(function OR(t,e){const n=function qq(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Hq(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function zq(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Hq(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Sy(e._rawValidators,i),Sy(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function G_e(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&tz(t,e)})}(t,e),function K_e(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function W_e(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&tz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function z_e(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Sy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function tz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function iz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function oz(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const sz=class extends xR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function MR(t){return(Ty(t)?t.validators:t)||null}(n),function NR(t,e){return(Ty(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ty(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=oz(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new PR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},iye={provide:Ko,useExisting:Je(()=>My)},az=Promise.resolve();let My=(()=>{class t extends Ko{_changeDetectorRef;callSetDisabledState;control=new sz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new xt;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function FR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===of?n=o:function J_e(t){return Object.getPrototypeOf(t.constructor)===Pa}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function LR(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){az.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Hc(r);az.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function by(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Z(xn,9),Z(_n,10),Z(Wo,10),Z(si,10),Z(am,8),Z(Zu,8))};static \u0275dir=Ee({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[st([iye]),Ue,yi]})}return t})(),Rye=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=_g({type:t});static \u0275inj=ul({})}return t})(),Sz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Zu,useValue:n.callSetDisabledState??wy}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=_g({type:t});static \u0275inj=ul({imports:[Rye]})}return t})();const Mye=(t,e)=>e.id;function Nye(t,e){1&t&&(je(0,"p"),De(1,"Loading"),ke())}function xye(t,e){1&t&&(je(0,"p"),De(1,"No recipes"),ke())}function kye(t,e){if(1&t){const n=kc();je(0,"li")(1,"button",7),zt("click",function(){const i=eo(n).$implicit;return to(Ct(3).open(i.id))}),De(2),ke()()}if(2&t){const n=e.$implicit,r=Ct(3);de(2),Us(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function Oye(t,e){if(1&t&&(je(0,"ul",6),Hr(1,kye,3,1,"li",null,Mye),ke()),2&t){const n=Ct(2);de(),qr(n.state.searchResults())}}function Vye(t,e){if(1&t&&(je(0,"section",5),fr(1,Nye,2,0,"p")(2,xye,2,0,"p")(3,Oye,3,0,"ul",6),ke()),2&t){const n=Ct();Fs("loading",n.state.loading()),de(),pr(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let Lye=(()=>{var t;class e{constructor(){this.state=O(Qu),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["type","search","placeholder","Search recipes",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(je(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),zt("ngModelChange",function(a){return o.state.searchQuery.set(a)}),ke()(),fr(4,Vye,4,3,"section",4),ke()()),2&i&&(Fs("has-query",o.state.searchQuery().trim().length>0),de(3),go("ngModel",o.state.searchQuery()),de(),pr(o.state.searchQuery().trim().length>0?4:-1))},dependencies:[Sz,of,CR,My],styles:[".home-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:1rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{min-height:55vh;display:grid;place-items:center;transition:min-height .24s ease,place-items .24s ease}.home-screen.has-query[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]{min-height:0;place-items:start}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start;opacity:1;transform:translateY(0);transition:opacity .22s ease,transform .22s ease}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(260px,340px) minmax(0,1fr);column-gap:1rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})(),Fye=(()=>{var t;class e{constructor(){this.api=O(Ku),this.state=O(Qu),this.router=O(Pn),this.authBusy=!1}signIn(){var r=this;return I(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(vt(0,"section",0)(1,"h1"),De(2,"Recipes"),ht(),vt(3,"button",1),Vs("click",function(){return o.signIn()}),De(4,"Continue with Google"),ht()()),2&i&&(de(3),pd("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const Uye=(t,e)=>e.id;function jye(t,e){1&t&&(vt(0,"p"),De(1,"Loading"),ht())}function Bye(t,e){1&t&&(vt(0,"p"),De(1,"No recipes"),ht())}function $ye(t,e){if(1&t){const n=kc();vt(0,"li")(1,"button",2),Vs("click",function(){const i=eo(n).$implicit;return to(Ct(2).open(i.id))}),De(2),ht()()}if(2&t){const n=e.$implicit,r=Ct(2);de(2),Us(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function Hye(t,e){if(1&t&&(vt(0,"ul",1),Hr(1,$ye,3,1,"li",null,Uye),ht()),2&t){const n=Ct();de(),qr(n.state.recipes())}}let qye=(()=>{var t;class e{constructor(){this.state=O(Qu),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(vt(0,"section",0),fr(1,jye,2,0,"p")(2,Bye,2,0,"p")(3,Hye,3,0,"ul",1),ht()),2&i&&(de(),pr(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const zye=(t,e)=>e.title;function Gye(t,e){if(1&t&&(vt(0,"li"),De(1),ht()),2&t){const n=e.$implicit;de(),Wg("",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name)}}function Wye(t,e){if(1&t&&(vt(0,"div",2)(1,"h3"),De(2),ht(),vt(3,"ul"),Hr(4,Gye,2,2,"li",null,fd),ht()()),2&t){const n=e.$implicit;de(2),zr(n.title),de(2),qr(n.items)}}function Kye(t,e){if(1&t&&(vt(0,"li"),De(1),ht()),2&t){const n=e.$implicit;de(),zr(n)}}function Qye(t,e){if(1&t&&(vt(0,"div",2)(1,"h3"),De(2,"Steps"),ht(),vt(3,"ol"),Hr(4,Kye,2,1,"li",null,fd),ht()()),2&t){const n=Ct(2);de(4),qr(n.state.selectedParsed().steps)}}function Yye(t,e){if(1&t){const n=kc();vt(0,"article",1)(1,"h2"),De(2),ht(),Hr(3,Wye,6,1,"div",2,zye),fr(5,Qye,6,0,"div",2),ht(),vt(6,"div",3)(7,"button",4),Vs("click",function(){return eo(n),to(Ct().edit())}),De(8,"Edit"),ht(),vt(9,"button",5),Vs("click",function(){return eo(n),to(Ct().remove())}),De(10),ht(),vt(11,"button",6),Vs("click",function(){return eo(n),to(Ct().state.print())}),De(12,"Print"),ht()()}if(2&t){const n=Ct();de(2),zr(n.state.selectedParsed().title),de(),qr(n.state.selectedParsed().ingredientSections),de(2),pr(n.state.selectedParsed().steps.length?5:-1),de(2),pd("disabled",!n.api.canWrite()),de(2),pd("disabled",!n.api.canWrite()||n.state.deleting()),de(),Us(" ",n.state.deleting()?"Deleting":"Delete"," ")}}function Jye(t,e){1&t&&(vt(0,"p"),De(1,"Recipe not found"),ht())}let Zye=(()=>{var t;class e{constructor(){this.state=O(Qu),this.api=O(Ku),this.route=O(Eo),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return I(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}remove(){var r=this;return I(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-recipe-detail"]],decls:3,vars:1,consts:[[1,"detail-screen"],[1,"recipe-card","printable-recipe"],[1,"block"],[1,"detail-actions","no-print"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"],["type","button",1,"ghost",3,"click"]],template:function(i,o){1&i&&(vt(0,"section",0),fr(1,Yye,13,5)(2,Jye,2,0,"p"),ht()),2&i&&(de(),pr(o.state.selectedParsed()?1:2))},styles:[".detail-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.detail-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.detail-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}@media print{.detail-actions[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;border:0;min-height:auto}}"]}))}return t(),e})();const Xye=(t,e)=>e.title,eve=(t,e)=>e.message;function tve(t,e){if(1&t&&(je(0,"li"),De(1),ke()),2&t){const n=e.$implicit;de(),Wg("",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name)}}function nve(t,e){if(1&t&&(je(0,"div",5)(1,"h3"),De(2),ke(),je(3,"ul"),Hr(4,tve,2,2,"li",null,fd),ke()()),2&t){const n=e.$implicit;de(2),zr(n.title),de(2),qr(n.items)}}function rve(t,e){if(1&t&&(je(0,"li"),De(1),ke()),2&t){const n=e.$implicit;de(),zr(n.message)}}function ive(t,e){if(1&t&&(je(0,"div",6)(1,"h3"),De(2,"Warnings"),ke(),je(3,"ul"),Hr(4,rve,2,1,"li",null,eve),ke()()),2&t){const n=Ct();de(4),qr(n.state.parsed().warnings)}}function ove(t,e){if(1&t&&(je(0,"li"),De(1),ke()),2&t){const n=e.$implicit;de(),zr(n)}}function sve(t,e){if(1&t&&(je(0,"div",5)(1,"h3"),De(2,"Steps"),ke(),je(3,"ol"),Hr(4,ove,2,1,"li",null,fd),ke()()),2&t){const n=Ct();de(4),qr(n.state.parsed().steps)}}let Az=(()=>{var t;class e{constructor(){this.state=O(Qu),this.api=O(Ku),this.route=O(Eo),this.router=O(Pn)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected()):r.state.startAdd()})()}save(){var r=this;return I(function*(){(yield r.state.saveSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=ho({type:e,selectors:[["app-recipe-editor"]],decls:12,vars:7,consts:[[1,"editor-screen"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"editor-actions"],["type","button",3,"click","disabled"],[1,"recipe-card","preview-card"],[1,"block"],[1,"block","parser-warnings"]],template:function(i,o){1&i&&(je(0,"section",0)(1,"textarea",1),zt("ngModelChange",function(a){return o.state.rawText.set(a)}),ke(),je(2,"div",2)(3,"button",3),zt("click",function(){return o.save()}),De(4),ke()(),je(5,"article",4)(6,"h2"),De(7),ke(),Hr(8,nve,6,1,"div",5,Xye),fr(10,ive,6,0,"div",6),fr(11,sve,6,0,"div",5),ke()()),2&i&&(de(),go("ngModel",o.state.rawText())("disabled",!o.api.canWrite()),de(2),go("disabled",o.state.saving()||!o.api.canWrite()),de(),Us(" ",o.state.saving()?"Saving":"Save"," "),de(3),zr(o.state.parsed().title),de(),qr(o.state.parsed().ingredientSections),de(2),pr(o.state.parsed().warnings.length?10:-1),de(),pr(o.state.parsed().steps.length?11:-1))},dependencies:[Sz,of,CR,My],styles:[".editor-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}textarea[_ngcontent-%COMP%]{width:100%;min-height:55vh;resize:vertical;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.editor-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.preview-card[_ngcontent-%COMP%]{margin-top:1rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const df=()=>{const t=O(Ku),e=O(Pn);return!!t.user()||e.parseUrl("/login")};(function Kre(t,e,n){return nre({rootComponent:t,platformRef:n?.platformRef,...yF(e)})})(A_e,{providers:[function mce(t,...e){return function Rv(t){return{\u0275providers:t}}([{provide:tb,multi:!0,useValue:t},[],{provide:Eo,useFactory:uU,deps:[Pn]},{provide:$O,multi:!0,useFactory:lU},e.map(n=>n.\u0275providers)])}([{path:"login",component:Fye},{path:"",canActivate:[df],component:Lye},{path:"recipes",canActivate:[df],component:qye},{path:"recipes/new",canActivate:[df],component:Az},{path:"recipes/:id",canActivate:[df],component:Zye},{path:"recipes/:id/edit",canActivate:[df],component:Az},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},Va=>{Va(Va.s=940)}]);