"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{653(){let ja;function al(){return ja}function hi(t){const e=ja;return ja=t,e}const q3=Symbol("NotFound");function Zy(t){return t===q3||"\u0275NotFound"===t?.name}Error;let un=null,cl=!1,Xy=1;const zt=Symbol("SIGNAL");function ce(t){const e=un;return un=t,e}const Ba={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ul(t){if(cl)throw new Error("");if(null===un)return;un.consumerOnSignalRead(t);const e=un.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=un.recomputing;if(r&&(n=void 0!==e?e.nextProducer:un.producers,void 0!==n&&n.producer===t))return un.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===un&&(!r||function Q3(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,un)))return;const o=Ha(un),s={producer:t,consumer:un,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};un.producersTail=s,void 0!==e?e.nextProducer=s:un.producers=s,o&&EM(t,s)}function ll(t){if((!Ha(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Xy)){if(!t.producerMustRecompute(t)&&!kf(t))return void xf(t);t.producerRecomputeValue(t),xf(t)}}function vM(t){if(void 0===t.consumers)return;const e=cl;cl=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||G3(r)}}finally{cl=e}}function IM(){return!1!==un?.consumerAllowSignalWrites}function G3(t){t.dirty=!0,vM(t),t.consumerMarkedDirty?.(t)}function xf(t){t.dirty=!1,t.lastCleanEpoch=Xy}function $a(t){return t&&function W3(t){t.producersTail=void 0,t.recomputing=!0}(t),ce(t)}function dl(t,e){ce(e),t&&function K3(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Ha(t))do{n=nv(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function kf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ll(n),r!==n.version))return!0}return!1}function hl(t){if(Ha(t)){let e=t.producers;for(;void 0!==e;)e=nv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function EM(t,e){const n=t.consumersTail,r=Ha(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)EM(i.producer,i)}function nv(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Ha(e)){let o=e.producers;for(;void 0!==o;)o=nv(o)}return n}function Ha(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function iv(t,e){return Object.is(t,e)}const is=Symbol("UNSET"),qa=Symbol("COMPUTING"),Zi=Symbol("ERRORED"),J3={...Ba,value:is,dirty:!0,error:null,equal:iv,kind:"computed",producerMustRecompute:t=>t.value===is||t.value===qa,producerRecomputeValue(t){if(t.value===qa)throw new Error("");const e=t.value;t.value=qa;const n=$a(t);let r,i=!1;try{r=t.computation(),ce(null),i=e!==is&&e!==Zi&&r!==Zi&&t.equal(e,r)}catch(o){r=Zi,t.error=o}finally{dl(t,n)}i?t.value=e:(t.value=r,t.version++)}};let TM=function Z3(){throw new Error};function wM(t){TM(t)}function eG(t,e){const n=Object.create(ov);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function tG(t){return ul(t),t.value}(n);return r[zt]=n,[r,s=>Vf(n,s),s=>function bM(t,e){IM()||wM(t),Vf(t,e(t.value))}(n,s)]}function Vf(t,e){IM()||wM(t),t.equal(t.value,e)||(t.value=e,function nG(t){t.version++,function z3(){Xy++}(),vM(t)}(t))}const ov={...Ba,equal:iv,value:void 0,kind:"signal"};function rt(t){return"function"==typeof t}function sv(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const av=sv(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function cv(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class An{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(rt(r))try{r()}catch(o){e=o instanceof av?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{AM(o)}catch(s){e=e??[],s instanceof av?e=[...e,...s.errors]:e.push(s)}}if(e)throw new av(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AM(e);else{if(e instanceof An){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cv(n,e)}remove(e){const{_finalizers:n}=this;n&&cv(n,e),e instanceof An&&e._removeParent(this)}}An.EMPTY=(()=>{const t=new An;return t.closed=!0,t})();const CM=An.EMPTY;function SM(t){return t instanceof An||t&&"closed"in t&&rt(t.remove)&&rt(t.add)&&rt(t.unsubscribe)}function AM(t){rt(t)?t():t.unsubscribe()}const os={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lf={setTimeout(t,e,...n){const{delegate:r}=Lf;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Lf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function DM(t){Lf.setTimeout(()=>{const{onUnhandledError:e}=os;if(!e)throw t;e(t)})}function uv(){}const rG=lv("C",void 0,void 0);function lv(t,e,n){return{kind:t,value:e,error:n}}let ss=null;function Ff(t){if(os.useDeprecatedSynchronousErrorHandling){const e=!ss;if(e&&(ss={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ss;if(ss=null,n)throw r}}else t()}class dv extends An{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,SM(e)&&e.add(this)):this.destination=lG}static create(e,n,r){return new fv(e,n,r)}next(e){this.isStopped?pv(function oG(t){return lv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?pv(function iG(t){return lv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pv(rG,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const aG=Function.prototype.bind;function hv(t,e){return aG.call(t,e)}class cG{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Uf(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Uf(r)}else Uf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Uf(n)}}}class fv extends dv{constructor(e,n,r){let i;if(super(),rt(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&os.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hv(e.next,o),error:e.error&&hv(e.error,o),complete:e.complete&&hv(e.complete,o)}):i=e}this.destination=new cG(i)}}function Uf(t){os.useDeprecatedSynchronousErrorHandling?function sG(t){os.useDeprecatedSynchronousErrorHandling&&ss&&(ss.errorThrown=!0,ss.error=t)}(t):DM(t)}function pv(t,e){const{onStoppedNotification:n}=os;n&&Lf.setTimeout(()=>n(t,e))}const lG={closed:!0,next:uv,error:function uG(t){throw t},complete:uv},gv="function"==typeof Symbol&&Symbol.observable||"@@observable";function as(t){return t}function RM(t){return 0===t.length?as:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let kt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function fG(t){return t&&t instanceof dv||function hG(t){return t&&rt(t.next)&&rt(t.error)&&rt(t.complete)}(t)&&SM(t)}(n)?n:new fv(n,r,i);return Ff(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=MM(r))((i,o)=>{const s=new fv({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[gv](){return this}pipe(...n){return RM(n)(this)}toPromise(n){return new(n=MM(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function MM(t){var e;return null!==(e=t??os.Promise)&&void 0!==e?e:Promise}const pG=sv(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Un=(()=>{class t extends kt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new PM(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pG}next(n){Ff(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ff(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ff(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?CM:(this.currentObservers=null,o.push(n),new An(()=>{this.currentObservers=null,cv(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new kt;return n.source=this,n}}return t.create=(e,n)=>new PM(e,n),t})();class PM extends Un{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:CM}}class pr extends Un{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const xM="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class U extends Error{code;constructor(e,n){super(Ur(e,n)),this.code=e}}function Ur(t,e){return`${function gG(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const It=globalThis;function Le(t){for(let e in t)if(t[e]===Le)return e;throw Error("")}function mG(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function jn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(jn).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function mv(t,e){return t?e?`${t} ${e}`:t:e||""}const _G=Le({__forward_ref__:Le});function et(t){return t.__forward_ref__=et,t.toString=function(){return jn(this())},t}function ge(t){return Bf(t)?t():t}function Bf(t){return"function"==typeof t&&t.hasOwnProperty(_G)&&t.__forward_ref__===et}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fl(t){return{providers:t.providers||[],imports:t.imports||[]}}function $f(t){return function bG(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,qf)}function Hf(t){return t&&t.hasOwnProperty(_v)?t[_v]:null}const qf=Le({\u0275prov:Le}),_v=Le({\u0275inj:Le});class H{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vv(t){return t&&!!t.\u0275providers}const Iv=Le({\u0275cmp:Le}),MG=Le({\u0275dir:Le}),PG=Le({\u0275pipe:Le}),kM=Le({\u0275mod:Le}),us=Le({\u0275fac:Le}),ml=Le({__NG_ELEMENT_ID__:Le}),OM=Le({__NG_ENV_ID__:Le});function de(t){return"string"==typeof t?t:null==t?"":String(t)}const Ev=Le({ngErrorCode:Le}),VM=Le({ngErrorMessage:Le}),_l=Le({ngTokenPath:Le});function Tv(t,e){return LM("",-200,e)}function wv(t,e){throw new U(-201,!1)}function LM(t,e,n){const r=new U(e,t);return r[Ev]=e,r[VM]=t,n&&(r[_l]=n),r}let bv;function FM(){return bv}function Bn(t){const e=bv;return bv=t,e}function UM(t,e,n){const r=$f(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void wv()}const ls={};class LG{injector;constructor(e){this.injector=e}retrieve(e,n){const r=yl(n)||0;try{return this.injector.get(e,8&r?null:ls,r)}catch(i){if(Zy(i))return i;throw i}}}function FG(t,e=0){const n=al();if(void 0===n)throw new U(-203,!1);if(null===n)return UM(t,void 0,e);{const r=function UG(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(Zy(i)){if(r.optional)return null;throw i}return i}}function Te(t,e=0){return(FM()||FG)(ge(t),e)}function O(t,e){return Te(t,yl(e))}function yl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Sv(t){const e=[];for(let n=0;n<t.length;n++){const r=ge(t[n]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=jG(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(Te(i,o))}else e.push(Te(r))}return e}function jG(t){return t.__NG_DI_FLAG__}function ds(t,e){return t.hasOwnProperty(us)?t[us]:null}function za(t,e){t.forEach(n=>Array.isArray(n)?za(n,e):e(n))}function BM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Gf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Kf(t,e,n){let r=Il(t,e);return r>=0?t[1|r]=n:(r=~r,function HM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Av(t,e){const n=Il(t,e);if(n>=0)return t[1|n]}function Il(t,e){return function $G(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const jr={},tt=[],eo=new H(""),qM=new H("",-1),Dv=new H("");class Qf{get(e,n=ls){if(n===ls){const i=LM("",-201);throw i.name="\u0275NotFound",i}return n}}function Br(t){return t[kM]||null}function Ue(t){return t[Iv]||null}function Dn(t){return t[MG]||null}function Cr(t){return t[PG]||null}function qG(...t){return{\u0275providers:Pv(0,t),\u0275fromNgModule:!0}}function Pv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return za(e,s=>{const a=s;Yf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&zM(i,o),n}function zM(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Nv(i,o=>{e(o,r)})}}function Yf(t,e,n,r){if(!(t=ge(t)))return!1;let i=null,o=Hf(t);const s=!o&&Ue(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Hf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Yf(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{za(o.imports,d=>{Yf(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&zM(u,e)}if(!a){const u=ds(i)||(()=>new i);e({provide:i,useFactory:u,deps:tt},i),e({provide:Dv,useValue:i,multi:!0},i),e({provide:eo,useValue:()=>Te(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;Nv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function Nv(t,e){for(let n of t)vv(n)&&(n=n.\u0275providers),Array.isArray(n)?Nv(n,e):e(n)}const zG=Le({provide:String,useValue:Le});function xv(t){return null!==t&&"object"==typeof t&&zG in t}function fi(t){return"function"==typeof t}const kv=new H(""),Jf={},QM={};let Ov;function Vv(){return void 0===Ov&&(Ov=new Qf),Ov}class Rn{}class hs extends Rn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Fv(e,s=>this.processProvider(s)),this.records.set(qM,Wa(void 0,this)),i.has("environment")&&this.records.set(Rn,Wa(void 0,this));const o=this.records.get(kv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dv,tt,{self:!0}))}retrieve(e,n){const r=yl(n)||0;try{return this.get(e,ls,r)}catch(i){if(Zy(i))return i;throw i}}destroy(){El(this),this._destroyed=!0;const e=ce(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return El(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){El(this);const n=hi(this),r=Bn(void 0);try{return e()}finally{hi(n),Bn(r)}}get(e,n=ls,r){if(El(this),e.hasOwnProperty(OM))return e[OM](this);const i=yl(r),s=hi(this),a=Bn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function YG(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&$f(e);u=d&&this.injectableDefInScope(d)?Wa(Lv(e),Jf):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?Vv():this.parent).get(e,n=8&i&&n===ls?null:n)}catch(c){const u=function OG(t){return t[Ev]}(c);throw-200===u||-201===u?new U(u,null):c}finally{Bn(a),hi(s)}}resolveInjectorInitializers(){const e=ce(null),n=hi(this),r=Bn(void 0);try{const o=this.get(eo,tt,{self:!0});for(const s of o)s()}finally{hi(n),Bn(r),ce(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=fi(e=ge(e))?e:ge(e&&e.provide);const r=function WG(t){return xv(t)?Wa(void 0,t.useValue):Wa(YM(t),Jf)}(e);if(!fi(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Wa(void 0,Jf,!0),i.factory=()=>Sv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=ce(null);try{if(n.value===QM)throw Tv(jn(e));return n.value===Jf&&(n.value=QM,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function QG(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ge(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Lv(t){const e=$f(t),n=null!==e?e.factory:ds(t);if(null!==n)return n;if(t instanceof H)throw new U(204,!1);if(t instanceof Function)return function GG(t){if(t.length>0)throw new U(204,!1);const n=function CG(t){return(t?.[qf]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new U(204,!1)}function YM(t,e,n){let r;if(fi(t)){const i=ge(t);return ds(i)||Lv(i)}if(xv(t))r=()=>ge(t.useValue);else if(function WM(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Sv(t.deps||[]));else if(function GM(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>Te(ge(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=ge(t&&(t.useClass||t.provide));if(!function KG(t){return!!t.deps}(t))return ds(i)||Lv(i);r=()=>new i(...Sv(t.deps))}return r}function El(t){if(t.destroyed)throw new U(205,!1)}function Wa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fv(t,e){for(const n of t)Array.isArray(n)?Fv(n,e):n&&vv(n)?Fv(n.\u0275providers,e):e(n)}function mr(t,e){let n;t instanceof hs?(El(t),n=t):n=new LG(t);const i=hi(n),o=Bn(void 0);try{return e()}finally{hi(i),Bn(o)}}function mt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Mn(t){return Array.isArray(t)&&!0===t[1]}function ZM(t){return!!(4&t.flags)}function mi(t){return t.componentOffset>-1}function Za(t){return!(1&~t.flags)}function er(t){return!!t.template}function oo(t){return!!(512&t[2])}function _i(t){return!(256&~t[2])}function Wt(t){for(;Array.isArray(t);)t=t[0];return t}function Xa(t,e){return Wt(e[t])}function Vt(t,e){return Wt(e[t.index])}function ec(t,e){return t.data[e]}function Pn(t,e){const n=e[t];return mt(n)?n:n[0]}function Hv(t){return!(128&~t[2])}function hn(t,e){return null==e?null:t[e]}function iP(t){t[17]=0}function oP(t){1024&t[2]||(t[2]|=1024,Hv(t)&&tc(t))}function tp(t){return!!(9216&t[2]||t[24]?.dirty)}function qv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),tp(t)&&tc(t)}function tc(t){t[10].changeDetectionScheduler?.notify(0);let e=yi(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Hv(e));)e=yi(e)}function np(t,e){if(_i(t))throw new U(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function yi(t){const e=t[3];return Mn(e)?e[3]:e}function aP(t){return t[7]??=[]}function cP(t){return t.cleanup??=[]}const ue={lFrame:wP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Wv=!1;function uP(){ue.lFrame.elementDepthCount--}function dP(t){return ue.skipHydrationRootTNode===t}function hP(){ue.skipHydrationRootTNode=null}function V(){return ue.lFrame.lView}function me(){return ue.lFrame.tView}function tr(t){return ue.lFrame.contextLView=t,t[8]}function nr(t){return ue.lFrame.contextLView=null,t}function le(){let t=fP();for(;null!==t&&64===t.type;)t=t.parent;return t}function fP(){return ue.lFrame.currentTNode}function vi(t,e){const n=ue.lFrame;n.currentTNode=t,n.isParent=e}function pP(){return ue.lFrame.isParent}function yP(){return Wv}function rp(t){const e=Wv;return Wv=t,e}function $n(){return ue.lFrame.bindingIndex++}function Ei(t){const e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function u6(t,e){const n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qv(e)}function Qv(t){ue.lFrame.currentDirectiveIndex=t}function Jv(){return ue.lFrame.currentQueryIndex}function ip(t){ue.lFrame.currentQueryIndex=t}function d6(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function EP(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=d6(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ue.lFrame=TP();return r.currentTNode=e,r.lView=t,!0}function Zv(t){const e=TP(),n=t[1];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function TP(){const t=ue.lFrame,e=null===t?null:t.child;return null===e?wP(t):e}function wP(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function bP(){const t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const CP=bP;function Xv(){const t=bP();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function en(){return ue.lFrame.selectedIndex}function _s(t){ue.lFrame.selectedIndex=t}function $r(){const t=ue.lFrame;return ec(t.tView,t.selectedIndex)}let SP=!0;function op(){return SP}function Cl(t){SP=t}function AP(t,e=null,n=null,r){const i=DP(t,e,n,r);return i.resolveInjectorInitializers(),i}function DP(t,e=null,n=null,r,i=new Set){const o=[n||tt,qG(t)];return r=r||("object"==typeof t?void 0:jn(t)),new hs(o,e||Vv(),r||null,i)}class rr{static THROW_IF_NOT_FOUND=ls;static NULL=new Qf;static create(e,n){if(Array.isArray(e))return AP({name:""},n,e,"");{const r=e.name??"";return AP({name:r},e.parent,e.providers,r)}}static \u0275prov=ne({token:rr,providedIn:"any",factory:()=>Te(qM)});static __NG_ELEMENT_ID__=-1}const Sr=new H("");let Hr=(()=>class t{static __NG_ELEMENT_ID__=y6;static __NG_ENV_ID__=n=>n})();class RP extends Hr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _i(this._lView)}onDestroy(e){const n=this._lView;return np(n,e),()=>function zv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function y6(){return new RP(V())}class rc{_console=console;handleError(e){this._console.error("ERROR",e)}}const qr=new H("",{providedIn:"root",factory:()=>{const t=O(Rn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(rc),e.handleError(n))}}}),MP={provide:eo,useValue:()=>{O(rc)},multi:!0};function _t(t,e){const[n,r,i]=eG(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=eI.bind(o),o}function eI(){const t=this[zt];if(void 0===t.readonlyFn){const e=()=>this();e[zt]=t,t.readonlyFn=e}return t.readonlyFn}let tI=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=I6})();function I6(){return new tI(V(),le())}class ys{}const xP=new H("",{providedIn:"root",factory:()=>!1}),kP=new H(""),OP=new H("");let so=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new pr(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new kt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sl(...t){}let LP=(()=>{class t{static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new E6})}return t})();class E6{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let FP=null;function ao(){return FP}class w6{}let UP=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(b6),providedIn:"platform"})}return t})(),b6=(()=>{class t extends UP{_location;_history;_doc=O(Sr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ao().getBaseHref(this._doc)}onPopState(n){const r=ao().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ao().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function jP(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function BP(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function vs(t){return t&&"?"!==t[0]?`?${t}`:t}let sp=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(S6),providedIn:"root"})}return t})();const C6=new H("");let S6=(()=>{class t extends sp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jP(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Te(UP),Te(C6,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Al=(()=>{class t{_subject=new Un;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function R6(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(BP($P(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vs(r))}normalize(n){return t.stripTrailingSlash(function D6(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,$P(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=vs;static joinWithSlash=jP;static stripTrailingSlash=BP;static \u0275fac=function(r){return new(r||t)(Te(sp))};static \u0275prov=ne({token:t,factory:()=>function A6(){return new Al(Te(sp))}(),providedIn:"root"})}return t})();function $P(t){return t.replace(/\/index.html$/,"")}function eN(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){eN(o,r,i,s,a,"next",c)}function a(c){eN(o,r,i,s,a,"throw",c)}s(void 0)})}}function tN(t){return rt(t?.lift)}function tn(t){return e=>{if(tN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $t(t,e,n,r,i){return new h5(t,e,n,r,i)}class h5 extends dv{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function je(t,e){return tn((n,r)=>{let i=0;n.subscribe($t(r,o=>{r.next(t.call(e,o,i++))}))})}function Ti(t){return{toString:t}.toString()}class K5{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function pN(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const wi=(()=>{const t=()=>gN;return t.ngInherit=!0,t})();function gN(t){return t.type.prototype.ngOnChanges&&(t.setInput=Y5),Q5}function Q5(){const t=_N(this),e=t?.current;if(e){const n=t.previous;if(n===jr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Y5(t,e,n,r,i){const o=this.declaredInputs[r],s=_N(t)||function J5(t,e){return t[mN]=e}(t,{previous:jr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new K5(u&&u.currentValue,n,c===jr),pN(t,e,i,n)}const mN="__ngSimpleChanges__";function _N(t){return t[mN]||null}const Es=[],Be=function(t,e=null,n){for(let r=0;r<Es.length;r++)(0,Es[r])(t,e,n)};function mp(t,e,n){vN(t,e,3,n)}function _p(t,e,n,r){(3&t[2])===n&&vN(t,e,n,r)}function hI(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function vN(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(n9(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function IN(t,e){Be(4,t,e);const n=ce(null);try{e.call(t)}finally{ce(n),Be(5,t,e)}}function n9(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,IN(a,o)):IN(a,o)}class kl{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function TN(t){return 3===t||4===t||6===t}function wN(t){return 64===t.charCodeAt(0)}function dc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||bN(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function bN(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function pI(t){return-1!==t}function Ol(t){return 32767&t}function Vl(t,e){let n=function s9(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let gI=!0;function yp(t){const e=gI;return gI=t,e}let a9=0;const Gr={};function vp(t,e){const n=AN(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,mI(r.data,t),mI(e,null),mI(r.blueprint,null));const i=Ip(t,e),o=t.injectorIndex;if(pI(i)){const s=Ol(i),a=Vl(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function mI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function AN(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ip(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=kN(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function _I(t,e,n){!function c9(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ml)&&(r=n[ml]),null==r&&(r=n[ml]=a9++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function DN(t,e,n){if(8&n||void 0!==t)return t;wv()}function RN(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=Bn(void 0);try{return i?i.get(e,r,8&n):UM(e,r,8&n)}finally{Bn(o)}}return DN(r,0,n)}function MN(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function f9(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!oo(s);){const a=PN(o,s,n,2|r,Gr);if(a!==Gr)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,Gr,r);if(d!==Gr)return d}c=kN(s),s=s[14]}o=c}return i}(t,e,n,r,Gr);if(s!==Gr)return s}const o=PN(t,e,n,r,Gr);if(o!==Gr)return o}return RN(e,n,r,i)}function PN(t,e,n,r,i){const o=function d9(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ml)?t[ml]:void 0;return"number"==typeof e?e>=0?255&e:h9:e}(n);if("function"==typeof o){if(!EP(e,t,r))return 1&r?DN(i,0,r):RN(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;wv()}finally{CP()}}else if("number"==typeof o){let s=null,a=AN(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?Ip(t,e):e[a+8],-1!==c&&xN(r,!1)?(s=e[1],a=Ol(c),e=Vl(c,e)):a=-1);-1!==a;){const d=e[1];if(NN(o,a,d.data)){const h=l9(a,e,n,s,r,u);if(h!==Gr)return h}c=e[a+8],-1!==c&&xN(r,e[1].data[a+8]===u)&&NN(o,a,e)?(s=d,a=Ol(c),e=Vl(c,e)):a=-1}}return i}function l9(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=Ep(a,s,n,null==r?mi(a)&&gI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?Ll(e,s,d,a,i):Gr}function Ep(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&er(g)&&g.type===n)return c}return null}function Ll(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof kl){const a=o;if(a.resolving)throw function De(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():de(t)}(s[n]),Tv();const c=yp(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Bn(a.injectImpl):null;EP(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function t9(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=gN(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&Bn(h),yp(c),a.resolving=!1,CP()}}return o}function NN(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function xN(t,e){return!(2&t||1&t&&e)}class wt{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return MN(this._tNode,this._lView,e,yl(r),n)}}function h9(){return new wt(le(),V())}function Kt(t){return Ti(()=>{const e=t.prototype.constructor,n=e[us]||yI(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[us]||yI(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yI(t){return Bf(t)?()=>{const e=yI(ge(t));return e&&e()}:ds(t)}function kN(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function Tp(t){return function u9(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(TN(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(le(),t)}function E9(){return hc(le(),V())}function hc(t,e){return new Ar(Vt(t,e))}let Ar=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=E9})();function UN(t){return t instanceof Ar?t.nativeElement:t}function T9(){return this._results[Symbol.iterator]()}class w9{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Un}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function gr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function BG(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=T9}function Fl(t){return!(128&~t.flags)}var bp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bp||{});const Cp=new Map;let S9=0;function EI(t){Cp.delete(t[19])}const wI="__ngContext__";function qn(t,e){mt(e)?(t[wI]=e[19],function D9(t){Cp.set(t[19],t)}(e)):t[wI]=e}function YN(t){return ZN(t[12])}function JN(t){return ZN(t[4])}function ZN(t){for(;null!==t&&!Mn(t);)t=t[4];return t}let bI;const jl=new H("",{providedIn:"root",factory:()=>Y9}),Y9="ng",o0=new H(""),s0=new H("",{providedIn:"platform",factory:()=>"unknown"}),a0=new H("",{providedIn:"root",factory:()=>function lo(){if(void 0!==bI)return bI;if(typeof document<"u")return document;throw new U(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),iW=new H("",{providedIn:"root",factory:()=>!1});function Mp(t){return!(32&~t.flags)}function N0(t,e){const n=t.contentQueries;if(null!==n){const r=ce(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];ip(n[i]),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function $I(t,e,n){ip(0);const r=ce(null);try{e(t,n)}finally{ce(r)}}function HI(t,e,n){if(ZM(e)){const r=ce(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ce(r)}}}var bi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(bi||{});let Fp;function U0(t){return function GI(){if(void 0===Fp&&(Fp=null,It.trustedTypes))try{Fp=It.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fp}()?.createScriptURL(t)||t}class j0{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xM})`}}function fo(t){return t instanceof j0?t.changingThisBreaksApplicationSecurity:t}function Hl(t,e){const n=function BW(t){return t instanceof j0&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${xM})`)}return n===e}const zW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jp(t,e,n){return t.createElement(e,n)}function ws(t,e,n,r,i){t.insertBefore(e,n,r,i)}function J0(t,e,n){t.appendChild(e,n)}function Z0(t,e,n,r,i){null!==r?ws(t,e,n,r,i):J0(t,e,n)}function zl(t,e,n,r){t.removeChild(null,e,n,r)}function ex(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function o9(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];wN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function o8(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function i8(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var yc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(yc||{});function tx(t){const e=Gl();return e?e.sanitize(yc.URL,t)||"":Hl(t,"URL")?fo(t):function WI(t){return(t=String(t)).match(zW)?t:"unsafe:"+t}(de(t))}function nx(t){const e=Gl();if(e)return U0(e.sanitize(yc.RESOURCE_URL,t)||"");if(Hl(t,"ResourceURL"))return U0(fo(t));throw new U(904,!1)}const h8=new Set(["embed","frame","iframe","media","script"]),f8=new Set(["base","link","script"]);function rx(t,e,n){return function p8(t,e){return"src"===e&&h8.has(t)||"href"===e&&f8.has(t)||"xlink:href"===e&&"script"===t?nx:tx}(e,n)(t)}function Gl(){const t=V();return t&&t[10].sanitizer}function Wr(t){return t instanceof Function?t():t}function C8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const cx="ng-template";function S8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==C8(e[i+1].toLowerCase(),n,0))return!0}else if(XI(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function XI(t){return 4===t.type&&t.value!==cx}function A8(t,e,n){return e===(4!==t.type||n?t.value:cx)}function D8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function P8(t){for(let e=0;e<t.length;e++)if(TN(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!A8(t,c,n)||""===c&&1===e.length){if(Dr(r))return!1;s=!0}}else if(8&r){if(null===i||!S8(t,i,c,n)){if(Dr(r))return!1;s=!0}}else{const u=e[++a],d=R8(c,i,XI(t),n);if(-1===d){if(Dr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Dr(r))return!1;s=!0}}}}else{if(!s&&!Dr(r)&&!Dr(c))return!1;if(s&&Dr(c))continue;s=!1,r=c|1&r}}return Dr(r)||s}function Dr(t){return!(1&t)}function R8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function N8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ux(t,e,n=!1){for(let r=0;r<e.length;r++)if(D8(t,e[r],n))return!0;return!1}function lx(t,e){return t?":not("+e.trim()+")":e}function k8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Dr(s)&&(e+=lx(o,i),i=""),r=s,o=o||!Dr(r);n++}return""!==i&&(e+=lx(o,i)),e}const $e={};function eE(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function L8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:$e);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function $p(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),iP(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function A9(){return S9++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function tE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Wl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function nE(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function K(t=1){hx(me(),V(),en()+t,!1)}function hx(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&_p(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&mp(e,o,n)}_s(n)}var Hp=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Hp||{});function Kl(t,e,n,r){const i=ce(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&Hp.SignalBased)&&(c=e[o][zt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):pN(e,c,o,r)}finally{ce(i)}}var bs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bs||{});function iE(t,e){return undefined(t,e)}const Cs=new Set;var oE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(oE||{});const Ql=new H(""),mx=new Set;function pn(t){mx.has(t)||(mx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const _x=!1,Lt=class q8 extends Un{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Uv(){return void 0!==FM()||null!=al()}()&&(this.destroyRef=O(Hr,{optional:!0})??void 0,this.pendingTasks=O(so,{optional:!0})??void 0)}emit(e){const n=ce(null);try{super.next(e)}finally{ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof An&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function yx(t){let e,n;function r(){t=Sl;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function vx(t){return queueMicrotask(()=>t()),()=>{t=Sl}}const sE="isAngularZone",zp=sE+"_ID";let z8=0;class Fe{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Lt(!1);onMicrotaskEmpty=new Lt(!1);onStable=new Lt(!1);onError=new Lt(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_x}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function K8(t){const e=()=>{!function W8(t){function e(){yx(()=>{t.callbackScheduled=!1,cE(t),t.isCheckStableRunning=!0,aE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),cE(t))}(t)},n=z8++;t._inner=t._inner.fork({name:"angular",properties:{[sE]:!0,[zp]:n,[zp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function Q8(t){return Tx(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return Ix(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Ex(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Ix(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function Y8(t){return Tx(t,"__scheduler_tick__")}(c)&&e(),Ex(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,cE(t),aE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(sE)}static assertInAngularZone(){if(!Fe.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(Fe.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,G8,Sl,Sl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const G8={};function aE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function Ix(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ex(t){t._nesting--,aE(t)}class uE{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Lt;onMicrotaskEmpty=new Lt;onStable=new Lt;onError=new Lt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function Tx(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let wx=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:t,providedIn:"root",factory:()=>new t})}return t})();const Gp=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Ax(t,e,n){const r=t.get(Gp);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Dx(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function dE(t,e){for(const[n,r]of e)Ax(t,r.animateFns)}(r,i)}function Ec(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;Mn(i)?c=i:mt(i)&&(u=!0,i=i[0]);const d=Wt(i);0===t&&null!==r?(Dx(a,r,o,n),null==s?J0(e,r,d):ws(e,r,d,s||null,!0)):1===t&&null!==r?(Dx(a,r,o,n),ws(e,r,d,s||null,!0)):2===t?Px(a,o,n,h=>{zl(e,d,u,h)}):3===t&&Px(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function u7(t,e,n,r,i,o,s){const a=r[7];a!==Wt(r)&&Ec(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];Qp(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function Mx(t,e){e[10].changeDetectionScheduler?.notify(9),Qp(t,e,e[11],2,null,null)}function hE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Yl(t,e){if(_i(e))return;const n=e[11];n.destroyNode&&Qp(t,e,n,3,null,null),function i7(t){let e=t[12];if(!e)return fE(t[1],t);for(;e;){let n=null;if(mt(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)mt(e)&&fE(e[1],e),e=e[3];null===e&&(e=t),mt(e)&&fE(e[1],e),n=e&&e[4]}e=n}}(e)}function fE(t,e){if(_i(e))return;const n=ce(null);try{e[2]&=-129,e[2]|=256,e[24]&&hl(e[24]),function a7(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof kl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Be(4,a,c);try{c.call(a)}finally{Be(5,a,c)}}else{Be(4,i,o);try{o.call(i)}finally{Be(5,i,o)}}}}}(t,e),function s7(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Mn(e[3])){r!==e[3]&&hE(r,e);const i=e[18];null!==i&&i.detachView(t)}EI(e)}finally{ce(n)}}function Px(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Cs.add(t),Ax(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function o7(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Cs.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Cs.delete(t),r(!1)},i)}function pE(t,e,n){return function Nx(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(mi(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===bi.None||i===bi.Emulated)return null}return Vt(r,n)}(t,e.parent,n)}let Ox=function kx(t,e,n){return 40&t.type?Vt(t,n):null};function mE(t,e,n,r){const i=pE(t,r,e),o=e[11],a=function xx(t,e,n){return Ox(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)Z0(o,i,n[c],a,!1);else Z0(o,i,n,a,!1)}function Ss(t,e){if(null!==e){const n=e.type;if(3&n)return Vt(e,t);if(4&n)return Kp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ss(t,r);{const i=t[e.index];return Mn(i)?Kp(-1,i):Wt(i)}}if(128&n)return Ss(t,e.next);if(32&n)return iE(e,t)()||Wt(t[e.index]);{const r=Lx(t,e);return null!==r?Array.isArray(r)?r[0]:Ss(yi(t[15]),r):Ss(t,e.next)}}return null}function Lx(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Kp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ss(r,i)}return e[7]}function _E(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&qn(Wt(c),r),n.flags|=2),!Mp(n))if(8&u)_E(t,e,n.child,r,i,o,!1),Ec(e,t,a,i,c,n,o,r);else if(32&u){const d=iE(n,r);let h;for(;h=d();)Ec(e,t,a,i,h,n,o,r);Ec(e,t,a,i,c,n,o,r)}else 16&u?Fx(t,e,r,n,i,o):Ec(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Qp(t,e,n,r,i,o){_E(n,r,t.firstChild,e,i,o,!1)}function Fx(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Ec(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];Fl(r)&&(u.flags|=128),_E(t,e,u,d,i,o,!0)}}function Ux(t,e,n,r,i){const o=en(),s=2&r;try{_s(-1),s&&e.length>27&&hx(t,e,27,!1),Be(s?2:0,i,n),n(r,i)}finally{_s(o),Be(s?3:1,i,n)}}function Yp(t,e,n){(function g7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;mi(n)&&function F8(t,e,n){const r=Vt(e,t),i=function dx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=eE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=nE(t,$p(t,i,null,tE(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||vp(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=Ll(e,t,s,n);qn(c,e),null!==o&&v7(0,s-r,c,a,0,o),er(a)&&(Pn(n.index,e)[8]=Ll(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function m7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function l6(){return ue.lFrame.currentDirectiveIndex}();try{_s(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];Qv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&_7(c,u)}}finally{_s(-1),Qv(s)}}(t,e,n)}function Tc(t,e,n=Vt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let jx=()=>null;function yE(t,e,n,r,i,o){eg(t,e[1],e,n,r)?mi(t)&&function Bx(t,e){const n=Pn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function p7(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),vE(t,e,n,r,i,o))}function vE(t,e,n,r,i,o){if(3&t.type){const s=Vt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function _7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function IE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];ux(e,o.selectors,!1)&&(r??=[],er(o)?r.unshift(o):r.push(o))}return r}function v7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)Kl(r,n,s[a],s[a+1])}function Zp(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,vi(t,!0);const c=2===t.type;return c?(ex(e[11],a,t),(0===function i6(){return ue.lFrame.elementDepthCount}()||Za(t))&&qn(a,e),function o6(){ue.lFrame.elementDepthCount++}()):qn(a,e),op()&&(!c||!Mp(t))&&mE(s,e,a,t),t}function Xp(t){let e=t;return pP()?function gP(){ue.lFrame.isParent=!1}():(e=e.parent,vi(e,!1)),e}function eg(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];Kl(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)Kl(e.data[c],n[c],r,i),a=!0;return a}function E7(t,e){const n=Pn(e,t),r=n[1];!function T7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),Be(18),tg(r,n,n[8]),Be(19,n[8])}function tg(t,e,n){Zv(e);try{const r=t.viewQuery;null!==r&&$I(1,r,n);const i=t.template;null!==i&&Ux(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&N0(t,e),t.staticViewQueries&&$I(2,t.viewQuery,n);const o=t.components;null!==o&&function w7(t,e){for(let n=0;n<e.length;n++)E7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Xv()}}function wc(t,e,n,r){const i=ce(null);try{const o=e.tView,c=$p(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),tg(o,c,n),c}finally{ce(i)}}function As(t,e){return!e||null===e.firstChild||Fl(t)}function Jl(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Wt(o)),Mn(o)&&b7(o,r);const s=n.type;if(8&s)Jl(t,e,n.child,r);else if(32&s){const a=iE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Lx(e,n);if(Array.isArray(a))r.push(...a);else{const c=yi(e[15]);Jl(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function b7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&Jl(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function qx(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let zx=[];const D7={...Ba,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{tc(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},M7={...Ba,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=yi(t.lView);for(;e&&!Gx(e[1]);)e=yi(e);e&&oP(e)},consumerOnSignalRead(){this.lView[24]=this}};function Gx(t){return 2!==t.type}function Wx(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function ng(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function N7(t,e){const n=yP();try{rp(!0),TE(t,e);let r=0;for(;tp(t);){if(100===r)throw new U(103,!1);r++,TE(t,1)}}finally{rp(n)}}(t,e)}finally{r.end?.()}}function Kx(t,e,n,r){if(_i(e))return;const i=e[2];Zv(e);let a=!0,c=null,u=null;Gx(t)?(u=function C7(t){return t[24]??function S7(t){const e=zx.pop()??Object.create(D7);return e.lView=t,e}(t)}(e),c=$a(u)):null===function tv(){return un}()?(a=!1,u=function R7(t){const e=t[24]??Object.create(M7);return e.lView=t,e}(e),c=$a(u)):e[24]&&(hl(e[24]),e[24]=null);try{iP(e),function vP(t){return ue.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Ux(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&mp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&_p(e,g,0,null),hI(e,0)}if(function x7(t){for(let e=YN(t);null!==e;e=JN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)oP(n[r])}}(e),Wx(e),Qx(e,0),null!==t.contentQueries&&N0(t,e),d){const g=t.contentCheckHooks;null!==g&&mp(e,g)}else{const g=t.contentHooks;null!==g&&_p(e,g,1),hI(e,1)}!function O7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)_s(~i);else{const o=i,s=n[++r],a=n[++r];u6(s,o);const c=e[o];Be(24,c),a(2,c),Be(25,c)}}}finally{_s(-1)}}(t,e);const h=t.components;null!==h&&Jx(e,h,0);const f=t.viewQuery;if(null!==f&&$I(2,f,r),d){const g=t.viewCheckHooks;null!==g&&mp(e,g)}else{const g=t.viewHooks;null!==g&&_p(e,g,2),hI(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}qx(e),e[2]&=-73}catch(d){throw tc(e),d}finally{null!==u&&(dl(u,c),a&&function A7(t){t.lView[24]!==t&&(t.lView=null,zx.push(t))}(u)),Xv()}}function Qx(t,e){for(let n=YN(t);null!==n;n=JN(n))for(let r=10;r<n.length;r++)Yx(n[r],e)}function k7(t,e,n){Be(18);const r=Pn(e,t);Yx(r,n),Be(19,r[8])}function Yx(t,e){Hv(t)&&TE(t,e)}function TE(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!kf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)Kx(r,t,r.template,t[8]);else if(8192&i){const a=ce(null);try{Wx(t),Qx(t,1);const c=r.components;null!==c&&Jx(t,c,1),qx(t)}finally{ce(a)}}}function Jx(t,e,n){for(let r=0;r<e.length;r++)k7(t,e[r],n)}function bc(t,e){const n=yP()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=yi(t);if(oo(t)&&!r)return t;t=r}return null}function Zx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Xx(t,e){const n=10+e;if(n<t.length)return t[n]}function Cc(t,e,n,r=!0){const i=e[1];if(function V7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],BM(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&ek(s,e);const a=e[18];null!==a&&a.insertView(t),qv(e),e[2]|=128}(i,e,t,n),r){const s=Kp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function r7(t,e,n,r,i,o){r[0]=i,r[5]=e,Qp(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function wE(t,e){const n=Zl(t,e);return void 0!==n&&Yl(n[1],n),n}function Zl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&hE(i,r),e>0&&(t[n-1][4]=r[4]);const o=Gf(t,10+e);!function Rx(t,e){Mx(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ek(t,e){const n=t[9],r=e[3];(mt(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Xl{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return Jl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return _i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Mn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Zl(e,r),Gf(n,r))}this._attachedToViewContainer=!1}Yl(this._lView[1],this._lView)}onDestroy(e){np(this._lView,e)}markForCheck(){bc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){qv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,ng(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=oo(this._lView),n=this._lView[16];null!==n&&!e&&hE(n,this._lView),Mx(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;const n=oo(this._lView),r=this._lView[16];null!==r&&!n&&ek(r,this._lView),qv(this._lView)}}let rg=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=L7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=wc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Xl(o)}})();function L7(){return ig(le(),V())}function ig(t,e){return 4&t.type?new rg(e,t,hc(t,e)):null}function Ds(t,e,n,r,i){let o=t.data[e];if(null===o)o=function AE(t,e,n,r,i){const o=fP(),s=pP(),c=t.data[e]=function G7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function lP(){return null!==ue.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function z7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function c6(){return ue.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function bl(){const t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return vi(o,!0),o}function vk(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;zl(e,r,!1),r=o,n++}}}let DK=class{},Ck=class{};class RK{resolveComponentFactory(e){throw new U(917,!1)}}let hg=class{static NULL=new RK};class kE{}let Ms=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function MK(){const t=V(),n=Pn(le().index,t);return(mt(n)?n:t)[11]}()})(),PK=(()=>{class t{static \u0275prov=ne({token:t,providedIn:"root",factory:()=>null})}return t})();const VE={};class Ac{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,VE,r);return i!==VE||n===VE?i:this.parentInjector.get(e,n,r)}}function pg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=mv(i,a):2==o&&(r=mv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function X(t,e=0){const n=V();return null===n?Te(t,e):MN(le(),n,ge(t),e)}function LK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Dk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),Mk(e,o)}}function Rk(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Mk(e,s)}}function Mk(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function Pk(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||XI(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function jK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ds(i.type)),s=new kl(o,er(i),X,null);t.blueprint[r]=s,n[r]=s,function BK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function $K(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Wl(t,n,i.hostVars,$e),i)}function HK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;er(e)&&(n[""]=t)}}function LE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=Ds(c,t,n,r,hn(u,s));return o&&function Ak(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function FK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&er(g)&&(c=!0,LK(t,n,f)),_I(vp(n,e),t,g.type)}!function qK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Wl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=dc(n.mergedAttrs,g.hostAttrs),jK(t,n,e,h,g),HK(h,g,i),null!==s&&s.has(g)){const[v,T]=s.get(g);n.directiveToIndex.set(g.type,[h,v+n.directiveStart,T+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function UK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);Rk(0,e,o,r),Rk(1,e,o,r),Pk(e,r,!0)}else Dk(0,e,i,r),Dk(1,e,i,r),Pk(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function VK(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new U(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,hn(u,a),i),h.mergedAttrs=dc(h.mergedAttrs,h.attrs),null!==h.attrs&&pg(h,h.attrs,!1),null!==h.mergedAttrs&&pg(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function FE(t,e){(function yN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),ZM(e)&&t.queries.elementEnd(e)}function it(t,e,n){return n!==$e&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function ld(t,e,n){return function r(i){bc(mi(t)?Pn(t.index,e):e,5);const s=e[8];let a=xk(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=xk(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function xk(t,e,n,r){const i=ce(null);try{return Be(6,e,n),!1!==n(r)}catch(o){return function EE(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(qr,null)}catch{r=null}r?.(e)}(t,o),!1}finally{Be(7,e,n),ce(i)}}function kk(t,e,n,r,i,o,s,a){const c=Za(t);let u=!1,d=null;if(!r&&c&&(d=function QK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=Vt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function KK(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||Ok(r?v=>r(Wt(v[t.index])):t.index,e,n,o,a,g,!1)}return u}function Ok(t,e,n,r,i,o,s){const a=e.firstCreatePass?cP(e):null,c=aP(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function _g(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);Ok(t.index,a,e,i,o,h,!0)}const go=Symbol("BINDING");class Vk extends hg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ue(e);return new jE(n,this.ngModule)}}class jE extends Ck{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function rQ(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&Hp.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function iQ(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function O8(t){return t.map(k8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Be(22);const a=ce(null);try{const c=this.componentDef,u=function uQ(t,e,n,r){const i=t?["ng-version","20.3.16"]:function V8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Dr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[go].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[go].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=Dn("function"==typeof d?d:d.type);c.push(f)}return eE(0,null,function lQ(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function oQ(t,e,n){let r=e instanceof Rn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new Ac(n,r):n}(c,i||this.ngModule,e),h=function sQ(t){const e=t.get(kE,null);if(null===e)throw new U(407,!1);return{rendererFactory:e,sanitizer:t.get(PK,null),changeDetectionScheduler:t.get(ys,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function d7(t,e,n,r){const o=r.get(iW,!1)||n===bi.ShadowDom,s=t.selectRootElement(e,o);return function h7(t){jx(t)}(s),s}(f,r,c.encapsulation,d):function aQ(t,e){const n=function cQ(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return jp(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(Lk)||o?.some(A=>"function"!=typeof A&&A.bindings.some(Lk)),v=$p(null,u,null,512|tE(c),null,null,h,f,d,null,null);v[27]=g,Zv(v);let T=null;try{const A=LE(27,v,2,"#host",()=>u.directiveRegistry,!0,0);ex(f,g,A),qn(g,v),Yp(u,v,A),HI(u,A,v),FE(u,A),void 0!==n&&function hQ(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),T=Pn(A.index,v),v[8]=T[8],tg(u,v,null)}catch(A){throw null!==T&&EI(T),EI(v),A}finally{Be(23),Xv()}return new dQ(this.componentType,v,!!_)}finally{ce(a)}}}function Lk(t){const e=t[go].kind;return"input"===e||"twoWay"===e}class dQ extends DK{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ec(n[1],27),this.location=hc(this._tNode,n),this.instance=Pn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Xl(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;eg(r,i[1],i,e,n),this.previousInputValues.set(e,n),bc(Pn(r.index,i),1)}get injector(){return new wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let yg=(()=>class t{static __NG_ELEMENT_ID__=fQ})();function fQ(){return jk(le(),V())}const pQ=yg,Fk=class extends pQ{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new wt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ip(this._hostTNode,this._hostLView);if(pI(e)){const n=Vl(e,this._hostLView),r=Ol(e);return new wt(n[1].data[r+8],n)}return new wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Uk(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,As(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function xl(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const T=n||{};u=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}const d=c?e:new jE(Ue(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(Rn,null);A&&(o=A)}Ue(d.componentType??{});const v=d.create(h,i,null,o,s,a);return this.insertImpl(v.hostView,u,As(this._hostTNode,null)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function n6(t){return Mn(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new Fk(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Cc(s,i,o,r),e.attachToViewContainerRef(),BM(BE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Uk(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Zl(this._lContainer,n);r&&(Gf(BE(this._lContainer),n),Yl(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Zl(this._lContainer,n);return r&&null!=Gf(BE(this._lContainer),n)?new Xl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Uk(t){return t[8]}function BE(t){return t[8]||(t[8]=[])}function jk(t,e){let n;const r=e[t.index];return Mn(r)?n=r:(n=Zx(r,e,null,t),e[t.index]=n,nE(e,n)),Bk(n,e,t,r),new Fk(n,t,e)}let Bk=function Hk(t,e,n,r){if(t[7])return;let i;i=8&n.type?Wt(r):function gQ(t,e){const n=t[11],r=n.createComment(""),i=Vt(e,t),o=n.parentNode(i);return ws(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class HE{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new HE(this.queryList)}setDirty(){this.queryList.setDirty()}}class qE{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new qE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==QE(e,n).matches&&this.queries[n].setDirty()}}class qk{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function TQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class zE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new zE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class GE{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new GE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,yQ(n,o)),this.matchTNodeWithReadOption(e,n,Ep(n,e,o,!1,!1))}else r===rg?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ep(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ar||i===yg||i===rg&&4&n.type)this.addMatch(n.index,-2);else{const o=Ep(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function yQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function IQ(t,e,n,r){return-1===n?function vQ(t,e){return 11&t.type?hc(t,e):4&t.type?ig(t,e):null}(e,t):-2===n?function EQ(t,e,n){return n===Ar?hc(e,t):n===rg?ig(e,t):n===yg?jk(e,t):void 0}(t,e,r):Ll(t,t[1],n,e)}function zk(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:IQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function WE(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=zk(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&WE(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];WE(g[1],g,u,r)}}}}}return r}function Kk(t,e,n,r){const i=me();if(i.firstCreatePass){const o=le();(function Qk(t,e,n){null===t.queries&&(t.queries=new zE),t.queries.track(new GE(e,n))})(i,new qk(e,n,r),o.index),function wQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function Gk(t,e,n){const r=new w9(!(4&~n));return function r6(t,e,n,r){const i=aP(e);i.push(n),t.firstCreatePass&&cP(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new qE).queries.push(new HE(r))-1}(i,V(),n)}function QE(t,e){return t.queries.getByIndex(e)}function Yk(t,e){const n=t[1],r=QE(n,e);return r.crossesNgTemplate?WE(n,t,e,[]):zk(n,t,r,e)}let Rc=class{},tO=class{};class ZE extends Rc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Vk(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=Br(e);this._bootstrapComponents=Wr(o.bootstrap),this._r3Injector=DP(e,n,[{provide:Rc,useValue:this},{provide:hg,useValue:this.componentFactoryResolver},...r],jn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class nO extends tO{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ZE(this.moduleType,e,[])}}class rO extends Rc{injector;componentFactoryResolver=new Vk(this);instance=null;constructor(e){super();const n=new hs([...e.providers,{provide:Rc,useValue:this},{provide:hg,useValue:this.componentFactoryResolver}],e.parent||Vv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function XE(t,e,n=null){return new rO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let xQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Pv(0,n.type),i=r.length>0?XE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:t,providedIn:"environment",factory:()=>new t(Te(Rn))})}return t})();function Qr(t){return Ti(()=>{const e=oO(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(xQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||bi.Emulated,styles:t.styles||tt,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&pn("NgStandalone"),sO(n);const r=t.dependencies;return n.directiveDefs=Ig(r,iO),n.pipeDefs=Ig(r,Cr),n.id=function FQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function iO(t){return Ue(t)||Dn(t)}function vg(t){return Ti(()=>({type:t.type,bootstrap:t.bootstrap||tt,declarations:t.declarations||tt,imports:t.imports||tt,exports:t.exports||tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function kQ(t,e){if(null==t)return jr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Hp.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function OQ(t){if(null==t)return jr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ce(t){return Ti(()=>{const e=oO(t);return sO(e),e})}function oO(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||jr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:kQ(t.inputs,e),outputs:OQ(t.outputs),debugInfo:null}}function sO(t){t.features?.forEach(e=>e(t))}function Ig(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function He(t){let e=function aO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(er(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=eT(t.inputs),s.declaredInputs=eT(t.declaredInputs),s.outputs=eT(t.outputs);const a=i.hostBindings;a&&HQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&BQ(t,c),u&&$Q(t,u),UQ(t,i),mG(t.outputs,i.outputs),er(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===He&&(n=!1)}}e=Object.getPrototypeOf(e)}!function jQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dc(i.hostAttrs,n=dc(n,i.hostAttrs))}}(r)}function UQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function eT(t){return t===jr?{}:t===tt?[]:t}function BQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function $Q(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function HQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function xs(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=Ds(e,h,4,s||null,a||null),null!=u){const g=hn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function hO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=dc(t.mergedAttrs,t.attrs);const d=t.tView=eE(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),vi(t,!1);const c=gO(n,e,t,r);op()&&mE(n,e,c,t),qn(c,e);const u=Zx(c,e,c,t);e[r+27]=u,nE(e,u)}(f,t,e,n,r,i,o,c),null!=u&&Tc(t,f,d),f}let gO=function mO(t,e,n,r){return Cl(!0),e[11].createComment("")};let RO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const qO=new H("");function Rg(t){return!!t&&"function"==typeof t.then}function oJ(t){return!!t&&"function"==typeof t.subscribe}const zO=new H("");let GO=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(zO,{optional:!0})??[];injector=O(rr);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=mr(this.injector,i);if(Rg(o))n.push(o);else if(oJ(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const WO=new H("");let Si=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(qr);afterRenderManager=O(wx);zonelessEnabled=O(xP);rootEffectScheduler=O(LP);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Un;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(so);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(je(n=>!n))}constructor(){O(Ql,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(Rn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=rr.NULL){return this._injector.get(Fe).run(()=>{Be(10);const s=n instanceof Ck;if(!this._injector.get(GO).done)throw new U(405,"");let c;c=s?n:this._injector.get(hg).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function aJ(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Rc),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(qO,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Mg(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),Be(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Be(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(oE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);const n=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(n),this.afterTick.next(),Be(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(kE,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)Be(14),this.synchronizeOnce(),Be(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||tp(i))&&(ng(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>tp(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Mg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(WO,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Mg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Yr(t,e,n,r){const i=V();return it(i,$n(),e)&&(me(),function y7(t,e,n,r,i,o){const s=Vt(t,e);!function Jp(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?de(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}($r(),i,t,e,n,r)),Yr}function Ug(){return V()[15][8]}typeof document<"u"&&document;class rZ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function ET(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function TT(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function a1(t,e,n,r,i){if(TT(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function c1(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class u1{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function ut(t,e,n,r,i,o,s,a){pn("NgControlFlow");const c=V(),u=me();return xs(c,u,t,e,n,r,i,hn(u.consts,o),256,s,a),wT}function wT(t,e,n,r,i,o,s,a){pn("NgControlFlow");const c=V(),u=me();return xs(c,u,t,e,n,r,i,hn(u.consts,o),512,s,a),wT}function lt(t,e){pn("NgControlFlow");const n=V(),r=$n(),i=n[r]!==$e?n[r]:-1,o=-1!==i?jg(n,27+i):void 0;if(it(n,r,t)){const a=ce(null);try{if(void 0!==o&&wE(o,0),-1!==t){const c=27+t,u=jg(n,c),d=CT(n[1],c),h=null;Cc(u,wc(n,d,e,{dehydratedView:h}),0,As(d,h))}}finally{ce(a)}}else if(void 0!==o){const a=Xx(o,0);void 0!==a&&(a[8]=e)}}class oZ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function l1(t){return t}function bT(t,e){return e}class sZ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function or(t,e,n,r,i,o,s,a,c,u,d,h,f){pn("NgControlFlow");const g=V(),_=me(),v=void 0!==c,T=V(),A=a?s.bind(T[15][8]):s,D=new sZ(v,A);T[27+t]=D,xs(g,_,t+1,e,n,r,i,hn(_.consts,o),256),v&&xs(g,_,t+2,c,u,d,h,hn(_.consts,f),512)}class aZ extends rZ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Cc(this.lContainer,n,e,As(this.templateTNode,r)),function cZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function t7(t,e){const n=t.get(Gp);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Cs.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function uZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function lZ(t,e){return Zl(t,e)}(this.lContainer,e)}create(e,n){const i=wc(this.hostLView,this.templateTNode,new oZ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){Yl(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function dZ(t,e){return Xx(t,e)}(this.lContainer,e)}}function sr(t){const e=ce(null),n=en();try{const r=V(),i=r[1],o=r[n],s=n+1,a=jg(r,s);if(void 0===o.liveCollection){const u=CT(i,s);o.liveCollection=new aZ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function iZ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=ET(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=ET(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const v=n(o,u),T=n(s,f),A=n(o,d);if(Object.is(A,T)){const D=n(c,g);Object.is(D,v)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new u1,i??=c1(t,o,s,n),TT(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(v,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)a1(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=ET(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new u1,i??=c1(t,o,s,n);const g=n(o,h);if(TT(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)a1(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=$n(),d=0===c.length;if(it(r,u,d)){const h=n+2,f=jg(r,h);if(d){const g=CT(i,h),_=null;Cc(f,wc(r,g,void 0,{dehydratedView:_}),0,As(g,_))}else i.firstUpdatePass&&function ug(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):vk(o,r);t[6]=i}(f),wE(f,0)}}}finally{ce(e)}}function jg(t,e){return t[e]}function CT(t,e){return ec(t,e)}function Ir(t,e,n){const r=V();return it(r,$n(),e)&&(me(),yE($r(),r,t,e,r[11],n)),Ir}function ST(t,e,n,r,i){eg(e,t,n,i?"class":"style",r)}function xe(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?LE(s,i,2,e,IE,function Kv(){return ue.bindingsEnabled}(),n,r):o.data[s];if(Zp(a,i,t,e,AT),Za(a)){const c=i[1];Yp(c,i,a),HI(c,a,i)}return null!=r&&Tc(i,a),xe}function Me(){const t=me(),n=Xp(le());return t.firstCreatePass&&FE(t,n),dP(n)&&hP(),uP(),null!=n.classesWithoutHost&&function r9(t){return!!(8&t.flags)}(n)&&ST(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function i9(t){return!!(16&t.flags)}(n)&&ST(t,n,V(),n.stylesWithoutHost,!1),Me}function Fc(t,e,n,r){return xe(t,e,n,r),Me(),Fc}function _e(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function Nk(t,e,n,r,i,o){const s=e.consts,c=Ds(e,t,n,r,hn(s,i));if(c.mergedAttrs=dc(c.mergedAttrs,c.attrs),null!=o){const u=hn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&pg(c,c.attrs,!1),null!==c.mergedAttrs&&pg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return Zp(a,i,t,e,AT),null!=r&&Tc(i,a),_e}function he(){return dP(Xp(le()))&&hP(),uP(),he}let AT=(t,e,n,r,i)=>(Cl(!0),jp(e[11],r,function _6(){return ue.lFrame.currentNamespace}()));function yo(){return V()}function _d(t,e,n){const r=V();return it(r,$n(),e)&&(me(),vE($r(),r,t,e,r[11],n)),_d}const Hg="en-US";let y1=Hg;function Ct(t,e,n){const r=V(),i=me(),o=le();return function xT(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=ld(r,e,o),kk(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=ld(r,e,o),_g(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=ld(r,e,o),_g(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),Ct}function vo(t,e,n){const r=V(),i=me(),o=le();return(3&o.type||n)&&kk(o,i,r,n,r[11],t,e,ld(o,r,e)),vo}function Ee(t=1){return function h6(t){return(ue.lFrame.contextLView=function sP(t,e){for(;t>0;)e=e[14],t--;return e}(t,ue.lFrame.contextLView))[8]}(t)}function Wg(t,e){return t<<17|e<<2}function Bs(t){return t>>17&32767}function kT(t){return 2|t}function jc(t){return(131068&t)>>2}function OT(t,e){return-131069&t|e<<2}function VT(t){return 1|t}function j1(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Bs(i):jc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];yX(t[s],e)&&(a=!0,t[s+1]=r?VT(u):kT(u)),s=r?Bs(u):jc(u)}a&&(t[n+1]=r?kT(i):VT(i))}function yX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Il(t,e)>=0}function Io(t,e){return function K1(t,e,n,r){const i=V(),o=me(),s=Ei(2);o.firstUpdatePass&&function J1(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[en()],s=function Y1(t,e){return e>=t.expandoStartIndex}(t,n);(function tV(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function RX(t,e,n,r){const i=function Yv(t){const e=ue.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=bd(n=LT(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=LT(i,t,e,n,r),null===o){let c=function MX(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==jc(r))return t[Bs(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=LT(null,t,e,c[1],r),c=bd(c,e.attrs,r),function PX(t,e,n,r){t[Bs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function NX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=bd(r,t[o].hostAttrs,n);return bd(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function mX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Bs(s),c=jc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||Il(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=Bs(t[a+1]);t[r+1]=Wg(f,a),0!==f&&(t[f+1]=OT(t[f+1],r)),t[a+1]=function pX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Wg(a,0),0!==a&&(t[a+1]=OT(t[a+1],r)),a=r;else t[r+1]=Wg(c,0),0===a?a=r:t[c+1]=OT(t[c+1],r),c=r;u&&(t[r+1]=kT(t[r+1])),j1(t,d,r,!0),j1(t,d,r,!1),function _X(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Il(o,e)>=0&&(n[r+1]=VT(n[r+1]))}(e,d,t,r,o),s=Wg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==$e&&it(i,s,e)&&function X1(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function gX(t){return!(1&~t)}(u)?eV(c,e,n,i,jc(u),s):void 0;Kg(d)||(Kg(o)||function fX(t){return!(2&~t)}(u)&&(o=eV(c,null,n,i,a,s)),function l7(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:bs.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bs.Important),t.setStyle(n,r,i,o))}}(r,s,Xa(en(),n),i,o))}(o,o.data[en()],i,i[11],t,i[s+1]=function VX(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=jn(fo(t)))),t}(e,n),r,s)}(t,e,null,!0),Io}function LT(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=bd(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function bd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Kf(t,s,!!n||e[++o]))}return void 0===t?null:t}function eV(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===$e&&(f=h?tt:void 0);let g=h?Av(f,r):d===r?f:void 0;if(u&&!Kg(g)&&(g=Av(c,r)),Kg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Bs(_):jc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Av(c,r))}return a}function Kg(t){return void 0!==t}function se(t,e=""){const n=V(),r=me(),i=t+27,o=r.firstCreatePass?Ds(r,i,1,e,null):r.data[i],s=nV(r,n,o,e,t);n[i]=s,op()&&mE(r,n,s,o),vi(o,!1)}let nV=(t,e,n,r,i)=>(Cl(!0),function JI(t,e){return t.createText(e)}(e[11],r));function oV(t,e,n,r,i,o=""){const a=function Ns(t,e,n,r){const i=it(t,e,n);return it(t,e+1,r)||i}(t,function Ii(){return ue.lFrame.bindingIndex}(),n,i);return Ei(2),a?e+de(n)+r+de(i)+o:$e}function gn(t){return Rr("",t),gn}function Rr(t,e,n){const r=V(),i=function iV(t,e,n,r=""){return it(t,$n(),n)?e+de(n)+r:$e}(r,t,e,n);return i!==$e&&Ai(r,en(),i),Rr}function $c(t,e,n,r,i){const o=V(),s=oV(o,t,e,n,r,i);return s!==$e&&Ai(o,en(),s),$c}function Ai(t,e,n){const r=Xa(e,t);!function Y0(t,e,n){t.setValue(e,n)}(t[11],r,n)}function FT(t,e,n,r,i){if(t=ge(t),Array.isArray(t))for(let o=0;o<t.length;o++)FT(t[o],e,n,r,i);else{const o=me(),s=V(),a=le();let c=fi(t)?t:ge(t.provide);const u=YM(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(fi(t)||!t.multi){const g=new kl(u,i,X,null),_=jT(c,e,i?d:d+f,h);-1===_?(_I(vp(a,s),o,c),UT(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=jT(c,e,d+f,h),_=jT(c,e,d,d+f),T=_>=0&&n[_];if(i&&!T||!i&&!(g>=0&&n[g])){_I(vp(a,s),o,c);const A=function tee(t,e,n,r,i){const s=new kl(t,n,X,null);return s.multi=[],s.index=e,s.componentProviders=0,wV(s,i,r&&!n),s}(i?eee:XX,n.length,i,r,u);!i&&T&&(n[_].providerFactory=A),UT(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else UT(o,t,g>-1?g:_,wV(n[i?_:g],u,!i&&r));!i&&r&&T&&n[_].componentProviders++}}}function UT(t,e,n,r){const i=fi(e),o=function KM(t){return!!t.useClass}(e);if(i||o){const c=(o?ge(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function wV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jT(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XX(t,e,n,r,i){return BT(this.multi,[])}function eee(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Ll(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),BT(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],BT(o,s);return s}function BT(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function dt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function ZX(t,e,n){const r=me();if(r.firstCreatePass){const i=er(t);FT(n,r.data,r.blueprint,i,!0),FT(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function $T(t,e,n){const r=function Nn(){const t=ue.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===$e?function Kr(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function ud(t,e){return t[e]}(i,r)}class Qee{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Yee=(()=>{class t{compileModuleSync(n){return new nO(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Wr(Br(n).declarations).reduce((s,a)=>{const c=Ue(a);return c&&s.push(new jE(c)),s},[]);return new Qee(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zee=(()=>{class t{zone=O(Fe);changeDetectionScheduler=O(ys);applicationRef=O(Si);applicationErrorHandler=O(qr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Fe({...KT(),scheduleInRootZone:n}),[{provide:Fe,useFactory:t},{provide:eo,multi:!0,useFactory:()=>{const r=O(Zee,{optional:!0});return()=>r.initialize()}},{provide:eo,multi:!0,useFactory:()=>{const r=O(ete);return()=>{r.initialize()}}},!0===e?{provide:kP,useValue:!0}:[],{provide:OP,useValue:n??_x},{provide:qr,useFactory:()=>{const r=O(Fe),i=O(Rn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(rc),o.handleError(s))})}}}]}function KT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let ete=(()=>{class t{subscription=new An;initialized=!1;zone=O(Fe);pendingTasks=O(so);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YT=(()=>{class t{applicationErrorHandler=O(qr);appRef=O(Si);taskService=O(so);ngZone=O(Fe);zonelessEnabled=O(xP);tracing=O(Ql,{optional:!0});disableScheduling=O(kP,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new An;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(OP,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof uE||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?vx:yx;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const QV=new H("",{providedIn:"root",factory:()=>O(QV,{optional:!0,skipSelf:!0})||function tte(){return typeof $localize<"u"&&$localize.locale||Hg}()}),om=Symbol("InputSignalNode#UNSET"),PL={...ov,transformFn:void 0,applyValueToInputSignal(t,e){Vf(t,e)}};function NL(t,e){const n=Object.create(PL);function r(){if(ul(n),n.value===om)throw new U(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[zt]=n,r}class zne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Tp(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function xL(t,e){return NL(t,e)}new H("").__NG_ELEMENT_ID__=t=>{const e=le();if(null===e)throw new U(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new U(204,!1)};const lw=(xL.required=function Wne(t){return NL(om,t)},xL),sm=new H(""),Zne=new H("");function Md(t){return!t.moduleRef}let Wc=null;let cm=(()=>class t{static __NG_ELEMENT_ID__=ire})();function ire(t){return function ore(t,e,n){if(mi(t)&&!n){const r=Pn(t.index,e);return new Xl(r,r)}return 175&t.type?new Xl(e[15],e):null}(le(),V(),!(16&~t))}function pre(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Be(8);try{const o=i?.injector??function rre(t=[]){if(Wc)return Wc;const e=function $L(t=[],e){return rr.create({name:e,providers:[{provide:kv,useValue:"platform"},{provide:sm,useValue:new Set([()=>Wc=null])},...t]})}(t);return Wc=e,function sJ(){!function X3(t){TM=t}(()=>{throw new U(600,"")})}(),function HL(t){const e=t.get(o0,null);mr(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[WT({}),{provide:ys,useExisting:YT},MP,...n||[]];return function FL(t){const e=Md(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Fe);return n.run(()=>{Md(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(qr);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Md(t)){const o=()=>e.destroy(),s=t.platformInjector.get(sm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(sm);s.add(o),t.moduleRef.onDestroy(()=>{Mg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function ere(t,e,n){try{const r=n();return Rg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(so),s=o.add(),a=e.get(GO);return a.runInitializers(),a.donePromise.then(()=>{if(function EZ(t){"string"==typeof t&&(y1=t.toLowerCase().replace(/_/g,"-"))}(e.get(QV,Hg)||Hg),!e.get(Zne,!0))return Md(t)?e.get(Si):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Md(t)){const d=e.get(Si);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new rO({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Be(9)}}function Kc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class fF{_doc;constructor(e){this._doc=e}manager}let fw=(()=>{class t extends fF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Te(Sr))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const pw=new H("");let pF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof fw));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof fw);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Te(pw),Te(Fe))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const gw="ng-app-id";function gF(t){for(const e of t)e.remove()}function mF(t,e){const n=e.createElement("style");return n.textContent=t,n}function mw(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let _F=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Bre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${gw}="${e}"],link[${gw}="${e}"]`);if(i)for(const o of i)o.removeAttribute(gw),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,mF);r?.forEach(i=>this.addUsage(i,this.external,mw))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(gF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])gF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,mF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,mw(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Te(Sr),Te(jl),Te(a0,8),Te(s0))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const _w={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yw=/%COMP%/g,Wre=new H("",{providedIn:"root",factory:()=>!0});function vF(t,e){return e.map(n=>n.replace(yw,t))}let IF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new vw(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof TF?i.applyToHost(n):i instanceof Iw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case bi.Emulated:o=new TF(c,u,r,this.appId,d,s,a,h,f);break;case bi.ShadowDom:return new Jre(c,u,n,r,s,a,this.nonce,h,f);default:o=new Iw(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Te(pF),Te(_F),Te(jl),Te(Wre),Te(Sr),Te(Fe),Te(a0),Te(Ql,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();class vw{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(_w[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(EF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(EF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=_w[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=_w[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(bs.DashCase|bs.Important)?e.style.setProperty(n,r,i&bs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&bs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=ao().getGlobalEventTarget(this.doc,e)))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function EF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Jre extends vw{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=vF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=mw(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Iw extends vw{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?vF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Cs.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class TF extends Iw{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function Kre(t){return"_ngcontent-%COMP%".replace(yw,t)}(d),this.hostAttr=function Qre(t){return"_nghost-%COMP%".replace(yw,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class Ew extends w6{supportsDOMEvents=!0;static makeCurrent(){!function T6(t){FP??=t}(new Ew)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Xre(){return Nd=Nd||document.head.querySelector("base"),Nd?Nd.getAttribute("href"):null}();return null==n?null:function eie(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Nd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function M6(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Nd=null,nie=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})();const wF=["alt","control","meta","shift"],rie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iie={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function bF(t){return{appProviders:[...hie,...t?.providers??[]],platformProviders:lie}}const lie=[{provide:s0,useValue:"browser"},{provide:o0,useValue:function aie(){Ew.makeCurrent()},multi:!0},{provide:Sr,useFactory:function uie(){return function Q9(t){bI=t}(document),document}}],hie=[{provide:kv,useValue:"root"},{provide:rc,useFactory:function cie(){return new rc}},{provide:pw,useClass:fw,multi:!0,deps:[Sr]},{provide:pw,useClass:(()=>{class t extends fF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ao().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),wF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=rie[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),wF.forEach(s=>{s!==i&&(0,iie[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(Te(Sr))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Sr]},IF,_F,pF,{provide:kE,useExisting:IF},{provide:class P6{},useClass:nie},[]],_ie={...Ba,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function ht(t){return function mie(t){const e=ce(null);try{return t()}finally{ce(e)}}(t)}function yt(t,e){return function Y3(t,e){const n=Object.create(J3);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(ll(n),ul(n),n.value===Zi)throw n.error;return n.value};return r[zt]=n,r}(t,e?.equal)}class Cie{[zt];constructor(e){this[zt]=e}destroy(){this[zt].destroy()}}const RF={..._ie,cleanupFns:void 0,zone:null,onDestroyFn:Sl,run(){const t=rp(!1);try{!function yie(t){if(t.dirty=!1,t.version>0&&!kf(t))return;t.version++;const e=$a(t);try{t.cleanup(),t.fn()}finally{dl(t,e)}}(this)}finally{rp(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=ce(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ce(t)}}},Sie={...RF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){hl(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},Aie={...RF,consumerMarkedDirty(){this.view[2]|=8192,tc(this.view),this.notifier.notify(13)},destroy(){hl(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function MF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function fm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function wo(t){return this instanceof wo?(this.v=t,this):new wo(t)}function FF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Aw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const UF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function jF(t){return rt(t?.then)}function BF(t){return rt(t[gv])}function $F(t){return Symbol.asyncIterator&&rt(t?.[Symbol.asyncIterator])}function HF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const qF=function loe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zF(t){return rt(t?.[qF])}function GF(t){return function LF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(v){return new Promise(function(T,A){o.push([g,v,T,A])>1||c(g,v)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof wo?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(v){f(o[0][3],v)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield wo(n.read());if(i)return yield wo(void 0);yield yield wo(r)}}finally{n.releaseLock()}})}function WF(t){return rt(t?.getReader)}function Jr(t){if(t instanceof kt)return t;if(null!=t){if(BF(t))return function doe(t){return new kt(e=>{const n=t[gv]();if(rt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(UF(t))return function hoe(t){return new kt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(jF(t))return function foe(t){return new kt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,DM)})}(t);if($F(t))return KF(t);if(zF(t))return function poe(t){return new kt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(WF(t))return function goe(t){return KF(GF(t))}(t)}throw HF(t)}function KF(t){return new kt(e=>{(function moe(t,e){var n,r,i,o;return function OF(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=FF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Di(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function QF(t,e=0){return tn((n,r)=>{n.subscribe($t(r,i=>Di(r,t,()=>r.next(i),e),()=>Di(r,t,()=>r.complete(),e),i=>Di(r,t,()=>r.error(i),e)))})}function YF(t,e=0){return tn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JF(t,e){if(!t)throw new Error("Iterable cannot be null");return new kt(n=>{Di(n,e,()=>{const r=t[Symbol.asyncIterator]();Di(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function mn(t,e){return e?function Toe(t,e){if(null!=t){if(BF(t))return function _oe(t,e){return Jr(t).pipe(YF(e),QF(e))}(t,e);if(UF(t))return function voe(t,e){return new kt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(jF(t))return function yoe(t,e){return Jr(t).pipe(YF(e),QF(e))}(t,e);if($F(t))return JF(t,e);if(zF(t))return function Ioe(t,e){return new kt(n=>{let r;return Di(n,e,()=>{r=t[qF](),Di(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>rt(r?.return)&&r.return()})}(t,e);if(WF(t))return function Eoe(t,e){return JF(GF(t),e)}(t,e)}throw HF(t)}(t,e):Jr(t)}function Rw(t){return t[t.length-1]}function ZF(t){return rt(Rw(t))?t.pop():void 0}function pm(t){return function woe(t){return t&&rt(t.schedule)}(Rw(t))?t.pop():void 0}function pe(...t){return mn(t,pm(t))}const gm=sv(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:boe}=Array,{getPrototypeOf:Coe,prototype:Soe,keys:Aoe}=Object;function XF(t){if(1===t.length){const e=t[0];if(boe(e))return{args:e,keys:null};if(function Doe(t){return t&&"object"==typeof t&&Coe(t)===Soe}(e)){const n=Aoe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Roe}=Array;function e2(t){return je(e=>function Moe(t,e){return Roe(e)?t(...e):t(e)}(t,e))}function t2(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function n2(...t){const e=pm(t),n=ZF(t),{args:r,keys:i}=XF(t);if(0===r.length)return mn([],e);const o=new kt(function Poe(t,e,n=as){return r=>{r2(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)r2(e,()=>{const u=mn(t[c],e);let d=!1;u.subscribe($t(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>t2(i,s):as));return n?o.pipe(e2(n)):o}function r2(t,e,n){t?Di(n,t,e):e()}function xn(t,e,n=1/0){return rt(e)?xn((r,i)=>je((o,s)=>e(r,o,i,s))(Jr(t(r,i))),n):("number"==typeof e&&(n=e),tn((r,i)=>function Noe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=v=>u<r?_(v):c.push(v),_=v=>{o&&e.next(v),u++;let T=!1;Jr(n(v,d++)).subscribe($t(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<r;){const A=c.shift();s?Di(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe($t(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function Mw(t=1/0){return xn(as,t)}function Pw(...t){return function xoe(){return Mw(1)}()(mn(t,pm(t)))}function Nw(t){return new kt(e=>{Jr(t()).subscribe(e)})}function mm(t,e){const n=rt(t)?t:()=>t,r=i=>i.error(n());return new kt(e?i=>e.schedule(r,0,i):r)}const Mr=new kt(t=>t.complete());function xw(){return tn((t,e)=>{let n=null;t._refCount++;const r=$t(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class i2 extends kt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,tN(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new An;const n=this.getSubject();e.add(this.source.subscribe($t(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=An.EMPTY)}return e}refCount(){return xw()(this)}}function Er(t,e){return tn((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe($t(r,c=>{i?.unsubscribe();let u=0;const d=o++;Jr(t(c,d)).subscribe(i=$t(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qc(t){return t<=0?()=>Mr:tn((e,n)=>{let r=0;e.subscribe($t(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bo(t,e){return tn((n,r)=>{let i=0;n.subscribe($t(r,o=>t.call(e,o,i++)&&r.next(o)))})}function _m(t){return tn((e,n)=>{let r=!1;e.subscribe($t(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function o2(t=Loe){return tn((e,n)=>{let r=!1;e.subscribe($t(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Loe(){return new gm}function Ws(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bo((i,o)=>t(i,o,r)):as,Qc(1),n?_m(e):o2(()=>new gm))}function ym(t,e){return rt(e)?xn(t,e,1):xn(t,1)}function _n(t,e,n){const r=rt(t)||e||n?{next:t,error:e,complete:n}:t;return r?tn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe($t(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):as}function Yc(t){return tn((e,n)=>{let o,r=null,i=!1;r=e.subscribe($t(n,void 0,void 0,s=>{o=Jr(t(s,Yc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function kw(t){return t<=0?()=>Mr:tn((e,n)=>{let r=[];e.subscribe($t(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ow(t){return tn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function s2(t){return tn((e,n)=>{Jr(t).subscribe($t(n,()=>n.complete(),uv)),!n.closed&&e.subscribe(n)})}let Yoe=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Te(Sr))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ye="primary",Od=Symbol("RouteTitle");class rse{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Jc(t){return new rse(t)}function ise(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Zr(t,e){const n=t?Vw(t):void 0,r=e?Vw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!g2(t[i],e[i]))return!1;return!0}function Vw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function g2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function m2(t){return t.length>0?t[t.length-1]:null}function Ri(t){return function Fie(t){return!!t&&(t instanceof kt||rt(t.lift)&&rt(t.subscribe))}(t)?t:Rg(t)?mn(Promise.resolve(t)):pe(t)}const sse={exact:function v2(t,e,n){if(!Qs(t.segments,e.segments)||!vm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!v2(t.children[r],e.children[r],n))return!1;return!0},subset:I2},_2={exact:function ase(t,e){return Zr(t,e)},subset:function cse(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>g2(t[n],e[n]))},ignored:()=>!0};function y2(t,e,n){return sse[n.paths](t.root,e.root,n.matrixParams)&&_2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function I2(t,e,n){return E2(t,e,e.segments,n)}function E2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Qs(i,n)||e.hasChildren()||!vm(i,n,r))}if(t.segments.length===n.length){if(!Qs(t.segments,n)||!vm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!I2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Qs(t.segments,i)&&vm(t.segments,i,r)&&t.children[ye])&&E2(t.children[ye],e,o,r)}}function vm(t,e,n){return e.every((r,i)=>_2[n](t[i].parameters,r.parameters))}class Ks{root;queryParams;fragment;_queryParamMap;constructor(e=new Qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jc(this.queryParams),this._queryParamMap}toString(){return dse.serialize(this)}}class Qe{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tm(this)}}class Vd{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Jc(this.parameters),this._parameterMap}toString(){return b2(this)}}function Qs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Im=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>new Em,providedIn:"root"})}return t})();class Em{parse(e){const n=new Tse(e);return new Ks(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ld(e.root,!0)}`,r=function pse(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${wm(n)}=${wm(i)}`).join("&"):`${wm(n)}=${wm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function hse(t){return encodeURI(t)}(e.fragment)}`:""}`}}const dse=new Em;function Tm(t){return t.segments.map(e=>b2(e)).join("/")}function Ld(t,e){if(!t.hasChildren())return Tm(t);if(e){const n=t.children[ye]?Ld(t.children[ye],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ye&&r.push(`${i}:${Ld(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function lse(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ye&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ye&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===ye?[Ld(t.children[ye],!1)]:[`${i}:${Ld(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ye]?`${Tm(t)}/${n[0]}`:`${Tm(t)}/(${n.join("//")})`}}function T2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wm(t){return T2(t).replace(/%3B/gi,";")}function Lw(t){return T2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bm(t){return decodeURIComponent(t)}function w2(t){return bm(t.replace(/\+/g,"%20"))}function b2(t){return`${Lw(t.path)}${function fse(t){return Object.entries(t).map(([e,n])=>`;${Lw(e)}=${Lw(n)}`).join("")}(t.parameters)}`}const gse=/^[^\/()?;#]+/;function Fw(t){const e=t.match(gse);return e?e[0]:""}const mse=/^[^\/()?;=#]+/,yse=/^[^=?&#]+/,Ise=/^[^&#]+/;class Tse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ye]=new Qe(e,n)),r}parseSegment(){const e=Fw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Vd(bm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function _se(t){const e=t.match(mse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Fw(this.remaining);i&&(r=i,this.capture(r))}e[bm(n)]=bm(r)}parseQueryParam(e){const n=function vse(t){const e=t.match(yse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Ese(t){const e=t.match(Ise);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=w2(n),o=w2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fw(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ye);const s=this.parseChildren();n[o??ye]=1===Object.keys(s).length&&s[ye]?s[ye]:new Qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function C2(t){return t.segments.length>0?new Qe([],{[ye]:t}):t}function S2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=S2(i);if(r===ye&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function wse(t){if(1===t.numberOfChildren&&t.children[ye]){const e=t.children[ye];return new Qe(t.segments.concat(e.segments),e.children)}return t}(new Qe(t.segments,e))}function Ys(t){return t instanceof Ks}function A2(t){let e;const i=C2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new Qe(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function D2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Uw(i,i,i,n,r);const o=function Cse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new M2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new M2(n,e,r)}(e);if(o.toRoot())return Uw(i,i,new Qe([],{}),n,r);const s=function Sse(t,e,n){if(t.isAbsolute)return new Sm(e,!0,0);if(!n)return new Sm(e,!1,NaN);if(null===n.parent)return new Sm(n,!0,0);const r=Cm(t.commands[0])?0:1;return function Ase(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Sm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Ud(s.segmentGroup,s.index,o.commands):P2(s.segmentGroup,s.index,o.commands);return Uw(i,s.segmentGroup,a,n,r)}function Cm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fd(t){return"object"==typeof t&&null!=t&&t.outlets}function Uw(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:R2(t,e,n);const a=C2(S2(s));return new Ks(a,o,i)}function R2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:R2(o,e,n)}),new Qe(t.segments,r)}class M2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Cm(r[0]))throw new U(4003,!1);const i=r.find(Fd);if(i&&i!==m2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function P2(t,e,n){if(t??=new Qe([],{}),0===t.segments.length&&t.hasChildren())return Ud(t,e,n);const r=function Rse(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Fd(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!x2(c,u,s))return o;r+=2}else{if(!x2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Qe(t.segments.slice(0,r.pathIndex),{});return o.children[ye]=new Qe(t.segments.slice(r.pathIndex),t.children),Ud(o,0,i)}return r.match&&0===i.length?new Qe(t.segments,{}):r.match&&!t.hasChildren()?jw(t,e,n):r.match?Ud(t,0,i):jw(t,e,n)}function Ud(t,e,n){if(0===n.length)return new Qe(t.segments,{});{const r=function Dse(t){return Fd(t[0])?t[0].outlets:{[ye]:t}}(n),i={};if(Object.keys(r).some(o=>o!==ye)&&t.children[ye]&&1===t.numberOfChildren&&0===t.children[ye].segments.length){const o=Ud(t.children[ye],e,n);return new Qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=P2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Qe(t.segments,i)}}function jw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Fd(o)){const c=Mse(o.outlets);return new Qe(r,c)}if(0===i&&Cm(n[0])){r.push(new Vd(t.segments[e].path,N2(n[0]))),i++;continue}const s=Fd(o)?o.outlets[ye]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Cm(a)?(r.push(new Vd(s,N2(a))),i+=2):(r.push(new Vd(s,{})),i++)}return new Qe(r,{})}function Mse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=jw(new Qe([],{}),0,r))}),e}function N2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function x2(t,e,n){return t==n.path&&Zr(e,n.parameters)}const Am="imperative";var Pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Pe||{});class Xr{id;url;constructor(e,n){this.id=e,this.url=n}}class Bw extends Xr{type=Pe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class So extends Xr{urlAfterRedirects;type=Pe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Kn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Kn||{}),$w=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($w||{});class Js extends Xr{reason;code;type=Pe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jd extends Xr{reason;code;type=Pe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class Hw extends Xr{error;target;type=Pe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class k2 extends Xr{urlAfterRedirects;state;type=Pe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pse extends Xr{urlAfterRedirects;state;type=Pe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nse extends Xr{urlAfterRedirects;state;shouldActivate;type=Pe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xse extends Xr{urlAfterRedirects;state;type=Pe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kse extends Xr{urlAfterRedirects;state;type=Pe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ose{route;type=Pe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vse{route;type=Pe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lse{snapshot;type=Pe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fse{snapshot;type=Pe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Use{snapshot;type=Pe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jse{snapshot;type=Pe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qw{}class Dm{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Pr(t){return t.outlet||ye}function Zc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Wse{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bd(this.rootInjector)}}let Bd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Wse(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Te(Rn))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class O2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=zw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=zw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Gw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Gw(e,this._root).map(n=>n.value)}}function zw(t,e){if(t===e.value)return e;for(const n of e.children){const r=zw(t,n);if(r)return r}return null}function Gw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Gw(t,n);if(r.length)return r.unshift(e),r}return[]}class Nr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Xc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class V2 extends O2{snapshot;constructor(e,n){super(e),this.snapshot=n,Ww(this,e)}toString(){return this.snapshot.toString()}}function L2(t){const e=function Kse(t){const o=new Mm([],{},{},"",{},ye,t,null,{});return new F2("",new Nr(o,[]))}(t),n=new pr([new Vd("",{})]),r=new pr({}),i=new pr({}),o=new pr({}),s=new pr(""),a=new Mi(n,r,o,s,i,ye,t,e.root);return a.snapshot=e.root,new V2(new Nr(a,[]),e)}class Mi{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(je(u=>u[Od]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(je(e=>Jc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(je(e=>Jc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rm(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&j2(i)&&(r.resolve[Od]=i.title),r}class Mm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Od]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class F2 extends O2{url;constructor(e,n){super(n),this.url=e,Ww(this,n)}toString(){return U2(this._root)}}function Ww(t,e){e.value._routerState=t,e.children.forEach(n=>Ww(t,n))}function U2(t){const e=t.children.length>0?` { ${t.children.map(U2).join(", ")} } `:"";return`${t.value}${e}`}function Kw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Zr(e.params,n.params)||t.paramsSubject.next(n.params),function ose(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Zr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Qw(t,e){const n=Zr(t.params,e.params)&&function use(t,e){return Qs(t,e)&&t.every((n,r)=>Zr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Qw(t.parent,e.parent))}function j2(t){return"string"==typeof t.title||null===t.title}const Qse=new H("");let Yw=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ye;activateEvents=new Lt;deactivateEvents=new Lt;attachEvents=new Lt;detachEvents=new Lt;routerOutletData=lw();parentContexts=O(Bd);location=O(yg);changeDetector=O(cm);inputBinder=O(Jw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Yse(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ce({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wi]})}return t})();class Yse{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Mi?this.route:e===Bd?this.childContexts:e===Qse?this.outletData:this.parent.get(e,n)}}const Jw=new H("");let B2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Qr({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&Fc(0,"router-outlet")},dependencies:[Yw],encapsulation:2})}return t})();function Zw(t){const e=t.children&&t.children.map(Zw),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ye&&(n.component=B2),n}function $d(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Zse(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return $d(t,r,i);return $d(t,r)})}(t,e,n);return new Nr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$d(t,a)),s}}const r=function Xse(t){return new Mi(new pr(t.url),new pr(t.params),new pr(t.queryParams),new pr(t.fragment),new pr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>$d(t,o));return new Nr(r,i)}}class Xw{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const $2="ngNavigationCancelingError";function Pm(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ys(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=H2(!1,Kn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function H2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[$2]=!0,n.cancellationCode=e,n}function q2(t){return!!t&&t[$2]}class nae{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Kw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Xc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Xc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Xc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Xc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Fse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(Kw(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class z2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Nm{component;route;constructor(e,n){this.component=e,this.route=n}}function rae(t,e,n){const r=t._root;return Hd(r,e?e._root:null,n,[r.value])}function eu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function wG(t){return null!==$f(t)}(t)?e.get(t):t:r}function Hd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Xc(e);return t.children.forEach(s=>{(function oae(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function sae(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Qs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qs(t.url,e.url)||!Zr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qw(t,e)||!Zr(t.queryParams,e.queryParams);default:return!Qw(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new z2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Hd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Nm(a.outlet.component,s))}else s&&qd(e,a,i),i.canActivateChecks.push(new z2(r)),Hd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qd(a,n.getContext(s),i)),i}function qd(t,e,n){const r=Xc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{qd(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Nm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zd(t){return"function"==typeof t}function G2(t){return t instanceof gm||"EmptyError"===t?.name}const xm=Symbol("INITIAL_VALUE");function tu(){return Er(t=>n2(t.map(e=>e.pipe(Qc(1),function Voe(...t){const e=pm(t);return tn((n,r)=>{(e?Pw(t,n,e):Pw(t,n)).subscribe(r)})}(xm)))).pipe(je(e=>{for(const n of e)if(!0!==n){if(n===xm)return xm;if(!1===n||fae(n))return n}return!0}),bo(e=>e!==xm),Qc(1)))}function fae(t){return Ys(t)||t instanceof Xw}function W2(t){return function dG(...t){return RM(t)}(_n(e=>{if("boolean"!=typeof e)throw Pm(0,e)}),je(e=>!0===e))}class eb{segmentGroup;constructor(e){this.segmentGroup=e||null}}class tb extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function nu(t){return mm(new eb(t))}function bae(t){return mm(new U(4e3,!1))}class Sae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pe(r);if(i.numberOfChildren>1||!i.children[ye])return bae();i=i.children[ye]}}applyRedirectCommands(e,n,r,i,o){return function Aae(t,e,n){if("string"==typeof t)return pe(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return Ri(mr(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(je(s=>{if(s instanceof Ks)throw new tb(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new tb(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Ks(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Qe(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const nb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Dae(t,e,n,r,i){const o=K2(t,e,n);return o.matched?(r=function $se(t,e){return t.providers&&!t._injector&&(t._injector=XE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function wae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?pe(i.map(s=>{const a=eu(s,t);return Ri(function hae(t){return t&&zd(t.canMatch)}(a)?a.canMatch(e,n):mr(t,()=>a(e,n)))})).pipe(tu(),W2()):pe(!0)}(r,e,n).pipe(je(s=>!0===s?o:{...nb}))):pe(o)}function K2(t,e,n){if("**"===e.path)return function Rae(t){return{matched:!0,parameters:t.length>0?m2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...nb}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ise)(n,t,e);if(!i)return{...nb};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Q2(t,e,n,r){return n.length>0&&function Nae(t,e,n){return n.some(r=>km(t,e,r)&&Pr(r)!==ye)}(t,n,r)?{segmentGroup:new Qe(e,Pae(r,new Qe(n,t.children))),slicedSegments:[]}:0===n.length&&function xae(t,e,n){return n.some(r=>km(t,e,r))}(t,n,r)?{segmentGroup:new Qe(t.segments,Mae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Qe(t.segments,t.children),slicedSegments:n}}function Mae(t,e,n,r){const i={};for(const o of n)if(km(t,e,o)&&!r[Pr(o)]){const s=new Qe([],{});i[Pr(o)]=s}return{...r,...i}}function Pae(t,e){const n={};n[ye]=e;for(const r of t)if(""===r.path&&Pr(r)!==ye){const i=new Qe([],{});n[Pr(r)]=i}return n}function km(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Oae{}class Fae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Sae(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){const e=Q2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(je(({children:n,rootSnapshot:r})=>{const i=new Nr(r,n),o=new F2("",i),s=function bse(t,e,n=null,r=null){return D2(A2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new Mm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ye,n).pipe(je(r=>({children:r,rootSnapshot:n})),Yc(r=>{if(r instanceof tb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof eb?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(je(s=>s instanceof Nr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return mn(o).pipe(ym(s=>{const a=r.children[s],c=function Gse(t,e){const n=t.filter(r=>Pr(r)===e);return n.push(...t.filter(r=>Pr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function Uoe(t,e){return tn(function Foe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe($t(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),_m(null),function joe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bo((i,o)=>t(i,o,r)):as,kw(1),n?_m(e):o2(()=>new gm))}(),xn(s=>{if(null===s)return nu(r);const a=Y2(s);return function Uae(t){t.sort((e,n)=>e.value.outlet===ye?-1:n.value.outlet===ye?1:e.value.outlet.localeCompare(n.value.outlet))}(a),pe(a)}))}processSegment(e,n,r,i,o,s,a){return mn(n).pipe(ym(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Yc(u=>{if(u instanceof eb)return pe(null);throw u}))),Ws(c=>!!c),Yc(c=>{if(G2(c))return function kae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?pe(new Oae):nu(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Pr(r)===s||s!==ye&&km(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):nu(i):nu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=K2(n,i,o);if(!c)return nu(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new Mm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,J2(i),Pr(i),i.component??i._loadedComponent??null,i,Z2(i)),_=Rm(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(Er(T=>this.applyRedirects.lineralizeSegments(i,T)),xn(T=>this.processSegment(e,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=Dae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(Er(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Er(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new Mm(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,J2(r),Pr(r),r.component??r._loadedComponent??null,r,Z2(r)),v=Rm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);const{segmentGroup:T,slicedSegments:A}=Q2(n,f,g,u);if(0===A.length&&T.hasChildren())return this.processChildren(d,u,T,_).pipe(je(F=>new Nr(_,F)));if(0===u.length&&0===A.length)return pe(new Nr(_,[]));const D=Pr(r)===o;return this.processSegment(d,u,T,A,D?ye:o,!0,_).pipe(je(F=>new Nr(_,F instanceof Nr?[F]:[])))})):nu(n)))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):function Tae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?pe(!0):pe(i.map(s=>{const a=eu(s,t);return Ri(function cae(t){return t&&zd(t.canLoad)}(a)?a.canLoad(e,n):mr(t,()=>a(e,n)))})).pipe(tu(),W2())}(e,n,r).pipe(xn(i=>i?this.configLoader.loadChildren(e,n).pipe(_n(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Cae(){return mm(H2(!1,Kn.GuardRejected))}())):pe({routes:[],injector:e})}}function jae(t){const e=t.value.routeConfig;return e&&""===e.path}function Y2(t){const e=[],n=new Set;for(const r of t){if(!jae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=Y2(r.children);e.push(new Nr(r.value,i))}return e.filter(r=>!n.has(r))}function J2(t){return t.data||{}}function Z2(t){return t.resolve||{}}function X2(t){const e=t.children.map(n=>X2(n)).flat();return[t,...e]}function rb(t){return Er(e=>{const n=t(e);return n?mn(n).pipe(je(()=>e)):pe(e)})}let eU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ye);return r}getResolvedTitleForRoute(n){return n.data[Od]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(Gae),providedIn:"root"})}return t})(),Gae=(()=>{class t extends eU{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Te(Yoe))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Om=new H("",{providedIn:"root",factory:()=>({})}),ib=new H("");let tU=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Yee);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Ri(mr(n,()=>r.loadComponent())).pipe(je(nU),Er(rU),_n(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ow(()=>{this.componentLoaders.delete(r)})),o=new i2(i,()=>new Un).pipe(xw());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Wae(t,e,n,r){return Ri(mr(n,()=>t.loadChildren())).pipe(je(nU),Er(rU),xn(i=>i instanceof tO||Array.isArray(i)?pe(i):mn(e.compileModuleAsync(i))),je(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(ib,[],{optional:!0,self:!0}).flat()),{routes:s.map(Zw),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Ow(()=>{this.childrenLoaders.delete(r)})),s=new i2(o,()=>new Un).pipe(xw());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nU(t){return function Kae(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function rU(t){return pe(t)}let ob=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(Qae),providedIn:"root"})}return t})(),Qae=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Yae=new H(""),Xae=new H("");let ece=(()=>{class t{currentNavigation=_t(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Un;transitionAbortWithErrorSubject=new Un;configLoader=O(tU);environmentInjector=O(Rn);destroyRef=O(Hr);urlSerializer=O(Im);rootContexts=O(Bd);location=O(Al);inputBindingEnabled=null!==O(Jw,{optional:!0});titleStrategy=O(eU);options=O(Om,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(ob);createViewTransition=O(Yae,{optional:!0});navigationErrorHandler=O(Xae,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new Vse(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Ose(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;ht(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new pr(null),this.transitions.pipe(bo(r=>null!==r),Er(r=>{let i=!1;return pe(r).pipe(Er(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Kn.SupersededByNewNavigation),Mr;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new jd(o.id,this.urlSerializer.serialize(o.rawUrl),"",$w.IgnoredSameUrlNavigation)),o.resolve(!1),Mr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return pe(o).pipe(Er(c=>(this.events.next(new Bw(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Mr:Promise.resolve(c))),function Bae(t,e,n,r,i,o){return xn(s=>function Vae(t,e,n,r,i,o,s="emptyOnly"){return new Fae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(je(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),_n(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new k2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new Bw(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=L2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(v=>(v.finalUrl=u,v)),pe(r)}return this.events.next(new jd(o.id,this.urlSerializer.serialize(o.extractedUrl),"",$w.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Mr}),_n(o=>{const s=new Pse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),je(o=>(this.currentTransition=r={...o,guards:rae(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function pae(t,e){return xn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?pe({...n,guardsResult:!0}):function gae(t,e,n,r){return mn(t).pipe(xn(i=>function Eae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?pe(o.map(a=>{const c=Zc(e)??i,u=eu(a,c);return Ri(function dae(t){return t&&zd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):mr(c,()=>u(t,e,n,r))).pipe(Ws())})).pipe(tu()):pe(!0)}(i.component,i.route,n,e,r)),Ws(i=>!0!==i,!0))}(s,r,i,t).pipe(xn(a=>a&&function aae(t){return"boolean"==typeof t}(a)?function mae(t,e,n,r){return mn(e).pipe(ym(i=>Pw(function yae(t,e){return null!==t&&e&&e(new Lse(t)),pe(!0)}(i.route.parent,r),function _ae(t,e){return null!==t&&e&&e(new Use(t)),pe(!0)}(i.route,r),function Iae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function iae(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Nw(()=>pe(s.guards.map(c=>{const u=Zc(s.node)??n,d=eu(c,u);return Ri(function lae(t){return t&&zd(t.canActivateChild)}(d)?d.canActivateChild(r,t):mr(u,()=>d(r,t))).pipe(Ws())})).pipe(tu())));return pe(o).pipe(tu())}(t,i.path,n),function vae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pe(!0);const i=r.map(o=>Nw(()=>{const s=Zc(e)??n,a=eu(o,s);return Ri(function uae(t){return t&&zd(t.canActivate)}(a)?a.canActivate(e,t):mr(s,()=>a(e,t))).pipe(Ws())}));return pe(i).pipe(tu())}(t,i.route,n))),Ws(i=>!0!==i,!0))}(r,o,t,e):pe(a)),je(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),_n(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Pm(0,o.guardsResult);const s=new Nse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),bo(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",Kn.GuardRejected),!1)),rb(o=>{if(0!==o.guards.canActivateChecks.length)return pe(o).pipe(_n(s=>{const a=new xse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Er(s=>{let a=!1;return pe(s).pipe(function $ae(t,e){return xn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of X2(c))s.add(u);let a=0;return mn(s).pipe(ym(c=>o.has(c)?function Hae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!j2(i)&&(o[Od]=i.title),Nw(()=>(t.data=Rm(t,t.parent,n).resolve,function qae(t,e,n,r){const i=Vw(t);if(0===i.length)return pe({});const o={};return mn(i).pipe(xn(s=>function zae(t,e,n,r){const i=Zc(e)??r,o=eu(t,i);return Ri(o.resolve?o.resolve(e,n):mr(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Ws(),_n(a=>{if(a instanceof Xw)throw Pm(new Em,a);o[s]=a}))),kw(1),je(()=>o),Yc(s=>G2(s)?Mr:mm(s)))}(o,t,e,r).pipe(je(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=Rm(c,c.parent,t).resolve,pe(void 0))),_n(()=>a++),kw(1),xn(c=>a===s.size?pe(n):Mr))})}(this.paramsInheritanceStrategy,this.environmentInjector),_n({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Kn.NoDataFromResolver)}}))}),_n(s=>{const a=new kse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),rb(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=Zc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(_n(d=>{a.component=d}),je(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return n2(s(o.targetSnapshot.root)).pipe(_m(null),Qc(1))}),rb(()=>this.afterPreactivation()),Er(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?mn(a).pipe(je(()=>r)):pe(r)}),je(o=>{const s=function Jse(t,e,n){const r=$d(t,e._root,n?n._root:void 0);return new V2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),_n(()=>{this.events.next(new qw)}),((t,e,n,r)=>je(i=>(new nae(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Qc(1),s2(new kt(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(bo(()=>!i&&!r.targetRouterState),_n(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Kn.Aborted)}))),_n({next:o=>{i=!0,this.lastSuccessfulNavigation=ht(this.currentNavigation),this.events.next(new So(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),s2(this.transitionAbortWithErrorSubject.pipe(_n(o=>{throw o}))),Ow(()=>{i||this.cancelNavigationTransition(r,"",Kn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Yc(o=>{if(this.destroyed)return r.resolve(!1),Mr;if(i=!0,q2(o))this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function eae(t){return q2(t)&&Ys(t.url)}(o)?this.events.next(new Dm(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new Hw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=mr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof Xw))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Pm(0,a);this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Dm(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Mr}))}))}cancelNavigationTransition(n,r,i){const o=new Js(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ht(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tce(t){return t!==Am}let nce=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(ice),providedIn:"root"})}return t})();class rce{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let ice=(()=>{class t extends rce{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iU=(()=>{class t{urlSerializer=O(Im);options=O(Om,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Al);urlHandlingStrategy=O(ob);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ks;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Ks?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=L2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:()=>O(oce),providedIn:"root"})}return t})(),oce=(()=>{class t extends iU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Bw?this.updateStateMemento():n instanceof jd?this.commitTransition(r):n instanceof k2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof qw?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Js&&n.code!==Kn.SupersededByNewNavigation&&n.code!==Kn.Redirect?this.restoreHistory(r):n instanceof Hw?this.restoreHistory(r,!0):n instanceof So&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ace={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let on=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(RO);stateManager=O(iU);options=O(Om,{optional:!0})||{};pendingTasks=O(so);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(ece);urlSerializer=O(Im);location=O(Al);urlHandlingStrategy=O(ob);injector=O(Rn);_events=new Un;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(nce);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(ib,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Jw,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new An;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=ht(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Js&&r.code!==Kn.Redirect&&r.code!==Kn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof So)this.navigated=!0;else if(r instanceof Dm){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||tce(i.source),...s};this.scheduleNavigation(a,Am,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Bse(t){return!(t instanceof qw||t instanceof Dm)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Am,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(qr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ht(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Zw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=A2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return D2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ys(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Am,null,r)}navigate(n,r={skipLocationChange:!1}){return function uce(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new U(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Ur(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...ace}:!1===r?{...cce}:r,Ys(n))return y2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return y2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function sce(t,e){t.events.pipe(bo(n=>n instanceof So||n instanceof Js||n instanceof Hw||n instanceof jd),je(n=>n instanceof So||n instanceof jd?0:n instanceof Js&&(n.code===Kn.Redirect||n.code===Kn.SupersededByNewNavigation)?2:1),bo(n=>2!==n),Qc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vm=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=_t(null);get href(){return ht(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Un;applicationErrorHandler=O(qr);options=O(Om,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new zne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof So&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ys(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:Ys(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(X(on),X(Mi),Tp("tabindex"),X(Ms),X(Ar),X(sp))};static \u0275dir=Ce({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&Ct("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Yr("href",i.reactiveHref(),rx)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Kc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Kc],replaceUrl:[2,"replaceUrl","replaceUrl",Kc],routerLink:"routerLink"},features:[wi]})}return t})(),fU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Lt;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof So&&this.update()})}ngAfterContentInit(){pe(this.links.changes,pe(null)).pipe(Mw()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=mn(n).pipe(Mw()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function Cce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(X(on),X(Ar),X(Ms),X(cm),X(Vm,8))};static \u0275dir=Ce({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function L1(t,e,n,r){Kk(t,e,n,r)}(o,Vm,5),2&r){let s;(function F1(t){const e=V(),n=me(),r=Jv();ip(r+1);const i=QE(n,r);if(t.dirty&&function t6(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=Yk(e,r);t.reset(o,UN),t.notifyOnChanges()}return!0}return!1})(s=function U1(){return function KE(t,e){return t[18].queries[e].queryList}(V(),Jv())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[wi]})}return t})();const cb=new H("");function gU(t){return t.routerState.root}function mU(){const t=O(rr);return e=>{const n=t.get(Si);if(e!==n.components[0])return;const r=t.get(on),i=t.get(_U);1===t.get(ub)&&r.initialNavigation(),t.get(yU,null,{optional:!0})?.setUpPreloading(),t.get(cb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const _U=new H("",{factory:()=>new Un}),ub=new H("",{providedIn:"root",factory:()=>1}),yU=new H(""),IU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},EU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new Vce;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lm=function(t){return function(t){const e=IU(t);return EU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Gd=function(t){try{return EU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const Fm=()=>{try{return function wU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},bU=t=>{var e,n;return null===(n=null===(e=Fm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},CU=()=>{var t;return null===(t=Fm())||void 0===t?void 0:t.config},SU=t=>{var e;return null===(e=Fm())||void 0===e?void 0:e[`_${t}`]};class AU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function ru(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function DU(t){return db.apply(this,arguments)}function db(){return(db=I(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const Wd={};let RU=!1;function MU(t,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||Wd[t]===e||Wd[t]||RU)return;function n(f){return`__firebase__banner__${f}`}Wd[t]=e;const r="__firebase__banner",o=function qce(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wd))Wd[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function zce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),T=document.getElementById(v)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const F=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(F),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(T,v);const W=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{RU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),F.append(D,_,T,W),document.body.appendChild(F)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function Mt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function NU(){return!function PU(){var t;const e=null===(t=Fm())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kd.prototype.create)}}class Kd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function eue(t,e){return t.replace(tue,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Pi(i,`${this.serviceName}: ${s} (${i}).`,r)}}const tue=/\{\$([^}]+)}/g;function Ni(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(VU(o)&&VU(s)){if(!Ni(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function VU(t){return null!==t&&"object"==typeof t}function Qd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class iue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function oue(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=hb),void 0===i.error&&(i.error=hb),void 0===i.complete&&(i.complete=hb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hb(){}function Ft(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xs="[DEFAULT]";class due{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function fue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return I(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Xs?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new due(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const pb=[];var Se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Se||{});const LU={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},gue=Se.INFO,mue={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},_ue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=mue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class gb{constructor(e){this.name=e,this._logLevel=gue,this._logHandler=_ue,this._userLogHandler=null,pb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?LU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}let FU,UU;const jU=new WeakMap,mb=new WeakMap,BU=new WeakMap,_b=new WeakMap,yb=new WeakMap;let vb={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return mb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||BU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Cue(t){return"function"==typeof t?function bue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Iue(){return UU||(UU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Ib(this),e),Ao(jU.get(this))}:function(...e){return Ao(t.apply(Ib(this),e))}:function(e,...n){const r=t.call(Ib(this),e,...n);return BU.set(r,e.sort?e.sort():[e]),Ao(r)}}(t):(t instanceof IDBTransaction&&function Tue(t){if(mb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});mb.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function vue(){return FU||(FU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,vb):t)}function Ao(t){if(t instanceof IDBRequest)return function Eue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ao(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&jU.set(n,t)}).catch(()=>{}),yb.set(e,t),e}(t);if(_b.has(t))return _b.get(t);const e=Cue(t);return e!==t&&(_b.set(t,e),yb.set(e,t)),e}const Ib=t=>yb.get(t),Due=["get","getKey","getAll","getAllKeys","count"],Rue=["put","add","delete","clear"],Eb=new Map;function $U(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Eb.get(e))return Eb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Rue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Due.includes(n))return;const o=function(){var s=I(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Eb.set(e,o),o}!function wue(t){vb=t(vb)}(t=>({...t,get:(e,n,r)=>$U(e,n)||t.get(e,n,r),has:(e,n)=>!!$U(e,n)||t.has(e,n)}));class Oue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Vue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const jm="@firebase/app",xi=new gb("@firebase/app"),Lue="@firebase/app-compat",Fue="@firebase/analytics-compat",Uue="@firebase/analytics",jue="@firebase/app-check-compat",Bue="@firebase/app-check",$ue="@firebase/auth",Hue="@firebase/auth-compat",que="@firebase/database",zue="@firebase/data-connect",Gue="@firebase/database-compat",Wue="@firebase/functions",Kue="@firebase/functions-compat",Que="@firebase/installations",Yue="@firebase/installations-compat",Jue="@firebase/messaging",Zue="@firebase/messaging-compat",Xue="@firebase/performance",ele="@firebase/performance-compat",tle="@firebase/remote-config",nle="@firebase/remote-config-compat",rle="@firebase/storage",ile="@firebase/storage-compat",ole="@firebase/firestore",sle="@firebase/ai",ale="@firebase/firestore-compat",cle="firebase",Bm="[DEFAULT]",lle={[jm]:"fire-core",[Lue]:"fire-core-compat",[Uue]:"fire-analytics",[Fue]:"fire-analytics-compat",[Bue]:"fire-app-check",[jue]:"fire-app-check-compat",[$ue]:"fire-auth",[Hue]:"fire-auth-compat",[que]:"fire-rtdb",[zue]:"fire-data-connect",[Gue]:"fire-rtdb-compat",[Wue]:"fire-fn",[Kue]:"fire-fn-compat",[Que]:"fire-iid",[Yue]:"fire-iid-compat",[Jue]:"fire-fcm",[Zue]:"fire-fcm-compat",[Xue]:"fire-perf",[ele]:"fire-perf-compat",[tle]:"fire-rc",[nle]:"fire-rc-compat",[rle]:"fire-gcs",[ile]:"fire-gcs-compat",[ole]:"fire-fst",[ale]:"fire-fst-compat",[sle]:"fire-vertex","fire-js":"fire-js",[cle]:"fire-js-all"},ea=new Map,Yd=new Map,Jd=new Map;function HU(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function iu(t){const e=t.name;if(Jd.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Jd.set(e,t);for(const n of ea.values())HU(n,t);for(const n of Yd.values())HU(n,t);return!0}function $m(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return null!=t&&void 0!==t.settings}const Tr=new Kd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const ou="11.10.0";function GU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw Tr.create("bad-app-name",{appName:String(i)});if(n||(n=CU()),!n)throw Tr.create("no-options");const o=ea.get(i);if(o){if(Ni(n,o.options)&&Ni(r,o.config))return o;throw Tr.create("duplicate-app",{appName:i})}const s=new pue(i);for(const c of Jd.values())s.addComponent(c);const a=new qU(n,r,s);return ea.set(i,a),a}function WU(t=Bm){const e=ea.get(t);if(!e&&t===Bm&&CU())return GU();if(!e)throw Tr.create("no-app",{appName:t});return e}function ki(t,e,n){var r;let i=null!==(r=lle[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void xi.warn(a.join(" "))}iu(new Zs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Zd="firebase-heartbeat-store";let bb=null;function KU(){return bb||(bb=function Aue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Ao(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ao(s.result),c.oldVersion,c.newVersion,Ao(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Zd)}catch(n){console.warn(n)}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),bb}function Cb(){return(Cb=I(function*(t){try{const n=(yield KU()).transaction(Zd),r=yield n.objectStore(Zd).get(YU(t));return yield n.done,r}catch(e){if(e instanceof Pi)xi.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e?.message});xi.warn(n.message)}}})).apply(this,arguments)}function QU(t,e){return Sb.apply(this,arguments)}function Sb(){return(Sb=I(function*(t,e){try{const r=(yield KU()).transaction(Zd,"readwrite");yield r.objectStore(Zd).put(e,YU(t)),yield r.done}catch(n){if(n instanceof Pi)xi.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n?.message});xi.warn(r.message)}}})).apply(this,arguments)}function YU(t){return`${t.name}!${t.options.appId}`}class Ile{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return I(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=JU();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function wle(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){xi.warn(i)}})()}getHeartbeatsHeader(){var e=this;return I(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=JU(),{heartbeatsToSend:i,unsentEntries:o}=function Ele(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZU(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ZU(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Lm(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return xi.warn(r),""}})()}}function JU(){return(new Date).toISOString().substring(0,10)}class Tle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(function*(){return!!function kU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Zce(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return I(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function _le(t){return Cb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return QU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return I(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return QU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function ZU(t){return Lm(JSON.stringify({version:2,heartbeats:t})).length}!function ble(t){iu(new Zs("platform-logger",e=>new Oue(e),"PRIVATE")),iu(new Zs("heartbeat",e=>new Ile(e),"PRIVATE")),ki(jm,"0.13.2",t),ki(jm,"0.13.2","esm2017"),ki("fire-js","")}(""),ki("firebase","11.10.0","app");var Do,tj,XU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ej={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,w){w||(w=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(R=0;16>R;++R)S[R]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(w=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=(w=(R=(x=(E=w+(b<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^w&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(w^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(w^x&(E^w))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=w+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(R^x&(w^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(w^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(w^R&(E^w))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^w&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=w+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(w^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(w^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^w^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^w)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=w+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(R^(w|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(w|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(w|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~w))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=w+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=w+((b=E+(R^(w|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(w^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(E^(x|~w))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var w=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(w[R]=x,S=!1)}this.g=w}(function e(C,E){function w(){}w.prototype=E.prototype,C.D=E.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),Qi=2;Qi<arguments.length;Qi++)b[Qi-2]=arguments[Qi];return E.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var w=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=w;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var w=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&w,w/=256;for(this.u(C),C=Array(16),E=w=0;4>E;++E)for(var S=0;32>S;S+=8)C[w++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return T(u(-C));for(var E=[],w=1,S=0;C>=w;S++)E[S]=C/w|0,w*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function v(C){return-1==C.h}function T(C){for(var E=C.g.length,w=[],S=0;S<E;S++)w[S]=~C.g[S];return new s(w,~C.h).add(f)}function A(C,E){return C.add(T(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function F(C,E){this.g=C,this.h=E}function W(C,E){if(_(E))throw Error("division by zero");if(_(C))return new F(h,h);if(v(C))return E=W(T(C),E),new F(T(E.g),T(E.h));if(v(E))return E=W(C,T(E)),new F(T(E.g),E.h);if(30<C.g.length){if(v(C)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var w=f,S=E;0>=S.l(C);)w=Y(w),S=Y(S);var R=te(w,1),x=te(S,1);for(S=te(S,2),w=te(w,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(w),x=b),S=te(S,1),w=te(w,1)}return E=A(C,R.j(E)),new F(R,E)}for(R=h;0<=C.l(E);){for(w=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(w)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(w)).j(E);v(b)||0<b.l(C);)b=(x=u(w-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,b)}return new F(R,C)}function Y(C){for(var E=C.g.length+1,w=[],S=0;S<E;S++)w[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(w,C.h)}function te(C,E){var w=E>>5;E%=32;for(var S=C.g.length-w,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+w)>>>E|C.i(x+w+1)<<32-E:C.i(x+w);return new s(R,C.h)}(t=s.prototype).m=function(){if(v(this))return-T(this).m();for(var C=0,E=1,w=0;w<this.g.length;w++){var S=this.i(w);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(v(this))return"-"+T(this).toString(C);for(var E=u(Math.pow(C,6)),w=this,S="";;){var R=W(w,E).g,x=((0<(w=A(w,R.j(E))).g.length?w.g[0]:w.h)>>>0).toString(C);if(_(w=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return v(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return v(this)?T(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,w[R]=(b&=65535)<<16|(x&=65535)}return new s(w,-2147483648&w[w.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(v(this))return v(C)?T(this).j(T(C)):T(T(this).j(C));if(v(C))return T(this.j(T(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,w=[],S=0;S<2*E;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),Qi=C.i(R)>>>16,pf=65535&C.i(R);w[2*S+2*R]+=b*pf,D(w,2*S+2*R),w[2*S+2*R+1]+=x*pf,D(w,2*S+2*R+1),w[2*S+2*R+1]+=b*Qi,D(w,2*S+2*R+1),w[2*S+2*R+2]+=x*Qi,D(w,2*S+2*R+2)}for(S=0;S<E;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=E;S<2*E;S++)w[S]=0;return new s(w,0)},t.A=function(C){return W(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)&C.i(S);return new s(w,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)|C.i(S);return new s(w,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],S=0;S<E;S++)w[S]=this.i(S)^C.i(S);return new s(w,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tj=ej.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return T(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(b))):S=(S=S.j(w)).add(u(b))}return S},Do=ej.Integer=s}).apply(typeof XU<"u"?XU:typeof self<"u"?self:typeof window<"u"?window:{});var nj,Xd,rj,qm,Ab,ij,oj,sj,Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Hm&&Hm];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var M=l[y];if(!(M in m))break e;m=m[M]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,M={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),l.apply(p,M)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,M,k){for(var G=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)G[Xe-2]=arguments[Xe];return p.prototype[M].apply(y,G)}}function v(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function T(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const M=l.length||0,k=y.length||0;l.length=M+k;for(let G=0;G<k;G++)l[M+G]=y[G]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Y=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function te(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let M=1;M<arguments.length;M++){for(m in y=arguments[M],y)l[m]=y[m];for(let k=0;k<w.length;k++)m=w[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=WR;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var pf=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new uIe,l=>l.reset());class uIe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let gf,mf=!1,WR=new class Qi{constructor(){this.h=this.g=null}add(p,m){const y=pf.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Hz=()=>{const l=a.Promise.resolve(void 0);gf=()=>{l.then(lIe)}};var lIe=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=pf;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}mf=!1};function es(){this.s=this.s,this.C=this.C}function wn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}es.prototype.s=!1,es.prototype.ma=function(){this.s||(this.s=!0,this.N())},es.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},wn.prototype.h=function(){this.defaultPrevented=!0};var dIe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function _f(l,p){if(wn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Y){e:{try{W(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:hIe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_f.aa.h.call(this)}}_(_f,wn);var hIe={2:"touch",3:"pen",4:"mouse"};_f.prototype.h=function(){_f.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),fIe=0;function pIe(l,p,m,y,M){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=M,this.key=++fIe,this.da=this.fa=!1}function Oy(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Vy(l){this.src=l,this.g={},this.h=0}function KR(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],M=Array.prototype.indexOf.call(y,p,void 0);(k=0<=M)&&Array.prototype.splice.call(y,M,1),k&&(Oy(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function QR(l,p,m,y){for(var M=0;M<l.length;++M){var k=l[M];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return M}return-1}Vy.prototype.add=function(l,p,m,y,M){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var G=QR(l,p,y,M);return-1<G?(p=l[G],m||(p.fa=!1)):((p=new pIe(p,this.src,k,!!y,M)).fa=m,l.push(p)),p};var YR="closure_lm_"+(1e6*Math.random()|0),JR={};function qz(l,p,m,y,M){if(y&&y.once)return Gz(l,p,m,y,M);if(Array.isArray(p)){for(var k=0;k<p.length;k++)qz(l,p[k],m,y,M);return null}return m=tM(m),l&&l[yf]?l.K(p,m,u(y)?!!y.capture:!!y,M):zz(l,p,m,!1,y,M)}function zz(l,p,m,y,M,k){if(!p)throw Error("Invalid event type");var G=u(M)?!!M.capture:!!M,Xe=XR(l);if(Xe||(l[YR]=Xe=new Vy(l)),(m=Xe.add(p,m,y,G,k)).proxy)return m;if(y=function gIe(){const p=mIe;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)dIe||(M=G),void 0===M&&(M=!1),l.addEventListener(p.toString(),y,M);else if(l.attachEvent)l.attachEvent(Kz(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function Gz(l,p,m,y,M){if(Array.isArray(p)){for(var k=0;k<p.length;k++)Gz(l,p[k],m,y,M);return null}return m=tM(m),l&&l[yf]?l.L(p,m,u(y)?!!y.capture:!!y,M):zz(l,p,m,!0,y,M)}function Wz(l,p,m,y,M){if(Array.isArray(p))for(var k=0;k<p.length;k++)Wz(l,p[k],m,y,M);else y=u(y)?!!y.capture:!!y,m=tM(m),l&&l[yf]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=QR(k=l.g[p],m,y,M))&&(Oy(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=XR(l))&&(p=l.g[p.toString()],l=-1,p&&(l=QR(p,m,y,M)),(m=-1<l?p[l]:null)&&ZR(m))}function ZR(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[yf])KR(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(Kz(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=XR(p))?(KR(m,l),0==m.h&&(m.src=null,p[YR]=null)):Oy(l)}}}function Kz(l){return l in JR?JR[l]:JR[l]="on"+l}function mIe(l,p){if(l.da)l=!0;else{p=new _f(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&ZR(l),l=m.call(y,p)}return l}function XR(l){return(l=l[YR])instanceof Vy?l:null}var eM="__closure_events_fn_"+(1e9*Math.random()>>>0);function tM(l){return"function"==typeof l?l:(l[eM]||(l[eM]=function(p){return l.handleEvent(p)}),l[eM])}function bn(){es.call(this),this.i=new Vy(this),this.M=this,this.F=null}function Ln(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new wn(p,l);else if(p instanceof wn)p.target=p.target||l;else{var M=p;S(p=new wn(y,l),M)}if(M=!0,m)for(var k=m.length-1;0<=k;k--){var G=p.g=m[k];M=Ly(G,y,!0,p)&&M}if(M=Ly(G=p.g=l,y,!0,p)&&M,M=Ly(G,y,!1,p)&&M,m)for(k=0;k<m.length;k++)M=Ly(G=p.g=m[k],y,!1,p)&&M}function Ly(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var M=!0,k=0;k<p.length;++k){var G=p[k];if(G&&!G.da&&G.capture==m){var Xe=G.listener,cn=G.ha||G.src;G.fa&&KR(l.i,G),M=!1!==Xe.call(cn,y)&&M}}return M&&!y.defaultPrevented}function Qz(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Yz(l){l.g=Qz(()=>{l.g=null,l.i&&(l.i=!1,Yz(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(bn,es),bn.prototype[yf]=!0,bn.prototype.removeEventListener=function(l,p,m,y){Wz(this,l,p,m,y)},bn.prototype.N=function(){if(bn.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)Oy(m[y]);delete l.g[p],l.h--}}this.F=null},bn.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},bn.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class _Ie extends es{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Yz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vf(l){es.call(this),this.h=l,this.g={}}_(vf,es);var Jz=[];function Zz(l){te(l.g,function(p,m){this.g.hasOwnProperty(m)&&ZR(p)},l),l.g={}}vf.prototype.N=function(){vf.aa.N.call(this),Zz(this)},vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nM=a.JSON.stringify,yIe=a.JSON.parse,vIe=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function rM(){}function e3(){}rM.prototype.h=null;var If={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function iM(){wn.call(this,"d")}function oM(){wn.call(this,"c")}_(iM,wn),_(oM,wn);var Va={},t3=null;function Fy(){return t3=t3||new bn}function n3(l){wn.call(this,Va.La,l)}function Ef(l){const p=Fy();Ln(p,new n3(p))}function r3(l,p){wn.call(this,Va.STAT_EVENT,l),this.stat=p}function Fn(l){const p=Fy();Ln(p,new r3(p,l))}function i3(l,p){wn.call(this,Va.Ma,l),this.size=p}function Tf(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function wf(){this.g=!0}function rl(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function wIe(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var k=M[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var G=1;G<M.length;G++)M[G]=""}}}return nM(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Va.La="serverreachability",_(n3,wn),Va.STAT_EVENT="statevent",_(r3,wn),Va.Ma="timingevent",_(i3,wn),wf.prototype.xa=function(){this.g=!1},wf.prototype.info=function(){};var sM,Uy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},o3={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function jy(){}function ts(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new vf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new s3}function s3(){this.i=null,this.g="",this.h=!1}_(jy,rM),jy.prototype.g=function(){return new XMLHttpRequest},jy.prototype.i=function(){return{}},sM=new jy;var a3={},aM={};function cM(l,p,m){l.L=1,l.v=qy(Yi(p)),l.m=m,l.P=!0,c3(l,null)}function c3(l,p){l.F=Date.now(),By(l),l.A=Yi(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),T3(m.i,"t",y),l.C=0,m=l.j.J,l.h=new s3,l.g=j3(l.j,m?p:null,!l.m),0<l.O&&(l.M=new _Ie(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Jz[0]=M.toString()),M=Jz);for(var k=0;k<M.length;k++){var G=qz(m,M[k],y||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Ef(),function IIe(l,p,m,y,M,k){l.info(function(){if(l.g)if(k)for(var G="",Xe=k.split("&"),cn=0;cn<Xe.length;cn++){var Ve=Xe[cn].split("=");if(1<Ve.length){var Cn=Ve[0];Ve=Ve[1];var Sn=Cn.split("_");G=2<=Sn.length&&"type"==Sn[1]?G+(Cn+"=")+Ve+"&":G+(Cn+"=redacted&")}}else G=null;else G=k;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+p+"\n"+m+"\n"+G})}(l.i,l.u,l.A,l.l,l.R,l.m)}function u3(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function bIe(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?aM:(m=Number(p.substring(m,y)),isNaN(m)?a3:(y+=1)+m>p.length?aM:(p=p.slice(y,y+m),l.C=y+m,p))}function By(l){l.S=Date.now()+l.I,l3(l,l.I)}function l3(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Tf(f(l.ba,l),p)}function uM(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function bf(l){0==l.j.G||l.J||V3(l.j,l)}function La(l){uM(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,Zz(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function lM(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||dM(m.h,l)))if(!l.K&&dM(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var M=y;if(0==M[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;Qy(m),Wy(m)}gM(m),Fn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&0==m.v&&!m.C&&(m.C=Tf(f(m.Za,m),6e3));if(1>=f3(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ua(m,11)}else if((l.K||m.g==l)&&Qy(m),!D(p))for(M=m.Da.g.parse(p),p=0;p<M.length;p++){let Ve=M[p];if(m.T=Ve[0],Ve=Ve[1],2==m.G)if("c"==Ve[0]){m.K=Ve[1],m.ia=Ve[2];const Cn=Ve[3];null!=Cn&&(m.la=Cn,m.j.info("VER="+m.la));const Sn=Ve[4];null!=Sn&&(m.Aa=Sn,m.j.info("SVER="+m.Aa));const sl=Ve[5];null!=sl&&"number"==typeof sl&&0<sl&&(m.L=y=1.5*sl,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Fr=l.g;if(Fr){const Jy=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jy){var k=y.h;k.g||-1==Jy.indexOf("spdy")&&-1==Jy.indexOf("quic")&&-1==Jy.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(hM(k,k.h),k.h=null))}if(y.D){const _M=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;_M&&(y.ya=_M,ct(y.I,y.D,_M))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var G=l;if((y=m).qa=U3(y,y.J?y.ia:null,y.W),G.K){p3(y.h,G);var Xe=G,cn=y.L;cn&&(Xe.I=cn),Xe.B&&(uM(Xe),By(Xe)),y.g=G}else k3(y);0<m.i.length&&Ky(m)}else"stop"!=Ve[0]&&"close"!=Ve[0]||Ua(m,7);else 3==m.G&&("stop"==Ve[0]||"close"==Ve[0]?"stop"==Ve[0]?Ua(m,7):pM(m):"noop"!=Ve[0]&&m.l&&m.l.ta(Ve),m.v=0)}Ef()}catch{}}ts.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==Ji(l)?p.j():this.Y(l)},ts.prototype.Y=function(l){try{if(l==this.g)e:{const Sn=Ji(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>Sn)&&(3!=Sn||this.g&&(this.h.h||this.g.oa()||R3(this.g)))){this.J||4!=Sn||7==p||Ef(),uM(this);var m=this.g.Z();this.X=m;t:if(u3(this)){var y=R3(this.g);l="";var M=y.length,k=4==Ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){La(this),bf(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==M-1)});y.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=200==m,function EIe(l,p,m,y,M,k,G){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+p+"\n"+m+"\n"+k+" "+G})}(this.i,this.u,this.A,this.l,this.R,Sn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,cn=this.g;if((Xe=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Xe)){var Ve=Xe;break t}}Ve=null}if(!(m=Ve)){this.o=!1,this.s=3,Fn(12),La(this),bf(this);break e}rl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lM(this,m)}if(this.P){let Fr;for(m=!0;!this.J&&this.C<G.length;){if(Fr=bIe(this,G),Fr==aM){4==Sn&&(this.s=4,Fn(14),m=!1),rl(this.i,this.l,null,"[Incomplete Response]");break}if(Fr==a3){this.s=4,Fn(15),rl(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}rl(this.i,this.l,Fr,null),lM(this,Fr)}if(u3(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Sn||0!=G.length||this.h.h||(this.s=1,Fn(16),m=!1),this.o=this.o&&m,m){if(0<G.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),mM(Cn),Cn.M=!0,Fn(11))}}else rl(this.i,this.l,G,"[Invalid Chunked Response]"),La(this),bf(this)}else rl(this.i,this.l,G,null),lM(this,G);4==Sn&&La(this),this.o&&!this.J&&(4==Sn?V3(this.j,this):(this.o=!1,By(this)))}else(function BIe(l){const p={};l=(l.g&&2<=Ji(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const M=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[M]||[];p[M]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<G.indexOf("Unknown SID")?(this.s=3,Fn(12)):(this.s=0,Fn(13)),La(this),bf(this)}}}catch{}},ts.prototype.cancel=function(){this.J=!0,La(this)},ts.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function TIe(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(Ef(),Fn(17)),La(this),this.s=2,bf(this)):l3(this,this.S-l)};var CIe=class{constructor(l,p){this.g=l,this.map=p}};function d3(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function h3(l){return!!l.h||!!l.g&&l.g.size>=l.j}function f3(l){return l.h?1:l.g?l.g.size:0}function dM(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function hM(l,p){l.g?l.g.add(p):l.h=p}function p3(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function g3(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return v(l.i)}function m3(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function AIe(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function SIe(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),M=y.length,k=0;k<M;k++)p.call(void 0,y[k],m&&m[k],l)}d3.prototype.cancel=function(){if(this.i=g3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var _3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fa(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Fa){this.h=l.h,$y(this,l.j),this.o=l.o,this.g=l.g,Hy(this,l.s),this.l=l.l;var p=l.i,m=new Af;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),y3(this,m),this.m=l.m}else l&&(p=String(l).match(_3))?(this.h=!1,$y(this,p[1]||"",!0),this.o=Cf(p[2]||""),this.g=Cf(p[3]||"",!0),Hy(this,p[4]),this.l=Cf(p[5]||"",!0),y3(this,p[6]||"",!0),this.m=Cf(p[7]||"")):(this.h=!1,this.i=new Af(null,this.h))}function Yi(l){return new Fa(l)}function $y(l,p,m){l.j=m?Cf(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Hy(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function y3(l,p,m){p instanceof Af?(l.i=p,function kIe(l,p){p&&!l.j&&(ns(l),l.i=null,l.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(I3(this,y),T3(this,M,m))},l)),l.j=p}(l.i,l.h)):(m||(p=Sf(p,NIe)),l.i=new Af(p,l.h))}function ct(l,p,m){l.i.set(p,m)}function qy(l){return ct(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Cf(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Sf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,RIe),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function RIe(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Fa.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Sf(p,v3,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(Sf(p,v3,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(Sf(m,"/"==m.charAt(0)?PIe:MIe,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Sf(m,xIe)),l.join("")};var v3=/[#\/\?@]/g,MIe=/[#\?:]/g,PIe=/[#\?]/g,NIe=/[#\?@]/g,xIe=/#/g;function Af(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function ns(l){l.g||(l.g=new Map,l.h=0,l.i&&function DIe(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),M=null;if(0<=y){var k=l[m].substring(0,y);M=l[m].substring(y+1)}else k=l[m];p(k,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function I3(l,p){ns(l),p=il(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function E3(l,p){return ns(l),p=il(l,p),l.g.has(p)}function T3(l,p,m){I3(l,p),0<m.length&&(l.i=null,l.g.set(il(l,p),v(m)),l.h+=m.length)}function il(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function rs(l,p,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function LIe(){this.g=new vIe}function FIe(l,p,m){const y=m||"";try{m3(l,function(M,k){let G=M;u(M)&&(G=nM(M)),p.push(y+k+"="+encodeURIComponent(G))})}catch(M){throw p.push(y+"type="+encodeURIComponent("_badmap")),M}}function Df(l){this.l=l.Ub||null,this.j=l.eb||!1}function zy(l,p){bn.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function w3(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Rf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Mf(l)}function Mf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function b3(l){let p="";return te(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function fM(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=b3(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):ct(l,p,m))}function At(l){bn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Af.prototype).add=function(l,p){ns(this),this.i=null,l=il(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){ns(this),this.g.forEach(function(m,y){m.forEach(function(M){l.call(p,M,y,this)},this)},this)},t.na=function(){ns(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const M=l[y];for(let k=0;k<M.length;k++)m.push(p[y])}return m},t.V=function(l){ns(this);let p=[];if("string"==typeof l)E3(this,l)&&(p=p.concat(this.g.get(il(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return ns(this),this.i=null,E3(this,l=il(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var M=k;""!==G[y]&&(M+="="+encodeURIComponent(String(G[y]))),l.push(M)}}return this.i=l.join("&")},_(Df,rM),Df.prototype.g=function(){return new zy(this.l,this.j)},Df.prototype.i=function(l){return function(){return l}}({}),_(zy,bn),(t=zy.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Mf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Mf(this)),this.g&&(this.readyState=3,Mf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w3(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Rf(this):Mf(this),3==this.readyState&&w3(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Rf(this))},t.Qa=function(l){this.g&&(this.response=l,Rf(this))},t.ga=function(){this.g&&Rf(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(zy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(At,bn);var UIe=/^https?$/i,jIe=["POST","PUT"];function C3(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,S3(l),Gy(l)}function S3(l){l.A||(l.A=!0,Ln(l,"complete"),Ln(l,"error"))}function A3(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=Ji(l)||2!=l.Z()))if(l.u&&4==Ji(l))Qz(l.Ea,0,l);else if(Ln(l,"readystatechange"),4==Ji(l)){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===G){var M=String(l.D).match(_3)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!UIe.test(M?M.toLowerCase():"")}m=y}if(m)Ln(l,"complete"),Ln(l,"success");else{l.m=6;try{var k=2<Ji(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",S3(l)}}finally{Gy(l)}}}function Gy(l,p){if(l.g){D3(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Ln(l,"ready");try{m.onreadystatechange=y}catch{}}}function D3(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function Ji(l){return l.g?l.g.readyState:0}function R3(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Pf(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function M3(l){this.Aa=0,this.i=[],this.j=new wf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pf("baseRetryDelayMs",5e3,l),this.cb=Pf("retryDelaySeedMs",1e4,l),this.Wa=Pf("forwardChannelMaxRetries",2,l),this.wa=Pf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new d3(l&&l.concurrentRequestLimit),this.Da=new LIe,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function pM(l){if(P3(l),3==l.G){var p=l.U++,m=Yi(l.I);if(ct(m,"SID",l.K),ct(m,"RID",p),ct(m,"TYPE","terminate"),Nf(l,m),(p=new ts(l,l.j,p)).L=2,p.v=qy(Yi(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=j3(p.j,null),p.g.ea(p.v)),p.F=Date.now(),By(p)}F3(l)}function Wy(l){l.g&&(mM(l),l.g.cancel(),l.g=null)}function P3(l){Wy(l),l.u&&(a.clearTimeout(l.u),l.u=null),Qy(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function Ky(l){if(!h3(l.h)&&!l.s){l.s=!0;var p=l.Ga;gf||Hz(),mf||(gf(),mf=!0),WR.add(p,l),l.B=0}}function N3(l,p){var m;m=p?p.l:l.U++;const y=Yi(l.I);ct(y,"SID",l.K),ct(y,"RID",m),ct(y,"AID",l.T),Nf(l,y),l.m&&l.o&&fM(y,l.m,l.o),m=new ts(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=x3(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),hM(l.h,m),cM(m,y,p)}function Nf(l,p){l.H&&te(l.H,function(m,y){ct(p,y,m)}),l.l&&m3({},function(m,y){ct(p,y,m)})}function x3(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var M=l.i;let k=-1;for(;;){const G=["count="+m];-1==k?0<m?(k=M[0].g,G.push("ofs="+k)):k=0:G.push("ofs="+k);let Xe=!0;for(let cn=0;cn<m;cn++){let Ve=M[cn].g;const Cn=M[cn].map;if(Ve-=k,0>Ve)k=Math.max(0,M[cn].g-100),Xe=!1;else try{FIe(Cn,G,"req"+Ve+"_")}catch{y&&y(Cn)}}if(Xe){y=G.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function k3(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;gf||Hz(),mf||(gf(),mf=!0),WR.add(p,l),l.v=0}}function gM(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Tf(f(l.Fa,l),L3(l,l.v)),l.v++,0))}function mM(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function O3(l){l.g=new ts(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=Yi(l.qa);ct(p,"RID","rpc"),ct(p,"SID",l.K),ct(p,"AID",l.T),ct(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&ct(p,"TO",l.ja),ct(p,"TYPE","xmlhttp"),Nf(l,p),l.m&&l.o&&fM(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=qy(Yi(p)),m.m=null,m.P=!0,c3(m,l)}function Qy(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function V3(l,p){var m=null;if(l.g==p){Qy(l),mM(l),l.g=null;var y=2}else{if(!dM(l.h,p))return;m=p.D,p3(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var M=l.B;Ln(y=Fy(),new i3(y,m)),Ky(l)}else k3(l);else if(3==(M=p.s)||0==M&&0<p.X||!(1==y&&function $Ie(l,p){return!(f3(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Tf(f(l.Ga,l,p),L3(l,l.B)),l.B++,0)))}(l,p)||2==y&&gM(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),M){case 1:Ua(l,5);break;case 4:Ua(l,10);break;case 3:Ua(l,6);break;default:Ua(l,2)}}function L3(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function Ua(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const M=!y;y=new Fa(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||$y(y,"https"),qy(y),M?function OIe(l,p){const m=new wf;if(a.Image){const y=new Image;y.onload=g(rs,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(rs,m,"TestLoadImage: error",!1,p,y),y.onabort=g(rs,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(rs,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function VIe(l,p){new wf;const y=new AbortController,M=setTimeout(()=>{y.abort(),rs(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(M),rs(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(M),rs(0,0,!1,p)})}(y.toString(),m)}else Fn(2);l.G=0,l.l&&l.l.sa(p),F3(l),P3(l)}function F3(l){if(l.G=0,l.ka=[],l.l){const p=g3(l.h);(0!=p.length||0!=l.i.length)&&(T(l.ka,p),T(l.ka,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.ra()}}function U3(l,p,m){var y=m instanceof Fa?Yi(m):new Fa(m);if(""!=y.g)p&&(y.g=p+"."+y.g),Hy(y,y.s);else{var M=a.location;y=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var k=new Fa(null);y&&$y(k,y),p&&(k.g=p),M&&Hy(k,M),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&ct(y,m,p),ct(y,"VER",l.la),Nf(l,y),y}function j3(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new At(l.Ca&&!l.pa?new Df({eb:m}):l.pa)).Ha(l.J),p}function B3(){}function Yy(){}function fr(l,p){bn.call(this),this.g=new M3(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new ol(this)}function $3(l){iM.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function H3(){oM.call(this),this.status=1}function ol(l){this.g=l}(t=At.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sM.g(),this.v=function Xz(l){return l.h||(l.h=l.i())}(this.o?this.o:sM),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void C3(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jIe,p,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of m)this.g.setRequestHeader(k,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{D3(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){C3(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ln(this,"complete"),Ln(this,"abort"),Gy(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gy(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?A3(this):this.bb())},t.bb=function(){A3(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),yIe(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=M3.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){Fn(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=U3(this,null,this.W),Ky(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new ts(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(M.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=x3(this,M,p),ct(m=Yi(this.I),"RID",l),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),Nf(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(b3(k)))+"&"+p:this.m&&fM(m,this.m,k)),hM(this.h,M),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",p),ct(m,"SID","null"),M.T=!0,cM(M,m,null)):cM(M,m,p),this.G=2}}else 3==this.G&&(l?N3(this,l):0==this.i.length||h3(this.h)||N3(this))},t.Fa=function(){if(this.u=null,O3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tf(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fn(10),Wy(this),O3(this))},t.Za=function(){null!=this.C&&(this.C=null,Wy(this),gM(this),Fn(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Fn(2)):(this.j.info("Failed to ping google.com"),Fn(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=B3.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Yy.prototype.g=function(l,p){return new fr(l,p)},_(fr,bn),fr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fr.prototype.close=function(){pM(this.g)},fr.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=nM(l),l=m);p.i.push(new CIe(p.Ya++,l)),3==p.G&&Ky(p)},fr.prototype.N=function(){this.g.l=null,delete this.j,pM(this.g),delete this.g,fr.aa.N.call(this)},_($3,iM),_(H3,oM),_(ol,B3),ol.prototype.ua=function(){Ln(this.g,"a")},ol.prototype.ta=function(l){Ln(this.g,new $3(l))},ol.prototype.sa=function(l){Ln(this.g,new H3)},ol.prototype.ra=function(){Ln(this.g,"b")},Yy.prototype.createWebChannel=Yy.prototype.g,fr.prototype.send=fr.prototype.o,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,sj=Oi.createWebChannelTransport=function(){return new Yy},oj=Oi.getStatEventTarget=function(){return Fy()},ij=Oi.Event=Va,Ab=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uy.NO_ERROR=0,Uy.TIMEOUT=8,Uy.HTTP_ERROR=6,qm=Oi.ErrorCode=Uy,o3.COMPLETE="complete",rj=Oi.EventType=o3,e3.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",bn.prototype.listen=bn.prototype.K,Xd=Oi.WebChannel=e3,Oi.FetchXmlHttpFactory=Df,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,nj=Oi.XhrIo=At}).apply(typeof Hm<"u"?Hm:typeof self<"u"?self:typeof window<"u"?window:{});const cj="@firebase/firestore";class Qt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");let su="11.10.0";const Ro=new gb("@firebase/firestore");function au(){return Ro.logLevel}function j(t,...e){if(Ro.logLevel<=Se.DEBUG){const n=e.map(Db);Ro.debug(`Firestore (${su}): ${t}`,...n)}}function Pt(t,...e){if(Ro.logLevel<=Se.ERROR){const n=e.map(Db);Ro.error(`Firestore (${su}): ${t}`,...n)}}function kn(t,...e){if(Ro.logLevel<=Se.WARN){const n=e.map(Db);Ro.warn(`Firestore (${su}): ${t}`,...n)}}function Db(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Q(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,lj(t,r,n)}function lj(t,e,n){let r=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pt(r),new Error(r)}function Z(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||lj(e,i,r)}function z(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class dj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class xle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kle{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;Z(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yt,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(I(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z("string"==typeof r.accessToken,31837,{l:r}),new dj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(null===e||"string"==typeof e,2055,{h:e}),new Qt(e)}}class Ole{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vle{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ole(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Z(void 0===this.o,3512);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new Rb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Mb(){return new TextEncoder}class Pb{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Fle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Nb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{const o=Mb(),s=Ule(o.encode(hj(t,n)),o.encode(hj(e,n)));return 0!==s?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function hj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Ule(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function cu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const xb="__name__";class ti{constructor(e,n,r){void 0===n?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ti.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ti.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return oe(e.length,n.length)}static compareSegments(e,n){const r=ti.isNumericId(e),i=ti.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ti.extractNumericId(e).compare(ti.extractNumericId(n)):Nb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class we extends ti{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const jle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends ti{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return jle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===xb}static keyField(){return new ft([xb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}class q{constructor(e){this.path=e}static fromPath(e){return new q(we.fromString(e))}static fromName(e){return new q(we.fromString(e).popFirst(5))}static empty(){return new q(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===we.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new we(e.slice()))}}function kb(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pj(t){if(!q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gj(t){if(q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function zm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Q(12329,{type:typeof t})}function be(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function na(t,e){if(!mj(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}const yj=-62135596800;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yj)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(na(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-yj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:Ut("string",qe._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new qe(0,0))}static max(){return new ee(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ej(t){return new ar(t.readTime,t.key,-1)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ee.min(),q.empty(),-1)}static max(){return new ar(ee.max(),q.empty(),-1)}}function Vb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=q.comparator(t.documentKey,e.documentKey),0!==n?n:oe(t.largestBatchId,e.largestBatchId))}class wj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mo(t){return Lb.apply(this,arguments)}function Lb(){return(Lb=I(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new P((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Po(t){return"IndexedDbTransactionError"===t.name}let ur=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function nh(t){return null==t}function rh(t){return 0===t&&1/t==-1/0}function Kle(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Aj(t){return t+"\x01\x01"}const oh="mutationQueues",Or="mutations",fu="documentMutations",sh="remoteDocumentGlobal",pu="targets",gu="targetDocuments",ca="targetGlobal",ah="collectionParents",mu="clientMetadata",Zm="bundles",Xm="namedQueries";function jj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $j(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class nt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new t_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new t_(this.root,e,this.comparator,!1)}getReverseIterator(){return new t_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new t_(this.root,e,this.comparator,!0)}}class t_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??sn.RED,this.left=i??sn.EMPTY,this.right=o??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new sn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1,sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ze{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hj(this.data.getIterator())}getIteratorFrom(e){return new Hj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class Hj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new ze(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class qj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qj("Invalid base64 string: "+o):o}}(e);return new St(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const Ide=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Z(!!t,39018),"string"==typeof t){let e=0;const n=Ide.exec(t);if(Z(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Li(t){return"string"==typeof t?St.fromBase64String(t):St.fromUint8Array(t)}const zj="server_timestamp",Gj="__type__",Wj="__previous_value__",Kj="__local_write_time__";function n_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[Gj])||void 0===n?void 0:n.stringValue)===zj}function r_(t){const e=t.mapValue.fields[Wj];return n_(e)?r_(e):e}function lh(t){const e=Vi(t.mapValue.fields[Kj].timestampValue);return new qe(e.seconds,e.nanos)}class Ede{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const dh="(default)";class ua{constructor(e,n){this.projectId=e,this.database=n||dh}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}const Wb="__type__",Qj="__max__",ko_mapValue={fields:{__type__:{stringValue:Qj}}},Kb="__vector__",yu="value";function Oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?n_(t)?4:eB(t)?9007199254740991:a_(t)?10:11:Q(28295,{value:t})}function ii(t,e){if(t===e)return!0;const n=Oo(t);if(n!==Oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lh(t).isEqual(lh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Vi(i.timestampValue),a=Vi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Li(t.bytesValue).isEqual(Li(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return pt(i.geoPointValue.latitude)===pt(o.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return pt(i.integerValue)===pt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=pt(i.doubleValue),a=pt(o.doubleValue);return s===a?rh(s)===rh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return cu(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(jj(s)!==jj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!ii(s[c],a[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}var o}function hh(t,e){return void 0!==(t.values||[]).find(n=>ii(n,e))}function Vo(t,e){if(t===e)return 0;const n=Oo(t),r=Oo(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=pt(o.integerValue||o.doubleValue),c=pt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Yj(t.timestampValue,e.timestampValue);case 4:return Yj(lh(t),lh(e));case 5:return Nb(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Li(o),c=Li(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=oe(a[u],c[u]);if(0!==d)return d}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=oe(pt(o.latitude),pt(s.latitude));return 0!==a?a:oe(pt(o.longitude),pt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jj(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[yu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[yu])||void 0===c?void 0:c.arrayValue,v=oe((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==v?v:Jj(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ko_mapValue&&s===ko_mapValue)return 0;if(o===ko_mapValue)return 1;if(s===ko_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Nb(c[h],d[h]);if(0!==f)return f;const g=Vo(a[c[h]],u[d[h]]);if(0!==g)return g}return oe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{le:n})}}function Yj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oe(t,e);const n=Vi(t),r=Vi(e),i=oe(n.seconds,r.seconds);return 0!==i?i:oe(n.nanos,r.nanos)}function Jj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Vo(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function vu(t){return Qb(t)}function Qb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Li(t.bytesValue).toBase64():"referenceValue"in t?q.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Qb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Qb(n.fields[s])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function o_(t){switch(Oo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=r_(t);return e?16+o_(e):16;case 5:return 2*t.stringValue.length;case 6:return Li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+o_(o),0);case 10:case 11:return function(r){let i=0;return xo(r.fields,(o,s)=>{i+=o.length+o_(s)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function la(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yb(t){return!!t&&"integerValue"in t}function fh(t){return!!t&&"arrayValue"in t}function Zj(t){return!!t&&"nullValue"in t}function Xj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function s_(t){return!!t&&"mapValue"in t}function a_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[Wb])||void 0===n?void 0:n.stringValue)===Kb}function ph(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ph(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ph(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Qj}class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!s_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ph(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ph(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());s_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];s_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new an(ph(this.value))}}function iB(t){const e=[];return xo(t.fields,(n,r)=>{const i=new ft([n]);if(s_(r)){const o=iB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Qn(e)}class ot{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,ee.min(),ee.min(),ee.min(),an.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,ee.min(),ee.min(),an.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,ee.min(),ee.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lo{constructor(e,n){this.position=e,this.inclusive=n}}function oB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?q.comparator(q.fromName(s.referenceValue),n.key):Vo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function sB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}class gh{constructor(e,n="asc"){this.field=e,this.dir=n}}function bde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class aB{}class Ae extends aB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Cde(e,n,r):"array-contains"===n?new Dde(e,r):"in"===n?new fB(e,r):"not-in"===n?new Rde(e,r):"array-contains-any"===n?new Mde(e,r):new Ae(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Sde(e,r):new Ade(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Vo(n,this.value)):null!==n&&Oo(this.value)===Oo(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ge extends aB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ge(e,n)}matches(e){return Iu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Iu(t){return"and"===t.op}function Zb(t){return function cB(t){for(const e of t.filters)if(e instanceof Ge)return!1;return!0}(t)&&Iu(t)}function Xb(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+vu(t.value);if(Zb(t))return t.filters.map(e=>Xb(e)).join(",");{const e=t.filters.map(n=>Xb(n)).join(",");return`${t.op}(${e})`}}function uB(t,e){return t instanceof Ae?(r=t,(i=e)instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)):t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&uB(s,i.filters[a]),!0)}(t,e):void Q(19439);var r,i}function dB(t){return t instanceof Ae?`${(n=t).field.canonicalString()} ${n.op} ${vu(n.value)}`:t instanceof Ge?function(n){return n.op.toString()+" {"+n.getFilters().map(dB).join(" ,")+"}"}(t):"Filter";var n}class Cde extends Ae{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Sde extends Ae{constructor(e,n){super(e,"in",n),this.keys=hB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ade extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=hB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Dde extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fh(n)&&hh(n.arrayValue,this.value)}}class fB extends Ae{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&hh(this.value.arrayValue,n)}}class Rde extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!hh(this.value.arrayValue,n)}}class Mde extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hh(this.value.arrayValue,r))}}class Pde{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function eC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Pde(t,e,n,r,i,o,s)}function da(t){const e=z(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vu(r)).join(",")),e.Pe=n}return e.Pe}function mh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sB(t.startAt,e.startAt)&&sB(t.endAt,e.endAt)}function c_(t){return q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Fi{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function Eu(t){return new Fi(t)}function _B(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function tC(t){return null!==t.collectionGroup}function Tu(t){const e=z(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ze(ft.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new gh(o,r))}),n.has(ft.keyField().canonicalString())||e.Te.push(new gh(ft.keyField(),r))}return e.Te}function vn(t){const e=z(t);return e.Ie||(e.Ie=function vB(t,e){if("F"===t.limitType)return eC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new gh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Lo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lo(t.startAt.position,t.startAt.inclusive):null;return eC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Tu(t))),e.Ie}function nC(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function l_(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _h(t,e){return mh(vn(t),vn(e))&&t.limitType===e.limitType}function IB(t){return`${da(vn(t))}|lt:${t.limitType}`}function wu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>dB(i)).join(", ")}]`),nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vu(i)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function yh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Tu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=oB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Tu(r),i)||r.endAt&&!function(s,a,c){const u=oB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Tu(r),i)));var r,i}function TB(t){return(e,n)=>{let r=!1;for(const i of Tu(t)){const o=Nde(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Nde(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Vo(c,u):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return $j(this.inner)}size(){return this.innerSize}}const xde=new nt(q.comparator);function Yn(){return xde}const wB=new nt(q.comparator);function vh(...t){let e=wB;for(const n of t)e=e.insert(n.key,n);return e}function bB(t){let e=wB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return Ih()}function CB(){return Ih()}function Ih(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const kde=new nt(q.comparator),Ode=new ze(q.comparator);function Ie(...t){let e=Ode;for(const n of t)e=e.add(n);return e}const Vde=new ze(oe);function iC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function SB(t){return{integerValue:""+t}}function AB(t,e){return function Sj(t){return"number"==typeof t&&Number.isInteger(t)&&!rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?SB(e):iC(t,e)}class d_{constructor(){this._=void 0}}function Lde(t,e,n){return t instanceof bu?function(i,o){const s={fields:{[Gj]:{stringValue:zj},[Kj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&n_(o)&&(o=r_(o)),o&&(s.fields[Wj]=o),{mapValue:s}}(n,e):t instanceof ha?RB(t,e):t instanceof fa?MB(t,e):function(i,o){const s=DB(i,o),a=PB(s)+PB(i.Ee);return Yb(s)&&Yb(i.Ee)?SB(a):iC(i.serializer,a)}(t,e)}function Fde(t,e,n){return t instanceof ha?RB(t,e):t instanceof fa?MB(t,e):n}function DB(t,e){return t instanceof Cu?Yb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class bu extends d_{}class ha extends d_{constructor(e){super(),this.elements=e}}function RB(t,e){const n=NB(e);for(const r of t.elements)n.some(i=>ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends d_{constructor(e){super(),this.elements=e}}function MB(t,e){let n=NB(e);for(const r of t.elements)n=n.filter(i=>!ii(i,r));return{arrayValue:{values:n}}}class Cu extends d_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function PB(t){return pt(t.integerValue||t.doubleValue)}function NB(t){return fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Eh{constructor(e,n){this.field=e,this.transform=n}}class jde{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function h_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class f_{}function xB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Au(t.key,gt.none()):new Su(t.key,t.data,gt.none());{const n=t.data,r=an.empty();let i=new ze(ft.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ji(t.key,r,new Qn(i.toArray()),gt.none())}}function Bde(t,e,n){t instanceof Su?function(i,o,s){const a=i.value.clone(),c=VB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(i,o,s){if(!h_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=VB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(OB(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Th(t,e,n,r){return t instanceof Su?function(o,s,a,c){if(!h_(o.precondition,s))return a;const u=o.value.clone(),d=LB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(o,s,a,c){if(!h_(o.precondition,s))return a;const u=LB(o.fieldTransforms,c,s),d=s.data;return d.setAll(OB(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,h_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function $de(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=DB(r.transform,i||null);null!=o&&(null===n&&(n=an.empty()),n.set(r.field,o))}return n||null}function kB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&cu(r,i,(o,s)=>function Ude(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ha&&i instanceof ha||r instanceof fa&&i instanceof fa?cu(r.elements,i.elements,ii):r instanceof Cu&&i instanceof Cu?ii(r.Ee,i.Ee):r instanceof bu&&i instanceof bu);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Su extends f_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends f_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function VB(t,e,n){const r=new Map;Z(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Fde(s,a,n[i]))}return r}function LB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Lde(o,s,e))}return r}class Au extends f_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oC extends f_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Bde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Th(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Th(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=xB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&cu(this.mutations,e.mutations,(n,r)=>kB(n,r))&&cu(this.baseMutations,e.baseMutations,(n,r)=>kB(n,r))}}class aC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Z(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return kde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new aC(e,n,r,i)}}class cC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hde{constructor(e,n){this.count=e,this.unchangedNames=n}}var jt,Ne;function jB(t){if(void 0===t)return Pt("GRPC error has no .code"),N.UNKNOWN;switch(t){case jt.OK:return N.OK;case jt.CANCELLED:return N.CANCELLED;case jt.UNKNOWN:return N.UNKNOWN;case jt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case jt.INTERNAL:return N.INTERNAL;case jt.UNAVAILABLE:return N.UNAVAILABLE;case jt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case jt.NOT_FOUND:return N.NOT_FOUND;case jt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case jt.ABORTED:return N.ABORTED;case jt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case jt.DATA_LOSS:return N.DATA_LOSS;default:return Q(39323,{code:t})}}(Ne=jt||(jt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";const qde=new Do([4294967295,4294967295],0);function BB(t){const e=Mb().encode(t),n=new tj;return n.update(e),new Uint8Array(n.digest())}function $B(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([n,r],0),new Do([i,o],0)]}class uC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wh(`Invalid padding: ${n}`);if(r<0)throw new wh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new wh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Do.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Do.fromNumber(r)));return 1===i.compare(qde)&&(i=new Do([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=BB(e),[r,i]=$B(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new uC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=BB(e),[r,i]=$B(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bh{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(ee.min(),i,new nt(oe),Yn(),Ie())}}class Ch{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ch(r,n,Ie(),Ie(),Ie())}}class g_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class HB{constructor(e,n){this.targetId=e,this.De=n}}class qB{constructor(e,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zB{constructor(){this.ve=0,this.Ce=GB(),this.Fe=St.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ie(),n=Ie(),r=Ie();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Ch(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=GB()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Z(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zde{constructor(e){this.We=e,this.Ge=new Map,this.ze=Yn(),this.je=m_(),this.Je=m_(),this.He=new nt(oe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(c_(o))if(0===r){const s=new q(o.path);this.Xe(n,s,ot.newNoDocument(s,ee.min()))}else Z(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Li(r).toUint8Array()}catch(c){if(c instanceof qj)return kn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uC(s,i,o)}catch(c){return kn(c instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&c_(a.target)){const c=new q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,ot.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Ie();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new bh(e,n,this.He,this.ze,r);return this.ze=Yn(),this.je=m_(),this.Je=m_(),this.He=new nt(oe),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new zB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ze(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ze(oe),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new zB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function m_(){return new nt(q.comparator)}function GB(){return new nt(q.comparator)}const Gde={asc:"ASCENDING",desc:"DESCENDING"},Wde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kde={and:"AND",or:"OR"};class Qde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lC(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function Du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Yde(t,e){return Du(t,e.toTimestamp())}function Nt(t){return Z(!!t,49232),ee.fromTimestamp(function(n){const r=Vi(n);return new qe(r.seconds,r.nanos)}(t))}function dC(t,e){return hC(t,e).canonicalString()}function hC(t,e){const n=(i=t,new we(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function KB(t){const e=we.fromString(t);return Z(i$(e),10190,{key:e.toString()}),e}function Sh(t,e){return dC(t.databaseId,e.path)}function si(t,e){const n=KB(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(JB(n))}function QB(t,e){return dC(t.databaseId,e)}function fC(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JB(t){return Z(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function ZB(t,e,n){return{name:Sh(t,e),fields:n.value.mapValue.fields}}function XB(t,e){return{documents:[QB(t,e.path)]}}function y_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QB(t,i);const o=function(u){if(0!==u.length)return r$(Ge.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Fo((f=d).field),direction:the(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=lC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function t$(t){let e=function YB(t){const e=KB(t);return 4===e.length?we.emptyPath():JB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Z(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=n$(h);return f instanceof Ge&&Zb(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new gh(Ru((_=f).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,nh(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new Lo((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new Lo(h.values||[],!h.before)}(n.endAt)),function mB(t,e,n,r,i,o,s,a){return new Fi(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function n$(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ru(n.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ru(n.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ru(n.unaryFilter.field);return Ae.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ru(n.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):void 0!==t.fieldFilter?Ae.create(Ru((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Ge.create(n.compositeFilter.filters.map(r=>n$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t});var n}function the(t){return Gde[t]}function nhe(t){return Wde[t]}function rhe(t){return Kde[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Ru(t){return ft.fromServerFormat(t.fieldPath)}function r$(t){return t instanceof Ae?function(n){if("=="===n.op){if(Xj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(Zj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Xj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(Zj(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:nhe(n.op),value:n.value}}}(t):t instanceof Ge?function(n){const r=n.getFilters().map(i=>r$(i));return 1===r.length?r[0]:{compositeFilter:{op:rhe(n.op),filters:r}}}(t):Q(54877,{filter:t})}function ihe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function i$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Bi{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=St.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class o${constructor(e){this.gt=e}}function I_(t){const e=t$({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?l_(e,e.limit,"L"):e}class _a{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),rh(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=Vi(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Li(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?eB(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):a_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=yu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(pt(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}_a.Ut=new _a;class fhe{constructor(){this.Dn=new IC}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ar.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class IC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(we.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(we.comparator)).toArray()}}new Uint8Array(0);const T$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class va{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new va(0)}static ur(){return new va(-1)}}const D$="LruGarbageCollector";function M$([t,e],[n,r]){const i=oe(t,n);return 0===i?oe(e,r):i}class mhe{constructor(e){this.Tr=e,this.buffer=new ze(M$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();M$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class P${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;j(D$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,I(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Po(r)?j(D$,"Ignoring IndexedDB error during garbage collection: ",r):yield Mo(r)}yield n.Rr(3e5)}))}}class _he{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return P.resolve(ur.ue);const r=new mhe(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(T$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),au()<=Se.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class x${constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ehe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class F${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Th(r.mutation,i,Qn.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=vh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Yn();const s=Ih(),a=Ih();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof ji)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),Th(d.mutation,u,d.mutation.getFieldMask(),qe.now())):s.set(u.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new Ehe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ih();let i=new nt((s,a)=>s-a),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Qn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||Ie()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=CB();d.forEach(f=>{if(!o.has(f)){const g=xB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return q.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):tC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(oi());let a=-1,c=o;return s.next(u=>P.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ie())).next(d=>({batchId:a,changes:bB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=vh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=vh();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,c=>{const u=(h=n,f=c.child(o),new Fi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,ot.newInvalidDocument(d)))});let a=vh();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&Th(d.mutation,u,Qn.empty(),qe.now()),yh(n,u)&&(a=a.insert(c,u))}),a})}}class The{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Nt(i.createTime)}),P.resolve();var i}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:I_(i.bundledQuery),readTime:Nt(i.readTime)}),P.resolve();var i}}class whe{constructor(){this.overlays=new nt(q.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=oi(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new nt((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=oi(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=oi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cC(n,r));let o=this.kr.get(n);void 0===o&&(o=Ie(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class bhe{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}class EC{constructor(){this.qr=new ze(Jt.Qr),this.$r=new ze(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Jt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new we([])),r=new Jt(n,e),i=new Jt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new we([])),r=new Jt(n,e),i=new Jt(n,e+1);let o=Ie();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Jt(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}class Che{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ze(Jt.Qr)}checkEmpty(e){return P.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new sC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new Jt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(oe);return n.forEach(i=>{const o=new Jt(i,0),s=new Jt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const s=new Jt(new q(o),0);let a=new ze(oe);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Z(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{const o=new Jt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Jt(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class She{constructor(e){this.ni=e,this.docs=new nt(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ot.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Yn();const s=n.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Vb(Ej(d),r)<=0||(i.has(d.key)||yh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ahe(this)}getSize(e){return P.resolve(this.size)}}class Ahe extends x${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class Dhe{constructor(e){this.persistence=e,this.ii=new Ui(n=>da(n),mh),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new EC,this.targetCount=0,this._i=va.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new va(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}}class TC{constructor(e,n){this.ai={},this.overlays={},this.ui=new ur(0),this.ci=!1,this.ci=!0,this.li=new bhe,this.referenceDelegate=e(this),this.hi=new Dhe(this),this.indexManager=new fhe,this.remoteDocumentCache=new She(r=>this.referenceDelegate.Pi(r)),this.serializer=new o$(n),this.Ti=new The(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new whe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Che(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new Rhe(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Rhe extends wj{constructor(e){super(),this.currentSequenceNumber=e}}class D_{constructor(e){this.persistence=e,this.Ai=new EC,this.Ri=null}static Vi(e){return new D_(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class R_{constructor(e,n){this.persistence=e,this.gi=new Ui(r=>function yn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Aj(e)),e=Kle(t.get(n),e);return Aj(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function N$(t,e){return new _he(t,e)}(this,n)}static Vi(e,n){return new R_(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=o_(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return P.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class DC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ie(),i=Ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new DC(e,n.fromCache,r,i)}}class Phe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class B${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=NU()?8:function bj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Mt())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Phe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(au()<=Se.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",wu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(au()<=Se.DEBUG&&j("QueryEngine","Query:",wu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(au()<=Se.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",wu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):P.resolve())}ps(e,n){if(_B(n))return P.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=l_(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ie(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,l_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return _B(n)||i.isEqual(ee.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(au()<=Se.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wu(n)),this.vs(e,s,n,function Ij(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(1e9===r?new qe(n+1,0):new qe(n,r));return new ar(i,q.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new ze(TB(e));return n.forEach((i,o)=>{yh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return au()<=Se.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",wu(n)),this.gs.getDocumentsMatchingQuery(e,n,ar.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const RC="LocalStore";class xhe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new nt(oe),this.Ms=new Ui(o=>da(o),mh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function H$(t,e){return MC.apply(this,arguments)}function MC(){return(MC=I(function*(t,e){const n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=Ie();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function q$(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Vhe(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vu(t,e,n){return PC.apply(this,arguments)}function PC(){return(PC=I(function*(t,e,n){const r=z(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Po(s))throw s;j(RC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function P_(t,e,n){const r=z(t);let i=ee.min(),o=Ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=z(c),f=h.Ms.get(d);return void 0!==f?P.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:Ie())).next(a=>(function K$(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function EB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class VC{constructor(){this.activeTargetIds=function rC(){return Vde}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eH{constructor(){this.Fo=new VC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new VC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uhe{xo(e){}shutdown(){}}const tH="ConnectivityMonitor";class nH{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(tH,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){j(tH,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let k_=null;function FC(){return null===k_?k_=268435456+Math.round(2147483648*Math.random()):k_++,"0x"+k_.toString(16)}const UC="RestConnection",jhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bhe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===dh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=FC(),a=this.Go(e,n.toUriEncodedString());j(UC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=ru(u);return this.jo(e,a,c,r,d).then(h=>(j(UC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw kn(UC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+su,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${jhe[e]}`}terminate(){}}class $he{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const En="WebChannelConnection";class Hhe extends Bhe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=FC();return new Promise((a,c)=>{const u=new nj;u.setWithCredentials(!0),u.listenOnce(rj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qm.NO_ERROR:const h=u.getResponseJson();j(En,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case qm.TIMEOUT:j(En,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const f=u.getStatus();if(j(En,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new L(v,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(En,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);j(En,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=FC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sj(),a=oj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(En,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new $he({Ho:T=>{g?j(En,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(j(En,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(En,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Yo:()=>h.close()}),v=(T,A,D)=>{T.listen(A,F=>{try{D(F)}catch(W){setTimeout(()=>{throw W},0)}})};return v(h,Xd.EventType.OPEN,()=>{g||(j(En,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),v(h,Xd.EventType.CLOSE,()=>{g||(g=!0,j(En,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),v(h,Xd.EventType.ERROR,T=>{g||(g=!0,kn(En,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),v(h,Xd.EventType.MESSAGE,T=>{var A;if(!g){const D=T.data[0];Z(!!D,16349);const F=D,W=F?.error||(null===(A=F[0])||void 0===A?void 0:A.error);if(W){j(En,`RPC '${e}' stream ${i} received error:`,W);const Y=W.status;let te=function(w){const S=jt[w];if(void 0!==S)return jB(S)}(Y),C=W.message;void 0===te&&(te=N.INTERNAL,C="Unknown error status: "+Y+" with message "+W.message),g=!0,_.__(new L(te,C)),h.close()}else j(En,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),v(a,ij.STAT_EVENT,T=>{T.stat===Ab.PROXY?j(En,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Ab.NOPROXY&&j(En,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function O_(){return typeof document<"u"?document:null}function Ea(t){return new Qde(t,!0)}class jC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const iH="PersistentStream";class oH{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new jC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return I(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return I(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return I(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(I(function*(){e.state=0,e.start()}))}G_(e){return j(iH,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(iH,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qhe extends oH{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function Zde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Q(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Z(void 0===d||"string"==typeof d,58123),St.fromBase64String(d||"")):(Z(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),St.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:jB(u.code);return new L(d,u.message||"")}(s);n=new qB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=si(t,r.document.name),o=Nt(r.document.updateTime),s=r.document.createTime?Nt(r.document.createTime):ee.min(),a=new an({mapValue:{fields:r.document.fields}}),c=ot.newFoundDocument(i,o,s,a);n=new g_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=si(t,r.document),o=r.readTime?Nt(r.readTime):ee.min(),s=ot.newNoDocument(i,o);n=new g_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=si(t,r.document);n=new g_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Hde(i,o);n=new HB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Nt(s.readTime):ee.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=fC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=c_(c)?{documents:XB(o,c)}:{query:y_(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=WB(o,s.resumeToken);const u=lC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Du(o,s.snapshotVersion.toTimestamp());const u=lC(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function ehe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=fC(this.serializer),n.removeTarget=e,this.k_(n)}}class zhe extends oH{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Z(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Z(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Z(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function Xde(t,e){return t&&t.length>0?(Z(void 0!==e,14353),t.map(n=>function(i,o){let s=Nt(i.updateTime?i.updateTime:o);return s.isEqual(ee.min())&&(s=Nt(o)),new jde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Nt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=fC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Ah(t,e){let n;if(e instanceof Su)n={update:ZB(t,e.key,e.value)};else if(e instanceof Au)n={delete:Sh(t,e.key)};else if(e instanceof ji)n={update:ZB(t,e.key,e.data),updateMask:ihe(e.fieldMask)};else{if(!(e instanceof oC))return Q(16599,{Rt:e.type});n={verify:Sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof bu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ha)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cu)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Yde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Q(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class Ghe{}class Whe extends Ghe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,hC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,hC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Khe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pt(n),this._a=!1):j("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Ta="RemoteStore";class Qhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(I(function*(){var c;Ho(s)&&(j(Ta,"Restarting streams for network reachability change."),yield(c=I(function*(d){const h=z(d);h.Ia.add(4),yield Lu(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield Oh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new Khe(r,i)}}function Oh(t){return BC.apply(this,arguments)}function BC(){return(BC=I(function*(t){if(Ho(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function Lu(t){return $C.apply(this,arguments)}function $C(){return($C=I(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function V_(t,e){const n=z(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),zC(n)?qC(n):ju(n).x_()&&HC(n,e))}function Fu(t,e){const n=z(t),r=ju(n);n.Ta.delete(e),r.x_()&&sH(n,e),0===n.Ta.size&&(r.x_()?r.B_():Ho(n)&&n.Aa.set("Unknown"))}function HC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ju(t).H_(e)}function sH(t,e){t.Ra.$e(e),ju(t).Y_(e)}function qC(t){t.Ra=new zde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ju(t).start(),t.Aa.aa()}function zC(t){return Ho(t)&&!ju(t).M_()&&t.Ta.size>0}function Ho(t){return 0===z(t).Ia.size}function aH(t){t.Ra=void 0}function Yhe(t){return GC.apply(this,arguments)}function GC(){return(GC=I(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function Jhe(t){return WC.apply(this,arguments)}function WC(){return(WC=I(function*(t){t.Ta.forEach((e,n)=>{HC(t,e)})})).apply(this,arguments)}function Zhe(t,e){return KC.apply(this,arguments)}function KC(){return(KC=I(function*(t,e){aH(t),zC(t)?(t.Aa.la(e),qC(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function Xhe(t,e,n){return QC.apply(this,arguments)}function QC(){return QC=I(function*(t,e,n){if(t.Aa.set("Online"),e instanceof qB&&2===e.state&&e.cause)try{yield(r=I(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield L_(t,r)}else if(e instanceof g_?t.Ra.Ye(e):e instanceof HB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{const r=yield q$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(St.EMPTY_BYTE_STRING,d.snapshotVersion)),sH(o,c);const h=new Bi(d.target,c,u,d.sequenceNumber);HC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Ta,"Failed to raise snapshot:",r),yield L_(t,r)}var r}),QC.apply(this,arguments)}function L_(t,e,n){return YC.apply(this,arguments)}function YC(){return(YC=I(function*(t,e,n){if(!Po(e))throw e;t.Ia.add(1),yield Lu(t),t.Aa.set("Offline"),n||(n=()=>q$(t.localStore)),t.asyncQueue.enqueueRetryable(I(function*(){j(Ta,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Oh(t)}))})).apply(this,arguments)}function cH(t,e){return e().catch(n=>L_(t,n,e))}function Uu(t){return JC.apply(this,arguments)}function JC(){return(JC=I(function*(t){const e=z(t),n=qo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;efe(e);)try{const i=yield Vhe(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,tfe(e,i)}catch(i){yield L_(e,i)}uH(e)&&lH(e)})).apply(this,arguments)}function efe(t){return Ho(t)&&t.Pa.length<10}function tfe(t,e){t.Pa.push(e);const n=qo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function uH(t){return Ho(t)&&!qo(t).M_()&&t.Pa.length>0}function lH(t){qo(t).start()}function nfe(t){return ZC.apply(this,arguments)}function ZC(){return(ZC=I(function*(t){qo(t).na()})).apply(this,arguments)}function rfe(t){return XC.apply(this,arguments)}function XC(){return(XC=I(function*(t){const e=qo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function ife(t,e,n){return eS.apply(this,arguments)}function eS(){return(eS=I(function*(t,e,n){const r=t.Pa.shift(),i=aC.from(r,e,n);yield cH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Uu(t)})).apply(this,arguments)}function ofe(t,e){return tS.apply(this,arguments)}function tS(){return tS=I(function*(t,e){var n;e&&qo(t).Z_&&(yield(n=I(function*(i,o){if(function UB(t){switch(t){case N.OK:return Q(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();qo(i).N_(),yield cH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Uu(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),uH(t)&&lH(t)}),tS.apply(this,arguments)}function dH(t,e){return nS.apply(this,arguments)}function nS(){return(nS=I(function*(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),j(Ta,"RemoteStore received new credentials");const r=Ho(n);n.Ia.add(3),yield Lu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Oh(n)})).apply(this,arguments)}function rS(t,e){return iS.apply(this,arguments)}function iS(){return(iS=I(function*(t,e){const n=z(t);e?(n.Ia.delete(2),yield Oh(n)):e||(n.Ia.add(2),yield Lu(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function ju(t){return t.Va||(t.Va=function(n,r,i){const o=z(n);return o.ia(),new qhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Yhe.bind(null,t),e_:Jhe.bind(null,t),n_:Zhe.bind(null,t),J_:Xhe.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.Va.N_(),zC(t)?qC(t):t.Aa.set("Unknown")):(yield t.Va.stop(),aH(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function qo(t){return t.ma||(t.ma=function(n,r,i){const o=z(n);return o.ia(),new zhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:nfe.bind(null,t),n_:ofe.bind(null,t),ea:rfe.bind(null,t),ta:ife.bind(null,t)}),t.da.push(function(){var e=I(function*(n){n?(t.ma.N_(),yield Uu(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(Ta,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class oS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new oS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bu(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Po(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}class wa{static emptySet(e){return new wa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=vh(),this.sortedSet=new nt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class hH{constructor(){this.fa=new nt(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ba{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ba(e,n,wa.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class sfe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class afe{constructor(){this.queries=fH(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=z(n),o=i.queries;i.queries=fH(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new L(N.ABORTED,"Firestore shutting down"))}}function fH(){return new Ui(t=>IB(t),_h)}function sS(t,e){return aS.apply(this,arguments)}function aS(){return(aS=I(function*(t,e){const n=z(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new sfe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Bu(s,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&lS(n)})).apply(this,arguments)}function cS(t,e){return uS.apply(this,arguments)}function uS(){return(uS=I(function*(t,e){const n=z(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function cfe(t,e){const n=z(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&lS(n)}function ufe(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function lS(t){t.Da.forEach(e=>{e.next()})}var dS,pH;(pH=dS||(dS={})).Fa="default",pH.Cache="cache";class hS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dS.Cache}}class yH{constructor(e){this.key=e}}class vH{constructor(e){this.key=e}}class IH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ie(),this.mutatedKeys=Ie(),this.Xa=TB(e),this.eu=new wa(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new hH,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=yh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),T=!0):this.iu(f,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(c||u)&&(a=!0)),T&&(g?(s=s.add(g),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:T})}};return v(g)-v(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new ba(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hH,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ie(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new vH(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new yH(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ie();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const zo="SyncEngine";class lfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dfe{constructor(e){this.key=e,this.lu=!1}}class hfe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ui(a=>IB(a),_h),this.Tu=new Map,this.Iu=new Set,this.du=new nt(q.comparator),this.Eu=new Map,this.Au=new EC,this.Ru={},this.Vu=new Map,this.mu=va.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function ffe(t,e){return pS.apply(this,arguments)}function pS(){return(pS=I(function*(t,e,n=!0){const r=F_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield EH(r,e,n,!0),i})).apply(this,arguments)}function pfe(t,e){return gS.apply(this,arguments)}function gS(){return(gS=I(function*(t,e){const n=F_(t);yield EH(n,e,!0,!1)})).apply(this,arguments)}function EH(t,e,n,r){return mS.apply(this,arguments)}function mS(){return(mS=I(function*(t,e,n,r){const i=yield function Ou(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Bi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,vn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function _S(t,e,n,r,i){return yS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&V_(t.remoteStore,i),a})).apply(this,arguments)}function yS(){return yS=I(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=I(function*(T,A,D,F){let W=A.view.nu(D);W.Ds&&(W=yield P_(T.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,W)));const Y=F&&F.targetChanges.get(A.targetId),te=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges(W,T.isPrimaryClient,Y,te);return RS(T,A.targetId,C._u),C.snapshot}),function v(T,A,D,F){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield P_(t.localStore,e,!0),s=new IH(e,o.qs),a=s.nu(o.documents),c=Ch.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);RS(t,n,u._u);const d=new lfe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),yS.apply(this,arguments)}function gfe(t,e,n){return vS.apply(this,arguments)}function vS(){return(vS=I(function*(t,e,n){const r=z(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!_h(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fu(r.remoteStore,i.targetId),$u(r,i.targetId)}).catch(Mo))):($u(r,i.targetId),yield Vu(r.localStore,i.targetId,!0))})).apply(this,arguments)}function mfe(t,e){return IS.apply(this,arguments)}function IS(){return(IS=I(function*(t,e){const n=z(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fu(n.remoteStore,r.targetId))})).apply(this,arguments)}function ES(){return(ES=I(function*(t,e,n){const r=function jS(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ife.bind(null,e),e}(t);try{const i=yield function(s,a){const c=z(s),u=qe.now(),d=a.reduce((g,_)=>g.add(_.key),Ie());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Yn(),v=Ie();return c.Os.getEntries(g,d).next(T=>{_=T,_.forEach((A,D)=>{D.isValidDocument()||(v=v.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(T=>{h=T;const A=[];for(const D of a){const F=$de(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new ji(D.key,F,iB(F.value.mapValue),gt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(T=>{f=T;const A=T.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,T.batchId,A)})}).then(()=>({batchId:f.batchId,changes:bB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new nt(oe)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield $i(r,i.changes),yield Uu(r.remoteStore)}catch(i){const o=Bu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function TH(t,e){return TS.apply(this,arguments)}function TS(){return(TS=I(function*(t,e){const n=z(t);try{const r=yield function Ohe(t,e){const n=z(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var v,T,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(St.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),T=g,A=d,(0===(v=f).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=Yn(),u=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function z$(t,e,n){let r=Ie(),i=Ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Yn();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(RC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ee.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Z(s.lu,14607):i.removedDocuments.size>0&&(Z(s.lu,42227),s.lu=!1))}),yield $i(n,r,e)}catch(r){yield Mo(r)}})).apply(this,arguments)}function wH(t,e,n){const r=z(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=z(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&lS(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yfe(t,e,n){return wS.apply(this,arguments)}function wS(){return(wS=I(function*(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new nt(q.comparator);s=s.insert(o,ot.newNoDocument(o,ee.min()));const a=Ie().add(o),c=new bh(ee.min(),new Map,new nt(oe),s,a);yield TH(r,c),r.du=r.du.remove(o),r.Eu.delete(e),MS(r)}else yield Vu(r.localStore,e,!1).then(()=>$u(r,e,n)).catch(Mo)})).apply(this,arguments)}function vfe(t,e){return bS.apply(this,arguments)}function bS(){return(bS=I(function*(t,e){const n=z(t),r=e.batch.batchId;try{const i=yield function khe(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=P.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const T=u.docVersions.get(_);Z(null!==T,48541),v.version.compareTo(T)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);DS(n,r,null),AS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $i(n,i)}catch(i){yield Mo(i)}})).apply(this,arguments)}function Ife(t,e,n){return CS.apply(this,arguments)}function CS(){return(CS=I(function*(t,e,n){const r=z(t);try{const i=yield function(s,a){const c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(Z(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);DS(r,e,n),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $i(r,i)}catch(i){yield Mo(i)}})).apply(this,arguments)}function AS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function DS(t,e,n){const r=z(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function $u(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||bH(t,r)})}function bH(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(Fu(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),MS(t))}function RS(t,e,n){for(const r of n)r instanceof yH?(t.Au.addReference(r.key,e),Tfe(t,r)):r instanceof vH?(j(zo,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||bH(t,r.key)):Q(19791,{yu:r})}function Tfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(zo,"New document in limbo: "+n),t.Iu.add(r),MS(t))}function MS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(we.fromString(e)),r=t.mu.next();t.Eu.set(r,new dfe(n)),t.du=t.du.insert(n,r),V_(t.remoteStore,new Bi(vn(Eu(n.path)),r,"TargetPurposeLimboResolution",ur.ue))}}function $i(t,e,n){return PS.apply(this,arguments)}function PS(){return PS=I(function*(t,e,n){const r=z(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=DC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=I(function*(u,d){const h=z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(d,g=>P.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>P.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Po(f))throw f;j(RC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),T=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,T)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),PS.apply(this,arguments)}function wfe(t,e){return NS.apply(this,arguments)}function NS(){return(NS=I(function*(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){j(zo,"User change. New user:",e.toKey());const r=yield H$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $i(n,r.Bs)}var o})).apply(this,arguments)}function bfe(t,e){const n=z(t),r=n.Eu.get(e);if(r&&r.lu)return Ie().add(r.key);{let i=Ie();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function F_(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yfe.bind(null,e),e.hu.J_=cfe.bind(null,e.eventManager),e.hu.pu=ufe.bind(null,e.eventManager),e}let U_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return I(function*(){r.serializer=Ea(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function $$(t,e,n,r){return new xhe(t,e,n,r)}(this.persistence,new B$,n.initialUser,this.serializer)}Du(n){return new TC(D_.Vi,this.serializer)}bu(n){return new eH}terminate(){var n=this;return I(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class BS extends U_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return Z(this.persistence.referenceDelegate instanceof R_,46915),new P$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new TC(r=>R_.Vi(r,n),this.serializer)}}let Hu=(()=>{class t{initialize(n,r){var i=this;return I(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>wH(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=wfe.bind(null,i.syncEngine),yield rS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new afe}createDatastore(n){const r=Ea(n.databaseInfo.databaseId),i=new Hhe(n.databaseInfo);return new Whe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>wH(this.syncEngine,r,0),c=nH.C()?new nH:new Uhe,new Qhe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new hfe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return I(function*(){var r,i,o;yield(o=I(function*(a){const c=z(a);j(Ta,"RemoteStore shutting down."),c.Ia.add(5),yield Lu(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class j_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Go="FirestoreClient";class Lfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=Pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=I(function*(c){j(Go,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j(Go,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(I(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Bu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function HS(t,e){return qS.apply(this,arguments)}function qS(){return qS=I(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j(Go,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=I(function*(o){r.isEqual(o)||(yield H$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{kn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{kn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),qS.apply(this,arguments)}function RH(t,e){return zS.apply(this,arguments)}function zS(){return(zS=I(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function GS(t){return WS.apply(this,arguments)}(t);j(Go,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function WS(){return(WS=I(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Go,"Using user provided OfflineComponentProvider");try{yield HS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;kn("Error using user provided cache. Falling back to memory cache: "+e),yield HS(t,new U_)}}else j(Go,"Using default OfflineComponentProvider"),yield HS(t,new BS(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function B_(t){return KS.apply(this,arguments)}function KS(){return(KS=I(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Go,"Using user provided OnlineComponentProvider"),yield RH(t,t._uninitializedComponentsProvider._online)):(j(Go,"Using default OnlineComponentProvider"),yield RH(t,new Hu))),t._onlineComponents})).apply(this,arguments)}function zu(t){return YS.apply(this,arguments)}function YS(){return(YS=I(function*(t){const e=yield B_(t),n=e.eventManager;return n.onListen=ffe.bind(null,e.syncEngine),n.onUnlisten=gfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mfe.bind(null,e.syncEngine),n})).apply(this,arguments)}function VH(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const LH=new Map,FH="firestore.googleapis.com";class jH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FH,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Ble(t,e,n,r){if(!0===e&&!0===r)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=VH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jH(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Nle;switch(r.type){case"firstParty":return new Vle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return I(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=LH.get(n);r&&(j("ComponentProvider","Removing Datastore"),LH.delete(n),r.terminate())}(this),Promise.resolve()}}class Zt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zt(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(na(n,Ye._jsonSchema))return new Ye(e,r||null,new q(we.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:Ut("string",Ye._jsonSchemaVersion),referencePath:Ut("string")};class ci extends Zt{constructor(e,n,r){super(e,n,Eu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new q(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function BH(t,e,...n){if(t=Ft(t),kb("collection","path",e),t instanceof Vh){const r=we.fromString(e,...n);return gj(r),new ci(t,null,r)}{if(!(t instanceof Ye||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return gj(r),new ci(t.firestore,null,r)}}function JS(t,e,...n){if(t=Ft(t),1===arguments.length&&(e=Pb.newId()),kb("doc","path",e),t instanceof Vh){const r=we.fromString(e,...n);return pj(r),new Ye(t,null,new q(r))}{if(!(t instanceof Ye||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return pj(r),new Ye(t.firestore,t instanceof ci?t.converter:null,new q(r))}}const HH="AsyncQueue";class qH{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jC(this,"async_queue_retry"),this.oc=()=>{const r=O_();r&&j(HH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=O_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=O_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Yt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return I(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!Po(n))throw n;j(HH,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Pt("INTERNAL UNHANDLED ERROR: ",zH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=oS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:zH(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return I(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function zH(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Ze extends Vh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return I(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new qH(n),e._firestoreClient=void 0,yield n}})()}}function Jfe(t,e){const n="object"==typeof t?t:WU(),r="string"==typeof t?t:e||dh,i=$m(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=bU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function Qfe(t,e,n,r={}){var i;t=be(t,Vh);const o=ru(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(DU(`https://${c}`),MU("Firestore",!0)),s.host!==FH&&s.host!==c&&kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Ni(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Qt.MOCK_USER;else{d=function Hce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lm(JSON.stringify({alg:"none",type:"JWT"})),Lm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(f)}t._authCredentials=new xle(new dj(d,h))}}(i,...o)}return i}function vt(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function GH(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Ede(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VH(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Lfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(St.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lr(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(na(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Ut("string",lr._jsonSchemaVersion),bytes:Ut("string")};class Ca{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sa{constructor(e){this._methodName=e}}class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(na(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:Ut("string",ui._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};class Vr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(na(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new Vr(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:Ut("string",Vr._jsonSchemaVersion),vectorValues:Ut("object")};const epe=/^__.*__$/;class tpe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class QH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:t})}}class $_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return z_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(YH(this.Ec)&&epe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class npe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ea(e)}Dc(e,n,r,i=!1){return new $_({Ec:e,methodName:n,bc:r,path:ft.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aa(t){const e=t._freezeSettings(),n=Ea(t._databaseId);return new npe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function H_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);oA("Data must be an object, but it was:",s,r);const a=XH(r,s);let c,u;if(o.merge)c=new Qn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=Uh(e,h,n);if(!s.contains(f))throw new L(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);t4(d,f)||d.push(f)}c=new Qn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new tpe(new an(a),c,u)}class Fh extends Sa{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}class XS extends Sa{_toFieldTransform(e){return new Eh(e.path,new bu)}isEqual(e){return e instanceof XS}}function Da(t,e){if(e4(t=Ft(t)))return oA("Unsupported field value:",e,t),XH(t,e);if(t instanceof Sa)return function(r,i){if(!YH(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Da(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Ft(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return AB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=qe.fromDate(r);return{timestampValue:Du(i.serializer,o)}}if(r instanceof qe){const o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Du(i.serializer,o)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:WB(i.serializer,r._byteString)};if(r instanceof Ye){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vr)return s=r,a=i,{mapValue:{fields:{[Wb]:{stringValue:Kb},[yu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return iC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${zm(r)}`)}(t,e)}function XH(t,e){const n={};return $j(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(r,i)=>{const o=Da(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function e4(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ui||t instanceof lr||t instanceof Ye||t instanceof Sa||t instanceof Vr)}function oA(t,e,n){if(!e4(n)||!mj(n)){const r=zm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function Uh(t,e,n){if((e=Ft(e))instanceof Ca)return e._internalPath;if("string"==typeof e)return q_(t,e);throw z_("Field path arguments must be of type string or ",t,!1,void 0,n)}const rpe=new RegExp("[~\\*/\\[\\]]");function q_(t,e,n){if(e.search(rpe)>=0)throw z_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ca(...e.split("."))._internalPath}catch{throw z_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function z_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+t+c)}function t4(t,e){return t.some(n=>n.isEqual(e))}class jh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ipe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ipe extends jh{data(){return super.data()}}function G_(t,e){return"string"==typeof e?q_(t,e):e instanceof Ca?e._internalPath:e._delegate._internalPath}class sA{}class Bh extends sA{}class $h extends Bh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $h(e,n,r)}_apply(e){const n=this._parse(e);return s4(e._query,n),new Zt(e.firestore,e.converter,nC(e._query,n))}_parse(e){const n=Aa(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){o4(h,d);const _=[];for(const v of h)_.push(i4(c,o,v));f={arrayValue:{values:_}}}else f=i4(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||o4(h,d),f=function ZH(t,e,n,r=!1){return Da(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Ae.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Wu extends sA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Ge.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)s4(s,c),s=nC(s,c)}(e._query,n),new Zt(e.firestore,e.converter,nC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aA extends Bh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new aA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gh(o,s)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Fi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function i4(t,e,n){if("string"==typeof(n=Ft(n))){if(""===n)throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tC(e)&&-1!==n.indexOf("/"))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return la(t,new q(r))}if(n instanceof Ye)return la(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zm(n)}.`)}function o4(t,e){if(!Array.isArray(t)||0===t.length)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new L(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c4{convertValue(e,n="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[yu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>pt(s.doubleValue));return new Vr(o)}convertGeoPoint(e){return new ui(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=r_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const n=Vi(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);Z(i$(r),9688,{name:e});const i=new ua(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dr extends jh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new J_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(G_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",dr._jsonSchema={type:Ut("string",dr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class J_ extends dr{data(e={}){return super.data(e)}}class hr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new J_(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new J_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new J_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:cpe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pb.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function cpe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}hr._jsonSchemaVersion="firestore/querySnapshot/1.0",hr._jsonSchema={type:Ut("string",hr._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ko extends c4{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function hpe(t,e){const n=be(t.firestore,Ze),r=JS(t),i=function Y_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return Hh(n,[H_(Aa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function Hh(t,e){return function(r,i){const o=new Yt;return r.asyncQueue.enqueueAndForget(I(function*(){return function _fe(t,e,n){return ES.apply(this,arguments)}(yield function QS(t){return B_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(vt(t),e)}function d4(){return new XS("serverTimestamp")}!function(e,n=!0){su=ou,iu(new Zs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ze(new kle(r.getProvider("auth-internal")),new Lle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ki(cj,"4.8.0",e),ki(cj,"4.8.0","esm2017")}();const Dpe=function g4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},m4=new Kd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),X_=new gb("@firebase/auth");function ey(t,...e){X_.logLevel<=Se.ERROR&&X_.error(`Auth (${ou}): ${t}`,...e)}function Jn(t,...e){throw hA(t,...e)}function On(t,...e){return hA(t,...e)}function dA(t,e,n){const r=Object.assign(Object.assign({},Dpe()),{[e]:n});return new Kd("auth","Firebase",r).create(e,{appName:t.name})}function Xt(t){return dA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m4.create(t,...e)}function $(t,e,...n){if(!t)throw hA(e,...n)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ey(e),new Error(e)}function Hi(t,e){t||li(e)}function Gh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function _4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Mpe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function fA(){return"http:"===_4()||"https:"===_4()}()||function Qce(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Wh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=function Gce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}()||function Yce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Mpe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pA(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class y4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Npe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kpe=new Wh(3e4,6e4);function st(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function at(t,e,n,r){return gA.apply(this,arguments)}function gA(){return(gA=I(function*(t,e,n,r,i={}){return v4(t,i,I(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Qd(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function Kce(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ru(t.emulatorConfig.host)&&(u.credentials="include"),y4.fetch()(yield I4(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function v4(t,e,n){return mA.apply(this,arguments)}function mA(){return(mA=I(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Npe),e);try{const i=new Vpe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Kh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Kh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Kh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Kh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw dA(t,d,u);Jn(t,d)}}catch(i){if(i instanceof Pi)throw i;Jn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function qi(t,e,n,r){return _A.apply(this,arguments)}function _A(){return(_A=I(function*(t,e,n,r,i={}){const o=yield at(t,e,n,r,i);return"mfaPendingCredential"in o&&Jn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function I4(t,e,n,r){return yA.apply(this,arguments)}function yA(){return(yA=I(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?pA(t.config,i):`${t.config.apiScheme}://${i}`;return xpe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class Vpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),kpe.get())})}}function Kh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}function EA(){return(EA=I(function*(t,e){return at(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function ty(t,e){return wA.apply(this,arguments)}function wA(){return(wA=I(function*(t,e){return at(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Qh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bA(){return(bA=I(function*(t,e=!1){const n=Ft(t),r=yield n.getIdToken(e),i=ny(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Qh(CA(i.auth_time)),issuedAtTime:Qh(CA(i.iat)),expirationTime:Qh(CA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function CA(t){return 1e3*Number(t)}function ny(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return ey("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gd(n);return i?JSON.parse(i):(ey("Failed to decode base64 JWT payload"),null)}catch(i){return ey("Caught error parsing JWT payload as JSON",i?.toString()),null}}function C4(t){const e=ny(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zi(t,e){return SA.apply(this,arguments)}function SA(){return(SA=I(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Pi&&function Bpe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class $pe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(I(function*(){yield n.iteration()}),r)}iteration(){var e=this;return I(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class AA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qh(this.lastLoginAt),this.creationTime=Qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yh(t){return DA.apply(this,arguments)}function DA(){return(DA=I(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield zi(t,ty(n,{idToken:r}));$(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?S4(o.providerUserInfo):[],a=function qpe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new AA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function RA(){return(RA=I(function*(t){const e=Ft(t);yield Yh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function S4(t){return t.map(e=>{var{providerId:n}=e,r=fm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function MA(){return(MA=I(function*(t,e){const n=yield v4(t,{},I(function*(){const r=Qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield I4(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ru(t.emulatorConfig.host)&&(c.credentials="include"),y4.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function PA(){return(PA=I(function*(t,e){return at(t,"POST","/v2/accounts:revokeToken",st(t,e))})).apply(this,arguments)}class Qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(0!==e.length,"internal-error");const n=C4(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return I(function*(r,i=!1){return i||!n.accessToken||n.isExpired?($(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return I(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function zpe(t,e){return MA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Qu;return r&&($("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&($("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&($("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qu,this.toJSON())}_performRefresh(){return li("not implemented")}}function Yo(t,e){$("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new AA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return I(function*(){const r=yield zi(n,n.stsTokenManager.getToken(n.auth,e));return $(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function jpe(t){return bA.apply(this,arguments)}(this,e)}reload(){return function Hpe(t){return RA.apply(this,arguments)}(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return I(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Yh(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return I(function*(){if(kr(e.auth.app))return Promise.reject(Xt(e.auth));const n=yield e.getIdToken();return yield zi(e,function Fpe(t,e){return EA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,T=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:W,isAnonymous:Y,providerData:te,stsTokenManager:C}=n;$(F&&C,e,"internal-error");const E=Qu.fromJSON(this.name,C);$("string"==typeof F,e,"internal-error"),Yo(h,e.name),Yo(f,e.name),$("boolean"==typeof W,e,"internal-error"),$("boolean"==typeof Y,e,"internal-error"),Yo(g,e.name),Yo(_,e.name),Yo(v,e.name),Yo(T,e.name),Yo(A,e.name),Yo(D,e.name);const w=new Lr({uid:F,auth:e,email:f,emailVerified:W,displayName:h,isAnonymous:Y,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:A,lastLoginAt:D});return te&&Array.isArray(te)&&(w.providerData=te.map(S=>Object.assign({},S))),T&&(w._redirectEventId=T),w}static _fromIdTokenResponse(e,n){return I(function*(r,i,o=!1){const s=new Qu;s.updateFromServerResponse(i);const a=new Lr({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Yh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return I(function*(){const i=n.users[0];$(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?S4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Qu;a.updateFromIdToken(r);const c=new Lr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new AA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const A4=new Map;function Gi(t){Hi(t instanceof Function,"Expected a class definition");let e=A4.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A4.set(t,e),e)}const D4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(function*(){return!0})()}_set(n,r){var i=this;return I(function*(){i.storage[n]=r})()}_get(n){var r=this;return I(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return I(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ry(t,e,n){return`firebase:${t}:${e}:${n}`}class Yu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ry(this.userKey,i.apiKey,o),this.fullPersistenceKey=ry("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return I(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield ty(e.auth,{idToken:n}).catch(()=>{});return r?Lr._fromGetAccountInfoResponse(e.auth,r,n):null}return Lr._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return I(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return I(function*(r,i,o="authUser"){if(!i.length)return new Yu(Gi(D4),r,o);const s=(yield Promise.all(i.map(function(){var h=I(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Gi(D4);const c=ry(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield ty(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield Lr._fromGetAccountInfoResponse(r,_,f)}else g=Lr._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=I(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new Yu(a,r,o)):new Yu(a,r,o)}).apply(this,arguments)}}function R4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O4(e))return"Blackberry";if(V4(e))return"Webos";if(P4(e))return"Safari";if((e.includes("chrome/")||N4(e))&&!e.includes("edge/"))return"Chrome";if(k4(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function M4(t=Mt()){return/firefox\//i.test(t)}function P4(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N4(t=Mt()){return/crios\//i.test(t)}function x4(t=Mt()){return/iemobile/i.test(t)}function k4(t=Mt()){return/android/i.test(t)}function O4(t=Mt()){return/blackberry/i.test(t)}function V4(t=Mt()){return/webos/i.test(t)}function NA(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L4(t=Mt()){return NA(t)||k4(t)||V4(t)||O4(t)||/windows phone/i.test(t)||x4(t)}function F4(t,e=[]){let n;switch(t){case"Browser":n=R4(Mt());break;case"Worker":n=`${R4(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ou}/${r}`}class Qpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return I(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function xA(){return(xA=I(function*(t,e={}){return at(t,"GET","/v2/passwordPolicy",st(t,e))})).apply(this,arguments)}class Zpe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Xpe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U4(this),this.idTokenSubscription=new U4(this),this.beforeStateQueue=new Qpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(I(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield Yu.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return I(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return I(function*(){try{const r=yield ty(n,{idToken:e}),i=yield Lr._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return I(function*(){var r;if(kr(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return $(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return I(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return I(function*(){try{yield Yh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ppe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return I(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return I(function*(){if(kr(n.app))return Promise.reject(Xt(n));const r=e?Ft(e):null;return r&&$(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return I(function*(r,i=!1){if(!n._deleted)return r&&$(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(I(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return I(function*(){return kr(e.app)?Promise.reject(Xt(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return kr(this.app)?Promise.reject(Xt(this)):this.queue(I(function*(){yield n.assertedPersistence.setPersistence(Gi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return I(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return I(function*(){const n=yield function Ype(t){return xA.apply(this,arguments)}(e),r=new Zpe(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return I(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Gpe(t,e){return PA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return I(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return I(function*(){if(!n.redirectPersistenceManager){const r=e&&Gi(e)||n._popupRedirectResolver;$(r,n,"argument-error"),n.redirectPersistenceManager=yield Yu.create(n,[Gi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return I(function*(){var r,i;return n._isInitialized&&(yield n.queue(I(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return I(function*(){if(e===n.currentUser)return n.queue(I(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return I(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return I(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return I(function*(){var n;if(kr(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Rpe(t,...e){X_.logLevel<=Se.WARN&&X_.warn(`Auth (${ou}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function xt(t){return Ft(t)}class U4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function rue(t,e){const n=new iue(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jh={loadJS:()=>I(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j4(t){return`__${t}${Math.floor(1e6*Math.random())}`}function H4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function q4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class ef{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,n){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}function Wi(t,e){return JA.apply(this,arguments)}function JA(){return(JA=I(function*(t,e){return qi(t,"POST","/v1/accounts:signInWithIdp",st(t,e))})).apply(this,arguments)}class Ju extends ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ju(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=fm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ju(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Wi(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wi(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qd(n)}return e}}class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class K4 extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let kge=(()=>{class t extends K4{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Ju._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return I(function*(i,o,s,a=!1){const c=yield Lr._fromIdTokenResponse(i,s,a),u=Y4(s);return new br({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return I(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Y4(r);return new br({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function Y4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class cy extends Pi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cy.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cy(e,n,r,i)}}function J4(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?cy._fromErrorAndOperation(t,o,e,r):o})}function sD(t,e){return aD.apply(this,arguments)}function aD(){return(aD=I(function*(t,e,n=!1){const r=yield zi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return br._forOperation(t,"link",r)})).apply(this,arguments)}function X4(t,e){return uD.apply(this,arguments)}function uD(){return(uD=I(function*(t,e,n=!1){const{auth:r}=t;if(kr(r.app))return Promise.reject(Xt(r));const i="reauthenticate";try{const o=yield zi(t,J4(r,i,e,t),n);$(o.idToken,r,"internal-error");const s=ny(o.idToken);$(s,r,"internal-error");const{sub:a}=s;return $(t.uid===a,r,"user-mismatch"),br._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Jn(r,"user-mismatch"),o}})).apply(this,arguments)}function eq(t,e){return lD.apply(this,arguments)}function lD(){return(lD=I(function*(t,e,n=!1){if(kr(t.app))return Promise.reject(Xt(t));const r="signIn",i=yield J4(t,r,e),o=yield br._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const dy="__sak";class iq{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dy,"1"),this.storage.removeItem(dy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const rme=(()=>{class t extends iq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Kpe(){return function Jce(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return I(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return I(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return I(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),oq=(()=>{class t extends iq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let ome=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return I(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=I(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function ime(t){return Promise.all(t.map(function(){var e=I(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function hy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class sme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return I(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=hy("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(v.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Bt(){return window}function BD(){return typeof Bt().WorkerGlobalScope<"u"&&"function"==typeof Bt().importScripts}function $D(){return($D=I(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sq="firebaseLocalStorageDb",fy="firebaseLocalStorage",aq="fbase_key";class of{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function py(t,e){return t.transaction([fy],e?"readwrite":"readonly").objectStore(fy)}function HD(){const t=indexedDB.open(sq,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fy,{keyPath:aq})}catch(i){n(i)}}),t.addEventListener("success",I(function*(){const r=t.result;r.objectStoreNames.contains(fy)?e(r):(r.close(),yield function hme(){const t=indexedDB.deleteDatabase(sq);return new of(t).toPromise()}(),e(yield HD()))}))})}function cq(t,e,n){return qD.apply(this,arguments)}function qD(){return(qD=I(function*(t,e,n){const r=py(t,!0).put({[aq]:e,value:n});return new of(r).toPromise()})).apply(this,arguments)}function zD(){return(zD=I(function*(t,e){const n=py(t,!1).get(e),r=yield new of(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function uq(t,e){const n=py(t,!0).delete(e);return new of(n).toPromise()}const mme=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return I(function*(){return n.db||(n.db=yield HD()),n.db})()}_withRetries(n){var r=this;return I(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return I(function*(){return BD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return I(function*(){n.receiver=ome._getInstance(function lme(){return BD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=I(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=I(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return I(function*(){var r,i;if(n.activeServiceWorker=yield function cme(){return $D.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new sme(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return I(function*(){if(r.sender&&r.activeServiceWorker&&function ume(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return I(function*(){try{if(!indexedDB)return!1;const n=yield HD();return yield cq(n,dy,"1"),yield uq(n,dy),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return I(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return I(function*(){return i._withPendingWrite(I(function*(){return yield i._withRetries(o=>cq(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return I(function*(){const i=yield r._withRetries(o=>function fme(t,e){return zD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return I(function*(){return r._withPendingWrite(I(function*(){return yield r._withRetries(i=>uq(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return I(function*(){const r=yield n._withRetries(s=>{const a=py(s,!1).getAll();return new of(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(I(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Ma(t,e){return e?Gi(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}j4("rcb"),new Wh(3e4,6e4);class nR extends ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Cme(t){return eq(t.auth,new nR(t),t.bypassAuthState)}function Sme(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),X4(n,new nR(t),t.bypassAuthState)}function Ame(t){return rR.apply(this,arguments)}function rR(){return(rR=I(function*(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),sD(n,new nR(t),t.bypassAuthState)})).apply(this,arguments)}class dq{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=I(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return I(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cme;case"linkViaPopup":case"linkViaRedirect":return Ame;case"reauthViaPopup":case"reauthViaRedirect":return Sme;default:Jn(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dme=new Wh(2e3,1e4);function iR(){return(iR=I(function*(t,e,n){if(kr(t.app))return Promise.reject(On(t,"operation-not-supported-in-this-environment"));const r=xt(t);!function Ku(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Jn(t,"argument-error"),dA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Ki);const i=Ma(r,n);return new aR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let aR=(()=>{class t extends dq{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return I(function*(){const r=yield n.execute();return $(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return I(function*(){Hi(1===n.filter.length,"Popup operations only handle one event");const r=hy();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(On(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,Dme.get())};n()}}return t.currentPopupAction=null,t})();const af=new Map;class Pme extends dq{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return I(function*(){let r=af.get(n.auth._key());if(!r){try{const o=(yield function Nme(t,e){return cR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}af.set(n.auth._key(),r)}return n.bypassAuthState||af.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return I(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return I(function*(){})()}cleanUp(){}}function cR(){return(cR=I(function*(t,e){const n=function fq(t){return ry("pendingRedirect",t.config.apiKey,t.name)}(e),r=function hq(t){return Gi(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function xme(t,e){af.set(t._key(),e)}function pq(t,e){return gR.apply(this,arguments)}function gR(){return(gR=I(function*(t,e,n=!1){if(kr(t.app))return Promise.reject(Xt(t));const r=xt(t),i=Ma(r,e),s=yield new Pme(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Fme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Ume(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _q(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_q(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mq(e))}saveEventToCache(e){this.cachedEventUids.add(mq(e)),this.lastProcessedEventTime=Date.now()}}function mq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _q({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function _R(){return(_R=I(function*(t,e={}){return at(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Bme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$me=/^https?/;function yR(){return yR=I(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function jme(t){return _R.apply(this,arguments)}(t);for(const n of e)try{if(qme(n))return}catch{}Jn(t,"unauthorized-domain")}),yR.apply(this,arguments)}function qme(t){const e=Gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!$me.test(n))return!1;if(Bme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const zme=new Wh(3e4,6e4);function yq(){const t=Bt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Gme(t){return new Promise((e,n)=>{var r,i,o;function s(){yq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yq(),n(On(t,"network-request-failed"))},timeout:zme.get()})}if(null!==(i=null===(r=Bt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Bt().gapi)||void 0===o||!o.load){const a=j4("iframefcb");return Bt()[a]=()=>{gapi.load?s():n(On(t,"network-request-failed"))},function kA(t){return Jh.loadJS(t)}(`${function rge(){return Jh.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw gy=null,e})}let gy=null;const Kme=new Wh(5e3,15e3),Jme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xme(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:ou},i=Zme.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qd(r).slice(1)}`}function vR(){return vR=I(function*(t){const e=yield function Wme(t){return gy=gy||Gme(t),gy}(t),n=Bt().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:Xme(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jme,dontclear:!0},r=>new Promise(function(){var i=I(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),c=Bt().setTimeout(()=>{s(a)},Kme.get());function u(){Bt().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),vR.apply(this,arguments)}const t_e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const l_e=encodeURIComponent("fac");function Iq(t,e,n,r,i,o){return IR.apply(this,arguments)}function IR(){return(IR=I(function*(t,e,n,r,i,o){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ou,eventId:i};if(e instanceof Ki){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function nue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof K4){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${l_e}=${encodeURIComponent(c)}`:"";return`${function d_e({config:t}){return t.emulator?pA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Qd(a).slice(1)}${u}`})).apply(this,arguments)}const ER="webStorageSupport",f_e=class h_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oq,this._completeRedirectFn=pq,this._overrideRedirectResult=xme}_openPopup(e,n,r,i){var o=this;return I(function*(){var s;Hi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield Iq(e,n,r,Gh(),i);return function s_e(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},t_e),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Mt().toLowerCase();n&&(a=N4(u)?"_blank":n),M4(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Wpe(t=Mt()){var e;return NA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function a_e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new vq(null);const h=window.open(e||"",a,d);$(h,t,"popup-blocked");try{h.focus()}catch{}return new vq(h)}(e,a,hy())})()}_openRedirect(e,n,r,i){var o=this;return I(function*(){return yield o._originValidation(e),function ame(t){Bt().location.href=t}(yield Iq(e,n,r,Gh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Hi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return I(function*(){const r=yield function e_e(t){return vR.apply(this,arguments)}(e),i=new Fme(e);return r.register("authEvent",o=>($(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ER,{type:ER},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[ER];void 0!==s&&n(!!s),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Hme(t){return yR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return L4()||P4()||NA()}};var bq="@firebase/auth";class p_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return I(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const __e=SU("authIdTokenMaxAge")||300;let Sq=null;const y_e=t=>function(){var e=I(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>__e)return;const o=r?.token;Sq!==o&&(Sq=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function v_e(t=WU()){const e=$m(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function hge(t,e){const n=$m(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Ni(n.getOptions(),e??{}))return i;Jn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:f_e,persistence:[mme,rme,oq]}),r=SU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=y_e(o.toString());(function Qge(t,e,n){Ft(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Kge(t,e,n,r){Ft(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=bU("auth");return i&&function pge(t,e,n){const r=xt(t);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=H4(e),{host:s,port:a}=function gge(t){const e=H4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:q4(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:q4(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return $(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void $(Ni(u,r.config.emulator)&&Ni(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ru(s)?(DU(`${o}//${s}${c}`),MU("Auth",!0)):i||function mge(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function ege(t){Jh=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=On("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function I_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function m_e(t){iu(new Zs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F4(t)},u=new Xpe(r,i,o,c);return function fge(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),iu(new Zs("auth-internal",e=>{const n=xt(e.getProvider("auth").getImmediate());return new p_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(bq,"1.10.8",function g_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),ki(bq,"1.10.8","esm2017")}("Browser");const Aq_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Pa=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new kge,this.user=_t(null),this.canWrite=_t(!1),this.authLoading=_t(!0),this.ensureFirebaseConfig();const i=GU(Aq_firebase);this.db=Jfe(i),this.auth=v_e(i),function Yge(t,e,n,r){Ft(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=I(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return I(function*(){yield function Rme(t,e,n){return iR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return I(function*(){yield function Jge(t){return Ft(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return I(function*(){r.ensureSignedIn();const o=function ope(t,e,...n){let r=[];e instanceof sA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof Wu).length,a=o.filter(c=>c instanceof $h).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(BH(r.db,"recipes"),function spe(t,e="asc"){const n=e,r=G_("orderBy",t);return aA._create(r,n)}("updated_at","desc"));return(yield function upe(t){t=be(t,Zt);const e=be(t.firestore,Ze),n=vt(e),r=new Ko(e);return function n4(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function kH(t,e,n={}){const r=new Yt;return t.asyncQueue.enqueueAndForget(I(function*(){return function(o,s,a,c,u){const d=new j_({next:f=>{d.Ou(),s.enqueueAndForget(()=>cS(o,h)),f.fromCache&&"server"===c.source?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new hS(a,d,{includeMetadataChanges:!0,ka:!0});return sS(o,h)}(yield zu(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new hr(e,r,t,i))}(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at;return"string"!=typeof u?null:{id:a.id,raw_text:u,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield hpe(BH(i.db,"recipes"),{raw_text:o,updated_at:d4(),updated_by:i.user()?.email??""})).id,raw_text:o,updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return I(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield function lpe(t,e,n,...r){t=be(t,Ye);const i=be(t.firestore,Ze),o=Aa(i);let s;return s="string"==typeof(e=Ft(e))||e instanceof Ca?function iA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[Uh(e,r,n)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(Uh(e,o[f])),c.push(o[f+1]);const u=[],d=an.empty();for(let f=a.length-1;f>=0;--f)if(!t4(u,a[f])){const g=a[f];let _=c[f];_=Ft(_);const v=s.gc(g);if(_ instanceof Fh)u.push(g);else{const T=Da(_,v);null!=T&&(u.push(g),d.set(g,T))}}const h=new Qn(u);return new QH(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function rA(t,e,n,r){const i=t.Dc(1,e,n);oA("Data must be an object, but it was:",i,r);const o=[],s=an.empty();xo(r,(c,u)=>{const d=q_(e,c,n);u=Ft(u);const h=i.gc(d);if(u instanceof Fh)o.push(d);else{const f=Da(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new Qn(o);return new QH(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),Hh(i,[s.toMutation(t._key,gt.exists(!0))])}(JS(o.db,"recipes",r),{raw_text:s,updated_at:d4(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}deleteRecipe(r){var i=this;return I(function*(){i.ensureCanWrite();try{yield function dpe(t){return Hh(be(t.firestore,Ze),[new Au(t._key,gt.none())])}(JS(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(Aq_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const E_e=["postup","kroky","p\u0159\xedprava"],Dq=/^[\-\u2013\u2022*]\s*/,T_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,w_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,b_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function _y(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function C_e(t){const e=Rq(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=Rq(e),o=function S_e(t){return t.findIndex(e=>E_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:A_e(s,n),steps:k_e(a),warnings:n}}function Rq(t){return t.findIndex(e=>e.length>0)}function A_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(Mq(o))i&&r.push(i),i={title:R_e(o),items:[]};else if(D_e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=M_e(o);void 0===s.amount&&x_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function D_e(t){return!Mq(t)}function Mq(t){return/:$/.test(t.trim())}function R_e(t){return t.replace(/:$/,"").trim()}function M_e(t){const e=t.replace(Dq,"").trim(),n=[],r=e.match(/\(([^)]+)\)\s*$/);r&&void 0!==r.index&&n.push({start:r.index,value:r[1].trim()});const i=e.match(/\s-\s*(.+)$/);if(void 0!==i?.index){const f=i[1].trim();f&&n.push({start:i.index,value:f})}const o=function P_e(t){for(let e=0;e<t.length;e+=1){if(","!==t[e])continue;const r=e+1<t.length?t[e+1]:"";if(!/\d/.test(e>0?t[e-1]:"")||!/\d/.test(r))return e}return-1}(e);if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function N_e(t){let e=t.trim();const r=e.match(T_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(w_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function x_e(t){const e=t.toLowerCase();return b_e.some(n=>e.startsWith(n))}function k_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(Dq,"").trim()).filter(Boolean)}let Na=(()=>{var t;class e{constructor(){this.api=O(Pa),this.recipes=_t([]),this.selectedRecipeId=_t(null),this.rawText=_t(""),this.searchQuery=_t(""),this.loading=_t(!1),this.saving=_t(!1),this.deleting=_t(!1),this.error=_t(""),this.parsed=yt(()=>_y(this.rawText())),this.selectedRecipe=yt(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=yt(()=>{const r=this.selectedRecipe();return r?_y(r.raw_text):null}),this.searchResults=yt(()=>{const r=this.searchQuery().trim();if(!r)return[];const i=Pq(r);return this.recipes().map(s=>{const a=_y(s.raw_text),c=function O_e(t){const e=t.ingredientSections.flatMap(r=>r.items.map(i=>({label:r.title,text:i.raw}))),n=t.steps.map((r,i)=>({label:`Krok ${i+1}`,text:r}));return[...e,...n]}(a),u=Nq(a.title,i),d=c.map(f=>({...f,score:Nq(f.text,i)})).filter(f=>f.score>0).sort((f,g)=>g.score-f.score);return{recipe:s,parsed:a,titleMatch:u,bestContent:d[0],totalScore:u>0?u+200:d[0]?.score??0}}).filter(s=>s.totalScore>0).sort((s,a)=>s.titleMatch>0&&0===a.titleMatch?-1:0===s.titleMatch&&a.titleMatch>0?1:a.totalScore-s.totalScore).map(s=>({recipe:s.recipe,titleParts:kq(s.parsed.title,i),contentLabel:s.bestContent?.label??"",contentParts:s.bestContent?kq(s.bestContent.text,i):[]}))})}refresh(){var r=this;return I(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return I(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();return i?yield r.api.updateRecipe(i,r.rawText()):yield r.api.createRecipe(r.rawText()),yield r.refresh(),!0}catch(i){return r.error.set(i.message),!1}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return I(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return _y(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();function Pq(t){return xa(t).trim().split(/\s+/).map(e=>e.replace(/[^\p{L}\p{N}]/gu,"")).filter(e=>e.length>0)}function Nq(t,e){if(0===e.length)return 0;const n=xa(t),r=Pq(t);let i=0;for(const o of e)n.includes(o)?i+=10:r.some(a=>xq(a,o))&&(i+=6);return i}function xq(t,e){if(!t||!e)return!1;const n=xa(t),r=xa(e);if(!n||!r)return!1;const i=function V_e(t,e){if(t===e)return 0;if(0===t.length)return e.length;if(0===e.length)return t.length;const n=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let i=0;i<=e.length;i+=1)n[i]=i;for(let i=1;i<=t.length;i+=1){r[0]=i;for(let o=1;o<=e.length;o+=1)r[o]=Math.min(r[o-1]+1,n[o]+1,n[o-1]+(t[i-1]===e[o-1]?0:1));for(let o=0;o<=e.length;o+=1)n[o]=r[o]}return n[e.length]}(n,r);return Math.max(n.length,r.length)<=4?i<=1:i<=2}function kq(t,e){const n=Array.from(new Set(e.filter(Boolean)));if(0===n.length)return[{text:t,isMatch:!1}];const r=n.flatMap(c=>function L_e(t,e){const n=xa(t),r=xa(e);if(!r)return[];const i=[];let o=0;for(;o<n.length;){const s=n.indexOf(r,o);if(s<0)break;i.push({start:s,end:s+r.length}),o=s+r.length}return i}(t,c)),i=n.flatMap(c=>function F_e(t,e){return function U_e(t){const e=/[\p{L}\p{N}]+/gu,n=[];for(const r of t.matchAll(e)){const i=r[0]??"",o=r.index??0,s=o+i.length;n.push({normalized:xa(i),start:o,end:s})}return n}(t).filter(r=>xq(r.normalized,e)).map(r=>({start:r.start,end:r.end}))}(t,c)),o=function j_e(t){if(0===t.length)return[];const e=[...t].sort((r,i)=>r.start-i.start),n=[{...e[0]}];for(const r of e.slice(1)){const i=n[n.length-1];r.start<=i.end?i.end=Math.max(i.end,r.end):n.push({...r})}return n}([...r,...i]);if(0===o.length)return[{text:t,isMatch:!1}];const s=[];let a=0;for(const c of o)c.start>a&&s.push({text:t.slice(a,c.start),isMatch:!1}),s.push({text:t.slice(c.start,c.end),isMatch:!0}),a=c.end;return a<t.length&&s.push({text:t.slice(a),isMatch:!1}),s}function xa(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Oq=()=>({exact:!0});function B_e(t,e){1&t&&(xe(0,"section",1)(1,"p"),se(2,"Loading"),Me()())}function $_e(t,e){if(1&t){const n=yo();xe(0,"header",3)(1,"h1"),se(2,"Recipes"),Me(),xe(3,"button",5),Ct("click",function(){return tr(n),nr(Ee(2).signOut())}),se(4,"Sign out"),Me()()}if(2&t){const n=Ee(2);K(3),Ir("disabled",n.authBusy())}}function H_e(t,e){if(1&t){const n=yo();xe(0,"nav",4)(1,"a",6),se(2,"Home"),Me(),xe(3,"a",7),se(4,"Recipes"),Me(),xe(5,"a",8),Ct("click",function(){return tr(n),nr(Ee(2).startAdd())}),se(6,"Add"),Me()()}if(2&t){const n=Ee(2);K(),Ir("routerLinkActiveOptions",$T(4,Oq)),K(2),Ir("routerLinkActiveOptions",$T(5,Oq)),K(2),Io("disabled",!n.canWrite())}}function q_e(t,e){if(1&t&&(ut(0,$_e,5,1,"header",3),Fc(1,"router-outlet"),ut(2,H_e,7,6,"nav",4)),2&t){const n=Ee();lt(n.user()&&!n.isCookingLayout()?0:-1),K(2),lt(n.user()&&!n.isCookingLayout()?2:-1)}}function z_e(t,e){if(1&t&&(xe(0,"p",2),se(1),Me()),2&t){const n=Ee();K(),gn(n.state.error())}}let G_e=(()=>{var t;class e{constructor(){this.router=O(on),this.api=O(Pa),this.state=O(Na),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=_t(!1),this.isCookingLayout=_t(!1),this.updateLayoutByRoute(this.router.url),this.router.events.subscribe(r=>{r instanceof So&&this.updateLayoutByRoute(r.urlAfterRedirects)}),function DF(t,e){const n=e?.injector??O(rr);let i,r=!0!==e?.manualCleanup?n.get(Hr):null;const o=n.get(tI,null,{optional:!0}),s=n.get(ys);return null!==o?(i=function Die(t,e,n){const r=Object.create(Aie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=MF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof RP&&r._lView===o.view&&(r=null)):i=function Rie(t,e,n){const r=Object.create(Sie);return r.fn=MF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(LP),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Cie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return I(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}updateLayoutByRoute(r){this.isCookingLayout.set(r.includes("/cook"))}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-root"]],decls:4,vars:4,consts:[[1,"app-shell"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],[1,"bottom-nav","no-print"],["type","button",1,"ghost",3,"click","disabled"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/recipes/new","routerLinkActive","active",3,"click"]],template:function(i,o){1&i&&(xe(0,"main",0),ut(1,B_e,3,0,"section",1)(2,q_e,3,2),ut(3,z_e,2,1,"p",2),Me()),2&i&&(Io("cooking-layout",o.isCookingLayout()),K(),lt(o.authLoading()?1:2),K(2),lt(o.state.error()&&!o.isCookingLayout()?3:-1))},dependencies:[Yw,Vm,fU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#f8fafc}*[_ngcontent-%COMP%]{box-sizing:border-box}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:1.25rem 1rem 5.5rem;max-width:920px;margin:0 auto}.app-shell.cooking-layout[_ngcontent-%COMP%]{max-width:none;padding:0}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.65rem .75rem calc(.65rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:12px;padding:.75rem 1rem;background:#f1f5f9;color:#0f172a}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.75rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding-bottom:2rem}.app-shell.cooking-layout[_ngcontent-%COMP%]{padding:0}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:1rem 0 0;max-width:420px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})();const W_e=/^(\d+(?:[.,]\d+)?(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?|\d+\/\d+)(?:\s*(?:kg|g|mg|ml|l|ks|strou\u017eky?|strou\u017eek|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed))?/i;function X_e(t){return{...t,normalized:wR(t.item),stemmed:Lq(t.item),amount:aye(t.original)}}function tye(t,e,n){let i=null;for(let o=Math.min(4,t.length-e);o>=1;o-=1){const s=e+o-1,a=t.slice(e,s+1).map(d=>d.value),c=wR(a.join(" "));if(!c)continue;const u=Lq(a.join(" "));for(const d of n){if(nye(c,d.normalized))continue;const h=rye(c,u,d);if(h>.42)continue;const f={ingredient:d,startWord:e,endWord:s,segmentStart:t[e].segmentIndex,segmentEnd:t[s].segmentIndex,score:h};(!i||oye(f,i))&&(i=f)}}return i}function nye(t,e){const n=t.split(" ").filter(Boolean),r=e.split(" ").filter(Boolean);return!(n.length<=r.length)&&n.some(o=>/\d/.test(o))}function rye(t,e,n){const r=Vq(t,n.normalized),i=Vq(e,n.stemmed),o=Math.min(r,i);return t===n.normalized||e===n.stemmed?.6*o:o}function Vq(t,e){if(t===e)return 0;const n=Math.max(t.length,e.length);return 0===n?0:function iye(t,e){const n=Array.from({length:t.length+1},()=>Array(e.length+1).fill(0));for(let r=0;r<=t.length;r+=1)n[r][0]=r;for(let r=0;r<=e.length;r+=1)n[0][r]=r;for(let r=1;r<=t.length;r+=1)for(let i=1;i<=e.length;i+=1)n[r][i]=Math.min(n[r-1][i]+1,n[r][i-1]+1,n[r-1][i-1]+(t[r-1]===e[i-1]?0:1));return n[t.length][e.length]}(t,e)/n}function oye(t,e){const n=t.endWord-t.startWord,r=e.endWord-e.startWord;return n!==r?n>r:t.score<e.score}function aye(t){return t.trim().match(W_e)?.[0]?.trim()??null}function Lq(t){return wR(t).split(" ").filter(Boolean).map(cye).join(" ")}function cye(t){const e=["atech","\u011btem","at\u016fm","ovat","ov\xe9ho","ov\xe9mu","\xfdmi","ami","emi","ovi","ov\xe9","\xe9ho","\xe9mu","\xe1ch","\xedch","ami","emi","ou","\u016fm","em","\u011bm","\u016fm","mi","ce","ci","ku","ka","ky","ek","ice","ici","iku","ika","iky","\xed","y"];for(const n of e){if(t.length<=3)return t;if(t.endsWith(n)&&t.length-n.length>=3)return t.slice(0,-n.length)}return t}function wR(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\p{L}\p{N}\s]/gu," ").replace(/\s+/g," ").trim()}const uye=(t,e)=>e.title,Fq=(t,e)=>e.raw;function lye(t,e){1&t&&(_e(0,"p"),se(1,"Suroviny p\u0159ed startem"),he())}function dye(t,e){if(1&t&&(_e(0,"p"),se(1),he()),2&t){const n=Ee(2);K(),$c("Krok ",n.stepIndex()+1," / ",n.stepCount())}}function hye(t,e){if(1&t&&(_e(0,"span",8),se(1),he()),2&t){const n=Ee().$implicit;K(),Rr("(",n.note,")")}}function fye(t,e){if(1&t&&(_e(0,"li"),se(1),ut(2,hye,2,1,"span",8),he()),2&t){const n=e.$implicit;K(),$c(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),K(),lt(n.note?2:-1)}}function pye(t,e){if(1&t&&(_e(0,"div",7)(1,"h3"),se(2),he(),_e(3,"ul"),or(4,fye,3,3,"li",null,Fq),he()()),2&t){const n=e.$implicit;K(2),gn(n.title),K(2),sr(n.items)}}function gye(t,e){if(1&t&&(_e(0,"article",3),or(1,pye,6,1,"div",7,uye),he()),2&t){const n=Ee();K(),sr(n.ingredientSections)}}function mye(t,e){if(1&t&&(_e(0,"span",11),se(1),he()),2&t){const n=Ee().$implicit,r=Ee(3);K(),gn(r.ingredientTokenLabel(n))}}function _ye(t,e){if(1&t&&(_e(0,"span"),se(1),he()),2&t){const n=Ee().$implicit;K(),gn(n.value)}}function yye(t,e){1&t&&ut(0,mye,2,1,"span",11)(1,_ye,2,1,"span"),2&t&&lt("ingredient"===e.$implicit.type?0:1)}function vye(t,e){if(1&t&&(_e(0,"span"),se(1),he()),2&t){const n=Ee().$implicit;K(),$c(" \u2013 ",n.amount,"",n.unit?" "+n.unit:"")}}function Iye(t,e){if(1&t&&(_e(0,"span"),se(1),he()),2&t){const n=Ee().$implicit;K(),Rr(" (",n.note,")")}}function Eye(t,e){if(1&t&&(_e(0,"li")(1,"strong"),se(2),he(),ut(3,vye,2,2,"span"),ut(4,Iye,2,1,"span"),he()),2&t){const n=e.$implicit;K(2),gn(n.name),K(),lt(n.amount||n.unit?3:-1),K(),lt(n.note?4:-1)}}function Tye(t,e){if(1&t&&(_e(0,"aside",10)(1,"h3"),se(2,"P\u0159ipomenut\xed surovin"),he(),_e(3,"ul"),or(4,Eye,5,3,"li",null,Fq),he()()),2&t){const n=Ee(3);K(4),sr(n.highlightedIngredients())}}function wye(t,e){if(1&t){const n=yo();_e(0,"article",9),vo("click",function(){return tr(n),nr(Ee(2).nextStep())}),_e(1,"p"),or(2,yye,2,1,null,null,l1),he()(),ut(4,Tye,6,0,"aside",10)}if(2&t){const n=Ee(2);K(2),sr(n.stepTokens()),K(2),lt(n.highlightedIngredients().length>0?4:-1)}}function bye(t,e){if(1&t){const n=yo();_e(0,"header",1)(1,"button",2),vo("click",function(){return tr(n),nr(Ee().backToDetail())}),se(2,"Zp\u011bt"),he(),_e(3,"div")(4,"h2"),se(5),he(),ut(6,lye,2,0,"p")(7,dye,2,2,"p"),he()(),ut(8,gye,3,0,"article",3)(9,wye,5,1),_e(10,"footer",4)(11,"button",5),vo("click",function(){return tr(n),nr(Ee().previousStep())}),se(12,"P\u0159edchoz\xed"),he(),_e(13,"button",6),vo("click",function(){return tr(n),nr(Ee().nextStep())}),se(14),he()()}if(2&t){const n=Ee();K(5),gn(e.title),K(),lt(n.showIngredients()?6:7),K(2),lt(n.showIngredients()?8:9),K(3),_d("disabled",n.stepIndex()<=-1),K(2),_d("disabled",!n.showIngredients()&&n.stepIndex()>=n.stepCount()-1),K(),Rr(" ",n.showIngredients()?"Za\u010d\xedt va\u0159it":"Dal\u0161\xed krok"," ")}}function Cye(t,e){1&t&&(_e(0,"p"),se(1,"Recept nebyl nalezen."),he())}let Sye=(()=>{var t;class e{constructor(){this.state=O(Na),this.route=O(Mi),this.router=O(on),this.stepIndex=_t(-1),this.showIngredients=yt(()=>this.stepIndex()<0),this.parsed=yt(()=>this.state.selectedParsed()),this.steps=yt(()=>this.parsed()?.steps??[]),this.stepCount=yt(()=>this.steps().length),this.currentStep=yt(()=>{const r=this.stepIndex();return r<0?"":this.steps()[r]??""}),this.ingredientLookup=yt(()=>{const r=this.parsed();return r?r.ingredientSections.flatMap(i=>i.items.map(o=>({key:Uq(o.name,o.raw),input:{original:o.raw,item:o.name},ingredient:o}))):[]}),this.stepTokens=yt(()=>{const r=this.currentStep();return r?function Y_e(t,e){if(!e)return[];const n=function J_e(t){const e=[];let n=0;const r=/[\p{L}\p{N}]+(?:['\u2019-][\p{L}\p{N}]+)*/gu;for(const i of t.matchAll(r)){const o=i[0],s=i.index??0;s>n&&e.push({value:t.slice(n,s),isWord:!1}),e.push({value:o,isWord:!0}),n=s+o.length}return n<t.length&&e.push({value:t.slice(n),isWord:!1}),e}(e),r=function Z_e(t){return t.flatMap((e,n)=>e.isWord?[{value:e.value,segmentIndex:n}]:[])}(n);if(0===r.length||0===t.length)return[{type:"text",value:e}];const o=function eye(t,e){const n=[];let r=0;for(;r<t.length;){const i=tye(t,r,e);i?(n.push(i),r=i.endWord+1):r+=1}return n}(r,t.map(X_e).filter(s=>s.normalized.length>0));return function sye(t,e){if(0===e.length)return[{type:"text",value:t.map(i=>i.value).join("")}];const n=[];let r=0;for(const i of e){if(r<i.segmentStart){const s=t.slice(r,i.segmentStart).map(a=>a.value).join("");s&&n.push({type:"text",value:s})}const o=t.slice(i.segmentStart,i.segmentEnd+1).map(s=>s.value).join("");n.push({type:"ingredient",value:o,ingredient:i.ingredient.item,amount:i.ingredient.amount,original:i.ingredient.original}),r=i.segmentEnd+1}if(r<t.length){const i=t.slice(r).map(o=>o.value).join("");i&&n.push({type:"text",value:i})}return n}(n,o)}(this.ingredientLookup().map(({input:o})=>o),r):[]}),this.highlightedIngredients=yt(()=>{const r=new Map(this.ingredientLookup().map(i=>[i.key,i.ingredient]));return this.stepTokens().flatMap(i=>"ingredient"===i.type?[i]:[]).map(i=>r.get(Uq(i.ingredient,i.original))).filter(i=>void 0!==i).filter((i,o,s)=>s.findIndex(a=>a.raw===i.raw)===o)})}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");if(!i)return void(yield r.router.navigateByUrl("/recipes"));0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i);const o=r.state.selectedParsed();if(!o)return void(yield r.router.navigate(["/recipes",i]));r.stepIndex.set(-1);const s=r.readProgress(i,o);null!==s&&(window.confirm(`Pokra\u010dovat od kroku ${s.stepIndex+1}?`)?r.stepIndex.set(s.stepIndex):r.clearProgress(i))})()}previousStep(){const r=this.stepIndex()-1;r<-1||(this.stepIndex.set(r),this.persistProgress())}nextStep(){if(this.showIngredients())return this.stepIndex.set(0),void this.persistProgress();const r=this.stepIndex()+1;if(r>=this.stepCount())return this.stepIndex.set(this.stepCount()-1),void this.persistProgress();this.stepIndex.set(r),this.persistProgress()}backToDetail(){var r=this;return I(function*(){const i=r.state.selectedRecipeId();i?yield r.router.navigate(["/recipes",i]):yield r.router.navigateByUrl("/recipes")})()}ingredientTokenLabel(r){return r.amount?`${r.value} (${r.amount})`:r.value}persistProgress(){const r=this.state.selectedRecipeId();if(!r)return;const i=this.stepIndex();if(i<0)return void this.clearProgress(r);const o={stepIndex:i,startedAt:(new Date).toISOString()};localStorage.setItem(bR(r),JSON.stringify(o))}readProgress(r,i){const o=localStorage.getItem(bR(r));if(!o)return null;try{const s=JSON.parse(o);return s.stepIndex<0||s.stepIndex>=i.steps.length?(this.clearProgress(r),null):s}catch{return this.clearProgress(r),null}}clearProgress(r){localStorage.removeItem(bR(r))}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-cooking-mode"]],decls:3,vars:1,consts:[[1,"cooking-screen"],[1,"cooking-header"],["type","button",1,"ghost",3,"click"],[1,"ingredient-overview"],[1,"step-controls"],["type","button",1,"ghost",3,"click","disabled"],["type","button",3,"click","disabled"],[1,"section-block"],[1,"ingredient-note"],[1,"step-card",3,"click"],[1,"inline-help"],[1,"step-ingredient"]],template:function(i,o){if(1&i&&(_e(0,"section",0),ut(1,bye,15,6)(2,Cye,2,0,"p"),he()),2&i){let s;K(),lt((s=o.parsed())?1:2,s)}},styles:[".cooking-screen[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;width:100vw;min-height:100dvh;padding:max(1rem,env(safe-area-inset-top)) 1rem max(1rem,env(safe-area-inset-bottom));display:grid;gap:1rem}.cooking-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.ingredient-overview[_ngcontent-%COMP%], .step-card[_ngcontent-%COMP%], .inline-help[_ngcontent-%COMP%]{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:1rem}.step-card[_ngcontent-%COMP%]{min-height:32vh;display:flex;align-items:center;justify-content:center;text-align:center;cursor:pointer}.step-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1.4rem,5vw,2.2rem);line-height:1.4}.section-block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.section-block[_ngcontent-%COMP%] + .section-block[_ngcontent-%COMP%]{margin-top:.75rem}ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.4rem}.ingredient-note[_ngcontent-%COMP%]{color:#cbd5e1}.step-controls[_ngcontent-%COMP%]{margin-top:auto;display:grid;grid-template-columns:1fr 1fr;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.9rem 1rem;background:#22c55e;color:#052e16;font:inherit;font-weight:600}button.ghost[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.cooking-screen[_ngcontent-%COMP%]{padding:1.5rem}}.step-ingredient[_ngcontent-%COMP%]{color:#86efac;font-weight:700}"]}))}return t(),e})();function bR(t){return`cooking-progress:${t}`}function Uq(t,e){return`${t}:::${e}`}let jq=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(X(Ms),X(Ar))};static \u0275dir=Ce({type:t})}return t})(),ka=(()=>{class t extends jq{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})();static \u0275dir=Ce({type:t,features:[He]})}return t})();const di=new H(""),Rye={provide:di,useExisting:et(()=>cf),multi:!0},Pye=new H("");let cf=(()=>{class t extends jq{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Mye(){const t=ao()?ao().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(X(Ms),X(Ar),X(Pye,8))};static \u0275dir=Ce({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ct("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[dt([Rye]),He]})}return t})();const Tn=new H(""),Zo=new H("");function Yq(t){return null!=t}function Jq(t){return Rg(t)?mn(t):t}function Zq(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Xq(t,e){return e.map(n=>n(t))}function ez(t){return t.map(e=>function xye(t){return!t.validate}(e)?e:n=>e.validate(n))}function AR(t){return null!=t?function tz(t){if(!t)return null;const e=t.filter(Yq);return 0==e.length?null:function(n){return Zq(Xq(n,e))}}(ez(t)):null}function DR(t){return null!=t?function nz(t){if(!t)return null;const e=t.filter(Yq);return 0==e.length?null:function(n){return function Aye(...t){const e=ZF(t),{args:n,keys:r}=XF(t),i=new kt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;Jr(n[d]).subscribe($t(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?t2(r,a):a),o.complete())}))}});return e?i.pipe(e2(e)):i}(Xq(n,e).map(Jq)).pipe(je(Zq))}}(ez(t)):null}function rz(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function RR(t){return t?Array.isArray(t)?t:[t]:[]}function vy(t,e){return Array.isArray(t)?t.includes(e):t===e}function sz(t,e){const n=RR(e);return RR(t).forEach(i=>{vy(n,i)||n.push(i)}),n}function az(t,e){return RR(e).filter(n=>!vy(t,n))}class cz{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Vn extends cz{name;get formDirective(){return null}get path(){return null}}class Xo extends cz{_parent=null;name=null;valueAccessor=null}class uz{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let MR=(()=>{class t extends uz{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(X(Xo,2))};static \u0275dir=Ce({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Io("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[He]})}return t})();const uf="VALID",Ey="INVALID",Xu="PENDING",lf="DISABLED";class el{}class dz extends el{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class xR extends el{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class kR extends el{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Ty extends el{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class OR extends el{source;constructor(e){super(),this.source=e}}function wy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class FR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ht(this.statusReactive)}set status(e){ht(()=>this.statusReactive.set(e))}_status=yt(()=>this.statusReactive());statusReactive=_t(void 0);get valid(){return this.status===uf}get invalid(){return this.status===Ey}get pending(){return this.status==Xu}get disabled(){return this.status===lf}get enabled(){return this.status!==lf}errors;get pristine(){return ht(this.pristineReactive)}set pristine(e){ht(()=>this.pristineReactive.set(e))}_pristine=yt(()=>this.pristineReactive());pristineReactive=_t(!0);get dirty(){return!this.pristine}get touched(){return ht(this.touchedReactive)}set touched(e){ht(()=>this.touchedReactive.set(e))}_touched=yt(()=>this.touchedReactive());touchedReactive=_t(!1);get untouched(){return!this.touched}_events=new Un;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(az(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(az(e,this._rawAsyncValidators))}hasValidator(e){return vy(this._rawValidators,e)}hasAsyncValidator(e){return vy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new kR(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new kR(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new xR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new xR(!0,r))}markAsPending(e={}){this.status=Xu;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Ty(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=lf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new dz(this.value,r)),this._events.next(new Ty(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=uf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uf||this.status===Xu)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new dz(this.value,n)),this._events.next(new Ty(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lf:uf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Xu,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=Jq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ty(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Lt,this.statusChanges=new Lt}_calculateStatus(){return this._allControlsDisabled()?lf:this.errors?Ey:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xu)?Xu:this._anyControlsHaveStatus(Ey)?Ey:uf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new xR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new kR(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Bye(t){return Array.isArray(t)?AR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $ye(t){return Array.isArray(t)?DR(t):t||null}(this._rawAsyncValidators)}}const tl=new H("",{providedIn:"root",factory:()=>by}),by="always";function df(t,e,n=by){(function jR(t,e){const n=function iz(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(rz(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function oz(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(rz(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Ay(e._rawValidators,i),Ay(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function zye(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&gz(t,e)})}(t,e),function Wye(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Gye(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&gz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function qye(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Ay(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function gz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function yz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function vz(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const Iz=class extends FR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function VR(t){return(wy(t)?t.validators:t)||null}(n),function LR(t,e){return(wy(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=vz(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new OR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rve={provide:Xo,useExisting:et(()=>Ny)},Ez=Promise.resolve();let Ny=(()=>{class t extends Xo{_changeDetectorRef;callSetDisabledState;control=new Iz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Lt;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function HR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===cf?n=o:function Yye(t){return Object.getPrototypeOf(t.constructor)===ka}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function $R(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){df(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Ez.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Kc(r);Ez.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Cy(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(X(Vn,9),X(Tn,10),X(Zo,10),X(di,10),X(cm,8),X(tl,8))};static \u0275dir=Ce({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[dt([rve]),He,wi]})}return t})(),Dve=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=vg({type:t});static \u0275inj=fl({})}return t})(),jz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:tl,useValue:n.callSetDisabledState??by}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=vg({type:t});static \u0275inj=fl({imports:[Dve]})}return t})();function Mve(t,e){1&t&&(xe(0,"p"),se(1,"Loading"),Me())}function Pve(t,e){1&t&&(xe(0,"p"),se(1,"No recipes"),Me())}function Nve(t,e){if(1&t&&(xe(0,"mark"),se(1),Me()),2&t){const n=Ee().$implicit;K(),gn(n.text)}}function xve(t,e){if(1&t&&(xe(0,"span"),se(1),Me()),2&t){const n=Ee().$implicit;K(),gn(n.text)}}function kve(t,e){1&t&&ut(0,Nve,2,1,"mark")(1,xve,2,1,"span"),2&t&&lt(e.$implicit.isMatch?0:1)}function Ove(t,e){if(1&t&&(xe(0,"mark"),se(1),Me()),2&t){const n=Ee().$implicit;K(),gn(n.text)}}function Vve(t,e){if(1&t&&(xe(0,"span"),se(1),Me()),2&t){const n=Ee().$implicit;K(),gn(n.text)}}function Lve(t,e){1&t&&ut(0,Ove,2,1,"mark")(1,Vve,2,1,"span"),2&t&&lt(e.$implicit.isMatch?0:1)}function Fve(t,e){if(1&t&&(xe(0,"span",9)(1,"span",10),se(2),Me(),or(3,Lve,2,1,null,null,Ug().trackByPartIndex,!0),Me()),2&t){const n=Ee().$implicit;K(2),Rr("",n.contentLabel,":"),K(),sr(n.contentParts)}}function Uve(t,e){if(1&t){const n=yo();xe(0,"li")(1,"button",7),Ct("click",function(){const i=tr(n).$implicit;return nr(Ee(3).open(i.recipe.id))}),xe(2,"span",8),or(3,kve,2,1,null,null,Ug().trackByPartIndex,!0),Me(),ut(5,Fve,5,1,"span",9),Me()()}if(2&t){const n=e.$implicit;K(3),sr(n.titleParts),K(2),lt(n.contentParts.length>0?5:-1)}}function jve(t,e){if(1&t&&(xe(0,"ul",6),or(1,Uve,6,1,"li",null,Ug().trackByRecipeId,!0),Me()),2&t){const n=Ee(2);K(),sr(n.state.searchResults())}}function Bve(t,e){if(1&t&&(xe(0,"section",5),ut(1,Mve,2,0,"p")(2,Pve,2,0,"p")(3,jve,3,0,"ul",6),Me()),2&t){const n=Ee();Io("loading",n.state.loading()),K(),lt(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let $ve=(()=>{var t;class e{constructor(){this.state=O(Na),this.router=O(on)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}trackByRecipeId(r,i){return i.recipe.id}trackByPartIndex(r,i){return r}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["type","search","placeholder","Search recipes",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],[1,"recipe-title"],[1,"recipe-content"],[1,"match-label"]],template:function(i,o){1&i&&(xe(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),Ct("ngModelChange",function(a){return o.state.searchQuery.set(a)}),Me()(),ut(4,Bve,4,3,"section",4),Me()()),2&i&&(Io("has-query",o.state.searchQuery().trim().length>0),K(3),Ir("ngModel",o.state.searchQuery()),K(),lt(o.state.searchQuery().trim().length>0?4:-1))},dependencies:[jz,cf,MR,Ny],styles:[".home-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:1rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{min-height:55vh;display:grid;place-items:center;transition:min-height .24s ease,place-items .24s ease}.home-screen.has-query[_ngcontent-%COMP%]   .search-wrap[_ngcontent-%COMP%]{min-height:0;place-items:start}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start;opacity:1;transform:translateY(0);transition:opacity .22s ease,transform .22s ease}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit;display:grid;gap:.35rem}.recipe-title[_ngcontent-%COMP%]{font-weight:600}.recipe-content[_ngcontent-%COMP%]{font-size:.92rem;color:#475569}.recipe-item[_ngcontent-%COMP%]   mark[_ngcontent-%COMP%]{background:#fef08a;color:inherit;border-radius:4px;padding:0}.recipe-item[_ngcontent-%COMP%]   .match-label[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(260px,340px) minmax(0,1fr);column-gap:1rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})(),Hve=(()=>{var t;class e{constructor(){this.api=O(Pa),this.state=O(Na),this.router=O(on),this.authBusy=!1}signIn(){var r=this;return I(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(_e(0,"section",0)(1,"h1"),se(2,"Recipes"),he(),_e(3,"button",1),vo("click",function(){return o.signIn()}),se(4,"Continue with Google"),he()()),2&i&&(K(3),_d("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const qve=(t,e)=>e.title,zve=(t,e)=>e.message;function Gve(t,e){if(1&t&&(_e(0,"span",3),se(1),he()),2&t){const n=Ee().$implicit;K(),Rr("(",n.note,")")}}function Wve(t,e){if(1&t&&(_e(0,"li"),se(1),ut(2,Gve,2,1,"span",3),he()),2&t){const n=e.$implicit;K(),$c(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),K(),lt(n.note?2:-1)}}function Kve(t,e){if(1&t&&(_e(0,"div",1)(1,"h3"),se(2),he(),_e(3,"ul"),or(4,Wve,3,3,"li",null,bT),he()()),2&t){const n=e.$implicit;K(2),gn(n.title),K(2),sr(n.items)}}function Qve(t,e){if(1&t&&(_e(0,"li"),se(1),he()),2&t){const n=e.$implicit;K(),gn(n.message)}}function Yve(t,e){if(1&t&&(_e(0,"div",2)(1,"h3"),se(2,"Warnings"),he(),_e(3,"ul"),or(4,Qve,2,1,"li",null,zve),he()()),2&t){const n=Ee();K(4),sr(n.warnings)}}function Jve(t,e){if(1&t&&(_e(0,"li"),se(1),he()),2&t){const n=e.$implicit;K(),gn(n)}}function Zve(t,e){if(1&t&&(_e(0,"div",1)(1,"h3"),se(2,"Steps"),he(),_e(3,"ol"),or(4,Jve,2,1,"li",null,bT),he()()),2&t){const n=Ee();K(4),sr(n.steps)}}function Xve(t,e){if(1&t&&(_e(0,"article",0)(1,"h2"),se(2),he(),or(3,Kve,6,1,"div",1,qve),ut(5,Yve,6,0,"div",2),ut(6,Zve,6,0,"div",1),he()),2&t){const n=e,r=Ee();K(2),gn(n.title),K(),sr(n.ingredientSections),K(2),lt(r.showWarnings()&&n.warnings.length?5:-1),K(),lt(n.steps.length?6:-1)}}let Bz=(()=>{var t;class e{constructor(){this.parsed=lw(null),this.showWarnings=lw(!1)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-recipe-preview"]],inputs:{parsed:[1,"parsed"],showWarnings:[1,"showWarnings"]},decls:1,vars:1,consts:[[1,"recipe-card"],[1,"block"],[1,"block","parser-warnings"],[1,"ingredient-note"]],template:function(i,o){if(1&i&&ut(0,Xve,7,3,"article",0),2&i){let s;lt((s=o.parsed())?0:-1,s)}},styles:[".recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}.ingredient-note[_ngcontent-%COMP%]{color:#6b7280}"]}))}return t(),e})();function eIe(t,e){if(1&t){const n=yo();xe(0,"div",1)(1,"button",2),Ct("click",function(){return tr(n),nr(Ee().startCooking())}),se(2," \u{1f373} "),Me()(),xe(3,"div",3),Fc(4,"app-recipe-preview",4),Me(),xe(5,"div",5)(6,"button",6),Ct("click",function(){return tr(n),nr(Ee().edit())}),se(7,"Edit"),Me(),xe(8,"button",7),Ct("click",function(){return tr(n),nr(Ee().remove())}),se(9),Me(),xe(10,"button",8),Ct("click",function(){return tr(n),nr(Ee().state.print())}),se(11,"Print"),Me()()}if(2&t){const n=Ee();K(4),Ir("parsed",n.state.selectedParsed()),K(2),Ir("disabled",!n.api.canWrite()),K(2),Ir("disabled",!n.api.canWrite()||n.state.deleting()),K(),Rr(" ",n.state.deleting()?"Deleting":"Delete"," ")}}function tIe(t,e){1&t&&(xe(0,"p"),se(1,"Recipe not found"),Me())}let nIe=(()=>{var t;class e{constructor(){this.state=O(Na),this.api=O(Pa),this.route=O(Mi),this.router=O(on)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return I(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}startCooking(){var r=this;return I(function*(){const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"cook"]))})()}remove(){var r=this;return I(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-recipe-detail"]],decls:3,vars:1,consts:[[1,"detail-screen"],[1,"detail-top-actions","no-print"],["type","button","aria-label","Spustit cooking mode","title","Cooking mode",1,"cook-quick-action",3,"click"],[1,"printable-recipe"],[3,"parsed"],[1,"detail-actions","no-print"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"],["type","button",1,"ghost",3,"click"]],template:function(i,o){1&i&&(xe(0,"section",0),ut(1,eIe,12,4)(2,tIe,2,0,"p"),Me()),2&i&&(K(),lt(o.state.selectedParsed()?1:2))},dependencies:[Bz],styles:[".detail-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}.detail-top-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:.75rem}.cook-quick-action[_ngcontent-%COMP%]{width:2.75rem;height:2.75rem;border-radius:999px;font-size:1.2rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 8px 24px #0f172a2e}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.detail-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.detail-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}@media print{.detail-actions[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;border:0;min-height:auto}}"]}))}return t(),e})(),$z=(()=>{var t;class e{constructor(){this.state=O(Na),this.api=O(Pa),this.route=O(Mi),this.router=O(on)}ngOnInit(){var r=this;return I(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected()):r.state.startAdd()})()}save(){var r=this;return I(function*(){(yield r.state.saveSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-recipe-editor"]],decls:7,vars:6,consts:[[1,"editor-screen"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"editor-actions"],["type","button",3,"click","disabled"],[1,"preview-card"],[3,"parsed","showWarnings"]],template:function(i,o){1&i&&(xe(0,"section",0)(1,"textarea",1),Ct("ngModelChange",function(a){return o.state.rawText.set(a)}),Me(),xe(2,"div",2)(3,"button",3),Ct("click",function(){return o.save()}),se(4),Me()(),xe(5,"div",4),Fc(6,"app-recipe-preview",5),Me()()),2&i&&(K(),Ir("ngModel",o.state.rawText())("disabled",!o.api.canWrite()),K(2),Ir("disabled",o.state.saving()||!o.api.canWrite()),K(),Rr(" ",o.state.saving()?"Saving":"Save"," "),K(2),Ir("parsed",o.state.parsed())("showWarnings",!0))},dependencies:[jz,cf,MR,Ny,Bz],styles:[".editor-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}textarea[_ngcontent-%COMP%]{width:100%;min-height:55vh;resize:vertical;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.editor-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}.recipe-card[_ngcontent-%COMP%]{display:grid;gap:1.25rem}.preview-card[_ngcontent-%COMP%]{margin-top:1rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.15rem;display:grid;gap:.35rem}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})();const rIe=(t,e)=>e.id;function iIe(t,e){1&t&&(_e(0,"p"),se(1,"Loading"),he())}function oIe(t,e){1&t&&(_e(0,"p"),se(1,"No recipes"),he())}function sIe(t,e){if(1&t){const n=yo();_e(0,"li")(1,"button",2),vo("click",function(){const i=tr(n).$implicit;return nr(Ee(2).open(i.id))}),se(2),he()()}if(2&t){const n=e.$implicit,r=Ee(2);K(2),Rr(" ",r.state.parsedFromRaw(n.raw_text).title," ")}}function aIe(t,e){if(1&t&&(_e(0,"ul",1),or(1,sIe,3,1,"li",null,rIe),he()),2&t){const n=Ee();K(),sr(n.state.recipes())}}const nl=()=>{const t=O(Pa),e=O(on);return!(!t.authLoading()&&!t.user())||e.parseUrl("/login")};(function sie(t,e,n){return pre({rootComponent:t,platformRef:n?.platformRef,...bF(e)})})(G_e,{providers:[function Dce(t,...e){return function Mv(t){return{\u0275providers:t}}([{provide:ib,multi:!0,useValue:t},[],{provide:Mi,useFactory:gU,deps:[on]},{provide:WO,multi:!0,useFactory:mU},e.map(n=>n.\u0275providers)])}([{path:"login",canActivate:[()=>{const t=O(Pa),e=O(on);return!t.user()||e.parseUrl("/")}],component:Hve},{path:"",canActivate:[nl],component:$ve},{path:"recipes",canActivate:[nl],component:(()=>{var t;class e{constructor(){this.state=O(Na),this.router=O(on)}ngOnInit(){var r=this;return I(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return I(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Qr({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"]],template:function(i,o){1&i&&(_e(0,"section",0),ut(1,iIe,2,0,"p")(2,oIe,2,0,"p")(3,aIe,3,0,"ul",1),he()),2&i&&(K(),lt(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.75rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.95rem 1rem;background:#f8fafc;color:#0f172a;border:1px solid #e5e7eb;border-radius:12px;font:inherit}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:2rem}}"]}))}return t(),e})()},{path:"recipes/new",canActivate:[nl],component:$z},{path:"recipes/:id",canActivate:[nl],component:nIe},{path:"recipes/:id/edit",canActivate:[nl],component:$z},{path:"recipes/:id/cook",canActivate:[nl],component:Sye},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},ja=>{ja(ja.s=653)}]);