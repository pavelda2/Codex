"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{149(){let Ha;function dl(){return Ha}function gi(t){const e=Ha;return Ha=t,e}const Xq=Symbol("NotFound");function iv(t){return t===Xq||"\u0275NotFound"===t?.name}Error;let fn=null,hl=!1,ov=1;const Qt=Symbol("SIGNAL");function de(t){const e=fn;return fn=t,e}const za={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fl(t){if(hl)throw new Error("");if(null===fn)return;fn.consumerOnSignalRead(t);const e=fn.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=fn.recomputing;if(r&&(n=void 0!==e?e.nextProducer:fn.producers,void 0!==n&&n.producer===t))return fn.producersTail=n,void(n.lastReadVersion=t.version);const i=t.consumersTail;if(void 0!==i&&i.consumer===fn&&(!r||function i6(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,fn)))return;const o=Ga(fn),s={producer:t,consumer:fn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};fn.producersTail=s,void 0!==e?e.nextProducer=s:fn.producers=s,o&&PM(t,s)}function pl(t){if((!Ga(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==ov)){if(!t.producerMustRecompute(t)&&!Lf(t))return void Vf(t);t.producerRecomputeValue(t),Vf(t)}}function RM(t){if(void 0===t.consumers)return;const e=hl;hl=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||t6(r)}}finally{hl=e}}function MM(){return!1!==fn?.consumerAllowSignalWrites}function t6(t){t.dirty=!0,RM(t),t.consumerMarkedDirty?.(t)}function Vf(t){t.dirty=!1,t.lastCleanEpoch=ov}function qa(t){return t&&function n6(t){t.producersTail=void 0,t.recomputing=!0}(t),de(t)}function gl(t,e){de(e),t&&function r6(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(Ga(t))do{n=cv(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function Lf(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(pl(n),r!==n.version))return!0}return!1}function ml(t){if(Ga(t)){let e=t.producers;for(;void 0!==e;)e=cv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function PM(t,e){const n=t.consumersTail,r=Ga(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;void 0!==i;i=i.nextProducer)PM(i.producer,i)}function cv(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:e.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(e.consumers=r,!Ga(e)){let o=e.producers;for(;void 0!==o;)o=cv(o)}return n}function Ga(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function lv(t,e){return Object.is(t,e)}const as=Symbol("UNSET"),Wa=Symbol("COMPUTING"),no=Symbol("ERRORED"),s6={...za,value:as,dirty:!0,error:null,equal:lv,kind:"computed",producerMustRecompute:t=>t.value===as||t.value===Wa,producerRecomputeValue(t){if(t.value===Wa)throw new Error("");const e=t.value;t.value=Wa;const n=qa(t);let r,i=!1;try{r=t.computation(),de(null),i=e!==as&&e!==no&&r!==no&&t.equal(e,r)}catch(o){r=no,t.error=o}finally{gl(t,n)}i?t.value=e:(t.value=r,t.version++)}};let NM=function a6(){throw new Error};function xM(t){NM(t)}function u6(t,e){const n=Object.create(dv);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function l6(t){return fl(t),t.value}(n);return r[Qt]=n,[r,s=>Uf(n,s),s=>function kM(t,e){MM()||xM(t),Uf(t,e(t.value))}(n,s)]}function Uf(t,e){MM()||xM(t),t.equal(t.value,e)||(t.value=e,function d6(t){t.version++,function e6(){ov++}(),RM(t)}(t))}const dv={...za,equal:lv,value:void 0,kind:"signal"};function ut(t){return"function"==typeof t}function hv(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const fv=hv(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pv(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Mn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ut(r))try{r()}catch(o){e=o instanceof fv?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{LM(o)}catch(s){e=e??[],s instanceof fv?e=[...e,...s.errors]:e.push(s)}}if(e)throw new fv(e)}}add(e){var n;if(e&&e!==this)if(this.closed)LM(e);else{if(e instanceof Mn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pv(n,e)}remove(e){const{_finalizers:n}=this;n&&pv(n,e),e instanceof Mn&&e._removeParent(this)}}Mn.EMPTY=(()=>{const t=new Mn;return t.closed=!0,t})();const OM=Mn.EMPTY;function VM(t){return t instanceof Mn||t&&"closed"in t&&ut(t.remove)&&ut(t.add)&&ut(t.unsubscribe)}function LM(t){ut(t)?t():t.unsubscribe()}const cs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},jf={setTimeout(t,e,...n){const{delegate:r}=jf;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=jf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function FM(t){jf.setTimeout(()=>{const{onUnhandledError:e}=cs;if(!e)throw t;e(t)})}function gv(){}const h6=mv("C",void 0,void 0);function mv(t,e,n){return{kind:t,value:e,error:n}}let us=null;function Bf(t){if(cs.useDeprecatedSynchronousErrorHandling){const e=!us;if(e&&(us={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=us;if(us=null,n)throw r}}else t()}class _v extends Mn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,VM(e)&&e.add(this)):this.destination=v6}static create(e,n,r){return new vv(e,n,r)}next(e){this.isStopped?Iv(function p6(t){return mv("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Iv(function f6(t){return mv("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Iv(h6,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const m6=Function.prototype.bind;function yv(t,e){return m6.call(t,e)}class _6{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$f(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$f(r)}else $f(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$f(n)}}}class vv extends _v{constructor(e,n,r){let i;if(super(),ut(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&cs.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yv(e.next,o),error:e.error&&yv(e.error,o),complete:e.complete&&yv(e.complete,o)}):i=e}this.destination=new _6(i)}}function $f(t){cs.useDeprecatedSynchronousErrorHandling?function g6(t){cs.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=t)}(t):FM(t)}function Iv(t,e){const{onStoppedNotification:n}=cs;n&&jf.setTimeout(()=>n(t,e))}const v6={closed:!0,next:gv,error:function y6(t){throw t},complete:gv},Ev="function"==typeof Symbol&&Symbol.observable||"@@observable";function ls(t){return t}function UM(t){return 0===t.length?ls:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Ft=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function w6(t){return t&&t instanceof _v||function E6(t){return t&&ut(t.next)&&ut(t.error)&&ut(t.complete)}(t)&&VM(t)}(n)?n:new vv(n,r,i);return Bf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=jM(r))((i,o)=>{const s=new vv({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ev](){return this}pipe(...n){return UM(n)(this)}toPromise(n){return new(n=jM(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function jM(t){var e;return null!==(e=t??cs.Promise)&&void 0!==e?e:Promise}const T6=hv(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Gn=(()=>{class t extends Ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new BM(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new T6}next(n){Bf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Bf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?OM:(this.currentObservers=null,o.push(n),new Mn(()=>{this.currentObservers=null,pv(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Ft;return n.source=this,n}}return t.create=(e,n)=>new BM(e,n),t})();class BM extends Gn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:OM}}class yr extends Gn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const HM="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class U extends Error{code;constructor(e,n){super(Hr(e,n)),this.code=e}}function Hr(t,e){return`${function b6(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const Ct=globalThis;function Be(t){for(let e in t)if(t[e]===Be)return e;throw Error("")}function C6(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(Wn).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function wv(t,e){return t?e?`${t} ${e}`:t:e||""}const S6=Be({__forward_ref__:Be});function st(t){return t.__forward_ref__=st,t.toString=function(){return Wn(this())},t}function ve(t){return zf(t)?t():t}function zf(t){return"function"==typeof t&&t.hasOwnProperty(S6)&&t.__forward_ref__===st}function oe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _l(t){return{providers:t.providers||[],imports:t.imports||[]}}function qf(t){return function x6(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Wf)}function Gf(t){return t&&t.hasOwnProperty(Tv)?t[Tv]:null}const Wf=Be({\u0275prov:Be}),Tv=Be({\u0275inj:Be});class z{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cv(t){return t&&!!t.\u0275providers}const Sv=Be({\u0275cmp:Be}),U6=Be({\u0275dir:Be}),j6=Be({\u0275pipe:Be}),zM=Be({\u0275mod:Be}),hs=Be({\u0275fac:Be}),Il=Be({__NG_ELEMENT_ID__:Be}),qM=Be({__NG_ENV_ID__:Be});function pe(t){return"string"==typeof t?t:null==t?"":String(t)}const Av=Be({ngErrorCode:Be}),GM=Be({ngErrorMessage:Be}),El=Be({ngTokenPath:Be});function Dv(t,e){return WM("",-200,e)}function Rv(t,e){throw new U(-201,!1)}function WM(t,e,n){const r=new U(e,t);return r[Av]=e,r[GM]=t,n&&(r[El]=n),r}let Mv;function KM(){return Mv}function Kn(t){const e=Mv;return Mv=t,e}function QM(t,e,n){const r=qf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void Rv()}const fs={};class G6{injector;constructor(e){this.injector=e}retrieve(e,n){const r=wl(n)||0;try{return this.injector.get(e,8&r?null:fs,r)}catch(i){if(iv(i))return i;throw i}}}function W6(t,e=0){const n=dl();if(void 0===n)throw new U(-203,!1);if(null===n)return QM(t,void 0,e);{const r=function K6(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),i=n.retrieve(t,r);if(iv(i)){if(r.optional)return null;throw i}return i}}function be(t,e=0){return(KM()||W6)(ve(t),e)}function O(t,e){return be(t,wl(e))}function wl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Nv(t){const e=[];for(let n=0;n<t.length;n++){const r=ve(t[n]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){const a=r[s],c=Q6(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(be(i,o))}else e.push(be(r))}return e}function Q6(t){return t.__NG_DI_FLAG__}function ps(t,e){return t.hasOwnProperty(hs)?t[hs]:null}function Ka(t,e){t.forEach(n=>Array.isArray(n)?Ka(n,e):e(n))}function JM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Qf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Jf(t,e,n){let r=bl(t,e);return r>=0?t[1|r]=n:(r=~r,function XM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function xv(t,e){const n=bl(t,e);if(n>=0)return t[1|n]}function bl(t,e){return function J6(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const zr={},at=[],io=new z(""),e0=new z("",-1),kv=new z("");class Zf{get(e,n=fs){if(n===fs){const i=WM("",-201);throw i.name="\u0275NotFound",i}return n}}function qr(t){return t[zM]||null}function He(t){return t[Sv]||null}function Pn(t){return t[U6]||null}function Rr(t){return t[j6]||null}function X6(...t){return{\u0275providers:Lv(0,t),\u0275fromNgModule:!0}}function Lv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ka(e,s=>{const a=s;Xf(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&t0(i,o),n}function t0(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Fv(i,o=>{e(o,r)})}}function Xf(t,e,n,r){if(!(t=ve(t)))return!1;let i=null,o=Gf(t);const s=!o&&He(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Gf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Xf(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Ka(o.imports,d=>{Xf(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&t0(u,e)}if(!a){const u=ps(i)||(()=>new i);e({provide:i,useFactory:u,deps:at},i),e({provide:kv,useValue:i,multi:!0},i),e({provide:io,useValue:()=>be(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;Fv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function Fv(t,e){for(let n of t)Cv(n)&&(n=n.\u0275providers),Array.isArray(n)?Fv(n,e):e(n)}const e5=Be({provide:String,useValue:Be});function Uv(t){return null!==t&&"object"==typeof t&&e5 in t}function mi(t){return"function"==typeof t}const jv=new z(""),ep={},o0={};let Bv;function $v(){return void 0===Bv&&(Bv=new Zf),Bv}class Nn{}class gs extends Nn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,zv(e,s=>this.processProvider(s)),this.records.set(e0,Ya(void 0,this)),i.has("environment")&&this.records.set(Nn,Ya(void 0,this));const o=this.records.get(jv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kv,at,{self:!0}))}retrieve(e,n){const r=wl(n)||0;try{return this.get(e,fs,r)}catch(i){if(iv(i))return i;throw i}}destroy(){Cl(this),this._destroyed=!0;const e=de(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return Cl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Cl(this);const n=gi(this),r=Kn(void 0);try{return e()}finally{gi(n),Kn(r)}}get(e,n=fs,r){if(Cl(this),e.hasOwnProperty(qM))return e[qM](this);const i=wl(r),s=gi(this),a=Kn(void 0);try{if(!(4&i)){let u=this.records.get(e);if(void 0===u){const d=function o5(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&qf(e);u=d&&this.injectableDefInScope(d)?Ya(Hv(e),ep):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,i)}return(2&i?$v():this.parent).get(e,n=8&i&&n===fs?null:n)}catch(c){const u=function z6(t){return t[Av]}(c);throw-200===u||-201===u?new U(u,null):c}finally{Kn(a),gi(s)}}resolveInjectorInitializers(){const e=de(null),n=gi(this),r=Kn(void 0);try{const o=this.get(io,at,{self:!0});for(const s of o)s()}finally{gi(n),Kn(r),de(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Wn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=mi(e=ve(e))?e:ve(e&&e.provide);const r=function n5(t){return Uv(t)?Ya(void 0,t.useValue):Ya(s0(t),ep)}(e);if(!mi(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ya(void 0,ep,!0),i.factory=()=>Nv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const i=de(null);try{if(n.value===o0)throw Dv(Wn(e));return n.value===ep&&(n.value=o0,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function i5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ve(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Hv(t){const e=qf(t),n=null!==e?e.factory:ps(t);if(null!==n)return n;if(t instanceof z)throw new U(204,!1);if(t instanceof Function)return function t5(t){if(t.length>0)throw new U(204,!1);const n=function k6(t){return(t?.[Wf]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new U(204,!1)}function s0(t,e,n){let r;if(mi(t)){const i=ve(t);return ps(i)||Hv(i)}if(Uv(t))r=()=>ve(t.useValue);else if(function r0(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Nv(t.deps||[]));else if(function n0(t){return!(!t||!t.useExisting)}(t))r=(i,o)=>be(ve(t.useExisting),void 0!==o&&8&o?8:void 0);else{const i=ve(t&&(t.useClass||t.provide));if(!function r5(t){return!!t.deps}(t))return ps(i)||Hv(i);r=()=>new i(...Nv(t.deps))}return r}function Cl(t){if(t.destroyed)throw new U(205,!1)}function Ya(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zv(t,e){for(const n of t)Array.isArray(n)?zv(n,e):n&&Cv(n)?zv(n.\u0275providers,e):e(n)}function Ir(t,e){let n;t instanceof gs?(Cl(t),n=t):n=new G6(t);const i=gi(n),o=Kn(void 0);try{return e()}finally{gi(i),Kn(o)}}function It(t){return Array.isArray(t)&&"object"==typeof t[1]}function xn(t){return Array.isArray(t)&&!0===t[1]}function c0(t){return!!(4&t.flags)}function vi(t){return t.componentOffset>-1}function tc(t){return!(1&~t.flags)}function cr(t){return!!t.template}function uo(t){return!!(512&t[2])}function Ii(t){return!(256&~t[2])}function Jt(t){for(;Array.isArray(t);)t=t[0];return t}function nc(t,e){return Jt(e[t])}function jt(t,e){return Jt(e[t.index])}function rc(t,e){return t.data[e]}function kn(t,e){const n=e[t];return It(n)?n:n[0]}function Qv(t){return!(128&~t[2])}function mn(t,e){return null==e?null:t[e]}function p0(t){t[17]=0}function g0(t){1024&t[2]||(t[2]|=1024,Qv(t)&&ic(t))}function ip(t){return!!(9216&t[2]||t[24]?.dirty)}function Yv(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),ip(t)&&ic(t)}function ic(t){t[10].changeDetectionScheduler?.notify(0);let e=Ei(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Qv(e));)e=Ei(e)}function op(t,e){if(Ii(t))throw new U(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function Ei(t){const e=t[3];return xn(e)?e[3]:e}function _0(t){return t[7]??=[]}function y0(t){return t.cleanup??=[]}const he={lFrame:x0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Xv=!1;function v0(){he.lFrame.elementDepthCount--}function E0(t){return he.skipHydrationRootTNode===t}function w0(){he.skipHydrationRootTNode=null}function V(){return he.lFrame.lView}function Ie(){return he.lFrame.tView}function Et(t){return he.lFrame.contextLView=t,t[8]}function wt(t){return he.lFrame.contextLView=null,t}function fe(){let t=T0();for(;null!==t&&64===t.type;)t=t.parent;return t}function T0(){return he.lFrame.currentTNode}function wi(t,e){const n=he.lFrame;n.currentTNode=t,n.isParent=e}function b0(){return he.lFrame.isParent}function D0(){return Xv}function sp(t){const e=Xv;return Xv=t,e}function Qn(){return he.lFrame.bindingIndex++}function bi(t){const e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function y5(t,e){const n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,tI(e)}function tI(t){he.lFrame.currentDirectiveIndex=t}function rI(){return he.lFrame.currentQueryIndex}function ap(t){he.lFrame.currentQueryIndex=t}function I5(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function P0(t,e,n){if(4&n){let i=e,o=t;for(;!(i=i.parent,null!==i||1&n||(i=I5(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,t=o}const r=he.lFrame=N0();return r.currentTNode=e,r.lView=t,!0}function iI(t){const e=N0(),n=t[1];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function N0(){const t=he.lFrame,e=null===t?null:t.child;return null===e?x0(t):e}function x0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function k0(){const t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const O0=k0;function oI(){const t=k0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function on(){return he.lFrame.selectedIndex}function Is(t){he.lFrame.selectedIndex=t}function Gr(){const t=he.lFrame;return rc(t.tView,t.selectedIndex)}function Mr(){he.lFrame.currentNamespace="svg"}function Es(){!function T5(){he.lFrame.currentNamespace=null}()}let V0=!0;function cp(){return V0}function Rl(t){V0=t}function L0(t,e=null,n=null,r){const i=F0(t,e,n,r);return i.resolveInjectorInitializers(),i}function F0(t,e=null,n=null,r,i=new Set){const o=[n||at,X6(t)];return r=r||("object"==typeof t?void 0:Wn(t)),new gs(o,e||$v(),r||null,i)}class ur{static THROW_IF_NOT_FOUND=fs;static NULL=new Zf;static create(e,n){if(Array.isArray(e))return L0({name:""},n,e,"");{const r=e.name??"";return L0({name:r},e.parent,e.providers,r)}}static \u0275prov=oe({token:ur,providedIn:"any",factory:()=>be(e0)});static __NG_ELEMENT_ID__=-1}const Pr=new z("");let Wr=(()=>class t{static __NG_ELEMENT_ID__=C5;static __NG_ENV_ID__=n=>n})();class U0 extends Wr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ii(this._lView)}onDestroy(e){const n=this._lView;return op(n,e),()=>function Jv(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function C5(){return new U0(V())}class sc{_console=console;handleError(e){this._console.error("ERROR",e)}}const Kr=new z("",{providedIn:"root",factory:()=>{const t=O(Nn);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(sc),e.handleError(n))}}}),j0={provide:io,useValue:()=>{O(sc)},multi:!0};function Ge(t,e){const[n,r,i]=u6(t,e?.equal),o=n;return o.set=r,o.update=i,o.asReadonly=sI.bind(o),o}function sI(){const t=this[Qt];if(void 0===t.readonlyFn){const e=()=>this();e[Qt]=t,t.readonlyFn=e}return t.readonlyFn}let aI=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=A5})();function A5(){return new aI(V(),fe())}class ws{}const H0=new z("",{providedIn:"root",factory:()=>!1}),z0=new z(""),q0=new z("");let lo=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yr(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ft(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=oe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ml(...t){}let W0=(()=>{class t{static \u0275prov=oe({token:t,providedIn:"root",factory:()=>new D5})}return t})();class D5{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let K0=null;function ho(){return K0}class M5{}let Q0=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(P5),providedIn:"platform"})}return t})(),P5=(()=>{class t extends Q0{_location;_history;_doc=O(Pr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ho().getBaseHref(this._doc)}onPopState(n){const r=ho().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ho().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Y0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function J0(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function Ts(t){return t&&"?"!==t[0]?`?${t}`:t}let up=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(x5),providedIn:"root"})}return t})();const N5=new z("");let x5=(()=>{class t extends up{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Pr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Y0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ts(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Ts(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Ts(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(be(Q0),be(N5,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pl=(()=>{class t{_subject=new Gn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function V5(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(J0(Z0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ts(r))}normalize(n){return t.stripTrailingSlash(function O5(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Z0(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ts(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ts(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ts;static joinWithSlash=Y0;static stripTrailingSlash=J0;static \u0275fac=function(r){return new(r||t)(be(up))};static \u0275prov=oe({token:t,factory:()=>function k5(){return new Pl(be(up))}(),providedIn:"root"})}return t})();function Z0(t){return t.replace(/\/index.html$/,"")}function lP(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){lP(o,r,i,s,a,"next",c)}function a(c){lP(o,r,i,s,a,"throw",c)}s(void 0)})}}function dP(t){return ut(t?.lift)}function sn(t){return e=>{if(dP(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Gt(t,e,n,r,i){return new vG(t,e,n,r,i)}class vG extends _v{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ze(t,e){return sn((n,r)=>{let i=0;n.subscribe(Gt(r,o=>{r.next(t.call(e,o,i++))}))})}function Ci(t){return{toString:t}.toString()}class t9{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function bP(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const Si=(()=>{const t=()=>CP;return t.ngInherit=!0,t})();function CP(t){return t.type.prototype.ngOnChanges&&(t.setInput=r9),n9}function n9(){const t=AP(this),e=t?.current;if(e){const n=t.previous;if(n===zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function r9(t,e,n,r,i){const o=this.declaredInputs[r],s=AP(t)||function i9(t,e){return t[SP]=e}(t,{previous:zr,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new t9(u&&u.currentValue,n,c===zr),bP(t,e,i,n)}const SP="__ngSimpleChanges__";function AP(t){return t[SP]||null}const Cs=[],qe=function(t,e=null,n){for(let r=0;r<Cs.length;r++)(0,Cs[r])(t,e,n)};function vp(t,e,n){RP(t,e,3,n)}function Ip(t,e,n,r){(3&t[2])===n&&RP(t,e,n,r)}function yI(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function RP(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<o||-1==o)&&(u9(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function MP(t,e){qe(4,t,e);const n=de(null);try{e.call(t)}finally{de(n),qe(5,t,e)}}function u9(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,MP(a,o)):MP(a,o)}class Fl{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function NP(t){return 3===t||4===t||6===t}function xP(t){return 64===t.charCodeAt(0)}function pc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||kP(t,n,i,0,-1===n||2===n?e[++r]:null)}}return t}function kP(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n)return void(null!==i&&(t[o+1]=i));o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i)}function II(t){return-1!==t}function Ul(t){return 32767&t}function jl(t,e){let n=function f9(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let EI=!0;function Ep(t){const e=EI;return EI=t,e}let p9=0;const Yr={};function wp(t,e){const n=LP(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,wI(r.data,t),wI(e,null),wI(r.blueprint,null));const i=Tp(t,e),o=t.injectorIndex;if(II(i)){const s=Ul(i),a=jl(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function wI(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Tp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=zP(i),null===r)return-1;if(n++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function TI(t,e,n){!function g9(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Il)&&(r=n[Il]),null==r&&(r=n[Il]=p9++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function FP(t,e,n){if(8&n||void 0!==t)return t;Rv()}function UP(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=t[9],o=Kn(void 0);try{return i?i.get(e,r,8&n):QM(e,r,8&n)}finally{Kn(o)}}return FP(r,0,n)}function jP(t,e,n,r=0,i){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function I9(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!uo(s);){const a=BP(o,s,n,2|r,Yr);if(a!==Yr)return a;let c=o.parent;if(!c){const u=s[20];if(u){const d=u.get(n,Yr,r);if(d!==Yr)return d}c=zP(s),s=s[14]}o=c}return i}(t,e,n,r,Yr);if(s!==Yr)return s}const o=BP(t,e,n,r,Yr);if(o!==Yr)return o}return UP(e,n,r,i)}function BP(t,e,n,r,i){const o=function y9(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Il)?t[Il]:void 0;return"number"==typeof e?e>=0?255&e:v9:e}(n);if("function"==typeof o){if(!P0(e,t,r))return 1&r?FP(i,0,r):UP(e,n,r,i);try{let s;if(s=o(r),null!=s||8&r)return s;Rv()}finally{O0()}}else if("number"==typeof o){let s=null,a=LP(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?Tp(t,e):e[a+8],-1!==c&&HP(r,!1)?(s=e[1],a=Ul(c),e=jl(c,e)):a=-1);-1!==a;){const d=e[1];if($P(o,a,d.data)){const h=_9(a,e,n,s,r,u);if(h!==Yr)return h}c=e[a+8],-1!==c&&HP(r,e[1].data[a+8]===u)&&$P(o,a,e)?(s=d,a=Ul(c),e=jl(c,e)):a=-1}}return i}function _9(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],d=bp(a,s,n,null==r?vi(a)&&EI:r!=s&&!!(3&a.type),1&i&&o===a);return null!==d?Bl(e,s,d,a,i):Yr}function bp(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,f=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<f;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&cr(g)&&g.type===n)return c}return null}function Bl(t,e,n,r,i){let o=t[n];const s=e.data;if(o instanceof Fl){const a=o;if(a.resolving)throw function Me(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pe(t)}(s[n]),Dv();const c=Ep(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Kn(a.injectImpl):null;P0(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function c9(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=CP(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,s[n],e)}finally{null!==h&&Kn(h),Ep(c),a.resolving=!1,O0()}}return o}function $P(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function HP(t,e){return!(2&t||1&t&&e)}class Dt{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jP(this._tNode,this._lView,e,wl(r),n)}}function v9(){return new Dt(fe(),V())}function Zt(t){return Ci(()=>{const e=t.prototype.constructor,n=e[hs]||bI(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[hs]||bI(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bI(t){return zf(t)?()=>{const e=bI(ve(t));return e&&e()}:ps(t)}function zP(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function Cp(t){return function m9(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(NP(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(fe(),t)}function D9(){return gc(fe(),V())}function gc(t,e){return new Nr(jt(t,e))}let Nr=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=D9})();function QP(t){return t instanceof Nr?t.nativeElement:t}function R9(){return this._results[Symbol.iterator]()}class M9{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Gn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function vr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Y6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=R9}function $l(t){return!(128&~t.flags)}var Ap=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ap||{});const Dp=new Map;let x9=0;function AI(t){Dp.delete(t[19])}const RI="__ngContext__";function Jn(t,e){It(e)?(t[RI]=e[19],function O9(t){Dp.set(t[19],t)}(e)):t[RI]=e}function sN(t){return cN(t[12])}function aN(t){return cN(t[4])}function cN(t){for(;null!==t&&!xn(t);)t=t[4];return t}let MI;const zl=new z("",{providedIn:"root",factory:()=>rW}),rW="ng",gN=new z(""),mN=new z("",{providedIn:"platform",factory:()=>"unknown"}),_N=new z("",{providedIn:"root",factory:()=>function go(){if(void 0!==MI)return MI;if(typeof document<"u")return document;throw new U(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),dW=new z("",{providedIn:"root",factory:()=>!1});function xp(t){return!(32&~t.flags)}function $N(t,e){const n=t.contentQueries;if(null!==n){const r=de(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];ap(n[i]),a.contentQueries(2,e[s],s)}}}finally{de(r)}}}function KI(t,e,n){ap(0);const r=de(null);try{e(t,n)}finally{de(r)}}function QI(t,e,n){if(c0(e)){const r=de(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{de(r)}}}var Ai=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ai||{});let Bp;function QN(t){return function ZI(){if(void 0===Bp&&(Bp=null,Ct.trustedTypes))try{Bp=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bp}()?.createScriptURL(t)||t}class YN{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HM})`}}function _o(t){return t instanceof YN?t.changingThisBreaksApplicationSecurity:t}function Wl(t,e){const n=function KW(t){return t instanceof YN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${HM})`)}return n===e}const ZW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hp(t,e,n){return t.createElement(e,n)}function As(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ax(t,e,n){t.appendChild(e,n)}function cx(t,e,n,r,i){null!==r?As(t,e,n,r,i):ax(t,e,n)}function Ql(t,e,n,r){t.removeChild(null,e,n,r)}function lx(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&function h9(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];xP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}}(t,e,r),null!==i&&function h8(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,i),null!==o&&function d8(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}var Ec=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ec||{});function yo(t){const e=Yl();return e?e.sanitize(Ec.URL,t)||"":Wl(t,"URL")?_o(t):function XI(t){return(t=String(t)).match(ZW)?t:"unsafe:"+t}(pe(t))}function dx(t){const e=Yl();if(e)return QN(e.sanitize(Ec.RESOURCE_URL,t)||"");if(Wl(t,"ResourceURL"))return QN(_o(t));throw new U(904,!1)}const v8=new Set(["embed","frame","iframe","media","script"]),I8=new Set(["base","link","script"]);function hx(t,e,n){return function E8(t,e){return"src"===e&&v8.has(t)||"href"===e&&I8.has(t)||"xlink:href"===e&&"script"===t?dx:yo}(e,n)(t)}function Yl(){const t=V();return t&&t[10].sanitizer}function Jr(t){return t instanceof Function?t():t}function N8(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const _x="ng-template";function x8(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==N8(e[i+1].toLowerCase(),n,0))return!0}else if(oE(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function oE(t){return 4===t.type&&t.value!==_x}function k8(t,e,n){return e===(4!==t.type||n?t.value:_x)}function O8(t,e,n){let r=4;const i=t.attrs,o=null!==i?function F8(t){for(let e=0;e<t.length;e++)if(NP(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!k8(t,c,n)||""===c&&1===e.length){if(xr(r))return!1;s=!0}}else if(8&r){if(null===i||!x8(t,i,c,n)){if(xr(r))return!1;s=!0}}else{const u=e[++a],d=V8(c,i,oE(t),n);if(-1===d){if(xr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(xr(r))return!1;s=!0}}}}else{if(!s&&!xr(r)&&!xr(c))return!1;if(s&&xr(c))continue;s=!1,r=c|1&r}}return xr(r)||s}function xr(t){return!(1&t)}function V8(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function U8(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function yx(t,e,n=!1){for(let r=0;r<e.length;r++)if(O8(t,e[r],n))return!0;return!1}function vx(t,e){return t?":not("+e.trim()+")":e}function B8(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!xr(s)&&(e+=vx(o,i),i=""),r=s,o=o||!xr(r);n++}return""!==i&&(e+=vx(o,i)),e}const We={};function sE(t,e,n,r,i,o,s,a,c,u,d){const h=27+r,f=h+i,g=function z8(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(h,f),_="function"==typeof u?u():u;return g[1]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function qp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[0]=i,h[2]=1228|r,(null!==u||t&&2048&t[2])&&(h[2]|=2048),p0(h),h[3]=h[14]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[9]=c||t&&t[9]||null,h[5]=o,h[19]=function k9(){return x9++}(),h[6]=d,h[20]=u,h[15]=2==e.type?t[15]:h,h}function aE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Jl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cE(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function $(t=1){Ex(Ie(),V(),on()+t,!1)}function Ex(t,e,n,r){if(!r)if(3&~e[2]){const o=t.preOrderHooks;null!==o&&Ip(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&vp(e,o,n)}Is(n)}var Gp=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Gp||{});function Zl(t,e,n,r){const i=de(null);try{const[o,s,a]=t.inputs[n];let c=null;0!==(s&Gp.SignalBased)&&(c=e[o][Qt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,o):bP(e,c,o,r)}finally{de(i)}}var Ds=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ds||{});function lE(t,e){return undefined(t,e)}const Rs=new Set;var dE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(dE||{});const Xl=new z(""),Cx=new Set;function yn(t){Cx.has(t)||(Cx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const Sx=!1,Bt=class J8 extends Gn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function qv(){return void 0!==KM()||null!=dl()}()&&(this.destroyRef=O(Wr,{optional:!0})??void 0,this.pendingTasks=O(lo,{optional:!0})??void 0)}emit(e){const n=de(null);try{super.next(e)}finally{de(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Mn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function Ax(t){let e,n;function r(){t=Ml;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Dx(t){return queueMicrotask(()=>t()),()=>{t=Ml}}const hE="isAngularZone",Kp=hE+"_ID";let Z8=0;class $e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Bt(!1);onMicrotaskEmpty=new Bt(!1);onStable=new Bt(!1);onError=new Bt(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Sx}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function t7(t){const e=()=>{!function e7(t){function e(){Ax(()=>{t.callbackScheduled=!1,pE(t),t.isCheckStableRunning=!0,fE(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),pE(t))}(t)},n=Z8++;t._inner=t._inner.fork({name:"angular",properties:{[hE]:!0,[Kp]:n,[Kp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function n7(t){return Px(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return Rx(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Mx(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Rx(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function r7(t){return Px(t,"__scheduler_tick__")}(c)&&e(),Mx(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,pE(t),fE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(hE)}static assertInAngularZone(){if(!$e.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if($e.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,X8,Ml,Ml);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const X8={};function fE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function Rx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Mx(t){t._nesting--,fE(t)}class gE{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Bt;onMicrotaskEmpty=new Bt;onStable=new Bt;onError=new Bt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function Px(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let Nx=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=oe({token:t,providedIn:"root",factory:()=>new t})}return t})();const Qp=new z("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Vx(t,e,n){const r=t.get(Qp);if(Array.isArray(e))for(const i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Lx(t,e,n,r){const i=t?.[26]?.enter;null!==e&&i&&i.has(n.index)&&function _E(t,e){for(const[n,r]of e)Vx(t,r.animateFns)}(r,i)}function bc(t,e,n,r,i,o,s,a){if(null!=i){let c,u=!1;xn(i)?c=i:It(i)&&(u=!0,i=i[0]);const d=Jt(i);0===t&&null!==r?(Lx(a,r,o,n),null==s?ax(e,r,d):As(e,r,d,s||null,!0)):1===t&&null!==r?(Lx(a,r,o,n),As(e,r,d,s||null,!0)):2===t?jx(a,o,n,h=>{Ql(e,d,u,h)}):3===t&&jx(a,o,n,()=>{e.destroyNode(d)}),null!=c&&function m7(t,e,n,r,i,o,s){const a=r[7];a!==Jt(r)&&bc(e,t,n,o,a,i,s);for(let u=10;u<r.length;u++){const d=r[u];Zp(d[1],d,t,e,o,a)}}(e,t,n,c,o,r,s)}}function Ux(t,e){e[10].changeDetectionScheduler?.notify(9),Zp(t,e,e[11],2,null,null)}function yE(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function ed(t,e){if(Ii(e))return;const n=e[11];n.destroyNode&&Zp(t,e,n,3,null,null),function d7(t){let e=t[12];if(!e)return vE(t[1],t);for(;e;){let n=null;if(It(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)It(e)&&vE(e[1],e),e=e[3];null===e&&(e=t),It(e)&&vE(e[1],e),n=e&&e[4]}e=n}}(e)}function vE(t,e){if(Ii(e))return;const n=de(null);try{e[2]&=-129,e[2]|=256,e[24]&&ml(e[24]),function p7(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Fl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];qe(4,a,c);try{c.call(a)}finally{qe(5,a,c)}}else{qe(4,i,o);try{o.call(i)}finally{qe(5,i,o)}}}}}(t,e),function f7(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&xn(e[3])){r!==e[3]&&yE(r,e);const i=e[18];null!==i&&i.detachView(t)}AI(e)}finally{de(n)}}function jx(t,e,n,r){const i=t?.[26];if(null==i||null==i.leave||!i.leave.has(e.index))return r(!1);t&&Rs.add(t),Vx(n,()=>{if(i.leave&&i.leave.has(e.index)){const s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),function h7(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Rs.delete(t),e(!0)}):e(!1)}(t,r)}else t&&Rs.delete(t),r(!1)},i)}function IE(t,e,n){return function Bx(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(vi(r)){const{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ai.None||i===Ai.Emulated)return null}return jt(r,n)}(t,e.parent,n)}let zx=function Hx(t,e,n){return 40&t.type?jt(t,n):null};function wE(t,e,n,r){const i=IE(t,r,e),o=e[11],a=function $x(t,e,n){return zx(t,e,n)}(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)cx(o,i,n[c],a,!1);else cx(o,i,n,a,!1)}function Ms(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Jp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ms(t,r);{const i=t[e.index];return xn(i)?Jp(-1,i):Jt(i)}}if(128&n)return Ms(t,e.next);if(32&n)return lE(e,t)()||Jt(t[e.index]);{const r=Gx(t,e);return null!==r?Array.isArray(r)?r[0]:Ms(Ei(t[15]),r):Ms(t,e.next)}}return null}function Gx(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Jp(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ms(r,i)}return e[7]}function TE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&Jn(Jt(c),r),n.flags|=2),!xp(n))if(8&u)TE(t,e,n.child,r,i,o,!1),bc(e,t,a,i,c,n,o,r);else if(32&u){const d=lE(n,r);let h;for(;h=d();)bc(e,t,a,i,h,n,o,r);bc(e,t,a,i,c,n,o,r)}else 16&u?Wx(t,e,r,n,i,o):bc(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Zp(t,e,n,r,i,o){TE(n,r,t.firstChild,e,i,o,!1)}function Wx(t,e,n,r,i,o){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)bc(e,t,n[9],i,c[u],r,o,n);else{let u=c;const d=s[3];$l(r)&&(u.flags|=128),TE(t,e,u,d,i,o,!0)}}function Kx(t,e,n,r,i){const o=on(),s=2&r;try{Is(-1),s&&e.length>27&&Ex(t,e,27,!1),qe(s?2:0,i,n),n(r,i)}finally{Is(o),qe(s?3:1,i,n)}}function Xp(t,e,n){(function w7(t,e,n){const r=n.directiveStart,i=n.directiveEnd;vi(n)&&function q8(t,e,n){const r=jt(e,t),i=function Ix(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=sE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),o=t[10].rendererFactory,s=cE(t,qp(t,i,null,aE(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||wp(n,e);const o=n.initialInputs;for(let s=r;s<i;s++){const a=t.data[s],c=Bl(e,t,s,n);Jn(c,e),null!==o&&S7(0,s-r,c,a,0,o),cr(a)&&(kn(n.index,e)[8]=Bl(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function T7(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function v5(){return he.lFrame.currentDirectiveIndex}();try{Is(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];tI(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&b7(c,u)}}finally{Is(-1),tI(s)}}(t,e,n)}function Cc(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}let Qx=()=>null;function bE(t,e,n,r,i,o){rg(t,e[1],e,n,r)?vi(t)&&function Yx(t,e){const n=kn(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function E7(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),CE(t,e,n,r,i,o))}function CE(t,e,n,r,i,o){if(3&t.type){const s=jt(t,e);r=null!=o?o(r,t.value||"",n):r,i.setProperty(s,n,r)}}function b7(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function SE(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];yx(e,o.selectors,!1)&&(r??=[],cr(o)?r.unshift(o):r.push(o))}return r}function S7(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)Zl(r,n,s[a],s[a+1])}function tg(t,e,n,r,i){const o=27+n,s=e[1],a=i(s,e,t,r,n);e[o]=a,wi(t,!0);const c=2===t.type;return c?(lx(e[11],a,t),(0===function f5(){return he.lFrame.elementDepthCount}()||tc(t))&&Jn(a,e),function p5(){he.lFrame.elementDepthCount++}()):Jn(a,e),cp()&&(!c||!xp(t))&&wE(s,e,a,t),t}function ng(t){let e=t;return b0()?function C0(){he.lFrame.isParent=!1}():(e=e.parent,wi(e,!1)),e}function rg(t,e,n,r,i){const o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];Zl(e.data[u],n[u],s[c+1],i),a=!0}if(o)for(const c of o)Zl(e.data[c],n[c],r,i),a=!0;return a}function D7(t,e){const n=kn(e,t),r=n[1];!function R7(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[0];null!==i&&null===n[6]&&(n[6]=null),qe(18),ig(r,n,n[8]),qe(19,n[8])}function ig(t,e,n){iI(e);try{const r=t.viewQuery;null!==r&&KI(1,r,n);const i=t.template;null!==i&&Kx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&$N(t,e),t.staticViewQueries&&KI(2,t.viewQuery,n);const o=t.components;null!==o&&function M7(t,e){for(let n=0;n<e.length;n++)D7(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,oI()}}function Sc(t,e,n,r){const i=de(null);try{const o=e.tView,c=qp(t,o,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const d=t[18];return null!==d&&(c[18]=d.createEmbeddedView(o)),ig(o,c,n),c}finally{de(i)}}function Ps(t,e){return!e||null===e.firstChild||$l(t)}function td(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Jt(o)),xn(o)&&P7(o,r);const s=n.type;if(8&s)td(t,e,n.child,r);else if(32&s){const a=lE(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Gx(e,n);if(Array.isArray(a))r.push(...a);else{const c=Ei(e[15]);td(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function P7(t,e){for(let n=10;n<t.length;n++){const r=t[n],i=r[1].firstChild;null!==i&&td(r[1],r,i,e)}t[7]!==t[0]&&e.push(t[7])}function Xx(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let e1=[];const O7={...za,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ic(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},L7={...za,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Ei(t.lView);for(;e&&!t1(e[1]);)e=Ei(e);e&&g0(e)},consumerOnSignalRead(){this.lView[24]=this}};function t1(t){return 2!==t.type}function n1(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function og(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function U7(t,e){const n=D0();try{sp(!0),DE(t,e);let r=0;for(;ip(t);){if(100===r)throw new U(103,!1);r++,DE(t,1)}}finally{sp(n)}}(t,e)}finally{r.end?.()}}function r1(t,e,n,r){if(Ii(e))return;const i=e[2];iI(e);let a=!0,c=null,u=null;t1(t)?(u=function N7(t){return t[24]??function x7(t){const e=e1.pop()??Object.create(O7);return e.lView=t,e}(t)}(e),c=qa(u)):null===function av(){return fn}()?(a=!1,u=function V7(t){const e=t[24]??Object.create(L7);return e.lView=t,e}(e),c=qa(u)):e[24]&&(ml(e[24]),e[24]=null);try{p0(e),function R0(t){return he.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Kx(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&vp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&Ip(e,g,0,null),yI(e,0)}if(function j7(t){for(let e=sN(t);null!==e;e=aN(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)g0(n[r])}}(e),n1(e),i1(e,0),null!==t.contentQueries&&$N(t,e),d){const g=t.contentCheckHooks;null!==g&&vp(e,g)}else{const g=t.contentHooks;null!==g&&Ip(e,g,1),yI(e,1)}!function $7(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Is(~i);else{const o=i,s=n[++r],a=n[++r];y5(s,o);const c=e[o];qe(24,c),a(2,c),qe(25,c)}}}finally{Is(-1)}}(t,e);const h=t.components;null!==h&&s1(e,h,0);const f=t.viewQuery;if(null!==f&&KI(2,f,r),d){const g=t.viewCheckHooks;null!==g&&vp(e,g)}else{const g=t.viewHooks;null!==g&&Ip(e,g,2),yI(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const g of e[22])g();e[22]=null}Xx(e),e[2]&=-73}catch(d){throw ic(e),d}finally{null!==u&&(gl(u,c),a&&function k7(t){t.lView[24]!==t&&(t.lView=null,e1.push(t))}(u)),oI()}}function i1(t,e){for(let n=sN(t);null!==n;n=aN(n))for(let r=10;r<n.length;r++)o1(n[r],e)}function B7(t,e,n){qe(18);const r=kn(e,t);o1(r,n),qe(19,r[8])}function o1(t,e){Qv(t)&&DE(t,e)}function DE(t,e){const r=t[1],i=t[2],o=t[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!Lf(o)),s||=!1,o&&(o.dirty=!1),t[2]&=-9217,s)r1(r,t,r.template,t[8]);else if(8192&i){const a=de(null);try{n1(t),i1(t,1);const c=r.components;null!==c&&s1(t,c,1),Xx(t)}finally{de(a)}}}function s1(t,e,n){for(let r=0;r<e.length;r++)B7(t,e[r],n)}function Ac(t,e){const n=D0()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=Ei(t);if(uo(t)&&!r)return t;t=r}return null}function a1(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function c1(t,e){const n=10+e;if(n<t.length)return t[n]}function Dc(t,e,n,r=!0){const i=e[1];if(function H7(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],JM(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&u1(s,e);const a=e[18];null!==a&&a.insertView(t),Yv(e),e[2]|=128}(i,e,t,n),r){const s=Jp(n,t),a=e[11],c=a.parentNode(t[7]);null!==c&&function l7(t,e,n,r,i,o){r[0]=i,r[5]=e,Zp(t,r,n,1,i,o)}(i,t[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function RE(t,e){const n=nd(t,e);return void 0!==n&&ed(n[1],n),n}function nd(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[16];null!==i&&i!==t&&yE(i,r),e>0&&(t[n-1][4]=r[4]);const o=Qf(t,10+e);!function Fx(t,e){Ux(t,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function u1(t,e){const n=t[9],r=e[3];(It(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class rd{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return td(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Ii(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(xn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(nd(e,r),Qf(n,r))}this._attachedToViewContainer=!1}ed(this._lView[1],this._lView)}onDestroy(e){op(this._lView,e)}markForCheck(){Ac(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Yv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,og(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=uo(this._lView),n=this._lView[16];null!==n&&!e&&yE(n,this._lView),Ux(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;const n=uo(this._lView),r=this._lView[16];null!==r&&!n&&u1(r,this._lView),Yv(this._lView)}}let sg=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=z7;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const o=Sc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new rd(o)}})();function z7(){return ag(fe(),V())}function ag(t,e){return 4&t.type?new sg(e,t,gc(t,e)):null}function Ns(t,e,n,r,i){let o=t.data[e];if(null===o)o=function xE(t,e,n,r,i){const o=T0(),s=b0(),c=t.data[e]=function X7(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function I0(){return null!==he.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return function Z7(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,o,s),c}(t,e,n,r,i),function _5(){return he.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Dl(){const t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return wi(o,!0),o}function D1(t,e){let n=0,r=t.firstChild;if(r){const i=t.data.r;for(;n<i;){const o=r.nextSibling;Ql(e,r,!1),r=o,n++}}}let OK=class{},k1=class{};class VK{resolveComponentFactory(e){throw new U(917,!1)}}let gg=class{static NULL=new VK};class jE{}let ks=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function LK(){const t=V(),n=kn(fe().index,t);return(It(n)?n:t)[11]}()})(),FK=(()=>{class t{static \u0275prov=oe({token:t,providedIn:"root",factory:()=>null})}return t})();const $E={};class Mc{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,$E,r);return i!==$E||n===$E?i:this.parentInjector.get(e,n,r)}}function _g(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=wv(i,a):2==o&&(r=wv(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function te(t,e=0){const n=V();return null===n?be(t,e):jP(fe(),n,ve(t),e)}function zK(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function L1(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),U1(e,o)}}function F1(t,e,n,r){const i=0===t?n.inputs:n.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),U1(e,s)}}function U1(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function j1(t,e,n){const{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(null===r||!n&&null===i||n&&null===o||oE(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&i.hasOwnProperty(c)){const u=i[c];for(const d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){const u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function WK(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ps(i.type)),s=new Fl(o,cr(i),te,null);t.blueprint[r]=s,n[r]=s,function KK(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function QK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Jl(t,n,i.hostVars,We),i)}function YK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cr(e)&&(n[""]=t)}}function HE(t,e,n,r,i,o,s,a){const c=e[1],u=c.consts,h=Ns(c,t,n,r,mn(u,s));return o&&function V1(t,e,n,r,i){const o=null===r?null:{"":-1},s=i(t,n);if(null!==s){let a=s,c=null,u=null;for(const d of s)if(null!==d.resolveHostDirectives){[a,c,u]=d.resolveHostDirectives(s);break}!function qK(t,e,n,r,i,o,s){const a=r.length;let c=!1;for(let f=0;f<a;f++){const g=r[f];!c&&cr(g)&&(c=!0,zK(t,n,f)),TI(wp(n,e),t,g.type)}!function JK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let f=0;f<a;f++){const g=r[f];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,h=Jl(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const g=r[f];if(n.mergedAttrs=pc(n.mergedAttrs,g.hostAttrs),WK(t,n,e,h,g),YK(h,g,i),null!==s&&s.has(g)){const[I,w]=s.get(g);n.directiveToIndex.set(g.type,[h,I+n.directiveStart,w+n.directiveStart])}else(null===o||!o.has(g))&&n.directiveToIndex.set(g.type,h);null!==g.contentQueries&&(n.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(n.flags|=64);const _=g.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}!function GK(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=t.data[r];if(null!==n&&n.has(i)){const o=n.get(i);F1(0,e,o,r),F1(1,e,o,r),j1(e,r,!0)}else L1(0,e,i,r),L1(1,e,i,r),j1(e,r,!1)}}(t,n,o)}(t,e,n,a,o,c,u)}null!==o&&null!==r&&function HK(t,e,n){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new U(-301,!1);r.push(e[i],o)}}(n,r,o)}(c,e,h,mn(u,a),i),h.mergedAttrs=pc(h.mergedAttrs,h.attrs),null!==h.attrs&&_g(h,h.attrs,!1),null!==h.mergedAttrs&&_g(h,h.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,h),h}function zE(t,e){(function DP(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}})(t,e),c0(e)&&t.queries.elementEnd(e)}function lt(t,e,n){return n!==We&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function pd(t,e,n){return function r(i){Ac(vi(t)?kn(t.index,e):e,5);const s=e[8];let a=$1(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=$1(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function $1(t,e,n,r){const i=de(null);try{return qe(6,e,n),!1!==n(r)}catch(o){return function AE(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(Kr,null)}catch{r=null}r?.(e)}(t,o),!1}finally{qe(7,e,n),de(i)}}function H1(t,e,n,r,i,o,s,a){const c=tc(t);let u=!1,d=null;if(!r&&c&&(d=function nQ(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],c=i[o+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,n,o,t.index)),null!==d)(d.__ngLastListenerFn__||d).__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0;else{const h=jt(t,n),f=r?r(h):h,g=i.listen(f,o,a);(function tQ(t){return t.startsWith("animation")||t.startsWith("transition")})(o)||z1(r?I=>r(Jt(I[t.index])):t.index,e,n,o,a,g,!1)}return u}function z1(t,e,n,r,i,o,s){const a=e.firstCreatePass?y0(e):null,c=_0(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function Ig(t,e,n,r,i,o){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(o);z1(t.index,a,e,i,o,h,!0)}const Io=Symbol("BINDING");class q1 extends gg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=He(e);return new GE(n,this.ngModule)}}class GE extends k1{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function lQ(t){return Object.keys(t).map(e=>{const[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:0!==(r&Gp.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function dQ(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function $8(t){return t.map(B8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){qe(22);const a=de(null);try{const c=this.componentDef,u=function mQ(t,e,n,r){const i=t?["ng-version","20.3.16"]:function H8(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!xr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let o=null,s=null,a=0;if(n)for(const d of n)a+=d[Io].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){const h=r[d];if("function"!=typeof h)for(const f of h.bindings){a+=f[Io].requiredVars;const g=d+1;f.create&&(f.targetIdx=g,(o??=[]).push(f)),f.update&&(f.targetIdx=g,(s??=[]).push(f))}}const c=[e];if(r)for(const d of r){const f=Pn("function"==typeof d?d:d.type);c.push(f)}return sE(0,null,function _Q(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(o,s),1,a,c,null,null,null,[i],null)}(r,c,s,o),d=function hQ(t,e,n){let r=e instanceof Nn?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new Mc(n,r):n}(c,i||this.ngModule,e),h=function fQ(t){const e=t.get(jE,null);if(null===e)throw new U(407,!1);return{rendererFactory:e,sanitizer:t.get(FK,null),changeDetectionScheduler:t.get(ws,null),ngReflect:!1}}(d),f=h.rendererFactory.createRenderer(null,c),g=r?function y7(t,e,n,r){const o=r.get(dW,!1)||n===Ai.ShadowDom,s=t.selectRootElement(e,o);return function v7(t){Qx(t)}(s),s}(f,r,c.encapsulation,d):function pQ(t,e){const n=function gQ(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return Hp(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),_=s?.some(G1)||o?.some(A=>"function"!=typeof A&&A.bindings.some(G1)),I=qp(null,u,null,512|aE(c),null,null,h,f,d,null,null);I[27]=g,iI(I);let w=null;try{const A=HE(27,I,2,"#host",()=>u.directiveRegistry,!0,0);lx(f,g,A),Jn(g,I),Xp(u,I,A),QI(u,A,I),zE(u,A),void 0!==n&&function vQ(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o&&o.length?Array.from(o):null)}}(A,this.ngContentSelectors,n),w=kn(A.index,I),I[8]=w[8],ig(u,I,null)}catch(A){throw null!==w&&AI(w),AI(I),A}finally{qe(23),oI()}return new yQ(this.componentType,I,!!_)}finally{de(a)}}}function G1(t){const e=t[Io].kind;return"input"===e||"twoWay"===e}class yQ extends OK{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=rc(n[1],27),this.location=gc(this._tNode,n),this.instance=kn(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new rd(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;rg(r,i[1],i,e,n),this.previousInputValues.set(e,n),Ac(kn(r.index,i),1)}get injector(){return new Dt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let Eg=(()=>class t{static __NG_ELEMENT_ID__=IQ})();function IQ(){return Q1(fe(),V())}const EQ=Eg,W1=class extends EQ{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return gc(this._hostTNode,this._hostLView)}get injector(){return new Dt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Tp(this._hostTNode,this._hostLView);if(II(e)){const n=jl(e,this._hostLView),r=Ul(e);return new Dt(n[1].data[r+8],n)}return new Dt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=K1(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,Ps(this._hostTNode,null)),a}createComponent(e,n,r,i,o,s,a){const c=e&&!function Ll(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const w=n||{};u=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}const d=c?e:new GE(He(e)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const A=(c?h:this.parentInjector).get(Nn,null);A&&(o=A)}He(d.componentType??{});const I=d.create(h,i,null,o,s,a);return this.insertImpl(I.hostView,u,Ps(this._hostTNode,null)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function d5(t){return xn(t[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new W1(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Dc(s,i,o,r),e.attachToViewContainerRef(),JM(WE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=K1(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=nd(this._lContainer,n);r&&(Qf(WE(this._lContainer),n),ed(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=nd(this._lContainer,n);return r&&null!=Qf(WE(this._lContainer),n)?new rd(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function K1(t){return t[8]}function WE(t){return t[8]||(t[8]=[])}function Q1(t,e){let n;const r=e[t.index];return xn(r)?n=r:(n=a1(r,e,null,t),e[t.index]=n,cE(e,n)),Y1(n,e,t,r),new W1(n,t,e)}let Y1=function Z1(t,e,n,r){if(t[7])return;let i;i=8&n.type?Jt(r):function wQ(t,e){const n=t[11],r=n.createComment(""),i=jt(e,t),o=n.parentNode(i);return As(n,o,r,n.nextSibling(i),!1),r}(e,n),t[7]=i};class QE{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new QE(this.queryList)}setDirty(){this.queryList.setDirty()}}class YE{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new YE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==tw(e,n).matches&&this.queries[n].setDirty()}}class X1{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function RQ(t){return t.split(",").map(e=>e.trim())}(e):e}}class JE{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new JE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ZE{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new ZE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,n,CQ(n,o)),this.matchTNodeWithReadOption(e,n,bp(n,e,o,!1,!1))}else r===sg?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,bp(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Nr||i===Eg||i===sg&&4&n.type)this.addMatch(n.index,-2);else{const o=bp(n,e,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function CQ(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function AQ(t,e,n,r){return-1===n?function SQ(t,e){return 11&t.type?gc(t,e):4&t.type?ag(t,e):null}(e,t):-2===n?function DQ(t,e,n){return n===Nr?gc(e,t):n===sg?ag(e,t):n===Eg?Q1(e,t):void 0}(t,e,r):Bl(t,t[1],n,e)}function ek(t,e,n,r){const i=e[18].queries[r];if(null===i.matches){const o=t.data,s=n.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:AQ(e,o[u],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function XE(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ek(t,e,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],d=e[-c];for(let h=10;h<d.length;h++){const f=d[h];f[16]===f[3]&&XE(f[1],f,u,r)}if(null!==d[9]){const h=d[9];for(let f=0;f<h.length;f++){const g=h[f];XE(g[1],g,u,r)}}}}}return r}function rk(t,e,n,r){const i=Ie();if(i.firstCreatePass){const o=fe();(function ik(t,e,n){null===t.queries&&(t.queries=new JE),t.queries.track(new ZE(e,n))})(i,new X1(e,n,r),o.index),function MQ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),!(2&~n)&&(i.staticContentQueries=!0)}return function tk(t,e,n){const r=new M9(!(4&~n));return function h5(t,e,n,r){const i=_0(e);i.push(n),t.firstCreatePass&&y0(t).push(r,i.length-1)}(t,e,r,r.destroy),(e[18]??=new YE).queries.push(new QE(r))-1}(i,V(),n)}function tw(t,e){return t.queries.getByIndex(e)}function ok(t,e){const n=t[1],r=tw(n,e);return r.crossesNgTemplate?XE(n,t,e,[]):ek(n,t,r,e)}let Nc=class{},lk=class{};class iw extends Nc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new q1(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;const o=qr(e);this._bootstrapComponents=Jr(o.bootstrap),this._r3Injector=F0(e,n,[{provide:Nc,useValue:this},{provide:gg,useValue:this.componentFactoryResolver},...r],Wn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class dk extends lk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new iw(this.moduleType,e,[])}}class hk extends Nc{injector;componentFactoryResolver=new q1(this);instance=null;constructor(e){super();const n=new gs([...e.providers,{provide:Nc,useValue:this},{provide:gg,useValue:this.componentFactoryResolver}],e.parent||$v(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ow(t,e,n=null){return new hk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let jQ=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Lv(0,n.type),i=r.length>0?ow([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=oe({token:t,providedIn:"environment",factory:()=>new t(be(Nn))})}return t})();function Xr(t){return Ci(()=>{const e=pk(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ap.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(jQ).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ai.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&yn("NgStandalone"),gk(n);const r=t.dependencies;return n.directiveDefs=Tg(r,fk),n.pipeDefs=Tg(r,Rr),n.id=function qQ(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function fk(t){return He(t)||Pn(t)}function wg(t){return Ci(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function BQ(t,e){if(null==t)return zr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Gp.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function $Q(t){if(null==t)return zr;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ae(t){return Ci(()=>{const e=pk(t);return gk(e),e})}function pk(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:BQ(t.inputs,e),outputs:$Q(t.outputs),debugInfo:null}}function gk(t){t.features?.forEach(e=>e(t))}function Tg(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const i of n){const o=e(i);null!==o&&r.push(o)}return r}:null}function Ke(t){let e=function mk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=sw(t.inputs),s.declaredInputs=sw(t.declaredInputs),s.outputs=sw(t.outputs);const a=i.hostBindings;a&&YQ(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&KQ(t,c),u&&QQ(t,u),GQ(t,i),C6(t.outputs,i.outputs),cr(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Ke&&(n=!1)}}e=Object.getPrototypeOf(e)}!function WQ(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pc(i.hostAttrs,n=pc(n,i.hostAttrs))}}(r)}function GQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function sw(t){return t===zr?{}:t===at?[]:t}function KQ(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function QQ(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function YQ(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ls(t,e,n,r,i,o,s,a,c,u,d){const h=n+27;let f;if(e.firstCreatePass){if(f=Ns(e,h,4,s||null,a||null),null!=u){const g=mn(e.consts,u);f.localNames=[];for(let _=0;_<g.length;_+=2)f.localNames.push(g[_],-1)}}else f=e.data[h];return function Ek(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=pc(t.mergedAttrs,t.attrs);const d=t.tView=sE(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),wi(t,!1);const c=bk(n,e,t,r);cp()&&wE(n,e,c,t),Jn(c,e);const u=a1(c,e,c,t);e[r+27]=u,cE(e,u)}(f,t,e,n,r,i,o,c),null!=u&&Cc(t,f,d),f}let bk=function Ck(t,e,n,r){return Rl(!0),e[11].createComment("")};let Fk=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Xk=new z("");function Ng(t){return!!t&&"function"==typeof t.then}function hJ(t){return!!t&&"function"==typeof t.subscribe}const eO=new z("");let tO=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(eO,{optional:!0})??[];injector=O(ur);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=Ir(this.injector,i);if(Ng(o))n.push(o);else if(hJ(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nO=new z("");let Ri=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Kr);afterRenderManager=O(Nx);zonelessEnabled=O(H0);rootEffectScheduler=O(W0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Gn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(lo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ze(n=>!n))}constructor(){O(Xl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(Nn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ur.NULL){return this._injector.get($e).run(()=>{qe(10);const s=n instanceof k1;if(!this._injector.get(tO).done)throw new U(405,"");let c;c=s?n:this._injector.get(gg).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function pJ(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Nc),h=c.create(i,[],r||c.selector,u),f=h.location.nativeElement,g=h.injector.get(Xk,null);return g?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),xg(this.components,h),g?.unregisterApplication(f)}),this._loadComponent(h),qe(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qe(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(dE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);const n=de(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(n),this.afterTick.next(),qe(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jE,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)qe(14),this.synchronizeOnce(),qe(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||ip(i))&&(og(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>ip(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;xg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(nO,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Vn(t,e,n,r){const i=V();return lt(i,Qn(),e)&&(Ie(),function C7(t,e,n,r,i,o){const s=jt(t,e);!function eg(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?pe(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[11],s,o,t.value,n,r,i)}(Gr(),i,t,e,n,r)),Vn}typeof document<"u"&&document;class dZ{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function Aw(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Dw(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function mO(t,e,n,r,i){if(Dw(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function _O(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class yO{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function xe(t,e,n,r,i,o,s,a){yn("NgControlFlow");const c=V(),u=Ie();return Ls(c,u,t,e,n,r,i,mn(u.consts,o),256,s,a),Rw}function Rw(t,e,n,r,i,o,s,a){yn("NgControlFlow");const c=V(),u=Ie();return Ls(c,u,t,e,n,r,i,mn(u.consts,o),512,s,a),Rw}function ke(t,e){yn("NgControlFlow");const n=V(),r=Qn(),i=n[r]!==We?n[r]:-1,o=-1!==i?Hg(n,27+i):void 0;if(lt(n,r,t)){const a=de(null);try{if(void 0!==o&&RE(o,0),-1!==t){const c=27+t,u=Hg(n,c),d=Pw(n[1],c),h=null;Dc(u,Sc(n,d,e,{dehydratedView:h}),0,Ps(d,h))}}finally{de(a)}}else if(void 0!==o){const a=c1(o,0);void 0!==a&&(a[8]=e)}}class fZ{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function $g(t){return t}function Mw(t,e){return e}class pZ{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function Ln(t,e,n,r,i,o,s,a,c,u,d,h,f){yn("NgControlFlow");const g=V(),_=Ie(),I=void 0!==c,w=V(),A=a?s.bind(w[15][8]):s,D=new pZ(I,A);w[27+t]=D,Ls(g,_,t+1,e,n,r,i,mn(_.consts,o),256),I&&Ls(g,_,t+2,c,u,d,h,mn(_.consts,f),512)}class gZ extends dZ{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,Dc(this.lContainer,n,e,Ps(this.templateTNode,r)),function mZ(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function c7(t,e){const n=t.get(Qp);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],i),Rs.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function _Z(t,e){if(t.length<=10)return;const r=t[10+e],i=r?r[26]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,e),function yZ(t,e){return nd(t,e)}(this.lContainer,e)}create(e,n){const i=Sc(this.hostLView,this.templateTNode,new fZ(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(e){ed(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function vZ(t,e){return c1(t,e)}(this.lContainer,e)}}function Fn(t){const e=de(null),n=on();try{const r=V(),i=r[1],o=r[n],s=n+1,a=Hg(r,s);if(void 0===o.liveCollection){const u=Pw(i,s);o.liveCollection=new gZ(a,r,u)}else o.liveCollection.reset();const c=o.liveCollection;if(function hZ(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const u=t.at(o),d=e[o],h=Aw(o,u,o,d,n);if(0!==h){h<0&&t.updateValue(o,d),o++;continue}const f=t.at(s),g=e[c],_=Aw(s,f,c,g,n);if(0!==_){_<0&&t.updateValue(s,g),s--,c--;continue}const I=n(o,u),w=n(s,f),A=n(o,d);if(Object.is(A,w)){const D=n(c,g);Object.is(D,I)?(t.swap(o,s),t.updateValue(s,g),c--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(r??=new yO,i??=_O(t,o,s,n),Dw(t,r,o,A))t.updateValue(o,d),o++,s++;else if(i.has(A))r.set(I,t.detach(o)),s--;else{const D=t.create(o,e[o]);t.attach(o,D),o++,s++}}for(;o<=c;)mO(t,r,n,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&o<=s;){const d=t.at(o),h=u.value,f=Aw(o,d,o,h,n);if(0!==f)f<0&&t.updateValue(o,h),o++,u=c.next();else{r??=new yO,i??=_O(t,o,s,n);const g=n(o,h);if(Dw(t,r,o,g))t.updateValue(o,h),o++,s++,u=c.next();else if(i.has(g)){const _=n(o,d);r.set(_,t.detach(o)),s--}else t.attach(o,t.create(o,h)),o++,s++,u=c.next()}}for(;!u.done;)mO(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const u=Qn(),d=0===c.length;if(lt(r,u,d)){const h=n+2,f=Hg(r,h);if(d){const g=Pw(i,h),_=null;Dc(f,Sc(r,g,void 0,{dehydratedView:_}),0,Ps(g,_))}else i.firstUpdatePass&&function hg(t){const e=t[6]??[],r=t[3][11],i=[];for(const o of e)void 0!==o.data.di?i.push(o):D1(o,r);t[6]=i}(f),RE(f,0)}}}finally{de(e)}}function Hg(t,e){return t[e]}function Pw(t,e){return rc(t,e)}function rt(t,e,n){const r=V();return lt(r,Qn(),e)&&(Ie(),bE(Gr(),r,t,e,r[11],n)),rt}function Nw(t,e,n,r,i){rg(e,t,n,i?"class":"style",r)}function J(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?HE(s,i,2,e,SE,function eI(){return he.bindingsEnabled}(),n,r):o.data[s];if(tg(a,i,t,e,kw),tc(a)){const c=i[1];Xp(c,i,a),QI(c,a,i)}return null!=r&&Cc(i,a),J}function X(){const t=Ie(),n=ng(fe());return t.firstCreatePass&&zE(t,n),E0(n)&&w0(),v0(),null!=n.classesWithoutHost&&function l9(t){return!!(8&t.flags)}(n)&&Nw(t,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function d9(t){return!!(16&t.flags)}(n)&&Nw(t,n,V(),n.stylesWithoutHost,!1),X}function Fe(t,e,n,r){return J(t,e,n,r),X(),Fe}function ge(t,e,n,r){const i=V(),o=i[1],s=t+27,a=o.firstCreatePass?function B1(t,e,n,r,i,o){const s=e.consts,c=Ns(e,t,n,r,mn(s,i));if(c.mergedAttrs=pc(c.mergedAttrs,c.attrs),null!=o){const u=mn(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return null!==c.attrs&&_g(c,c.attrs,!1),null!==c.mergedAttrs&&_g(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,2,e,n,r):o.data[s];return tg(a,i,t,e,kw),null!=r&&Cc(i,a),ge}function me(){return E0(ng(fe()))&&w0(),v0(),me}function xw(t,e,n,r){return ge(t,e,n,r),me(),xw}let kw=(t,e,n,r,i)=>(Rl(!0),Hp(e[11],r,function b5(){return he.lFrame.currentNamespace}()));function er(){return V()}function Bc(t,e,n){const r=V();return lt(r,Qn(),e)&&(Ie(),CE(Gr(),r,t,e,r[11],n)),Bc}const Gg="en-US";let CO=Gg;function Ve(t,e,n){const r=V(),i=Ie(),o=fe();return function jw(t,e,n,r,i,o,s){let a=!0,c=null;if((3&r.type||s)&&(c??=pd(r,e,o),H1(r,t,e,s,n,i,o,c)&&(a=!1)),a){const u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){const f=d[h],g=d[h+1];c??=pd(r,e,o),Ig(r,e,f,g,i,c)}if(u&&u.length)for(const h of u)c??=pd(r,e,o),Ig(r,e,h,i,i,c)}}(i,r,r[11],o,t,e,n),Ve}function To(t,e,n){const r=V(),i=Ie(),o=fe();return(3&o.type||n)&&H1(o,i,r,n,r[11],t,e,pd(o,r,e)),To}function ne(t=1){return function E5(t){return(he.lFrame.contextLView=function m0(t,e){for(;t>0;)e=e[14],t--;return e}(t,he.lFrame.contextLView))[8]}(t)}function Bw(t){return function vs(t,e){return t[e]}(function S0(){return he.lFrame.contextLView}(),27+t)}function Yg(t,e){return t<<17|e<<2}function qs(t){return t>>17&32767}function $w(t){return 2|t}function Hc(t){return(131068&t)>>2}function Hw(t,e){return-131069&t|e<<2}function zw(t){return 1|t}function WO(t,e,n,r){const i=t[n+1],o=null===e;let s=r?qs(i):Hc(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];CX(t[s],e)&&(a=!0,t[s+1]=r?zw(u):$w(u)),s=r?qs(u):Hc(u)}a&&(t[n+1]=r?$w(i):zw(i))}function CX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bl(t,e)>=0}function br(t,e){return function tV(t,e,n,r){const i=V(),o=Ie(),s=bi(2);o.firstUpdatePass&&function iV(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[on()],s=function rV(t,e){return e>=t.expandoStartIndex}(t,n);(function cV(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function VX(t,e,n,r){const i=function nI(t){const e=he.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ad(n=qw(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qw(i,t,e,n,r),null===o){let c=function LX(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Hc(r))return t[qs(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=qw(null,t,e,c[1],r),c=Ad(c,e.attrs,r),function FX(t,e,n,r){t[qs(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function UX(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ad(r,t[o].hostAttrs,n);return Ad(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function TX(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qs(s),c=Hc(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||bl(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const f=qs(t[a+1]);t[r+1]=Yg(f,a),0!==f&&(t[f+1]=Hw(t[f+1],r)),t[a+1]=function EX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Yg(a,0),0!==a&&(t[a+1]=Hw(t[a+1],r)),a=r;else t[r+1]=Yg(c,0),0===a?a=r:t[c+1]=Hw(t[c+1],r),c=r;u&&(t[r+1]=$w(t[r+1])),WO(t,d,r,!0),WO(t,d,r,!1),function bX(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&bl(o,e)>=0&&(n[r+1]=zw(n[r+1]))}(e,d,t,r,o),s=Yg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==We&&lt(i,s,e)&&function sV(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function wX(t){return!(1&~t)}(u)?aV(c,e,n,i,Hc(u),s):void 0;Jg(d)||(Jg(o)||function IX(t){return!(2&~t)}(u)&&(o=aV(c,null,n,i,a,s)),function _7(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ds.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ds.Important),t.setStyle(n,r,i,o))}}(r,s,nc(on(),n),i,o))}(o,o.data[on()],i,i[11],t,i[s+1]=function HX(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Wn(_o(t)))),t}(e,n),r,s)}(t,e,null,!0),br}function qw(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ad(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ad(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Jf(t,s,!!n||e[++o]))}return void 0===t?null:t}function aV(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let f=n[i+1];f===We&&(f=h?at:void 0);let g=h?xv(f,r):d===r?f:void 0;if(u&&!Jg(g)&&(g=xv(c,r)),Jg(g)&&(a=g,s))return a;const _=t[i+1];i=s?qs(_):Hc(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=xv(c,r))}return a}function Jg(t){return void 0!==t}function ae(t,e=""){const n=V(),r=Ie(),i=t+27,o=r.firstCreatePass?Ns(r,i,1,e,null):r.data[i],s=uV(r,n,o,e,t);n[i]=s,cp()&&wE(r,n,s,o),wi(o,!1)}let uV=(t,e,n,r,i)=>(Rl(!0),function rE(t,e){return t.createText(e)}(e[11],r));function hV(t,e,n,r,i,o=""){const a=function Vs(t,e,n,r){const i=lt(t,e,n);return lt(t,e+1,r)||i}(t,function Ti(){return he.lFrame.bindingIndex}(),n,i);return bi(2),a?e+pe(n)+r+pe(i)+o:We}function Un(t){return Mi("",t),Un}function Mi(t,e,n){const r=V(),i=function dV(t,e,n,r=""){return lt(t,Qn(),n)?e+pe(n)+r:We}(r,t,e,n);return i!==We&&Pi(r,on(),i),Mi}function qc(t,e,n,r,i){const o=V(),s=hV(o,t,e,n,r,i);return s!==We&&Pi(o,on(),s),qc}function Pi(t,e,n){const r=nc(e,t);!function sx(t,e,n){t.setValue(e,n)}(t[11],r,n)}function Gw(t,e,n,r,i){if(t=ve(t),Array.isArray(t))for(let o=0;o<t.length;o++)Gw(t[o],e,n,r,i);else{const o=Ie(),s=V(),a=fe();let c=mi(t)?t:ve(t.provide);const u=s0(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(mi(t)||!t.multi){const g=new Fl(u,i,te,null),_=Kw(c,e,i?d:d+f,h);-1===_?(TI(wp(a,s),o,c),Ww(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=Kw(c,e,d+f,h),_=Kw(c,e,d,d+f),w=_>=0&&n[_];if(i&&!w||!i&&!(g>=0&&n[g])){TI(wp(a,s),o,c);const A=function cee(t,e,n,r,i){const s=new Fl(t,n,te,null);return s.multi=[],s.index=e,s.componentProviders=0,MV(s,i,r&&!n),s}(i?aee:see,n.length,i,r,u);!i&&w&&(n[_].providerFactory=A),Ww(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else Ww(o,t,g>-1?g:_,MV(n[i?_:g],u,!i&&r));!i&&r&&w&&n[_].componentProviders++}}}function Ww(t,e,n,r){const i=mi(e),o=function i0(t){return!!t.useClass}(e);if(i||o){const c=(o?ve(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function MV(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function see(t,e,n,r,i){return Qw(this.multi,[])}function aee(t,e,n,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Bl(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),Qw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Qw(o,s);return s}function Qw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function gt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function oee(t,e,n){const r=Ie();if(r.firstCreatePass){const i=cr(t);Gw(n,r.data,r.blueprint,i,!0),Gw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}function Yw(t,e,n){const r=function On(){const t=he.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=V();return i[r]===We?function Zr(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function fd(t,e){return t[e]}(i,r)}class nte{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let rte=(()=>{class t{compileModuleSync(n){return new dk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Jr(qr(n).declarations).reduce((s,a)=>{const c=He(a);return c&&s.push(new GE(c)),s},[]);return new nte(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ote=(()=>{class t{zone=O($e);changeDetectionScheduler=O(ws);applicationRef=O(Ri);applicationErrorHandler=O(Kr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new $e({...nT(),scheduleInRootZone:n}),[{provide:$e,useFactory:t},{provide:io,multi:!0,useFactory:()=>{const r=O(ote,{optional:!0});return()=>r.initialize()}},{provide:io,multi:!0,useFactory:()=>{const r=O(ate);return()=>{r.initialize()}}},!0===e?{provide:z0,useValue:!0}:[],{provide:q0,useValue:n??Sx},{provide:Kr,useFactory:()=>{const r=O($e),i=O(Nn);let o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(sc),o.handleError(s))})}}}]}function nT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let ate=(()=>{class t{subscription=new Mn;initialized=!1;zone=O($e);pendingTasks=O(lo);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iT=(()=>{class t{applicationErrorHandler=O(Kr);appRef=O(Ri);taskService=O(lo);ngZone=O($e);zonelessEnabled=O(H0);tracing=O(Xl,{optional:!0});disableScheduling=O(z0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(q0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gE||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?Dx:Ax;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Dx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nL=new z("",{providedIn:"root",factory:()=>O(nL,{optional:!0,skipSelf:!0})||function cte(){return typeof $localize<"u"&&$localize.locale||Gg}()}),cm=Symbol("InputSignalNode#UNSET"),FL={...dv,transformFn:void 0,applyValueToInputSignal(t,e){Uf(t,e)}};function UL(t,e){const n=Object.create(FL);function r(){if(fl(n),n.value===cm)throw new U(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[Qt]=n,r}class Zne{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Cp(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function jL(t,e){return UL(t,e)}new z("").__NG_ELEMENT_ID__=t=>{const e=fe();if(null===e)throw new U(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new U(204,!1)};const um=(jL.required=function ere(t){return UL(cm,t)},jL),lm=new z(""),ore=new z("");function xd(t){return!t.moduleRef}let Yc=null;let hm=(()=>class t{static __NG_ELEMENT_ID__=dre})();function dre(t){return function hre(t,e,n){if(vi(t)&&!n){const r=kn(t.index,e);return new rd(r,r)}return 175&t.type?new rd(e[15],e):null}(fe(),V(),!(16&~t))}function Ere(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;qe(8);try{const o=i?.injector??function lre(t=[]){if(Yc)return Yc;const e=function QL(t=[],e){return ur.create({name:e,providers:[{provide:jv,useValue:"platform"},{provide:lm,useValue:new Set([()=>Yc=null])},...t]})}(t);return Yc=e,function fJ(){!function c6(t){NM=t}(()=>{throw new U(600,"")})}(),function YL(t){const e=t.get(gN,null);Ir(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[tT({}),{provide:ws,useExisting:iT},j0,...n||[]];return function qL(t){const e=xd(t)?t.r3Injector:t.moduleRef.injector,n=e.get($e);return n.run(()=>{xd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Kr);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),xd(t)){const o=()=>e.destroy(),s=t.platformInjector.get(lm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(lm);s.add(o),t.moduleRef.onDestroy(()=>{xg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function are(t,e,n){try{const r=n();return Ng(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const o=e.get(lo),s=o.add(),a=e.get(tO);return a.runInitializers(),a.donePromise.then(()=>{if(function RZ(t){"string"==typeof t&&(CO=t.toLowerCase().replace(/_/g,"-"))}(e.get(nL,Gg)||Gg),!e.get(ore,!0))return xd(t)?e.get(Ri):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(xd(t)){const d=e.get(Ri);return void 0!==t.rootComponent&&d.bootstrap(t.rootComponent),d}return t.moduleRef}).finally(()=>{o.remove(s)})})})}({r3Injector:new hk({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{qe(9)}}function Jc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}class IF{_doc;constructor(e){this._doc=e}manager}let IT=(()=>{class t extends IF{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(be(Pr))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();const ET=new z("");let EF=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const i=n.filter(s=>!(s instanceof IT));this._plugins=i.slice().reverse();const o=n.find(s=>s instanceof IT);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(be(ET),be($e))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();const wT="ng-app-id";function wF(t){for(const e of t)e.remove()}function TF(t,e){const n=e.createElement("style");return n.textContent=t,n}function TT(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let bF=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,function Kre(t,e,n,r){const i=t.head?.querySelectorAll(`style[${wT}="${e}"],link[${wT}="${e}"]`);if(i)for(const o of i)o.removeAttribute(wT),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const i of n)this.addUsage(i,this.inline,TF);r?.forEach(i=>this.addUsage(i,this.external,TT))}removeStyles(n,r){for(const i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){const o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){const i=r.get(n);i&&(i.usage--,i.usage<=0&&(wF(i.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])wF(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(n,TF(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(n,TT(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(be(Pr),be(zl),be(_N,8),be(mN))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();const bT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CT=/%COMP%/g,eie=new z("",{providedIn:"root",factory:()=>!0});function SF(t,e){return e.map(n=>n.replace(CT,t))}let AF=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ST(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof RF?i.applyToHost(n):i instanceof AT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Ai.Emulated:o=new RF(c,u,r,this.appId,d,s,a,h,f);break;case Ai.ShadowDom:return new iie(c,u,n,r,s,a,this.nonce,h,f);default:o=new AT(c,u,r,d,s,a,h,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(be(EF),be(bF),be(zl),be(eie),be(Pr),be($e),be(_N),be(Xl,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();class ST{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(bT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(DF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(DF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=bT[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=bT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ds.DashCase|Ds.Important)?e.style.setProperty(n,r,i&Ds.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ds.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if("string"==typeof e&&!(e=ho().getGlobalEventTarget(this.doc,e)))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function DF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class iie extends ST{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=SF(i.id,d);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}const h=i.getExternalStyles?.();if(h)for(const f of h){const g=TT(f,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class AT extends ST{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?SF(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Rs.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class RF extends AT{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,c,u,d),this.contentAttr=function tie(t){return"_ngcontent-%COMP%".replace(CT,t)}(d),this.hostAttr=function nie(t){return"_nghost-%COMP%".replace(CT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class DT extends M5{supportsDOMEvents=!0;static makeCurrent(){!function R5(t){K0??=t}(new DT)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function sie(){return Od=Od||document.head.querySelector("base"),Od?Od.getAttribute("href"):null}();return null==n?null:function aie(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Od=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function L5(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Od=null,uie=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();const MF=["alt","control","meta","shift"],lie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},die={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function PF(t){return{appProviders:[...vie,...t?.providers??[]],platformProviders:_ie}}const _ie=[{provide:mN,useValue:"browser"},{provide:gN,useValue:function pie(){DT.makeCurrent()},multi:!0},{provide:Pr,useFactory:function mie(){return function nW(t){MI=t}(document),document}}],vie=[{provide:jv,useValue:"root"},{provide:sc,useFactory:function gie(){return new sc}},{provide:ET,useClass:IT,multi:!0,deps:[Pr]},{provide:ET,useClass:(()=>{class t extends IF{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i,o){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ho().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),MF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=lie[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MF.forEach(s=>{s!==i&&(0,die[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(be(Pr))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),multi:!0,deps:[Pr]},AF,bF,EF,{provide:jE,useExisting:AF},{provide:class F5{},useClass:uie},[]],bie={...za,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function mt(t){return function Tie(t){const e=de(null);try{return t()}finally{de(e)}}(t)}function Tt(t,e){return function o6(t,e){const n=Object.create(s6);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(pl(n),fl(n),n.value===no)throw n.error;return n.value};return r[Qt]=n,r}(t,e?.equal)}class Nie{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}}const VF={...bie,cleanupFns:void 0,zone:null,onDestroyFn:Ml,run(){const t=sp(!1);try{!function Cie(t){if(t.dirty=!1,t.version>0&&!Lf(t))return;t.version++;const e=qa(t);try{t.cleanup(),t.fn()}finally{gl(t,e)}}(this)}finally{sp(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=de(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],de(t)}}},xie={...VF,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ml(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},kie={...VF,consumerMarkedDirty(){this.view[2]|=8192,ic(this.view),this.notifier.notify(13)},destroy(){ml(this),this.onDestroyFn(),this.cleanup(),this.view[23]?.delete(this)}};function LF(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function _m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function So(t){return this instanceof So?(this.v=t,this):new So(t)}function qF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function kT(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const GF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function WF(t){return ut(t?.then)}function KF(t){return ut(t[Ev])}function QF(t){return Symbol.asyncIterator&&ut(t?.[Symbol.asyncIterator])}function YF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const JF=function _oe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ZF(t){return ut(t?.[JF])}function XF(t){return function zF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(I){return new Promise(function(w,A){o.push([g,I,w,A])>1||c(g,I)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof So?Promise.resolve(g.value.v).then(d,h):f(o[0][2],g)}(r[g](_))}catch(I){f(o[0][3],I)}}function d(g){c("next",g)}function h(g){c("throw",g)}function f(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield So(n.read());if(i)return yield So(void 0);yield yield So(r)}}finally{n.releaseLock()}})}function e2(t){return ut(t?.getReader)}function ei(t){if(t instanceof Ft)return t;if(null!=t){if(KF(t))return function yoe(t){return new Ft(e=>{const n=t[Ev]();if(ut(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(GF(t))return function voe(t){return new Ft(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(WF(t))return function Ioe(t){return new Ft(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,FM)})}(t);if(QF(t))return t2(t);if(ZF(t))return function Eoe(t){return new Ft(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(e2(t))return function woe(t){return t2(XF(t))}(t)}throw YF(t)}function t2(t){return new Ft(e=>{(function Toe(t,e){var n,r,i,o;return function $F(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=qF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ni(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function n2(t,e=0){return sn((n,r)=>{n.subscribe(Gt(r,i=>Ni(r,t,()=>r.next(i),e),()=>Ni(r,t,()=>r.complete(),e),i=>Ni(r,t,()=>r.error(i),e)))})}function r2(t,e=0){return sn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function i2(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ft(n=>{Ni(n,e,()=>{const r=t[Symbol.asyncIterator]();Ni(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function vn(t,e){return e?function Roe(t,e){if(null!=t){if(KF(t))return function boe(t,e){return ei(t).pipe(r2(e),n2(e))}(t,e);if(GF(t))return function Soe(t,e){return new Ft(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(WF(t))return function Coe(t,e){return ei(t).pipe(r2(e),n2(e))}(t,e);if(QF(t))return i2(t,e);if(ZF(t))return function Aoe(t,e){return new Ft(n=>{let r;return Ni(n,e,()=>{r=t[JF](),Ni(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>ut(r?.return)&&r.return()})}(t,e);if(e2(t))return function Doe(t,e){return i2(XF(t),e)}(t,e)}throw YF(t)}(t,e):ei(t)}function VT(t){return t[t.length-1]}function o2(t){return ut(VT(t))?t.pop():void 0}function ym(t){return function Moe(t){return t&&ut(t.schedule)}(VT(t))?t.pop():void 0}function ye(...t){return vn(t,ym(t))}const vm=hv(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Poe}=Array,{getPrototypeOf:Noe,prototype:xoe,keys:koe}=Object;function s2(t){if(1===t.length){const e=t[0];if(Poe(e))return{args:e,keys:null};if(function Ooe(t){return t&&"object"==typeof t&&Noe(t)===xoe}(e)){const n=koe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Voe}=Array;function a2(t){return ze(e=>function Loe(t,e){return Voe(e)?t(...e):t(e)}(t,e))}function c2(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function u2(...t){const e=ym(t),n=o2(t),{args:r,keys:i}=s2(t);if(0===r.length)return vn([],e);const o=new Ft(function Foe(t,e,n=ls){return r=>{l2(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)l2(e,()=>{const u=vn(t[c],e);let d=!1;u.subscribe(Gt(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>c2(i,s):ls));return n?o.pipe(a2(n)):o}function l2(t,e,n){t?Ni(n,t,e):e()}function jn(t,e,n=1/0){return ut(e)?jn((r,i)=>ze((o,s)=>e(r,o,i,s))(ei(t(r,i))),n):("number"==typeof e&&(n=e),sn((r,i)=>function Uoe(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=I=>u<r?_(I):c.push(I),_=I=>{o&&e.next(I),u++;let w=!1;ei(n(I,d++)).subscribe(Gt(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){const A=c.shift();s?Ni(e,s,()=>_(A)):_(A)}f()}catch(A){e.error(A)}}))};return t.subscribe(Gt(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,t,n)))}function LT(t=1/0){return jn(ls,t)}function FT(...t){return function joe(){return LT(1)}()(vn(t,ym(t)))}function UT(t){return new Ft(e=>{ei(t()).subscribe(e)})}function Im(t,e){const n=ut(t)?t:()=>t,r=i=>i.error(n());return new Ft(e?i=>e.schedule(r,0,i):r)}const kr=new Ft(t=>t.complete());function jT(){return sn((t,e)=>{let n=null;t._refCount++;const r=Gt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class d2 extends Ft{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,dP(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mn;const n=this.getSubject();e.add(this.source.subscribe(Gt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mn.EMPTY)}return e}refCount(){return jT()(this)}}function Cr(t,e){return sn((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Gt(r,c=>{i?.unsubscribe();let u=0;const d=o++;ei(t(c,d)).subscribe(i=Gt(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zc(t){return t<=0?()=>kr:sn((e,n)=>{let r=0;e.subscribe(Gt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ao(t,e){return sn((n,r)=>{let i=0;n.subscribe(Gt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Em(t){return sn((e,n)=>{let r=!1;e.subscribe(Gt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function h2(t=zoe){return sn((e,n)=>{let r=!1;e.subscribe(Gt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function zoe(){return new vm}function Js(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ao((i,o)=>t(i,o,r)):ls,Zc(1),n?Em(e):h2(()=>new vm))}function wm(t,e){return ut(e)?jn(t,e,1):jn(t,1)}function In(t,e,n){const r=ut(t)||e||n?{next:t,error:e,complete:n}:t;return r?sn((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Gt(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):ls}function Xc(t){return sn((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Gt(n,void 0,void 0,s=>{o=ei(t(s,Xc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function BT(t){return t<=0?()=>kr:sn((e,n)=>{let r=[];e.subscribe(Gt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $T(t){return sn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function f2(t){return sn((e,n)=>{ei(t).subscribe(Gt(n,()=>n.complete(),gv)),!n.closed&&e.subscribe(n)})}let rse=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(be(Pr))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Ee="primary",Fd=Symbol("RouteTitle");class lse{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function eu(t){return new lse(t)}function dse(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ti(t,e){const n=t?HT(t):void 0,r=e?HT(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!w2(t[i],e[i]))return!1;return!0}function HT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function w2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function T2(t){return t.length>0?t[t.length-1]:null}function xi(t){return function qie(t){return!!t&&(t instanceof Ft||ut(t.lift)&&ut(t.subscribe))}(t)?t:Ng(t)?vn(Promise.resolve(t)):ye(t)}const fse={exact:function S2(t,e,n){if(!Xs(t.segments,e.segments)||!Tm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!S2(t.children[r],e.children[r],n))return!1;return!0},subset:A2},b2={exact:function pse(t,e){return ti(t,e)},subset:function gse(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>w2(t[n],e[n]))},ignored:()=>!0};function C2(t,e,n){return fse[n.paths](t.root,e.root,n.matrixParams)&&b2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function A2(t,e,n){return D2(t,e,e.segments,n)}function D2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Xs(i,n)||e.hasChildren()||!Tm(i,n,r))}if(t.segments.length===n.length){if(!Xs(t.segments,n)||!Tm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!A2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Xs(t.segments,i)&&Tm(t.segments,i,r)&&t.children[Ee])&&D2(t.children[Ee],e,o,r)}}function Tm(t,e,n){return e.every((r,i)=>b2[n](t[i].parameters,r.parameters))}class Zs{root;queryParams;fragment;_queryParamMap;constructor(e=new et([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=eu(this.queryParams),this._queryParamMap}toString(){return yse.serialize(this)}}class et{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sm(this)}}class Ud{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=eu(this.parameters),this._parameterMap}toString(){return P2(this)}}function Xs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let bm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>new Cm,providedIn:"root"})}return t})();class Cm{parse(e){const n=new Rse(e);return new Zs(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${jd(e.root,!0)}`,r=function Ese(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Am(n)}=${Am(i)}`).join("&"):`${Am(n)}=${Am(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function vse(t){return encodeURI(t)}(e.fragment)}`:""}`}}const yse=new Cm;function Sm(t){return t.segments.map(e=>P2(e)).join("/")}function jd(t,e){if(!t.hasChildren())return Sm(t);if(e){const n=t.children[Ee]?jd(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${jd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function _se(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ee?[jd(t.children[Ee],!1)]:[`${i}:${jd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ee]?`${Sm(t)}/${n[0]}`:`${Sm(t)}/(${n.join("//")})`}}function R2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Am(t){return R2(t).replace(/%3B/gi,";")}function zT(t){return R2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dm(t){return decodeURIComponent(t)}function M2(t){return Dm(t.replace(/\+/g,"%20"))}function P2(t){return`${zT(t.path)}${function Ise(t){return Object.entries(t).map(([e,n])=>`;${zT(e)}=${zT(n)}`).join("")}(t.parameters)}`}const wse=/^[^\/()?;#]+/;function qT(t){const e=t.match(wse);return e?e[0]:""}const Tse=/^[^\/()?;=#]+/,Cse=/^[^=?&#]+/,Ase=/^[^&#]+/;class Rse{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new et(e,n)),r}parseSegment(){const e=qT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Ud(Dm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function bse(t){const e=t.match(Tse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=qT(this.remaining);i&&(r=i,this.capture(r))}e[Dm(n)]=Dm(r)}parseQueryParam(e){const n=function Sse(t){const e=t.match(Cse);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Dse(t){const e=t.match(Ase);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=M2(n),o=M2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=qT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);const s=this.parseChildren();n[o??Ee]=1===Object.keys(s).length&&s[Ee]?s[Ee]:new et([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}}function N2(t){return t.segments.length>0?new et([],{[Ee]:t}):t}function x2(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=x2(i);if(r===Ee&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Mse(t){if(1===t.numberOfChildren&&t.children[Ee]){const e=t.children[Ee];return new et(t.segments.concat(e.segments),e.children)}return t}(new et(t.segments,e))}function ea(t){return t instanceof Zs}function k2(t){let e;const i=N2(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new et(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function O2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return GT(i,i,i,n,r);const o=function Nse(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new L2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new L2(n,e,r)}(e);if(o.toRoot())return GT(i,i,new et([],{}),n,r);const s=function xse(t,e,n){if(t.isAbsolute)return new Mm(e,!0,0);if(!n)return new Mm(e,!1,NaN);if(null===n.parent)return new Mm(n,!0,0);const r=Rm(t.commands[0])?0:1;return function kse(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Mm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?$d(s.segmentGroup,s.index,o.commands):F2(s.segmentGroup,s.index,o.commands);return GT(i,s.segmentGroup,a,n,r)}function Rm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Bd(t){return"object"==typeof t&&null!=t&&t.outlets}function GT(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:V2(t,e,n);const a=N2(x2(s));return new Zs(a,o,i)}function V2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:V2(o,e,n)}),new et(t.segments,r)}class L2{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Rm(r[0]))throw new U(4003,!1);const i=r.find(Bd);if(i&&i!==T2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mm{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function F2(t,e,n){if(t??=new et([],{}),0===t.segments.length&&t.hasChildren())return $d(t,e,n);const r=function Vse(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Bd(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!j2(c,u,s))return o;r+=2}else{if(!j2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new et(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new et(t.segments.slice(r.pathIndex),t.children),$d(o,0,i)}return r.match&&0===i.length?new et(t.segments,{}):r.match&&!t.hasChildren()?WT(t,e,n):r.match?$d(t,0,i):WT(t,e,n)}function $d(t,e,n){if(0===n.length)return new et(t.segments,{});{const r=function Ose(t){return Bd(t[0])?t[0].outlets:{[Ee]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&1===t.numberOfChildren&&0===t.children[Ee].segments.length){const o=$d(t.children[Ee],e,n);return new et(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=F2(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new et(t.segments,i)}}function WT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Bd(o)){const c=Lse(o.outlets);return new et(r,c)}if(0===i&&Rm(n[0])){r.push(new Ud(t.segments[e].path,U2(n[0]))),i++;continue}const s=Bd(o)?o.outlets[Ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Rm(a)?(r.push(new Ud(s,U2(a))),i+=2):(r.push(new Ud(s,{})),i++)}return new et(r,{})}function Lse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=WT(new et([],{}),0,r))}),e}function U2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function j2(t,e,n){return t==n.path&&ti(e,n.parameters)}const Pm="imperative";var Ne=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ne||{});class ni{id;url;constructor(e,n){this.id=e,this.url=n}}class KT extends ni{type=Ne.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ro extends ni{urlAfterRedirects;type=Ne.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var nr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(nr||{}),QT=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(QT||{});class ta extends ni{reason;code;type=Ne.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hd extends ni{reason;code;type=Ne.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}}class YT extends ni{error;target;type=Ne.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class B2 extends ni{urlAfterRedirects;state;type=Ne.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fse extends ni{urlAfterRedirects;state;type=Ne.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Use extends ni{urlAfterRedirects;state;shouldActivate;type=Ne.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jse extends ni{urlAfterRedirects;state;type=Ne.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bse extends ni{urlAfterRedirects;state;type=Ne.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $se{route;type=Ne.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hse{route;type=Ne.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zse{snapshot;type=Ne.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qse{snapshot;type=Ne.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gse{snapshot;type=Ne.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wse{snapshot;type=Ne.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JT{}class Nm{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Or(t){return t.outlet||Ee}function tu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class eae{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zd(this.rootInjector)}}let zd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new eae(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(be(Nn))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class $2{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=ZT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=ZT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=XT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return XT(e,this._root).map(n=>n.value)}}function ZT(t,e){if(t===e.value)return e;for(const n of e.children){const r=ZT(t,n);if(r)return r}return null}function XT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=XT(t,n);if(r.length)return r.unshift(e),r}return[]}class Vr{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function nu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class H2 extends $2{snapshot;constructor(e,n){super(e),this.snapshot=n,eb(this,e)}toString(){return this.snapshot.toString()}}function z2(t){const e=function tae(t){const o=new km([],{},{},"",{},Ee,t,null,{});return new q2("",new Vr(o,[]))}(t),n=new yr([new Ud("",{})]),r=new yr({}),i=new yr({}),o=new yr({}),s=new yr(""),a=new ki(n,r,o,s,i,Ee,t,e.root);return a.snapshot=e.root,new H2(new Vr(a,[]),e)}class ki{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ze(u=>u[Fd]))??ye(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ze(e=>eu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ze(e=>eu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xm(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&W2(i)&&(r.resolve[Fd]=i.title),r}class km{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Fd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=eu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=eu(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class q2 extends $2{url;constructor(e,n){super(n),this.url=e,eb(this,n)}toString(){return G2(this._root)}}function eb(t,e){e.value._routerState=t,e.children.forEach(n=>eb(t,n))}function G2(t){const e=t.children.length>0?` { ${t.children.map(G2).join(", ")} } `:"";return`${t.value}${e}`}function tb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ti(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ti(e.params,n.params)||t.paramsSubject.next(n.params),function hse(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ti(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),ti(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nb(t,e){const n=ti(t.params,e.params)&&function mse(t,e){return Xs(t,e)&&t.every((n,r)=>ti(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||nb(t.parent,e.parent))}function W2(t){return"string"==typeof t.title||null===t.title}const nae=new z("");let rb=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new Bt;deactivateEvents=new Bt;attachEvents=new Bt;detachEvents=new Bt;routerOutletData=um();parentContexts=O(zd);location=O(Eg);changeDetector=O(hm);inputBinder=O(ib,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rae(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ae({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Si]})}return t})();class rae{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===ki?this.route:e===zd?this.childContexts:e===nae?this.outletData:this.parent.get(e,n)}}const ib=new z("");let K2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xr({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&Fe(0,"router-outlet")},dependencies:[rb],encapsulation:2})}return t})();function ob(t){const e=t.children&&t.children.map(ob),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=K2),n}function qd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function oae(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qd(t,r,i);return qd(t,r)})}(t,e,n);return new Vr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qd(t,a)),s}}const r=function sae(t){return new ki(new yr(t.url),new yr(t.params),new yr(t.queryParams),new yr(t.fragment),new yr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>qd(t,o));return new Vr(r,i)}}class sb{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const Q2="ngNavigationCancelingError";function Om(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ea(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Y2(!1,nr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Y2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[Q2]=!0,n.cancellationCode=e,n}function J2(t){return!!t&&t[Q2]}class uae{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tb(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=nu(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=nu(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=nu(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=nu(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wse(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(tb(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class Z2{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Vm{component;route;constructor(e,n){this.component=e,this.route=n}}function lae(t,e,n){const r=t._root;return Gd(r,e?e._root:null,n,[r.value])}function ru(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function N6(t){return null!==qf(t)}(t)?e.get(t):t:r}function Gd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=nu(e);return t.children.forEach(s=>{(function hae(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function fae(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Xs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xs(t.url,e.url)||!ti(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nb(t,e)||!ti(t.queryParams,e.queryParams);default:return!nb(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Z2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Gd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Vm(a.outlet.component,s))}else s&&Wd(e,a,i),i.canActivateChecks.push(new Z2(r)),Gd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Wd(a,n.getContext(s),i)),i}function Wd(t,e,n){const r=nu(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Wd(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Vm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Kd(t){return"function"==typeof t}function X2(t){return t instanceof vm||"EmptyError"===t?.name}const Lm=Symbol("INITIAL_VALUE");function iu(){return Cr(t=>u2(t.map(e=>e.pipe(Zc(1),function Hoe(...t){const e=ym(t);return sn((n,r)=>{(e?FT(t,n,e):FT(t,n)).subscribe(r)})}(Lm)))).pipe(ze(e=>{for(const n of e)if(!0!==n){if(n===Lm)return Lm;if(!1===n||Iae(n))return n}return!0}),Ao(e=>e!==Lm),Zc(1)))}function Iae(t){return ea(t)||t instanceof sb}function eU(t){return function I6(...t){return UM(t)}(In(e=>{if("boolean"!=typeof e)throw Om(0,e)}),ze(e=>!0===e))}class ab{segmentGroup;constructor(e){this.segmentGroup=e||null}}class cb extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function ou(t){return Im(new ab(t))}function Pae(t){return Im(new U(4e3,!1))}class xae{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ye(r);if(i.numberOfChildren>1||!i.children[Ee])return Pae();i=i.children[Ee]}}applyRedirectCommands(e,n,r,i,o){return function kae(t,e,n){if("string"==typeof t)return ye(t);const r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:h}=e;return xi(Ir(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}(n,i,o).pipe(ze(s=>{if(s instanceof Zs)throw new cb(s);const a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if("/"===s[0])throw new cb(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Zs(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new et(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const ub={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oae(t,e,n,r,i){const o=tU(t,e,n);return o.matched?(r=function Qse(t,e){return t.providers&&!t._injector&&(t._injector=ow(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Mae(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ye(i.map(s=>{const a=ru(s,t);return xi(function vae(t){return t&&Kd(t.canMatch)}(a)?a.canMatch(e,n):Ir(t,()=>a(e,n)))})).pipe(iu(),eU()):ye(!0)}(r,e,n).pipe(ze(s=>!0===s?o:{...ub}))):ye(o)}function tU(t,e,n){if("**"===e.path)return function Vae(t){return{matched:!0,parameters:t.length>0?T2(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...ub}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dse)(n,t,e);if(!i)return{...ub};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nU(t,e,n,r){return n.length>0&&function Uae(t,e,n){return n.some(r=>Fm(t,e,r)&&Or(r)!==Ee)}(t,n,r)?{segmentGroup:new et(e,Fae(r,new et(n,t.children))),slicedSegments:[]}:0===n.length&&function jae(t,e,n){return n.some(r=>Fm(t,e,r))}(t,n,r)?{segmentGroup:new et(t.segments,Lae(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new et(t.segments,t.children),slicedSegments:n}}function Lae(t,e,n,r){const i={};for(const o of n)if(Fm(t,e,o)&&!r[Or(o)]){const s=new et([],{});i[Or(o)]=s}return{...r,...i}}function Fae(t,e){const n={};n[Ee]=e;for(const r of t)if(""===r.path&&Or(r)!==Ee){const i=new et([],{});n[Or(r)]=i}return n}function Fm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class $ae{}class qae{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new xae(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){const e=nU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ze(({children:n,rootSnapshot:r})=>{const i=new Vr(r,n),o=new q2("",i),s=function Pse(t,e,n=null,r=null){return O2(k2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new km([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,n).pipe(ze(r=>({children:r,rootSnapshot:n})),Xc(r=>{if(r instanceof cb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ab?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ze(s=>s instanceof Vr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return vn(o).pipe(wm(s=>{const a=r.children[s],c=function Xse(t,e){const n=t.filter(r=>Or(r)===e);return n.push(...t.filter(r=>Or(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function Goe(t,e){return sn(function qoe(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Gt(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),Em(null),function Woe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ao((i,o)=>t(i,o,r)):ls,BT(1),n?Em(e):h2(()=>new vm))}(),jn(s=>{if(null===s)return ou(r);const a=rU(s);return function Gae(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}(a),ye(a)}))}processSegment(e,n,r,i,o,s,a){return vn(n).pipe(wm(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Xc(u=>{if(u instanceof ab)return ye(null);throw u}))),Js(c=>!!c),Xc(c=>{if(X2(c))return function Bae(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?ye(new $ae):ou(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Or(r)===s||s!==Ee&&Fm(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):ou(i):ou(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=tU(n,i,o);if(!c)return ou(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new km(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iU(i),Or(i),i.component??i._loadedComponent??null,i,oU(i)),_=xm(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e).pipe(Cr(w=>this.applyRedirects.lineralizeSegments(i,w)),jn(w=>this.processSegment(e,r,n,w.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=Oae(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(Cr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Cr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:g}=c,_=new km(f,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iU(r),Or(r),r.component??r._loadedComponent??null,r,oU(r)),I=xm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);const{segmentGroup:w,slicedSegments:A}=nU(n,f,g,u);if(0===A.length&&w.hasChildren())return this.processChildren(d,u,w,_).pipe(ze(F=>new Vr(_,F)));if(0===u.length&&0===A.length)return ye(new Vr(_,[]));const D=Or(r)===o;return this.processSegment(d,u,w,A,D?Ee:o,!0,_).pipe(ze(F=>new Vr(_,F instanceof Vr?[F]:[])))})):ou(n)))}getChildConfig(e,n,r){return n.children?ye({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ye({routes:n._loadedRoutes,injector:n._loadedInjector}):function Rae(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ye(!0):ye(i.map(s=>{const a=ru(s,t);return xi(function gae(t){return t&&Kd(t.canLoad)}(a)?a.canLoad(e,n):Ir(t,()=>a(e,n)))})).pipe(iu(),eU())}(e,n,r).pipe(jn(i=>i?this.configLoader.loadChildren(e,n).pipe(In(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Nae(){return Im(Y2(!1,nr.GuardRejected))}())):ye({routes:[],injector:e})}}function Wae(t){const e=t.value.routeConfig;return e&&""===e.path}function rU(t){const e=[],n=new Set;for(const r of t){if(!Wae(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=rU(r.children);e.push(new Vr(r.value,i))}return e.filter(r=>!n.has(r))}function iU(t){return t.data||{}}function oU(t){return t.resolve||{}}function sU(t){const e=t.children.map(n=>sU(n)).flat();return[t,...e]}function lb(t){return Cr(e=>{const n=t(e);return n?vn(n).pipe(ze(()=>e)):ye(e)})}let aU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(n){return n.data[Fd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(Xae),providedIn:"root"})}return t})(),Xae=(()=>{class t extends aU{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(be(rse))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Um=new z("",{providedIn:"root",factory:()=>({})}),db=new z("");let cU=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(rte);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ye(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=xi(Ir(n,()=>r.loadComponent())).pipe(ze(uU),Cr(lU),In(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),$T(()=>{this.componentLoaders.delete(r)})),o=new d2(i,()=>new Gn).pipe(jT());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function ece(t,e,n,r){return xi(Ir(n,()=>t.loadChildren())).pipe(ze(uU),Cr(lU),jn(i=>i instanceof lk||Array.isArray(i)?ye(i):vn(e.compileModuleAsync(i))),ze(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(db,[],{optional:!0,self:!0}).flat()),{routes:s.map(ob),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe($T(()=>{this.childrenLoaders.delete(r)})),s=new d2(o,()=>new Gn).pipe(jT());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uU(t){return function tce(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function lU(t){return ye(t)}let hb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(nce),providedIn:"root"})}return t})(),nce=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const rce=new z(""),sce=new z("");let ace=(()=>{class t{currentNavigation=Ge(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Gn;transitionAbortWithErrorSubject=new Gn;configLoader=O(cU);environmentInjector=O(Nn);destroyRef=O(Wr);urlSerializer=O(bm);rootContexts=O(zd);location=O(Pl);inputBindingEnabled=null!==O(ib,{optional:!0});titleStrategy=O(aU);options=O(Um,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(hb);createViewTransition=O(rce,{optional:!0});navigationErrorHandler=O(sce,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>ye(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new Hse(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new $se(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;mt(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(n){return this.transitions=new yr(null),this.transitions.pipe(Ao(r=>null!==r),Cr(r=>{let i=!1;return ye(r).pipe(Cr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),kr;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>o.abortController.abort()});const s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!s&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new Hd(o.id,this.urlSerializer.serialize(o.rawUrl),"",QT.IgnoredSameUrlNavigation)),o.resolve(!1),kr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ye(o).pipe(Cr(c=>(this.events.next(new KT(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?kr:Promise.resolve(c))),function Kae(t,e,n,r,i,o){return jn(s=>function Hae(t,e,n,r,i,o,s="emptyOnly"){return new qae(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(ze(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),In(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));const u=new B2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,g=new KT(c,this.urlSerializer.serialize(u),d,h);this.events.next(g);const _=z2(this.rootComponentType).snapshot;return this.currentTransition=r={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(I=>(I.finalUrl=u,I)),ye(r)}return this.events.next(new Hd(o.id,this.urlSerializer.serialize(o.extractedUrl),"",QT.IgnoredByUrlHandlingStrategy)),o.resolve(!1),kr}),In(o=>{const s=new Fse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ze(o=>(this.currentTransition=r={...o,guards:lae(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},r)),function Eae(t,e){return jn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ye({...n,guardsResult:!0}):function wae(t,e,n,r){return vn(t).pipe(jn(i=>function Dae(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ye(o.map(a=>{const c=tu(e)??i,u=ru(a,c);return xi(function yae(t){return t&&Kd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):Ir(c,()=>u(t,e,n,r))).pipe(Js())})).pipe(iu()):ye(!0)}(i.component,i.route,n,e,r)),Js(i=>!0!==i,!0))}(s,r,i,t).pipe(jn(a=>a&&function pae(t){return"boolean"==typeof t}(a)?function Tae(t,e,n,r){return vn(e).pipe(wm(i=>FT(function Cae(t,e){return null!==t&&e&&e(new zse(t)),ye(!0)}(i.route.parent,r),function bae(t,e){return null!==t&&e&&e(new Gse(t)),ye(!0)}(i.route,r),function Aae(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function dae(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>UT(()=>ye(s.guards.map(c=>{const u=tu(s.node)??n,d=ru(c,u);return xi(function _ae(t){return t&&Kd(t.canActivateChild)}(d)?d.canActivateChild(r,t):Ir(u,()=>d(r,t))).pipe(Js())})).pipe(iu())));return ye(o).pipe(iu())}(t,i.path,n),function Sae(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ye(!0);const i=r.map(o=>UT(()=>{const s=tu(e)??n,a=ru(o,s);return xi(function mae(t){return t&&Kd(t.canActivate)}(a)?a.canActivate(e,t):Ir(s,()=>a(e,t))).pipe(Js())}));return ye(i).pipe(iu())}(t,i.route,n))),Js(i=>!0!==i,!0))}(r,o,t,e):ye(a)),ze(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),In(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Om(0,o.guardsResult);const s=new Use(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ao(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",nr.GuardRejected),!1)),lb(o=>{if(0!==o.guards.canActivateChecks.length)return ye(o).pipe(In(s=>{const a=new jse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Cr(s=>{let a=!1;return ye(s).pipe(function Qae(t,e){return jn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ye(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of sU(c))s.add(u);let a=0;return vn(s).pipe(wm(c=>o.has(c)?function Yae(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!W2(i)&&(o[Fd]=i.title),UT(()=>(t.data=xm(t,t.parent,n).resolve,function Jae(t,e,n,r){const i=HT(t);if(0===i.length)return ye({});const o={};return vn(i).pipe(jn(s=>function Zae(t,e,n,r){const i=tu(e)??r,o=ru(t,i);return xi(o.resolve?o.resolve(e,n):Ir(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Js(),In(a=>{if(a instanceof sb)throw Om(new Cm,a);o[s]=a}))),BT(1),ze(()=>o),Xc(s=>X2(s)?kr:Im(s)))}(o,t,e,r).pipe(ze(s=>(t._resolvedData=s,t.data={...t.data,...s},null)))))}(c,r,t,e):(c.data=xm(c,c.parent,t).resolve,ye(void 0))),In(()=>a++),BT(1),jn(c=>a===s.size?ye(n):kr))})}(this.paramsInheritanceStrategy,this.environmentInjector),In({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",nr.NoDataFromResolver)}}))}),In(s=>{const a=new Bse(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lb(o=>{const s=a=>{const c=[];if(a.routeConfig?.loadComponent){const u=tu(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(In(d=>{a.component=d}),ze(()=>{})))}for(const u of a.children)c.push(...s(u));return c};return u2(s(o.targetSnapshot.root)).pipe(Em(null),Zc(1))}),lb(()=>this.afterPreactivation()),Cr(()=>{const{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?vn(a).pipe(ze(()=>r)):ye(r)}),ze(o=>{const s=function iae(t,e,n){const r=qd(t,e._root,n?n._root:void 0);return new H2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r={...o,targetRouterState:s},this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),In(()=>{this.events.next(new JT)}),((t,e,n,r)=>ze(i=>(new uae(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Zc(1),f2(new Ft(o=>{const s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ao(()=>!i&&!r.targetRouterState),In(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",nr.Aborted)}))),In({next:o=>{i=!0,this.lastSuccessfulNavigation=mt(this.currentNavigation),this.events.next(new Ro(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),f2(this.transitionAbortWithErrorSubject.pipe(In(o=>{throw o}))),$T(()=>{i||this.cancelNavigationTransition(r,"",nr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Xc(o=>{if(this.destroyed)return r.resolve(!1),kr;if(i=!0,J2(o))this.events.next(new ta(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),function aae(t){return J2(t)&&ea(t.url)}(o)?this.events.next(new Nm(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{const s=new YT(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{const a=Ir(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(!(a instanceof sb))throw this.events.next(s),o;{const{message:c,cancellationCode:u}=Om(0,a);this.events.next(new ta(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Nm(a.redirectTo,a.navigationBehaviorOptions))}}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return kr}))}))}cancelNavigationTransition(n,r,i){const o=new ta(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=mt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cce(t){return t!==Pm}let uce=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(dce),providedIn:"root"})}return t})();class lce{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let dce=(()=>{class t extends lce{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zt(t)))(i||t)}})();static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dU=(()=>{class t{urlSerializer=O(bm);options=O(Um,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Pl);urlHandlingStrategy=O(hb);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zs;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Zs?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=z2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>O(hce),providedIn:"root"})}return t})(),hce=(()=>{class t extends dU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof KT?this.updateStateMemento():n instanceof Hd?this.commitTransition(r):n instanceof B2?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof JT?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ta&&n.code!==nr.SupersededByNewNavigation&&n.code!==nr.Redirect?this.restoreHistory(r):n instanceof YT?this.restoreHistory(r,!0):n instanceof Ro&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&0===o&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zt(t)))(i||t)}})();static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let un=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Fk);stateManager=O(dU);options=O(Um,{optional:!0})||{};pendingTasks=O(lo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(ace);urlSerializer=O(bm);location=O(Pl);urlHandlingStrategy=O(hb);injector=O(Nn);_events=new Gn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(uce);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(db,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(ib,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mn;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=mt(this.navigationTransitions.currentNavigation);if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof ta&&r.code!==nr.Redirect&&r.code!==nr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ro)this.navigated=!0;else if(r instanceof Nm){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||cce(i.source),...s};this.scheduleNavigation(a,Pm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Kse(t){return!(t instanceof JT||t instanceof Nm)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Kr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ob),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=k2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return O2(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ea(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Pm,null,r)}navigate(n,r={skipLocationChange:!1}){return function mce(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new U(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Hr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...pce}:!1===r?{...gce}:r,ea(n))return C2(this.currentUrlTree,n,i);const o=this.parseUrl(n);return C2(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const d=this.pendingTasks.add();return function fce(t,e){t.events.pipe(Ao(n=>n instanceof Ro||n instanceof ta||n instanceof YT||n instanceof Hd),ze(n=>n instanceof Ro||n instanceof Hd?0:n instanceof ta&&(n.code===nr.Redirect||n.code===nr.SupersededByNewNavigation)?2:1),Ao(n=>2!==n),Zc(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jm=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ge(null);get href(){return mt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Gn;applicationErrorHandler=O(Kr);options=O(Um,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Zne("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let n=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ro&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=ea(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:ea(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(te(un),te(ki),Cp("tabindex"),te(ks),te(Nr),te(up))};static \u0275dir=Ae({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&Ve("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Vn("href",i.reactiveHref(),hx)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Jc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Jc],replaceUrl:[2,"replaceUrl","replaceUrl",Jc],routerLink:"routerLink"},features:[Si]})}return t})(),IU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Bt;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Ro&&this.update()})}ngAfterContentInit(){ye(this.links.changes,ye(null)).pipe(LT()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=vn(n).pipe(LT()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function Nce(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&n.isActive(o,r)}}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(te(un),te(Nr),te(ks),te(hm),te(jm,8))};static \u0275dir=Ae({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function zO(t,e,n,r){rk(t,e,n,r)}(o,jm,5),2&r){let s;(function qO(t){const e=V(),n=Ie(),r=rI();ap(r+1);const i=tw(n,r);if(t.dirty&&function l5(t){return!(4&~t[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=ok(e,r);t.reset(o,QP),t.notifyOnChanges()}return!0}return!1})(s=function GO(){return function ew(t,e){return t[18].queries[e].queryList}(V(),rI())}())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Si]})}return t})();const gb=new z("");function wU(t){return t.routerState.root}function TU(){const t=O(ur);return e=>{const n=t.get(Ri);if(e!==n.components[0])return;const r=t.get(un),i=t.get(bU);1===t.get(mb)&&r.initialNavigation(),t.get(CU,null,{optional:!0})?.setUpPreloading(),t.get(gb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const bU=new z("",{factory:()=>new Gn}),mb=new z("",{providedIn:"root",factory:()=>1}),CU=new z(""),AU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},DU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new Hce;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bm=function(t){return function(t){const e=AU(t);return DU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Qd=function(t){try{return DU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const $m=()=>{try{return function MU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qd(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},PU=t=>{var e,n;return null===(n=null===(e=$m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},NU=()=>{var t;return null===(t=$m())||void 0===t?void 0:t.config},xU=t=>{var e;return null===(e=$m())||void 0===e?void 0:e[`_${t}`]};class kU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function su(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function OU(t){return yb.apply(this,arguments)}function yb(){return(yb=v(function*(t){return(yield fetch(t,{credentials:"include"})).ok})).apply(this,arguments)}const Yd={};let VU=!1;function LU(t,e){if(typeof window>"u"||typeof document>"u"||!su(window.location.host)||Yd[t]===e||Yd[t]||VU)return;function n(f){return`__firebase__banner__${f}`}Yd[t]=e;const r="__firebase__banner",o=function Jce(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yd))Yd[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function h(){const f=function Zce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),I=n("learnmore"),w=document.getElementById(I)||document.createElement("a"),A=n("preprendIcon"),D=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const F=f.element;(function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"})(F),function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}(w,I);const K=function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{VU=!0,function s(){const f=document.getElementById(r);f&&f.remove()}()},f}();(function c(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"})(D,A),F.append(D,_,w,K),document.body.appendChild(F)}o?(_.innerText="Preview backend disconnected.",D.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(D.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h()}function kt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function UU(){return!function FU(){var t;const e=null===(t=$m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jd.prototype.create)}}class Jd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function aue(t,e){return t.replace(cue,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Oi(i,`${this.serviceName}: ${s} (${i}).`,r)}}const cue=/\{\$([^}]+)}/g;function Vi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(HU(o)&&HU(s)){if(!Vi(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function HU(t){return null!==t&&"object"==typeof t}function Zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class due{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function hue(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=vb),void 0===i.error&&(i.error=vb),void 0===i.complete&&(i.complete=vb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vb(){}function $t(t){return t&&t._delegate?t._delegate:t}class na{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ra="[DEFAULT]";class yue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Iue(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ra?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Eue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Eb=[];var De=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(De||{});const zU={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},wue=De.INFO,Tue={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},bue=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Tue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class wb{constructor(e){this.name=e,this._logLevel=wue,this._logHandler=bue,this._userLogHandler=null,Eb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?zU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}let qU,GU;const WU=new WeakMap,Tb=new WeakMap,KU=new WeakMap,bb=new WeakMap,Cb=new WeakMap;let Sb={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Tb.get(t);if("objectStoreNames"===e)return t.objectStoreNames||KU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Nue(t){return"function"==typeof t?function Pue(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Aue(){return GU||(GU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Ab(this),e),Mo(WU.get(this))}:function(...e){return Mo(t.apply(Ab(this),e))}:function(e,...n){const r=t.call(Ab(this),e,...n);return KU.set(r,e.sort?e.sort():[e]),Mo(r)}}(t):(t instanceof IDBTransaction&&function Rue(t){if(Tb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Tb.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function Sue(){return qU||(qU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,Sb):t)}function Mo(t){if(t instanceof IDBRequest)return function Due(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Mo(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&WU.set(n,t)}).catch(()=>{}),Cb.set(e,t),e}(t);if(bb.has(t))return bb.get(t);const e=Nue(t);return e!==t&&(bb.set(t,e),Cb.set(e,t)),e}const Ab=t=>Cb.get(t),Oue=["get","getKey","getAll","getAllKeys","count"],Vue=["put","add","delete","clear"],Db=new Map;function QU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Db.get(e))return Db.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Vue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Oue.includes(n))return;const o=function(){var s=v(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Db.set(e,o),o}!function Mue(t){Sb=t(Sb)}(t=>({...t,get:(e,n,r)=>QU(e,n)||t.get(e,n,r),has:(e,n)=>!!QU(e,n)||t.has(e,n)}));class $ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Hue(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const zm="@firebase/app",Li=new wb("@firebase/app"),zue="@firebase/app-compat",que="@firebase/analytics-compat",Gue="@firebase/analytics",Wue="@firebase/app-check-compat",Kue="@firebase/app-check",Que="@firebase/auth",Yue="@firebase/auth-compat",Jue="@firebase/database",Zue="@firebase/data-connect",Xue="@firebase/database-compat",ele="@firebase/functions",tle="@firebase/functions-compat",nle="@firebase/installations",rle="@firebase/installations-compat",ile="@firebase/messaging",ole="@firebase/messaging-compat",sle="@firebase/performance",ale="@firebase/performance-compat",cle="@firebase/remote-config",ule="@firebase/remote-config-compat",lle="@firebase/storage",dle="@firebase/storage-compat",hle="@firebase/firestore",fle="@firebase/ai",ple="@firebase/firestore-compat",gle="firebase",qm="[DEFAULT]",_le={[zm]:"fire-core",[zue]:"fire-core-compat",[Gue]:"fire-analytics",[que]:"fire-analytics-compat",[Kue]:"fire-app-check",[Wue]:"fire-app-check-compat",[Que]:"fire-auth",[Yue]:"fire-auth-compat",[Jue]:"fire-rtdb",[Zue]:"fire-data-connect",[Xue]:"fire-rtdb-compat",[ele]:"fire-fn",[tle]:"fire-fn-compat",[nle]:"fire-iid",[rle]:"fire-iid-compat",[ile]:"fire-fcm",[ole]:"fire-fcm-compat",[sle]:"fire-perf",[ale]:"fire-perf-compat",[cle]:"fire-rc",[ule]:"fire-rc-compat",[lle]:"fire-gcs",[dle]:"fire-gcs-compat",[hle]:"fire-fst",[ple]:"fire-fst-compat",[fle]:"fire-vertex","fire-js":"fire-js",[gle]:"fire-js-all"},ia=new Map,Xd=new Map,eh=new Map;function YU(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function au(t){const e=t.name;if(eh.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(const n of ia.values())YU(n,t);for(const n of Xd.values())YU(n,t);return!0}function Gm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fr(t){return null!=t&&void 0!==t.settings}const Sr=new Jd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class JU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}const cu="11.10.0";function XU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:qm,automaticDataCollectionEnabled:!0},e),i=r.name;if("string"!=typeof i||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(n||(n=NU()),!n)throw Sr.create("no-options");const o=ia.get(i);if(o){if(Vi(n,o.options)&&Vi(r,o.config))return o;throw Sr.create("duplicate-app",{appName:i})}const s=new Eue(i);for(const c of eh.values())s.addComponent(c);const a=new JU(n,r,s);return ia.set(i,a),a}function ej(t=qm){const e=ia.get(t);if(!e&&t===qm&&NU())return XU();if(!e)throw Sr.create("no-app",{appName:t});return e}function Fi(t,e,n){var r;let i=null!==(r=_le[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Li.warn(a.join(" "))}au(new na(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const th="firebase-heartbeat-store";let Pb=null;function tj(){return Pb||(Pb=function kue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Mo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Mo(s.result),c.oldVersion,c.newVersion,Mo(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(th)}catch(n){console.warn(n)}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),Pb}function Nb(){return(Nb=v(function*(t){try{const n=(yield tj()).transaction(th),r=yield n.objectStore(th).get(rj(t));return yield n.done,r}catch(e){if(e instanceof Oi)Li.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e?.message});Li.warn(n.message)}}})).apply(this,arguments)}function nj(t,e){return xb.apply(this,arguments)}function xb(){return(xb=v(function*(t,e){try{const r=(yield tj()).transaction(th,"readwrite");yield r.objectStore(th).put(e,rj(t)),yield r.done}catch(n){if(n instanceof Oi)Li.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n?.message});Li.warn(r.message)}}})).apply(this,arguments)}function rj(t){return`${t.name}!${t.options.appId}`}class Ale{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ij();if(null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats.length>30){const a=function Mle(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(e._heartbeatsCache.heartbeats);e._heartbeatsCache.heartbeats.splice(a,1)}return e._storage.overwrite(e._heartbeatsCache)}catch(i){Li.warn(i)}})()}getHeartbeatsHeader(){var e=this;return v(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=ij(),{heartbeatsToSend:i,unsentEntries:o}=function Dle(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),oj(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Bm(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Li.warn(r),""}})()}}function ij(){return(new Date).toISOString().substring(0,10)}class Rle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!function BU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function oue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function ble(t){return Nb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return nj(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return nj(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function oj(t){return Bm(JSON.stringify({version:2,heartbeats:t})).length}!function Ple(t){au(new na("platform-logger",e=>new $ue(e),"PRIVATE")),au(new na("heartbeat",e=>new Ale(e),"PRIVATE")),Fi(zm,"0.13.2",t),Fi(zm,"0.13.2","esm2017"),Fi("fire-js","")}(""),Fi("firebase","11.10.0","app");var Po,cj,sj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aj={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,E,T){T||(T=0);var S=Array(16);if("string"==typeof E)for(var R=0;16>R;++R)S[R]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;var x=C.g[3],b=(E=C.g[0])+(x^(T=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=(T=(R=(x=(E=T+(b<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=E+(x^T&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^E&(T^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(E^T))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=T+(E^R&(x^E))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=E+(R^x&(T^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=E+(R^x&(T^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(E^T))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(E^T&(x^E))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^E&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=E+(T^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=E+(T^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(E^T^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^E^T)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^E)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=E+(R^(T|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=E+(R^(T|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(E^(x|~T))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~E))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(E=T+((b=E+(R^(T|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(E|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(E^(x|~T))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,E){this.h=E;for(var T=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==E||(T[R]=x,S=!1)}this.g=T}(function e(C,E){function T(){}T.prototype=E.prototype,C.D=E.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),Xi=2;Xi<arguments.length;Xi++)b[Xi-2]=arguments[Xi];return E.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,E){void 0===E&&(E=C.length);for(var T=E-this.blockSize,S=this.B,R=this.h,x=0;x<E;){if(0==R)for(;x<=T;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<E;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<E;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var T=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=255&T,T/=256;for(this.u(C),C=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)C[T++]=this.g[E]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,E){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=E(C)}(C,function(E){return new s([0|E],0>E?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(u(-C));for(var E=[],T=1,S=0;C>=T;S++)E[S]=C/T|0,T*=4294967296;return new s(E,0)}var h=c(0),f=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var E=0;E<C.g.length;E++)if(0!=C.g[E])return!1;return!0}function I(C){return-1==C.h}function w(C){for(var E=C.g.length,T=[],S=0;S<E;S++)T[S]=~C.g[S];return new s(T,~C.h).add(f)}function A(C,E){return C.add(w(E))}function D(C,E){for(;(65535&C[E])!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function F(C,E){this.g=C,this.h=E}function K(C,E){if(_(E))throw Error("division by zero");if(_(C))return new F(h,h);if(I(C))return E=K(w(C),E),new F(w(E.g),w(E.h));if(I(E))return E=K(C,w(E)),new F(w(E.g),E.h);if(30<C.g.length){if(I(C)||I(E))throw Error("slowDivide_ only works with positive integers.");for(var T=f,S=E;0>=S.l(C);)T=Y(T),S=Y(S);var R=ie(T,1),x=ie(S,1);for(S=ie(S,2),T=ie(T,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(T),x=b),S=ie(S,1),T=ie(T,1)}return E=A(C,R.j(E)),new F(R,E)}for(R=h;0<=C.l(E);){for(T=Math.max(1,Math.floor(C.m()/E.m())),S=48>=(S=Math.ceil(Math.log(T)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(T)).j(E);I(b)||0<b.l(C);)b=(x=u(T-=S)).j(E);_(x)&&(x=f),R=R.add(x),C=A(C,b)}return new F(R,C)}function Y(C){for(var E=C.g.length+1,T=[],S=0;S<E;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(T,C.h)}function ie(C,E){var T=E>>5;E%=32;for(var S=C.g.length-T,R=[],x=0;x<S;x++)R[x]=0<E?C.i(x+T)>>>E|C.i(x+T+1)<<32-E:C.i(x+T);return new s(R,C.h)}(t=s.prototype).m=function(){if(I(this))return-w(this).m();for(var C=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(I(this))return"-"+w(this).toString(C);for(var E=u(Math.pow(C,6)),T=this,S="";;){var R=K(T,E).g,x=((0<(T=A(T,R.j(E))).g.length?T.g[0]:T.h)>>>0).toString(C);if(_(T=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return I(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return I(this)?w(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0,R=0;R<=E;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,T[R]=(b&=65535)<<16|(x&=65535)}return new s(T,-2147483648&T[T.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(I(this))return I(C)?w(this).j(w(C)):w(w(this).j(C));if(I(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),Xi=C.i(R)>>>16,_f=65535&C.i(R);T[2*S+2*R]+=b*_f,D(T,2*S+2*R),T[2*S+2*R+1]+=x*_f,D(T,2*S+2*R+1),T[2*S+2*R+1]+=b*Xi,D(T,2*S+2*R+1),T[2*S+2*R+2]+=x*Xi,D(T,2*S+2*R+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)},t.A=function(C){return K(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&C.i(S);return new s(T,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|C.i(S);return new s(T,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^C.i(S);return new s(T,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cj=aj.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,E){if(0==C.length)throw Error("number format error: empty string");if(2>(E=E||10)||36<E)throw Error("radix out of range: "+E);if("-"==C.charAt(0))return w(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),E);8>x?(x=u(Math.pow(E,x)),S=S.j(x).add(u(b))):S=(S=S.j(T)).add(u(b))}return S},Po=aj.Integer=s}).apply(typeof sj<"u"?sj:typeof self<"u"?self:typeof window<"u"?window:{});var uj,nh,lj,Km,kb,dj,hj,fj,Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,p,m){return l==Array.prototype||l==Object.prototype||(l[p]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Wm&&Wm];for(var p=0;p<l.length;++p){var m=l[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,p){if(p)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var M=l[y];if(!(M in m))break e;m=m[M]}(p=p(y=m[l=l[l.length-1]]))!=y&&null!=p&&e(m,l,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(l){return l||function(){return function o(l,p){l instanceof String&&(l+="");var m=0,y=!1,M={next:function(){if(!y&&m<l.length){var k=m++;return{value:p(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return"array"==(p="object"!=p?p:l?Array.isArray(l)?"array":p:"null")||"object"==p&&"number"==typeof l.length}function u(l){var p=typeof l;return"object"==p&&null!=l||"function"==p}function d(l,p,m){return l.call.apply(l.bind,arguments)}function h(l,p,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),l.apply(p,M)}}return function(){return l.apply(p,arguments)}}function f(l,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,p){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,p){function m(){}m.prototype=p.prototype,l.aa=p.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,M,k){for(var W=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)W[ot-2]=arguments[ot];return p.prototype[M].apply(y,W)}}function I(l){const p=l.length;if(0<p){const m=Array(p);for(let y=0;y<p;y++)m[y]=l[y];return m}return[]}function w(l,p){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const M=l.length||0,k=y.length||0;l.length=M+k;for(let W=0;W<k;W++)l[M+W]=y[W]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function K(l){return K[" "](l),l}K[" "]=function(){};var Y=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function ie(l,p,m){for(const y in l)p.call(m,l[y],y,l)}function E(l){const p={};for(const m in l)p[m]=l[m];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let m,y;for(let M=1;M<arguments.length;M++){for(m in y=arguments[M],y)l[m]=y[m];for(let k=0;k<T.length;k++)m=T[k],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var p=1;l=l.split(":");const m=[];for(;0<p&&l.length;)m.push(l.shift()),p--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=rM;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}var _f=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new LIe,l=>l.reset());class LIe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let yf,vf=!1,rM=new class Xi{constructor(){this.h=this.g=null}add(p,m){const y=_f.get();y.set(p,m),this.h?this.h.next=y:this.g=y,this.h=y}},Zz=()=>{const l=a.Promise.resolve(void 0);yf=()=>{l.then(FIe)}};var FIe=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var p=_f;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}vf=!1};function rs(){this.s=this.s,this.C=this.C}function Sn(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}rs.prototype.s=!1,rs.prototype.ma=function(){this.s||(this.s=!0,this.N())},rs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Sn.prototype.h=function(){this.defaultPrevented=!0};var UIe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return l}();function If(l,p){if(Sn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Y){e:{try{K(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else"mouseover"==m?p=l.fromElement:"mouseout"==m&&(p=l.toElement);this.relatedTarget=p,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:jIe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&If.aa.h.call(this)}}_(If,Sn);var jIe={2:"touch",3:"pen",4:"mouse"};If.prototype.h=function(){If.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ef="closure_listenable_"+(1e6*Math.random()|0),BIe=0;function $Ie(l,p,m,y,M){this.listener=l,this.proxy=null,this.src=p,this.type=m,this.capture=!!y,this.ha=M,this.key=++BIe,this.da=this.fa=!1}function By(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function $y(l){this.src=l,this.g={},this.h=0}function iM(l,p){var m=p.type;if(m in l.g){var k,y=l.g[m],M=Array.prototype.indexOf.call(y,p,void 0);(k=0<=M)&&Array.prototype.splice.call(y,M,1),k&&(By(p),0==l.g[m].length&&(delete l.g[m],l.h--))}}function oM(l,p,m,y){for(var M=0;M<l.length;++M){var k=l[M];if(!k.da&&k.listener==p&&k.capture==!!m&&k.ha==y)return M}return-1}$y.prototype.add=function(l,p,m,y,M){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var W=oM(l,p,y,M);return-1<W?(p=l[W],m||(p.fa=!1)):((p=new $Ie(p,this.src,k,!!y,M)).fa=m,l.push(p)),p};var sM="closure_lm_"+(1e6*Math.random()|0),aM={};function Xz(l,p,m,y,M){if(y&&y.once)return tq(l,p,m,y,M);if(Array.isArray(p)){for(var k=0;k<p.length;k++)Xz(l,p[k],m,y,M);return null}return m=dM(m),l&&l[Ef]?l.K(p,m,u(y)?!!y.capture:!!y,M):eq(l,p,m,!1,y,M)}function eq(l,p,m,y,M,k){if(!p)throw Error("Invalid event type");var W=u(M)?!!M.capture:!!M,ot=uM(l);if(ot||(l[sM]=ot=new $y(l)),(m=ot.add(p,m,y,W,k)).proxy)return m;if(y=function HIe(){const p=zIe;return function l(m){return p.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)UIe||(M=W),void 0===M&&(M=!1),l.addEventListener(p.toString(),y,M);else if(l.attachEvent)l.attachEvent(rq(p.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function tq(l,p,m,y,M){if(Array.isArray(p)){for(var k=0;k<p.length;k++)tq(l,p[k],m,y,M);return null}return m=dM(m),l&&l[Ef]?l.L(p,m,u(y)?!!y.capture:!!y,M):eq(l,p,m,!0,y,M)}function nq(l,p,m,y,M){if(Array.isArray(p))for(var k=0;k<p.length;k++)nq(l,p[k],m,y,M);else y=u(y)?!!y.capture:!!y,m=dM(m),l&&l[Ef]?(l=l.i,(p=String(p).toString())in l.g&&-1<(m=oM(k=l.g[p],m,y,M))&&(By(k[m]),Array.prototype.splice.call(k,m,1),0==k.length&&(delete l.g[p],l.h--))):l&&(l=uM(l))&&(p=l.g[p.toString()],l=-1,p&&(l=oM(p,m,y,M)),(m=-1<l?p[l]:null)&&cM(m))}function cM(l){if("number"!=typeof l&&l&&!l.da){var p=l.src;if(p&&p[Ef])iM(p.i,l);else{var m=l.type,y=l.proxy;p.removeEventListener?p.removeEventListener(m,y,l.capture):p.detachEvent?p.detachEvent(rq(m),y):p.addListener&&p.removeListener&&p.removeListener(y),(m=uM(p))?(iM(m,l),0==m.h&&(m.src=null,p[sM]=null)):By(l)}}}function rq(l){return l in aM?aM[l]:aM[l]="on"+l}function zIe(l,p){if(l.da)l=!0;else{p=new If(p,this);var m=l.listener,y=l.ha||l.src;l.fa&&cM(l),l=m.call(y,p)}return l}function uM(l){return(l=l[sM])instanceof $y?l:null}var lM="__closure_events_fn_"+(1e9*Math.random()>>>0);function dM(l){return"function"==typeof l?l:(l[lM]||(l[lM]=function(p){return l.handleEvent(p)}),l[lM])}function An(){rs.call(this),this.i=new $y(this),this.M=this,this.F=null}function zn(l,p){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=p.type||p,"string"==typeof p)p=new Sn(p,l);else if(p instanceof Sn)p.target=p.target||l;else{var M=p;S(p=new Sn(y,l),M)}if(M=!0,m)for(var k=m.length-1;0<=k;k--){var W=p.g=m[k];M=Hy(W,y,!0,p)&&M}if(M=Hy(W=p.g=l,y,!0,p)&&M,M=Hy(W,y,!1,p)&&M,m)for(k=0;k<m.length;k++)M=Hy(W=p.g=m[k],y,!1,p)&&M}function Hy(l,p,m,y){if(!(p=l.i.g[String(p)]))return!0;p=p.concat();for(var M=!0,k=0;k<p.length;++k){var W=p[k];if(W&&!W.da&&W.capture==m){var ot=W.listener,hn=W.ha||W.src;W.fa&&iM(l.i,W),M=!1!==ot.call(hn,y)&&M}}return M&&!y.defaultPrevented}function iq(l,p,m){if("function"==typeof l)m&&(l=f(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=f(l.handleEvent,l)}return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function oq(l){l.g=iq(()=>{l.g=null,l.i&&(l.i=!1,oq(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}_(An,rs),An.prototype[Ef]=!0,An.prototype.removeEventListener=function(l,p,m,y){nq(this,l,p,m,y)},An.prototype.N=function(){if(An.aa.N.call(this),this.i){var p,l=this.i;for(p in l.g){for(var m=l.g[p],y=0;y<m.length;y++)By(m[y]);delete l.g[p],l.h--}}this.F=null},An.prototype.K=function(l,p,m,y){return this.i.add(String(l),p,!1,m,y)},An.prototype.L=function(l,p,m,y){return this.i.add(String(l),p,!0,m,y)};class qIe extends rs{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:oq(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wf(l){rs.call(this),this.h=l,this.g={}}_(wf,rs);var sq=[];function aq(l){ie(l.g,function(p,m){this.g.hasOwnProperty(m)&&cM(p)},l),l.g={}}wf.prototype.N=function(){wf.aa.N.call(this),aq(this)},wf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hM=a.JSON.stringify,GIe=a.JSON.parse,WIe=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function fM(){}function uq(){}fM.prototype.h=null;var Tf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pM(){Sn.call(this,"d")}function gM(){Sn.call(this,"c")}_(pM,Sn),_(gM,Sn);var Ua={},lq=null;function zy(){return lq=lq||new An}function dq(l){Sn.call(this,Ua.La,l)}function bf(l){const p=zy();zn(p,new dq(p))}function hq(l,p){Sn.call(this,Ua.STAT_EVENT,l),this.stat=p}function qn(l){const p=zy();zn(p,new hq(p,l))}function fq(l,p){Sn.call(this,Ua.Ma,l),this.size=p}function Cf(l,p){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Sf(){this.g=!0}function al(l,p,m,y){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+function JIe(l,p){if(!l.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var k=M[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var W=1;W<M.length;W++)M[W]=""}}}return hM(m)}catch{return p}}(l,m)+(y?" "+y:"")})}Ua.La="serverreachability",_(dq,Sn),Ua.STAT_EVENT="statevent",_(hq,Sn),Ua.Ma="timingevent",_(fq,Sn),Sf.prototype.xa=function(){this.g=!1},Sf.prototype.info=function(){};var mM,qy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pq={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Gy(){}function is(l,p,m,y){this.j=l,this.i=p,this.l=m,this.R=y||1,this.U=new wf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gq}function gq(){this.i=null,this.g="",this.h=!1}_(Gy,fM),Gy.prototype.g=function(){return new XMLHttpRequest},Gy.prototype.i=function(){return{}},mM=new Gy;var mq={},_M={};function yM(l,p,m){l.L=1,l.v=Yy(eo(p)),l.m=m,l.P=!0,_q(l,null)}function _q(l,p){l.F=Date.now(),Wy(l),l.A=eo(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),Pq(m.i,"t",y),l.C=0,m=l.j.J,l.h=new gq,l.g=Qq(l.j,m?p:null,!l.m),0<l.O&&(l.M=new qIe(f(l.Y,l,l.g),l.O)),p=l.U,m=l.g,y=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(sq[0]=M.toString()),M=sq);for(var k=0;k<M.length;k++){var W=Xz(m,M[k],y||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),bf(),function KIe(l,p,m,y,M,k){l.info(function(){if(l.g)if(k)for(var W="",ot=k.split("&"),hn=0;hn<ot.length;hn++){var je=ot[hn].split("=");if(1<je.length){var Dn=je[0];je=je[1];var Rn=Dn.split("_");W=2<=Rn.length&&"type"==Rn[1]?W+(Dn+"=")+je+"&":W+(Dn+"=redacted&")}}else W=null;else W=k;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+p+"\n"+m+"\n"+W})}(l.i,l.u,l.A,l.l,l.R,l.m)}function yq(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function ZIe(l,p){var m=l.C,y=p.indexOf("\n",m);return-1==y?_M:(m=Number(p.substring(m,y)),isNaN(m)?mq:(y+=1)+m>p.length?_M:(p=p.slice(y,y+m),l.C=y+m,p))}function Wy(l){l.S=Date.now()+l.I,vq(l,l.I)}function vq(l,p){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Cf(f(l.ba,l),p)}function vM(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Af(l){0==l.j.G||l.J||qq(l.j,l)}function ja(l){vM(l);var p=l.M;p&&"function"==typeof p.ma&&p.ma(),l.M=null,aq(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function IM(l,p){try{var m=l.j;if(0!=m.G&&(m.g==l||EM(m.h,l)))if(!l.K&&EM(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(p)}catch{y=null}if(Array.isArray(y)&&3==y.length){var M=y;if(0==M[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;tv(m),Xy(m)}CM(m),qn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&0==m.v&&!m.C&&(m.C=Cf(f(m.Za,m),6e3));if(1>=wq(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else $a(m,11)}else if((l.K||m.g==l)&&tv(m),!D(p))for(M=m.Da.g.parse(p),p=0;p<M.length;p++){let je=M[p];if(m.T=je[0],je=je[1],2==m.G)if("c"==je[0]){m.K=je[1],m.ia=je[2];const Dn=je[3];null!=Dn&&(m.la=Dn,m.j.info("VER="+m.la));const Rn=je[4];null!=Rn&&(m.Aa=Rn,m.j.info("SVER="+m.Aa));const ll=je[5];null!=ll&&"number"==typeof ll&&0<ll&&(m.L=y=1.5*ll,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const $r=l.g;if($r){const rv=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rv){var k=y.h;k.g||-1==rv.indexOf("spdy")&&-1==rv.indexOf("quic")&&-1==rv.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(wM(k,k.h),k.h=null))}if(y.D){const AM=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;AM&&(y.ya=AM,pt(y.I,y.D,AM))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var W=l;if((y=m).qa=Kq(y,y.J?y.ia:null,y.W),W.K){Tq(y.h,W);var ot=W,hn=y.L;hn&&(ot.I=hn),ot.B&&(vM(ot),Wy(ot)),y.g=W}else Hq(y);0<m.i.length&&ev(m)}else"stop"!=je[0]&&"close"!=je[0]||$a(m,7);else 3==m.G&&("stop"==je[0]||"close"==je[0]?"stop"==je[0]?$a(m,7):bM(m):"noop"!=je[0]&&m.l&&m.l.ta(je),m.v=0)}bf()}catch{}}is.prototype.ca=function(l){l=l.target;const p=this.M;p&&3==to(l)?p.j():this.Y(l)},is.prototype.Y=function(l){try{if(l==this.g)e:{const Rn=to(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>Rn)&&(3!=Rn||this.g&&(this.h.h||this.g.oa()||Fq(this.g)))){this.J||4!=Rn||7==p||bf(),vM(this);var m=this.g.Z();this.X=m;t:if(yq(this)){var y=Fq(this.g);l="";var M=y.length,k=4==to(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ja(this),Af(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,l+=this.h.i.decode(y[p],{stream:!(k&&p==M-1)});y.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=200==m,function QIe(l,p,m,y,M,k,W){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+p+"\n"+m+"\n"+k+" "+W})}(this.i,this.u,this.A,this.l,this.R,Rn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,hn=this.g;if((ot=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ot)){var je=ot;break t}}je=null}if(!(m=je)){this.o=!1,this.s=3,qn(12),ja(this),Af(this);break e}al(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,IM(this,m)}if(this.P){let $r;for(m=!0;!this.J&&this.C<W.length;){if($r=ZIe(this,W),$r==_M){4==Rn&&(this.s=4,qn(14),m=!1),al(this.i,this.l,null,"[Incomplete Response]");break}if($r==mq){this.s=4,qn(15),al(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}al(this.i,this.l,$r,null),IM(this,$r)}if(yq(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Rn||0!=W.length||this.h.h||(this.s=1,qn(16),m=!1),this.o=this.o&&m,m){if(0<W.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),SM(Dn),Dn.M=!0,qn(11))}}else al(this.i,this.l,W,"[Invalid Chunked Response]"),ja(this),Af(this)}else al(this.i,this.l,W,null),IM(this,W);4==Rn&&ja(this),this.o&&!this.J&&(4==Rn?qq(this.j,this):(this.o=!1,Wy(this)))}else(function gEe(l){const p={};l=(l.g&&2<=to(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const M=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const k=p[M]||[];p[M]=k,k.push(m)}!function C(l,p){for(const m in l)p.call(void 0,l[m],m,l)}(p,function(y){return y.join(", ")})})(this.g),400==m&&0<W.indexOf("Unknown SID")?(this.s=3,qn(12)):(this.s=0,qn(13)),ja(this),Af(this)}}}catch{}},is.prototype.cancel=function(){this.J=!0,ja(this)},is.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function YIe(l,p){l.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(bf(),qn(17)),ja(this),this.s=2,Af(this)):vq(this,this.S-l)};var XIe=class{constructor(l,p){this.g=l,this.map=p}};function Iq(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Eq(l){return!!l.h||!!l.g&&l.g.size>=l.j}function wq(l){return l.h?1:l.g?l.g.size:0}function EM(l,p){return l.h?l.h==p:!!l.g&&l.g.has(p)}function wM(l,p){l.g?l.g.add(p):l.h=p}function Tq(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}function bq(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let p=l.i;for(const m of l.g.values())p=p.concat(m.D);return p}return I(l.i)}function Cq(l,p){if(l.forEach&&"function"==typeof l.forEach)l.forEach(p,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,p,void 0);else for(var m=function tEe(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var p=[];l=l.length;for(var m=0;m<l;m++)p.push(m);return p}p=[],m=0;for(const y in l)p[m++]=y;return p}}}(l),y=function eEe(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var p=[],m=l.length,y=0;y<m;y++)p.push(l[y]);return p}for(y in p=[],m=0,l)p[m++]=l[y];return p}(l),M=y.length,k=0;k<M;k++)p.call(void 0,y[k],m&&m[k],l)}Iq.prototype.cancel=function(){if(this.i=bq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var Sq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ba){this.h=l.h,Ky(this,l.j),this.o=l.o,this.g=l.g,Qy(this,l.s),this.l=l.l;var p=l.i,m=new Mf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Aq(this,m),this.m=l.m}else l&&(p=String(l).match(Sq))?(this.h=!1,Ky(this,p[1]||"",!0),this.o=Df(p[2]||""),this.g=Df(p[3]||"",!0),Qy(this,p[4]),this.l=Df(p[5]||"",!0),Aq(this,p[6]||"",!0),this.m=Df(p[7]||"")):(this.h=!1,this.i=new Mf(null,this.h))}function eo(l){return new Ba(l)}function Ky(l,p,m){l.j=m?Df(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Qy(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Aq(l,p,m){p instanceof Mf?(l.i=p,function cEe(l,p){p&&!l.j&&(os(l),l.i=null,l.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(Rq(this,y),Pq(this,M,m))},l)),l.j=p}(l.i,l.h)):(m||(p=Rf(p,sEe)),l.i=new Mf(p,l.h))}function pt(l,p,m){l.i.set(p,m)}function Yy(l){return pt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Df(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rf(l,p,m){return"string"==typeof l?(l=encodeURI(l).replace(p,rEe),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rEe(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Ba.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Rf(p,Dq,!0),":");var m=this.g;return(m||"file"==p)&&(l.push("//"),(p=this.o)&&l.push(Rf(p,Dq,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(Rf(m,"/"==m.charAt(0)?oEe:iEe,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Rf(m,aEe)),l.join("")};var Dq=/[#\/\?@]/g,iEe=/[#\?:]/g,oEe=/[#\?]/g,sEe=/[#\?@]/g,aEe=/#/g;function Mf(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function os(l){l.g||(l.g=new Map,l.h=0,l.i&&function nEe(l,p){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),M=null;if(0<=y){var k=l[m].substring(0,y);M=l[m].substring(y+1)}else k=l[m];p(k,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(l.i,function(p,m){l.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function Rq(l,p){os(l),p=cl(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Mq(l,p){return os(l),p=cl(l,p),l.g.has(p)}function Pq(l,p,m){Rq(l,p),0<m.length&&(l.i=null,l.g.set(cl(l,p),I(m)),l.h+=m.length)}function cl(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function ss(l,p,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function dEe(){this.g=new WIe}function hEe(l,p,m){const y=m||"";try{Cq(l,function(M,k){let W=M;u(M)&&(W=hM(M)),p.push(y+k+"="+encodeURIComponent(W))})}catch(M){throw p.push(y+"type="+encodeURIComponent("_badmap")),M}}function Pf(l){this.l=l.Ub||null,this.j=l.eb||!1}function Jy(l,p){An.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nq(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Nf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,xf(l)}function xf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function xq(l){let p="";return ie(l,function(m,y){p+=y,p+=":",p+=m,p+="\r\n"}),p}function TM(l,p,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=xq(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):pt(l,p,m))}function Pt(l){An.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Mf.prototype).add=function(l,p){os(this),this.i=null,l=cl(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(p),this.h+=1,this},t.forEach=function(l,p){os(this),this.g.forEach(function(m,y){m.forEach(function(M){l.call(p,M,y,this)},this)},this)},t.na=function(){os(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let y=0;y<p.length;y++){const M=l[y];for(let k=0;k<M.length;k++)m.push(p[y])}return m},t.V=function(l){os(this);let p=[];if("string"==typeof l)Mq(this,l)&&(p=p.concat(this.g.get(cl(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)p=p.concat(l[m])}return p},t.set=function(l,p){return os(this),this.i=null,Mq(this,l=cl(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l&&0<(l=this.V(l)).length?String(l[0]):p},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var y=p[m];const k=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var M=k;""!==W[y]&&(M+="="+encodeURIComponent(String(W[y]))),l.push(M)}}return this.i=l.join("&")},_(Pf,fM),Pf.prototype.g=function(){return new Jy(this.l,this.j)},Pf.prototype.i=function(l){return function(){return l}}({}),_(Jy,An),(t=Jy.prototype).open=function(l,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,xf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,xf(this)),this.g&&(this.readyState=3,xf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nq(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Nf(this):xf(this),3==this.readyState&&Nq(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Nf(this))},t.Qa=function(l){this.g&&(this.response=l,Nf(this))},t.ga=function(){this.g&&Nf(this)},t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var m=p.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=p.next();return l.join("\r\n")},Object.defineProperty(Jy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Pt,An);var fEe=/^https?$/i,pEe=["POST","PUT"];function kq(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Oq(l),Zy(l)}function Oq(l){l.A||(l.A=!0,zn(l,"complete"),zn(l,"error"))}function Vq(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=to(l)||2!=l.Z()))if(l.u&&4==to(l))iq(l.Ea,0,l);else if(zn(l,"readystatechange"),4==to(l)){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var y;if(y=0===W){var M=String(l.D).match(Sq)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!fEe.test(M?M.toLowerCase():"")}m=y}if(m)zn(l,"complete"),zn(l,"success");else{l.m=6;try{var k=2<to(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",Oq(l)}}finally{Zy(l)}}}function Zy(l,p){if(l.g){Lq(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||zn(l,"ready");try{m.onreadystatechange=y}catch{}}}function Lq(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function to(l){return l.g?l.g.readyState:0}function Fq(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(l,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||p}function Uq(l){this.Aa=0,this.i=[],this.j=new Sf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kf("baseRetryDelayMs",5e3,l),this.cb=kf("retryDelaySeedMs",1e4,l),this.Wa=kf("forwardChannelMaxRetries",2,l),this.wa=kf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Iq(l&&l.concurrentRequestLimit),this.Da=new dEe,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function bM(l){if(jq(l),3==l.G){var p=l.U++,m=eo(l.I);if(pt(m,"SID",l.K),pt(m,"RID",p),pt(m,"TYPE","terminate"),Of(l,m),(p=new is(l,l.j,p)).L=2,p.v=Yy(eo(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=Qq(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Wy(p)}Wq(l)}function Xy(l){l.g&&(SM(l),l.g.cancel(),l.g=null)}function jq(l){Xy(l),l.u&&(a.clearTimeout(l.u),l.u=null),tv(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function ev(l){if(!Eq(l.h)&&!l.s){l.s=!0;var p=l.Ga;yf||Zz(),vf||(yf(),vf=!0),rM.add(p,l),l.B=0}}function Bq(l,p){var m;m=p?p.l:l.U++;const y=eo(l.I);pt(y,"SID",l.K),pt(y,"RID",m),pt(y,"AID",l.T),Of(l,y),l.m&&l.o&&TM(y,l.m,l.o),m=new is(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),p&&(l.i=p.D.concat(l.i)),p=$q(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wM(l.h,m),yM(m,y,p)}function Of(l,p){l.H&&ie(l.H,function(m,y){pt(p,y,m)}),l.l&&Cq({},function(m,y){pt(p,y,m)})}function $q(l,p,m){m=Math.min(l.i.length,m);var y=l.l?f(l.l.Na,l.l,l):null;e:{var M=l.i;let k=-1;for(;;){const W=["count="+m];-1==k?0<m?(k=M[0].g,W.push("ofs="+k)):k=0:W.push("ofs="+k);let ot=!0;for(let hn=0;hn<m;hn++){let je=M[hn].g;const Dn=M[hn].map;if(je-=k,0>je)k=Math.max(0,M[hn].g-100),ot=!1;else try{hEe(Dn,W,"req"+je+"_")}catch{y&&y(Dn)}}if(ot){y=W.join("&");break e}}}return l=l.i.splice(0,m),p.D=l,y}function Hq(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;yf||Zz(),vf||(yf(),vf=!0),rM.add(p,l),l.v=0}}function CM(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Cf(f(l.Fa,l),Gq(l,l.v)),l.v++,0))}function SM(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function zq(l){l.g=new is(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var p=eo(l.qa);pt(p,"RID","rpc"),pt(p,"SID",l.K),pt(p,"AID",l.T),pt(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&pt(p,"TO",l.ja),pt(p,"TYPE","xmlhttp"),Of(l,p),l.m&&l.o&&TM(p,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Yy(eo(p)),m.m=null,m.P=!0,_q(m,l)}function tv(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function qq(l,p){var m=null;if(l.g==p){tv(l),SM(l),l.g=null;var y=2}else{if(!EM(l.h,p))return;m=p.D,Tq(l.h,p),y=1}if(0!=l.G)if(p.o)if(1==y){m=p.m?p.m.length:0,p=Date.now()-p.F;var M=l.B;zn(y=zy(),new fq(y,m)),ev(l)}else Hq(l);else if(3==(M=p.s)||0==M&&0<p.X||!(1==y&&function mEe(l,p){return!(wq(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=p.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Cf(f(l.Ga,l,p),Gq(l,l.B)),l.B++,0)))}(l,p)||2==y&&CM(l)))switch(m&&0<m.length&&(p=l.h,p.i=p.i.concat(m)),M){case 1:$a(l,5);break;case 4:$a(l,10);break;case 3:$a(l,6);break;default:$a(l,2)}}function Gq(l,p){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*p}function $a(l,p){if(l.j.info("Error code "+p),2==p){var m=f(l.fb,l),y=l.Xa;const M=!y;y=new Ba(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ky(y,"https"),Yy(y),M?function uEe(l,p){const m=new Sf;if(a.Image){const y=new Image;y.onload=g(ss,m,"TestLoadImage: loaded",!0,p,y),y.onerror=g(ss,m,"TestLoadImage: error",!1,p,y),y.onabort=g(ss,m,"TestLoadImage: abort",!1,p,y),y.ontimeout=g(ss,m,"TestLoadImage: timeout",!1,p,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else p(!1)}(y.toString(),m):function lEe(l,p){new Sf;const y=new AbortController,M=setTimeout(()=>{y.abort(),ss(0,0,!1,p)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(M),ss(0,0,!!k.ok,p)}).catch(()=>{clearTimeout(M),ss(0,0,!1,p)})}(y.toString(),m)}else qn(2);l.G=0,l.l&&l.l.sa(p),Wq(l),jq(l)}function Wq(l){if(l.G=0,l.ka=[],l.l){const p=bq(l.h);(0!=p.length||0!=l.i.length)&&(w(l.ka,p),w(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function Kq(l,p,m){var y=m instanceof Ba?eo(m):new Ba(m);if(""!=y.g)p&&(y.g=p+"."+y.g),Qy(y,y.s);else{var M=a.location;y=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var k=new Ba(null);y&&Ky(k,y),p&&(k.g=p),M&&Qy(k,M),m&&(k.l=m),y=k}return p=l.ya,(m=l.D)&&p&&pt(y,m,p),pt(y,"VER",l.la),Of(l,y),y}function Qq(l,p,m){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Pt(l.Ca&&!l.pa?new Pf({eb:m}):l.pa)).Ha(l.J),p}function Yq(){}function nv(){}function _r(l,p){An.call(this),this.g=new Uq(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!D(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.D=p,null!==(l=this.h)&&p in l&&p in(l=this.h)&&delete l[p]),this.j=new ul(this)}function Jq(l){pM.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const m in p){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,p=null!==p&&l in p?p[l]:void 0),this.data=p}else this.data=l}function Zq(){gM.call(this),this.status=1}function ul(l){this.g=l}(t=Pt.prototype).Ha=function(l){this.J=l},t.ea=function(l,p,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mM.g(),this.v=function cq(l){return l.h||(l.h=l.i())}(this.o?this.o:mM),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(k){return void kq(this,k)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())m.set(k,y.get(k))}y=Array.from(m.keys()).find(k=>"content-type"==k.toLowerCase()),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pEe,p,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,W]of m)this.g.setRequestHeader(k,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lq(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){kq(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,zn(this,"complete"),zn(this,"abort"),Zy(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zy(this,!0)),Pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vq(this):this.bb())},t.bb=function(){Vq(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<to(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&0==p.indexOf(l)&&(p=p.substring(l.length)),GIe(p)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Uq.prototype).la=8,t.G=1,t.connect=function(l,p,m,y){qn(0),this.W=l,this.H=p||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Kq(this,null,this.W),ev(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new is(this,this.j,l);let k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(M.H=k,k=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(p+=y)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=$q(this,M,p),pt(m=eo(this.I),"RID",l),pt(m,"CVER",22),this.D&&pt(m,"X-HTTP-Session-Id",this.D),Of(this,m),k&&(this.O?p="headers="+encodeURIComponent(String(xq(k)))+"&"+p:this.m&&TM(m,this.m,k)),wM(this.h,M),this.Ua&&pt(m,"TYPE","init"),this.P?(pt(m,"$req",p),pt(m,"SID","null"),M.T=!0,yM(M,m,null)):yM(M,m,p),this.G=2}}else 3==this.G&&(l?Bq(this,l):0==this.i.length||Eq(this.h)||Bq(this))},t.Fa=function(){if(this.u=null,zq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Cf(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qn(10),Xy(this),zq(this))},t.Za=function(){null!=this.C&&(this.C=null,Xy(this),CM(this),qn(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),qn(2)):(this.j.info("Failed to ping google.com"),qn(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Yq.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},nv.prototype.g=function(l,p){return new _r(l,p)},_(_r,An),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){bM(this.g)},_r.prototype.o=function(l){var p=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=hM(l),l=m);p.i.push(new XIe(p.Ya++,l)),3==p.G&&ev(p)},_r.prototype.N=function(){this.g.l=null,delete this.j,bM(this.g),delete this.g,_r.aa.N.call(this)},_(Jq,pM),_(Zq,gM),_(ul,Yq),ul.prototype.ua=function(){zn(this.g,"a")},ul.prototype.ta=function(l){zn(this.g,new Jq(l))},ul.prototype.sa=function(l){zn(this.g,new Zq)},ul.prototype.ra=function(){zn(this.g,"b")},nv.prototype.createWebChannel=nv.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,fj=Ui.createWebChannelTransport=function(){return new nv},hj=Ui.getStatEventTarget=function(){return zy()},dj=Ui.Event=Ua,kb=Ui.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qy.NO_ERROR=0,qy.TIMEOUT=8,qy.HTTP_ERROR=6,Km=Ui.ErrorCode=qy,pq.COMPLETE="complete",lj=Ui.EventType=pq,uq.EventType=Tf,Tf.OPEN="a",Tf.CLOSE="b",Tf.ERROR="c",Tf.MESSAGE="d",An.prototype.listen=An.prototype.K,nh=Ui.WebChannel=uq,Ui.FetchXmlHttpFactory=Pf,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,uj=Ui.XhrIo=Pt}).apply(typeof Wm<"u"?Wm:typeof self<"u"?self:typeof window<"u"?window:{});const gj="@firebase/firestore";class Xt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");let uu="11.10.0";const No=new wb("@firebase/firestore");function lu(){return No.logLevel}function j(t,...e){if(No.logLevel<=De.DEBUG){const n=e.map(Ob);No.debug(`Firestore (${uu}): ${t}`,...n)}}function Ot(t,...e){if(No.logLevel<=De.ERROR){const n=e.map(Ob);No.error(`Firestore (${uu}): ${t}`,...n)}}function Bn(t,...e){if(No.logLevel<=De.WARN){const n=e.map(Ob);No.warn(`Firestore (${uu}): ${t}`,...n)}}function Ob(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Q(t,e,n){let r="Unexpected state";"string"==typeof e?r=e:n=e,_j(t,r,n)}function _j(t,e,n){let r=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ot(r),new Error(r)}function ee(t,e,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,t||_j(e,i,r)}function G(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class en{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class yj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ule{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class jle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ble{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;ee(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new en;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new en,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(v(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new en)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee("string"==typeof r.accessToken,31837,{l:r}),new yj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(null===e||"string"==typeof e,2055,{h:e}),new Xt(e)}}class $le{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hle{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $le(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zle{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(void 0===this.o,3512);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee("string"==typeof n.token,44558,{tokenResult:n}),this.m=n.token,new Vb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Lb(){return new TextEncoder}class Fb{static newId(){const n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Ub(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ue(r,i);{const o=Lb(),s=Gle(o.encode(vj(t,n)),o.encode(vj(e,n)));return 0!==s?s:ue(r,i)}}n+=r>65535?2:1}return ue(t.length,e.length)}function vj(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Gle(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function du(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const jb="__name__";class ii{constructor(e,n,r){void 0===n?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),void 0===r?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ii.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ii.compareSegments(e.get(i),n.get(i));if(0!==o)return o}return ue(e.length,n.length)}static compareSegments(e,n){const r=ii.isNumericId(e),i=ii.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ii.extractNumericId(e).compare(ii.extractNumericId(n)):Ub(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class Ce extends ii{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const Wle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends ii{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return Wle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===jb}static keyField(){return new _t([jb])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}class q{constructor(e){this.path=e}static fromPath(e){return new q(Ce.fromString(e))}static fromName(e){return new q(Ce.fromString(e).popFirst(5))}static empty(){return new q(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ce.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Ce(e.slice()))}}function Bb(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ej(t){if(!q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wj(t){if(q.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tj(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Qm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Q(12329,{type:typeof t})}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function sa(t,e){if(!Tj(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==o&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}const Cj=-62135596800;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cj)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-Cj).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ht("string",Qe._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Qe(0,0))}static max(){return new re(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Dj(t){return new dr(t.readTime,t.key,-1)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(re.min(),q.empty(),-1)}static max(){return new dr(re.max(),q.empty(),-1)}}function Hb(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=q.comparator(t.documentKey,e.documentKey),0!==n?n:ue(t.largestBatchId,e.largestBatchId))}class Mj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xo(t){return zb.apply(this,arguments)}function zb(){return(zb=v(function*(t){if(t.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new P((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function ko(t){return"IndexedDbTransactionError"===t.name}let fr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ae&&this.ae(n),n}}return t.ue=-1,t})();function oh(t){return null==t}function sh(t){return 0===t&&1/t==-1/0}function tde(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function kj(t){return t+"\x01\x01"}const ch="mutationQueues",Ur="mutations",mu="documentMutations",uh="remoteDocumentGlobal",_u="targets",yu="targetDocuments",ha="targetGlobal",lh="collectionParents",vu="clientMetadata",n_="bundles",r_="namedQueries";function Wj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ct{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o_(this.root,e,this.comparator,!1)}getReverseIterator(){return new o_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o_(this.root,e,this.comparator,!0)}}class o_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ln(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1,ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yj(this.data.getIterator())}getIteratorFrom(e){return new Yj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Yj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rr{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new rr([])}unionWith(e){let n=new Ye(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Jj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jj("Invalid base64 string: "+o):o}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Ade=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(ee(!!t,39018),"string"==typeof t){let e=0;const n=Ade.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bi(t){return"string"==typeof t?Mt.fromBase64String(t):Mt.fromUint8Array(t)}const Zj="server_timestamp",Xj="__type__",eB="__previous_value__",tB="__local_write_time__";function s_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[Xj])||void 0===n?void 0:n.stringValue)===Zj}function a_(t){const e=t.mapValue.fields[eB];return s_(e)?a_(e):e}function fh(t){const e=ji(t.mapValue.fields[tB].timestampValue);return new Qe(e.seconds,e.nanos)}class Dde{constructor(e,n,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const ph="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||ph}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}const eC="__type__",nB="__max__",Lo_mapValue={fields:{__type__:{stringValue:nB}}},tC="__vector__",Eu="value";function Fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s_(t)?4:aB(t)?9007199254740991:d_(t)?10:11:Q(28295,{value:t})}function ai(t,e){if(t===e)return!0;const n=Fo(t);if(n!==Fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fh(t).isEqual(fh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ji(i.timestampValue),a=ji(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Bi(t.bytesValue).isEqual(Bi(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return yt(i.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return yt(i.integerValue)===yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=yt(i.doubleValue),a=yt(o.doubleValue);return s===a?sh(s)===sh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return du(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Wj(s)!==Wj(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!ai(s[c],a[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}var o}function gh(t,e){return void 0!==(t.values||[]).find(n=>ai(n,e))}function Uo(t,e){if(t===e)return 0;const n=Fo(t),r=Fo(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=yt(o.integerValue||o.doubleValue),c=yt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return rB(t.timestampValue,e.timestampValue);case 4:return rB(fh(t),fh(e));case 5:return Ub(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Bi(o),c=Bi(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=ue(a[u],c[u]);if(0!==d)return d}return ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ue(yt(o.latitude),yt(s.latitude));return 0!==a?a:ue(yt(o.longitude),yt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iB(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{})[Eu])||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{})[Eu])||void 0===c?void 0:c.arrayValue,I=ue((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==I?I:iB(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Lo_mapValue&&s===Lo_mapValue)return 0;if(o===Lo_mapValue)return 1;if(s===Lo_mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Ub(c[h],d[h]);if(0!==f)return f;const g=Uo(a[c[h]],u[d[h]]);if(0!==g)return g}return ue(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{le:n})}}function rB(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ue(t,e);const n=ji(t),r=ji(e),i=ue(n.seconds,r.seconds);return 0!==i?i:ue(n.nanos,r.nanos)}function iB(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Uo(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function wu(t){return nC(t)}function nC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bi(t.bytesValue).toBase64():"referenceValue"in t?q.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=nC(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${nC(n.fields[s])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function u_(t){switch(Fo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=a_(t);return e?16+u_(e):16;case 5:return 2*t.stringValue.length;case 6:return Bi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((i,o)=>i+u_(o),0);case 10:case 11:return function(r){let i=0;return Vo(r.fields,(o,s)=>{i+=o.length+u_(s)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function pa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rC(t){return!!t&&"integerValue"in t}function mh(t){return!!t&&"arrayValue"in t}function oB(t){return!!t&&"nullValue"in t}function sB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function l_(t){return!!t&&"mapValue"in t}function d_(t){var e,n;return(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{})[eC])||void 0===n?void 0:n.stringValue)===tC}function _h(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_h(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_h(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nB}class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!l_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_h(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=_h(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());l_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];l_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new dn(_h(this.value))}}function dB(t){const e=[];return Vo(t.fields,(n,r)=>{const i=new _t([n]);if(l_(r)){const o=dB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new rr(e)}class dt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,re.min(),re.min(),re.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,re.min(),re.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,re.min(),re.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jo{constructor(e,n){this.position=e,this.inclusive=n}}function hB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?q.comparator(q.fromName(s.referenceValue),n.key):Uo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function fB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}class yh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class pB{}class Re extends pB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Nde(e,n,r):"array-contains"===n?new Ode(e,r):"in"===n?new IB(e,r):"not-in"===n?new Vde(e,r):"array-contains-any"===n?new Lde(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new xde(e,r):new kde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&void 0===n.nullValue&&this.matchesComparison(Uo(n,this.value)):null!==n&&Fo(this.value)===Fo(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends pB{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Je(e,n)}matches(e){return Tu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Tu(t){return"and"===t.op}function oC(t){return function gB(t){for(const e of t.filters)if(e instanceof Je)return!1;return!0}(t)&&Tu(t)}function sC(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+wu(t.value);if(oC(t))return t.filters.map(e=>sC(e)).join(",");{const e=t.filters.map(n=>sC(n)).join(",");return`${t.op}(${e})`}}function mB(t,e){return t instanceof Re?(r=t,(i=e)instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&ai(r.value,i.value)):t instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&mB(s,i.filters[a]),!0)}(t,e):void Q(19439);var r,i}function yB(t){return t instanceof Re?`${(n=t).field.canonicalString()} ${n.op} ${wu(n.value)}`:t instanceof Je?function(n){return n.op.toString()+" {"+n.getFilters().map(yB).join(" ,")+"}"}(t):"Filter";var n}class Nde extends Re{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class xde extends Re{constructor(e,n){super(e,"in",n),this.keys=vB(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kde extends Re{constructor(e,n){super(e,"not-in",n),this.keys=vB(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vB(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Ode extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mh(n)&&gh(n.arrayValue,this.value)}}class IB extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&gh(this.value.arrayValue,n)}}class Vde extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&void 0===n.nullValue&&!gh(this.value.arrayValue,n)}}class Lde extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gh(this.value.arrayValue,r))}}class Fde{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function aC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Fde(t,e,n,r,i,o,s)}function ga(t){const e=G(t);if(null===e.Pe){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wu(r)).join(",")),e.Pe=n}return e.Pe}function vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fB(t.startAt,e.startAt)&&fB(t.endAt,e.endAt)}function h_(t){return q.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class $i{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null}}function bu(t){return new $i(t)}function bB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function cC(t){return null!==t.collectionGroup}function Cu(t){const e=G(t);if(null===e.Te){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(_t.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new yh(o,r))}),n.has(_t.keyField().canonicalString())||e.Te.push(new yh(_t.keyField(),r))}return e.Te}function wn(t){const e=G(t);return e.Ie||(e.Ie=function SB(t,e){if("F"===t.limitType)return aC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new yh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new jo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jo(t.startAt.position,t.startAt.inclusive):null;return aC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Cu(t))),e.Ie}function uC(t,e){const n=t.filters.concat([e]);return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p_(t,e,n){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ih(t,e){return vh(wn(t),wn(e))&&t.limitType===e.limitType}function AB(t){return`${ga(wn(t))}|lt:${t.limitType}`}function Su(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yB(i)).join(", ")}]`),oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wu(i)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function Eh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Cu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=hB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Cu(r),i)||r.endAt&&!function(s,a,c){const u=hB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Cu(r),i)));var r,i}function RB(t){return(e,n)=>{let r=!1;for(const i of Cu(t)){const o=Ude(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Ude(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Uo(c,u):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}class Hi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Qj(this.inner)}size(){return this.innerSize}}const jde=new ct(q.comparator);function ir(){return jde}const MB=new ct(q.comparator);function wh(...t){let e=MB;for(const n of t)e=e.insert(n.key,n);return e}function PB(t){let e=MB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return Th()}function NB(){return Th()}function Th(){return new Hi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Bde=new ct(q.comparator),$de=new Ye(q.comparator);function Te(...t){let e=$de;for(const n of t)e=e.add(n);return e}const Hde=new Ye(ue);function dC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function xB(t){return{integerValue:""+t}}function kB(t,e){return function xj(t){return"number"==typeof t&&Number.isInteger(t)&&!sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?xB(e):dC(t,e)}class g_{constructor(){this._=void 0}}function zde(t,e,n){return t instanceof Au?function(i,o){const s={fields:{[Xj]:{stringValue:Zj},[tB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&s_(o)&&(o=a_(o)),o&&(s.fields[eB]=o),{mapValue:s}}(n,e):t instanceof ma?VB(t,e):t instanceof _a?LB(t,e):function(i,o){const s=OB(i,o),a=FB(s)+FB(i.Ee);return rC(s)&&rC(i.Ee)?xB(a):dC(i.serializer,a)}(t,e)}function qde(t,e,n){return t instanceof ma?VB(t,e):t instanceof _a?LB(t,e):n}function OB(t,e){return t instanceof Du?rC(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Au extends g_{}class ma extends g_{constructor(e){super(),this.elements=e}}function VB(t,e){const n=UB(e);for(const r of t.elements)n.some(i=>ai(i,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends g_{constructor(e){super(),this.elements=e}}function LB(t,e){let n=UB(e);for(const r of t.elements)n=n.filter(i=>!ai(i,r));return{arrayValue:{values:n}}}class Du extends g_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function FB(t){return yt(t.integerValue||t.doubleValue)}function UB(t){return mh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class bh{constructor(e,n){this.field=e,this.transform=n}}class Wde{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class __{}function jB(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Mu(t.key,vt.none()):new Ru(t.key,t.data,vt.none());{const n=t.data,r=dn.empty();let i=new Ye(_t.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new zi(t.key,r,new rr(i.toArray()),vt.none())}}function Kde(t,e,n){t instanceof Ru?function(i,o,s){const a=i.value.clone(),c=HB(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,o,s){if(!m_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=HB(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll($B(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ch(t,e,n,r){return t instanceof Ru?function(o,s,a,c){if(!m_(o.precondition,s))return a;const u=o.value.clone(),d=zB(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(o,s,a,c){if(!m_(o.precondition,s))return a;const u=zB(o.fieldTransforms,c,s),d=s.data;return d.setAll($B(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,m_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Qde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=OB(r.transform,i||null);null!=o&&(null===n&&(n=dn.empty()),n.set(r.field,o))}return n||null}function BB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&du(r,i,(o,s)=>function Gde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ma&&i instanceof ma||r instanceof _a&&i instanceof _a?du(r.elements,i.elements,ai):r instanceof Du&&i instanceof Du?ai(r.Ee,i.Ee):r instanceof Au&&i instanceof Au);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Ru extends __{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends __{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $B(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function HB(t,e,n){const r=new Map;ee(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qde(s,a,n[i]))}return r}function zB(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,zde(o,s,e))}return r}class Mu extends __{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hC extends __{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Kde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ch(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ch(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=jB(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,(n,r)=>BB(n,r))&&du(this.baseMutations,e.baseMutations,(n,r)=>BB(n,r))}}class pC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Bde}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new pC(e,n,r,i)}}class gC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yde{constructor(e,n){this.count=e,this.unchangedNames=n}}var zt,Oe;function WB(t){if(void 0===t)return Ot("GRPC error has no .code"),N.UNKNOWN;switch(t){case zt.OK:return N.OK;case zt.CANCELLED:return N.CANCELLED;case zt.UNKNOWN:return N.UNKNOWN;case zt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case zt.INTERNAL:return N.INTERNAL;case zt.UNAVAILABLE:return N.UNAVAILABLE;case zt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case zt.NOT_FOUND:return N.NOT_FOUND;case zt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case zt.ABORTED:return N.ABORTED;case zt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case zt.DATA_LOSS:return N.DATA_LOSS;default:return Q(39323,{code:t})}}(Oe=zt||(zt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";const Jde=new Po([4294967295,4294967295],0);function KB(t){const e=Lb().encode(t),n=new cj;return n.update(e),new Uint8Array(n.digest())}function QB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([n,r],0),new Po([i,o],0)]}class mC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Sh(`Invalid padding: ${n}`);if(r<0)throw new Sh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Sh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Sh(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Po.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Po.fromNumber(r)));return 1===i.compare(Jde)&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const n=KB(e),[r,i]=QB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.fe)return;const n=KB(e),[r,i]=QB(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Sh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ah{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(re.min(),i,new ct(ue),ir(),Te())}}class Dh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dh(r,n,Te(),Te(),Te())}}class v_{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class YB{constructor(e,n){this.targetId=e,this.De=n}}class JB{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZB{constructor(){this.ve=0,this.Ce=XB(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Te(),n=Te(),r=Te();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Dh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=XB()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Zde{constructor(e){this.We=e,this.Ge=new Map,this.ze=ir(),this.je=I_(),this.Je=I_(),this.He=new ct(ue)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(h_(o))if(0===r){const s=new q(o.path);this.Xe(n,s,dt.newNoDocument(s,re.min()))}else ee(1===r,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),c=a?this.ut(a,e,s):1;0!==c&&(this.rt(n),this.He=this.He.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Bi(r).toUint8Array()}catch(c){if(c instanceof Jj)return Bn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mC(s,i,o)}catch(c){return Bn(c instanceof Sh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.fe?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&h_(a.target)){const c=new q(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,dt.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Te();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.st(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new Ah(e,n,this.He,this.ze,r);return this.ze=ir(),this.je=I_(),this.Je=I_(),this.He=new ct(ue),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new ZB,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ye(ue),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ye(ue),this.je=this.je.insert(e,n)),n}nt(e){const n=null!==this.st(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ZB),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function I_(){return new ct(q.comparator)}function XB(){return new ct(q.comparator)}const Xde={asc:"ASCENDING",desc:"DESCENDING"},ehe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},the={and:"AND",or:"OR"};class nhe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _C(t,e){return t.useProto3Json||oh(e)?e:{value:e}}function Pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rhe(t,e){return Pu(t,e.toTimestamp())}function Vt(t){return ee(!!t,49232),re.fromTimestamp(function(n){const r=ji(n);return new Qe(r.seconds,r.nanos)}(t))}function yC(t,e){return vC(t,e).canonicalString()}function vC(t,e){const n=(i=t,new Ce(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function t$(t){const e=Ce.fromString(t);return ee(d$(e),10190,{key:e.toString()}),e}function Rh(t,e){return yC(t.databaseId,e.path)}function ui(t,e){const n=t$(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(i$(n))}function n$(t,e){return yC(t.databaseId,e)}function IC(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i$(t){return ee(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function o$(t,e,n){return{name:Rh(t,e),fields:n.value.mapValue.fields}}function s$(t,e){return{documents:[n$(t,e.path)]}}function w_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=n$(t,i);const o=function(u){if(0!==u.length)return l$(Je.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Bo((f=d).field),direction:che(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=_C(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i};var u}function c$(t){let e=function r$(t){const e=t$(t);return 4===e.length?Ce.emptyPath():i$(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(1===r,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const f=u$(h);return f instanceof Je&&oC(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(f=>{return new yh(Nu((_=f).field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let f;return f="object"==typeof h?h.value:h,oh(f)?null:f}(n.limit));let c=null;var h;n.startAt&&(c=new jo((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new jo(h.values||[],!h.before)}(n.endAt)),function TB(t,e,n,r,i,o,s,a){return new $i(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function u$(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nu(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nu(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Nu(n.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Nu(n.unaryFilter.field);return Re.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):void 0!==t.fieldFilter?Re.create(Nu((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Je.create(n.compositeFilter.filters.map(r=>u$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t});var n}function che(t){return Xde[t]}function uhe(t){return ehe[t]}function lhe(t){return the[t]}function Bo(t){return{fieldPath:t.canonicalString()}}function Nu(t){return _t.fromServerFormat(t.fieldPath)}function l$(t){return t instanceof Re?function(n){if("=="===n.op){if(sB(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(oB(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(sB(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(oB(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:uhe(n.op),value:n.value}}}(t):t instanceof Je?function(n){const r=n.getFilters().map(i=>l$(i));return 1===r.length?r[0]:{compositeFilter:{op:lhe(n.op),filters:r}}}(t):Q(54877,{filter:t})}function dhe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class qi{constructor(e,n,r,i,o=re.min(),s=re.min(),a=Mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h${constructor(e){this.gt=e}}function b_(t){const e=c$({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?p_(e,e.limit,"L"):e}class Ea{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),sh(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),"string"==typeof r&&(r=ji(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Bi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?aB(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):d_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=Eu,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Ct(n,15),n.Ft(yt(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}Ea.Ut=new Ea;class Ihe{constructor(){this.Dn=new AC}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(dr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class AC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ce.comparator)).toArray()}}new Uint8Array(0);const R$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(41943040,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);class Ta{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ta(0)}static ur(){return new Ta(-1)}}const O$="LruGarbageCollector";function L$([t,e],[n,r]){const i=ue(t,n);return 0===i?ue(e,r):i}class The{constructor(e){this.Tr=e,this.buffer=new Ye(L$),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();L$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class F${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){var n=this;j(O$,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,v(function*(){n.Ar=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){ko(r)?j(O$,"Ignoring IndexedDB error during garbage collection: ",r):yield xo(r)}yield n.Rr(3e5)}))}}class bhe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return P.resolve(fr.ue);const r=new The(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(R$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R$):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),lu()<=De.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-d}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${h} documents in `+(u-c)+`ms\nTotal Duration: ${u-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}class j${constructor(){this.changes=new Hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dhe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class q${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ch(r.mutation,i,rr.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=wh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ir();const s=Th(),a=Th();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof zi)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),Ch(d.mutation,u,d.mutation.getFieldMask(),Qe.now())):s.set(u.key,rr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new Dhe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Th();let i=new ct((s,a)=>s-a),o=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||rr.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||Te()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=NB();d.forEach(f=>{if(!o.has(f)){const g=jB(n.get(f),r.get(f));null!==g&&h.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return q.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):cC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(ci());let a=-1,c=o;return s.next(u=>P.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Te())).next(d=>({batchId:a,changes:PB(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=wh();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,c=>{const u=(h=n,f=c.child(o),new $i(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,f;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,dt.newInvalidDocument(d)))});let a=wh();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&Ch(d.mutation,u,rr.empty(),Qe.now()),Eh(n,u)&&(a=a.insert(c,u))}),a})}}class Rhe{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,{id:(i=n).id,version:i.version,createTime:Vt(i.createTime)}),P.resolve();var i}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,{name:(i=n).name,query:b_(i.bundledQuery),readTime:Vt(i.readTime)}),P.resolve();var i}}class Mhe{constructor(){this.overlays=new ct(q.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ci();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=ci(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ct((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=ci(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=ci(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gC(n,r));let o=this.kr.get(n);void 0===o&&(o=Te(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}class Phe{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}class DC{constructor(){this.qr=new Ye(tn.Qr),this.$r=new Ye(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new Ce([])),r=new tn(n,e),i=new tn(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new Ce([])),r=new tn(n,e),i=new tn(n,e+1);let o=Te();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new tn(e,0),r=this.qr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ue(e.Hr,n.Hr)}static Ur(e,n){return ue(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}class Nhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ye(tn.Qr)}checkEmpty(e){return P.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.er;this.er++;const s=new fC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new tn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Xr(n+1),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ue);return n.forEach(i=>{const o=new tn(i,0),s=new tn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const s=new tn(new q(o),0);let a=new Ye(ue);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){ee(0===this.ti(n.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{const o=new tn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new tn(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class xhe{constructor(e){this.ni=e,this.docs=new ct(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ir();const s=n.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Hb(Dj(d),r)<=0||(i.has(d.key)||Eh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new khe(this)}getSize(e){return P.resolve(this.size)}}class khe extends j${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}class Ohe{constructor(e){this.persistence=e,this.ii=new Hi(n=>ga(n),vh),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new DC,this.targetCount=0,this._i=Ta.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ta(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}}class RC{constructor(e,n){this.ai={},this.overlays={},this.ui=new fr(0),this.ci=!1,this.ci=!0,this.li=new Phe,this.referenceDelegate=e(this),this.hi=new Ohe(this),this.indexManager=new Ihe,this.remoteDocumentCache=new xhe(r=>this.referenceDelegate.Pi(r)),this.serializer=new h$(n),this.Ti=new Rhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Nhe(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new Vhe(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Vhe extends Mj{constructor(e){super(),this.currentSequenceNumber=e}}class N_{constructor(e){this.persistence=e,this.Ai=new DC,this.Ri=null}static Vi(e){return new N_(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class x_{constructor(e,n){this.persistence=e,this.gi=new Hi(r=>function En(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kj(e)),e=tde(t.get(n),e);return kj(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function U$(t,e){return new bhe(t,e)}(this,n)}static Vi(e,n){return new x_(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=u_(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return P.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class OC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Te(),i=Te();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new OC(e,n.fromCache,r,i)}}class Fhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class K${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=UU()?8:function Pj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(kt())>0?6:4}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Fhe;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(lu()<=De.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Su(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(lu()<=De.DEBUG&&j("QueryEngine","Query:",Su(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(lu()<=De.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Su(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):P.resolve())}ps(e,n){if(bB(n))return P.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=p_(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Te(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,p_(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return bB(n)||i.isEqual(re.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(lu()<=De.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Su(n)),this.vs(e,s,n,function Aj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(1e9===r?new Qe(n+1,0):new Qe(n,r));return new dr(i,q.empty(),e)}(i,-1)).next(a=>a))})}bs(e,n){let r=new Ye(RB(e));return n.forEach((i,o)=>{Eh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return lu()<=De.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Su(n)),this.gs.getDocumentsMatchingQuery(e,n,dr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}const VC="LocalStore";class jhe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ct(ue),this.Ms=new Hi(o=>ga(o),vh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Y$(t,e){return LC.apply(this,arguments)}function LC(){return(LC=v(function*(t,e){const n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=Te();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function J$(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Hhe(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uu(t,e,n){return FC.apply(this,arguments)}function FC(){return(FC=v(function*(t,e,n){const r=G(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ko(s))throw s;j(VC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})).apply(this,arguments)}function O_(t,e,n){const r=G(t);let i=re.min(),o=Te();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=G(c),f=h.Ms.get(d);return void 0!==f?P.resolve(h.Fs.get(f)):h.hi.getTargetData(u,d)}(r,s,wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:Te())).next(a=>(function tH(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}(r,function DB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,qs:o})))}class HC{constructor(){this.activeTargetIds=function lC(){return Hde}()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aH{constructor(){this.Fo=new HC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new HC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ghe{xo(e){}shutdown(){}}const cH="ConnectivityMonitor";class uH{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(cH,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){j(cH,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let F_=null;function qC(){return null===F_?F_=268435456+Math.round(2147483648*Math.random()):F_++,"0x"+F_.toString(16)}const GC="RestConnection",Whe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Khe{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ph?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=qC(),a=this.Go(e,n.toUriEncodedString());j(GC,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:u}=new URL(a),d=su(u);return this.jo(e,a,c,r,d).then(h=>(j(GC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Bn(GC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+uu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){return`${this.$o}/v1/${n}:${Whe[e]}`}terminate(){}}class Qhe{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const bn="WebChannelConnection";class Yhe extends Khe{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=qC();return new Promise((a,c)=>{const u=new uj;u.setWithCredentials(!0),u.listenOnce(lj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Km.NO_ERROR:const h=u.getResponseJson();j(bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Km.TIMEOUT:j(bn,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const f=u.getStatus();if(j(bn,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const I=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(D)>=0?D:N.UNKNOWN}(_.status);c(new L(I,_.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{j(bn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);j(bn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=qC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fj(),a=hj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(bn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);this.T_(h);let f=!1,g=!1;const _=new Qhe({Ho:w=>{g?j(bn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(j(bn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(bn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Yo:()=>h.close()}),I=(w,A,D)=>{w.listen(A,F=>{try{D(F)}catch(K){setTimeout(()=>{throw K},0)}})};return I(h,nh.EventType.OPEN,()=>{g||(j(bn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),I(h,nh.EventType.CLOSE,()=>{g||(g=!0,j(bn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),I(h,nh.EventType.ERROR,w=>{g||(g=!0,Bn(bn,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),_.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),I(h,nh.EventType.MESSAGE,w=>{var A;if(!g){const D=w.data[0];ee(!!D,16349);const F=D,K=F?.error||(null===(A=F[0])||void 0===A?void 0:A.error);if(K){j(bn,`RPC '${e}' stream ${i} received error:`,K);const Y=K.status;let ie=function(T){const S=zt[T];if(void 0!==S)return WB(S)}(Y),C=K.message;void 0===ie&&(ie=N.INTERNAL,C="Unknown error status: "+Y+" with message "+K.message),g=!0,_.__(new L(ie,C)),h.close()}else j(bn,`RPC '${e}' stream ${i} received:`,D),_.a_(D)}}),I(a,dj.STAT_EVENT,w=>{w.stat===kb.PROXY?j(bn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===kb.NOPROXY&&j(bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function U_(){return typeof document<"u"?document:null}function Ca(t){return new nhe(t,!0)}class WC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const dH="PersistentStream";class hH{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WC(e,n)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}stop(){var e=this;return v(function*(){e.M_()&&(yield e.close(0))})()}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){var e=this;return v(function*(){if(e.x_())return e.close(0)})()}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){var r=this;return v(function*(){r.q_(),r.Q_(),r.F_.cancel(),r.b_++,4!==e?r.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),r.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.U_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.n_(n)})()}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.C_?this.j_(i):this.onNext(i))})}O_(){var e=this;this.state=5,this.F_.g_(v(function*(){e.state=0,e.start()}))}G_(e){return j(dH,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(dH,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jhe extends hH{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=function ohe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Q(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ee(void 0===d||"string"==typeof d,58123),Mt.fromBase64String(d||"")):(ee(void 0===d||d instanceof Buffer||d instanceof Uint8Array,16193),Mt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:WB(u.code);return new L(d,u.message||"")}(s);n=new JB(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ui(t,r.document.name),o=Vt(r.document.updateTime),s=r.document.createTime?Vt(r.document.createTime):re.min(),a=new dn({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(i,o,s,a);n=new v_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ui(t,r.document),o=r.readTime?Vt(r.readTime):re.min(),s=dt.newNoDocument(i,o);n=new v_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=ui(t,r.document);n=new v_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Yde(i,o);n=new YB(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Vt(s.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=IC(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=h_(c)?{documents:s$(o,c)}:{query:w_(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=e$(o,s.resumeToken);const u=_C(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=Pu(o,s.snapshotVersion.toTimestamp());const u=_C(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function ahe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=IC(this.serializer),n.removeTarget=e,this.k_(n)}}class Zhe extends hH{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=function she(t,e){return t&&t.length>0?(ee(void 0!==e,14353),t.map(n=>function(i,o){let s=Vt(i.updateTime?i.updateTime:o);return s.isEqual(re.min())&&(s=Vt(o)),new Wde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=IC(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Mh(t,e){let n;if(e instanceof Ru)n={update:o$(t,e.key,e.value)};else if(e instanceof Mu)n={delete:Rh(t,e.key)};else if(e instanceof zi)n={update:o$(t,e.key,e.data),updateMask:dhe(e.fieldMask)};else{if(!(e instanceof hC))return Q(16599,{Rt:e.type});n={verify:Rh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Au)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ma)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _a)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Du)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:rhe(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Q(27497)),n;var o}(this.serializer,r))};this.k_(n)}}class Xhe{}class efe extends Xhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,vC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,vC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class tfe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ot(n),this._a=!1):j("OnlineStateTracker",n)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Sa="RemoteStore";class nfe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(v(function*(){var c;Go(s)&&(j(Sa,"Restarting streams for network reachability change."),yield(c=v(function*(d){const h=G(d);h.Ia.add(4),yield ju(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield Fh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.Aa=new tfe(r,i)}}function Fh(t){return KC.apply(this,arguments)}function KC(){return(KC=v(function*(t){if(Go(t))for(const e of t.da)yield e(!0)})).apply(this,arguments)}function ju(t){return QC.apply(this,arguments)}function QC(){return(QC=v(function*(t){for(const e of t.da)yield e(!1)})).apply(this,arguments)}function j_(t,e){const n=G(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),ZC(n)?JC(n):Hu(n).x_()&&YC(n,e))}function Bu(t,e){const n=G(t),r=Hu(n);n.Ta.delete(e),r.x_()&&fH(n,e),0===n.Ta.size&&(r.x_()?r.B_():Go(n)&&n.Aa.set("Unknown"))}function YC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).H_(e)}function fH(t,e){t.Ra.$e(e),Hu(t).Y_(e)}function JC(t){t.Ra=new Zde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.Aa.aa()}function ZC(t){return Go(t)&&!Hu(t).M_()&&t.Ta.size>0}function Go(t){return 0===G(t).Ia.size}function pH(t){t.Ra=void 0}function rfe(t){return XC.apply(this,arguments)}function XC(){return(XC=v(function*(t){t.Aa.set("Online")})).apply(this,arguments)}function ife(t){return eS.apply(this,arguments)}function eS(){return(eS=v(function*(t){t.Ta.forEach((e,n)=>{YC(t,e)})})).apply(this,arguments)}function ofe(t,e){return tS.apply(this,arguments)}function tS(){return(tS=v(function*(t,e){pH(t),ZC(t)?(t.Aa.la(e),JC(t)):t.Aa.set("Unknown")})).apply(this,arguments)}function sfe(t,e,n){return nS.apply(this,arguments)}function nS(){return nS=v(function*(t,e,n){if(t.Aa.set("Online"),e instanceof JB&&2===e.state&&e.cause)try{yield(r=v(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield B_(t,r)}else if(e instanceof v_?t.Ra.Ye(e):e instanceof YB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{const r=yield J$(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Mt.EMPTY_BYTE_STRING,d.snapshotVersion)),fH(o,c);const h=new qi(d.target,c,u,d.sequenceNumber);YC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j(Sa,"Failed to raise snapshot:",r),yield B_(t,r)}var r}),nS.apply(this,arguments)}function B_(t,e,n){return rS.apply(this,arguments)}function rS(){return(rS=v(function*(t,e,n){if(!ko(e))throw e;t.Ia.add(1),yield ju(t),t.Aa.set("Offline"),n||(n=()=>J$(t.localStore)),t.asyncQueue.enqueueRetryable(v(function*(){j(Sa,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Fh(t)}))})).apply(this,arguments)}function gH(t,e){return e().catch(n=>B_(t,n,e))}function $u(t){return iS.apply(this,arguments)}function iS(){return(iS=v(function*(t){const e=G(t),n=Wo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:-1;for(;afe(e);)try{const i=yield Hhe(e.localStore,r);if(null===i){0===e.Pa.length&&n.B_();break}r=i.batchId,cfe(e,i)}catch(i){yield B_(e,i)}mH(e)&&_H(e)})).apply(this,arguments)}function afe(t){return Go(t)&&t.Pa.length<10}function cfe(t,e){t.Pa.push(e);const n=Wo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function mH(t){return Go(t)&&!Wo(t).M_()&&t.Pa.length>0}function _H(t){Wo(t).start()}function ufe(t){return oS.apply(this,arguments)}function oS(){return(oS=v(function*(t){Wo(t).na()})).apply(this,arguments)}function lfe(t){return sS.apply(this,arguments)}function sS(){return(sS=v(function*(t){const e=Wo(t);for(const n of t.Pa)e.X_(n.mutations)})).apply(this,arguments)}function dfe(t,e,n){return aS.apply(this,arguments)}function aS(){return(aS=v(function*(t,e,n){const r=t.Pa.shift(),i=pC.from(r,e,n);yield gH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield $u(t)})).apply(this,arguments)}function hfe(t,e){return cS.apply(this,arguments)}function cS(){return cS=v(function*(t,e){var n;e&&Wo(t).Z_&&(yield(n=v(function*(i,o){if(function GB(t){switch(t){case N.OK:return Q(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}(a=o.code)&&a!==N.ABORTED){const s=i.Pa.shift();Wo(i).N_(),yield gH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield $u(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),mH(t)&&_H(t)}),cS.apply(this,arguments)}function yH(t,e){return uS.apply(this,arguments)}function uS(){return(uS=v(function*(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),j(Sa,"RemoteStore received new credentials");const r=Go(n);n.Ia.add(3),yield ju(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Fh(n)})).apply(this,arguments)}function lS(t,e){return dS.apply(this,arguments)}function dS(){return(dS=v(function*(t,e){const n=G(t);e?(n.Ia.delete(2),yield Fh(n)):e||(n.Ia.add(2),yield ju(n),n.Aa.set("Unknown"))})).apply(this,arguments)}function Hu(t){return t.Va||(t.Va=function(n,r,i){const o=G(n);return o.ia(),new Jhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:rfe.bind(null,t),e_:ife.bind(null,t),n_:ofe.bind(null,t),J_:sfe.bind(null,t)}),t.da.push(function(){var e=v(function*(n){n?(t.Va.N_(),ZC(t)?JC(t):t.Aa.set("Unknown")):(yield t.Va.stop(),pH(t))});return function(n){return e.apply(this,arguments)}}())),t.Va}function Wo(t){return t.ma||(t.ma=function(n,r,i){const o=G(n);return o.ia(),new Zhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:ufe.bind(null,t),n_:hfe.bind(null,t),ea:lfe.bind(null,t),ta:dfe.bind(null,t)}),t.da.push(function(){var e=v(function*(n){n?(t.ma.N_(),yield $u(t)):(yield t.ma.stop(),t.Pa.length>0&&(j(Sa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))});return function(n){return e.apply(this,arguments)}}())),t.ma}class hS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new hS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zu(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),ko(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=wh(),this.sortedSet=new ct(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class vH{constructor(){this.fa=new ct(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(n,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(n):1===e.type&&2===r.type?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Da{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Da(e,n,Aa.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ffe{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class pfe{constructor(){this.queries=IH(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(n,r){const i=G(n),o=i.queries;i.queries=IH(),o.forEach((s,a)=>{for(const c of a.wa)c.onError(r)})}(this,new L(N.ABORTED,"Firestore shutting down"))}}function IH(){return new Hi(t=>AB(t),Ih)}function fS(t,e){return pS.apply(this,arguments)}function pS(){return(pS=v(function*(t,e){const n=G(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new ffe,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=zu(s,`Initialization of query '${Su(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&_S(n)})).apply(this,arguments)}function gS(t,e){return mS.apply(this,arguments)}function mS(){return(mS=v(function*(t,e){const n=G(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),0===o.wa.length?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function gfe(t,e){const n=G(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&_S(n)}function mfe(t,e,n){const r=G(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function _S(t){t.Da.forEach(e=>{e.next()})}var yS,EH;(EH=yS||(yS={})).Fa="default",EH.Cache="cache";class vS{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){return!e.fromCache||!this.ba()||(!this.options.ka||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Na(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}La(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yS.Cache}}class CH{constructor(e){this.key=e}}class SH{constructor(e){this.key=e}}class AH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Te(),this.mutatedKeys=Te(),this.Xa=RB(e),this.eu=new Aa(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new vH,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=Eh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?_!==I&&(r.track({type:3,doc:g}),w=!0):this.iu(f,g)||(r.track({type:2,doc:g}),w=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(g?(s=s.add(g),o=I?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,h)=>function(g,_){const I=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:w})}};return I(g)-I(_)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=null!=i&&i;const a=n&&!i?this.ou():[],c=0===this.Za.size&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,0!==s.length||u?{snapshot:new Da(this.query,e.eu,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vH,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Te(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new SH(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new CH(r))}),n}uu(e){this.Ha=e.qs,this.Za=Te();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Da.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Ko="SyncEngine";class _fe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yfe{constructor(e){this.key=e,this.lu=!1}}class vfe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Hi(a=>AB(a),Ih),this.Tu=new Map,this.Iu=new Set,this.du=new ct(q.comparator),this.Eu=new Map,this.Au=new DC,this.Ru={},this.Vu=new Map,this.mu=Ta.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function Ife(t,e){return ES.apply(this,arguments)}function ES(){return(ES=v(function*(t,e,n=!0){const r=$_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield DH(r,e,n,!0),i})).apply(this,arguments)}function Efe(t,e){return wS.apply(this,arguments)}function wS(){return(wS=v(function*(t,e){const n=$_(t);yield DH(n,e,!0,!1)})).apply(this,arguments)}function DH(t,e,n,r){return TS.apply(this,arguments)}function TS(){return(TS=v(function*(t,e,n,r){const i=yield function Fu(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new qi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}(t.localStore,wn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function bS(t,e,n,r,i){return CS.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&j_(t.remoteStore,i),a})).apply(this,arguments)}function CS(){return CS=v(function*(t,e,n,r,i){t.gu=(h,f,g)=>{return(_=v(function*(w,A,D,F){let K=A.view.nu(D);K.Ds&&(K=yield O_(w.localStore,A.query,!1).then(({documents:E})=>A.view.nu(E,K)));const Y=F&&F.targetChanges.get(A.targetId),ie=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges(K,w.isPrimaryClient,Y,ie);return VS(w,A.targetId,C._u),C.snapshot}),function I(w,A,D,F){return _.apply(this,arguments)})(t,h,f,g);var _};const o=yield O_(t.localStore,e,!0),s=new AH(e,o.qs),a=s.nu(o.documents),c=Dh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);VS(t,n,u._u);const d=new _fe(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}),CS.apply(this,arguments)}function wfe(t,e,n){return SS.apply(this,arguments)}function SS(){return(SS=v(function*(t,e,n){const r=G(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Ih(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Uu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bu(r.remoteStore,i.targetId),qu(r,i.targetId)}).catch(xo))):(qu(r,i.targetId),yield Uu(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Tfe(t,e){return AS.apply(this,arguments)}function AS(){return(AS=v(function*(t,e){const n=G(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bu(n.remoteStore,r.targetId))})).apply(this,arguments)}function DS(){return(DS=v(function*(t,e,n){const r=function WS(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Afe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=G(s),u=Qe.now(),d=a.reduce((g,_)=>g.add(_.key),Te());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=ir(),I=Te();return c.Os.getEntries(g,d).next(w=>{_=w,_.forEach((A,D)=>{D.isValidDocument()||(I=I.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(w=>{h=w;const A=[];for(const D of a){const F=Qde(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new zi(D.key,F,dB(F.value.mapValue),vt.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(w=>{f=w;const A=w.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(g,w.batchId,A)})}).then(()=>({batchId:f.batchId,changes:PB(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new ct(ue)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Gi(r,i.changes),yield $u(r.remoteStore)}catch(i){const o=zu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function RH(t,e){return RS.apply(this,arguments)}function RS(){return(RS=v(function*(t,e){const n=G(t);try{const r=yield function $he(t,e){const n=G(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,h)));let g=f.withSequenceNumber(o.currentSequenceNumber);var I,w,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(Mt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),w=g,A=d,(0===(I=f).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.hi.updateTargetData(o,g))});let c=ir(),u=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function Z$(t,e,n){let r=Te(),i=Te();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ir();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(VC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(re.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(h=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ee(s.lu,14607):i.removedDocuments.size>0&&(ee(s.lu,42227),s.lu=!1))}),yield Gi(n,r,e)}catch(r){yield xo(r)}})).apply(this,arguments)}function MH(t,e,n){const r=G(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=G(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)}),u&&_S(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Cfe(t,e,n){return MS.apply(this,arguments)}function MS(){return(MS=v(function*(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ct(q.comparator);s=s.insert(o,dt.newNoDocument(o,re.min()));const a=Te().add(o),c=new Ah(re.min(),new Map,new ct(ue),s,a);yield RH(r,c),r.du=r.du.remove(o),r.Eu.delete(e),LS(r)}else yield Uu(r.localStore,e,!1).then(()=>qu(r,e,n)).catch(xo)})).apply(this,arguments)}function Sfe(t,e){return PS.apply(this,arguments)}function PS(){return(PS=v(function*(t,e){const n=G(t),r=e.batch.batchId;try{const i=yield function Bhe(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,f=h.keys();let g=P.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(I=>{const w=u.docVersions.get(_);ee(null!==w,48541),I.version.compareTo(w)<0&&(h.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);OS(n,r,null),kS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Gi(n,i)}catch(i){yield xo(i)}})).apply(this,arguments)}function Afe(t,e,n){return NS.apply(this,arguments)}function NS(){return(NS=v(function*(t,e,n){const r=G(t);try{const i=yield function(s,a){const c=G(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(ee(null!==h,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);OS(r,e,n),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Gi(r,i)}catch(i){yield xo(i)}})).apply(this,arguments)}function kS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function OS(t,e,n){const r=G(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function qu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||PH(t,r)})}function PH(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);null!==n&&(Bu(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),LS(t))}function VS(t,e,n){for(const r of n)r instanceof CH?(t.Au.addReference(r.key,e),Rfe(t,r)):r instanceof SH?(j(Ko,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||PH(t,r.key)):Q(19791,{yu:r})}function Rfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(Ko,"New document in limbo: "+n),t.Iu.add(r),LS(t))}function LS(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new yfe(n)),t.du=t.du.insert(n,r),j_(t.remoteStore,new qi(wn(bu(n.path)),r,"TargetPurposeLimboResolution",fr.ue))}}function Gi(t,e,n){return FS.apply(this,arguments)}function FS(){return FS=v(function*(t,e,n){const r=G(t),i=[],o=[],s=[];var a;r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=OC.Es(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(a=v(function*(u,d){const h=G(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(d,g=>P.forEach(g.Is,_=>h.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>P.forEach(g.ds,_=>h.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!ko(f))throw f;j(VC,"Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const _=h.Fs.get(g),w=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.Fs=h.Fs.insert(g,w)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),FS.apply(this,arguments)}function Mfe(t,e){return US.apply(this,arguments)}function US(){return(US=v(function*(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){j(Ko,"User change. New user:",e.toKey());const r=yield Y$(n.localStore,e);n.currentUser=e,(o=n).Vu.forEach(a=>{a.forEach(c=>{c.reject(new L(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Vu.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gi(n,r.Bs)}var o})).apply(this,arguments)}function Pfe(t,e){const n=G(t),r=n.Eu.get(e);if(r&&r.lu)return Te().add(r.key);{let i=Te();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function $_(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cfe.bind(null,e),e.hu.J_=gfe.bind(null,e.eventManager),e.hu.pu=mfe.bind(null,e.eventManager),e}let H_=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return v(function*(){r.serializer=Ca(n.databaseInfo.databaseId),r.sharedClientState=r.bu(n),r.persistence=r.Du(n),yield r.persistence.start(),r.localStore=r.vu(n),r.gcScheduler=r.Cu(n,r.localStore),r.indexBackfillerScheduler=r.Fu(n,r.localStore)})()}Cu(n,r){return null}Fu(n,r){return null}vu(n){return function Q$(t,e,n,r){return new jhe(t,e,n,r)}(this.persistence,new K$,n.initialUser,this.serializer)}Du(n){return new RC(N_.Vi,this.serializer)}bu(n){return new aH}terminate(){var n=this;return v(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class KS extends H_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){return ee(this.persistence.referenceDelegate instanceof x_,46915),new F$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Du(e){const n=void 0!==this.cacheSizeBytes?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new RC(r=>x_.Vi(r,n),this.serializer)}}let Gu=(()=>{class t{initialize(n,r){var i=this;return v(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>MH(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=Mfe.bind(null,i.syncEngine),yield lS(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new pfe}createDatastore(n){const r=Ca(n.databaseInfo.databaseId),i=new Yhe(n.databaseInfo);return new efe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>MH(this.syncEngine,r,0),c=uH.C()?new uH:new Ghe,new nfe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const f=new vfe(o,s,a,c,u,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return v(function*(){var r,i,o;yield(o=v(function*(a){const c=G(a);j(Sa,"RemoteStore shutting down."),c.Ia.add(5),yield ju(c),c.Ea.shutdown(),c.Aa.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Qo="FirestoreClient";class zfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xt.UNAUTHENTICATED,this.clientId=Fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=v(function*(c){j(Qo,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j(Qo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=zu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function YS(t,e){return JS.apply(this,arguments)}function JS(){return JS=v(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j(Qo,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=v(function*(o){r.isEqual(o)||(yield Y$(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>{Bn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Bn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}),JS.apply(this,arguments)}function VH(t,e){return ZS.apply(this,arguments)}function ZS(){return(ZS=v(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function XS(t){return eA.apply(this,arguments)}(t);j(Qo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function eA(){return(eA=v(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Qo,"Using user provided OfflineComponentProvider");try{yield YS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Bn("Error using user provided cache. Falling back to memory cache: "+e),yield YS(t,new H_)}}else j(Qo,"Using default OfflineComponentProvider"),yield YS(t,new KS(void 0));var i;return t._offlineComponents})).apply(this,arguments)}function q_(t){return tA.apply(this,arguments)}function tA(){return(tA=v(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Qo,"Using user provided OnlineComponentProvider"),yield VH(t,t._uninitializedComponentsProvider._online)):(j(Qo,"Using default OnlineComponentProvider"),yield VH(t,new Gu))),t._onlineComponents})).apply(this,arguments)}function Ku(t){return rA.apply(this,arguments)}function rA(){return(rA=v(function*(t){const e=yield q_(t),n=e.eventManager;return n.onListen=Ife.bind(null,e.syncEngine),n.onUnlisten=wfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Efe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Tfe.bind(null,e.syncEngine),n})).apply(this,arguments)}function HH(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const zH=new Map,qH="firestore.googleapis.com";class WH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qH,this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Kle(t,e,n,r){if(!0===e&&!0===r)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=HH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WH(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ule;switch(r.type){case"firstParty":return new Hle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return v(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zH.get(n);r&&(j("ComponentProvider","Removing Datastore"),zH.delete(n),r.terminate())}(this),Promise.resolve()}}class nn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nn(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sa(n,tt._jsonSchema))return new tt(e,r||null,new q(Ce.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:Ht("string",tt._jsonSchemaVersion),referencePath:Ht("string")};class di extends nn{constructor(e,n,r){super(e,n,bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new q(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function iA(t,e,...n){if(t=$t(t),Bb("collection","path",e),t instanceof Uh){const r=Ce.fromString(e,...n);return wj(r),new di(t,null,r)}{if(!(t instanceof tt||t instanceof di))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return wj(r),new di(t.firestore,null,r)}}function Qu(t,e,...n){if(t=$t(t),1===arguments.length&&(e=Fb.newId()),Bb("doc","path",e),t instanceof Uh){const r=Ce.fromString(e,...n);return Ej(r),new tt(t,null,new q(r))}{if(!(t instanceof tt||t instanceof di))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Ej(r),new tt(t.firestore,t instanceof di?t.converter:null,new q(r))}}const QH="AsyncQueue";class YH{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WC(this,"async_queue_retry"),this.oc=()=>{const r=U_();r&&j(QH,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=U_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=U_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new en;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){var e=this;return v(function*(){if(0!==e.Zu.length){try{yield e.Zu[0](),e.Zu.shift(),e.F_.reset()}catch(n){if(!ko(n))throw n;j(QH,"Operation failed with retryable error: "+n)}e.Zu.length>0&&e.F_.g_(()=>e.cc())}})()}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ot("INTERNAL UNHANDLED ERROR: ",JH(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=hS.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:JH(this.tc)})}verifyOperationInProgress(){}Pc(){var e=this;return v(function*(){let n;do{n=e._c,yield n}while(n!==e._c)})()}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function JH(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class it extends Uh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new YH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return v(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new YH(n),e._firestoreClient=void 0,yield n}})()}}function ipe(t,e){const n="object"==typeof t?t:ej(),r="string"==typeof t?t:e||ph,i=Gm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=PU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function npe(t,e,n,r={}){var i;t=Se(t,Uh);const o=su(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(OU(`https://${c}`),LU("Firestore",!0)),s.host!==qH&&s.host!==c&&Bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Vi(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Xt.MOCK_USER;else{d=function Yce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bm(JSON.stringify({alg:"none",type:"JWT"})),Bm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Xt(f)}t._authCredentials=new jle(new yj(d,h))}}(i,...o)}return i}function bt(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function ZH(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Dde(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,HH(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(Mt.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pr(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:Ht("string",pr._jsonSchemaVersion),bytes:Ht("string")};class Ra{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ma{constructor(e){this._methodName=e}}class hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(e){if(sa(e,hi._jsonSchema))return new hi(e.latitude,e.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Ht("string",hi._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>"number"==typeof n))return new jr(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:Ht("string",jr._jsonSchemaVersion),vectorValues:Ht("object")};const ape=/^__.*__$/;class cpe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}class t4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function n4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:t})}}class G_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new G_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Q_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(n4(this.Ec)&&ape.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class upe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ca(e)}Dc(e,n,r,i=!1){return new G_({Ec:e,methodName:n,bc:r,path:_t.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pa(t){const e=t._freezeSettings(),n=Ca(t._databaseId);return new upe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W_(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);hA("Data must be an object, but it was:",s,r);const a=o4(r,s);let c,u;if(o.merge)c=new rr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=$h(e,h,n);if(!s.contains(f))throw new L(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);a4(d,f)||d.push(f)}c=new rr(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new cpe(new dn(a),c,u)}class Bh extends Ma{_toFieldTransform(e){if(2!==e.Ec)throw e.wc(1===e.Ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class sA extends Ma{_toFieldTransform(e){return new bh(e.path,new Au)}isEqual(e){return e instanceof sA}}function Na(t,e){if(s4(t=$t(t)))return hA("Unsupported field value:",e,t),o4(t,e);if(t instanceof Ma)return function(r,i){if(!n4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&4!==e.Ec)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Na(a,i.yc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=$t(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return kB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Qe.fromDate(r);return{timestampValue:Pu(i.serializer,o)}}if(r instanceof Qe){const o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pu(i.serializer,o)}}if(r instanceof hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pr)return{bytesValue:e$(i.serializer,r._byteString)};if(r instanceof tt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jr)return s=r,a=i,{mapValue:{fields:{[eC]:{stringValue:tC},[Eu]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.wc("VectorValues must only contain numeric values.");return dC(a.serializer,u)})}}}}};var s,a;throw i.wc(`Unsupported field value: ${Qm(r)}`)}(t,e)}function o4(t,e){const n={};return Qj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(t,(r,i)=>{const o=Na(i,e.Vc(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function s4(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof hi||t instanceof pr||t instanceof tt||t instanceof Ma||t instanceof jr)}function hA(t,e,n){if(!s4(n)||!Tj(n)){const r=Qm(n);throw e.wc("an object"===r?t+" a custom object":t+" "+r)}}function $h(t,e,n){if((e=$t(e))instanceof Ra)return e._internalPath;if("string"==typeof e)return K_(t,e);throw Q_("Field path arguments must be of type string or ",t,!1,void 0,n)}const lpe=new RegExp("[~\\*/\\[\\]]");function K_(t,e,n){if(e.search(lpe)>=0)throw Q_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ra(...e.split("."))._internalPath}catch{throw Q_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Q_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(N.INVALID_ARGUMENT,a+t+c)}function a4(t,e){return t.some(n=>n.isEqual(e))}class Hh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Y_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class dpe extends Hh{data(){return super.data()}}function Y_(t,e){return"string"==typeof e?K_(t,e):e instanceof Ra?e._internalPath:e._delegate._internalPath}class fA{}class zh extends fA{}class qh extends zh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qh(e,n,r)}_apply(e){const n=this._parse(e);return h4(e._query,n),new nn(e.firestore,e.converter,uC(e._query,n))}_parse(e){const n=Pa(e.firestore);return function(o,s,a,c,u,d,h){let f;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){d4(h,d);const _=[];for(const I of h)_.push(l4(c,o,I));f={arrayValue:{values:_}}}else f=l4(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||d4(h,d),f=function i4(t,e,n,r=!1){return Na(n,t.Dc(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Re.create(u,d,f)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ju extends fA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ju(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)h4(s,c),s=uC(s,c)}(e._query,n),new nn(e.firestore,e.converter,uC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pA extends zh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pA(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yh(o,s)}(e._query,this._field,this._direction);return new nn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new $i(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function l4(t,e,n){if("string"==typeof(n=$t(n))){if(""===n)throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cC(e)&&-1!==n.indexOf("/"))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pa(t,new q(r))}if(n instanceof tt)return pa(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(n)}.`)}function d4(t,e){if(!Array.isArray(t)||0===t.length)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new L(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p4{convertValue(e,n="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n[Eu].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>yt(s.doubleValue));return new jr(o)}convertGeoPoint(e){return new hi(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=a_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);ee(d$(r),9688,{name:e});const i=new fa(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Ot(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function ey(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gr extends Hh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ty(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Y_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle="NOT SUPPORTED",n):n}}gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",gr._jsonSchema={type:Ht("string",gr._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class ty extends gr{data(e={}){return super.data(e)}}class mr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ty(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new ty(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new ty(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:gpe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fb.newId();const n=[],r=[],i=[];return this.docs.forEach(o=>{null!==o._document&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle="NOT SUPPORTED",e}}function gpe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}mr._jsonSchemaVersion="firestore/querySnapshot/1.0",mr._jsonSchema={type:Ht("string",mr._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Jo extends p4{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function m4(t){t=Se(t,nn);const e=Se(t.firestore,it),n=bt(e),r=new Jo(e);return function c4(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function BH(t,e,n={}){const r=new en;return t.asyncQueue.enqueueAndForget(v(function*(){return function(o,s,a,c,u){const d=new z_({next:f=>{d.Ou(),s.enqueueAndForget(()=>gS(o,h)),f.fromCache&&"server"===c.source?u.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new vS(a,d,{includeMetadataChanges:!0,ka:!0});return fS(o,h)}(yield Ku(t),t.asyncQueue,e,n,r)})),r.promise}(n,t._query).then(i=>new mr(e,r,t,i))}function _4(t,e,n,...r){t=Se(t,tt);const i=Se(t.firestore,it),o=Pa(i);let s;return s="string"==typeof(e=$t(e))||e instanceof Ra?function dA(t,e,n,r,i,o){const s=t.Dc(1,e,n),a=[$h(e,r,n)],c=[i];if(o.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push($h(e,o[f])),c.push(o[f+1]);const u=[],d=dn.empty();for(let f=a.length-1;f>=0;--f)if(!a4(u,a[f])){const g=a[f];let _=c[f];_=$t(_);const I=s.gc(g);if(_ instanceof Bh)u.push(g);else{const w=Na(_,I);null!=w&&(u.push(g),d.set(g,w))}}const h=new rr(u);return new t4(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function lA(t,e,n,r){const i=t.Dc(1,e,n);hA("Data must be an object, but it was:",i,r);const o=[],s=dn.empty();Vo(r,(c,u)=>{const d=K_(e,c,n);u=$t(u);const h=i.gc(d);if(u instanceof Bh)o.push(d);else{const f=Na(u,h);null!=f&&(o.push(d),s.set(d,f))}});const a=new rr(o);return new t4(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),Gh(i,[s.toMutation(t._key,vt.exists(!0))])}function y4(t){return Gh(Se(t.firestore,it),[new Mu(t._key,vt.none())])}function _pe(t,e){const n=Se(t.firestore,it),r=Qu(t),i=ey(t.converter,e);return Gh(n,[W_(Pa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function Gh(t,e){return function(r,i){const o=new en;return r.asyncQueue.enqueueAndForget(v(function*(){return function bfe(t,e,n){return DS.apply(this,arguments)}(yield function nA(t){return q_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(bt(t),e)}function ny(){return new sA("serverTimestamp")}!function(e,n=!0){uu=cu,au(new na("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new it(new Ble(r.getProvider("auth-internal")),new zle(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fi(gj,"4.8.0",e),Fi(gj,"4.8.0","esm2017")}();const xpe=function T4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},b4=new Jd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),iy=new wb("@firebase/auth");function oy(t,...e){iy.logLevel<=De.ERROR&&iy.error(`Auth (${cu}): ${t}`,...e)}function or(t,...e){throw vA(t,...e)}function $n(t,...e){return vA(t,...e)}function yA(t,e,n){const r=Object.assign(Object.assign({},xpe()),{[e]:n});return new Jd("auth","Firebase",r).create(e,{appName:t.name})}function rn(t){return yA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vA(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b4.create(t,...e)}function H(t,e,...n){if(!t)throw vA(e,...n)}function fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oy(e),new Error(e)}function Wi(t,e){t||fi(e)}function Qh(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function C4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Ope(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function IA(){return"http:"===C4()||"https:"===C4()}()||function nue(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Yh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=function Xce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}()||function rue(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Ope()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function EA(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class S4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fpe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Upe=new Yh(3e4,6e4);function ht(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ft(t,e,n,r){return wA.apply(this,arguments)}function wA(){return(wA=v(function*(t,e,n,r,i={}){return A4(t,i,v(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Zd(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function tue(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&su(t.emulatorConfig.host)&&(u.credentials="include"),S4.fetch()(yield D4(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function A4(t,e,n){return TA.apply(this,arguments)}function TA(){return(TA=v(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Lpe),e);try{const i=new Bpe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Jh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Jh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Jh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw Jh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yA(t,d,u);or(t,d)}}catch(i){if(i instanceof Oi)throw i;or(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Ki(t,e,n,r){return bA.apply(this,arguments)}function bA(){return(bA=v(function*(t,e,n,r,i={}){const o=yield ft(t,e,n,r,i);return"mfaPendingCredential"in o&&or(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function D4(t,e,n,r){return CA.apply(this,arguments)}function CA(){return(CA=v(function*(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?EA(t.config,i):`${t.config.apiScheme}://${i}`;return Fpe.includes(n)&&(yield o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())?o._getPersistence()._getFinalTarget(s).toString():s})).apply(this,arguments)}class Bpe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),Upe.get())})}}function Jh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}function DA(){return(DA=v(function*(t,e){return ft(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function sy(t,e){return MA.apply(this,arguments)}function MA(){return(MA=v(function*(t,e){return ft(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function PA(){return(PA=v(function*(t,e=!1){const n=$t(t),r=yield n.getIdToken(e),i=ay(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Zh(NA(i.auth_time)),issuedAtTime:Zh(NA(i.iat)),expirationTime:Zh(NA(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function NA(t){return 1e3*Number(t)}function ay(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return oy("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qd(n);return i?JSON.parse(i):(oy("Failed to decode base64 JWT payload"),null)}catch(i){return oy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function x4(t){const e=ay(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qi(t,e){return xA.apply(this,arguments)}function xA(){return(xA=v(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Oi&&function Gpe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Wpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield n.iteration()}),r)}iteration(){var e=this;return v(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class kA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xh(t){return OA.apply(this,arguments)}function OA(){return(OA=v(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Qi(t,sy(n,{idToken:r}));H(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?k4(o.providerUserInfo):[],a=function Qpe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new kA(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function VA(){return(VA=v(function*(t){const e=$t(t);yield Xh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function k4(t){return t.map(e=>{var{providerId:n}=e,r=_m(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function LA(){return(LA=v(function*(t,e){const n=yield A4(t,{},v(function*(){const r=Zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield D4(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&su(t.emulatorConfig.host)&&(c.credentials="include"),S4.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function FA(){return(FA=v(function*(t,e){return ft(t,"POST","/v2/accounts:revokeToken",ht(t,e))})).apply(this,arguments)}class Xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(0!==e.length,"internal-error");const n=x4(e);this.updateTokensAndExpiration(e,null,n)}getToken(e){var n=this;return v(function*(r,i=!1){return i||!n.accessToken||n.isExpired?(H(n.refreshToken,r,"user-token-expired"),n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null):n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return v(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Ype(t,e){return LA.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Xu;return r&&(H("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(H("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(H("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xu,this.toJSON())}_performRefresh(){return fi("not implemented")}}function Xo(t,e){H("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=_m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kA(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return v(function*(){const r=yield Qi(n,n.stsTokenManager.getToken(n.auth,e));return H(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function qpe(t){return PA.apply(this,arguments)}(this,e)}reload(){return function Kpe(t){return VA.apply(this,arguments)}(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var n=this;return v(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Xh(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var e=this;return v(function*(){if(Fr(e.auth.app))return Promise.reject(rn(e.auth));const n=yield e.getIdToken();return yield Qi(e,function Hpe(t,e){return DA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,I=null!==(a=n.tenantId)&&void 0!==a?a:void 0,w=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:K,isAnonymous:Y,providerData:ie,stsTokenManager:C}=n;H(F&&C,e,"internal-error");const E=Xu.fromJSON(this.name,C);H("string"==typeof F,e,"internal-error"),Xo(h,e.name),Xo(f,e.name),H("boolean"==typeof K,e,"internal-error"),H("boolean"==typeof Y,e,"internal-error"),Xo(g,e.name),Xo(_,e.name),Xo(I,e.name),Xo(w,e.name),Xo(A,e.name),Xo(D,e.name);const T=new Br({uid:F,auth:e,email:f,emailVerified:K,displayName:h,isAnonymous:Y,photoURL:_,phoneNumber:g,tenantId:I,stsTokenManager:E,createdAt:A,lastLoginAt:D});return ie&&Array.isArray(ie)&&(T.providerData=ie.map(S=>Object.assign({},S))),w&&(T._redirectEventId=w),T}static _fromIdTokenResponse(e,n){return v(function*(r,i,o=!1){const s=new Xu;s.updateFromServerResponse(i);const a=new Br({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Xh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,n,r){return v(function*(){const i=n.users[0];H(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?k4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Xu;a.updateFromIdToken(r);const c=new Br({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new kA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const O4=new Map;function Yi(t){Wi(t instanceof Function,"Expected a class definition");let e=O4.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O4.set(t,e),e)}const V4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(n,r){var i=this;return v(function*(){i.storage[n]=r})()}_get(n){var r=this;return v(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return v(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function cy(t,e,n){return`firebase:${t}:${e}:${n}`}class el{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=cy(this.userKey,i.apiKey,o),this.fullPersistenceKey=cy("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const n=yield e.persistence._get(e.fullUserKey);if(!n)return null;if("string"==typeof n){const r=yield sy(e.auth,{idToken:n}).catch(()=>{});return r?Br._fromGetAccountInfoResponse(e.auth,r,n):null}return Br._fromJSON(e.auth,n)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return v(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n){return v(function*(r,i,o="authUser"){if(!i.length)return new el(Yi(V4),r,o);const s=(yield Promise.all(i.map(function(){var h=v(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Yi(V4);const c=cy(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){let g;if("string"==typeof f){const _=yield sy(r,{idToken:f}).catch(()=>{});if(!_)break;g=yield Br._fromGetAccountInfoResponse(r,_,f)}else g=Br._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&d.length?(a=d[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=v(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new el(a,r,o)):new el(a,r,o)}).apply(this,arguments)}}function L4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H4(e))return"Blackberry";if(z4(e))return"Webos";if(U4(e))return"Safari";if((e.includes("chrome/")||j4(e))&&!e.includes("edge/"))return"Chrome";if($4(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function F4(t=kt()){return/firefox\//i.test(t)}function U4(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j4(t=kt()){return/crios\//i.test(t)}function B4(t=kt()){return/iemobile/i.test(t)}function $4(t=kt()){return/android/i.test(t)}function H4(t=kt()){return/blackberry/i.test(t)}function z4(t=kt()){return/webos/i.test(t)}function UA(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function q4(t=kt()){return UA(t)||$4(t)||z4(t)||H4(t)||/windows phone/i.test(t)||B4(t)}function G4(t,e=[]){let n;switch(t){case"Browser":n=L4(kt());break;case"Worker":n=`${L4(kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cu}/${r}`}class ege{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return v(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function jA(){return(jA=v(function*(t,e={}){return ft(t,"GET","/v2/passwordPolicy",ht(t,e))})).apply(this,arguments)}class rge{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class ige{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W4(this),this.idTokenSubscription=new W4(this),this.beforeStateQueue=new ege(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Yi(n)),this._initializationPromise=this.queue(v(function*(){var i,o,s;if(!r._deleted&&(r.persistenceManager=yield el.create(r,e),null===(i=r._resolvePersistenceManagerAvailable)||void 0===i||i.call(r),!r._deleted)){if(null!==(o=r._popupRedirectResolver)&&void 0!==o&&o._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return v(function*(){try{const r=yield sy(n,{idToken:e}),i=yield Br._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return v(function*(){var r;if(Fr(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return H(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return v(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return v(function*(){try{yield Xh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Vpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return v(function*(){if(Fr(n.app))return Promise.reject(rn(n));const r=e?$t(e):null;return r&&H(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e){var n=this;return v(function*(r,i=!1){if(!n._deleted)return r&&H(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(v(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return v(function*(){return Fr(e.app)?Promise.reject(rn(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Fr(this.app)?Promise.reject(rn(this)):this.queue(v(function*(){yield n.assertedPersistence.setPersistence(Yi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return v(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return v(function*(){const n=yield function tge(t){return jA.apply(this,arguments)}(e),r=new rge(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return v(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Jpe(t,e){return FA.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return v(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return v(function*(){if(!n.redirectPersistenceManager){const r=e&&Yi(e)||n._popupRedirectResolver;H(r,n,"argument-error"),n.redirectPersistenceManager=yield el.create(n,[Yi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return v(function*(){var r,i;return n._isInitialized&&(yield n.queue(v(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return v(function*(){if(e===n.currentUser)return n.queue(v(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return v(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return v(function*(){var n;if(Fr(e.app)&&e.app.settings.appCheckToken)return e.app.settings.appCheckToken;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function kpe(t,...e){iy.logLevel<=De.WARN&&iy.warn(`Auth (${cu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Lt(t){return $t(t)}class W4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function lue(t,e){const n=new due(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ef={loadJS:()=>v(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K4(t){return`__${t}${Math.floor(1e6*Math.random())}`}function J4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class rf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,n){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}function Ji(t,e){return iD.apply(this,arguments)}function iD(){return(iD=v(function*(t,e){return Ki(t,"POST","/v1/accounts:signInWithIdp",ht(t,e))})).apply(this,arguments)}class tl extends rf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=_m(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new tl(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Ji(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ji(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zd(n)}return e}}class Zi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n3 extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Uge=(()=>{class t extends n3{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return tl._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r){return v(function*(i,o,s,a=!1){const c=yield Br._fromIdTokenResponse(i,s,a),u=i3(s);return new Dr({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,n,r){return v(function*(){yield e._updateTokensIfNecessary(r,!0);const i=i3(r);return new Dr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function i3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class fy extends Oi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fy.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fy(e,n,r,i)}}function o3(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?fy._fromErrorAndOperation(t,o,e,r):o})}function fD(t,e){return pD.apply(this,arguments)}function pD(){return(pD=v(function*(t,e,n=!1){const r=yield Qi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Dr._forOperation(t,"link",r)})).apply(this,arguments)}function a3(t,e){return mD.apply(this,arguments)}function mD(){return(mD=v(function*(t,e,n=!1){const{auth:r}=t;if(Fr(r.app))return Promise.reject(rn(r));const i="reauthenticate";try{const o=yield Qi(t,o3(r,i,e,t),n);H(o.idToken,r,"internal-error");const s=ay(o.idToken);H(s,r,"internal-error");const{sub:a}=s;return H(t.uid===a,r,"user-mismatch"),Dr._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&or(r,"user-mismatch"),o}})).apply(this,arguments)}function c3(t,e){return _D.apply(this,arguments)}function _D(){return(_D=v(function*(t,e,n=!1){if(Fr(t.app))return Promise.reject(rn(t));const r="signIn",i=yield o3(t,r,e),o=yield Dr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}const my="__sak";class h3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(my,"1"),this.storage.removeItem(my),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cme=(()=>{class t extends h3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Xpe(){return function iue(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return v(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return v(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return v(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),f3=(()=>{class t extends h3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let lme=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return v(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=v(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),d=yield function ume(t){return Promise.all(t.map(function(){var e=v(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function _y(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class dme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n){var r=this;return v(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((d,h)=>{const f=_y("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const I=_;if(I.data.eventId===f)switch(I.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(I.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function qt(){return window}function KD(){return typeof qt().WorkerGlobalScope<"u"&&"function"==typeof qt().importScripts}function QD(){return(QD=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const p3="firebaseLocalStorageDb",yy="firebaseLocalStorage",g3="fbase_key";class cf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vy(t,e){return t.transaction([yy],e?"readwrite":"readonly").objectStore(yy)}function YD(){const t=indexedDB.open(p3,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yy,{keyPath:g3})}catch(i){n(i)}}),t.addEventListener("success",v(function*(){const r=t.result;r.objectStoreNames.contains(yy)?e(r):(r.close(),yield function _me(){const t=indexedDB.deleteDatabase(p3);return new cf(t).toPromise()}(),e(yield YD()))}))})}function m3(t,e,n){return JD.apply(this,arguments)}function JD(){return(JD=v(function*(t,e,n){const r=vy(t,!0).put({[g3]:e,value:n});return new cf(r).toPromise()})).apply(this,arguments)}function ZD(){return(ZD=v(function*(t,e){const n=vy(t,!1).get(e),r=yield new cf(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function _3(t,e){const n=vy(t,!0).delete(e);return new cf(n).toPromise()}const Eme=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return v(function*(){return n.db||(n.db=yield YD()),n.db})()}_withRetries(n){var r=this;return v(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return v(function*(){return KD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return v(function*(){n.receiver=lme._getInstance(function gme(){return KD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=v(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=v(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return v(function*(){var r,i;if(n.activeServiceWorker=yield function fme(){return QD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new dme(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return v(function*(){if(r.sender&&r.activeServiceWorker&&function pme(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const n=yield YD();return yield m3(n,my,"1"),yield _3(n,my),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return v(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(o=>m3(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return v(function*(){const i=yield r._withRetries(o=>function yme(t,e){return ZD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(i=>_3(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return v(function*(){const r=yield n._withRetries(s=>{const a=vy(s,!1).getAll();return new cf(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function ka(t,e){return e?Yi(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}K4("rcb"),new Yh(3e4,6e4);class uR extends rf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mme(t){return c3(t.auth,new uR(t),t.bypassAuthState)}function Pme(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),a3(n,new uR(t),t.bypassAuthState)}function Nme(t){return lR.apply(this,arguments)}function lR(){return(lR=v(function*(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),fD(n,new uR(t),t.bypassAuthState)})).apply(this,arguments)}class v3{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=v(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return v(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mme;case"linkViaPopup":case"linkViaRedirect":return Nme;case"reauthViaPopup":case"reauthViaRedirect":return Pme;default:or(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xme=new Yh(2e3,1e4);function dR(){return(dR=v(function*(t,e,n){if(Fr(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const r=Lt(t);!function Zu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&or(t,"argument-error"),yA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Zi);const i=ka(r,n);return new pR(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let pR=(()=>{class t extends v3{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return v(function*(){const r=yield n.execute();return H(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return v(function*(){Wi(1===n.filter.length,"Popup operations only handle one event");const r=_y();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject($n(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,xme.get())};n()}}return t.currentPopupAction=null,t})();const lf=new Map;class Vme extends v3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return v(function*(){let r=lf.get(n.auth._key());if(!r){try{const o=(yield function Lme(t,e){return gR.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}lf.set(n.auth._key(),r)}return n.bypassAuthState||lf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return v(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function gR(){return(gR=v(function*(t,e){const n=function E3(t){return cy("pendingRedirect",t.config.apiKey,t.name)}(e),r=function I3(t){return Yi(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Fme(t,e){lf.set(t._key(),e)}function w3(t,e){return wR.apply(this,arguments)}function wR(){return(wR=v(function*(t,e,n=!1){if(Fr(t.app))return Promise.reject(rn(t));const r=Lt(t),i=ka(r,e),s=yield new Vme(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Hme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function zme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C3(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!C3(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(b3(e))}saveEventToCache(e){this.cachedEventUids.add(b3(e)),this.lastProcessedEventTime=Date.now()}}function b3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C3({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function bR(){return(bR=v(function*(t,e={}){return ft(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Gme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wme=/^https?/;function CR(){return CR=v(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function qme(t){return bR.apply(this,arguments)}(t);for(const n of e)try{if(Qme(n))return}catch{}or(t,"unauthorized-domain")}),CR.apply(this,arguments)}function Qme(t){const e=Qh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Wme.test(n))return!1;if(Gme.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yme=new Yh(3e4,6e4);function S3(){const t=qt().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Jme(t){return new Promise((e,n)=>{var r,i,o;function s(){S3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S3(),n($n(t,"network-request-failed"))},timeout:Yme.get()})}if(null!==(i=null===(r=qt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=qt().gapi)||void 0===o||!o.load){const a=K4("iframefcb");return qt()[a]=()=>{gapi.load?s():n($n(t,"network-request-failed"))},function BA(t){return ef.loadJS(t)}(`${function cge(){return ef.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw Iy=null,e})}let Iy=null;const Xme=new Yh(5e3,15e3),n_e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r_e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i_e(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?EA(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:cu},i=r_e.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Zd(r).slice(1)}`}function SR(){return SR=v(function*(t){const e=yield function Zme(t){return Iy=Iy||Jme(t),Iy}(t),n=qt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:i_e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n_e,dontclear:!0},r=>new Promise(function(){var i=v(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=$n(t,"network-request-failed"),c=qt().setTimeout(()=>{s(a)},Xme.get());function u(){qt().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),SR.apply(this,arguments)}const s_e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class A3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const g_e=encodeURIComponent("fac");function D3(t,e,n,r,i,o){return AR.apply(this,arguments)}function AR(){return(AR=v(function*(t,e,n,r,i,o){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cu,eventId:i};if(e instanceof Zi){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function uue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof n3){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${g_e}=${encodeURIComponent(c)}`:"";return`${function m_e({config:t}){return t.emulator?EA(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Zd(a).slice(1)}${u}`})).apply(this,arguments)}const DR="webStorageSupport",y_e=class __e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f3,this._completeRedirectFn=w3,this._overrideRedirectResult=Fme}_openPopup(e,n,r,i){var o=this;return v(function*(){var s;Wi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield D3(e,n,r,Qh(),i);return function d_e(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},s_e),{width:r.toString(),height:i.toString(),top:o,left:s}),u=kt().toLowerCase();n&&(a=j4(u)?"_blank":n),F4(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(function Zpe(t=kt()){var e;return UA(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function h_e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new A3(null);const h=window.open(e||"",a,d);H(h,t,"popup-blocked");try{h.focus()}catch{}return new A3(h)}(e,a,_y())})()}_openRedirect(e,n,r,i){var o=this;return v(function*(){return yield o._originValidation(e),function hme(t){qt().location.href=t}(yield D3(e,n,r,Qh(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Wi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return v(function*(){const r=yield function o_e(t){return SR.apply(this,arguments)}(e),i=new Hme(e);return r.register("authEvent",o=>(H(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(DR,{type:DR},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[DR];void 0!==s&&n(!!s),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Kme(t){return CR.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return q4()||U4()||UA()}};var N3="@firebase/auth";class v_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return v(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const w_e=xU("authIdTokenMaxAge")||300;let k3=null;const T_e=t=>function(){var e=v(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>w_e)return;const o=r?.token;k3!==o&&(k3=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function b_e(t=ej()){const e=Gm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function _ge(t,e){const n=Gm(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Vi(n.getOptions(),e??{}))return i;or(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:y_e,persistence:[Eme,cme,f3]}),r=xU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=T_e(o.toString());(function eme(t,e,n){$t(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Xge(t,e,n,r){$t(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=PU("auth");return i&&function vge(t,e,n){const r=Lt(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=J4(e),{host:s,port:a}=function Ige(t){const e=J4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Z4(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:Z4(s)}}}(e),c=null===a?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void H(Vi(u,r.config.emulator)&&Vi(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,su(s)?(OU(`${o}//${s}${c}`),LU("Auth",!0)):i||function Ege(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function oge(t){ef=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=$n("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function C_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function E_e(t){au(new na("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G4(t)},u=new ige(r,i,o,c);return function yge(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),au(new na("auth-internal",e=>{const n=Lt(e.getProvider("auth").getImmediate());return new v_e(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(N3,"1.10.8",function I_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),Fi(N3,"1.10.8","esm2017")}("Browser");const O3_firebase={apiKey:"AIzaSyD659eN45ypSS0pQhSM4W-jj9TAv_t_RYI",authDomain:"codex-recipes.firebaseapp.com",projectId:"codex-recipes",storageBucket:"codex-recipes.firebasestorage.app",messagingSenderId:"733881035931",appId:"1:733881035931:web:e5c6abbb22eda216966a3e",measurementId:"G-PD41484P9Y"};let Oa=(()=>{var t;class e{constructor(){var r=this;this.googleProvider=new Uge,this.fullImageCache=new Map,this.user=Ge(null),this.canWrite=Ge(!1),this.authLoading=Ge(!0),this.ensureFirebaseConfig();const i=XU(O3_firebase);this.db=ipe(i),this.auth=b_e(i),function tme(t,e,n,r){$t(t).onAuthStateChanged(e,n,r)}(this.auth,function(){var o=v(function*(s){if(r.user.set(s),!s)return r.canWrite.set(!1),void r.authLoading.set(!1);const a=yield s.getIdTokenResult();r.canWrite.set(!0===a.claims.writer),r.authLoading.set(!1)});return function(s){return o.apply(this,arguments)}}())}signInWithGoogle(){var r=this;return v(function*(){yield function kme(t,e,n){return dR.apply(this,arguments)}(r.auth,r.googleProvider)})()}signOut(){var r=this;return v(function*(){yield function nme(t){return $t(t).signOut()}(r.auth)})()}listRecipes(){var r=this;return v(function*(){r.ensureSignedIn();const o=function hpe(t,e,...n){let r=[];e instanceof fA&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof Ju).length,a=o.filter(c=>c instanceof qh).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(iA(r.db,"recipes"),function fpe(t,e="asc"){const n=e,r=Y_("orderBy",t);return pA._create(r,n)}("updated_at","desc"));return(yield m4(o)).docs.map(a=>{const c=a.data(),u=c.raw_text,d=c.updated_at,h=r.readThumbs(c.image_thumbs);return"string"!=typeof u?null:{id:a.id,raw_text:u,image_thumbs:h,primary_image_id:"string"==typeof c.primary_image_id?c.primary_image_id:void 0,updated_at:d&&"function"==typeof d.toDate?d.toDate().toISOString():void 0}}).filter(a=>null!==a)})()}createRecipe(r){var i=this;return v(function*(){i.ensureCanWrite();const o=i.validateRawText(r),s=(new Date).toISOString();try{return{id:(yield _pe(iA(i.db,"recipes"),{raw_text:o,image_thumbs:[],primary_image_id:null,updated_at:ny(),updated_by:i.user()?.email??""})).id,raw_text:o,image_thumbs:[],updated_at:s}}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k ukl\xe1d\xe1n\xed recept\u016f.")}})()}updateRecipe(r,i){var o=this;return v(function*(){o.ensureCanWrite();const s=o.validateRawText(i);try{yield _4(Qu(o.db,"recipes",r),{raw_text:s,updated_at:ny(),updated_by:o.user()?.email??""})}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\u011b receptu.")}})()}saveRecipeImageMeta(r,i,o){var s=this;return v(function*(){s.ensureCanWrite();try{yield _4(Qu(s.db,"recipes",r),{image_thumbs:i,primary_image_id:o,updated_at:ny(),updated_by:s.user()?.email??""})}catch{throw new Error("Nepoda\u0159ilo se ulo\u017eit metadata obr\xe1zk\u016f receptu.")}})()}listRecipeImages(r){var i=this;return v(function*(){i.ensureSignedIn();try{const o=iA(i.db,"recipes",r,"images");return(yield m4(o)).docs.map(a=>{const c=a.data(),u=c.full_data_url,d=c.thumb_data_url,h=c.mime_type,f=c.width,g=c.height,_=c.updated_at;if("string"!=typeof u||"string"!=typeof d||"string"!=typeof h||"number"!=typeof f||"number"!=typeof g)return null;const I={id:a.id,full_data_url:u,data_url:d,mime_type:h,width:f,height:g,updated_at:_&&"function"==typeof _.toDate?_.toDate().toISOString():void 0};return i.setCachedImage(r,I),I}).filter(a=>null!==a)}catch{throw new Error("Nepoda\u0159ilo se na\u010d\xedst obr\xe1zky receptu.")}})()}upsertRecipeImage(r,i){var o=this;return v(function*(){o.ensureCanWrite();try{yield function mpe(t,e,n){t=Se(t,tt);const r=Se(t.firestore,it),i=ey(t.converter,e,n);return Gh(r,[W_(Pa(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,vt.none())])}(Qu(o.db,"recipes",r,"images",i.id),{full_data_url:i.full_data_url,thumb_data_url:i.data_url,mime_type:i.mime_type,width:i.width,height:i.height,updated_at:ny(),updated_by:o.user()?.email??""}),o.setCachedImage(r,i)}catch{throw new Error("Nepoda\u0159ilo se ulo\u017eit obr\xe1zek receptu.")}})()}deleteRecipeImage(r,i){var o=this;return v(function*(){o.ensureCanWrite();try{yield y4(Qu(o.db,"recipes",r,"images",i)),o.fullImageCache.delete(o.cacheKey(r,i)),localStorage.removeItem(o.cacheKey(r,i))}catch{throw new Error("Nepoda\u0159ilo se odstranit obr\xe1zek receptu.")}})()}getCachedRecipeImage(r,i){const o=this.cacheKey(r,i),s=this.fullImageCache.get(o);if(s)return s;const a=localStorage.getItem(o);if(!a)return null;try{const c=JSON.parse(a);return this.fullImageCache.set(o,c),c}catch{return null}}deleteRecipe(r){var i=this;return v(function*(){i.ensureCanWrite();try{yield y4(Qu(i.db,"recipes",r))}catch{throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed ke smaz\xe1n\xed receptu.")}})()}readThumbs(r){return Array.isArray(r)?r.map(i=>{if(!i||"object"!=typeof i)return null;const o=i.id,s=i.data_url;return"string"!=typeof o||"string"!=typeof s?null:{id:o,data_url:s}}).filter(i=>null!==i):[]}setCachedImage(r,i){const o=this.cacheKey(r,i.id);this.fullImageCache.set(o,i);try{localStorage.setItem(o,JSON.stringify(i))}catch{}}cacheKey(r,i){return`recipe-image:${r}:${i}`}validateRawText(r){const i=r.trim();if(!i)throw new Error("Pole receptu nesm\xed b\xfdt pr\xe1zdn\xe9.");return i}ensureCanWrite(){if(this.ensureSignedIn(),!this.canWrite())throw new Error("Nem\xe1\u0161 opr\xe1vn\u011bn\xed k \xfaprav\xe1m recept\u016f.")}ensureSignedIn(){if(!this.user())throw new Error("Pro pr\xe1ci s recepty se nejprve p\u0159ihlas p\u0159es Google.")}ensureFirebaseConfig(){if(!Object.values(O3_firebase).every(o=>"string"==typeof o&&o.trim().length>0))throw new Error("Firebase nen\xed nakonfigurovan\xfd. Dopl\u0148 konfiguraci ve frontend/src/environments/firebase.config.ts.")}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();const S_e=["postup","kroky","p\u0159\xedprava"],V3=/^[\-\u2013\u2022*]\s*/,A_e=/^(\d+(?:[.,]\d+)?)(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?/,D_e=/^(g|kg|mg|ml|l|ks|strou\u017eky?|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed)\b/i,R_e=["trochu","dle","podle","\u0161petka","n\u011bkolik","p\xe1r"];function wy(t){const e=t.split(/\r?\n/).map(c=>c.trim()),n=[],r=function M_e(t){const e=L3(t);return-1===e?"Bez n\xe1zvu":t[e].replace(/^#+\s*/,"")}(e),i=L3(e),o=function P_e(t){return t.findIndex(e=>S_e.some(n=>e.toLowerCase()===n||e.toLowerCase()===`${n}:`))}(e),s=e.slice(i+1,o>=0?o:e.length),a=o>=0?e.slice(o+1):[];return{title:r,ingredientSections:N_e(s,n),steps:U_e(a),warnings:n}}function L3(t){return t.findIndex(e=>e.length>0)}function N_e(t,e){const n=t.filter(Boolean);if(0===n.length)return[];const r=[];let i=null;for(const o of n)if(F3(o))i&&r.push(i),i={title:k_e(o),items:[]};else if(x_e(o)){i||(i={title:"Suroviny",items:[]},e.push({code:"IMPLICIT_SECTION",message:"Suroviny byly nalezeny bez sekce, byla pou\u017eita implicitn\xed sekce \u201eSuroviny\u201c.",line:o}));const s=O_e(o);void 0===s.amount&&F_e(s.name)&&e.push({code:"UNSPECIFIED_AMOUNT",message:`Neur\u010dit\xe9 mno\u017estv\xed u polo\u017eky \u201e${s.raw}\u201c.`,line:o}),i.items.push(s);continue}return i&&r.push(i),r.filter(o=>o.items.length>0)}function x_e(t){return!F3(t)}function F3(t){return/:$/.test(t.trim())}function k_e(t){return t.replace(/:$/,"").trim()}function O_e(t){const e=t.replace(V3,"").trim(),n=[],r=e.match(/\(([^)]+)\)\s*$/);r&&void 0!==r.index&&n.push({start:r.index,value:r[1].trim()});const i=e.match(/\s-\s*(.+)$/);if(void 0!==i?.index){const f=i[1].trim();f&&n.push({start:i.index,value:f})}const o=function V_e(t){for(let e=0;e<t.length;e+=1){if(","!==t[e])continue;const r=e+1<t.length?t[e+1]:"";if(!/\d/.test(e>0?t[e-1]:"")||!/\d/.test(r))return e}return-1}(e);if(o>=0){const f=e.slice(o+1).trim();f&&n.push({start:o,value:f})}const s=n.reduce((f,g)=>Math.min(f,g.start),e.length),a=e.slice(0,s).trim(),{amount:c,unit:u,name:d}=function L_e(t){let e=t.trim();const r=e.match(A_e)?.[0]?.trim();r&&(e=e.slice(r.length).trim());const o=e.match(D_e)?.[0]?.trim();return o&&(e=e.slice(o.length).trim()),{amount:r,unit:o,name:e||t.trim()}}(a),h=n.map(f=>f.value).filter(Boolean);return{raw:e,amount:c,unit:u,name:d,note:h.length>0?h.join("; "):void 0}}function F_e(t){const e=t.toLowerCase();return R_e.some(n=>e.startsWith(n))}function U_e(t){return t.filter(Boolean).map(e=>e.replace(/^\d+[.)]\s*/,"").replace(V3,"").trim()).filter(Boolean)}let Va=(()=>{var t;class e{constructor(){this.api=O(Oa),this.recipes=Ge([]),this.selectedRecipeId=Ge(null),this.rawText=Ge(""),this.searchQuery=Ge(""),this.loading=Ge(!1),this.saving=Ge(!1),this.deleting=Ge(!1),this.error=Ge(""),this.parsed=Tt(()=>wy(this.rawText())),this.selectedRecipe=Tt(()=>{const r=this.selectedRecipeId();return r?this.recipes().find(i=>i.id===r)??null:null}),this.selectedParsed=Tt(()=>{const r=this.selectedRecipe();return r?wy(r.raw_text):null}),this.searchResults=Tt(()=>{const i=j3(this.searchQuery().trim());return i?this.recipes().map(o=>function j_e(t,e){const r=wy(t.raw_text).title.trim()||"Untitled recipe",i=U3(r,e),s=t.raw_text.replace(r,"").trim()||t.raw_text,a=U3(s,e),u=a.exact.length>0||a.fuzzy.length>0;if(!(i.exact.length>0||i.fuzzy.length>0)&&!u)return{recipe:t,titleParts:[{text:r,highlighted:!1}],contentLabel:"",contentParts:[],rank:Number.NEGATIVE_INFINITY};const d=MR(r,[...i.exact,...i.fuzzy]),h=function B_e(t,e){const n=Ty([...e.exact,...e.fuzzy]);if(0===n.length)return MR(t.slice(0,90),[]);const[r,i]=n[0],o=Math.max(0,r-30),s=Math.min(t.length,i+50),a=t.slice(o,s),c=n.filter(([d])=>d<s).map(([d,h])=>[Math.max(0,d-o),Math.min(a.length,h-o)]).filter(([d,h])=>d<h),u=MR(a,c);return o>0&&u.unshift({text:"\u2026",highlighted:!1}),s<t.length&&u.push({text:"\u2026",highlighted:!1}),u}(s,a);return{recipe:t,titleParts:d,contentLabel:u?"Recipe content":"",contentParts:u?h:[],rank:100*i.exact.length+40*i.fuzzy.length+(10*a.exact.length+4*a.fuzzy.length)}}(o,i)).filter(o=>o.rank>Number.NEGATIVE_INFINITY).sort((o,s)=>s.rank-o.rank).map(({rank:o,...s})=>s):[]})}refresh(){var r=this;return v(function*(){r.loading.set(!0),r.error.set("");try{const i=yield r.api.listRecipes();r.recipes.set(i);const o=r.selectedRecipeId();o&&!i.some(s=>s.id===o)&&r.selectedRecipeId.set(null)}catch(i){r.error.set(i.message)}finally{r.loading.set(!1)}})()}openDetail(r){this.selectedRecipeId.set(r)}startAdd(){this.selectedRecipeId.set(null),this.rawText.set(""),this.error.set("")}startEditSelected(){const r=this.selectedRecipe();r&&(this.selectedRecipeId.set(r.id),this.rawText.set(r.raw_text),this.error.set(""))}saveSelected(){var r=this;return v(function*(){r.saving.set(!0),r.error.set("");try{const i=r.selectedRecipeId();if(i)return yield r.api.updateRecipe(i,r.rawText()),yield r.refresh(),i;const o=yield r.api.createRecipe(r.rawText());return r.selectedRecipeId.set(o.id),yield r.refresh(),o.id}catch(i){return r.error.set(i.message),null}finally{r.saving.set(!1)}})()}deleteSelected(){var r=this;return v(function*(){const i=r.selectedRecipeId();if(!i)return!1;r.deleting.set(!0),r.error.set("");try{return yield r.api.deleteRecipe(i),r.selectedRecipeId.set(null),yield r.refresh(),!0}catch(o){return r.error.set(o.message),!1}finally{r.deleting.set(!1)}})()}print(){window.print()}parsedFromRaw(r){return wy(r)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})();function U3(t,e){const n=function $_e(t,e){if(!t||!e)return[];const{normalized:n,indexMap:r}=function q_e(t){const e=[],n=[];for(let r=0;r<t.length;r+=1){const o=B3(t[r]);for(const s of o)e.push(s),n.push(r)}return{normalized:e.join(""),indexMap:n}}(t),i=[];let o=0;for(;o<n.length;){const s=n.indexOf(e,o);if(s<0)break;const a=r[s];i.push([a,(r[s+e.length-1]??a)+1]),o=s+Math.max(1,e.length)}return Ty(i)}(t,e),r=function H_e(t,e,n){if(!t||!e)return[];const r=Array.from(t.matchAll(new RegExp("\\p{L}[\\p{L}\\p{N}'-]*","gu"))),i=Math.max(1,Math.floor(.34*e.length));return Ty(r.map(o=>{const s=o.index??0,a=o[0],c=s+a.length,u=j3(a);return!u||u.includes(e)||function z_e(t,e){return e.some(([n,r])=>t[0]>=n&&t[1]<=r)}([s,c],n)?null:function G_e(t,e){if(t===e)return 0;if(0===t.length)return e.length;if(0===e.length)return t.length;const n=Array.from({length:e.length+1},(r,i)=>i);for(let r=1;r<=t.length;r+=1){let i=r;for(let o=1;o<=e.length;o+=1){const d=Math.min(i+1,n[o]+1,n[o-1]+(t[r-1]===e[o-1]?0:1));n[o-1]=i,i=d}n[e.length]=i}return n[e.length]}(u,e)<=i?[s,c]:null}).filter(o=>null!==o))}(t,e,n);return{exact:n,fuzzy:r}}function MR(t,e){const n=Ty(e);if(0===n.length)return[{text:t,highlighted:!1}];const r=[];let i=0;for(const[o,s]of n)o>i&&r.push({text:t.slice(i,o),highlighted:!1}),r.push({text:t.slice(o,s),highlighted:!0}),i=s;return i<t.length&&r.push({text:t.slice(i),highlighted:!1}),r.filter(o=>o.text.length>0)}function Ty(t){if(0===t.length)return[];const e=[...t].sort((r,i)=>r[0]-i[0]),n=[];for(const[r,i]of e){const o=n[n.length-1];!o||r>o[1]?n.push([r,i]):o[1]=Math.max(o[1],i)}return n}function j3(t){return Array.from(t).flatMap(e=>B3(e)).join("")}function B3(t){return Array.from(t.normalize("NFD").toLowerCase()).filter(e=>!new RegExp("\\p{Mark}","u").test(e))}const $3=()=>({exact:!0});function W_e(t,e){1&t&&(J(0,"section",13)(1,"p"),ae(2,"Loading"),X()())}function K_e(t,e){if(1&t){const n=er();J(0,"header",15)(1,"h1"),ae(2,"Recipes"),X(),J(3,"button",17),Ve("click",function(){return Et(n),wt(ne(2).signOut())}),Mr(),J(4,"svg",18),Fe(5,"use",19),X()()()}if(2&t){const n=ne(2);$(3),rt("disabled",n.authBusy())}}function Q_e(t,e){if(1&t){const n=er();J(0,"nav",16)(1,"a",20),Mr(),J(2,"svg",21),Fe(3,"use",22),X(),Es(),J(4,"span",23),ae(5,"Search"),X()(),J(6,"a",24),Mr(),J(7,"svg",21),Fe(8,"use",25),X(),Es(),J(9,"span",23),ae(10,"Recipes"),X()(),J(11,"a",26),Ve("click",function(){return Et(n),wt(ne(2).startAdd())}),Mr(),J(12,"svg",21),Fe(13,"use",27),X(),Es(),J(14,"span",23),ae(15,"Add"),X()()()}if(2&t){const n=ne(2);$(),rt("routerLinkActiveOptions",Yw(4,$3)),$(5),rt("routerLinkActiveOptions",Yw(5,$3)),$(5),br("disabled",!n.canWrite())}}function Y_e(t,e){if(1&t&&(xe(0,K_e,6,1,"header",15),Fe(1,"router-outlet"),xe(2,Q_e,16,6,"nav",16)),2&t){const n=ne();ke(n.user()&&!n.isCookingLayout()?0:-1),$(2),ke(n.user()&&!n.isCookingLayout()?2:-1)}}function J_e(t,e){if(1&t&&(J(0,"p",14),ae(1),X()),2&t){const n=ne();$(),Un(n.state.error())}}let Z_e=(()=>{var t;class e{constructor(){this.router=O(un),this.api=O(Oa),this.state=O(Va),this.user=this.api.user,this.authLoading=this.api.authLoading,this.canWrite=this.api.canWrite,this.authBusy=Ge(!1),this.isCookingLayout=Ge(!1),this.updateLayoutByRoute(this.router.url),this.router.events.subscribe(r=>{r instanceof Ro&&this.updateLayoutByRoute(r.urlAfterRedirects)}),function OF(t,e){const n=e?.injector??O(ur);let i,r=!0!==e?.manualCleanup?n.get(Wr):null;const o=n.get(aI,null,{optional:!0}),s=n.get(ws);return null!==o?(i=function Oie(t,e,n){const r=Object.create(kie);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=LF(r,n),t[23]??=new Set,t[23].add(r),r.consumerMarkedDirty(r),r}(o.view,s,t),r instanceof U0&&r._lView===o.view&&(r=null)):i=function Vie(t,e,n){const r=Object.create(xie);return r.fn=LF(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(W0),s),i.injector=n,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Nie(i)}(()=>{!this.authLoading()&&!this.user()&&this.router.navigateByUrl("/login")})}signOut(){var r=this;return v(function*(){r.authBusy.set(!0),r.state.error.set("");try{yield r.api.signOut(),r.state.selectedRecipeId.set(null),r.state.recipes.set([]),yield r.router.navigateByUrl("/login")}catch(i){r.state.error.set(i.message)}finally{r.authBusy.set(!1)}})()}updateLayoutByRoute(r){this.isCookingLayout.set(r.includes("/cook"))}startAdd(){this.state.startAdd()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-root"]],decls:16,vars:4,consts:[[1,"app-shell"],["aria-hidden","true","focusable","false",1,"icon-sprite"],["id","icon-search","viewBox","0 0 24 24"],["d","M21 21l-4.35-4.35m1.35-5.65a7 7 0 11-14 0 7 7 0 0114 0z"],["id","icon-library","viewBox","0 0 24 24"],["d","M4 6.5A2.5 2.5 0 016.5 4h11A2.5 2.5 0 0120 6.5v11a2.5 2.5 0 01-2.5 2.5h-11A2.5 2.5 0 014 17.5v-11z"],["d","M9 4v16"],["id","icon-add","viewBox","0 0 24 24"],["d","M12 5v14M5 12h14"],["id","icon-logout","viewBox","0 0 24 24"],["d","M14 7l5 5-5 5"],["d","M19 12H9"],["d","M11 4H6a2 2 0 00-2 2v12a2 2 0 002 2h5"],[1,"loading-screen"],[1,"error","no-print"],[1,"top-bar","no-print"],["aria-label","Primary navigation",1,"bottom-nav","no-print"],["type","button","aria-label","Sign out",1,"icon-ghost",3,"click","disabled"],["aria-hidden","true",1,"icon"],["href","#icon-logout"],["routerLink","/","routerLinkActive","active","aria-label","Search recipes",3,"routerLinkActiveOptions"],["aria-hidden","true",1,"nav-icon","icon"],["href","#icon-search"],[1,"nav-label"],["routerLink","/recipes","routerLinkActive","active","aria-label","Recipes",3,"routerLinkActiveOptions"],["href","#icon-library"],["routerLink","/recipes/new","routerLinkActive","active","aria-label","Add new recipe",3,"click"],["href","#icon-add"]],template:function(i,o){1&i&&(J(0,"main",0),Mr(),J(1,"svg",1)(2,"symbol",2),Fe(3,"path",3),X(),J(4,"symbol",4),Fe(5,"path",5)(6,"path",6),X(),J(7,"symbol",7),Fe(8,"path",8),X(),J(9,"symbol",9),Fe(10,"path",10)(11,"path",11)(12,"path",12),X()(),xe(13,W_e,3,0,"section",13)(14,Y_e,3,2),xe(15,J_e,2,1,"p",14),X()),2&i&&(br("cooking-layout",o.isCookingLayout()),$(13),ke(o.authLoading()?13:14),$(2),ke(o.state.error()&&!o.isCookingLayout()?15:-1))},dependencies:[rb,jm,IU],styles:["[_nghost-%COMP%]{display:block;min-height:100dvh;font-family:Inter,Roboto,Arial,sans-serif;color:#111827;background:#fff}*[_ngcontent-%COMP%]{box-sizing:border-box}.icon-sprite[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.app-shell[_ngcontent-%COMP%]{min-height:100dvh;padding:.5rem .65rem 4.3rem;max-width:920px;margin:0 auto}.app-shell.cooking-layout[_ngcontent-%COMP%]{max-width:none;padding:0}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem;padding-bottom:.45rem;border-bottom:1px solid #e5e7eb}.top-bar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.95rem;letter-spacing:.01em}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.loading-screen[_ngcontent-%COMP%]{min-height:85vh;padding:1rem 0;display:flex;align-items:center;justify-content:center}button[_ngcontent-%COMP%]{border:0;border-radius:6px;padding:.58rem .75rem;background:#111827;color:#fff;font:inherit}.icon-ghost[_ngcontent-%COMP%]{background:#f1f5f9;color:#1f2937;width:1.9rem;height:1.9rem;border-radius:6px;padding:0;display:grid;place-items:center}button[_ngcontent-%COMP%]:disabled{opacity:.45}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:.3rem .5rem calc(.3rem + env(safe-area-inset-bottom));display:grid;grid-template-columns:repeat(3,1fr);gap:.35rem}.bottom-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;text-align:center;border-radius:6px;padding:.3rem .2rem;background:#f8fafc;color:#0f172a;display:grid;gap:.08rem}.nav-icon[_ngcontent-%COMP%]{line-height:1}.nav-icon.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;margin:0 auto}.nav-label[_ngcontent-%COMP%]{font-size:.68rem;line-height:1.2}.bottom-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.bottom-nav[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.error[_ngcontent-%COMP%]{margin-top:.5rem;color:#b91c1c}@media (min-width: 768px){.app-shell[_ngcontent-%COMP%]{padding:.8rem .9rem 1rem}.app-shell.cooking-layout[_ngcontent-%COMP%]{padding:0}.top-bar[_ngcontent-%COMP%]{margin-bottom:.75rem}.bottom-nav[_ngcontent-%COMP%]{position:static;border:0;background:transparent;padding:.25rem 0 0;max-width:330px}}@media print{.top-bar[_ngcontent-%COMP%], .bottom-nav[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}}"]}))}return t(),e})();const X_e=/^(\d+(?:[.,]\d+)?(?:\s*[-/]\s*\d+(?:[.,]\d+)?)?|\d+\/\d+)(?:\s*(?:kg|g|mg|ml|l|ks|strou\u017eky?|strou\u017eek|\u0161petka|\u0161petky|l\u017e\xedce|l\u017ei\u010dka|hrnek|hrnky|balen\xed))?/i;function oye(t){return{...t,normalized:PR(t.item),stemmed:z3(t.item),amount:fye(t.original)}}function aye(t,e,n){let i=null;for(let o=Math.min(4,t.length-e);o>=1;o-=1){const s=e+o-1,a=t.slice(e,s+1).map(d=>d.value),c=PR(a.join(" "));if(!c)continue;const u=z3(a.join(" "));for(const d of n){if(cye(c,d.normalized))continue;const h=uye(c,u,d);if(h>.42)continue;const f={ingredient:d,startWord:e,endWord:s,segmentStart:t[e].segmentIndex,segmentEnd:t[s].segmentIndex,score:h};(!i||dye(f,i))&&(i=f)}}return i}function cye(t,e){const n=t.split(" ").filter(Boolean),r=e.split(" ").filter(Boolean);return!(n.length<=r.length)&&n.some(o=>/\d/.test(o))}function uye(t,e,n){const r=H3(t,n.normalized),i=H3(e,n.stemmed),o=Math.min(r,i);return t===n.normalized||e===n.stemmed?.6*o:o}function H3(t,e){if(t===e)return 0;const n=Math.max(t.length,e.length);return 0===n?0:function lye(t,e){const n=Array.from({length:t.length+1},()=>Array(e.length+1).fill(0));for(let r=0;r<=t.length;r+=1)n[r][0]=r;for(let r=0;r<=e.length;r+=1)n[0][r]=r;for(let r=1;r<=t.length;r+=1)for(let i=1;i<=e.length;i+=1)n[r][i]=Math.min(n[r-1][i]+1,n[r][i-1]+1,n[r-1][i-1]+(t[r-1]===e[i-1]?0:1));return n[t.length][e.length]}(t,e)/n}function dye(t,e){const n=t.endWord-t.startWord,r=e.endWord-e.startWord;return n!==r?n>r:t.score<e.score}function fye(t){return t.trim().match(X_e)?.[0]?.trim()??null}function z3(t){return PR(t).split(" ").filter(Boolean).map(pye).join(" ")}function pye(t){const e=["atech","\u011btem","at\u016fm","ovat","ov\xe9ho","ov\xe9mu","\xfdmi","ami","emi","ovi","ov\xe9","\xe9ho","\xe9mu","\xe1ch","\xedch","ami","emi","ou","\u016fm","em","\u011bm","\u016fm","mi","ce","ci","ku","ka","ky","ek","ice","ici","iku","ika","iky","\xed","y"];for(const n of e){if(t.length<=3)return t;if(t.endsWith(n)&&t.length-n.length>=3)return t.slice(0,-n.length)}return t}function PR(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\p{L}\p{N}\s]/gu," ").replace(/\s+/g," ").trim()}const gye=(t,e)=>e.title,q3=(t,e)=>e.raw;function mye(t,e){1&t&&(ge(0,"p"),ae(1,"Suroviny p\u0159ed startem"),me())}function _ye(t,e){if(1&t&&(ge(0,"p"),ae(1),me()),2&t){const n=ne(2);$(),qc("Krok ",n.stepIndex()+1," / ",n.stepCount())}}function yye(t,e){if(1&t&&(ge(0,"span",8),ae(1),me()),2&t){const n=ne().$implicit;$(),Mi("(",n.note,")")}}function vye(t,e){if(1&t&&(ge(0,"li"),ae(1),xe(2,yye,2,1,"span",8),me()),2&t){const n=e.$implicit;$(),qc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),$(),ke(n.note?2:-1)}}function Iye(t,e){if(1&t&&(ge(0,"div",7)(1,"h3"),ae(2),me(),ge(3,"ul"),Ln(4,vye,3,3,"li",null,q3),me()()),2&t){const n=e.$implicit;$(2),Un(n.title),$(2),Fn(n.items)}}function Eye(t,e){if(1&t&&(ge(0,"article",3),Ln(1,Iye,6,1,"div",7,gye),me()),2&t){const n=ne();$(),Fn(n.ingredientSections)}}function wye(t,e){if(1&t&&(ge(0,"span",11),ae(1),me()),2&t){const n=ne().$implicit,r=ne(3);$(),Un(r.ingredientTokenLabel(n))}}function Tye(t,e){if(1&t&&(ge(0,"span"),ae(1),me()),2&t){const n=ne().$implicit;$(),Un(n.value)}}function bye(t,e){1&t&&xe(0,wye,2,1,"span",11)(1,Tye,2,1,"span"),2&t&&ke("ingredient"===e.$implicit.type?0:1)}function Cye(t,e){if(1&t&&(ge(0,"span"),ae(1),me()),2&t){const n=ne().$implicit;$(),qc(" \u2013 ",n.amount,"",n.unit?" "+n.unit:"")}}function Sye(t,e){if(1&t&&(ge(0,"span"),ae(1),me()),2&t){const n=ne().$implicit;$(),Mi(" (",n.note,")")}}function Aye(t,e){if(1&t&&(ge(0,"li")(1,"strong"),ae(2),me(),xe(3,Cye,2,2,"span"),xe(4,Sye,2,1,"span"),me()),2&t){const n=e.$implicit;$(2),Un(n.name),$(),ke(n.amount||n.unit?3:-1),$(),ke(n.note?4:-1)}}function Dye(t,e){if(1&t&&(ge(0,"aside",10)(1,"h3"),ae(2,"P\u0159ipomenut\xed surovin"),me(),ge(3,"ul"),Ln(4,Aye,5,3,"li",null,q3),me()()),2&t){const n=ne(3);$(4),Fn(n.highlightedIngredients())}}function Rye(t,e){if(1&t){const n=er();ge(0,"article",9),To("click",function(){return Et(n),wt(ne(2).nextStep())}),ge(1,"p"),Ln(2,bye,2,1,null,null,$g),me()(),xe(4,Dye,6,0,"aside",10)}if(2&t){const n=ne(2);$(2),Fn(n.stepTokens()),$(2),ke(n.highlightedIngredients().length>0?4:-1)}}function Mye(t,e){if(1&t){const n=er();ge(0,"header",1)(1,"button",2),To("click",function(){return Et(n),wt(ne().backToDetail())}),ae(2,"Zp\u011bt"),me(),ge(3,"div")(4,"h2"),ae(5),me(),xe(6,mye,2,0,"p")(7,_ye,2,2,"p"),me()(),xe(8,Eye,3,0,"article",3)(9,Rye,5,1),ge(10,"footer",4)(11,"button",5),To("click",function(){return Et(n),wt(ne().previousStep())}),ae(12,"P\u0159edchoz\xed"),me(),ge(13,"button",6),To("click",function(){return Et(n),wt(ne().nextStep())}),ae(14),me()()}if(2&t){const n=ne();$(5),Un(e.title),$(),ke(n.showIngredients()?6:7),$(2),ke(n.showIngredients()?8:9),$(3),Bc("disabled",n.stepIndex()<=-1),$(2),Bc("disabled",!n.showIngredients()&&n.stepIndex()>=n.stepCount()-1),$(),Mi(" ",n.showIngredients()?"Za\u010d\xedt va\u0159it":"Dal\u0161\xed krok"," ")}}function Pye(t,e){1&t&&(ge(0,"p"),ae(1,"Recept nebyl nalezen."),me())}let Nye=(()=>{var t;class e{constructor(){this.state=O(Va),this.route=O(ki),this.router=O(un),this.stepIndex=Ge(-1),this.showIngredients=Tt(()=>this.stepIndex()<0),this.parsed=Tt(()=>this.state.selectedParsed()),this.steps=Tt(()=>this.parsed()?.steps??[]),this.stepCount=Tt(()=>this.steps().length),this.currentStep=Tt(()=>{const r=this.stepIndex();return r<0?"":this.steps()[r]??""}),this.ingredientLookup=Tt(()=>{const r=this.parsed();return r?r.ingredientSections.flatMap(i=>i.items.map(o=>({key:G3(o.name,o.raw),input:{original:o.raw,item:o.name},ingredient:o}))):[]}),this.stepTokens=Tt(()=>{const r=this.currentStep();return r?function nye(t,e){if(!e)return[];const n=function rye(t){const e=[];let n=0;const r=/[\p{L}\p{N}]+(?:['\u2019-][\p{L}\p{N}]+)*/gu;for(const i of t.matchAll(r)){const o=i[0],s=i.index??0;s>n&&e.push({value:t.slice(n,s),isWord:!1}),e.push({value:o,isWord:!0}),n=s+o.length}return n<t.length&&e.push({value:t.slice(n),isWord:!1}),e}(e),r=function iye(t){return t.flatMap((e,n)=>e.isWord?[{value:e.value,segmentIndex:n}]:[])}(n);if(0===r.length||0===t.length)return[{type:"text",value:e}];const o=function sye(t,e){const n=[];let r=0;for(;r<t.length;){const i=aye(t,r,e);i?(n.push(i),r=i.endWord+1):r+=1}return n}(r,t.map(oye).filter(s=>s.normalized.length>0));return function hye(t,e){if(0===e.length)return[{type:"text",value:t.map(i=>i.value).join("")}];const n=[];let r=0;for(const i of e){if(r<i.segmentStart){const s=t.slice(r,i.segmentStart).map(a=>a.value).join("");s&&n.push({type:"text",value:s})}const o=t.slice(i.segmentStart,i.segmentEnd+1).map(s=>s.value).join("");n.push({type:"ingredient",value:o,ingredient:i.ingredient.item,amount:i.ingredient.amount,original:i.ingredient.original}),r=i.segmentEnd+1}if(r<t.length){const i=t.slice(r).map(o=>o.value).join("");i&&n.push({type:"text",value:i})}return n}(n,o)}(this.ingredientLookup().map(({input:o})=>o),r):[]}),this.highlightedIngredients=Tt(()=>{const r=new Map(this.ingredientLookup().map(i=>[i.key,i.ingredient]));return this.stepTokens().flatMap(i=>"ingredient"===i.type?[i]:[]).map(i=>r.get(G3(i.ingredient,i.original))).filter(i=>void 0!==i).filter((i,o,s)=>s.findIndex(a=>a.raw===i.raw)===o)})}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");if(!i)return void(yield r.router.navigateByUrl("/recipes"));0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i);const o=r.state.selectedParsed();if(!o)return void(yield r.router.navigate(["/recipes",i]));r.stepIndex.set(-1);const s=r.readProgress(i,o);null!==s&&(window.confirm(`Pokra\u010dovat od kroku ${s.stepIndex+1}?`)?r.stepIndex.set(s.stepIndex):r.clearProgress(i))})()}previousStep(){const r=this.stepIndex()-1;r<-1||(this.stepIndex.set(r),this.persistProgress())}nextStep(){if(this.showIngredients())return this.stepIndex.set(0),void this.persistProgress();const r=this.stepIndex()+1;if(r>=this.stepCount())return this.stepIndex.set(this.stepCount()-1),void this.persistProgress();this.stepIndex.set(r),this.persistProgress()}backToDetail(){var r=this;return v(function*(){const i=r.state.selectedRecipeId();i?yield r.router.navigate(["/recipes",i]):yield r.router.navigateByUrl("/recipes")})()}ingredientTokenLabel(r){return r.amount?`${r.value} (${r.amount})`:r.value}persistProgress(){const r=this.state.selectedRecipeId();if(!r)return;const i=this.stepIndex();if(i<0)return void this.clearProgress(r);const o={stepIndex:i,startedAt:(new Date).toISOString()};localStorage.setItem(NR(r),JSON.stringify(o))}readProgress(r,i){const o=localStorage.getItem(NR(r));if(!o)return null;try{const s=JSON.parse(o);return s.stepIndex<0||s.stepIndex>=i.steps.length?(this.clearProgress(r),null):s}catch{return this.clearProgress(r),null}}clearProgress(r){localStorage.removeItem(NR(r))}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-cooking-mode"]],decls:3,vars:1,consts:[[1,"cooking-screen"],[1,"cooking-header"],["type","button",1,"ghost",3,"click"],[1,"ingredient-overview"],[1,"step-controls"],["type","button",1,"ghost",3,"click","disabled"],["type","button",3,"click","disabled"],[1,"section-block"],[1,"ingredient-note"],[1,"step-card",3,"click"],[1,"inline-help"],[1,"step-ingredient"]],template:function(i,o){if(1&i&&(ge(0,"section",0),xe(1,Mye,15,6)(2,Pye,2,0,"p"),me()),2&i){let s;$(),ke((s=o.parsed())?1:2,s)}},styles:[".cooking-screen[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;width:100vw;min-height:100dvh;padding:max(1rem,env(safe-area-inset-top)) 1rem max(1rem,env(safe-area-inset-bottom));display:grid;gap:1rem}.cooking-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.ingredient-overview[_ngcontent-%COMP%], .step-card[_ngcontent-%COMP%], .inline-help[_ngcontent-%COMP%]{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:1rem}.step-card[_ngcontent-%COMP%]{min-height:32vh;display:flex;align-items:center;justify-content:center;text-align:center;cursor:pointer}.step-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1.4rem,5vw,2.2rem);line-height:1.4}.section-block[_ngcontent-%COMP%]{display:grid;gap:.5rem}.section-block[_ngcontent-%COMP%] + .section-block[_ngcontent-%COMP%]{margin-top:.75rem}ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.4rem}.ingredient-note[_ngcontent-%COMP%]{color:#cbd5e1}.step-controls[_ngcontent-%COMP%]{margin-top:auto;display:grid;grid-template-columns:1fr 1fr;gap:.65rem}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.9rem 1rem;background:#22c55e;color:#052e16;font:inherit;font-weight:600}button.ghost[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.cooking-screen[_ngcontent-%COMP%]{padding:1.5rem}}.step-ingredient[_ngcontent-%COMP%]{color:#86efac;font-weight:700}"]}))}return t(),e})();function NR(t){return`cooking-progress:${t}`}function G3(t,e){return`${t}:::${e}`}let W3=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(te(ks),te(Nr))};static \u0275dir=Ae({type:t})}return t})(),La=(()=>{class t extends W3{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Zt(t)))(i||t)}})();static \u0275dir=Ae({type:t,features:[Ke]})}return t})();const pi=new z(""),Oye={provide:pi,useExisting:st(()=>df),multi:!0},Lye=new z("");let df=(()=>{class t extends W3{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Vye(){const t=ho()?ho().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(te(ks),te(Nr),te(Lye,8))};static \u0275dir=Ae({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ve("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[gt([Oye]),Ke]})}return t})();const Cn=new z(""),ts=new z("");function rz(t){return null!=t}function iz(t){return Ng(t)?vn(t):t}function oz(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function sz(t,e){return e.map(n=>n(t))}function az(t){return t.map(e=>function Uye(t){return!t.validate}(e)?e:n=>e.validate(n))}function OR(t){return null!=t?function cz(t){if(!t)return null;const e=t.filter(rz);return 0==e.length?null:function(n){return oz(sz(n,e))}}(az(t)):null}function VR(t){return null!=t?function uz(t){if(!t)return null;const e=t.filter(rz);return 0==e.length?null:function(n){return function xye(...t){const e=o2(t),{args:n,keys:r}=s2(t),i=new Ft(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;ei(n[d]).subscribe(Gt(o,f=>{h||(h=!0,u--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?c2(r,a):a),o.complete())}))}});return e?i.pipe(a2(e)):i}(sz(n,e).map(iz)).pipe(ze(oz))}}(az(t)):null}function lz(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function LR(t){return t?Array.isArray(t)?t:[t]:[]}function Cy(t,e){return Array.isArray(t)?t.includes(e):t===e}function fz(t,e){const n=LR(e);return LR(t).forEach(i=>{Cy(n,i)||n.push(i)}),n}function pz(t,e){return LR(e).filter(n=>!Cy(t,n))}class gz{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Hn extends gz{name;get formDirective(){return null}get path(){return null}}class ns extends gz{_parent=null;name=null;valueAccessor=null}class mz{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let FR=(()=>{class t extends mz{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(te(ns,2))};static \u0275dir=Ae({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&br("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ke]})}return t})();const hf="VALID",Ay="INVALID",rl="PENDING",ff="DISABLED";class il{}class yz extends il{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class BR extends il{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class $R extends il{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Dy extends il{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class HR extends il{source;constructor(e){super(),this.source=e}}function Ry(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class GR{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mt(this.statusReactive)}set status(e){mt(()=>this.statusReactive.set(e))}_status=Tt(()=>this.statusReactive());statusReactive=Ge(void 0);get valid(){return this.status===hf}get invalid(){return this.status===Ay}get pending(){return this.status==rl}get disabled(){return this.status===ff}get enabled(){return this.status!==ff}errors;get pristine(){return mt(this.pristineReactive)}set pristine(e){mt(()=>this.pristineReactive.set(e))}_pristine=Tt(()=>this.pristineReactive());pristineReactive=Ge(!0);get dirty(){return!this.pristine}get touched(){return mt(this.touchedReactive)}set touched(e){mt(()=>this.touchedReactive.set(e))}_touched=Tt(()=>this.touchedReactive());touchedReactive=Ge(!1);get untouched(){return!this.touched}_events=new Gn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pz(e,this._rawAsyncValidators))}hasValidator(e){return Cy(this._rawValidators,e)}hasAsyncValidator(e){return Cy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new $R(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new $R(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new BR(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new BR(!0,r))}markAsPending(e={}){this.status=rl;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Dy(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=ff,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new yz(this.value,r)),this._events.next(new Dy(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=hf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hf||this.status===rl)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new yz(this.value,n)),this._events.next(new Dy(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ff:hf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=rl,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=iz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Dy(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?ff:this.errors?Ay:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rl)?rl:this._anyControlsHaveStatus(Ay)?Ay:hf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new BR(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new $R(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ry(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Wye(t){return Array.isArray(t)?OR(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Kye(t){return Array.isArray(t)?VR(t):t||null}(this._rawAsyncValidators)}}const ol=new z("",{providedIn:"root",factory:()=>My}),My="always";function pf(t,e,n=My){(function KR(t,e){const n=function dz(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(lz(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function hz(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(lz(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();xy(e._rawValidators,i),xy(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Jye(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&wz(t,e)})}(t,e),function Xye(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Zye(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&wz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Yye(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function xy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function wz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Cz(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sz(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const Az=class extends GR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function zR(t){return(Ry(t)?t.validators:t)||null}(n),function qR(t,e){return(Ry(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ry(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Sz(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new HR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},uve={provide:ns,useExisting:st(()=>Fy)},Dz=Promise.resolve();let Fy=(()=>{class t extends ns{_changeDetectorRef;callSetDisabledState;control=new Az;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Bt;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function JR(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===df?n=o:function nve(t){return Object.getPrototypeOf(t.constructor)===La}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function YR(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Dz.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Jc(r);Dz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Py(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(te(Hn,9),te(Cn,10),te(ts,10),te(pi,10),te(hm,8),te(ol,8))};static \u0275dir=Ae({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[gt([uve]),Ke,Si]})}return t})(),kve=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=wg({type:t});static \u0275inj=_l({})}return t})(),Wz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ol,useValue:n.callSetDisabledState??My}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=wg({type:t});static \u0275inj=_l({imports:[kve]})}return t})();const Vve=(t,e)=>e.recipe.id;function Lve(t,e){1&t&&(J(0,"p"),ae(1,"Loading"),X())}function Fve(t,e){1&t&&(J(0,"p"),ae(1,"No recipes"),X())}function Uve(t,e){1&t&&Fe(0,"img",9),2&t&&rt("src",e,yo)}function jve(t,e){1&t&&Fe(0,"mark",13),2&t&&rt("textContent",ne().$implicit.text)}function Bve(t,e){1&t&&Fe(0,"span",13),2&t&&rt("textContent",ne().$implicit.text)}function $ve(t,e){1&t&&xe(0,jve,1,1,"mark",13)(1,Bve,1,1,"span",13),2&t&&ke(e.$implicit.highlighted?0:1)}function Hve(t,e){1&t&&Fe(0,"mark",13),2&t&&rt("textContent",ne().$implicit.text)}function zve(t,e){1&t&&Fe(0,"span",13),2&t&&rt("textContent",ne().$implicit.text)}function qve(t,e){1&t&&xe(0,Hve,1,1,"mark",13)(1,zve,1,1,"span",13),2&t&&ke(e.$implicit.highlighted?0:1)}function Gve(t,e){if(1&t&&(J(0,"small",12),Ln(1,qve,2,1,null,null,$g),X()),2&t){const n=ne().$implicit;Vn("aria-label",n.contentLabel||"Recipe snippet"),$(),Fn(n.contentParts)}}function Wve(t,e){if(1&t){const n=er();J(0,"li")(1,"button",8),Ve("click",function(){const i=Et(n).$implicit;return wt(ne(3).open(i.recipe.id))}),xe(2,Uve,1,1,"img",9),J(3,"div",10)(4,"span",11),Ln(5,$ve,2,1,null,null,$g),X(),xe(7,Gve,3,1,"small",12),X()()()}if(2&t){let n;const r=e.$implicit,i=ne(3);$(),br("recipe-item-with-image",i.hasThumb(r.recipe))("recipe-item-no-image",!i.hasThumb(r.recipe)),$(),ke((n=i.firstThumb(r.recipe))?2:-1,n),$(3),Fn(r.titleParts),$(2),ke(r.contentParts.length>0?7:-1)}}function Kve(t,e){if(1&t&&(J(0,"ul",7),Ln(1,Wve,8,6,"li",null,Vve),X()),2&t){const n=ne(2);$(),Fn(n.state.searchResults())}}function Qve(t,e){if(1&t&&(J(0,"section",6),xe(1,Lve,2,0,"p")(2,Fve,2,0,"p")(3,Kve,3,0,"ul",7),X()),2&t){const n=ne();br("loading",n.state.loading()),$(),ke(n.state.loading()?1:0===n.state.searchResults().length?2:3)}}let Yve=(()=>{var t;class e{constructor(){this.state=O(Va),this.router=O(un)}ngOnInit(){var r=this;return v(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return v(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}hasThumb(r){return null!==this.firstThumb(r)}firstThumb(r){const i=r.primary_image_id;return i?r.image_thumbs.find(o=>o.id===i)?.data_url??r.image_thumbs[0]?.data_url??null:r.image_thumbs[0]?.data_url??null}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-home"]],decls:7,vars:4,consts:[[1,"home-screen"],[1,"search-layout"],[1,"search-wrap"],["for","recipe-search",1,"search-label"],["id","recipe-search","type","search","placeholder","name, ingredient, step",3,"ngModelChange","ngModel"],[1,"results",3,"loading"],[1,"results"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],["alt","Recipe image","loading","lazy",3,"src"],[1,"recipe-meta"],["aria-label","Recipe title",1,"recipe-title-parts"],[1,"recipe-snippet"],[3,"textContent"]],template:function(i,o){1&i&&(J(0,"section",0)(1,"div",1)(2,"div",2)(3,"label",3),ae(4,"Find recipe"),X(),J(5,"input",4),Ve("ngModelChange",function(a){return o.state.searchQuery.set(a)}),X()(),xe(6,Qve,4,3,"section",5),X()()),2&i&&(br("has-query",o.state.searchQuery().trim().length>0),$(5),rt("ngModel",o.state.searchQuery()),$(),ke(o.state.searchQuery().trim().length>0?6:-1))},dependencies:[Wz,df,FR,Fy],styles:[".home-screen[_ngcontent-%COMP%]{padding:.3rem 0;min-height:60vh}.search-layout[_ngcontent-%COMP%]{display:grid;gap:.55rem;align-items:start}.search-wrap[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:#fff;padding-bottom:.3rem;display:grid;gap:.3rem}.search-label[_ngcontent-%COMP%]{font-size:.72rem;color:#4b5563}input[_ngcontent-%COMP%]{width:100%;border:1px solid #d1d5db;border-radius:6px;padding:.6rem .75rem;background:#fff;font:inherit}.results[_ngcontent-%COMP%]{align-self:start}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.45rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.42rem;background:#fff;color:#0f172a;border:1px solid #e5e7eb;border-radius:6px;font:inherit;display:grid;grid-template-columns:1fr;gap:.45rem;align-items:start}.recipe-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px;object-fit:cover;border-radius:4px}p[_ngcontent-%COMP%]{margin:0}@media (min-width: 900px){.home-screen.has-query[_ngcontent-%COMP%]   .search-layout[_ngcontent-%COMP%]{grid-template-columns:minmax(220px,300px) minmax(0,1fr);column-gap:.8rem}}@media (min-width: 768px){.home-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.45rem 0}}.recipe-meta[_ngcontent-%COMP%]{min-width:0;display:grid;gap:.15rem}.recipe-title-parts[_ngcontent-%COMP%]{min-width:0;color:#111827;font-weight:600;font-size:.88rem;line-height:1.2}.recipe-title-parts[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .recipe-title-parts[_ngcontent-%COMP%] > mark[_ngcontent-%COMP%], .recipe-snippet[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .recipe-snippet[_ngcontent-%COMP%] > mark[_ngcontent-%COMP%]{margin:0;padding:0}.recipe-snippet[_ngcontent-%COMP%]{min-width:0;color:#4b5563;font-size:.76rem;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}mark[_ngcontent-%COMP%]{background:#fff59d;padding:0}.recipe-item-with-image[_ngcontent-%COMP%]{grid-template-columns:44px 1fr}.recipe-item-no-image[_ngcontent-%COMP%]{grid-template-columns:1fr}"]}))}return t(),e})(),Jve=(()=>{var t;class e{constructor(){this.api=O(Oa),this.state=O(Va),this.router=O(un),this.authBusy=!1}signIn(){var r=this;return v(function*(){r.authBusy=!0,r.state.error.set("");try{yield r.api.signInWithGoogle(),yield r.state.refresh(),yield r.router.navigateByUrl("/")}catch(i){r.state.error.set(i.message)}finally{r.authBusy=!1}})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"login-screen"],["type","button",3,"click","disabled"]],template:function(i,o){1&i&&(ge(0,"section",0)(1,"h1"),ae(2,"Recipes"),me(),ge(3,"button",1),To("click",function(){return o.signIn()}),ae(4,"Continue with Google"),me()()),2&i&&($(3),Bc("disabled",o.authBusy))},styles:[".login-screen[_ngcontent-%COMP%]{min-height:85vh;background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0;color:#111827}button[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}button[_ngcontent-%COMP%]:disabled{opacity:.45}"]}))}return t(),e})();const Zve=(t,e)=>e.title,Xve=(t,e)=>e.message;function eIe(t,e){if(1&t&&(ge(0,"h2"),ae(1),me()),2&t){const n=ne();$(),Un(n.title)}}function tIe(t,e){if(1&t&&(ge(0,"span",3),ae(1),me()),2&t){const n=ne().$implicit;$(),Mi("(",n.note,")")}}function nIe(t,e){if(1&t&&(ge(0,"li"),ae(1),xe(2,tIe,2,1,"span",3),me()),2&t){const n=e.$implicit;$(),qc(" ",n.amount?n.amount+(n.unit?" "+n.unit:"")+" ":"","",n.name," "),$(),ke(n.note?2:-1)}}function rIe(t,e){if(1&t&&(ge(0,"div",1)(1,"h3"),ae(2),me(),ge(3,"ul"),Ln(4,nIe,3,3,"li",null,Mw),me()()),2&t){const n=e.$implicit;$(2),Un(n.title),$(2),Fn(n.items)}}function iIe(t,e){if(1&t&&(ge(0,"li"),ae(1),me()),2&t){const n=e.$implicit;$(),Un(n.message)}}function oIe(t,e){if(1&t&&(ge(0,"div",2)(1,"h3"),ae(2,"Warnings"),me(),ge(3,"ul"),Ln(4,iIe,2,1,"li",null,Xve),me()()),2&t){const n=ne();$(4),Fn(n.warnings)}}function sIe(t,e){if(1&t&&(ge(0,"li"),ae(1),me()),2&t){const n=e.$implicit;$(),Un(n)}}function aIe(t,e){if(1&t&&(ge(0,"div",1)(1,"h3"),ae(2,"Steps"),me(),ge(3,"ol"),Ln(4,sIe,2,1,"li",null,Mw),me()()),2&t){const n=ne();$(4),Fn(n.steps)}}function cIe(t,e){if(1&t&&(ge(0,"article",0),xe(1,eIe,2,1,"h2"),Ln(2,rIe,6,1,"div",1,Zve),xe(4,oIe,6,0,"div",2),xe(5,aIe,6,0,"div",1),me()),2&t){const n=e,r=ne();$(),ke(r.showTitle()?1:-1),$(),Fn(n.ingredientSections),$(2),ke(r.showWarnings()&&n.warnings.length?4:-1),$(),ke(n.steps.length?5:-1)}}let Kz=(()=>{var t;class e{constructor(){this.parsed=um(null),this.showWarnings=um(!1),this.showTitle=um(!0)}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-recipe-preview"]],inputs:{parsed:[1,"parsed"],showWarnings:[1,"showWarnings"],showTitle:[1,"showTitle"]},decls:1,vars:1,consts:[[1,"recipe-card"],[1,"block"],[1,"block","parser-warnings"],[1,"ingredient-note"]],template:function(i,o){if(1&i&&xe(0,cIe,6,3,"article",0),2&i){let s;ke((s=o.parsed())?0:-1,s)}},styles:[".recipe-card[_ngcontent-%COMP%]{display:grid;gap:.9rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}h2[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.25}h3[_ngcontent-%COMP%]{font-size:.88rem;color:#374151;text-transform:uppercase;letter-spacing:.03em}.block[_ngcontent-%COMP%]{display:grid;gap:.35rem}.block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .block[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1rem;display:grid;gap:.25rem;line-height:1.3}.parser-warnings[_ngcontent-%COMP%]{color:#92400e}.ingredient-note[_ngcontent-%COMP%]{color:#6b7280}"]}))}return t(),e})();const uIe=(t,e)=>e.id;function lIe(t,e){if(1&t){const n=er();J(0,"button",40),Ve("click",function(){const i=Et(n).$implicit;return wt(ne(4).selectImage(i.id))}),Fe(1,"img",41),X()}if(2&t){const n=e.$implicit;$(),rt("src",n.data_url,yo)}}function dIe(t,e){if(1&t&&(J(0,"div",38),Ln(1,lIe,2,1,"button",39,uIe),X()),2&t){const n=ne(3);$(),Fn(n.images())}}function hIe(t,e){if(1&t){const n=er();J(0,"section",25)(1,"button",36),Ve("click",function(){const i=Et(n);return wt(ne(2).openGallery(i.id))}),Fe(2,"img",37),X(),xe(3,dIe,3,0,"div",38),X()}if(2&t){const n=ne(2);$(2),rt("src",e.full_data_url,yo),$(),ke(n.images().length>1?3:-1)}}function fIe(t,e){if(1&t){const n=er();J(0,"section",42),Ve("click",function(){return Et(n),wt(ne(2).closeGallery())}),Fe(1,"img",43),X()}2&t&&($(),rt("src",e.full_data_url,yo))}function pIe(t,e){if(1&t){const n=er();J(0,"div",22)(1,"h1",23),ae(2),X(),Fe(3,"app-recipe-preview",24),X(),xe(4,hIe,4,2,"section",25),J(5,"div",26)(6,"button",27),Ve("click",function(){return Et(n),wt(ne().startCooking())}),Mr(),J(7,"svg",28),Fe(8,"use",29),X(),Es(),J(9,"span"),ae(10,"Cook"),X()(),J(11,"button",30),Ve("click",function(){return Et(n),wt(ne().edit())}),Mr(),J(12,"svg",28),Fe(13,"use",31),X()(),Es(),J(14,"button",32),Ve("click",function(){return Et(n),wt(ne().remove())}),Mr(),J(15,"svg",28),Fe(16,"use"),X()(),Es(),J(17,"button",33),Ve("click",function(){return Et(n),wt(ne().state.print())}),Mr(),J(18,"svg",28),Fe(19,"use",34),X()()(),xe(20,fIe,2,1,"section",35)}if(2&t){let n,r;const i=e,o=ne();$(2),Un(i.title),$(),rt("parsed",i)("showTitle",!1),$(),ke((n=o.activeImage())?4:-1,n),$(7),rt("disabled",!o.api.canWrite()),$(3),rt("disabled",!o.api.canWrite()||o.state.deleting()),$(2),Vn("href",o.state.deleting()?"#icon-progress":"#icon-delete"),$(4),ke((r=o.galleryOpen()&&o.activeImage())?20:-1,r)}}function gIe(t,e){1&t&&(J(0,"p"),ae(1,"Recipe not found"),X())}let mIe=(()=>{var t;class e{constructor(){this.state=O(Va),this.api=O(Oa),this.images=Ge([]),this.selectedImageId=Ge(null),this.galleryOpen=Ge(!1),this.route=O(ki),this.router=O(un)}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),yield r.loadImages(i)):yield r.router.navigateByUrl("/recipes")})()}edit(){var r=this;return v(function*(){r.state.startEditSelected();const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"edit"]))})()}startCooking(){var r=this;return v(function*(){const i=r.state.selectedRecipeId();i&&(yield r.router.navigate(["/recipes",i,"cook"]))})()}remove(){var r=this;return v(function*(){(yield r.state.deleteSelected())&&(yield r.router.navigateByUrl("/recipes"))})()}selectImage(r){this.selectedImageId.set(r)}openGallery(r){this.selectedImageId.set(r),this.galleryOpen.set(!0)}closeGallery(){this.galleryOpen.set(!1)}activeImage(){const r=this.selectedImageId(),i=this.images();return r?i.find(o=>o.id===r)??i[0]??null:i[0]??null}pickPrimaryImageId(r,i){return i?r.find(o=>o.id===i)?.id??r[0]?.id??null:r[0]?.id??null}loadImages(r){var i=this;return v(function*(){const o=i.state.recipes().find(u=>u.id===r),s=o?.image_thumbs.map(u=>i.api.getCachedRecipeImage(r,u.id)).filter(u=>null!==u),a=o?.primary_image_id;s&&s.length>0&&(i.images.set(s),i.selectedImageId.set(i.pickPrimaryImageId(s,a)));const c=yield i.api.listRecipeImages(r);i.images.set(c),i.selectedImageId.set(i.pickPrimaryImageId(c,a))})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-recipe-detail"]],decls:24,vars:1,consts:[[1,"detail-screen"],["aria-hidden","true","focusable","false",1,"icon-sprite"],["id","icon-cook","viewBox","0 0 24 24"],["d","M4 10h16v7a3 3 0 01-3 3H7a3 3 0 01-3-3v-7z"],["d","M7 10V8a5 5 0 0110 0v2"],["d","M9 4c0 1-1 1.5-1 2.5S9 8 9 9"],["d","M12 4c0 1-1 1.5-1 2.5S12 8 12 9"],["d","M15 4c0 1-1 1.5-1 2.5S15 8 15 9"],["id","icon-edit","viewBox","0 0 24 24"],["d","M4 20h4l10-10-4-4L4 16v4z"],["d","M13 7l4 4"],["id","icon-delete","viewBox","0 0 24 24"],["d","M6 7h12"],["d","M9 7V5h6v2"],["d","M8 7l1 12h6l1-12"],["id","icon-print","viewBox","0 0 24 24"],["d","M7 9V4h10v5"],["d","M6 17H5a2 2 0 01-2-2v-4a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2h-1"],["d","M7 14h10v6H7z"],["id","icon-progress","viewBox","0 0 24 24"],["d","M12 3a9 9 0 109 9"],["d","M12 3v6h6"],[1,"printable-recipe"],[1,"detail-headline"],[3,"parsed","showTitle"],[1,"hero-image","no-print"],["aria-label","Recipe actions",1,"detail-actions","no-print"],["type","button","aria-label","Start cooking","title","Cooking mode",1,"cook",3,"click"],["aria-hidden","true",1,"icon"],["href","#icon-cook"],["type","button","aria-label","Edit recipe",1,"ghost",3,"click","disabled"],["href","#icon-edit"],["type","button","aria-label","Delete recipe",1,"danger",3,"click","disabled"],["type","button","aria-label","Print recipe",1,"ghost",3,"click"],["href","#icon-print"],[1,"gallery-overlay","no-print"],["type","button",1,"hero-button",3,"click"],["alt","Recipe photo",3,"src"],["aria-label","Other photos",1,"thumb-strip"],["type","button",1,"thumb"],["type","button",1,"thumb",3,"click"],["alt","thumbnail",3,"src"],[1,"gallery-overlay","no-print",3,"click"],["alt","Recipe image large",3,"src"]],template:function(i,o){if(1&i&&(J(0,"section",0),Mr(),J(1,"svg",1)(2,"symbol",2),Fe(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),X(),J(8,"symbol",8),Fe(9,"path",9)(10,"path",10),X(),J(11,"symbol",11),Fe(12,"path",12)(13,"path",13)(14,"path",14),X(),J(15,"symbol",15),Fe(16,"path",16)(17,"path",17)(18,"path",18),X(),J(19,"symbol",19),Fe(20,"path",20)(21,"path",21),X()(),xe(22,pIe,21,8)(23,gIe,2,0,"p"),X()),2&i){let s;$(22),ke((s=o.state.selectedParsed())?22:23,s)}},dependencies:[Kz],styles:[".icon-sprite[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}.detail-screen[_ngcontent-%COMP%]{padding:.3rem 0;min-height:60vh}.detail-headline[_ngcontent-%COMP%]{margin:0 0 .45rem;font-size:1.02rem;line-height:1.25}.hero-image[_ngcontent-%COMP%]{margin-top:.6rem;margin-bottom:3.8rem}.hero-button[_ngcontent-%COMP%]{padding:0;border:0;background:transparent;width:100%}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:188px;object-fit:cover;border-radius:4px}.thumb-strip[_ngcontent-%COMP%]{display:flex;gap:.35rem;margin-top:.35rem;overflow-x:auto}.thumb[_ngcontent-%COMP%]{padding:0;border:1px solid #e5e7eb;border-radius:4px;background:transparent}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:3px}.gallery-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#020617e6;display:grid;place-items:center;z-index:1000;padding:.75rem}.gallery-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.detail-actions[_ngcontent-%COMP%]{position:fixed;left:.55rem;right:.55rem;bottom:calc(4.5rem + env(safe-area-inset-bottom));margin:0 auto;max-width:920px;display:grid;grid-template-columns:1.4fr repeat(3,1fr);gap:.3rem;padding:.35rem;border-radius:6px;background:#fff;border:1px solid #e5e7eb}button[_ngcontent-%COMP%]{border:0;border-radius:6px;padding:.5rem;background:#111827;color:#fff;font:inherit}button.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:#1f2937}button.danger[_ngcontent-%COMP%]{background:#b91c1c}button.ghost[_ngcontent-%COMP%], button.danger[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}.cook[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.32rem;font-weight:600}button[_ngcontent-%COMP%]:disabled{opacity:.45}@media (min-width: 768px){.detail-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.45rem 0}.detail-actions[_ngcontent-%COMP%]{position:sticky;left:auto;right:auto;bottom:.5rem;max-width:none;margin-top:.6rem}.hero-image[_ngcontent-%COMP%]{margin-bottom:0}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px}}@media print{.detail-actions[_ngcontent-%COMP%], .no-print[_ngcontent-%COMP%]{display:none!important}.detail-screen[_ngcontent-%COMP%]{padding:0;border:0;min-height:auto}}"]}))}return t(),e})();function Qz(t){return tM.apply(this,arguments)}function tM(){return tM=v(function*(t){const e=yield function EIe(t){return nM.apply(this,arguments)}(t),n=Yz(e,1600),r=Yz(e,360);return{id:typeof crypto<"u"&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`,fullDataUrl:n.dataUrl,thumbDataUrl:r.dataUrl,mimeType:"image/webp",width:n.width,height:n.height}}),tM.apply(this,arguments)}function nM(){return(nM=v(function*(t){const e=yield function wIe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;"string"==typeof i?e(i):n(new Error("Nepoda\u0159ilo se na\u010d\xedst soubor obr\xe1zku."))},r.onerror=()=>n(new Error("Nepoda\u0159ilo se na\u010d\xedst soubor obr\xe1zku.")),r.readAsDataURL(t)})}(t);return new Promise((n,r)=>{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Nepoda\u0159ilo se na\u010d\xedst obr\xe1zek.")),i.src=e})})).apply(this,arguments)}function Yz(t,e){const n=Math.min(1,e/Math.max(t.width,t.height)),r=Math.max(1,Math.round(t.width*n)),i=Math.max(1,Math.round(t.height*n)),o=document.createElement("canvas");o.width=r,o.height=i;const s=o.getContext("2d");if(!s)throw new Error("Prohl\xed\u017ee\u010d nepodporuje zpracov\xe1n\xed obr\xe1zk\u016f.");return s.drawImage(t,0,0,r,i),{dataUrl:o.toDataURL("image/webp",.8),width:r,height:i}}const TIe=(t,e)=>e.id;function bIe(t,e){if(1&t&&(J(0,"p",7),ae(1),X()),2&t){const n=ne();$(),Un(n.state.error())}}function CIe(t,e){if(1&t){const n=er();J(0,"section",8)(1,"textarea",10),Ve("ngModelChange",function(i){return Et(n),wt(ne().state.rawText.set(i))}),X(),J(2,"div",11),Fe(3,"app-recipe-preview",12),X()()}if(2&t){const n=ne();$(),rt("ngModel",n.state.rawText())("disabled",!n.api.canWrite()),$(2),rt("parsed",n.state.parsed())("showWarnings",!0)}}function SIe(t,e){1&t&&(J(0,"p",16),ae(1,"No images yet. Add your first photo."),X())}function AIe(t,e){if(1&t){const n=er();J(0,"article",18)(1,"div",19),Fe(2,"img",20),J(3,"button",21),Ve("click",function(){const i=Et(n).$implicit;return wt(ne(3).setPrimaryImage(i.id))}),ae(4," \u{1f451} "),X()(),J(5,"div",22)(6,"input",23,1),Ve("change",function(i){const o=Et(n).$implicit;return wt(ne(3).replaceImage(o.id,i))}),X(),J(8,"button",24),Ve("click",function(){return Et(n),wt(Bw(7).click())}),ae(9," Replace "),X(),J(10,"button",25),Ve("click",function(){const i=Et(n).$implicit;return wt(ne(3).removeImage(i.id))}),ae(11," Remove "),X()()()}if(2&t){const n=e.$implicit,r=ne(3);$(2),rt("src",n.thumbDataUrl,yo),$(),br("active",r.isPrimaryImage(n.id)),rt("disabled",!r.api.canWrite())("title",r.isPrimaryImage(n.id)?"Primary image":"Set as primary image"),Vn("aria-label",r.isPrimaryImage(n.id)?"Primary image selected":"Set as primary image"),$(3),rt("disabled",!r.api.canWrite()),$(2),rt("disabled",!r.api.canWrite()),$(2),rt("disabled",!r.api.canWrite())}}function DIe(t,e){if(1&t&&(J(0,"div",17),Ln(1,AIe,12,9,"article",18,TIe),X()),2&t){const n=ne(2);$(),Fn(n.images())}}function RIe(t,e){if(1&t){const n=er();J(0,"section",9)(1,"header",13)(2,"h3"),ae(3,"Recipe images"),X(),J(4,"p"),ae(5,"Add photos, replace old ones, or remove images you no longer want."),X()(),J(6,"input",14,0),Ve("change",function(i){return Et(n),wt(ne().addImages(i))}),X(),J(8,"button",15),Ve("click",function(){return Et(n),wt(Bw(7).click())}),ae(9," + Add images "),X(),xe(10,SIe,2,0,"p",16)(11,DIe,3,0,"div",17),X()}if(2&t){const n=ne();$(6),rt("disabled",!n.api.canWrite()),$(2),rt("disabled",!n.api.canWrite()),$(2),ke(0===n.images().length?10:11)}}let Jz=(()=>{var t;class e{constructor(){this.state=O(Va),this.api=O(Oa),this.images=Ge([]),this.activeTab=Ge("content"),this.primaryImageId=Ge(null),this.route=O(ki),this.router=O(un)}ngOnInit(){var r=this;return v(function*(){const i=r.route.snapshot.paramMap.get("id");i?(0===r.state.recipes().length&&(yield r.state.refresh()),r.state.openDetail(i),r.state.startEditSelected(),yield r.loadImages(i)):r.state.startAdd()})()}setTab(r){this.activeTab.set(r)}setPrimaryImage(r){this.primaryImageId.set(r)}isPrimaryImage(r){return this.primaryImageId()===r}save(){var r=this;return v(function*(){const i=yield r.state.saveSelected();if(i)try{yield r.syncImages(i),yield r.state.refresh(),yield r.router.navigateByUrl("/recipes")}catch(o){r.state.error.set(o.message)}})()}addImages(r){var i=this;return v(function*(){const o=r.target,s=Array.from(o.files??[]);for(const a of s){const c=yield Qz(a);i.images.update(u=>[...u,{id:c.id,thumbDataUrl:c.thumbDataUrl,fullDataUrl:c.fullDataUrl,mimeType:c.mimeType,width:c.width,height:c.height}]),i.primaryImageId()||i.primaryImageId.set(c.id)}o.value=""})()}replaceImage(r,i){var o=this;return v(function*(){const s=i.target,a=s.files?.[0];if(!a)return;const c=yield Qz(a);o.images.update(u=>u.map(d=>d.id===r?{...d,thumbDataUrl:c.thumbDataUrl,fullDataUrl:c.fullDataUrl,mimeType:c.mimeType,width:c.width,height:c.height}:d)),s.value=""})()}removeImage(r){if(this.images.update(o=>o.filter(s=>s.id!==r)),this.primaryImageId()!==r)return;const i=this.images()[0]?.id??null;this.primaryImageId.set(i)}loadImages(r){var i=this;return v(function*(){const o=yield i.api.listRecipeImages(r);i.images.set(o.map(u=>i.fromApiImage(u)));const a=i.state.recipes().find(u=>u.id===r)?.primary_image_id,c=!!a&&o.some(u=>u.id===a);i.primaryImageId.set(c?a??null:o[0]?.id??null)})()}fromApiImage(r){return{id:r.id,thumbDataUrl:r.data_url,fullDataUrl:r.full_data_url,mimeType:r.mime_type,width:r.width,height:r.height}}syncImages(r){var i=this;return v(function*(){const o=yield i.api.listRecipeImages(r),s=new Set(i.images().map(c=>c.id));for(const c of o)s.has(c.id)||(yield i.api.deleteRecipeImage(r,c.id));for(const c of i.images())yield i.api.upsertRecipeImage(r,{id:c.id,data_url:c.thumbDataUrl,full_data_url:c.fullDataUrl,mime_type:c.mimeType,width:c.width,height:c.height});const a=i.primaryImageId()&&s.has(i.primaryImageId()??"")?i.primaryImageId():null;yield i.api.saveRecipeImageMeta(r,i.images().map(c=>({id:c.id,data_url:c.thumbDataUrl})),a)})()}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-recipe-editor"]],decls:12,vars:12,consts:[["addImagesInput",""],["replaceInput",""],[1,"editor-screen"],[1,"editor-topbar"],["role","tablist","aria-label","Editor sections",1,"tabs"],["type","button","role","tab",1,"tab",3,"click"],["type","button",1,"save",3,"click","disabled"],[1,"error"],["role","tabpanel",1,"content-tab"],["role","tabpanel",1,"images-tab"],["rows","16","placeholder","Recipe",3,"ngModelChange","ngModel","disabled"],[1,"preview-card"],[3,"parsed","showWarnings"],[1,"images-header"],["type","file","accept","image/*","multiple","",1,"visually-hidden",3,"change","disabled"],["type","button",1,"upload",3,"click","disabled"],[1,"empty"],[1,"image-grid"],[1,"image-card"],[1,"image-media"],["alt","Recipe thumbnail",3,"src"],["type","button",1,"primary-corner",3,"click","disabled","title"],[1,"image-actions"],["type","file","accept","image/*",1,"visually-hidden",3,"change","disabled"],["type","button",1,"ghost",3,"click","disabled"],["type","button",1,"danger",3,"click","disabled"]],template:function(i,o){1&i&&(J(0,"section",2)(1,"header",3)(2,"div",4)(3,"button",5),Ve("click",function(){return o.setTab("content")}),ae(4," Recipe & preview "),X(),J(5,"button",5),Ve("click",function(){return o.setTab("images")}),ae(6),X()(),J(7,"button",6),Ve("click",function(){return o.save()}),ae(8),X()(),xe(9,bIe,2,1,"p",7),xe(10,CIe,4,4,"section",8),xe(11,RIe,12,3,"section",9),X()),2&i&&($(3),br("active","content"===o.activeTab()),Vn("aria-selected","content"===o.activeTab()),$(2),br("active","images"===o.activeTab()),Vn("aria-selected","images"===o.activeTab()),$(),Mi(" Images (",o.images().length,") "),$(),rt("disabled",o.state.saving()||!o.api.canWrite()),$(),Mi(" ",o.state.saving()?"Saving":"Save recipe"," "),$(),ke(o.state.error()?9:-1),$(),ke("content"===o.activeTab()?10:-1),$(),ke("images"===o.activeTab()?11:-1))},dependencies:[Wz,df,FR,Fy,Kz],styles:[".editor-screen[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:20px;padding:1rem;min-height:60vh}.editor-topbar[_ngcontent-%COMP%]{display:grid;gap:.75rem}.tabs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;background:#f8fafc;border:1px solid #e5e7eb;padding:.35rem;border-radius:12px}.tab[_ngcontent-%COMP%]{border:0;border-radius:10px;padding:.7rem .75rem;background:transparent;color:#334155;font:inherit;font-size:.95rem}.tab.active[_ngcontent-%COMP%]{background:#111827;color:#fff}.save[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.75rem 1rem;background:#111827;color:#fff;font:inherit}.content-tab[_ngcontent-%COMP%], .images-tab[_ngcontent-%COMP%]{margin-top:1rem}textarea[_ngcontent-%COMP%]{width:100%;min-height:36vh;resize:vertical;border:1px solid #d1d5db;border-radius:14px;padding:.9rem 1rem;background:#fff;font:inherit}.preview-card[_ngcontent-%COMP%]{margin-top:1rem}.images-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .images-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.images-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.35rem;color:#475569}.upload[_ngcontent-%COMP%], .ghost[_ngcontent-%COMP%], .danger[_ngcontent-%COMP%]{border:0;border-radius:12px;padding:.65rem .9rem;font:inherit}.upload[_ngcontent-%COMP%]{margin-top:.85rem;width:100%;background:#111827;color:#fff}.image-grid[_ngcontent-%COMP%]{margin-top:.85rem;display:grid;gap:.75rem;grid-template-columns:repeat(2,minmax(0,1fr))}.image-card[_ngcontent-%COMP%]{min-width:0;border:1px solid #e5e7eb;border-radius:12px;padding:.5rem;display:grid;gap:.5rem;background:#f8fafc}.image-media[_ngcontent-%COMP%]{position:relative}.image-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:10px}.primary-corner[_ngcontent-%COMP%]{position:absolute;top:.45rem;right:.45rem;width:2rem;height:2rem;border:0;border-radius:999px;display:grid;place-items:center;background:#0f172ac7;color:#fff;font-size:1rem;line-height:1;box-shadow:0 4px 16px #0f172a40}.primary-corner.active[_ngcontent-%COMP%]{background:#ca8a04;color:#111827}.image-actions[_ngcontent-%COMP%]{display:grid;gap:.4rem;grid-template-columns:1fr}.image-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-width:0}.ghost[_ngcontent-%COMP%]{background:#e2e8f0;color:#0f172a}.danger[_ngcontent-%COMP%]{background:#b91c1c;color:#fff}.empty[_ngcontent-%COMP%]{margin-top:.85rem;color:#475569}button[_ngcontent-%COMP%]:disabled{opacity:.45}.error[_ngcontent-%COMP%]{margin:.85rem 0 0;color:#b91c1c}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@media (min-width: 520px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.image-actions[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (min-width: 768px){.editor-screen[_ngcontent-%COMP%]{min-height:68vh;padding:1.5rem}.editor-topbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;align-items:center}.save[_ngcontent-%COMP%]{min-width:150px}textarea[_ngcontent-%COMP%]{min-height:42vh}}"]}))}return t(),e})();const MIe=(t,e)=>e.id;function PIe(t,e){1&t&&(ge(0,"p"),ae(1,"Loading"),me())}function NIe(t,e){1&t&&(ge(0,"p"),ae(1,"No recipes"),me())}function xIe(t,e){1&t&&xw(0,"img",3),2&t&&Bc("src",e,yo)}function kIe(t,e){if(1&t){const n=er();ge(0,"li")(1,"button",2),To("click",function(){const i=Et(n).$implicit;return wt(ne(2).open(i.id))}),xe(2,xIe,1,1,"img",3),ge(3,"span"),ae(4),me()()()}if(2&t){let n;const r=e.$implicit,i=ne(2);$(2),ke((n=i.firstThumb(r))?2:-1,n),$(2),Un(i.state.parsedFromRaw(r.raw_text).title)}}function OIe(t,e){if(1&t&&(ge(0,"ul",1),Ln(1,kIe,5,2,"li",null,MIe),me()),2&t){const n=ne();$(),Fn(n.state.recipes())}}const sl=()=>{const t=O(Oa),e=O(un);return!(!t.authLoading()&&!t.user())||e.parseUrl("/login")};(function fie(t,e,n){return Ere({rootComponent:t,platformRef:n?.platformRef,...PF(e)})})(Z_e,{providers:[function Oce(t,...e){return function Vv(t){return{\u0275providers:t}}([{provide:db,multi:!0,useValue:t},[],{provide:ki,useFactory:wU,deps:[un]},{provide:nO,multi:!0,useFactory:TU},e.map(n=>n.\u0275providers)])}([{path:"login",canActivate:[()=>{const t=O(Oa),e=O(un);return!t.user()||e.parseUrl("/")}],component:Jve},{path:"",canActivate:[sl],component:Yve},{path:"recipes",canActivate:[sl],component:(()=>{var t;class e{constructor(){this.state=O(Va),this.router=O(un)}ngOnInit(){var r=this;return v(function*(){0===r.state.recipes().length&&(yield r.state.refresh())})()}open(r){var i=this;return v(function*(){i.state.openDetail(r),yield i.router.navigate(["/recipes",r])})()}firstThumb(r){const i=r.primary_image_id;return i?r.image_thumbs.find(o=>o.id===i)?.data_url??r.image_thumbs[0]?.data_url??null:r.image_thumbs[0]?.data_url??null}static#e=t=()=>(this.\u0275fac=function(i){return new(i||e)},this.\u0275cmp=Xr({type:e,selectors:[["app-recipe-list"]],decls:4,vars:1,consts:[[1,"list-screen"],[1,"recipe-list"],["type","button",1,"recipe-item",3,"click"],["alt","Recipe image","loading","lazy",3,"src"]],template:function(i,o){1&i&&(ge(0,"section",0),xe(1,PIe,2,0,"p")(2,NIe,2,0,"p")(3,OIe,3,0,"ul",1),me()),2&i&&($(),ke(o.state.loading()?1:0===o.state.recipes().length?2:3))},styles:[".list-screen[_ngcontent-%COMP%]{padding:.3rem 0;min-height:60vh}p[_ngcontent-%COMP%]{margin:0}.recipe-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.45rem}.recipe-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:.42rem;background:#fff;color:#0f172a;border:1px solid #e5e7eb;border-radius:6px;font:inherit;display:grid;grid-template-columns:46px 1fr;gap:.55rem;align-items:center}.recipe-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:46px;height:46px;object-fit:cover;border-radius:4px}@media (min-width: 768px){.list-screen[_ngcontent-%COMP%]{min-height:68vh;padding:.45rem 0}}"]}))}return t(),e})()},{path:"recipes/new",canActivate:[sl],component:Jz},{path:"recipes/:id",canActivate:[sl],component:mIe},{path:"recipes/:id/edit",canActivate:[sl],component:Jz},{path:"recipes/:id/cook",canActivate:[sl],component:Nye},{path:"**",redirectTo:""}])]}).catch(t=>console.error(t))}},Ha=>{Ha(Ha.s=149)}]);