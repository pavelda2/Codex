<section class="detail-screen">
  @if (state.selectedParsed()) {
    <div class="detail-top-actions no-print">
      <button
        type="button"
        class="cook-quick-action"
        (click)="startCooking()"
        aria-label="Spustit cooking mode"
        title="Cooking mode"
      >
        üç≥
      </button>
    </div>

    @if (activeImage(); as image) {
      <section class="hero-image no-print">
        <button type="button" class="hero-button" (click)="openGallery(image.id)">
          <img [src]="image.full_data_url" alt="Recipe photo" />
        </button>

        @if (images().length > 1) {
          <div class="thumb-strip">
            @for (thumb of images(); track thumb.id) {
              <button type="button" class="thumb" (click)="selectImage(thumb.id)">
                <img [src]="thumb.data_url" alt="thumbnail" />
              </button>
            }
          </div>
        }
      </section>
    }

    <div class="printable-recipe">
      <app-recipe-preview [parsed]="state.selectedParsed()" />
    </div>

    <div class="detail-actions no-print">
      <button type="button" class="ghost" (click)="edit()" [disabled]="!api.canWrite()">Edit</button>
      <button type="button" class="danger" (click)="remove()" [disabled]="!api.canWrite() || state.deleting()">
        {{ state.deleting() ? 'Deleting' : 'Delete' }}
      </button>
      <button type="button" class="ghost" (click)="state.print()">Print</button>
    </div>

    @if (galleryOpen() && activeImage(); as galleryImage) {
      <section class="gallery-overlay no-print" (click)="closeGallery()">
        <img [src]="galleryImage.full_data_url" alt="Recipe image large" />
      </section>
    }
  } @else {
    <p>Recipe not found</p>
  }
</section>
