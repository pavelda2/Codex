<section class="detail-screen">
  @if (state.selectedParsed()) {
    <div class="printable-recipe">
      <app-recipe-preview [parsed]="state.selectedParsed()" />
    </div>

    @if (activeImage(); as image) {
      <section class="hero-image no-print">
        <button type="button" class="hero-button" (click)="openGallery(image.id)">
          <img [src]="image.full_data_url" alt="Recipe photo" />
        </button>

        @if (images().length > 1) {
          <div class="thumb-strip" aria-label="Other photos">
            @for (thumb of images(); track thumb.id) {
              <button type="button" class="thumb" (click)="selectImage(thumb.id)">
                <img [src]="thumb.data_url" alt="thumbnail" />
              </button>
            }
          </div>
        }
      </section>
    }

    <div class="detail-actions no-print" aria-label="Recipe actions">
      <button type="button" class="cook" (click)="startCooking()" aria-label="Start cooking" title="Cooking mode">
        <span aria-hidden="true">ğŸ³</span>
        <span>Cook</span>
      </button>
      <button type="button" class="ghost" (click)="edit()" [disabled]="!api.canWrite()" aria-label="Edit recipe">âœ</button>
      <button
        type="button"
        class="danger"
        (click)="remove()"
        [disabled]="!api.canWrite() || state.deleting()"
        aria-label="Delete recipe"
      >
        {{ state.deleting() ? 'â€¦' : 'ğŸ—‘' }}
      </button>
      <button type="button" class="ghost" (click)="state.print()" aria-label="Print recipe">ğŸ–¨</button>
    </div>

    @if (galleryOpen() && activeImage(); as galleryImage) {
      <section class="gallery-overlay no-print" (click)="closeGallery()">
        <img [src]="galleryImage.full_data_url" alt="Recipe image large" />
      </section>
    }
  } @else {
    <p>Recipe not found</p>
  }
</section>
