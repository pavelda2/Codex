<section class="home-screen" [class.has-query]="state.searchQuery().trim().length > 0">
  <div class="search-layout">
    <div class="search-wrap">
      <input
        type="search"
        placeholder="Search recipes"
        [ngModel]="state.searchQuery()"
        (ngModelChange)="state.searchQuery.set($event)"
      />
    </div>

    @if (state.searchQuery().trim().length > 0) {
      <section class="results" [class.loading]="state.loading()">
        @if (state.loading()) {
          <p>Loading</p>
        } @else if (state.searchResults().length === 0) {
          <p>No recipes</p>
        } @else {
          <ul class="recipe-list">
            @for (result of state.searchResults(); track trackByRecipeId($index, result)) {
              <li>
                <button type="button" class="recipe-item" (click)="open(result.recipe.id)">
                  <span class="recipe-title" [innerHTML]="result.titleHtml"></span>
                  @if (result.contentHtml) {
                    <span class="recipe-content" [innerHTML]="result.contentHtml"></span>
                  }
                </button>
              </li>
            }
          </ul>
        }
      </section>
    }
  </div>
</section>
