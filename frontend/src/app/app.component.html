<main class="app-shell" [class.cooking-layout]="isCookingLayout()">
  @if (authLoading()) {
    <section class="loading-screen">
      <p>Loading</p>
    </section>
  } @else {
    @if (user() && !isCookingLayout()) {
      <header class="top-bar no-print">
        <h1>Recipes</h1>
        <button type="button" class="icon-ghost" (click)="signOut()" [disabled]="authBusy()" aria-label="Sign out">âŽ‹</button>
      </header>
    }

    <router-outlet />

    @if (user() && !isCookingLayout()) {
      <nav class="bottom-nav no-print" aria-label="Primary navigation">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" aria-label="Search recipes">
          <span class="nav-icon" aria-hidden="true">ðŸ”Ž</span>
          <span class="nav-label">Search</span>
        </a>
        <a routerLink="/recipes" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" aria-label="Recipe list">
          <span class="nav-icon" aria-hidden="true">ðŸ“š</span>
          <span class="nav-label">Library</span>
        </a>
        <a routerLink="/recipes/new" routerLinkActive="active" (click)="startAdd()" [class.disabled]="!canWrite()" aria-label="Add new recipe">
          <span class="nav-icon" aria-hidden="true">ï¼‹</span>
          <span class="nav-label">Add</span>
        </a>
      </nav>
    }
  }

  @if (state.error() && !isCookingLayout()) {
    <p class="error no-print">{{ state.error() }}</p>
  }
</main>
