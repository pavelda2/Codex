<main class="app-shell" [class.cooking-layout]="isCookingLayout()">
  @if (authLoading()) {
    <section class="loading-screen">
      <p>Loading</p>
    </section>
  } @else {
    @if (user() && !isCookingLayout()) {
      <header class="top-bar no-print">
        <h1>Recipes</h1>
        <button type="button" class="ghost" (click)="signOut()" [disabled]="authBusy()">Sign out</button>
      </header>
    }

    <router-outlet />

    @if (user() && !isCookingLayout()) {
      <nav class="bottom-nav no-print">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
        <a routerLink="/recipes" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Recipes</a>
        <a routerLink="/recipes/new" routerLinkActive="active" (click)="startAdd()" [class.disabled]="!canWrite()">Add</a>
      </nav>
    }
  }

  @if (state.error() && !isCookingLayout()) {
    <p class="error no-print">{{ state.error() }}</p>
  }
</main>
